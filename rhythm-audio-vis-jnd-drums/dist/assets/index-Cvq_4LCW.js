var uw=Object.defineProperty;var sw=(e,t,n)=>t in e?uw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var vs=(e,t,n)=>(sw(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function de(){}function f1(e){return e()}function Zf(){return Object.create(null)}function gn(e){e.forEach(f1)}function h1(e){return typeof e=="function"}function Oe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ka;function lw(e,t){return e===t?!0:(Ka||(Ka=document.createElement("a")),Ka.href=t,e===Ka.href)}function cw(e){return Object.keys(e).length===0}function A(e,t){e.appendChild(t)}function Z(e,t,n){e.insertBefore(t,n||null)}function X(e){e.parentNode&&e.parentNode.removeChild(e)}function cr(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function Kf(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Se(e){return document.createTextNode(e)}function q(){return Se(" ")}function yc(){return Se("")}function Qe(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function F(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Qr(e){return e===""?null:+e}function fw(e){return Array.from(e.childNodes)}function St(e,t){t=""+t,e.data!==t&&(e.data=t)}function at(e,t){e.value=t??""}function Ce(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Io(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function d1(e){const t=e.querySelector(":checked");return t&&t.__value}let Ji;function Vi(e){Ji=e}function wc(){if(!Ji)throw new Error("Function called outside component initialization");return Ji}function xa(e){wc().$$.on_mount.push(e)}function _t(e){wc().$$.after_update.push(e)}function hw(e){wc().$$.on_destroy.push(e)}const Ur=[],We=[];let Vr=[];const Qf=[],dw=Promise.resolve();let fl=!1;function mw(){fl||(fl=!0,dw.then(m1))}function ea(e){Vr.push(e)}const _s=new Set;let Lr=0;function m1(){if(Lr!==0)return;const e=Ji;do{try{for(;Lr<Ur.length;){const t=Ur[Lr];Lr++,Vi(t),pw(t.$$)}}catch(t){throw Ur.length=0,Lr=0,t}for(Vi(null),Ur.length=0,Lr=0;We.length;)We.pop()();for(let t=0;t<Vr.length;t+=1){const n=Vr[t];_s.has(n)||(_s.add(n),n())}Vr.length=0}while(Ur.length);for(;Qf.length;)Qf.pop()();fl=!1,_s.clear(),Vi(e)}function pw(e){if(e.fragment!==null){e.update(),gn(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ea)}}function bw(e){const t=[],n=[];Vr.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Vr=t}const xo=new Set;let hr;function cn(){hr={r:0,c:[],p:hr}}function fn(){hr.r||gn(hr.c),hr=hr.p}function Q(e,t){e&&e.i&&(xo.delete(e),e.i(t))}function oe(e,t,n,r){if(e&&e.o){if(xo.has(e))return;xo.add(e),hr.c.push(()=>{xo.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function Pt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Pe(e){e&&e.c()}function ve(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),ea(()=>{const a=e.$$.on_mount.map(f1).filter(h1);e.$$.on_destroy?e.$$.on_destroy.push(...a):gn(a),e.$$.on_mount=[]}),i.forEach(ea)}function _e(e,t){const n=e.$$;n.fragment!==null&&(bw(n.after_update),gn(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function gw(e,t){e.$$.dirty[0]===-1&&(Ur.push(e),mw(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function qe(e,t,n,r,i,a,o=null,u=[-1]){const s=Ji;Vi(e);const l=e.$$={fragment:null,ctx:[],props:a,update:de,not_equal:i,bound:Zf(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:Zf(),dirty:u,skip_bound:!1,root:t.target||s.$$.root};o&&o(l.root);let c=!1;if(l.ctx=n?n(e,t.props||{},(f,h,...d)=>{const m=d.length?d[0]:h;return l.ctx&&i(l.ctx[f],l.ctx[f]=m)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](m),c&&gw(e,f)),h}):[],l.update(),c=!0,gn(l.before_update),l.fragment=r?r(l.ctx):!1,t.target){if(t.hydrate){const f=fw(t.target);l.fragment&&l.fragment.l(f),f.forEach(X)}else l.fragment&&l.fragment.c();t.intro&&Q(e.$$.fragment),ve(e,t.target,t.anchor),m1()}Vi(s)}class Ge{constructor(){vs(this,"$$");vs(this,"$$set")}$destroy(){_e(this,1),this.$destroy=de}$on(t,n){if(!h1(n))return de;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!cw(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const yw="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yw);function yt(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ma(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Eu(e){let t,n,r;e.length!==2?(t=yt,n=(u,s)=>yt(e(u),s),r=(u,s)=>e(u)-s):(t=e===yt||e===Ma?e:ww,n=e,r=e);function i(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<0?l=f+1:c=f}while(l<c)}return l}function a(u,s,l=0,c=u.length){if(l<c){if(t(s,s)!==0)return c;do{const f=l+c>>>1;n(u[f],s)<=0?l=f+1:c=f}while(l<c)}return l}function o(u,s,l=0,c=u.length){const f=i(u,s,l,c-1);return f>l&&r(u[f-1],s)>-r(u[f],s)?f-1:f}return{left:i,center:o,right:a}}function ww(){return 0}function p1(e){return e===null?NaN:+e}function*vw(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const _w=Eu(yt),Cu=_w.right;Eu(p1).center;function vc(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function xw(e){return e.length|0}function Mw(e){return!(e>0)}function Pw(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function Aw(e){return t=>e(...t)}function b1(...e){const t=typeof e[e.length-1]=="function"&&Aw(e.pop());e=e.map(Pw);const n=e.map(xw),r=e.length-1,i=new Array(r+1).fill(0),a=[];if(r<0||n.some(Mw))return a;for(;;){a.push(i.map((u,s)=>e[s][u]));let o=r;for(;++i[o]===n[o];){if(o===0)return t?a.map(t):a;i[o--]=0}}}function Sw(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function _c(e,t){let n=0,r,i=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(r=u-i,i+=r/++n,a+=r*(u-i))}if(n>1)return a/(n-1)}function ku(e,t){const n=_c(e,t);return n&&Math.sqrt(n)}function Bt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class yr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[r++]=u),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}class wr extends Map{constructor(t,n=w1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(hl(this,t))}has(t){return super.has(hl(this,t))}set(t,n){return super.set(g1(this,t),n)}delete(t){return super.delete(y1(this,t))}}class Tu extends Set{constructor(t,n=w1){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(hl(this,t))}add(t){return super.add(g1(this,t))}delete(t){return super.delete(y1(this,t))}}function hl({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function g1({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function y1({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function w1(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Oo(e){return e}function $u(e,...t){return Du(e,Oo,Oo,t)}function kn(e,...t){return Du(e,Array.from,Oo,t)}function jr(e,t,...n){return Du(e,Oo,t,n)}function Ew(e,t,...n){return Du(e,Array.from,t,n)}function Du(e,t,n,r){return function i(a,o){if(o>=r.length)return n(a);const u=new wr,s=r[o++];let l=-1;for(const c of a){const f=s(c,++l,a),h=u.get(f);h?h.push(c):u.set(f,[c])}for(const[c,f]of u)u.set(c,i(f,o));return t(u)}(e,0)}function Cw(e,t){return Array.from(t,n=>e[n])}function ta(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,a)=>a);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,a)=>{for(const o of t){const u=qo(o[i],o[a]);if(u)return u}})):(n=e.map(n),r.sort((i,a)=>qo(n[i],n[a]))),Cw(e,r)}return e.sort(v1(n))}function v1(e=yt){if(e===yt)return qo;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function qo(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function xc(e,t,n){return(t.length!==2?ta(jr(e,t,n),([r,i],[a,o])=>yt(i,o)||yt(r,a)):ta($u(e,n),([r,i],[a,o])=>t(i,o)||yt(r,a))).map(([r])=>r)}const kw=Math.sqrt(50),Tw=Math.sqrt(10),$w=Math.sqrt(2);function Go(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=kw?10:a>=Tw?5:a>=$w?2:1;let u,s,l;return i<0?(l=Math.pow(10,-i)/o,u=Math.round(e*l),s=Math.round(t*l),u/l<e&&++u,s/l>t&&--s,l=-l):(l=Math.pow(10,i)*o,u=Math.round(e/l),s=Math.round(t/l),u*l<e&&++u,s*l>t&&--s),s<u&&.5<=n&&n<2?Go(e,t,n*2):[u,s,l]}function na(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?Go(t,e,n):Go(e,t,n);if(!(a>=i))return[];const u=a-i+1,s=new Array(u);if(r)if(o<0)for(let l=0;l<u;++l)s[l]=(a-l)/-o;else for(let l=0;l<u;++l)s[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)s[l]=(i+l)/-o;else for(let l=0;l<u;++l)s[l]=(i+l)*o;return s}function Uo(e,t,n){return t=+t,e=+e,n=+n,Go(e,t,n)[2]}function dl(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Uo(t,e,n):Uo(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Dw(e){return Math.max(1,Math.ceil(Math.log(vc(e))/Math.LN2)+1)}function qt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Nw(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function Nn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Fw(e,t){let n,r=-1,i=-1;if(t===void 0)for(const a of e)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of e)(a=t(a,++i,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function _1(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?qo:v1(i);r>n;){if(r-n>600){const s=r-n+1,l=t-n+1,c=Math.log(s),f=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*f*(s-f)/s)*(l-s/2<0?-1:1),d=Math.max(n,Math.floor(t-l*f/s+h)),m=Math.min(r,Math.floor(t+(s-l)*f/s+h));_1(e,t,d,m,i)}const a=e[t];let o=n,u=r;for(Ai(e,n,t),i(e[r],a)>0&&Ai(e,n,r);o<u;){for(Ai(e,o,u),++o,--u;i(e[o],a)<0;)++o;for(;i(e[u],a)>0;)--u}i(e[n],a)===0?Ai(e,n,u):(++u,Ai(e,u,r)),u<=t&&(n=u+1),t<=u&&(r=u-1)}return e}function Ai(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function x1(e,t=yt){let n,r=!1;if(t.length===1){let i;for(const a of e){const o=t(a);(r?yt(o,i)>0:yt(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function Jr(e,t,n){if(e=Float64Array.from(vw(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Nn(e);if(t>=1)return qt(e);var r,i=(r-1)*t,a=Math.floor(i),o=qt(_1(e,a).subarray(0,a+1)),u=Nn(e.subarray(a+1));return o+(u-o)*(i-a)}}function Bw(e,t,n=p1){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(i-a)}}function Lw(e,t,n){const r=vc(e),i=Jr(e,.75)-Jr(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function M1(e,t,n){const r=vc(e),i=ku(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Nu(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function ml(e,t){return Jr(e,.5,t)}function*Rw(e){for(const t of e)yield*t}function P1(e){return Array.from(Rw(e))}function Iw(e,t){const n=new wr;if(t===void 0)for(let a of e)a!=null&&a>=a&&n.set(a,(n.get(a)||0)+1);else{let a=-1;for(let o of e)(o=t(o,++a,e))!=null&&o>=o&&n.set(o,(n.get(o)||0)+1)}let r,i=0;for(const[a,o]of n)o>i&&(i=o,r=a);return r}function Ow(e,t=qw){const n=[];let r,i=!1;for(const a of e)i&&n.push(t(r,a)),r=a,i=!0;return n}function qw(e,t){return[e,t]}function pl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Kn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function zo(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Gw(e){return e}var xs=1,Ms=2,bl=3,Qa=4,Jf=1e-6;function Uw(e){return"translate("+e+",0)"}function zw(e){return"translate(0,"+e+")"}function Hw(e){return t=>+e(t)}function Ww(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Vw(){return!this.__axis}function jw(e,t){var n=[],r=null,i=null,a=6,o=6,u=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===xs||e===Qa?-1:1,c=e===Qa||e===Ms?"x":"y",f=e===xs||e===bl?Uw:zw;function h(d){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):Gw),y=Math.max(a,0)+u,w=t.range(),g=+w[0]+s,v=+w[w.length-1]+s,b=(t.bandwidth?Ww:Hw)(t.copy(),s),_=d.selection?d.selection():d,x=_.selectAll(".domain").data([null]),M=_.selectAll(".tick").data(m,t).order(),S=M.exit(),E=M.enter().append("g").attr("class","tick"),$=M.select("line"),P=M.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(E),$=$.merge(E.append("line").attr("stroke","currentColor").attr(c+"2",l*a)),P=P.merge(E.append("text").attr("fill","currentColor").attr(c,l*y).attr("dy",e===xs?"0em":e===bl?"0.71em":"0.32em")),d!==_&&(x=x.transition(d),M=M.transition(d),$=$.transition(d),P=P.transition(d),S=S.transition(d).attr("opacity",Jf).attr("transform",function(T){return isFinite(T=b(T))?f(T+s):this.getAttribute("transform")}),E.attr("opacity",Jf).attr("transform",function(T){var I=this.parentNode.__axis;return f((I&&isFinite(I=I(T))?I:b(T))+s)})),S.remove(),x.attr("d",e===Qa||e===Ms?o?"M"+l*o+","+g+"H"+s+"V"+v+"H"+l*o:"M"+s+","+g+"V"+v:o?"M"+g+","+l*o+"V"+s+"H"+v+"V"+l*o:"M"+g+","+s+"H"+v),M.attr("opacity",1).attr("transform",function(T){return f(b(T)+s)}),$.attr(c+"2",l*a),P.attr(c,l*y).text(p),_.filter(Vw).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Ms?"start":e===Qa?"end":"middle"),_.each(function(){this.__axis=b})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(r=d==null?null:Array.from(d),h):r&&r.slice()},h.tickFormat=function(d){return arguments.length?(i=d,h):i},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(u=+d,h):u},h.offset=function(d){return arguments.length?(s=+d,h):s},h}function Yw(e){return jw(bl,e)}var Xw={value:()=>{}};function A1(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Mo(n)}function Mo(e){this._=e}function Zw(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Mo.prototype=A1.prototype={constructor:Mo,on:function(e,t){var n=this._,r=Zw(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=Kw(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=eh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=eh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Mo(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function Kw(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function eh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Xw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var gl="http://www.w3.org/1999/xhtml";const ei={svg:"http://www.w3.org/2000/svg",xhtml:gl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),ei.hasOwnProperty(t)?{space:ei[t],local:e}:e}function Qw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===gl&&t.documentElement.namespaceURI===gl?t.createElement(e):t.createElementNS(n,e)}}function Jw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bu(e){var t=Fu(e);return(t.local?Jw:Qw)(t)}function e3(){}function Mc(e){return e==null?e3:function(){return this.querySelector(e)}}function t3(e){typeof e!="function"&&(e=Mc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Et(r,this._parents)}function n3(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function r3(){return[]}function S1(e){return e==null?r3:function(){return this.querySelectorAll(e)}}function i3(e){return function(){return n3(e.apply(this,arguments))}}function a3(e){typeof e=="function"?e=i3(e):e=S1(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Et(r,i)}function E1(e){return function(){return this.matches(e)}}function C1(e){return function(t){return t.matches(e)}}var o3=Array.prototype.find;function u3(e){return function(){return o3.call(this.children,e)}}function s3(){return this.firstElementChild}function l3(e){return this.select(e==null?s3:u3(typeof e=="function"?e:C1(e)))}var c3=Array.prototype.filter;function f3(){return Array.from(this.children)}function h3(e){return function(){return c3.call(this.children,e)}}function d3(e){return this.selectAll(e==null?f3:h3(typeof e=="function"?e:C1(e)))}function m3(e){typeof e!="function"&&(e=E1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Et(r,this._parents)}function k1(e){return new Array(e.length)}function p3(){return new Et(this._enter||this._groups.map(k1),this._parents)}function Ho(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ho.prototype={constructor:Ho,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function b3(e){return function(){return e}}function g3(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new Ho(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function y3(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new Ho(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function w3(e){return e.__data__}function v3(e,t){if(!arguments.length)return Array.from(this,w3);var n=t?y3:g3,r=this._parents,i=this._groups;typeof e!="function"&&(e=b3(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=_3(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),y=o[l]=new Array(m),w=s[l]=new Array(h);n(c,f,p,y,w,d,t);for(var g=0,v=0,b,_;g<m;++g)if(b=p[g]){for(g>=v&&(v=g+1);!(_=y[v])&&++v<m;);b._next=_||null}}return o=new Et(o,r),o._enter=u,o._exit=s,o}function _3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function x3(){return new Et(this._exit||this._groups.map(k1),this._parents)}function M3(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function P3(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),u=new Array(i),s=0;s<o;++s)for(var l=n[s],c=r[s],f=l.length,h=u[s]=new Array(f),d,m=0;m<f;++m)(d=l[m]||c[m])&&(h[m]=d);for(;s<i;++s)u[s]=n[s];return new Et(u,this._parents)}function A3(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function S3(e){e||(e=E3);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Et(i,this._parents).order()}function E3(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function C3(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function k3(){return Array.from(this)}function T3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function $3(){let e=0;for(const t of this)++e;return e}function D3(){return!this.node()}function N3(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function F3(e){return function(){this.removeAttribute(e)}}function B3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L3(e,t){return function(){this.setAttribute(e,t)}}function R3(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function I3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function O3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function q3(e,t){var n=Fu(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?B3:F3:typeof t=="function"?n.local?O3:I3:n.local?R3:L3)(n,t))}function T1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function G3(e){return function(){this.style.removeProperty(e)}}function U3(e,t,n){return function(){this.style.setProperty(e,t,n)}}function z3(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function H3(e,t,n){return arguments.length>1?this.each((t==null?G3:typeof t=="function"?z3:U3)(e,t,n??"")):ti(this.node(),e)}function ti(e,t){return e.style.getPropertyValue(t)||T1(e).getComputedStyle(e,null).getPropertyValue(t)}function W3(e){return function(){delete this[e]}}function V3(e,t){return function(){this[e]=t}}function j3(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Y3(e,t){return arguments.length>1?this.each((t==null?W3:typeof t=="function"?j3:V3)(e,t)):this.node()[e]}function $1(e){return e.trim().split(/^|\s+/)}function Pc(e){return e.classList||new D1(e)}function D1(e){this._node=e,this._names=$1(e.getAttribute("class")||"")}D1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function N1(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function F1(e,t){for(var n=Pc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function X3(e){return function(){N1(this,e)}}function Z3(e){return function(){F1(this,e)}}function K3(e,t){return function(){(t.apply(this,arguments)?N1:F1)(this,e)}}function Q3(e,t){var n=$1(e+"");if(arguments.length<2){for(var r=Pc(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?K3:t?X3:Z3)(n,t))}function J3(){this.textContent=""}function ev(e){return function(){this.textContent=e}}function tv(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function nv(e){return arguments.length?this.each(e==null?J3:(typeof e=="function"?tv:ev)(e)):this.node().textContent}function rv(){this.innerHTML=""}function iv(e){return function(){this.innerHTML=e}}function av(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ov(e){return arguments.length?this.each(e==null?rv:(typeof e=="function"?av:iv)(e)):this.node().innerHTML}function uv(){this.nextSibling&&this.parentNode.appendChild(this)}function sv(){return this.each(uv)}function lv(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cv(){return this.each(lv)}function fv(e){var t=typeof e=="function"?e:Bu(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function hv(){return null}function dv(e,t){var n=typeof e=="function"?e:Bu(e),r=t==null?hv:typeof t=="function"?t:Mc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function mv(){var e=this.parentNode;e&&e.removeChild(this)}function pv(){return this.each(mv)}function bv(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gv(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yv(e){return this.select(e?gv:bv)}function wv(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vv(e){return function(t){e.call(this,t,this.__data__)}}function _v(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function xv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function Mv(e,t,n){return function(){var r=this.__on,i,a=vv(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Pv(e,t,n){var r=_v(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?Mv:xv,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function B1(e,t,n){var r=T1(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Av(e,t){return function(){return B1(this,e,t)}}function Sv(e,t){return function(){return B1(this,e,t.apply(this,arguments))}}function Ev(e,t){return this.each((typeof t=="function"?Sv:Av)(e,t))}function*Cv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var L1=[null];function Et(e,t){this._groups=e,this._parents=t}function Pa(){return new Et([[document.documentElement]],L1)}function kv(){return this}Et.prototype=Pa.prototype={constructor:Et,select:t3,selectAll:a3,selectChild:l3,selectChildren:d3,filter:m3,data:v3,enter:p3,exit:x3,join:M3,merge:P3,selection:kv,order:A3,sort:S3,call:C3,nodes:k3,node:T3,size:$3,empty:D3,each:N3,attr:q3,style:H3,property:Y3,classed:Q3,text:nv,html:ov,raise:sv,lower:cv,append:fv,insert:dv,remove:pv,clone:yv,datum:wv,on:Pv,dispatch:Ev,[Symbol.iterator]:Cv};function ji(e){return typeof e=="string"?new Et([[document.querySelector(e)]],[document.documentElement]):new Et([[e]],L1)}function Tv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function $v(e,t){if(e=Tv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function gi(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Aa(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nr(){}var vr=.7,ni=1/vr,Yr="\\s*([+-]?\\d+)\\s*",ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dv=/^#([0-9a-f]{3,8})$/,Nv=new RegExp(`^rgb\\(${Yr},${Yr},${Yr}\\)$`),Fv=new RegExp(`^rgb\\(${hn},${hn},${hn}\\)$`),Bv=new RegExp(`^rgba\\(${Yr},${Yr},${Yr},${ra}\\)$`),Lv=new RegExp(`^rgba\\(${hn},${hn},${hn},${ra}\\)$`),Rv=new RegExp(`^hsl\\(${ra},${hn},${hn}\\)$`),Iv=new RegExp(`^hsla\\(${ra},${hn},${hn},${ra}\\)$`),th={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gi(nr,_r,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nh,formatHex:nh,formatHex8:Ov,formatHsl:qv,formatRgb:rh,toString:rh});function nh(){return this.rgb().formatHex()}function Ov(){return this.rgb().formatHex8()}function qv(){return R1(this).formatHsl()}function rh(){return this.rgb().formatRgb()}function _r(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Dv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ih(t):n===3?new Je(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ja(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ja(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Nv.exec(e))?new Je(t[1],t[2],t[3],1):(t=Fv.exec(e))?new Je(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Bv.exec(e))?Ja(t[1],t[2],t[3],t[4]):(t=Lv.exec(e))?Ja(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Rv.exec(e))?uh(t[1],t[2]/100,t[3]/100,1):(t=Iv.exec(e))?uh(t[1],t[2]/100,t[3]/100,t[4]):th.hasOwnProperty(e)?ih(th[e]):e==="transparent"?new Je(NaN,NaN,NaN,0):null}function ih(e){return new Je(e>>16&255,e>>8&255,e&255,1)}function Ja(e,t,n,r){return r<=0&&(e=t=n=NaN),new Je(e,t,n,r)}function Ac(e){return e instanceof nr||(e=_r(e)),e?(e=e.rgb(),new Je(e.r,e.g,e.b,e.opacity)):new Je}function Qn(e,t,n,r){return arguments.length===1?Ac(e):new Je(e,t,n,r??1)}function Je(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}gi(Je,Qn,Aa(nr,{brighter(e){return e=e==null?ni:Math.pow(ni,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new Je(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Je(pr(this.r),pr(this.g),pr(this.b),Wo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ah,formatHex:ah,formatHex8:Gv,formatRgb:oh,toString:oh}));function ah(){return`#${dr(this.r)}${dr(this.g)}${dr(this.b)}`}function Gv(){return`#${dr(this.r)}${dr(this.g)}${dr(this.b)}${dr((isNaN(this.opacity)?1:this.opacity)*255)}`}function oh(){const e=Wo(this.opacity);return`${e===1?"rgb(":"rgba("}${pr(this.r)}, ${pr(this.g)}, ${pr(this.b)}${e===1?")":`, ${e})`}`}function Wo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function dr(e){return e=pr(e),(e<16?"0":"")+e.toString(16)}function uh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jt(e,t,n,r)}function R1(e){if(e instanceof jt)return new jt(e.h,e.s,e.l,e.opacity);if(e instanceof nr||(e=_r(e)),!e)return new jt;if(e instanceof jt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new jt(o,u,s,e.opacity)}function yl(e,t,n,r){return arguments.length===1?R1(e):new jt(e,t,n,r??1)}function jt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gi(jt,yl,Aa(nr,{brighter(e){return e=e==null?ni:Math.pow(ni,e),new jt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new jt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Je(Ps(e>=240?e-240:e+120,i,r),Ps(e,i,r),Ps(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new jt(sh(this.h),eo(this.s),eo(this.l),Wo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Wo(this.opacity);return`${e===1?"hsl(":"hsla("}${sh(this.h)}, ${eo(this.s)*100}%, ${eo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function sh(e){return e=(e||0)%360,e<0?e+360:e}function eo(e){return Math.max(0,Math.min(1,e||0))}function Ps(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const I1=Math.PI/180,O1=180/Math.PI,Vo=18,q1=.96422,G1=1,U1=.82521,z1=4/29,Xr=6/29,H1=3*Xr*Xr,Uv=Xr*Xr*Xr;function W1(e){if(e instanceof dn)return new dn(e.l,e.a,e.b,e.opacity);if(e instanceof Tn)return V1(e);e instanceof Je||(e=Ac(e));var t=Cs(e.r),n=Cs(e.g),r=Cs(e.b),i=As((.2225045*t+.7168786*n+.0606169*r)/G1),a,o;return t===n&&n===r?a=o=i:(a=As((.4360747*t+.3850649*n+.1430804*r)/q1),o=As((.0139322*t+.0971045*n+.7141733*r)/U1)),new dn(116*i-16,500*(a-i),200*(i-o),e.opacity)}function wl(e,t,n,r){return arguments.length===1?W1(e):new dn(e,t,n,r??1)}function dn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}gi(dn,wl,Aa(nr,{brighter(e){return new dn(this.l+Vo*(e??1),this.a,this.b,this.opacity)},darker(e){return new dn(this.l-Vo*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=q1*Ss(t),e=G1*Ss(e),n=U1*Ss(n),new Je(Es(3.1338561*t-1.6168667*e-.4906146*n),Es(-.9787684*t+1.9161415*e+.033454*n),Es(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function As(e){return e>Uv?Math.pow(e,1/3):e/H1+z1}function Ss(e){return e>Xr?e*e*e:H1*(e-z1)}function Es(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Cs(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function zv(e){if(e instanceof Tn)return new Tn(e.h,e.c,e.l,e.opacity);if(e instanceof dn||(e=W1(e)),e.a===0&&e.b===0)return new Tn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*O1;return new Tn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function vl(e,t,n,r){return arguments.length===1?zv(e):new Tn(e,t,n,r??1)}function Tn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function V1(e){if(isNaN(e.h))return new dn(e.l,0,0,e.opacity);var t=e.h*I1;return new dn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}gi(Tn,vl,Aa(nr,{brighter(e){return new Tn(this.h,this.c,this.l+Vo*(e??1),this.opacity)},darker(e){return new Tn(this.h,this.c,this.l-Vo*(e??1),this.opacity)},rgb(){return V1(this).rgb()}}));var j1=-.14861,Sc=1.78277,Ec=-.29227,Lu=-.90649,ia=1.97294,lh=ia*Lu,ch=ia*Sc,fh=Sc*Ec-Lu*j1;function Hv(e){if(e instanceof br)return new br(e.h,e.s,e.l,e.opacity);e instanceof Je||(e=Ac(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(fh*r+lh*t-ch*n)/(fh+lh-ch),a=r-i,o=(ia*(n-i)-Ec*a)/Lu,u=Math.sqrt(o*o+a*a)/(ia*i*(1-i)),s=u?Math.atan2(o,a)*O1-120:NaN;return new br(s<0?s+360:s,u,i,e.opacity)}function pn(e,t,n,r){return arguments.length===1?Hv(e):new br(e,t,n,r??1)}function br(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}gi(br,pn,Aa(nr,{brighter(e){return e=e==null?ni:Math.pow(ni,e),new br(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new br(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*I1,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Je(255*(t+n*(j1*r+Sc*i)),255*(t+n*(Ec*r+Lu*i)),255*(t+n*(ia*r)),this.opacity)}}));function Wv(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function Vv(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Wv((n-r/t)*t,o,i,a,u)}}const Ru=e=>()=>e;function Y1(e,t){return function(n){return e+n*t}}function jv(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Cc(e,t){var n=t-e;return n?Y1(e,n>180||n<-180?n-360*Math.round(n/360):n):Ru(isNaN(e)?t:e)}function Yv(e){return(e=+e)==1?ut:function(t,n){return n-t?jv(t,n,e):Ru(isNaN(t)?n:t)}}function ut(e,t){var n=t-e;return n?Y1(e,n):Ru(isNaN(e)?t:e)}const xr=function e(t){var n=Yv(t);function r(i,a){var o=n((i=Qn(i)).r,(a=Qn(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=ut(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Xv(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=Qn(t[o]),r[o]=u.r||0,i[o]=u.g||0,a[o]=u.b||0;return r=e(r),i=e(i),a=e(a),u.opacity=1,function(s){return u.r=r(s),u.g=i(s),u.b=a(s),u+""}}}var Zv=Xv(Vv);function Kv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Qv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Jv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Sa(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<r;++o)a[o]=i[o](u);return a}}function e_(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ot(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function t_(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Sa(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var _l=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ks=new RegExp(_l.source,"g");function n_(e){return function(){return e}}function r_(e){return function(t){return e(t)+""}}function X1(e,t){var n=_l.lastIndex=ks.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=_l.exec(e))&&(i=ks.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:ot(r,i)})),n=ks.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?r_(s[0].x):n_(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}function Sa(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ru(t):(n==="number"?ot:n==="string"?(r=_r(t))?(t=r,xr):X1:t instanceof _r?xr:t instanceof Date?e_:Qv(t)?Kv:Array.isArray(t)?Jv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?t_:ot)(e,t)}function kc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var hh=180/Math.PI,xl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Z1(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*hh,skewX:Math.atan(s)*hh,scaleX:o,scaleY:u}}var to;function i_(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?xl:Z1(t.a,t.b,t.c,t.d,t.e,t.f)}function a_(e){return e==null||(to||(to=document.createElementNS("http://www.w3.org/2000/svg","g")),to.setAttribute("transform",e),!(e=to.transform.baseVal.consolidate()))?xl:(e=e.matrix,Z1(e.a,e.b,e.c,e.d,e.e,e.f))}function K1(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:ot(l,f)},{i:p-2,x:ot(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:ot(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:ot(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:ot(l,f)},{i:p-2,x:ot(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,y;++m<p;)f[(y=h[m]).i]=y.x(d);return f.join("")}}}var o_=K1(i_,"px, ","px)","deg)"),u_=K1(a_,", ",")",")");function s_(e){return function(t,n){var r=e((t=yl(t)).h,(n=yl(n)).h),i=ut(t.s,n.s),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(u){return t.h=r(u),t.s=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const l_=s_(Cc);function c_(e,t){var n=ut((e=wl(e)).l,(t=wl(t)).l),r=ut(e.a,t.a),i=ut(e.b,t.b),a=ut(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=a(o),e+""}}function f_(e){return function(t,n){var r=e((t=vl(t)).h,(n=vl(n)).h),i=ut(t.c,n.c),a=ut(t.l,n.l),o=ut(t.opacity,n.opacity);return function(u){return t.h=r(u),t.c=i(u),t.l=a(u),t.opacity=o(u),t+""}}}const h_=f_(Cc);function Q1(e){return function t(n){n=+n;function r(i,a){var o=e((i=pn(i)).h,(a=pn(a)).h),u=ut(i.s,a.s),s=ut(i.l,a.l),l=ut(i.opacity,a.opacity);return function(c){return i.h=o(c),i.s=u(c),i.l=s(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}Q1(Cc);var Tc=Q1(ut);function Iu(e,t){t===void 0&&(t=e,e=Sa);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var u=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[u](o-u)}}function Xt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var ri=0,Fi=0,Si=0,J1=1e3,jo,Bi,Yo=0,Mr=0,Ou=0,aa=typeof performance=="object"&&performance.now?performance:Date,em=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $c(){return Mr||(em(d_),Mr=aa.now()+Ou)}function d_(){Mr=0}function Xo(){this._call=this._time=this._next=null}Xo.prototype=tm.prototype={constructor:Xo,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$c():+n)+(t==null?0:+t),!this._next&&Bi!==this&&(Bi?Bi._next=this:jo=this,Bi=this),this._call=e,this._time=n,Ml()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ml())}};function tm(e,t,n){var r=new Xo;return r.restart(e,t,n),r}function m_(){$c(),++ri;for(var e=jo,t;e;)(t=Mr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ri}function dh(){Mr=(Yo=aa.now())+Ou,ri=Fi=0;try{m_()}finally{ri=0,b_(),Mr=0}}function p_(){var e=aa.now(),t=e-Yo;t>J1&&(Ou-=t,Yo=e)}function b_(){for(var e,t=jo,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:jo=n);Bi=e,Ml(r)}function Ml(e){if(!ri){Fi&&(Fi=clearTimeout(Fi));var t=e-Mr;t>24?(e<1/0&&(Fi=setTimeout(dh,e-aa.now()-Ou)),Si&&(Si=clearInterval(Si))):(Si||(Yo=aa.now(),Si=setInterval(p_,J1)),ri=1,em(dh))}}function mh(e,t,n){var r=new Xo;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var g_=A1("start","end","cancel","interrupt"),y_=[],nm=0,ph=1,Pl=2,Po=3,bh=4,Al=5,Ao=6;function qu(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;w_(e,n,{name:t,index:r,group:i,on:g_,tween:y_,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:nm})}function Dc(e,t){var n=Jt(e,t);if(n.state>nm)throw new Error("too late; already scheduled");return n}function yn(e,t){var n=Jt(e,t);if(n.state>Po)throw new Error("too late; already running");return n}function Jt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function w_(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=tm(a,0,n.time);function a(l){n.state=ph,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==ph)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Po)return mh(o);d.state===bh?(d.state=Ao,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=Ao,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(mh(function(){n.state===Po&&(n.state=bh,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=Pl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pl){for(n.state=Po,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=Al,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===Al&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=Ao,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function v_(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Pl&&r.state<Al,r.state=Ao,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function __(e){return this.each(function(){v_(this,e)})}function x_(e,t){var n,r;return function(){var i=yn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function M_(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=yn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function P_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Jt(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?x_:M_)(n,e,t))}function Nc(e,t,n){var r=e._id;return e.each(function(){var i=yn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Jt(i,r).value[t]}}function rm(e,t){var n;return(typeof t=="number"?ot:t instanceof _r?xr:(n=_r(t))?(t=n,xr):X1)(e,t)}function A_(e){return function(){this.removeAttribute(e)}}function S_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function E_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function C_(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function k_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function T_(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function $_(e,t){var n=Fu(e),r=n==="transform"?u_:rm;return this.attrTween(e,typeof t=="function"?(n.local?T_:k_)(n,r,Nc(this,"attr."+e,t)):t==null?(n.local?S_:A_)(n):(n.local?C_:E_)(n,r,t))}function D_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function N_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function F_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&N_(e,a)),n}return i._value=t,i}function B_(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&D_(e,a)),n}return i._value=t,i}function L_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Fu(e);return this.tween(n,(r.local?F_:B_)(r,t))}function R_(e,t){return function(){Dc(this,e).delay=+t.apply(this,arguments)}}function I_(e,t){return t=+t,function(){Dc(this,e).delay=t}}function O_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?R_:I_)(t,e)):Jt(this.node(),t).delay}function q_(e,t){return function(){yn(this,e).duration=+t.apply(this,arguments)}}function G_(e,t){return t=+t,function(){yn(this,e).duration=t}}function U_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?q_:G_)(t,e)):Jt(this.node(),t).duration}function z_(e,t){if(typeof t!="function")throw new Error;return function(){yn(this,e).ease=t}}function H_(e){var t=this._id;return arguments.length?this.each(z_(t,e)):Jt(this.node(),t).ease}function W_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;yn(this,e).ease=n}}function V_(e){if(typeof e!="function")throw new Error;return this.each(W_(this._id,e))}function j_(e){typeof e!="function"&&(e=E1(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Fn(r,this._parents,this._name,this._id)}function Y_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Fn(o,this._parents,this._name,this._id)}function X_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Z_(e,t,n){var r,i,a=X_(t)?Dc:yn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function K_(e,t){var n=this._id;return arguments.length<2?Jt(this.node(),n).on.on(e):this.each(Z_(n,e,t))}function Q_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function J_(){return this.on("end.remove",Q_(this._id))}function e5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Mc(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,qu(l[h],t,n,h,l,Jt(c,n)));return new Fn(a,this._parents,t,n)}function t5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=S1(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=Jt(c,n),p=0,y=h.length;p<y;++p)(d=h[p])&&qu(d,t,n,p,h,m);a.push(h),o.push(c)}return new Fn(a,o,t,n)}var n5=Pa.prototype.constructor;function r5(){return new n5(this._groups,this._parents)}function i5(e,t){var n,r,i;return function(){var a=ti(this,e),o=(this.style.removeProperty(e),ti(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function im(e){return function(){this.style.removeProperty(e)}}function a5(e,t,n){var r,i=n+"",a;return function(){var o=ti(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function o5(e,t,n){var r,i,a;return function(){var o=ti(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),ti(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function u5(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=yn(this,e),l=s.on,c=s.value[a]==null?u||(u=im(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function s5(e,t,n){var r=(e+="")=="transform"?o_:rm;return t==null?this.styleTween(e,i5(e,r)).on("end.style."+e,im(e)):typeof t=="function"?this.styleTween(e,o5(e,r,Nc(this,"style."+e,t))).each(u5(this._id,e)):this.styleTween(e,a5(e,r,t),n).on("end.style."+e,null)}function l5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function c5(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&l5(e,o,n)),r}return a._value=t,a}function f5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,c5(e,t,n??""))}function h5(e){return function(){this.textContent=e}}function d5(e){return function(){var t=e(this);this.textContent=t??""}}function m5(e){return this.tween("text",typeof e=="function"?d5(Nc(this,"text",e)):h5(e==null?"":e+""))}function p5(e){return function(t){this.textContent=e.call(this,t)}}function b5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&p5(i)),t}return r._value=e,r}function g5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,b5(e))}function y5(){for(var e=this._name,t=this._id,n=am(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=Jt(s,t);qu(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Fn(r,this._parents,e,n)}function w5(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=yn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var v5=0;function Fn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function am(){return++v5}var _n=Pa.prototype;Fn.prototype={constructor:Fn,select:e5,selectAll:t5,selectChild:_n.selectChild,selectChildren:_n.selectChildren,filter:j_,merge:Y_,selection:r5,transition:y5,call:_n.call,nodes:_n.nodes,node:_n.node,size:_n.size,empty:_n.empty,each:_n.each,on:K_,attr:$_,attrTween:L_,style:s5,styleTween:f5,text:m5,textTween:g5,remove:J_,tween:P_,delay:O_,duration:U_,ease:H_,easeVarying:V_,end:w5,[Symbol.iterator]:_n[Symbol.iterator]};function _5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var x5={time:null,delay:0,duration:250,ease:_5};function M5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function P5(e){var t,n;e instanceof Fn?(t=e._id,e=e._name):(t=am(),(n=x5).time=$c(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&qu(s,e,t,l,o,n||M5(s,t));return new Fn(r,this._parents,e,t)}Pa.prototype.interrupt=__;Pa.prototype.transition=P5;const Sl=Math.PI,El=2*Sl,lr=1e-6,A5=El-lr;function om(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function S5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return om;const n=10**t;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class um{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?om:S5(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,a,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,r,i,a){if(t=+t,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,s=r-t,l=i-n,c=o-t,f=u-n,h=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>lr)if(!(Math.abs(f*s-l*c)>lr)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let d=r-o,m=i-u,p=s*s+l*l,y=d*d+m*m,w=Math.sqrt(p),g=Math.sqrt(h),v=a*Math.tan((Sl-Math.acos((p+h-y)/(2*w*g)))/2),b=v/g,_=v/w;Math.abs(b-1)>lr&&this._append`L${t+b*c},${n+b*f}`,this._append`A${a},${a},0,0,${+(f*d>c*m)},${this._x1=t+_*s},${this._y1=n+_*l}`}}arc(t,n,r,i,a,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let u=r*Math.cos(i),s=r*Math.sin(i),l=t+u,c=n+s,f=1^o,h=o?i-a:a-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>lr||Math.abs(this._y1-c)>lr)&&this._append`L${l},${c}`,r&&(h<0&&(h=h%El+El),h>A5?this._append`A${r},${r},0,1,${f},${t-u},${n-s}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:h>lr&&this._append`A${r},${r},0,${+(h>=Sl)},${f},${this._x1=t+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function jn(e=3){return new um(+e)}var gh={},Ts={},$s=34,Ei=10,Ds=13;function sm(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function E5(e,t){var n=sm(e);return function(r,i){return t(n(r),i,e)}}function yh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function C5(e){return e<0?"-"+pt(-e,6):e>9999?"+"+pt(e,6):pt(e,4)}function k5(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":C5(e.getUTCFullYear())+"-"+pt(e.getUTCMonth()+1,2)+"-"+pt(e.getUTCDate(),2)+(i?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"."+pt(i,3)+"Z":r?"T"+pt(t,2)+":"+pt(n,2)+":"+pt(r,2)+"Z":n||t?"T"+pt(t,2)+":"+pt(n,2)+"Z":"")}function T5(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,h){var d,m,p=i(f,function(y,w){if(d)return d(y,w-1);m=y,d=h?E5(y,h):sm(y)});return p.columns=m||[],p}function i(f,h){var d=[],m=f.length,p=0,y=0,w,g=m<=0,v=!1;f.charCodeAt(m-1)===Ei&&--m,f.charCodeAt(m-1)===Ds&&--m;function b(){if(g)return Ts;if(v)return v=!1,gh;var x,M=p,S;if(f.charCodeAt(M)===$s){for(;p++<m&&f.charCodeAt(p)!==$s||f.charCodeAt(++p)===$s;);return(x=p)>=m?g=!0:(S=f.charCodeAt(p++))===Ei?v=!0:S===Ds&&(v=!0,f.charCodeAt(p)===Ei&&++p),f.slice(M+1,x-1).replace(/""/g,'"')}for(;p<m;){if((S=f.charCodeAt(x=p++))===Ei)v=!0;else if(S===Ds)v=!0,f.charCodeAt(p)===Ei&&++p;else if(S!==n)continue;return f.slice(M,x)}return g=!0,f.slice(M,m)}for(;(w=b())!==Ts;){for(var _=[];w!==gh&&w!==Ts;)_.push(w),w=b();h&&(_=h(_,y++))==null||d.push(_)}return d}function a(f,h){return f.map(function(d){return h.map(function(m){return c(d[m])}).join(e)})}function o(f,h){return h==null&&(h=yh(f)),[h.map(c).join(e)].concat(a(f,h)).join(`
`)}function u(f,h){return h==null&&(h=yh(f)),a(f,h).join(`
`)}function s(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?k5(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:u,formatRows:s,formatRow:l,formatValue:c}}var $5=T5(","),D5=$5.parse;function N5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Zo(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ii(e){return e=Zo(Math.abs(e)),e?e[1]:NaN}function F5(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function B5(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var L5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function oa(e){if(!(t=L5.exec(e)))throw new Error("invalid format: "+e);var t;return new Fc({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}oa.prototype=Fc.prototype;function Fc(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Fc.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function R5(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var lm;function I5(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(lm=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Zo(e,Math.max(0,t+a-1))[0]}function wh(e,t){var n=Zo(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const vh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:N5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wh(e*100,t),r:wh,s:I5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _h(e){return e}var xh=Array.prototype.map,Mh=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function O5(e){var t=e.grouping===void 0||e.thousands===void 0?_h:F5(xh.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?_h:B5(xh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function l(f){f=oa(f);var h=f.fill,d=f.align,m=f.sign,p=f.symbol,y=f.zero,w=f.width,g=f.comma,v=f.precision,b=f.trim,_=f.type;_==="n"?(g=!0,_="g"):vh[_]||(v===void 0&&(v=12),b=!0,_="g"),(y||h==="0"&&d==="=")&&(y=!0,h="0",d="=");var x=p==="$"?n:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",M=p==="$"?r:/[%p]/.test(_)?o:"",S=vh[_],E=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function $(P){var T=x,I=M,B,C,O;if(_==="c")I=S(P)+I,P="";else{P=+P;var ie=P<0||1/P<0;if(P=isNaN(P)?s:S(Math.abs(P),v),b&&(P=R5(P)),ie&&+P==0&&m!=="+"&&(ie=!1),T=(ie?m==="("?m:u:m==="-"||m==="("?"":m)+T,I=(_==="s"?Mh[8+lm/3]:"")+I+(ie&&m==="("?")":""),E){for(B=-1,C=P.length;++B<C;)if(O=P.charCodeAt(B),48>O||O>57){I=(O===46?i+P.slice(B+1):P.slice(B))+I,P=P.slice(0,B);break}}}g&&!y&&(P=t(P,1/0));var te=T.length+P.length+I.length,J=te<w?new Array(w-te+1).join(h):"";switch(g&&y&&(P=t(J+P,J.length?w-I.length:1/0),J=""),d){case"<":P=T+P+I+J;break;case"=":P=T+J+P+I;break;case"^":P=J.slice(0,te=J.length>>1)+T+P+I+J.slice(te);break;default:P=J+T+P+I;break}return a(P)}return $.toString=function(){return f+""},$}function c(f,h){var d=l((f=oa(f),f.type="f",f)),m=Math.max(-8,Math.min(8,Math.floor(ii(h)/3)))*3,p=Math.pow(10,-m),y=Mh[8+m/3];return function(w){return d(p*w)+y}}return{format:l,formatPrefix:c}}var no,yi,cm;q5({thousands:",",grouping:[3],currency:["$",""]});function q5(e){return no=O5(e),yi=no.format,cm=no.formatPrefix,no}function G5(e){return Math.max(0,-ii(Math.abs(e)))}function U5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ii(t)/3)))*3-ii(Math.abs(e)))}function z5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ii(t)-ii(e))+1}var pe=1e-6,fm=1e-12,we=Math.PI,Re=we/2,Ph=we/4,Ct=we*2,lt=180/we,Le=we/180,ke=Math.abs,wi=Math.atan,Bn=Math.atan2,ye=Math.cos,hm=Math.exp,Ko=Math.log,Ns=Math.pow,he=Math.sin,Lt=Math.sign||function(e){return e>0?1:e<0?-1:0},wt=Math.sqrt,Bc=Math.tan;function dm(e){return e>1?0:e<-1?we:Math.acos(e)}function Gt(e){return e>1?Re:e<-1?-Re:Math.asin(e)}function Rt(){}function Qo(e,t){e&&Sh.hasOwnProperty(e.type)&&Sh[e.type](e,t)}var Ah={Feature:function(e,t){Qo(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Qo(n[r].geometry,t)}},Sh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Cl(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cl(n[r],t,0)},Polygon:function(e,t){Eh(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Eh(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Qo(n[r],t)}};function Cl(e,t,n){var r=-1,i=e.length-n,a;for(t.lineStart();++r<i;)a=e[r],t.point(a[0],a[1],a[2]);t.lineEnd()}function Eh(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Cl(e[n],t,1);t.polygonEnd()}function fr(e,t){e&&Ah.hasOwnProperty(e.type)?Ah[e.type](e,t):Qo(e,t)}function kl(e){return[Bn(e[1],e[0]),Gt(e[2])]}function ai(e){var t=e[0],n=e[1],r=ye(n);return[r*ye(t),r*he(t),he(n)]}function ro(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jo(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Fs(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function io(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Tl(e){var t=wt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function $l(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Dl(e,t){return ke(e)>we&&(e-=Math.round(e/Ct)*Ct),[e,t]}Dl.invert=Dl;function mm(e,t,n){return(e%=Ct)?t||n?$l(kh(e),Th(t,n)):kh(e):t||n?Th(t,n):Dl}function Ch(e){return function(t,n){return t+=e,ke(t)>we&&(t-=Math.round(t/Ct)*Ct),[t,n]}}function kh(e){var t=Ch(e);return t.invert=Ch(-e),t}function Th(e,t){var n=ye(e),r=he(e),i=ye(t),a=he(t);function o(u,s){var l=ye(s),c=ye(u)*l,f=he(u)*l,h=he(s),d=h*n+c*r;return[Bn(f*i-d*a,c*n-h*r),Gt(d*i+f*a)]}return o.invert=function(u,s){var l=ye(s),c=ye(u)*l,f=he(u)*l,h=he(s),d=h*i-f*a;return[Bn(f*i+h*a,c*n+d*r),Gt(d*n-c*r)]},o}function H5(e){e=mm(e[0]*Le,e[1]*Le,e.length>2?e[2]*Le:0);function t(n){return n=e(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n}return t.invert=function(n){return n=e.invert(n[0]*Le,n[1]*Le),n[0]*=lt,n[1]*=lt,n},t}function W5(e,t,n,r,i,a){if(n){var o=ye(t),u=he(t),s=r*n;i==null?(i=t+r*Ct,a=t-s/2):(i=$h(o,i),a=$h(o,a),(r>0?i<a:i>a)&&(i+=r*Ct));for(var l,c=i;r>0?c>a:c<a;c-=s)l=kl([o,-u*ye(c),-u*he(c)]),e.point(l[0],l[1])}}function $h(e,t){t=ai(t),t[0]-=e,Tl(t);var n=dm(-t[1]);return((-t[2]<0?-n:n)+Ct-pe)%Ct}function pm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Rt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function So(e,t){return ke(e[0]-t[0])<pe&&ke(e[1]-t[1])<pe}function ao(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function bm(e,t,n,r,i){var a=[],o=[],u,s;if(e.forEach(function(m){if(!((p=m.length-1)<=0)){var p,y=m[0],w=m[p],g;if(So(y,w)){if(!y[2]&&!w[2]){for(i.lineStart(),u=0;u<p;++u)i.point((y=m[u])[0],y[1]);i.lineEnd();return}w[0]+=2*pe}a.push(g=new ao(y,m,null,!0)),o.push(g.o=new ao(y,null,g,!1)),a.push(g=new ao(w,m,null,!1)),o.push(g.o=new ao(w,null,g,!0))}}),!!a.length){for(o.sort(t),Dh(a),Dh(o),u=0,s=o.length;u<s;++u)o[u].e=n=!n;for(var l=a[0],c,f;;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,d=!d}while(!h.v);i.lineEnd()}}}function Dh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function Bs(e){return ke(e[0])<=we?e[0]:Lt(e[0])*((ke(e[0])+we)%Ct-we)}function V5(e,t){var n=Bs(t),r=t[1],i=he(r),a=[he(n),-ye(n),0],o=0,u=0,s=new yr;i===1?r=Re+pe:i===-1&&(r=-Re-pe);for(var l=0,c=e.length;l<c;++l)if(h=(f=e[l]).length)for(var f,h,d=f[h-1],m=Bs(d),p=d[1]/2+Ph,y=he(p),w=ye(p),g=0;g<h;++g,m=b,y=x,w=M,d=v){var v=f[g],b=Bs(v),_=v[1]/2+Ph,x=he(_),M=ye(_),S=b-m,E=S>=0?1:-1,$=E*S,P=$>we,T=y*x;if(s.add(Bn(T*E*he($),w*M+T*ye($))),o+=P?S+E*Ct:S,P^m>=n^b>=n){var I=Jo(ai(d),ai(v));Tl(I);var B=Jo(a,I);Tl(B);var C=(P^S>=0?-1:1)*Gt(B[2]);(r>C||r===C&&(I[0]||I[1]))&&(u+=P^S>=0?1:-1)}}return(o<-pe||o<pe&&s<-fm)^u&1}function gm(e,t,n,r){return function(i){var a=t(i),o=pm(),u=t(o),s=!1,l,c,f,h={point:d,lineStart:p,lineEnd:y,polygonStart:function(){h.point=w,h.lineStart=g,h.lineEnd=v,c=[],l=[]},polygonEnd:function(){h.point=d,h.lineStart=p,h.lineEnd=y,c=P1(c);var b=V5(l,r);c.length?(s||(i.polygonStart(),s=!0),bm(c,Y5,b,n,i)):b&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(b,_){e(b,_)&&i.point(b,_)}function m(b,_){a.point(b,_)}function p(){h.point=m,a.lineStart()}function y(){h.point=d,a.lineEnd()}function w(b,_){f.push([b,_]),u.point(b,_)}function g(){u.lineStart(),f=[]}function v(){w(f[0][0],f[0][1]),u.lineEnd();var b=u.clean(),_=o.result(),x,M=_.length,S,E,$;if(f.pop(),l.push(f),f=null,!!M){if(b&1){if(E=_[0],(S=E.length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),x=0;x<S;++x)i.point(($=E[x])[0],$[1]);i.lineEnd()}return}M>1&&b&2&&_.push(_.pop().concat(_.shift())),c.push(_.filter(j5))}}return h}}function j5(e){return e.length>1}function Y5(e,t){return((e=e.x)[0]<0?e[1]-Re-pe:Re-e[1])-((t=t.x)[0]<0?t[1]-Re-pe:Re-t[1])}const Nh=gm(function(){return!0},X5,K5,[-we,-Re]);function X5(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(a,o){var u=a>0?we:-we,s=ke(a-t);ke(s-we)<pe?(e.point(t,n=(n+o)/2>0?Re:-Re),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),i=0):r!==u&&s>=we&&(ke(t-r)<pe&&(t-=r*pe),ke(a-u)<pe&&(a-=u*pe),n=Z5(t,n,a,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(u,n),i=0),e.point(t=a,n=o),r=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Z5(e,t,n,r){var i,a,o=he(e-n);return ke(o)>pe?wi((he(t)*(a=ye(r))*he(n)-he(r)*(i=ye(t))*he(e))/(i*a*o)):(t+r)/2}function K5(e,t,n,r){var i;if(e==null)i=n*Re,r.point(-we,i),r.point(0,i),r.point(we,i),r.point(we,0),r.point(we,-i),r.point(0,-i),r.point(-we,-i),r.point(-we,0),r.point(-we,i);else if(ke(e[0]-t[0])>pe){var a=e[0]<t[0]?we:-we;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Q5(e){var t=ye(e),n=6*Le,r=t>0,i=ke(t)>pe;function a(c,f,h,d){W5(d,e,n,h,c,f)}function o(c,f){return ye(c)*ye(f)>t}function u(c){var f,h,d,m,p;return{lineStart:function(){m=d=!1,p=1},point:function(y,w){var g=[y,w],v,b=o(y,w),_=r?b?0:l(y,w):b?l(y+(y<0?we:-we),w):0;if(!f&&(m=d=b)&&c.lineStart(),b!==d&&(v=s(f,g),(!v||So(f,v)||So(g,v))&&(g[2]=1)),b!==d)p=0,b?(c.lineStart(),v=s(g,f),c.point(v[0],v[1])):(v=s(f,g),c.point(v[0],v[1],2),c.lineEnd()),f=v;else if(i&&f&&r^b){var x;!(_&h)&&(x=s(g,f,!0))&&(p=0,r?(c.lineStart(),c.point(x[0][0],x[0][1]),c.point(x[1][0],x[1][1]),c.lineEnd()):(c.point(x[1][0],x[1][1]),c.lineEnd(),c.lineStart(),c.point(x[0][0],x[0][1],3)))}b&&(!f||!So(f,g))&&c.point(g[0],g[1]),f=g,d=b,h=_},lineEnd:function(){d&&c.lineEnd(),f=null},clean:function(){return p|(m&&d)<<1}}}function s(c,f,h){var d=ai(c),m=ai(f),p=[1,0,0],y=Jo(d,m),w=ro(y,y),g=y[0],v=w-g*g;if(!v)return!h&&c;var b=t*w/v,_=-t*g/v,x=Jo(p,y),M=io(p,b),S=io(y,_);Fs(M,S);var E=x,$=ro(M,E),P=ro(E,E),T=$*$-P*(ro(M,M)-1);if(!(T<0)){var I=wt(T),B=io(E,(-$-I)/P);if(Fs(B,M),B=kl(B),!h)return B;var C=c[0],O=f[0],ie=c[1],te=f[1],J;O<C&&(J=C,C=O,O=J);var z=O-C,H=ke(z-we)<pe,D=H||z<pe;if(!H&&te<ie&&(J=ie,ie=te,te=J),D?H?ie+te>0^B[1]<(ke(B[0]-C)<pe?ie:te):ie<=B[1]&&B[1]<=te:z>we^(C<=B[0]&&B[0]<=O)){var G=io(E,(-$+I)/P);return Fs(G,M),[B,kl(G)]}}}function l(c,f){var h=r?e:we-e,d=0;return c<-h?d|=1:c>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return gm(o,u,a,r?[0,-e]:[-we,e-we])}function J5(e,t,n,r,i,a){var o=e[0],u=e[1],s=t[0],l=t[1],c=0,f=1,h=s-o,d=l-u,m;if(m=n-o,!(!h&&m>0)){if(m/=h,h<0){if(m<c)return;m<f&&(f=m)}else if(h>0){if(m>f)return;m>c&&(c=m)}if(m=i-o,!(!h&&m<0)){if(m/=h,h<0){if(m>f)return;m>c&&(c=m)}else if(h>0){if(m<c)return;m<f&&(f=m)}if(m=r-u,!(!d&&m>0)){if(m/=d,d<0){if(m<c)return;m<f&&(f=m)}else if(d>0){if(m>f)return;m>c&&(c=m)}if(m=a-u,!(!d&&m<0)){if(m/=d,d<0){if(m>f)return;m>c&&(c=m)}else if(d>0){if(m<c)return;m<f&&(f=m)}return c>0&&(e[0]=o+c*h,e[1]=u+c*d),f<1&&(t[0]=o+f*h,t[1]=u+f*d),!0}}}}}var Li=1e9,oo=-Li;function ym(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function a(l,c,f,h){var d=0,m=0;if(l==null||(d=o(l,f))!==(m=o(c,f))||s(l,c)<0^f>0)do h.point(d===0||d===3?e:n,d>1?r:t);while((d=(d+f+4)%4)!==m);else h.point(c[0],c[1])}function o(l,c){return ke(l[0]-e)<pe?c>0?0:3:ke(l[0]-n)<pe?c>0?2:1:ke(l[1]-t)<pe?c>0?1:0:c>0?3:2}function u(l,c){return s(l.x,c.x)}function s(l,c){var f=o(l,1),h=o(c,1);return f!==h?f-h:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=pm(),h,d,m,p,y,w,g,v,b,_,x,M={point:S,lineStart:T,lineEnd:I,polygonStart:$,polygonEnd:P};function S(C,O){i(C,O)&&c.point(C,O)}function E(){for(var C=0,O=0,ie=d.length;O<ie;++O)for(var te=d[O],J=1,z=te.length,H=te[0],D,G,ne=H[0],ue=H[1];J<z;++J)D=ne,G=ue,H=te[J],ne=H[0],ue=H[1],G<=r?ue>r&&(ne-D)*(r-G)>(ue-G)*(e-D)&&++C:ue<=r&&(ne-D)*(r-G)<(ue-G)*(e-D)&&--C;return C}function $(){c=f,h=[],d=[],x=!0}function P(){var C=E(),O=x&&C,ie=(h=P1(h)).length;(O||ie)&&(l.polygonStart(),O&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),ie&&bm(h,u,C,a,l),l.polygonEnd()),c=l,h=d=m=null}function T(){M.point=B,d&&d.push(m=[]),_=!0,b=!1,g=v=NaN}function I(){h&&(B(p,y),w&&b&&f.rejoin(),h.push(f.result())),M.point=S,b&&c.lineEnd()}function B(C,O){var ie=i(C,O);if(d&&m.push([C,O]),_)p=C,y=O,w=ie,_=!1,ie&&(c.lineStart(),c.point(C,O));else if(ie&&b)c.point(C,O);else{var te=[g=Math.max(oo,Math.min(Li,g)),v=Math.max(oo,Math.min(Li,v))],J=[C=Math.max(oo,Math.min(Li,C)),O=Math.max(oo,Math.min(Li,O))];J5(te,J,e,t,n,r)?(b||(c.lineStart(),c.point(te[0],te[1])),c.point(J[0],J[1]),ie||c.lineEnd(),x=!1):ie&&(c.lineStart(),c.point(C,O),x=!1)}g=C,v=O,b=ie}return M}}const Nl=e=>e;var Ls=new yr,Fl=new yr,wm,vm,Bl,Ll,Cn={point:Rt,lineStart:Rt,lineEnd:Rt,polygonStart:function(){Cn.lineStart=e6,Cn.lineEnd=n6},polygonEnd:function(){Cn.lineStart=Cn.lineEnd=Cn.point=Rt,Ls.add(ke(Fl)),Fl=new yr},result:function(){var e=Ls/2;return Ls=new yr,e}};function e6(){Cn.point=t6}function t6(e,t){Cn.point=_m,wm=Bl=e,vm=Ll=t}function _m(e,t){Fl.add(Ll*e-Bl*t),Bl=e,Ll=t}function n6(){_m(wm,vm)}var oi=1/0,eu=oi,ua=-oi,tu=ua,nu={point:r6,lineStart:Rt,lineEnd:Rt,polygonStart:Rt,polygonEnd:Rt,result:function(){var e=[[oi,eu],[ua,tu]];return ua=tu=-(eu=oi=1/0),e}};function r6(e,t){e<oi&&(oi=e),e>ua&&(ua=e),t<eu&&(eu=t),t>tu&&(tu=t)}var Rl=0,Il=0,Ri=0,ru=0,iu=0,zr=0,Ol=0,ql=0,Ii=0,xm,Mm,an,on,Nt={point:Pr,lineStart:Fh,lineEnd:Bh,polygonStart:function(){Nt.lineStart=o6,Nt.lineEnd=u6},polygonEnd:function(){Nt.point=Pr,Nt.lineStart=Fh,Nt.lineEnd=Bh},result:function(){var e=Ii?[Ol/Ii,ql/Ii]:zr?[ru/zr,iu/zr]:Ri?[Rl/Ri,Il/Ri]:[NaN,NaN];return Rl=Il=Ri=ru=iu=zr=Ol=ql=Ii=0,e}};function Pr(e,t){Rl+=e,Il+=t,++Ri}function Fh(){Nt.point=i6}function i6(e,t){Nt.point=a6,Pr(an=e,on=t)}function a6(e,t){var n=e-an,r=t-on,i=wt(n*n+r*r);ru+=i*(an+e)/2,iu+=i*(on+t)/2,zr+=i,Pr(an=e,on=t)}function Bh(){Nt.point=Pr}function o6(){Nt.point=s6}function u6(){Pm(xm,Mm)}function s6(e,t){Nt.point=Pm,Pr(xm=an=e,Mm=on=t)}function Pm(e,t){var n=e-an,r=t-on,i=wt(n*n+r*r);ru+=i*(an+e)/2,iu+=i*(on+t)/2,zr+=i,i=on*e-an*t,Ol+=i*(an+e),ql+=i*(on+t),Ii+=i*3,Pr(an=e,on=t)}function Am(e){this._context=e}Am.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ct);break}}},result:Rt};var Gl=new yr,Rs,Sm,Em,Oi,qi,sa={point:Rt,lineStart:function(){sa.point=l6},lineEnd:function(){Rs&&Cm(Sm,Em),sa.point=Rt},polygonStart:function(){Rs=!0},polygonEnd:function(){Rs=null},result:function(){var e=+Gl;return Gl=new yr,e}};function l6(e,t){sa.point=Cm,Sm=Oi=e,Em=qi=t}function Cm(e,t){Oi-=e,qi-=t,Gl.add(wt(Oi*Oi+qi*qi)),Oi=e,qi=t}let Lh,au,Rh,Ih;class Oh{constructor(t){this._append=t==null?km:c6(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Rh||this._append!==au){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Rh=r,au=this._append,Ih=this._,this._=i}this._+=Ih;break}}}result(){const t=this._;return this._="",t.length?t:null}}function km(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function c6(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return km;if(t!==Lh){const n=10**t;Lh=t,au=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return au}function Gu(e,t){let n=3,r=4.5,i,a;function o(u){return u&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),fr(u,i(a))),a.result()}return o.area=function(u){return fr(u,i(Cn)),Cn.result()},o.measure=function(u){return fr(u,i(sa)),sa.result()},o.bounds=function(u){return fr(u,i(nu)),nu.result()},o.centroid=function(u){return fr(u,i(Nt)),Nt.result()},o.projection=function(u){return arguments.length?(i=u==null?(e=null,Nl):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new Oh(n)):new Am(t=u),typeof r!="function"&&a.pointRadius(r),o):t},o.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(a.pointRadius(+u),+u),o):r},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const s=Math.floor(u);if(!(s>=0))throw new RangeError(`invalid digits: ${u}`);n=s}return t===null&&(a=new Oh(n)),o},o.projection(e).digits(n).context(t)}function Ul(e){return{stream:Uu(e)}}function Uu(e){return function(t){var n=new zl;for(var r in e)n[r]=e[r];return n.stream=t,n}}function zl(){}zl.prototype={constructor:zl,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Lc(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),fr(n,e.stream(nu)),t(nu.result()),r!=null&&e.clipExtent(r),e}function Rc(e,t,n){return Lc(e,function(r){var i=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),u=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,s=+t[0][1]+(a-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([u,s])},n)}function Tm(e,t,n){return Rc(e,[[0,0],t],n)}function $m(e,t,n){return Lc(e,function(r){var i=+t,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,u=-a*r[0][1];e.scale(150*a).translate([o,u])},n)}function Dm(e,t,n){return Lc(e,function(r){var i=+t,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],u=(i-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var qh=16,f6=ye(30*Le);function Gh(e,t){return+t?d6(e,t):h6(e)}function h6(e){return Uu({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function d6(e,t){function n(r,i,a,o,u,s,l,c,f,h,d,m,p,y){var w=l-r,g=c-i,v=w*w+g*g;if(v>4*t&&p--){var b=o+h,_=u+d,x=s+m,M=wt(b*b+_*_+x*x),S=Gt(x/=M),E=ke(ke(x)-1)<pe||ke(a-f)<pe?(a+f)/2:Bn(_,b),$=e(E,S),P=$[0],T=$[1],I=P-r,B=T-i,C=g*I-w*B;(C*C/v>t||ke((w*I+g*B)/v-.5)>.3||o*h+u*d+s*m<f6)&&(n(r,i,a,o,u,s,P,T,E,b/=M,_/=M,x,p,y),y.point(P,T),n(P,T,E,b,_,x,l,c,f,h,d,m,p,y))}}return function(r){var i,a,o,u,s,l,c,f,h,d,m,p,y={point:w,lineStart:g,lineEnd:b,polygonStart:function(){r.polygonStart(),y.lineStart=_},polygonEnd:function(){r.polygonEnd(),y.lineStart=g}};function w(S,E){S=e(S,E),r.point(S[0],S[1])}function g(){f=NaN,y.point=v,r.lineStart()}function v(S,E){var $=ai([S,E]),P=e(S,E);n(f,h,c,d,m,p,f=P[0],h=P[1],c=S,d=$[0],m=$[1],p=$[2],qh,r),r.point(f,h)}function b(){y.point=w,r.lineEnd()}function _(){g(),y.point=x,y.lineEnd=M}function x(S,E){v(i=S,E),a=f,o=h,u=d,s=m,l=p,y.point=v}function M(){n(f,h,c,d,m,p,a,o,i,u,s,l,qh,r),y.lineEnd=b,b()}return y}}var m6=Uu({point:function(e,t){this.stream.point(e*Le,t*Le)}});function p6(e){return Uu({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function b6(e,t,n,r,i){function a(o,u){return o*=r,u*=i,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*r,(n-u)/e*i]},a}function Uh(e,t,n,r,i,a){if(!a)return b6(e,t,n,r,i);var o=ye(a),u=he(a),s=o*e,l=u*e,c=o/e,f=u/e,h=(u*n-o*t)/e,d=(u*t+o*n)/e;function m(p,y){return p*=r,y*=i,[s*p-l*y+t,n-l*p-s*y]}return m.invert=function(p,y){return[r*(c*p-f*y+h),i*(d-f*p-c*y)]},m}function rr(e){return Nm(function(){return e})()}function Nm(e){var t,n=150,r=480,i=250,a=0,o=0,u=0,s=0,l=0,c,f=0,h=1,d=1,m=null,p=Nh,y=null,w,g,v,b=Nl,_=.5,x,M,S,E,$;function P(C){return S(C[0]*Le,C[1]*Le)}function T(C){return C=S.invert(C[0],C[1]),C&&[C[0]*lt,C[1]*lt]}P.stream=function(C){return E&&$===C?E:E=m6(p6(c)(p(x(b($=C)))))},P.preclip=function(C){return arguments.length?(p=C,m=void 0,B()):p},P.postclip=function(C){return arguments.length?(b=C,y=w=g=v=null,B()):b},P.clipAngle=function(C){return arguments.length?(p=+C?Q5(m=C*Le):(m=null,Nh),B()):m*lt},P.clipExtent=function(C){return arguments.length?(b=C==null?(y=w=g=v=null,Nl):ym(y=+C[0][0],w=+C[0][1],g=+C[1][0],v=+C[1][1]),B()):y==null?null:[[y,w],[g,v]]},P.scale=function(C){return arguments.length?(n=+C,I()):n},P.translate=function(C){return arguments.length?(r=+C[0],i=+C[1],I()):[r,i]},P.center=function(C){return arguments.length?(a=C[0]%360*Le,o=C[1]%360*Le,I()):[a*lt,o*lt]},P.rotate=function(C){return arguments.length?(u=C[0]%360*Le,s=C[1]%360*Le,l=C.length>2?C[2]%360*Le:0,I()):[u*lt,s*lt,l*lt]},P.angle=function(C){return arguments.length?(f=C%360*Le,I()):f*lt},P.reflectX=function(C){return arguments.length?(h=C?-1:1,I()):h<0},P.reflectY=function(C){return arguments.length?(d=C?-1:1,I()):d<0},P.precision=function(C){return arguments.length?(x=Gh(M,_=C*C),B()):wt(_)},P.fitExtent=function(C,O){return Rc(P,C,O)},P.fitSize=function(C,O){return Tm(P,C,O)},P.fitWidth=function(C,O){return $m(P,C,O)},P.fitHeight=function(C,O){return Dm(P,C,O)};function I(){var C=Uh(n,0,0,h,d,f).apply(null,t(a,o)),O=Uh(n,r-C[0],i-C[1],h,d,f);return c=mm(u,s,l),M=$l(t,O),S=$l(c,M),x=Gh(M,_),B()}function B(){return E=$=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&T,I()}}function Ic(e){var t=0,n=we/3,r=Nm(e),i=r(t,n);return i.parallels=function(a){return arguments.length?r(t=a[0]*Le,n=a[1]*Le):[t*lt,n*lt]},i}function g6(e){var t=ye(e);function n(r,i){return[r*t,he(i)/t]}return n.invert=function(r,i){return[r/t,Gt(i*t)]},n}function y6(e,t){var n=he(e),r=(n+he(t))/2;if(ke(r)<pe)return g6(e);var i=1+n*(2*r-n),a=wt(i)/r;function o(u,s){var l=wt(i-2*r*he(s))/r;return[l*he(u*=r),a-l*ye(u)]}return o.invert=function(u,s){var l=a-s,c=Bn(u,ke(l))*Lt(l);return l*r<0&&(c-=we*Lt(u)*Lt(l)),[c/r,Gt((i-(u*u+l*l)*r*r)/(2*r))]},o}function ou(){return Ic(y6).scale(155.424).center([0,33.6442])}function Fm(){return ou().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function w6(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function v6(){var e,t,n=Fm(),r,i=ou().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=ou().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,s,l={point:function(h,d){s=[h,d]}};function c(h){var d=h[0],m=h[1];return s=null,r.point(d,m),s||(a.point(d,m),s)||(u.point(d,m),s)}c.invert=function(h){var d=n.scale(),m=n.translate(),p=(h[0]-m[0])/d,y=(h[1]-m[1])/d;return(y>=.12&&y<.234&&p>=-.425&&p<-.214?i:y>=.166&&y<.234&&p>=-.214&&p<-.115?o:n).invert(h)},c.stream=function(h){return e&&t===h?e:e=w6([n.stream(t=h),i.stream(h),o.stream(h)])},c.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},c.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),c.translate(n.translate())):n.scale()},c.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),m=+h[0],p=+h[1];return r=n.translate(h).clipExtent([[m-.455*d,p-.238*d],[m+.455*d,p+.238*d]]).stream(l),a=i.translate([m-.307*d,p+.201*d]).clipExtent([[m-.425*d+pe,p+.12*d+pe],[m-.214*d-pe,p+.234*d-pe]]).stream(l),u=o.translate([m-.205*d,p+.212*d]).clipExtent([[m-.214*d+pe,p+.166*d+pe],[m-.115*d-pe,p+.234*d-pe]]).stream(l),f()},c.fitExtent=function(h,d){return Rc(c,h,d)},c.fitSize=function(h,d){return Tm(c,h,d)},c.fitWidth=function(h,d){return $m(c,h,d)},c.fitHeight=function(h,d){return Dm(c,h,d)};function f(){return e=t=null,c}return c.scale(1070)}function Bm(e){return function(t,n){var r=ye(t),i=ye(n),a=e(r*i);return a===1/0?[2,0]:[a*i*he(t),a*he(n)]}}function Ea(e){return function(t,n){var r=wt(t*t+n*n),i=e(r),a=he(i),o=ye(i);return[Bn(t*a,r*o),Gt(r&&n*a/r)]}}var Lm=Bm(function(e){return wt(2/(1+e))});Lm.invert=Ea(function(e){return 2*Gt(e/2)});function _6(){return rr(Lm).scale(124.75).clipAngle(180-.001)}var Rm=Bm(function(e){return(e=dm(e))&&e/he(e)});Rm.invert=Ea(function(e){return e});function x6(){return rr(Rm).scale(79.4188).clipAngle(180-.001)}function zu(e,t){return[e,Ko(Bc((Re+t)/2))]}zu.invert=function(e,t){return[e,2*wi(hm(t))-Re]};function M6(){return Im(zu).scale(961/Ct)}function Im(e){var t=rr(e),n=t.center,r=t.scale,i=t.translate,a=t.clipExtent,o=null,u,s,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=u=s=l=null:(o=+f[0][0],u=+f[0][1],s=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,u],[s,l]]};function c(){var f=we*r(),h=t(H5(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===zu?[[Math.max(h[0]-f,o),u],[Math.min(h[0]+f,s),l]]:[[o,Math.max(h[1]-f,u)],[s,Math.min(h[1]+f,l)]])}return c()}function uo(e){return Bc((Re+e)/2)}function P6(e,t){var n=ye(e),r=e===t?he(e):Ko(n/ye(t))/Ko(uo(t)/uo(e)),i=n*Ns(uo(e),r)/r;if(!r)return zu;function a(o,u){i>0?u<-Re+pe&&(u=-Re+pe):u>Re-pe&&(u=Re-pe);var s=i/Ns(uo(u),r);return[s*he(r*o),i-s*ye(r*o)]}return a.invert=function(o,u){var s=i-u,l=Lt(r)*wt(o*o+s*s),c=Bn(o,ke(s))*Lt(s);return s*r<0&&(c-=we*Lt(o)*Lt(s)),[c/r,2*wi(Ns(i/l,1/r))-Re]},a}function A6(){return Ic(P6).scale(109.5).parallels([30,30])}function uu(e,t){return[e,t]}uu.invert=uu;function S6(){return rr(uu).scale(152.63)}function E6(e,t){var n=ye(e),r=e===t?he(e):(n-ye(t))/(t-e),i=n/r+e;if(ke(r)<pe)return uu;function a(o,u){var s=i-u,l=r*o;return[s*he(l),i-s*ye(l)]}return a.invert=function(o,u){var s=i-u,l=Bn(o,ke(s))*Lt(s);return s*r<0&&(l-=we*Lt(o)*Lt(s)),[l/r,i-Lt(r)*wt(o*o+s*s)]},a}function C6(){return Ic(E6).scale(131.154).center([0,13.9389])}var Yi=1.340264,Xi=-.081106,Zi=893e-6,Ki=.003796,su=wt(3)/2,k6=12;function Om(e,t){var n=Gt(su*he(t)),r=n*n,i=r*r*r;return[e*ye(n)/(su*(Yi+3*Xi*r+i*(7*Zi+9*Ki*r))),n*(Yi+Xi*r+i*(Zi+Ki*r))]}Om.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,a=0,o,u,s;a<k6&&(u=n*(Yi+Xi*r+i*(Zi+Ki*r))-t,s=Yi+3*Xi*r+i*(7*Zi+9*Ki*r),n-=o=u/s,r=n*n,i=r*r*r,!(ke(o)<fm));++a);return[su*e*(Yi+3*Xi*r+i*(7*Zi+9*Ki*r))/ye(n),Gt(he(n)/su)]};function T6(){return rr(Om).scale(177.158)}function qm(e,t){var n=ye(t),r=ye(e)*n;return[n*he(e)/r,he(t)/r]}qm.invert=Ea(wi);function $6(){return rr(qm).scale(144.049).clipAngle(60)}function Gm(e,t){return[ye(t)*he(e),he(t)]}Gm.invert=Ea(Gt);function D6(){return rr(Gm).scale(249.5).clipAngle(90+pe)}function Um(e,t){var n=ye(t),r=1+ye(e)*n;return[n*he(e)/r,he(t)/r]}Um.invert=Ea(function(e){return 2*wi(e)});function N6(){return rr(Um).scale(250).clipAngle(142)}function zm(e,t){return[Ko(Bc((Re+t)/2)),-e]}zm.invert=function(e,t){return[-t,2*wi(hm(e))-Re]};function F6(){var e=Im(zm),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function wn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Hl=Symbol("implicit");function Oc(){var e=new wr,t=[],n=[],r=Hl;function i(a){let o=e.get(a);if(o===void 0){if(r!==Hl)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new wr;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Oc(t,n).unknown(r)},wn.apply(i,arguments),i}function Wu(){var e=Oc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,u=!1,s=0,l=0,c=.5;delete e.unknown;function f(){var h=t().length,d=i<r,m=d?i:r,p=d?r:i;a=(p-m)/Math.max(1,h-s+l*2),u&&(a=Math.floor(a)),m+=(p-m-a*(h-s))*c,o=a*(1-s),u&&(m=Math.round(m),o=Math.round(o));var y=pl(h).map(function(w){return m+a*w});return n(d?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,u=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(u=!!h,f()):u},e.padding=function(h){return arguments.length?(s=Math.min(1,l=+h),f()):s},e.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},e.paddingOuter=function(h){return arguments.length?(l=+h,f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.copy=function(){return Wu(t(),[r,i]).round(u).paddingInner(s).paddingOuter(l).align(c)},wn.apply(f(),arguments)}function Hm(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Hm(t())},e}function B6(){return Hm(Wu.apply(null,arguments).paddingInner(1))}function L6(e){return function(){return e}}function Wl(e){return+e}var zh=[0,1];function It(e){return e}function Vl(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:L6(isNaN(t)?NaN:.5)}function R6(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function I6(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=Vl(i,r),a=n(o,a)):(r=Vl(r,i),a=n(a,o)),function(u){return a(r(u))}}function O6(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Vl(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var s=Cu(e,u,1,r)-1;return a[s](i[s](u))}}function Ca(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Vu(){var e=zh,t=zh,n=Sa,r,i,a,o=It,u,s,l;function c(){var h=Math.min(e.length,t.length);return o!==It&&(o=R6(e[0],e[h-1])),u=h>2?O6:I6,s=l=null,f}function f(h){return h==null||isNaN(h=+h)?a:(s||(s=u(e.map(r),t,n)))(r(o(h)))}return f.invert=function(h){return o(i((l||(l=u(t,e.map(r),ot)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Wl),c()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),c()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=kc,c()},f.clamp=function(h){return arguments.length?(o=h?!0:It,c()):o!==It},f.interpolate=function(h){return arguments.length?(n=h,c()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,c()}}function Wm(){return Vu()(It,It)}function q6(e,t,n,r){var i=dl(e,t,n),a;switch(r=oa(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=U5(i,o))&&(r.precision=a),cm(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=z5(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=G5(i))&&(r.precision=a-(r.type==="%")*2);break}}return yi(r)}function ka(e){var t=e.domain;return e.ticks=function(n){var r=t();return na(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return q6(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],u=r[a],s,l,c=10;for(u<o&&(l=o,o=u,u=l,l=i,i=a,a=l);c-- >0;){if(l=Uo(o,u,n),l===s)return r[i]=o,r[a]=u,t(r);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;s=l}return e},e}function qc(){var e=Wm();return e.copy=function(){return Ca(e,qc())},wn.apply(e,arguments),ka(e)}function Vm(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Wl),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Vm(e).unknown(t)},e=arguments.length?Array.from(e,Wl):[0,1],ka(n)}function jm(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Hh(e){return Math.log(e)}function Wh(e){return Math.exp(e)}function G6(e){return-Math.log(-e)}function U6(e){return-Math.exp(-e)}function z6(e){return isFinite(e)?+("1e"+e):e<0?0:e}function H6(e){return e===10?z6:e===Math.E?Math.exp:t=>Math.pow(e,t)}function W6(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Vh(e){return(t,n)=>-e(-t,n)}function Ym(e){const t=e(Hh,Wh),n=t.domain;let r=10,i,a;function o(){return i=W6(r),a=H6(r),n()[0]<0?(i=Vh(i),a=Vh(a),e(G6,U6)):e(Hh,Wh),t}return t.base=function(u){return arguments.length?(r=+u,o()):r},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const s=n();let l=s[0],c=s[s.length-1];const f=c<l;f&&([l,c]=[c,l]);let h=i(l),d=i(c),m,p;const y=u==null?10:+u;let w=[];if(!(r%1)&&d-h<y){if(h=Math.floor(h),d=Math.ceil(d),l>0){for(;h<=d;++h)for(m=1;m<r;++m)if(p=h<0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;w.push(p)}}else for(;h<=d;++h)for(m=r-1;m>=1;--m)if(p=h>0?m/a(-h):m*a(h),!(p<l)){if(p>c)break;w.push(p)}w.length*2<y&&(w=na(l,c,y))}else w=na(h,d,Math.min(d-h,y)).map(a);return f?w.reverse():w},t.tickFormat=(u,s)=>{if(u==null&&(u=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=oa(s)).precision==null&&(s.trim=!0),s=yi(s)),u===1/0)return s;const l=Math.max(1,r*u/t.ticks().length);return c=>{let f=c/a(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?s(c):""}},t.nice=()=>n(jm(n(),{floor:u=>a(Math.floor(i(u))),ceil:u=>a(Math.ceil(i(u)))})),t}function Xm(){const e=Ym(Vu()).domain([1,10]);return e.copy=()=>Ca(e,Xm()).base(e.base()),wn.apply(e,arguments),e}function jh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Yh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Zm(e){var t=1,n=e(jh(t),Yh(t));return n.constant=function(r){return arguments.length?e(jh(t=+r),Yh(t)):t},ka(n)}function Km(){var e=Zm(Vu());return e.copy=function(){return Ca(e,Km()).constant(e.constant())},wn.apply(e,arguments)}function Xh(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function V6(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function j6(e){return e<0?-e*e:e*e}function Qm(e){var t=e(It,It),n=1;function r(){return n===1?e(It,It):n===.5?e(V6,j6):e(Xh(n),Xh(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},ka(t)}function Jm(){var e=Qm(Vu());return e.copy=function(){return Ca(e,Jm()).exponent(e.exponent())},wn.apply(e,arguments),e}function ep(){var e=[],t=[],n=[],r;function i(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=Bw(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Cu(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(yt),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return ep().domain(e).range(t).unknown(r)},wn.apply(a,arguments)}function tp(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Cu(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return tp().domain(e).range(t).unknown(n)},wn.apply(i,arguments)}const Is=new Date,Os=new Date;function je(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),u=i.ceil(a);return a-o<u-a?o:u},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,u)=>{const s=[];if(a=i.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return s;let l;do s.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return s},i.filter=a=>je(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Is.setTime(+a),Os.setTime(+o),e(Is),e(Os),Math.floor(n(Is,Os))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const lu=je(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);lu.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?je(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):lu);lu.range;const $n=1e3,Ot=$n*60,Dn=Ot*60,Ln=Dn*24,Gc=Ln*7,Zh=Ln*30,qs=Ln*365,Yt=je(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getUTCSeconds());Yt.range;const Ta=je(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$n)},(e,t)=>{e.setTime(+e+t*Ot)},(e,t)=>(t-e)/Ot,e=>e.getMinutes());Ta.range;const $a=je(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ot)},(e,t)=>(t-e)/Ot,e=>e.getUTCMinutes());$a.range;const Da=je(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*$n-e.getMinutes()*Ot)},(e,t)=>{e.setTime(+e+t*Dn)},(e,t)=>(t-e)/Dn,e=>e.getHours());Da.range;const Na=je(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Dn)},(e,t)=>(t-e)/Dn,e=>e.getUTCHours());Na.range;const kr=je(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ot)/Ln,e=>e.getDate()-1);kr.range;const ju=je(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ln,e=>e.getUTCDate()-1);ju.range;const Yu=je(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ln,e=>Math.floor(e/Ln));Yu.range;function Tr(e){return je(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ot)/Gc)}const ui=Tr(0),la=Tr(1),np=Tr(2),rp=Tr(3),Ar=Tr(4),ip=Tr(5),ap=Tr(6);ui.range;la.range;np.range;rp.range;Ar.range;ip.range;ap.range;function $r(e){return je(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Gc)}const si=$r(0),ca=$r(1),op=$r(2),up=$r(3),Sr=$r(4),sp=$r(5),lp=$r(6);si.range;ca.range;op.range;up.range;Sr.range;sp.range;lp.range;const Fa=je(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fa.range;const Ba=je(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Ba.range;const Zt=je(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Zt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:je(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Zt.range;const Kt=je(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Kt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:je(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Kt.range;function cp(e,t,n,r,i,a){const o=[[Yt,1,$n],[Yt,5,5*$n],[Yt,15,15*$n],[Yt,30,30*$n],[a,1,Ot],[a,5,5*Ot],[a,15,15*Ot],[a,30,30*Ot],[i,1,Dn],[i,3,3*Dn],[i,6,6*Dn],[i,12,12*Dn],[r,1,Ln],[r,2,2*Ln],[n,1,Gc],[t,1,Zh],[t,3,3*Zh],[e,1,qs]];function u(l,c,f){const h=c<l;h&&([l,c]=[c,l]);const d=f&&typeof f.range=="function"?f:s(l,c,f),m=d?d.range(l,+c+1):[];return h?m.reverse():m}function s(l,c,f){const h=Math.abs(c-l)/f,d=Eu(([,,y])=>y).right(o,h);if(d===o.length)return e.every(dl(l/qs,c/qs,f));if(d===0)return lu.every(Math.max(dl(l,c,f),1));const[m,p]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return m.every(p)}return[u,s]}const[Y6,fp]=cp(Kt,Ba,si,Yu,Na,$a),[X6,Z6]=cp(Zt,Fa,ui,kr,Da,Ta);function Gs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Us(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ci(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function K6(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,s=e.shortMonths,l=ki(i),c=Ti(i),f=ki(a),h=Ti(a),d=ki(o),m=Ti(o),p=ki(u),y=Ti(u),w=ki(s),g=Ti(s),v={a:ie,A:te,b:J,B:z,c:null,d:nd,e:nd,f:v7,g:T7,G:D7,H:g7,I:y7,j:w7,L:hp,m:_7,M:x7,p:H,q:D,Q:ad,s:od,S:M7,u:P7,U:A7,V:S7,w:E7,W:C7,x:null,X:null,y:k7,Y:$7,Z:N7,"%":id},b={a:G,A:ne,b:ue,B:ae,c:null,d:rd,e:rd,f:R7,g:j7,G:X7,H:F7,I:B7,j:L7,L:mp,m:I7,M:O7,p:V,q:j,Q:ad,s:od,S:q7,u:G7,U:U7,V:z7,w:H7,W:W7,x:null,X:null,y:V7,Y:Y7,Z:Z7,"%":id},_={a:$,A:P,b:T,B:I,c:B,d:ed,e:ed,f:d7,g:Jh,G:Qh,H:td,I:td,j:l7,L:h7,m:s7,M:c7,p:E,q:u7,Q:p7,s:b7,S:f7,u:n7,U:r7,V:i7,w:t7,W:a7,x:C,X:O,y:Jh,Y:Qh,Z:o7,"%":m7};v.x=x(n,v),v.X=x(r,v),v.c=x(t,v),b.x=x(n,b),b.X=x(r,b),b.c=x(t,b);function x(L,W){return function(Y){var N=[],ge=-1,re=0,me=L.length,xe,Ue,nt;for(Y instanceof Date||(Y=new Date(+Y));++ge<me;)L.charCodeAt(ge)===37&&(N.push(L.slice(re,ge)),(Ue=Kh[xe=L.charAt(++ge)])!=null?xe=L.charAt(++ge):Ue=xe==="e"?" ":"0",(nt=W[xe])&&(xe=nt(Y,Ue)),N.push(xe),re=ge+1);return N.push(L.slice(re,ge)),N.join("")}}function M(L,W){return function(Y){var N=Ci(1900,void 0,1),ge=S(N,L,Y+="",0),re,me;if(ge!=Y.length)return null;if("Q"in N)return new Date(N.Q);if("s"in N)return new Date(N.s*1e3+("L"in N?N.L:0));if(W&&!("Z"in N)&&(N.Z=0),"p"in N&&(N.H=N.H%12+N.p*12),N.m===void 0&&(N.m="q"in N?N.q:0),"V"in N){if(N.V<1||N.V>53)return null;"w"in N||(N.w=1),"Z"in N?(re=Us(Ci(N.y,0,1)),me=re.getUTCDay(),re=me>4||me===0?ca.ceil(re):ca(re),re=ju.offset(re,(N.V-1)*7),N.y=re.getUTCFullYear(),N.m=re.getUTCMonth(),N.d=re.getUTCDate()+(N.w+6)%7):(re=Gs(Ci(N.y,0,1)),me=re.getDay(),re=me>4||me===0?la.ceil(re):la(re),re=kr.offset(re,(N.V-1)*7),N.y=re.getFullYear(),N.m=re.getMonth(),N.d=re.getDate()+(N.w+6)%7)}else("W"in N||"U"in N)&&("w"in N||(N.w="u"in N?N.u%7:"W"in N?1:0),me="Z"in N?Us(Ci(N.y,0,1)).getUTCDay():Gs(Ci(N.y,0,1)).getDay(),N.m=0,N.d="W"in N?(N.w+6)%7+N.W*7-(me+5)%7:N.w+N.U*7-(me+6)%7);return"Z"in N?(N.H+=N.Z/100|0,N.M+=N.Z%100,Us(N)):Gs(N)}}function S(L,W,Y,N){for(var ge=0,re=W.length,me=Y.length,xe,Ue;ge<re;){if(N>=me)return-1;if(xe=W.charCodeAt(ge++),xe===37){if(xe=W.charAt(ge++),Ue=_[xe in Kh?W.charAt(ge++):xe],!Ue||(N=Ue(L,Y,N))<0)return-1}else if(xe!=Y.charCodeAt(N++))return-1}return N}function E(L,W,Y){var N=l.exec(W.slice(Y));return N?(L.p=c.get(N[0].toLowerCase()),Y+N[0].length):-1}function $(L,W,Y){var N=d.exec(W.slice(Y));return N?(L.w=m.get(N[0].toLowerCase()),Y+N[0].length):-1}function P(L,W,Y){var N=f.exec(W.slice(Y));return N?(L.w=h.get(N[0].toLowerCase()),Y+N[0].length):-1}function T(L,W,Y){var N=w.exec(W.slice(Y));return N?(L.m=g.get(N[0].toLowerCase()),Y+N[0].length):-1}function I(L,W,Y){var N=p.exec(W.slice(Y));return N?(L.m=y.get(N[0].toLowerCase()),Y+N[0].length):-1}function B(L,W,Y){return S(L,t,W,Y)}function C(L,W,Y){return S(L,n,W,Y)}function O(L,W,Y){return S(L,r,W,Y)}function ie(L){return o[L.getDay()]}function te(L){return a[L.getDay()]}function J(L){return s[L.getMonth()]}function z(L){return u[L.getMonth()]}function H(L){return i[+(L.getHours()>=12)]}function D(L){return 1+~~(L.getMonth()/3)}function G(L){return o[L.getUTCDay()]}function ne(L){return a[L.getUTCDay()]}function ue(L){return s[L.getUTCMonth()]}function ae(L){return u[L.getUTCMonth()]}function V(L){return i[+(L.getUTCHours()>=12)]}function j(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var W=x(L+="",v);return W.toString=function(){return L},W},parse:function(L){var W=M(L+="",!1);return W.toString=function(){return L},W},utcFormat:function(L){var W=x(L+="",b);return W.toString=function(){return L},W},utcParse:function(L){var W=M(L+="",!0);return W.toString=function(){return L},W}}}var Kh={"-":"",_:" ",0:"0"},tt=/^\s*\d+/,Q6=/^%/,J6=/[\\^$*+?|[\]().{}]/g;function Ae(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function e7(e){return e.replace(J6,"\\$&")}function ki(e){return new RegExp("^(?:"+e.map(e7).join("|")+")","i")}function Ti(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function t7(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function n7(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function r7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function i7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function a7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Qh(e,t,n){var r=tt.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Jh(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function o7(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function u7(e,t,n){var r=tt.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function s7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function ed(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function l7(e,t,n){var r=tt.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function td(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function c7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function f7(e,t,n){var r=tt.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function h7(e,t,n){var r=tt.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function d7(e,t,n){var r=tt.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function m7(e,t,n){var r=Q6.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function p7(e,t,n){var r=tt.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function b7(e,t,n){var r=tt.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function nd(e,t){return Ae(e.getDate(),t,2)}function g7(e,t){return Ae(e.getHours(),t,2)}function y7(e,t){return Ae(e.getHours()%12||12,t,2)}function w7(e,t){return Ae(1+kr.count(Zt(e),e),t,3)}function hp(e,t){return Ae(e.getMilliseconds(),t,3)}function v7(e,t){return hp(e,t)+"000"}function _7(e,t){return Ae(e.getMonth()+1,t,2)}function x7(e,t){return Ae(e.getMinutes(),t,2)}function M7(e,t){return Ae(e.getSeconds(),t,2)}function P7(e){var t=e.getDay();return t===0?7:t}function A7(e,t){return Ae(ui.count(Zt(e)-1,e),t,2)}function dp(e){var t=e.getDay();return t>=4||t===0?Ar(e):Ar.ceil(e)}function S7(e,t){return e=dp(e),Ae(Ar.count(Zt(e),e)+(Zt(e).getDay()===4),t,2)}function E7(e){return e.getDay()}function C7(e,t){return Ae(la.count(Zt(e)-1,e),t,2)}function k7(e,t){return Ae(e.getFullYear()%100,t,2)}function T7(e,t){return e=dp(e),Ae(e.getFullYear()%100,t,2)}function $7(e,t){return Ae(e.getFullYear()%1e4,t,4)}function D7(e,t){var n=e.getDay();return e=n>=4||n===0?Ar(e):Ar.ceil(e),Ae(e.getFullYear()%1e4,t,4)}function N7(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ae(t/60|0,"0",2)+Ae(t%60,"0",2)}function rd(e,t){return Ae(e.getUTCDate(),t,2)}function F7(e,t){return Ae(e.getUTCHours(),t,2)}function B7(e,t){return Ae(e.getUTCHours()%12||12,t,2)}function L7(e,t){return Ae(1+ju.count(Kt(e),e),t,3)}function mp(e,t){return Ae(e.getUTCMilliseconds(),t,3)}function R7(e,t){return mp(e,t)+"000"}function I7(e,t){return Ae(e.getUTCMonth()+1,t,2)}function O7(e,t){return Ae(e.getUTCMinutes(),t,2)}function q7(e,t){return Ae(e.getUTCSeconds(),t,2)}function G7(e){var t=e.getUTCDay();return t===0?7:t}function U7(e,t){return Ae(si.count(Kt(e)-1,e),t,2)}function pp(e){var t=e.getUTCDay();return t>=4||t===0?Sr(e):Sr.ceil(e)}function z7(e,t){return e=pp(e),Ae(Sr.count(Kt(e),e)+(Kt(e).getUTCDay()===4),t,2)}function H7(e){return e.getUTCDay()}function W7(e,t){return Ae(ca.count(Kt(e)-1,e),t,2)}function V7(e,t){return Ae(e.getUTCFullYear()%100,t,2)}function j7(e,t){return e=pp(e),Ae(e.getUTCFullYear()%100,t,2)}function Y7(e,t){return Ae(e.getUTCFullYear()%1e4,t,4)}function X7(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sr(e):Sr.ceil(e),Ae(e.getUTCFullYear()%1e4,t,4)}function Z7(){return"+0000"}function id(){return"%"}function ad(e){return+e}function od(e){return Math.floor(+e/1e3)}var Rr,Uc,La;K7({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function K7(e){return Rr=K6(e),Uc=Rr.format,Rr.parse,La=Rr.utcFormat,Rr.utcParse,Rr}function Q7(e){return new Date(e)}function J7(e){return e instanceof Date?+e:+new Date(+e)}function zc(e,t,n,r,i,a,o,u,s,l){var c=Wm(),f=c.invert,h=c.domain,d=l(".%L"),m=l(":%S"),p=l("%I:%M"),y=l("%I %p"),w=l("%a %d"),g=l("%b %d"),v=l("%B"),b=l("%Y");function _(x){return(s(x)<x?d:u(x)<x?m:o(x)<x?p:a(x)<x?y:r(x)<x?i(x)<x?w:g:n(x)<x?v:b)(x)}return c.invert=function(x){return new Date(f(x))},c.domain=function(x){return arguments.length?h(Array.from(x,J7)):h().map(Q7)},c.ticks=function(x){var M=h();return e(M[0],M[M.length-1],x??10)},c.tickFormat=function(x,M){return M==null?_:l(M)},c.nice=function(x){var M=h();return(!x||typeof x.range!="function")&&(x=t(M[0],M[M.length-1],x??10)),x?h(jm(M,x)):c},c.copy=function(){return Ca(c,zc(e,t,n,r,i,a,o,u,s,l))},c}function e4(){return wn.apply(zc(X6,Z6,Zt,Fa,ui,kr,Da,Ta,Yt,Uc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function t4(){return wn.apply(zc(Y6,fp,Kt,Ba,si,ju,Na,$a,Yt,La).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Zu(){var e=0,t=.5,n=1,r=1,i,a,o,u,s,l=It,c,f=!1,h;function d(p){return isNaN(p=+p)?h:(p=.5+((p=+c(p))-a)*(r*p<r*a?u:s),l(f?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d):[e,t,n]},d.clamp=function(p){return arguments.length?(f=!!p,d):f},d.interpolator=function(p){return arguments.length?(l=p,d):l};function m(p){return function(y){var w,g,v;return arguments.length?([w,g,v]=y,l=Iu(p,[w,g,v]),d):[l(0),l(.5),l(1)]}}return d.range=m(Sa),d.rangeRound=m(kc),d.unknown=function(p){return arguments.length?(h=p,d):h},function(p){return c=p,i=p(e),a=p(t),o=p(n),u=i===a?0:.5/(a-i),s=a===o?0:.5/(o-a),r=a<i?-1:1,d}}function bp(){var e=ka(Zu()(It));return e.copy=function(){return Xu(e,bp())},Hu.apply(e,arguments)}function gp(){var e=Ym(Zu()).domain([.1,1,10]);return e.copy=function(){return Xu(e,gp()).base(e.base())},Hu.apply(e,arguments)}function yp(){var e=Zm(Zu());return e.copy=function(){return Xu(e,yp()).constant(e.constant())},Hu.apply(e,arguments)}function wp(){var e=Qm(Zu());return e.copy=function(){return Xu(e,wp()).exponent(e.exponent())},Hu.apply(e,arguments)}function be(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const n4=be("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),r4=be("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),i4=be("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),a4=be("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),o4=be("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),u4=be("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),s4=be("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),l4=be("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),c4=be("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),f4=be("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),$e=e=>Zv(e[e.length-1]);var vp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(be);const _p=$e(vp);var xp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(be);const Mp=$e(xp);var Pp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(be);const Ap=$e(Pp);var Sp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(be);const Ep=$e(Sp);var jl=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(be);const cu=$e(jl);var Cp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(be);const kp=$e(Cp);var Yl=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(be);const fu=$e(Yl);var Tp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(be);const $p=$e(Tp);var Dp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(be);const Np=$e(Dp);var Fp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(be);const Bp=$e(Fp);var Lp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(be);const Rp=$e(Lp);var Ip=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(be);const Op=$e(Ip);var qp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(be);const Gp=$e(qp);var Up=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(be);const zp=$e(Up);var Hp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(be);const Wp=$e(Hp);var Vp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(be);const jp=$e(Vp);var Yp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(be);const Xp=$e(Yp);var Zp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(be);const Kp=$e(Zp);var Qp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(be);const Jp=$e(Qp);var eb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(be);const tb=$e(eb);var nb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(be);const rb=$e(nb);var ib=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(be);const ab=$e(ib);var ob=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(be);const ub=$e(ob);var sb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(be);const lb=$e(sb);var cb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(be);const fb=$e(cb);var hb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(be);const db=$e(hb);var mb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(be);const pb=$e(mb);function bb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const gb=Tc(pn(300,.5,0),pn(-240,.5,1));var yb=Tc(pn(-100,.75,.35),pn(80,1.5,.8)),wb=Tc(pn(260,.75,.35),pn(80,1.5,.8)),so=pn();function vb(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return so.h=360*e-100,so.s=1.5-1.5*t,so.l=.8-.9*t,so+""}var lo=Qn(),h4=Math.PI/3,d4=Math.PI*2/3;function _b(e){var t;return e=(.5-e)*Math.PI,lo.r=255*(t=Math.sin(e))*t,lo.g=255*(t=Math.sin(e+h4))*t,lo.b=255*(t=Math.sin(e+d4))*t,lo+""}function xb(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function Ku(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Mb=Ku(be("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Pb=Ku(be("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Ab=Ku(be("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Sb=Ku(be("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Ke(e){return function(){return e}}const Eb=Math.cos,Hc=Math.min,hu=Math.sin,Ye=Math.sqrt,ud=1e-12,du=Math.PI,Qu=2*du;function Cb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new um(t)}function kb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Tb(e){this._context=e}Tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ra(e){return new Tb(e)}function $b(e){return e[0]}function Db(e){return e[1]}function Nb(e,t){var n=Ke(!0),r=null,i=Ra,a=null,o=Cb(u);e=typeof e=="function"?e:e===void 0?$b:Ke(e),t=typeof t=="function"?t:t===void 0?Db:Ke(t);function u(s){var l,c=(s=kb(s)).length,f,h=!1,d;for(r==null&&(a=i(d=o())),l=0;l<=c;++l)!(l<c&&n(f=s[l],l,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,l,s),+t(f,l,s));if(d)return a=null,d+""||null}return u.x=function(s){return arguments.length?(e=typeof s=="function"?s:Ke(+s),u):e},u.y=function(s){return arguments.length?(t=typeof s=="function"?s:Ke(+s),u):t},u.defined=function(s){return arguments.length?(n=typeof s=="function"?s:Ke(!!s),u):n},u.curve=function(s){return arguments.length?(i=s,r!=null&&(a=i(r)),u):i},u.context=function(s){return arguments.length?(s==null?r=a=null:a=i(r=s),u):r},u}function m4(e,t,n){var r=null,i=Ke(!0),a=null,o=Ra,u=null,s=Cb(l);e=typeof e=="function"?e:e===void 0?$b:Ke(+e),t=typeof t=="function"?t:Ke(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Db:Ke(+n);function l(f){var h,d,m,p=(f=kb(f)).length,y,w=!1,g,v=new Array(p),b=new Array(p);for(a==null&&(u=o(g=s())),h=0;h<=p;++h){if(!(h<p&&i(y=f[h],h,f))===w)if(w=!w)d=h,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),m=h-1;m>=d;--m)u.point(v[m],b[m]);u.lineEnd(),u.areaEnd()}w&&(v[h]=+e(y,h,f),b[h]=+t(y,h,f),u.point(r?+r(y,h,f):v[h],n?+n(y,h,f):b[h]))}if(g)return u=null,g+""||null}function c(){return Nb().defined(i).curve(o).context(a)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Ke(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Ke(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Ke(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Ke(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Ke(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,a!=null&&(u=o(a)),l):o},l.context=function(f){return arguments.length?(f==null?a=u=null:u=o(a=f),l):a},l}class Fb{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function p4(e){return new Fb(e,!0)}function b4(e){return new Fb(e,!1)}const g4=Ye(3),Bb={draw(e,t){const n=Ye(t+Hc(t/28,.75))*.59436,r=n/2,i=r*g4;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},fa={draw(e,t){const n=Ye(t/du);e.moveTo(n,0),e.arc(0,0,n,0,Qu)}},Lb={draw(e,t){const n=Ye(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Rb=Ye(1/3),y4=Rb*2,Ib={draw(e,t){const n=Ye(t/y4),r=n*Rb;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Ob={draw(e,t){const n=Ye(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},qb={draw(e,t){const n=Ye(t-Hc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Gb={draw(e,t){const n=Ye(t),r=-n/2;e.rect(r,r,n,n)}},Ub={draw(e,t){const n=Ye(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},w4=.8908130915292852,zb=hu(du/10)/hu(7*du/10),v4=hu(Qu/10)*zb,_4=-Eb(Qu/10)*zb,Hb={draw(e,t){const n=Ye(t*w4),r=v4*n,i=_4*n;e.moveTo(0,-n),e.lineTo(r,i);for(let a=1;a<5;++a){const o=Qu*a/5,u=Eb(o),s=hu(o);e.lineTo(s*n,-u*n),e.lineTo(u*r-s*i,s*r+u*i)}e.closePath()}},zs=Ye(3),Wb={draw(e,t){const n=-Ye(t/(zs*3));e.moveTo(0,n*2),e.lineTo(-zs*n,-n),e.lineTo(zs*n,-n),e.closePath()}},x4=Ye(3),Vb={draw(e,t){const n=Ye(t)*.6824,r=n/2,i=n*x4/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},$t=-.5,Dt=Ye(3)/2,Xl=1/Ye(12),M4=(Xl/2+1)*3,jb={draw(e,t){const n=Ye(t/M4),r=n/2,i=n*Xl,a=r,o=n*Xl+n,u=-a,s=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,s),e.lineTo($t*r-Dt*i,Dt*r+$t*i),e.lineTo($t*a-Dt*o,Dt*a+$t*o),e.lineTo($t*u-Dt*s,Dt*u+$t*s),e.lineTo($t*r+Dt*i,$t*i-Dt*r),e.lineTo($t*a+Dt*o,$t*o-Dt*a),e.lineTo($t*u+Dt*s,$t*s-Dt*u),e.closePath()}},Yb={draw(e,t){const n=Ye(t-Hc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},P4=[fa,Lb,Ib,Gb,Hb,Wb,jb],A4=[fa,qb,Yb,Vb,Bb,Ub,Ob];function Jn(){}function mu(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Ju(e){this._context=e}Ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:mu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S4(e){return new Ju(e)}function Xb(e){this._context=e}Xb.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function E4(e){return new Xb(e)}function Zb(e){this._context=e}Zb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:mu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C4(e){return new Zb(e)}function Kb(e,t){this._basis=new Ju(e),this._beta=t}Kb.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],a=e[n]-r,o=t[n]-i,u=-1,s;++u<=n;)s=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(r+s*a),this._beta*t[u]+(1-this._beta)*(i+s*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const k4=function e(t){function n(r){return t===1?new Ju(r):new Kb(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function pu(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Wc(e,t){this._context=e,this._k=(1-t)/6}Wc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pu(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T4=function e(t){function n(r){return new Wc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Vc(e,t){this._context=e,this._k=(1-t)/6}Vc.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $4=function e(t){function n(r){return new Vc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jc(e,t){this._context=e,this._k=(1-t)/6}jc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pu(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const D4=function e(t){function n(r){return new jc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function Yc(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>ud){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,s=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/s,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/s}if(e._l23_a>ud){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Qb(e,t){this._context=e,this._alpha=t}Qb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Yc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const N4=function e(t){function n(r){return t?new Qb(r,t):new Wc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Jb(e,t){this._context=e,this._alpha=t}Jb.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Yc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const F4=function e(t){function n(r){return t?new Jb(r,t):new Vc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function eg(e,t){this._context=e,this._alpha=t}eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Yc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const B4=function e(t){function n(r){return t?new eg(r,t):new jc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function tg(e){this._context=e}tg.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function L4(e){return new tg(e)}function sd(e){return e<0?-1:1}function ld(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(sd(a)+sd(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function cd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Hs(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function bu(e){this._context=e}bu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hs(this,this._t0,cd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hs(this,cd(this,n=ld(this,e,t)),n);break;default:Hs(this,this._t0,n=ld(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function ng(e){this._context=new rg(e)}(ng.prototype=Object.create(bu.prototype)).point=function(e,t){bu.prototype.point.call(this,t,e)};function rg(e){this._context=e}rg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}};function R4(e){return new bu(e)}function I4(e){return new ng(e)}function ig(e){this._context=e}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=fd(e),i=fd(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function fd(e){var t,n=e.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function O4(e){return new ig(e)}function es(e,t){this._context=e,this._t=t}es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function q4(e){return new es(e,.5)}function G4(e){return new es(e,0)}function U4(e){return new es(e,1)}function Gi(e,t,n){this.k=e,this.x=t,this.y=n}Gi.prototype={constructor:Gi,scale:function(e){return e===1?this:new Gi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Gi.prototype;const z4="modulepreload",H4=function(e){return"/rhythm-vis/"+e},hd={},Ir=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const a=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=H4(o),o in hd)return;hd[o]=!0;const u=o.endsWith(".css"),s=u?'[rel="stylesheet"]':"";if(!!r)for(let f=a.length-1;f>=0;f--){const h=a[f];if(h.href===o&&(!u||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":z4,u||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),u)return new Promise((f,h)=>{c.addEventListener("load",f),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function W4(e){if(e){if(e=new Uint8Array(e.buffer||e),j4(e))return"wav";if(V4(e))return"mp3";if(X4(e))return"flac";if(Z4(e))return"m4a";if(K4(e))return"opus";if(Y4(e))return"oga";if(Q4(e))return"qoa"}}function V4(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function j4(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function Y4(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function X4(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function Z4(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function K4(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function Q4(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let J4=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],a=r,o=0;a<this.length&&o<t.length;a++,o++)t[o]=i[a]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var a=r,o=0;a<this.length&&o<t.length;a++,o++)i[a]=t[o]}};const e9=globalThis.AudioBuffer||J4;async function t9(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=W4(e);if(!t)throw Error("Cannot detect audio format");if(!mt[t])throw Error("Missing decoder for "+t+" format");return mt[t](e)}const mt={async oga(e){let{decoder:t}=mt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Ir(()=>import("./index-DyMM3-yQ.js"),__vite__mapDeps([0,1,2]));await(mt.oga.decoder=t=new n).ready}return e&&Or(await t.decodeFile(e))},async mp3(e){let{decoder:t}=mt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Ir(()=>import("./index-dPsm3TzX.js"),__vite__mapDeps([3,2]));await(mt.mp3.decoder=t=new n).ready}return e&&Or(await t.decode(e))},async flac(e){let{decoder:t}=mt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Ir(()=>import("./index-CbpveHOb.js"),__vite__mapDeps([4,1,2]));await(mt.flac.decoder=t=new n).ready}return e&&Or(await t.decode(e))},async opus(e){let{decoder:t}=mt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Ir(()=>import("./index-nBAeNSNL.js"),__vite__mapDeps([5,1,2]));await(mt.opus.decoder=t=new n).ready}return e&&Or(await t.decodeFile(e))},async wav(e){let{decode:t}=mt.wav;if(!t){let n=await Ir(()=>import("./index-oPL31gNI.js").then(r=>r.i),__vite__mapDeps([]));t=mt.wav.decode=n.default.decode}return e&&Or(await t(e))},async qoa(e){let{decode:t}=mt.qoa;return t||(mt.qoa.decode=t=(await Ir(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&Or(await t(e))}};function Or({channelData:e,sampleRate:t}){let n=new e9({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Ft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ag(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n9(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var r9=i9;function i9(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,a=i===3?32:16,o;return n===2?o=o9(e.getChannelData(0),e.getChannelData(1)):o=e.getChannelData(0),a9(o,i,r,n,a)}function a9(e,t,n,r,i){var a=i/8,o=r*a,u=new ArrayBuffer(44+e.length*a),s=new DataView(u);return co(s,0,"RIFF"),s.setUint32(4,36+e.length*a,!0),co(s,8,"WAVE"),co(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,t,!0),s.setUint16(22,r,!0),s.setUint32(24,n,!0),s.setUint32(28,n*o,!0),s.setUint16(32,o,!0),s.setUint16(34,i,!0),co(s,36,"data"),s.setUint32(40,e.length*a,!0),t===1?s9(s,44,e):u9(s,44,e),u}function o9(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,a=0;i<n;)r[i++]=e[a],r[i++]=t[a],a++;return r}function u9(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function s9(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function co(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const l9=ag(r9);async function og(e){const n=await(await fetch(e)).arrayBuffer();return await t9(n)}function c9(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),a=new Float32Array(Math.ceil(r*e.sampleRate));for(const o of t){const u=Math.round(o*e.sampleRate);let s=1;for(let l=0;l<i.length;++l)s=Math.max(0,s-2/40100),a[u+l]=i[l]*s}return a}function Xc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([l9(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function f9(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function Zl(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const a=i.audioBuffer.getChannelData(0);for(const o of i.times){const u=Math.round(o*n);for(let s=0;s<a.length;++s)r[u+s]=Math.min(r[u+s]+a[s],1)}}return r}function er(e){return e!=null&&!Number.isNaN(e)}function Qt(e,t){return+er(t)-+er(e)||yt(e,t)}function gu(e,t){return+er(t)-+er(e)||Ma(e,t)}function Zc(e){return e!=null&&`${e}`!=""}function ug(e){return isFinite(e)?e:NaN}function ts(e){return e>0&&isFinite(e)?e:NaN}function Kc(e){return e<0&&isFinite(e)?e:NaN}function h9(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return`${d9(e.getUTCFullYear())}-${En(e.getUTCMonth()+1,2)}-${En(e.getUTCDate(),2)}${n||r||i||a?`T${En(n,2)}:${En(r,2)}${i||a?`:${En(i,2)}${a?`.${En(a,3)}`:""}`:""}Z`:""}`}function d9(e){return e<0?`-${En(-e,6)}`:e>9999?`+${En(e,6)}`:En(e,4)}function En(e,t){return`${e}`.padStart(t,"0")}const m9=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function sg(e,t){return m9.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const Hr=1e3,Yn=Hr*60,Xn=Yn*60,bn=Xn*24,rn=bn*7,gr=bn*30,Wn=bn*365,Ws=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Hr],["5 seconds",5*Hr],["15 seconds",15*Hr],["30 seconds",30*Hr],["minute",Yn],["5 minutes",5*Yn],["15 minutes",15*Yn],["30 minutes",30*Yn],["hour",Xn],["3 hours",3*Xn],["6 hours",6*Xn],["12 hours",12*Xn],["day",bn],["2 days",2*bn],["week",rn],["2 weeks",2*rn],["month",gr],["3 months",3*gr],["6 months",6*gr],["year",Wn],["2 years",2*Wn],["5 years",5*Wn],["10 years",10*Wn],["20 years",20*Wn],["50 years",50*Wn],["100 years",100*Wn]],Qc=new Map([["second",Hr],["minute",Yn],["hour",Xn],["day",bn],["monday",rn],["tuesday",rn],["wednesday",rn],["thursday",rn],["friday",rn],["saturday",rn],["sunday",rn],["week",rn],["month",gr],["year",Wn]]),lg=new Map([["second",Yt],["minute",Ta],["hour",Da],["day",kr],["monday",la],["tuesday",np],["wednesday",rp],["thursday",Ar],["friday",ip],["saturday",ap],["sunday",ui],["week",ui],["month",Fa],["year",Zt]]),Jc=new Map([["second",Yt],["minute",$a],["hour",Na],["day",Yu],["monday",ca],["tuesday",op],["wednesday",up],["thursday",Sr],["friday",sp],["saturday",lp],["sunday",si],["week",si],["month",Ba],["year",Kt]]),Ia=Symbol("intervalDuration"),ns=Symbol("intervalType");for(const[e,t]of lg)t[Ia]=Qc.get(e),t[ns]="time";for(const[e,t]of Jc)t[Ia]=Qc.get(e),t[ns]="utc";const Ui=[["year",Kt,"utc"],["month",Ba,"utc"],["day",Yu,"utc",6*gr],["hour",Na,"utc",3*bn],["minute",$a,"utc",6*Xn],["second",Yt,"utc",30*Yn]],Eo=[["year",Zt,"time"],["month",Fa,"time"],["day",kr,"time",6*gr],["hour",Da,"time",3*bn],["minute",Ta,"time",6*Xn],["second",Yt,"time",30*Yn]],p9=[Ui[0],Eo[0],Ui[1],Eo[1],Ui[2],Eo[2],...Ui.slice(3)];function cg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=Jc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function fg(e){return hg(cg(e),"time")}function ef(e){return hg(cg(e),"utc")}function hg([e,t],n){let r=(n==="time"?lg:Jc).get(e);return t>1&&(r=r.every(t),r[Ia]=Qc.get(e)*t,r[ns]=n),r}function dd(e,t){if(!(t>1))return;const n=e[Ia];if(!Ws.some(([,i])=>i===n)||n%bn===0&&bn<n&&n<gr)return;const[r]=Ws[Eu(([,i])=>Math.log(i)).center(Ws,Math.log(n*t))];return(e[ns]==="time"?fg:ef)(r)}function md(e,t,n){const r=t==="time"?Uc:La;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=b9(n);switch(e){case"millisecond":return qr(r(".%L"),r(":%M:%S"),i);case"second":return qr(r(":%S"),r("%-I:%M"),i);case"minute":return qr(r("%-I:%M"),r("%p"),i);case"hour":return qr(r("%-I %p"),r("%b %-d"),i);case"day":return qr(r("%-d"),r("%b"),i);case"month":return qr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function b9(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function g9(e){return e==="time"?Eo:e==="utc"?Ui:p9}function y9(e,t,n){const r=qt(Ow(t,(i,a)=>Math.abs(a-i)));if(r<1e3)return md("millisecond","utc",n);for(const[i,a,o,u]of g9(e)){if(r>u||i==="hour"&&!r)break;if(t.every(s=>a.floor(s)>=s))return md(i,o,n)}}function qr(e,t,n){return(r,i,a)=>{const o=e(r,i),u=t(r,i),s=i-ci(a);return i!==s&&a[s]!==void 0&&u===t(a[s],s)?o:n(o,u)}}const ha=Object.getPrototypeOf(Uint8Array),w9=Object.prototype.toString,dg=Symbol("reindex");function et(e,t,n){const r=typeof t;return r==="string"?pd(e,mg(t),n):r==="function"?pd(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ve(e,Oa(t),n):typeof(t==null?void 0:t.transform)=="function"?bd(t.transform(e),n):v9(bd(t,n),e==null?void 0:e[dg])}function v9(e,t){return t?af(e,t):e}function pd(e,t,n){return Ve(e,(n==null?void 0:n.prototype)instanceof ha?_9(t):t,n)}function bd(e,t){return t===void 0?kt(e):e instanceof t?e:t.prototype instanceof ha&&!(e instanceof ha)?t.from(e,nf):t.from(e)}function _9(e){return(t,n)=>nf(e(t,n))}const Co=[null],mg=e=>t=>t[e],rs={transform:On},st={transform:e=>e},x9=()=>1,M9=()=>!0,ct=e=>e==null?e:`${e}`,Fe=e=>e==null?e:+e,tf=e=>e?e[0]:void 0,Kl=e=>e?e[1]:void 0,Oa=e=>()=>e;function P9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>Jr(n,t,r)}function sn(e){return e instanceof ha?e:Ve(e,nf,Float64Array)}function nf(e){return e==null?NaN:Number(e)}function A9(e){return Ve(e,pg)}function pg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?sg(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Rn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:as(e)?[void 0,e]:[e,void 0]}function ft(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function bg(e,t,n){if(e!=null)return en(e,t,n)}function en(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function kt(e){return e==null||e instanceof Array||e instanceof ha?e:Array.from(e)}function Ve(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function da(e,t=Array){return e instanceof t?e.slice():t.from(e)}function S9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function gg({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function E9(e){return S9(e)||gg(e)||e.interval!==void 0}function ir(e){return(e==null?void 0:e.toString)===w9}function Ql(e){return ir(e)&&(e.type!==void 0||e.domain!==void 0)}function is(e){return ir(e)&&typeof e.transform!="function"}function li(e){return is(e)&&e.value===void 0&&e.channel===void 0}function C9(e,t,n,r=st){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function qa(e,t){return e===void 0&&t===void 0?[tf,Kl]:[e,t]}function rf({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Rn(t)),e===void 0&&([e]=Rn(n)),e}function On(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function af(e,t){return Ve(t,n=>e[n],e.constructor)}function k9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function mr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function T9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function yu(e){let t;return[{transform:()=>t,label:Dr(e)},n=>t=n]}function An(e){return e==null?[e]:yu(e)}function Dr(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function Jl(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return vt(r)||vt(i)?Ve(r,(a,o)=>new Date((+r[o]+ +i[o])/2)):Ve(r,(a,o)=>(+r[o]+ +i[o])/2,Float64Array)},label:e.label}}function yg(e,t){const n=wg(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ve(e,n):e}function wg(e,t){const n=of(e,t);return n&&(r=>er(r)?n.floor(r):r)}function of(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>pl(Math.ceil(r*n),i*n).map(a=>a/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>pl(Math.ceil(r/n),i/n).map(a=>a*n)}}if(typeof e=="string")return(t==="time"?fg:ef)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function vi(e,t){if(e=of(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function $9(e,t){if(e=vi(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function D9(e){return Wr(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function Wr(e){return typeof(e==null?void 0:e.range)=="function"}function Ga(e){return e===void 0||is(e)?e:{value:e}}function N9(e){return e==null?null:{transform:t=>et(t,e,Float64Array),label:Dr(e)}}function ar(e){return e&&typeof e[Symbol.iterator]=="function"}function vg(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function gd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function vt(e){for(const t of e)if(t!=null)return t instanceof Date}function F9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&sg(t)}function B9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function L9(e){for(const t of e)if(t!=null)return typeof t=="number"}function Vs(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const R9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function as(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||R9.has(e))}function I9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function bt(e){return e==null||ma(e)}function ma(e){return/^\s*none\s*$/i.test(e)}function O9(e){return/^\s*round\s*$/i.test(e)}function ec(e,t){return bg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function os(e="middle"){return ec(e,"frameAnchor")}function ci(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Ma(t,n)}function q9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const a=r[i];n===e?n={...n,[i]:a}:n[i]=a}return n}function G9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function _g(e){return ar(e)?G9(e):e}const ln=Symbol("position"),qn=Symbol("color"),Ua=Symbol("radius"),za=Symbol("length"),Ha=Symbol("opacity"),us=Symbol("symbol"),xg=Symbol("projection"),Ie=new Map([["x",ln],["y",ln],["fx",ln],["fy",ln],["r",Ua],["color",qn],["opacity",Ha],["symbol",us],["length",za],["projection",xg]]);function U9(e){return e===ln||e===xg}function z9(e){return e===ln||e===Ua||e===za||e===Ha}const H9=Math.sqrt(3),W9=2/H9,V9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*W9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},uf=new Map([["asterisk",Bb],["circle",fa],["cross",Lb],["diamond",Ib],["diamond2",Ob],["hexagon",V9],["plus",qb],["square",Gb],["square2",Ub],["star",Hb],["times",Yb],["triangle",Wb],["triangle2",Vb],["wye",jb]]);function sf(e){return e&&typeof e.draw=="function"}function j9(e){return sf(e)?!0:typeof e!="string"?!1:uf.has(e.toLowerCase())}function lf(e){if(e==null||sf(e))return e;const t=uf.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function Y9(e){if(e==null||sf(e))return[void 0,e];if(typeof e=="string"){const t=uf.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function ss({filter:e,sort:t,reverse:n,transform:r,initializer:i,...a}={},o){if(r===void 0&&(e!=null&&(r=Mg(e)),t!=null&&!li(t)&&(r=js(r,cf(t))),n&&(r=js(r,Pg))),o!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...a,...(t===null||li(t))&&{sort:t},transform:js(r,o)}}function fi({filter:e,sort:t,reverse:n,initializer:r,...i}={},a){return r===void 0&&(e!=null&&(r=Mg(e)),t!=null&&!li(t)&&(r=Ys(r,cf(t))),n&&(r=Ys(r,Pg))),{...i,...(t===null||li(t))&&{sort:t},initializer:Ys(r,a)}}function js(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,kt(n),r,i)}}function Ys(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...a){let o,u,s,l,c,f;return{data:u=n,facets:s=r,channels:o}=e.call(this,n,r,i,...a),{data:c=u,facets:f=s,channels:l}=t.call(this,u,s,{...i,...o},...a),{data:c,facets:f,channels:{...o,...l}}}}function X9(e,t){return(e.initializer!=null?fi:ss)(e,t)}function Mg(e){return(t,n)=>{const r=et(t,e);return{data:t,facets:n.map(i=>i.filter(a=>r[a]))}}}function Pg(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function Z9(e,{sort:t,...n}={}){return{...(is(e)&&e.channel!==void 0?fi:X9)(n,cf(e)),sort:li(t)?t:null}}function cf(e){return(typeof e=="function"&&e.length!==1?K9:Q9)(e)}function K9(e){return(t,n)=>{const r=(i,a)=>e(t[i],t[a]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function Q9(e){let t,n;({channel:t,value:e,order:n}={...Ga(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?gu:Qt),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Qt;break;case"descending":n=gu;break;default:throw new Error(`invalid order: ${n}`)}return(i,a,o)=>{let u;if(t===void 0)u=et(i,e);else{if(o===void 0)throw new Error("channel sort requires an initializer");if(u=o[t],!u)return{};u=u.value}const s=(l,c)=>n(u[l],u[c]);return{data:i,facets:a.map(l=>l.slice().sort(s))}}}function fo(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function J9(e,t,n=Ag){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",o8]),t.href!=null&&e.href===void 0&&r.push(["href",hf]),r.filter(([,i])=>i!==void 0).map(([i,a])=>a===null?e8(i):n(i,a,t))}function Ag(e,t,n,r=Sg){let i;ir(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const a=r(e,t,n),[o,u]=yu(a.label);let s;return{name:e,output:i===void 0?o:{value:o,scale:i},initialize(l){a.initialize(l),s=u([])},scope(l,c){a.scope(l,c)},reduce(l,c){s.push(a.reduce(l,c))}}}function e8(e){return{name:e,initialize(){},scope(){},reduce(){}}}function Sg(e,t,n,r=ff){const i=T9(e,n),a=r(t,i);let o,u;return{label:Dr(a===wu?null:i,a.label),initialize(s){o=i===void 0?s:et(s,i),a.scope==="data"&&(u=a.reduceIndex(On(s),o))},scope(s,l){a.scope===s&&(u=a.reduceIndex(l,o))},reduce(s,l){return a.scope==null?a.reduceIndex(s,o,l):a.reduceIndex(s,o,u,l)}}}function yd(e,t){return t?ta($u(e,n=>t[n]),tf):[[,e]]}function ff(e,t,n=t8){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&ir(e))return i8(e);if(typeof e=="function")return a8(e);if(/^p\d{2}$/i.test(e))return Sn(P9(e));switch(`${e}`.toLowerCase()){case"first":return hf;case"last":return u8;case"identity":return Eg;case"count":return wu;case"distinct":return s8;case"sum":return t==null?wu:l8;case"proportion":return vd(t,"data");case"proportion-facet":return vd(t,"facet");case"deviation":return Sn(ku);case"min":return Sn(Nn);case"min-index":return Sn(Fw);case"max":return Sn(qt);case"max-index":return Sn(Nw);case"mean":return wd(Nu);case"median":return wd(ml);case"variance":return Sn(_c);case"mode":return Sn(Iw)}return n(e)}function t8(e){throw new Error(`invalid reduce: ${e}`)}function n8(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function r8(e,t,n){if(t){const r=t.output.transform(),i=(a,o)=>Qt(r[a],r[o]);e.forEach(a=>a.sort(i))}n&&e.forEach(r=>r.reverse())}function i8(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function a8(e){return{reduceIndex(t,n,r){return e(af(n,t),r)}}}function Sn(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function wd(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return vt(n)?new Date(r):r}}}const Eg={reduceIndex(e,t){return af(t,e)}},hf={reduceIndex(e,t){return t[e[0]]}},o8={reduceIndex(e,t){const r=ta(jr(e,a=>a.length,a=>t[a]),Kl),i=r.slice(-5).reverse();if(i.length<r.length){const a=r.slice(0,-4);i[4]=[` ${a.length.toLocaleString("en-US")} more`,Kn(a,Kl)]}return i.map(([a,o])=>`${a} (${o.toLocaleString("en-US")})`).join(`
`)}},u8={reduceIndex(e,t){return t[e[e.length-1]]}},wu={label:"Frequency",reduceIndex(e){return e.length}},s8={label:"Distinct",reduceIndex(e,t){const n=new Tu;for(const r of e)n.add(t[r]);return n.size}},l8=Sn(Kn);function vd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>Kn(n,a=>r[a])/i}}function pa(e,{scale:t,type:n,value:r,filter:i,hint:a,label:o=Dr(r)},u){return a===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(a=r.hint),Cg(u,{scale:t,type:n,value:et(e,r),label:o,filter:i,hint:a})}function c8(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,pa(t,r,n)]))}function f8(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:a}])=>{const o=i==null?null:t[i];return[r,o==null?a:Ve(a,o)]}));return n.channels=e,n}function Cg(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&Vs(r,as)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&Vs(r,I9)?null:"opacity";break;case"symbol":n!==!0&&Vs(r,j9)?(t.scale=null,t.value=Ve(r,lf)):t.scale="symbol";break;default:t.scale=Ie.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ie.has(n))throw new Error(`unknown scale: ${n}`);return t}function h8(e,t,n,r,i){const{order:a,reverse:o,reduce:u=!0,limit:s}=i;for(const l in i){if(!Ie.has(l))continue;let{value:c,order:f=a,reverse:h=o,reduce:d=u,limit:m=s}=Ga(i[l]);const p=c==null?void 0:c.startsWith("-");if(p&&(c=c.slice(1)),f=f===void 0?p!==(c==="width"||c==="height")?Tg:kg:p8(f),d==null||d===!1)continue;const y=l==="fx"||l==="fy"?m8(t,r[l]):d8(n,l);if(!y)throw new Error(`missing channel for scale: ${l}`);const w=y.value,[g=0,v=1/0]=ar(m)?m:m<0?[m]:[0,m];if(c==null)y.domain=()=>{let b=Array.from(new Tu(w));return h&&(b=b.reverse()),(g!==0||v!==1/0)&&(b=b.slice(g,v)),b};else{const b=c==="data"?e:c==="height"?_d(n,"y1","y2"):c==="width"?_d(n,"x1","x2"):tc(n,c,c==="y"?"y2":c==="x"?"x2":void 0),_=ff(d===!0?"max":d,b);y.domain=()=>{let x=Ew(On(w),M=>_.reduceIndex(M,b),M=>w[M]);return f&&x.sort(f),h&&x.reverse(),(g!==0||v!==1/0)&&(x=x.slice(g,v)),x.map(tf)}}}}function d8(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function m8(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let a=0;a<n.length;++a){const o=r[n[a][0]];for(const u of e[a])i[u]=o}return t}function _d(e,t,n){const r=tc(e,t),i=tc(e,n);return Ve(i,(a,o)=>Math.abs(a-r[o]),Float64Array)}function tc(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function p8(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return kg;case"descending":return Tg}throw new Error(`invalid order: ${e}`)}function kg([e,t],[n,r]){return Qt(t,r)||Qt(e,n)}function Tg([e,t],[n,r]){return gu(t,r)||Qt(e,n)}function xd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function b8(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,a)=>i!==r[a]))&&(n=r,t=e(...r)),t)}const g8=b8(e=>new Intl.NumberFormat(e));function y8(e="en-US"){const t=g8(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function w8(e){return h9(e,"Invalid Date")}function v8(e="en-US"){const t=y8(e);return n=>(n instanceof Date?w8:typeof n=="number"?t:ct)(n)}const Er=v8();let nc=0,rc;function _8(){const e=nc;return nc=0,rc=void 0,e}function Zn(e){e!==rc&&(rc=e,console.warn(e),++nc)}const gt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let x8=0;function Md(){return`plot-clip-${++x8}`}function M8(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:a,target:o,fill:u,fillOpacity:s,stroke:l,strokeWidth:c,strokeOpacity:f,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:m,strokeDasharray:p,strokeDashoffset:y,opacity:w,mixBlendMode:g,imageFilter:v,paintOrder:b,pointerEvents:_,shapeRendering:x,channels:M},{ariaLabel:S,fill:E="currentColor",fillOpacity:$,stroke:P="none",strokeOpacity:T,strokeWidth:I,strokeLinecap:B,strokeLinejoin:C,strokeMiterlimit:O,paintOrder:ie}){E===null&&(u=null,s=null),P===null&&(l=null,f=null),bt(E)?!bt(P)&&(!bt(u)||M!=null&&M.fill)&&(P="none"):bt(P)&&(!bt(l)||M!=null&&M.stroke)&&(E="none");const[te,J]=Rn(u,E),[z,H]=ft(s,$),[D,G]=Rn(l,P),[ne,ue]=ft(f,T),[ae,V]=ft(w);ma(G)||(c===void 0&&(c=I),d===void 0&&(d=B),h===void 0&&(h=C),m===void 0&&!O9(h)&&(m=O),!ma(J)&&b===void 0&&(b=ie));const[j,L]=ft(c);return E!==null&&(e.fill=rt(J,"currentColor"),e.fillOpacity=$i(H,1)),P!==null&&(e.stroke=rt(G,"none"),e.strokeWidth=$i(L,1),e.strokeOpacity=$i(ue,1),e.strokeLinejoin=rt(h,"miter"),e.strokeLinecap=rt(d,"butt"),e.strokeMiterlimit=$i(m,4),e.strokeDasharray=rt(p,"none"),e.strokeDashoffset=rt(y,"0")),e.target=ct(o),e.ariaLabel=ct(S),e.ariaDescription=ct(i),e.ariaHidden=ct(a),e.opacity=$i(V,1),e.mixBlendMode=rt(g,"normal"),e.imageFilter=rt(v,"none"),e.paintOrder=rt(b,"normal"),e.pointerEvents=rt(_,"auto"),e.shapeRendering=rt(x,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:te,scale:"auto",optional:!0},fillOpacity:{value:z,scale:"auto",optional:!0},stroke:{value:D,scale:"auto",optional:!0},strokeOpacity:{value:ne,scale:"auto",optional:!0},strokeWidth:{value:j,optional:!0},opacity:{value:ae,scale:"auto",optional:!0}}}function P8(e,t){t&&e.filter(n=>Zc(t[n])).append("title").call(S8,t)}function A8(e,t){t&&e.filter(([n])=>Zc(t[n])).append("title").call(E8,t)}function S8(e,t){t&&e.text(n=>Er(t[n]))}function E8(e,t){t&&e.text(([n])=>Er(t[n]))}function Gn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",h=>r[h]),a&&fe(e,"fill",h=>a[h]),o&&fe(e,"fill-opacity",h=>o[h]),u&&fe(e,"stroke",h=>u[h]),s&&fe(e,"stroke-opacity",h=>s[h]),l&&fe(e,"stroke-width",h=>l[h]),c&&fe(e,"opacity",h=>c[h]),f&&Fg(e,h=>f[h],t),n||P8(e,i)}function $g(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:a,fillOpacity:o,stroke:u,strokeOpacity:s,strokeWidth:l,opacity:c,href:f}){r&&fe(e,"aria-label",([h])=>r[h]),a&&fe(e,"fill",([h])=>a[h]),o&&fe(e,"fill-opacity",([h])=>o[h]),u&&fe(e,"stroke",([h])=>u[h]),s&&fe(e,"stroke-opacity",([h])=>s[h]),l&&fe(e,"stroke-width",([h])=>l[h]),c&&fe(e,"opacity",([h])=>c[h]),f&&Fg(e,([h])=>f[h],t),n||A8(e,i)}function C8({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:a,strokeWidth:o,opacity:u,href:s},{tip:l}){return[e,l?void 0:t,n,r,i,a,o,u,s].filter(c=>c!==void 0)}function k8(e,t,n){const r=$u(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&Zn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*Dg(e,t,n,r){const{z:i}=n,{z:a}=r,o=C8(r,n),u=[...t,...o];for(const s of a?k8(e,a,i):[e]){let l,c;e:for(const f of s){for(const h of u)if(!er(h[f])){c&&c.push(-1);continue e}if(l===void 0){c&&(yield c),l=o.map(h=>mr(h[f])),c=[f];continue}c.push(f);for(let h=0;h<o.length;++h)if(mr(o[h][f])!==l[h]){yield c,l=o.map(m=>mr(m[f])),c=[f];continue e}}c&&(yield c)}}function Ng(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=en(e,"clip",["frame","sphere"])),e}function T8(e,t,n,r){let i;const{clip:a=r.clip}=t;switch(a){case"frame":{const{width:o,height:u,marginLeft:s,marginRight:l,marginTop:c,marginBottom:f}=n,h=Md();i=`url(#${h})`,e=ze("svg:g",r).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",s).attr("y",c).attr("width",o-l-s).attr("height",u-c-f)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:o}=r;if(!o)throw new Error('the "sphere" clip option requires a projection');const u=Md();i=`url(#${u})`,e.append("clipPath").attr("id",u).append("path").attr("d",Gu(o)({type:"Sphere"}));break}}fe(e,"aria-label",t.ariaLabel),fe(e,"aria-description",t.ariaDescription),fe(e,"aria-hidden",t.ariaHidden),fe(e,"clip-path",i)}function zt(e,t,n,r){T8(e,t,n,r),fe(e,"fill",t.fill),fe(e,"fill-opacity",t.fillOpacity),fe(e,"stroke",t.stroke),fe(e,"stroke-width",t.strokeWidth),fe(e,"stroke-opacity",t.strokeOpacity),fe(e,"stroke-linejoin",t.strokeLinejoin),fe(e,"stroke-linecap",t.strokeLinecap),fe(e,"stroke-miterlimit",t.strokeMiterlimit),fe(e,"stroke-dasharray",t.strokeDasharray),fe(e,"stroke-dashoffset",t.strokeDashoffset),fe(e,"shape-rendering",t.shapeRendering),fe(e,"filter",t.imageFilter),fe(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;fe(e,"pointer-events",i)}function Ht(e,t){$8(e,"mix-blend-mode",t.mixBlendMode),fe(e,"opacity",t.opacity)}function Fg(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const a=this.ownerDocument.createElementNS(ei.svg,"a");a.setAttribute("fill","inherit"),a.setAttributeNS(ei.xlink,"href",i),n!=null&&a.setAttribute("target",n),this.parentNode.insertBefore(a,this).appendChild(this)}})}function fe(e,t,n){n!=null&&e.attr(t,n)}function $8(e,t,n){n!=null&&e.style(t,n)}function Tt(e,t,{x:n,y:r},i=gt,a=gt){i+=t.dx,a+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(a+=r.bandwidth()/2),(i||a)&&e.attr("transform",`translate(${i},${a})`)}function rt(e,t){if((e=ct(e))!==t)return e}function $i(e,t){if((e=Fe(e))!==t)return e}const D8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function df(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!D8.test(e))throw new Error(`invalid class name: ${e}`);return e}function mf(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function Wa({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:a,marginLeft:o}){return[/left$/.test(e)?o:/right$/.test(e)?t-i:(o+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-a:(r+n-a)/2]}function pf(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:Ng(n)}}function ze(e,{document:t}){return ji(Bu(e).call(t.documentElement))}const Bg=Math.PI,xn=2*Bg,Pd=.618;function N8({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:a=t}={},o){if(e==null)return;if(typeof e.stream=="function")return e;let u,s,l="frame";if(ir(e)){let _;if({type:e,domain:s,inset:_,insetTop:n=_!==void 0?_:n,insetRight:r=_!==void 0?_:r,insetBottom:i=_!==void 0?_:i,insetLeft:a=_!==void 0?_:a,clip:l=l,...u}=e,e==null)return}typeof e!="function"&&({type:e}=Lg(e));const{width:c,height:f,marginLeft:h,marginRight:d,marginTop:m,marginBottom:p}=o,y=c-h-d-a-r,w=f-m-p-n-i;if(e=e==null?void 0:e({width:y,height:w,clip:l,...u}),e==null)return;l=F8(l,h,m,c-d,f-p);let g=h+a,v=m+n,b;if(s!=null){const[[_,x],[M,S]]=Gu(e).bounds(s),E=Math.min(y/(M-_),w/(S-x));E>0?(g-=(E*(_+M)-y)/2,v-=(E*(x+S)-w)/2,b=Ul({point($,P){this.stream.point($*E+g,P*E+v)}})):Zn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return b??(b=g===0&&v===0?Rg():Ul({point(_,x){this.stream.point(_+g,x+v)}})),{stream:_=>e.stream(b.stream(l(_)))}}function Lg(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Vt(v6,.7463,.4673);case"albers":return ho(Fm,.7463,.4673);case"azimuthal-equal-area":return Vt(_6,4,4);case"azimuthal-equidistant":return Vt(x6,xn,xn);case"conic-conformal":return ho(A6,xn,xn);case"conic-equal-area":return ho(ou,6.1702,2.9781);case"conic-equidistant":return ho(C6,7.312,3.6282);case"equal-earth":return Vt(T6,5.4133,2.6347);case"equirectangular":return Vt(S6,xn,Bg);case"gnomonic":return Vt($6,3.4641,3.4641);case"identity":return{type:Rg};case"reflect-y":return{type:B8};case"mercator":return Vt(M6,xn,xn);case"orthographic":return Vt(D6,2,2);case"stereographic":return Vt(N6,2,2);case"transverse-mercator":return Vt(F6,xn,xn);default:throw new Error(`unknown projection type: ${e}`)}}function F8(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return a=>a;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return ym(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Vt(e,t,n){return{type:({width:r,height:i,rotate:a,precision:o=.15,clip:u})=>{var l,c,f;const s=e();return o!=null&&((l=s.precision)==null||l.call(s,o)),a!=null&&((c=s.rotate)==null||c.call(s,a)),typeof u=="number"&&((f=s.clipAngle)==null||f.call(s,u)),s.scale(Math.min(r/t,i/n)),s.translate([r/2,i/2]),s},aspectRatio:n/t}}function ho(e,t,n){const{type:r,aspectRatio:i}=Vt(e,t,n);return{type:a=>{const{parallels:o,domain:u,width:s,height:l}=a,c=r(a);return o!=null&&(c.parallels(o),u===void 0&&c.fitSize([s,l],{type:"Sphere"})),c},aspectRatio:i}}const Rg=Oa({stream:e=>e}),B8=Oa(Ul({point(e,t){this.stream.point(e,-t)}}));function L8(e,t,n,r){const i=n[e],a=n[t],o=i.length,u=n[e]=new Float64Array(o).fill(NaN),s=n[t]=new Float64Array(o).fill(NaN);let l;const c=r.stream({point(f,h){u[l]=f,s[l]=h}});for(l=0;l<o;++l)c.point(i[l],a[l])}function R8({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(ir(e)&&(e=e.type),e!=null)}function I8(e){if(typeof(e==null?void 0:e.stream)=="function")return Pd;if(ir(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=Lg(e);if(t)return t}return Pd}}function O8(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},a={point(o,u){t.push(o),n.push(u)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const o of e.value)fr(o,a);return[r,i]}const q8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Ig=new Map([["accent",r4],["category10",n4],["dark2",i4],["observable10",q8],["paired",a4],["pastel1",o4],["pastel2",u4],["set1",s4],["set2",l4],["set3",c4],["tableau10",f4]]);function G8(e){return e!=null&&Ig.has(`${e}`.toLowerCase())}const Ad=new Map([...Ig,["brbg",Mn(vp,_p)],["prgn",Mn(xp,Mp)],["piyg",Mn(Pp,Ap)],["puor",Mn(Sp,Ep)],["rdbu",Mn(jl,cu)],["rdgy",Mn(Cp,kp)],["rdylbu",Mn(Yl,fu)],["rdylgn",Mn(Tp,$p)],["spectral",Mn(Dp,Np)],["burd",Sd(jl,cu)],["buylrd",Sd(Yl,fu)],["blues",Ze(ib,ab)],["greens",Ze(ob,ub)],["greys",Ze(sb,lb)],["oranges",Ze(mb,pb)],["purples",Ze(cb,fb)],["reds",Ze(hb,db)],["turbo",Pn(xb)],["viridis",Pn(Mb)],["magma",Pn(Pb)],["inferno",Pn(Ab)],["plasma",Pn(Sb)],["cividis",Pn(bb)],["cubehelix",Pn(gb)],["warm",Pn(yb)],["cool",Pn(wb)],["bugn",Ze(Fp,Bp)],["bupu",Ze(Lp,Rp)],["gnbu",Ze(Ip,Op)],["orrd",Ze(qp,Gp)],["pubu",Ze(Hp,Wp)],["pubugn",Ze(Up,zp)],["purd",Ze(Vp,jp)],["rdpu",Ze(Yp,Xp)],["ylgn",Ze(Qp,Jp)],["ylgnbu",Ze(Zp,Kp)],["ylorbr",Ze(eb,tb)],["ylorrd",Ze(nb,rb)],["rainbow",Ed(vb)],["sinebow",Ed(_b)]]);function Ze(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Xt(t,n):e[n])}function Mn(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Xt(t,n):e[n])}function Sd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Xt(r=>t(1-r),n):e[n].slice().reverse())}function Pn(e){return({length:t})=>Xt(e,Math.max(2,Math.floor(t)))}function Ed(e){return({length:t})=>Xt(e,Math.floor(t)+1).slice(0,-1)}function Og(e){const t=`${e}`.toLowerCase();if(!Ad.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Ad.get(t)}function ls(e,t){const n=Og(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function U8(e,t="greys"){const n=new Set,[r,i]=ls(t,2);for(const a of e)if(a!=null)if(a===!0)n.add(i);else if(a===!1)n.add(r);else return;return[...n]}const Cd=new Map([["brbg",_p],["prgn",Mp],["piyg",Ap],["puor",Ep],["rdbu",cu],["rdgy",kp],["rdylbu",fu],["rdylgn",$p],["spectral",Np],["burd",e=>cu(1-e)],["buylrd",e=>fu(1-e)],["blues",ab],["greens",ub],["greys",lb],["purples",fb],["reds",db],["oranges",pb],["turbo",xb],["viridis",Mb],["magma",Pb],["inferno",Ab],["plasma",Sb],["cividis",bb],["cubehelix",gb],["warm",yb],["cool",wb],["bugn",Bp],["bupu",Rp],["gnbu",Op],["orrd",Gp],["pubugn",zp],["pubu",Wp],["purd",jp],["rdpu",Xp],["ylgnbu",Kp],["ylgn",Jp],["ylorbr",tb],["ylorrd",rb],["rainbow",vb],["sinebow",_b]]);function bf(e){const t=`${e}`.toLowerCase();if(!Cd.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Cd.get(t)}const z8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function H8(e){return e!=null&&z8.has(`${e}`.toLowerCase())}const qg=e=>t=>e(1-t),Xs=[0,1],kd=new Map([["number",ot],["rgb",xr],["hsl",l_],["hcl",h_],["lab",c_]]);function Gg(e){const t=`${e}`.toLowerCase();if(!kd.has(t))throw new Error(`unknown interpolator: ${t}`);return kd.get(t)}function Va(e,t,n,{type:r,nice:i,clamp:a,zero:o,domain:u=zg(e,n),unknown:s,round:l,scheme:c,interval:f,range:h=Ie.get(e)===Ua?tx(n,u):Ie.get(e)===za?nx(n,u):Ie.get(e)===Ha?Xs:void 0,interpolate:d=Ie.get(e)===qn?c==null&&h!==void 0?xr:bf(c!==void 0?c:r==="cyclical"?"rainbow":"turbo"):l?kc:ot,reverse:m}){if(f=vi(f,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof d!="function"&&(d=Gg(d)),m=!!m,h!==void 0){const p=(u=kt(u)).length,y=(h=kt(h)).length;if(p!==y){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Iu(d,h),h=void 0}}if(d.length===1?(m&&(d=qg(d),m=!1),h===void 0&&(h=Float64Array.from(u,(p,y)=>y/(u.length-1)),h.length===2&&(h=Xs)),t.interpolate((h===Xs?Oa:yf)(d))):t.interpolate(d),o){const[p,y]=Bt(u);(p>0||y<0)&&(u=da(u),ci(u)!==Math.sign(p)?u[u.length-1]=0:u[0]=0)}return m&&(u=zo(u)),t.domain(u).unknown(s),i&&(t.nice(W8(i,r)),u=t.domain()),h!==void 0&&t.range(h),a&&t.clamp(a),{type:r,domain:u,range:h,scale:t,interpolate:d,interval:f}}function W8(e,t){return e===!0?void 0:typeof e=="number"?e:$9(e,t)}function V8(e,t,n){return Va(e,qc(),t,n)}function j8(e,t,n){return Ug(e,t,{...n,exponent:.5})}function Ug(e,t,{exponent:n=1,...r}){return Va(e,Jm().exponent(n),t,{...r,type:"pow"})}function Y8(e,t,{base:n=10,domain:r=rx(t),...i}){return Va(e,Xm().base(n),t,{...i,domain:r})}function X8(e,t,{constant:n=1,...r}){return Va(e,Km().constant(n),t,r)}function Z8(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:a="rdylbu",domain:o=ix(t),unknown:u,interpolate:s,reverse:l}){return n===void 0&&(n=s!==void 0?Xt(s,i):Ie.get(e)===qn?ls(a,i):void 0),o.length>0&&(o=ep(o,n===void 0?{length:i}:n).quantiles()),gf(e,t,{domain:o,range:n,reverse:l,unknown:u})}function K8(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:a=zg(e,t),unknown:o,interpolate:u,reverse:s}){const[l,c]=Bt(a);let f;return n===void 0?(f=na(l,c,r),f[0]<=l&&f.splice(0,1),f[f.length-1]>=c&&f.pop(),r=f.length+1,n=u!==void 0?Xt(u,r):Ie.get(e)===qn?ls(i,r):void 0):(f=Xt(ot(l,c),r+1).slice(1,-1),l instanceof Date&&(f=f.map(h=>new Date(h)))),ci(kt(a))<0&&f.reverse(),gf(e,t,{domain:f,range:n,reverse:s,unknown:o})}function gf(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:a,range:o=a!==void 0?Xt(a,n.length+1):Ie.get(e)===qn?ls(i,n.length+1):void 0,reverse:u}){n=kt(n);const s=ci(n);if(!isNaN(s)&&!Q8(n,s))throw new Error(`the ${e} scale has a non-monotonic domain`);return u&&(o=zo(o)),{type:"threshold",scale:tp(s<0?zo(n):n,o===void 0?[]:o).unknown(r),domain:n,range:o}}function Q8(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const a=Ma(i,i=e[n]);if(a!==0&&a!==t)return!1}return!0}function J8(e){return{type:"identity",scale:z9(Ie.get(e))?Vm():t=>t}}function ba(e,t=ug){return e.length?[Nn(e,({value:n})=>n===void 0?n:Nn(n,t)),qt(e,({value:n})=>n===void 0?n:qt(n,t))]:[0,1]}function zg(e,t){const n=Ie.get(e);return(n===Ua||n===Ha||n===za?ex:ba)(t)}function ex(e){return[0,e.length?qt(e,({value:t})=>t===void 0?t:qt(t,ug)):1]}function tx(e,t){const n=e.find(({radius:o})=>o!==void 0);if(n!==void 0)return[0,n.radius];const r=Jr(e,.5,({value:o})=>o===void 0?NaN:Jr(o,.25,ts)),i=t.map(o=>3*Math.sqrt(o/r)),a=30/qt(i);return a<1?i.map(o=>o*a):i}function nx(e,t){const n=ml(e,({value:a})=>a===void 0?NaN:ml(a,Math.abs)),r=t.map(a=>12*a/n),i=60/qt(r);return i<1?r.map(a=>a*i):r}function rx(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return ba(e,ts);if(n<0)return ba(e,Kc)}return[1,10]}function ix(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function yf(e){return(t,n)=>r=>e(t+r*(n-t))}function cs(e,t,n,r,{type:i,nice:a,clamp:o,domain:u=ba(r),unknown:s,pivot:l=0,scheme:c,range:f,symmetric:h=!0,interpolate:d=Ie.get(e)===qn?c==null&&f!==void 0?xr:bf(c!==void 0?c:"rdbu"):ot,reverse:m}){l=+l,u=kt(u);let[p,y]=u;if(u.length>2&&Zn(`Warning: the diverging ${e} scale domain contains extra elements.`),Ma(p,y)<0&&([p,y]=[y,p],m=!m),p=Math.min(p,l),y=Math.max(y,l),typeof d!="function"&&(d=Gg(d)),f!==void 0&&(d=d.length===1?yf(d)(...f):Iu(d,f)),m&&(d=qg(d)),h){const w=n.apply(l),g=w-n.apply(p),v=n.apply(y)-w;g<v?p=n.invert(w-v):g>v&&(y=n.invert(w+g))}return t.domain([p,l,y]).unknown(s).interpolator(d),o&&t.clamp(o),a&&t.nice(a),{type:i,domain:[p,y],pivot:l,interpolate:d,scale:t}}function ax(e,t,n){return cs(e,bp(),lx,t,n)}function ox(e,t,n){return Hg(e,t,{...n,exponent:.5})}function Hg(e,t,{exponent:n=1,...r}){return cs(e,wp().exponent(n=+n),hx(n),t,{...r,type:"diverging-pow"})}function ux(e,t,{base:n=10,pivot:r=1,domain:i=ba(t,r<0?Kc:ts),...a}){return cs(e,gp().base(n=+n),cx,t,{domain:i,pivot:r,...a})}function sx(e,t,{constant:n=1,...r}){return cs(e,yp().constant(n=+n),dx(n),t,r)}const lx={apply(e){return e},invert(e){return e}},cx={apply:Math.log,invert:Math.exp},fx={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function hx(e){return e===.5?fx:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function dx(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function Wg(e,t,n,r){return Va(e,t,n,r)}function mx(e,t,n){return Wg(e,e4(),t,n)}function px(e,t,n){return Wg(e,t4(),t,n)}const ja=Symbol("ordinal");function Vg(e,t,n,{type:r,interval:i,domain:a,range:o,reverse:u,hint:s}){return i=vi(i,r),a===void 0&&(a=Yg(n,i,e)),(r==="categorical"||r===ja)&&(r="ordinal"),u&&(a=zo(a)),a=t.domain(a).domain(),o!==void 0&&(typeof o=="function"&&(o=o(a)),t.range(o)),{type:r,domain:a,range:o,scale:t,hint:s,interval:i}}function bx(e,t,{type:n,interval:r,domain:i,range:a,scheme:o,unknown:u,...s}){r=vi(r,n),i===void 0&&(i=Yg(t,r,e));let l;if(Ie.get(e)===us)l=wx(t),a=a===void 0?vx(l):Ve(a,lf);else if(Ie.get(e)===qn&&(a===void 0&&(n==="ordinal"||n===ja)&&(a=U8(i,o),a!==void 0&&(o=void 0)),o===void 0&&a===void 0&&(o=n==="ordinal"?"turbo":"observable10"),o!==void 0))if(a!==void 0){const c=bf(o),f=a[0],h=a[1]-a[0];a=({length:d})=>Xt(m=>c(f+h*m),d)}else a=Og(o);if(u===Hl)throw new Error(`implicit unknown on ${e} scale is not supported`);return Vg(e,Oc().unknown(u),t,{...s,type:n,domain:i,range:a,hint:l})}function gx(e,t,{align:n=.5,padding:r=.5,...i}){return jg(B6().align(n).padding(r),t,i,e)}function yx(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:a=e==="fx"||e==="fy"?0:r,...o}){return jg(Wu().align(n).paddingInner(i).paddingOuter(a),t,o,e)}function jg(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=Vg(r,e,t,n),e.round=i,e}function Yg(e,t,n){const r=new Tu;for(const{value:i,domain:a}of e){if(a!==void 0)return a();if(i!==void 0)for(const o of i)r.add(o)}if(t!==void 0){const[i,a]=Bt(r).map(t.floor,t);return t.range(i,t.offset(a))}if(r.size>1e4&&Ie.get(n)===ln)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return ta(r,Qt)}function Td(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function wx(e){return{fill:Td(e,"fill"),stroke:Td(e,"stroke")}}function vx(e){return bt(e.fill)?A4:P4}function ic(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:a=n,insetLeft:o=n,round:u,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,facet:{label:m=t}={},...p}={}){const y={};for(const[w,g]of e){const v=p[w],b=Ax(w,g,{round:Ie.get(w)===ln?u:void 0,nice:s,clamp:l,zero:c,align:f,padding:h,projection:d,...v});if(b){let{label:_=w==="fx"||w==="fy"?m:t,percent:x,transform:M,inset:S,insetTop:E=S!==void 0?S:w==="y"?r:0,insetRight:$=S!==void 0?S:w==="x"?i:0,insetBottom:P=S!==void 0?S:w==="y"?a:0,insetLeft:T=S!==void 0?S:w==="x"?o:0}=v||{};if(M==null)M=void 0;else if(typeof M!="function")throw new Error("invalid scale transform; not a function");b.percent=!!x,b.label=_===void 0?xx(g,b):_,b.transform=M,w==="x"||w==="fx"?(b.insetLeft=+T,b.insetRight=+$):(w==="y"||w==="fy")&&(b.insetTop=+E,b.insetBottom=+P),y[w]=b}}return y}function $d(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:a,type:o,interval:u,label:s}=i;t[r]=Tx(i),n[r]=a,a.type=o,u!=null&&(a.interval=u),s!=null&&(a.label=s)}return n}function _x(e,t){const{x:n,y:r,fx:i,fy:a}=e,o=i||a?wf(t):t;i&&Dd(i,o),a&&Nd(a,o);const u=i||a?Xg(e,t):t;n&&Dd(n,u),r&&Nd(r,u)}function xx(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!Nr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Mx(e){return Math.sign(ci(e.domain()))*Math.sign(ci(e.range()))}function wf(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:a,height:o,facet:{marginTop:u,marginRight:s,marginBottom:l,marginLeft:c}}=e;return{marginTop:Math.max(t,u),marginRight:Math.max(n,s),marginBottom:Math.max(r,l),marginLeft:Math.max(i,c),width:a,height:o}}function Xg({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=wf(n);return{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:e?e.scale.bandwidth()+o+i:u,height:t?t.scale.bandwidth()+r+a:s,facet:{width:u,height:s}}}function Dd(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:a=0,marginRight:o=0}=t,u=a+n,s=i-o-r;e.range=[u,Math.max(u,s)],Nr(e)||(e.range=Kg(e)),e.scale.range(e.range)}Zg(e)}function Nd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:a=0,marginBottom:o=0}=t,u=a+n,s=i-o-r;e.range=[Math.max(u,s),u],Nr(e)?e.range.reverse():e.range=Kg(e),e.scale.range(e.range)}Zg(e)}function Zg(e){e.round===void 0&&Ex(e)&&Px(e)<=30&&e.scale.round(!0)}function Px({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,a=e.paddingOuter?e.paddingOuter():e.padding(),o=t-i,u=Math.abs(r-n)/Math.max(1,o+a*2);return(u-Math.floor(u))*o}function Kg(e){const t=e.scale.domain().length+Qg(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,a)=>n+a/(t-1)*(r-n))}function Ax(e,t=[],n={}){const r=Sx(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&Nr({type:r})){const i=t.map(({value:a})=>a).filter(a=>a!==void 0);i.some(vt)?Zn(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Gr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Gr(r)}".`):i.some(F9)?Zn(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Gr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Gr(r)}".`):i.some(B9)&&Zn(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Gr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Gr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=mo(t,n,sn);break;case"identity":switch(Ie.get(e)){case ln:n=mo(t,n,sn);break;case us:n=mo(t,n,Cx);break}break;case"utc":case"time":n=mo(t,n,A9);break}switch(r){case"diverging":return ax(e,t,n);case"diverging-sqrt":return ox(e,t,n);case"diverging-pow":return Hg(e,t,n);case"diverging-log":return ux(e,t,n);case"diverging-symlog":return sx(e,t,n);case"categorical":case"ordinal":case ja:return bx(e,t,n);case"cyclical":case"sequential":case"linear":return V8(e,t,n);case"sqrt":return j8(e,t,n);case"threshold":return gf(e,t,n);case"quantile":return Z8(e,t,n);case"quantize":return K8(e,t,n);case"pow":return Ug(e,t,n);case"log":return Y8(e,t,n);case"symlog":return X8(e,t,n);case"utc":return px(e,t,n);case"time":return mx(e,t,n);case"point":return gx(e,t,n);case"band":return yx(e,t,n);case"identity":return J8(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Gr(e){return typeof e=="symbol"?e.description:e}function Fd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Bd={toString:()=>"projection"};function Sx(e,t,{type:n,domain:r,range:i,scheme:a,pivot:o,projection:u}){if(n=Fd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&u!=null&&(n=Bd);for(const l of t){const c=Fd(l.type);if(c!==void 0){if(n===void 0)n=c;else if(n!==c)throw new Error(`scale incompatible with channel: ${n} !== ${c}`)}}if(n===Bd)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:l})=>l!==void 0))return;const s=Ie.get(e);if(s===Ua)return"sqrt";if(s===Ha||s===za)return"linear";if(s===us)return"ordinal";if((r||i||[]).length>2)return Zs(s);if(r!==void 0){if(gd(r))return Zs(s);if(vt(r))return"utc"}else{const l=t.map(({value:c})=>c).filter(c=>c!==void 0);if(l.some(gd))return Zs(s);if(l.some(vt))return"utc"}if(s===qn){if(o!=null||H8(a))return"diverging";if(G8(a))return"categorical"}return"linear"}function Zs(e){switch(e){case ln:return"point";case qn:return ja;default:return"ordinal"}}function Nr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===ja}function Qg({type:e}){return e==="threshold"}function Ex({type:e}){return e==="point"||e==="band"}function hi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function mo(e,{domain:t,...n},r){var i;for(const a of e)a.value!==void 0&&(t===void 0&&(t=(i=a.value)==null?void 0:i.domain),a.value=r(a.value));return{domain:t===void 0?t:r(t),...n}}function Cx(e){return Ve(e,lf)}function kx(e){return t=>{if(!Ie.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function Tx({scale:e,type:t,domain:n,range:r,interpolate:i,interval:a,transform:o,percent:u,pivot:s}){if(t==="identity")return{type:"identity",apply:c=>c,invert:c=>c};const l=e.unknown?e.unknown():void 0;return{type:t,domain:da(n),...r!==void 0&&{range:da(r)},...o!==void 0&&{transform:o},...u&&{percent:u},...l!==void 0&&{unknown:l},...a!==void 0&&{interval:a},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...s!==void 0&&{pivot:s,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:c=>e(c),...e.invert&&{invert:c=>e.invert(c)}}}function $x(e,t,n={}){let r=.5-gt,i=.5+gt,a=.5+gt,o=.5-gt;for(const{marginTop:p,marginRight:y,marginBottom:w,marginLeft:g}of t)p>r&&(r=p),y>i&&(i=y),w>a&&(a=w),g>o&&(o=g);let{margin:u,marginTop:s=u!==void 0?u:r,marginRight:l=u!==void 0?u:i,marginBottom:c=u!==void 0?u:a,marginLeft:f=u!==void 0?u:o}=n;s=+s,l=+l,c=+c,f=+f;let{width:h=640,height:d=Dx(e,n,{width:h,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:a,marginLeftDefault:o})+Math.max(0,s-r+c-a)}=n;h=+h,d=+d;const m={width:h,height:d,marginTop:s,marginRight:l,marginBottom:c,marginLeft:f};if(e.fx||e.fy){let{margin:p,marginTop:y=p!==void 0?p:s,marginRight:w=p!==void 0?p:l,marginBottom:g=p!==void 0?p:c,marginLeft:v=p!==void 0?p:f}=n.facet??{};y=+y,w=+w,g=+g,v=+v,m.facet={marginTop:y,marginRight:w,marginBottom:g,marginLeft:v}}return m}function Dx({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:a},{width:o,marginTopDefault:u,marginRightDefault:s,marginBottomDefault:l,marginLeftDefault:c}){const f=n?n.scale.domain().length:1,h=I8(i);if(h){const m=r?r.scale.domain().length:1,p=(1.1*f-.1)/(1.1*m-.1)*h,y=Math.max(.1,Math.min(10,p));return Math.round((o-c-s)*y+u+l)}const d=t?Nr(t)?t.scale.domain().length:Math.max(7,17/f):1;if(a!=null){if(a=+a,!(isFinite(a)&&a>0))throw new Error(`invalid aspectRatio: ${a}`);const m=Ld("y",t)/(Ld("x",e)*a),p=r?r.scale.bandwidth():1,y=n?n.scale.bandwidth():1,w=p*(o-c-s)-e.insetLeft-e.insetRight;return(m*w+t.insetTop+t.insetBottom)/y+u+l}return!!(t||n)*Math.max(1,Math.min(60,d*f))*20+!!r*30+60}function Ld(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const u=t.scale.exponent();i=s=>Math.pow(s,u);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[a,o]=Bt(r);return Math.abs(i(o)-i(a))}function Nx(e,t){const{fx:n,fy:r}=ic(e,t),i=n==null?void 0:n.scale.domain(),a=r==null?void 0:r.scale.domain();return i&&a?b1(i,a).map(([o,u],s)=>({x:o,y:u,i:s})):i?i.map((o,u)=>({x:o,i:u})):a?a.map((o,u)=>({y:o,i:u})):void 0}function Fx(e,{x:t,y:n}){return t&&(t=ac(t)),n&&(n=ac(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function vf(e,{fx:t,fy:n}){const r=On(e),i=t==null?void 0:t.value,a=n==null?void 0:n.value;return t&&n?jr(r,o=>(o.fx=i[o[0]],o.fy=a[o[0]],o),o=>i[o],o=>a[o]):t?jr(r,o=>(o.fx=i[o[0]],o),o=>i[o]):jr(r,o=>(o.fy=a[o[0]],o),o=>a[o])}function Bx(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:a})=>`translate(${e(i)-r},${t(a)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function Lx(e){const t=[],n=new Uint32Array(Kn(e,r=>r.length));for(const r of e){let i=0;for(const a of e)r!==a&&(n.set(a,i),i+=a.length);t.push(n.slice(0,i))}return t}const Rx=new Map([["top",Ks],["right",el],["bottom",Qs],["left",Js],["top-left",po(Ks,Js)],["top-right",po(Ks,el)],["bottom-left",po(Qs,Js)],["bottom-right",po(Qs,el)],["top-empty",qx],["right-empty",zx],["bottom-empty",Gx],["left-empty",Ux],["empty",Hx]]);function Ix(e){if(e==null)return null;const t=Rx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Rd=new WeakMap;function ac(e){let t=Rd.get(e);return t||Rd.set(e,t=new wr(Ve(e,(n,r)=>[n,r]))),t}function or(e,t){return ac(e).get(t)}function Ox(e,t,n){return t=mr(t),n=mr(n),e.find(r=>Object.is(mr(r.x),t)&&Object.is(mr(r.y),n))}function fs(e,t,n){var r;return(r=Ox(e,t,n))==null?void 0:r.empty}function Ks(e,{y:t},{y:n}){return t?or(t,n)===0:!0}function Qs(e,{y:t},{y:n}){return t?or(t,n)===t.length-1:!0}function Js(e,{x:t},{x:n}){return t?or(t,n)===0:!0}function el(e,{x:t},{x:n}){return t?or(t,n)===t.length-1:!0}function qx(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a>0)return fs(e,n,t[a-1])}function Gx(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,r);if(a<t.length-1)return fs(e,n,t[a+1])}function Ux(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a>0)return fs(e,t[a-1],r)}function zx(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const a=or(t,n);if(a<t.length-1)return fs(e,t[a+1],r)}function Hx(e,t,{empty:n}){return n}function po(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function tl(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:a})=>{var o;return((o=r.get(i))==null?void 0:o.get(a))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class ht{constructor(t,n={},r={},i){const{facet:a="auto",facetAnchor:o,fx:u,fy:s,sort:l,dx:c=0,dy:f=0,margin:h=0,marginTop:d=h,marginRight:m=h,marginBottom:p=h,marginLeft:y=h,clip:w=i==null?void 0:i.clip,channels:g,tip:v,render:b}=r;if(this.data=t,this.sort=li(l)?l:null,this.initializer=fi(r).initializer,this.transform=this.initializer?r.transform:ss(r).transform,a===null||a===!1?this.facet=null:(this.facet=en(a===!0?"include":a,"facet",["auto","include","exclude","super"]),this.fx=t===Co&&typeof u=="string"?[u]:u,this.fy=t===Co&&typeof s=="string"?[s]:s),this.facetAnchor=Ix(o),n=_g(n),g!==void 0&&(n={...Wx(g),...n}),i!==void 0&&(n={...M8(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([_,x])=>{if(is(x.value)){const{value:M,label:S=x.label,scale:E=x.scale}=x.value;x={...x,label:S,scale:E,value:M}}if(t===Co&&typeof x.value=="string"){const{value:M}=x;x={...x,value:[M]}}return[_,x]}).filter(([_,{value:x,optional:M}])=>{if(x!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${_}`)})),this.dx=+c,this.dy=+f,this.marginTop=+d,this.marginRight=+m,this.marginBottom=+p,this.marginLeft=+y,this.clip=Ng(w),this.tip=Vx(v),this.facet==="super"){if(u||s)throw new Error("super-faceting cannot use fx or fy");for(const _ in this.channels){const{scale:x}=n[_];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}b!=null&&(this.render=e2(b,this.render))}initialize(t,n,r){let i=kt(this.data);t===void 0&&i!=null&&(t=[On(i)]);const a=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=kt(i)),t!==void 0&&(t.original=a);const o=c8(this.channels,i);return this.sort!=null&&h8(i,t,o,n,this.sort),{data:i,facets:t,channels:o}}filter(t,n,r){for(const i in n){const{filter:a=er}=n[i];if(a!==null){const o=r[i];t=t.filter(u=>a(o[u]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const a=i.replace(/^x|x$/,"y");a in t&&t[a].scale==="y"&&L8(i,a,n,r.projection)}}scale(t,n,r){const i=f8(t,n);return r.projection&&this.project(t,i,r),i}}function Jg(...e){return e.plot=ht.prototype.plot,e}function e2(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,a,o,u){return e.call(this,n,r,i,a,o,(s,l,c,f,h)=>t.call(this,s,l,c,f,h,u))}}function Wx(e){return Object.fromEntries(Object.entries(_g(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:Ga(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Vx(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?en(e,"tip",["x","y","xy"]):e}function hs(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:ir(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Id=new WeakMap;function _f(e,t,{x:n,y:r,px:i,py:a,maxRadius:o=40,channels:u,render:s,...l}={}){return o=+o,i!=null&&(n??(n=null),u={...u,px:{value:i,scale:"x"}}),a!=null&&(r??(r=null),u={...u,py:{value:a,scale:"y"}}),{x:n,y:r,channels:u,...l,render:e2(function(c,f,h,d,m,p){m={...m,pointerSticky:!1};const y=m.ownerSVGElement,{data:w}=m.getMarkState(this);let g=Id.get(y);g||Id.set(y,g={sticky:!1,roots:[],renders:[]});let v=g.renders.push(G)-1;const{x:b,y:_,fx:x,fy:M}=f;let S=x?x(c.fx)-d.marginLeft:0,E=M?M(c.fy)-d.marginTop:0;b!=null&&b.bandwidth&&(S+=b.bandwidth()/2),_!=null&&_.bandwidth&&(E+=_.bandwidth()/2);const $=c.fi!=null;let P;if($){let V=g.facetStates;V||(g.facetStates=V=new Map),P=V.get(this),P||V.set(this,P=new Map)}const[T,I]=Wa(this,d),{px:B,py:C}=h,O=B?V=>B[V]:n2(h,T),ie=C?V=>C[V]:r2(h,I);let te,J,z,H;function D(V,j){if($)if(H&&(H=cancelAnimationFrame(H)),V==null)P.delete(c.fi);else{P.set(c.fi,j),H=requestAnimationFrame(()=>{H=null;for(const[L,W]of P)if(W<j||W===j&&L<c.fi){V=null;break}G(V)});return}G(V)}function G(V){if(te===V&&z===g.sticky)return;te=V,z=m.pointerSticky=g.sticky;const j=te==null?[]:[te];$&&(j.fx=c.fx,j.fy=c.fy,j.fi=c.fi);const L=p(j,f,h,d,m);if(J){if($){const W=J.parentNode,Y=J.getAttribute("transform"),N=L.getAttribute("transform");Y?L.setAttribute("transform",Y):L.removeAttribute("transform"),N?W.setAttribute("transform",N):W.removeAttribute("transform"),L.removeAttribute("aria-label"),L.removeAttribute("aria-description"),L.removeAttribute("aria-hidden")}J.replaceWith(L)}return g.roots[v]=J=L,te==null&&(P==null?void 0:P.size)>1||m.dispatchValue(te==null?null:w[te]),L}function ne(V){if(g.sticky||V.pointerType==="mouse"&&V.buttons===1)return;let[j,L]=$v(V);j-=S,L-=E;const W=j<d.marginLeft||j>d.width-d.marginRight?1:e,Y=L<d.marginTop||L>d.height-d.marginBottom?1:t;let N=null,ge=o*o;for(const re of c){const me=W*(O(re)-j),xe=Y*(ie(re)-L),Ue=me*me+xe*xe;Ue<=ge&&(N=re,ge=Ue)}if(N!=null&&(e!==1||t!==1)){const re=O(N)-j,me=ie(N)-L;ge=re*re+me*me}D(N,ge)}function ue(V){V.pointerType==="mouse"&&te!=null&&(g.sticky&&g.roots.some(j=>j==null?void 0:j.contains(V.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(j=>j(null))):(g.sticky=!0,G(te)),V.stopImmediatePropagation()))}function ae(V){V.pointerType==="mouse"&&(g.sticky||D(null))}return y.addEventListener("pointerenter",ne),y.addEventListener("pointermove",ne),y.addEventListener("pointerdown",ue),y.addEventListener("pointerleave",ae),G(null)},s)}}function t2(e){return _f(1,1,e)}function jx(e){return _f(1,.01,e)}function Od(e){return _f(.01,1,e)}function n2({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function r2({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function i2(e){return Nr(e)&&e.interval===void 0?void 0:"tabular-nums"}function Yx(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:a=44+r,marginTop:o=18,marginRight:u=0,marginBottom:s=16+r,marginLeft:l=0,style:c,ticks:f=(i-l-u)/64,tickFormat:h,fontVariant:d=i2(e),round:m=!0,opacity:p,className:y}=t;const w=pf(t);y=df(y),p=ft(p)[1],h===null&&(h=()=>null);const g=ze("svg",w).attr("class",`${y}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",a).attr("viewBox",`0 0 ${i} ${a}`).call(T=>T.append("style").text(`:where(.${y}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${y}-ramp text) {
  white-space: pre;
}`)).call(mf,c);let v=T=>T.selectAll(".tick line").attr("y1",o+s-a),b;const _=m?(T,I)=>T.rangeRound(I):(T,I)=>T.range(I),{type:x,domain:M,range:S,interpolate:E,scale:$,pivot:P}=e;if(E){const T=S===void 0?E:Iu(E.length===1?yf(E):E,S);b=_($.copy(),Xt(ot(l,i-u),Math.min(M.length+(P!==void 0),S===void 0?1/0:S.length)));const I=256,B=w.document.createElement("canvas");B.width=I,B.height=1;const C=B.getContext("2d");for(let O=0,ie=I-1;O<I;++O)C.fillStyle=T(O/ie),C.fillRect(O,0,1,1);g.append("image").attr("opacity",p).attr("x",l).attr("y",o).attr("width",i-l-u).attr("height",a-o-s).attr("preserveAspectRatio","none").attr("xlink:href",B.toDataURL())}else if(x==="threshold"){const T=M,I=h===void 0?B=>B:typeof h=="string"?yi(h):h;b=_(qc().domain([-1,S.length-1]),[l,i-u]),g.append("g").attr("fill-opacity",p).selectAll().data(S).enter().append("rect").attr("x",(B,C)=>b(C-1)).attr("y",o).attr("width",(B,C)=>b(C)-b(C-1)).attr("height",a-o-s).attr("fill",B=>B),f=Ve(T,(B,C)=>C),h=B=>I(T[B],B)}else b=_(Wu().domain(M),[l,i-u]),g.append("g").attr("fill-opacity",p).selectAll().data(M).enter().append("rect").attr("x",b).attr("y",o).attr("width",Math.max(0,b.bandwidth()-1)).attr("height",a-o-s).attr("fill",$),v=()=>{};return g.append("g").attr("transform",`translate(0,${a-s})`).call(Yw(b).ticks(Array.isArray(f)?null:f,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(r).tickValues(Array.isArray(f)?f:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",rt(d,"normal")).call(v).call(T=>T.select(".domain").remove()),n!==void 0&&g.append("text").attr("x",l).attr("y",o-6).attr("fill","currentColor").attr("font-weight","bold").text(n),g.node()}const a2=Math.PI/180;function Ya(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=nl(n),e.markerMid=nl(r),e.markerEnd=nl(i)}function nl(e){if(e==null||e===!1)return null;if(e===!0)return Gd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return qd("auto");case"arrow-reverse":return qd("auto-start-reverse");case"dot":return Xx;case"circle":case"circle-fill":return Gd;case"circle-stroke":return Zx;case"tick":return rl("auto");case"tick-x":return rl(90);case"tick-y":return rl(0)}throw new Error(`invalid marker: ${e}`)}function qd(e){return(t,n)=>ze("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Xx(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Gd(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Zx(e,t){return ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function rl(e){return(t,n)=>ze("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let Kx=0;function ds(e,t,{stroke:n},r){return o2(e,t,n&&(i=>n[i]),r)}function Qx(e,t,{stroke:n},r){return o2(e,t,n&&(([i])=>n[i]),r)}function o2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},a=()=>i,o){const u=new Map;function s(l){return function(c){const f=a(c);let h=u.get(l);h||u.set(l,h=new Map);let d=h.get(f);if(!d){const m=this.parentNode.insertBefore(l(f,o),this),p=`plot-marker-${++Kx}`;m.setAttribute("id",p),h.set(f,d=`url(#${p})`)}return d}}t&&e.attr("marker-start",s(t)),n&&e.attr("marker-mid",s(n)),r&&e.attr("marker-end",s(r))}function xf({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=s2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function u2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=s2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function s2(e,t,n){return e===void 0&&t===void 0&&n===void 0?gt?[1,0]:[.5,.5]:[t,n]}function l2(e,{interval:t}){return e={...Ga(e)},e.interval=of(e.interval===void 0?t:e.interval),e}function c2(e,t,n,r){const{[e]:i,[`${e}1`]:a,[`${e}2`]:o}=n,{value:u,interval:s}=l2(i,n);if(u==null||s==null&&!r)return n;const l=Dr(i);if(s==null){let d;const m={transform:p=>d||(d=et(p,u)),label:l};return{...n,[e]:void 0,[`${e}1`]:a===void 0?m:a,[`${e}2`]:o===void 0&&!(a===o&&r)?m:o}}let c,f;function h(d){return f!==void 0&&d===c?f:f=Ve(et(c=d,u),m=>s.floor(m))}return t({...n,[e]:void 0,[`${e}1`]:a===void 0?{transform:h,label:l}:a,[`${e}2`]:o===void 0?{transform:d=>h(d).map(m=>s.offset(m)),label:l}:o})}function f2(e,t,n){const{[e]:r}=n,{value:i,interval:a}=l2(r,n);return i==null||a==null?n:t({...n,[e]:{label:Dr(r),transform:o=>{const u=Ve(et(o,i),l=>a.floor(l)),s=u.map(l=>a.offset(l));return u.map(vt(u)?(l,c)=>l==null||isNaN(l=+l)||(c=s[c],c==null)||isNaN(c=+c)?void 0:new Date((l+c)/2):(l,c)=>l==null||(c=s[c],c==null)?NaN:(+l+ +c)/2)}}})}function Jx(e={}){return c2("x",xf,e)}function h2(e={}){return c2("y",u2,e)}function eM(e={}){return f2("x",xf,e)}function tM(e={}){return f2("y",u2,e)}const d2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class nM extends ht{constructor(t,n={}){const{x:r,y1:i,y2:a,inset:o=0,insetTop:u=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:a,scale:"y",optional:!0}},hs(n,"x"),d2),this.insetTop=Fe(u),this.insetBottom=Fe(s),Ya(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y1:l,y2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:y}=i,{insetTop:w,insetBottom:g}=this;return ze("svg:g",a).call(zt,this,i,a).call(Tt,this,{x:s&&o},gt,0).call(v=>v.selectAll().data(t).enter().append("line").call(Ht,this).attr("x1",s?b=>s[b]:(p+f-m)/2).attr("x2",s?b=>s[b]:(p+f-m)/2).attr("y1",l&&!hi(u)?b=>l[b]+w:d+w).attr("y2",c&&!hi(u)?u.bandwidth?b=>c[b]+u.bandwidth()-g:b=>c[b]-g:h-y-g).call(Gn,this,r).call(ds,this,r,a)).node()}}class rM extends ht{constructor(t,n={}){const{x1:r,x2:i,y:a,inset:o=0,insetRight:u=o,insetLeft:s=o}=n;super(t,{y:{value:a,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},hs(n,"y"),d2),this.insetRight=Fe(u),this.insetLeft=Fe(s),Ya(this,n)}render(t,n,r,i,a){const{x:o,y:u}=n,{y:s,x1:l,x2:c}=r,{width:f,height:h,marginTop:d,marginRight:m,marginLeft:p,marginBottom:y}=i,{insetLeft:w,insetRight:g}=this;return ze("svg:g",a).call(zt,this,i,a).call(Tt,this,{y:s&&u},0,gt).call(v=>v.selectAll().data(t).enter().append("line").call(Ht,this).attr("x1",l&&!hi(o)?b=>l[b]+w:p+w).attr("x2",c&&!hi(o)?o.bandwidth?b=>c[b]+o.bandwidth()-g:b=>c[b]-g:f-m-g).attr("y1",s?b=>s[b]:(d+h-y)/2).attr("y2",s?b=>s[b]:(d+h-y)/2).call(Gn,this,r).call(ds,this,r,a)).node()}}function Mf(e,t){let{x:n=st,y:r,y1:i,y2:a,...o}=h2(t);return[i,a]=m2(r,i,a),new nM(e,{...o,x:n,y1:i,y2:a})}function Pf(e,t){let{y:n=st,x:r,x1:i,x2:a,...o}=Jx(t);return[i,a]=m2(r,i,a),new rM(e,{...o,y:n,x1:i,x2:a})}function m2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function Af(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let a=0;a<n;++a)i+=t[a](r)+e[a+1];return i}}const iM={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},p2="";class Sf extends ht{constructor(t,n={}){const{x:r,y:i,text:a=ar(t)&&vg(t)?st:rs,frameAnchor:o,textAnchor:u=/right$/i.test(o)?"end":/left$/i.test(o)?"start":"middle",lineAnchor:s=/^top/i.test(o)?"top":/^bottom/i.test(o)?"bottom":"middle",lineHeight:l=1,lineWidth:c=1/0,textOverflow:f,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:p,fontVariant:y,fontWeight:w,rotate:g}=n,[v,b]=ft(g,0),[_,x]=cM(m);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:_,optional:!0},rotate:{value:N9(v),optional:!0},text:{value:a,filter:Zc,optional:!0}},n,iM),this.rotate=b,this.textAnchor=rt(u,"middle"),this.lineAnchor=en(s,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+l,this.lineWidth=+c,this.textOverflow=b2(f),this.monospace=!!h,this.fontFamily=ct(d),this.fontSize=x,this.fontStyle=ct(p),this.fontVariant=ct(y),this.fontWeight=ct(w),this.frameAnchor=os(o),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${c}`);this.splitLines=y2(this),this.clipLine=w2(this)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,rotate:c,text:f,title:h,fontSize:d}=r,{rotate:m}=this,[p,y]=Wa(this,i);return ze("svg:g",a).call(zt,this,i,a).call(g2,this,f,i).call(Tt,this,{x:s&&o,y:l&&u}).call(w=>w.selectAll().data(t).enter().append("text").call(Ht,this).call(aM,this,f,h).attr("transform",Af`translate(${s?g=>s[g]:p},${l?g=>l[g]:y})${c?g=>` rotate(${c[g]})`:m?` rotate(${m})`:""}`).call(fe,"font-size",d&&(g=>d[g])).call(Gn,this,r)).node()}}function b2(e){return e==null?null:en(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function aM(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:a,textOverflow:o,splitLines:u,clipLine:s}=t;e.each(function(l){const c=u(Er(n[l])??"").map(s),f=c.length,h=i==="top"?.71:i==="bottom"?1-f:(164-f*100)/200;if(f>1){let d=0;for(let m=0;m<f;++m){if(++d,!c[m])continue;const p=this.ownerDocument.createElementNS(ei.svg,"tspan");p.setAttribute("x",0),m===d-1?p.setAttribute("y",`${(h+m)*a}em`):p.setAttribute("dy",`${d*a}em`),p.textContent=c[m],this.appendChild(p),d=0}}else h&&this.setAttribute("y",`${h*a}em`),this.textContent=c[0];if(o&&!r&&c[0]!==n[l]){const d=this.ownerDocument.createElementNS(ei.svg,"title");d.textContent=n[l],this.appendChild(d)}})}function Ef(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=qa(t,n)),new Sf(e,{...r,x:t,y:n})}function oM(e,{x:t=st,...n}={}){return new Sf(e,tM({...n,x:t}))}function uM(e,{y:t=st,...n}={}){return new Sf(e,eM({...n,y:t}))}function g2(e,t,n){fe(e,"text-anchor",t.textAnchor),fe(e,"font-family",t.fontFamily),fe(e,"font-size",t.fontSize),fe(e,"font-style",t.fontStyle),fe(e,"font-variant",t.fontVariant===void 0?sM(n):t.fontVariant),fe(e,"font-weight",t.fontWeight)}function sM(e){return e&&(L9(e)||vt(e))?"tabular-nums":void 0}const lM=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function cM(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),lM.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function fM(e,t,n){const r=[];let i,a=0;for(const[o,u,s]of hM(e)){if(i===void 0&&(i=o),a>i&&n(e,i,u)>t&&(r.push(e.slice(i,a)+(e[a-1]===p2?"-":"")),i=o),s){r.push(e.slice(i,u)),i=void 0;continue}a=u}return r}function*hM(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case p2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Ud={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Cf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=_i(e,i))r+=Ud[e[i]]??(_2(e,i)?120:Ud.e);return r}function kf(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=_i(e,i))r+=_2(e,i)?126:63;return r}function y2({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return a=>a.split(/\r\n?|\n/g);const r=e?kf:Cf,i=t*100;return a=>fM(a,i,r)}function w2({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return a=>a;const r=e?kf:Cf,i=t*100;switch(n){case"clip-start":return a=>Hd(a,i,r,"");case"clip-end":return a=>zd(a,i,r,"");case"ellipsis-start":return a=>Hd(a,i,r,Zr);case"ellipsis-middle":return a=>dM(a,i,r,Zr);case"ellipsis-end":return a=>zd(a,i,r,Zr)}}const Zr="";function di(e,t,n,r){const i=[];let a=0;for(let o=0,u=0,s=e.length;o<s;o=u){u=_i(e,o);const l=n(e,o,u);if(a+l>t){for(a+=r;a>t&&o>0;)u=o,o=i.pop(),a-=n(e,o,u);return[o,t-a]}a+=l,i.push(o)}return[-1,0]}function zd(e,t,n,r){e=e.trim();const i=n(r),[a]=di(e,t,n,i);return a<0?e:e.slice(0,a).trimEnd()+r}function dM(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r)/2,[o,u]=di(e,t/2,n,a),[s]=di(e,i-t/2-u+a,n,-a);return s<0?r:e.slice(0,o).trimEnd()+r+e.slice(_i(e,s)).trimStart()}function Hd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const a=n(r),[o]=di(e,i-t+a,n,-a);return o<0?r:r+e.slice(_i(e,o)).trimStart()}const oc=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Wd=new RegExp("\\p{Extended_Pictographic}","uy");function _i(e,t){return t+=mM(e,t)?2:1,bM(e,t)&&(t=oc.lastIndex),pM(e,t)?_i(e,t+1):t}function v2(e,t){return e.charCodeAt(t)<128}function mM(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function pM(e,t){return e.charCodeAt(t)===8205}function bM(e,t){return v2(e,t)?!1:(oc.lastIndex=t,oc.test(e))}function _2(e,t){return v2(e,t)?!1:(Wd.lastIndex=t,Wd.test(e))}const gM={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},x2=3.5,yM=x2*5,M2={draw(e,t,n){const r=t*n/yM;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},wM={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},vM=new Map([["arrow",M2],["spike",wM]]);function _M(e){return e&&typeof e.draw=="function"}function xM(e){if(_M(e))return e;const t=vM.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class P2 extends ht{constructor(t,n={}){const{x:r,y:i,r:a=x2,length:o,rotate:u,shape:s=M2,anchor:l="middle",frameAnchor:c}=n,[f,h]=ft(o,12),[d,m]=ft(u,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:f,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,gM),this.r=+a,this.length=h,this.rotate=m,this.shape=xM(s),this.anchor=en(l,"anchor",["start","middle","end"]),this.frameAnchor=os(c)}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,length:c,rotate:f}=r,{length:h,rotate:d,anchor:m,shape:p,r:y}=this,[w,g]=Wa(this,i);return ze("svg:g",a).call(zt,this,i,a).call(Tt,this,{x:s&&o,y:l&&u}).call(v=>v.selectAll().data(t).enter().append("path").call(Ht,this).attr("transform",Af`translate(${s?b=>s[b]:w},${l?b=>l[b]:g})${f?b=>` rotate(${f[b]})`:d?` rotate(${d})`:""}${m==="start"?"":m==="end"?c?b=>` translate(0,${c[b]})`:` translate(0,${h})`:c?b=>` translate(0,${c[b]/2})`:` translate(0,${h/2})`}`).attr("d",c?b=>{const _=jn();return p.draw(_,c[b],y),_}:(()=>{const b=jn();return p.draw(b,h,y),b})()).call(Gn,this,r)).node()}}function MM(e,t={}){const{x:n=st,...r}=t;return new P2(e,{...r,x:n})}function PM(e,t={}){const{y:n=st,...r}=t;return new P2(e,{...r,y:n})}function ur(e,t){return arguments.length<2&&!ar(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function ms({anchor:e}={},t){return e===void 0?t[0]:en(e,"anchor",t)}function A2(e){return ms(e,["left","right"])}function S2(e){return ms(e,["right","left"])}function E2(e){return ms(e,["bottom","top"])}function C2(e){return ms(e,["top","bottom"])}function k2(){const[e,t]=ur(...arguments);return $2("y",A2(t),e,t)}function AM(){const[e,t]=ur(...arguments);return $2("fy",S2(t),e,t)}function T2(){const[e,t]=ur(...arguments);return D2("x",E2(t),e,t)}function SM(){const[e,t]=ur(...arguments);return D2("fx",C2(t),e,t)}function $2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="y"?6:0,tickPadding:p,tickRotate:y,x:w,margin:g,marginTop:v=g===void 0?20:g,marginRight:b=g===void 0?t==="right"?40:0:g,marginBottom:_=g===void 0?20:g,marginLeft:x=g===void 0?t==="left"?40:0:g,label:M,labelAnchor:S,labelArrow:E,labelOffset:$,...P}){return m=Fe(m),p=Fe(p),y=Fe(y),S!==void 0&&(S=en(S,"labelAnchor",["center","top","bottom"])),E=q2(E),Jg(m&&!bt(a)?EM(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:y,x:w,...P}):null,bt(s)?null:kM(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:y,x:w,marginTop:v,marginRight:b,marginBottom:_,marginLeft:x,...P}),!bt(s)&&M!==null?Ef([],L2({fill:s,fillOpacity:l,...P},function(T,I,B,C,O){const ie=C[e],{marginTop:te,marginRight:J,marginBottom:z,marginLeft:H}=e==="y"&&O.inset||O,D=S??(ie.bandwidth?"center":"top"),G=$??(t==="right"?J:H)-3;return D==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=D,this.frameAnchor=`${D}-${t}`,this.rotate=0),this.dy=D==="top"?3-te:D==="bottom"?z-3:0,this.dx=t==="right"?G:-G,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[O2(e,ie,{anchor:t,label:M,labelAnchor:D,labelArrow:E})]}}}})):null)}function D2(e,t,n,{color:r="currentColor",opacity:i=1,stroke:a=r,strokeOpacity:o=i,strokeWidth:u=1,fill:s=r,fillOpacity:l=i,textAnchor:c,textStroke:f,textStrokeOpacity:h,textStrokeWidth:d,tickSize:m=e==="x"?6:0,tickPadding:p,tickRotate:y,y:w,margin:g,marginTop:v=g===void 0?t==="top"?30:0:g,marginRight:b=g===void 0?20:g,marginBottom:_=g===void 0?t==="bottom"?30:0:g,marginLeft:x=g===void 0?20:g,label:M,labelAnchor:S,labelArrow:E,labelOffset:$,...P}){return m=Fe(m),p=Fe(p),y=Fe(y),S!==void 0&&(S=en(S,"labelAnchor",["center","left","right"])),E=q2(E),Jg(m&&!bt(a)?CM(e,t,n,{stroke:a,strokeOpacity:o,strokeWidth:u,tickSize:m,tickPadding:p,tickRotate:y,y:w,...P}):null,bt(s)?null:TM(e,t,n,{fill:s,fillOpacity:l,stroke:f,strokeOpacity:h,strokeWidth:d,textAnchor:c,tickSize:m,tickPadding:p,tickRotate:y,y:w,marginTop:v,marginRight:b,marginBottom:_,marginLeft:x,...P}),!bt(s)&&M!==null?Ef([],L2({fill:s,fillOpacity:l,...P},function(T,I,B,C,O){const ie=C[e],{marginTop:te,marginRight:J,marginBottom:z,marginLeft:H}=e==="x"&&O.inset||O,D=S??(ie.bandwidth?"center":"right"),G=$??(t==="top"?te:z)-3;return D==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${D}`,this.textAnchor=D==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-G:G,this.dx=D==="right"?J-3:D==="left"?3-H:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[O2(e,ie,{anchor:t,label:M,labelAnchor:D,labelArrow:E})]}}}})):null)}function EM(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="y"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetLeft:c=l,insetRight:f=l,dx:h=0,y:d=e==="y"?void 0:null,...m}){return xi(PM,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:a,facetAnchor:o,frameAnchor:u,y:d,...m,dx:t==="left"?+h-gt+ +c:+h+gt-f,anchor:"start",length:s,shape:t==="left"?IM:OM})}function CM(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:a=null,facetAnchor:o=t+(e==="x"?"-empty":""),frameAnchor:u=t,tickSize:s,inset:l=0,insetTop:c=l,insetBottom:f=l,dy:h=0,x:d=e==="x"?void 0:null,...m}){return xi(MM,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:a,strokeLinecap:i,facetAnchor:o,frameAnchor:u,x:d,...m,dy:t==="bottom"?+h-gt-f:+h+gt+ +c,anchor:"start",length:s,shape:t==="bottom"?LM:RM})}function kM(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>60?4*Math.cos(o*a2):0),text:s,textAnchor:l=Math.abs(o)>60?"middle":t==="left"?"end":"start",lineAnchor:c=o>60?"top":o<-60?"bottom":"middle",fontVariant:f,inset:h=0,insetLeft:d=h,insetRight:m=h,dx:p=0,y=e==="y"?void 0:null,...w}){return xi(uM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,y,...w,dx:t==="left"?+p-a-u+ +d:+p+ +a+ +u-m},function(g,v,b,_,x){f===void 0&&(this.fontVariant=I2(g)),s===void 0&&(x.text=R2(g,v,b,_,t))})}function TM(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:a,tickRotate:o=0,tickPadding:u=Math.max(3,9-a)+(Math.abs(o)>=10?4*Math.cos(o*a2):0),text:s,textAnchor:l=Math.abs(o)>=10?o<0^t==="bottom"?"start":"end":"middle",lineAnchor:c=Math.abs(o)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:f,inset:h=0,insetTop:d=h,insetBottom:m=h,dy:p=0,x:y=e==="x"?void 0:null,...w}){return xi(oM,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:s===void 0?null:s,textAnchor:l,lineAnchor:c,fontVariant:f,rotate:o,x:y,...w,dy:t==="bottom"?+p+ +a+ +u-m:+p-a-u+ +d},function(g,v,b,_,x){f===void 0&&(this.fontVariant=I2(g)),s===void 0&&(x.text=R2(g,v,b,_,t))})}function $M(){const[e,t]=ur(...arguments);return N2("y",A2(t),e,t)}function DM(){const[e,t]=ur(...arguments);return N2("fy",S2(t),e,t)}function NM(){const[e,t]=ur(...arguments);return F2("x",E2(t),e,t)}function FM(){const[e,t]=ur(...arguments);return F2("fx",C2(t),e,t)}function N2(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:a=t==="left"?i:null,x2:o=t==="right"?i:null,...u}){return xi(Pf,e,t,`${e}-grid`,n,{y:r,x1:a,x2:o,...B2(u)})}function F2(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:a=t==="top"?i:null,y2:o=t==="bottom"?i:null,...u}){return xi(Mf,e,t,`${e}-grid`,n,{x:r,y1:a,y2:o,...B2(u)})}function B2({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...a}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...a}}function L2({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c=!1},f){return[,e]=Rn(e),[,t]=ft(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:a,fontWeight:o,monospace:u,pointerEvents:s,shapeRendering:l,clip:c,initializer:f}}function xi(e,t,n,r,i,a,o){let u;function s(f,h,d,m,p,y){const w=f==null&&(t==="fx"||t==="fy"),{[t]:g}=m;if(!g)throw new Error(`missing scale: ${t}`);const v=g.domain();let{interval:b,ticks:_,tickFormat:x,tickSpacing:M=t==="x"?80:35}=a;if(typeof _=="string"&&G2(g)&&(b=_,_=void 0),_===void 0&&(_=vi(b,g.type)??BM(g,M)),f==null){if(ar(_))f=kt(_);else if(Wr(_))f=il(_,...Bt(v));else if(g.interval){let E=g.interval;if(g.ticks){const[$,P]=Bt(v),T=(P-$)/E[Ia];E=dd(E,T/_)??E,f=il(E,$,P)}else{f=v;const $=f.length;E=dd(E,$/_)??E,E!==g.interval&&(f=il(E,...Bt(f)))}if(E===g.interval){const $=Math.round(f.length/_);$>1&&(f=f.filter((P,T)=>T%$===0))}}else g.ticks?f=g.ticks(_):f=v;if(!g.ticks&&f.length&&f!==v){const E=new Tu(v);f=f.filter($=>E.has($)),f.length||Zn(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?h=[On(f)]:u[t]={scale:t,value:st}}o==null||o.call(this,g,f,_,x,u);const S=Object.fromEntries(Object.entries(u).map(([E,$])=>[E,{...$,value:et(f,$.value)}]));return w&&(h=y.filterFacets(f,S)),{data:f,facets:h,channels:S}}const l=fi(a).initializer,c=e(i,fi({...a,initializer:s},l));return i==null?(u=c.channels,c.channels={}):u={},c.ariaLabel=r,c.clip===void 0&&(c.clip=!1),c}function BM(e,t){const[n,r]=Bt(e.range());return(r-n)/t}function R2(e,t,n,r,i){return{value:Tf(e,t,n,r,i)}}function Tf(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&vt(t)?y9(e.type,t,i)??Er:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Er:typeof r=="string"?(vt(e.domain())?La:yi)(r):Oa(r)}function il(e,t,n){return e.range(t,e.offset(e.floor(n)))}const LM={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},RM={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},IM={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},OM={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function I2(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function O2(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:a}={}){if(!(r==null||r.inferred&&G2(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),a==="auto"&&(a=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!a)return r;if(a===!0){const o=Mx(t);o&&(a=/x$/.test(e)||i==="center"?/x$/.test(e)===o<0?"left":"right":o<0?"up":"down")}switch(a){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function q2(e="auto"){return bt(e)?!1:typeof e=="boolean"?e:en(e,"labelArrow",["auto","up","right","down","left"])}function G2(e){return vt(e.domain())}function Vd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function qM(e,{opacity:t,...n}={}){if(!Nr(e)&&!Qg(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return U2(e,n,(r,i,a,o)=>r.append("svg").attr("width",a).attr("height",o).attr("fill",i.scale).attr("fill-opacity",ft(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function GM(e,{fill:t=(l=>(l=e.hint)==null?void 0:l.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(c=>(c=e.hint)==null?void 0:c.stroke)()!==void 0?e.hint.stroke:bt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:a=1.5,r:o=4.5,...u}={},s){const[f,h]=Rn(t),[d,m]=Rn(r),p=Vd(s,f),y=Vd(s,d),w=o*o*Math.PI;return n=ft(n)[1],i=ft(i)[1],a=ft(a)[1],U2(e,u,(g,v,b,_)=>g.append("svg").attr("viewBox","-8 -8 16 16").attr("width",b).attr("height",_).attr("fill",f==="color"?x=>p.scale(x):h).attr("fill-opacity",n).attr("stroke",d==="color"?x=>y.scale(x):m).attr("stroke-opacity",i).attr("stroke-width",a).append("path").attr("d",x=>{const M=jn();return e.scale(x).draw(M,w),M}))}function U2(e,t={},n){let{columns:r,tickFormat:i,fontVariant:a=i2(e),swatchSize:o=15,swatchWidth:u=o,swatchHeight:s=o,marginLeft:l=0,className:c,style:f,width:h}=t;const d=pf(t);c=df(c),i=Tf(e.scale,e.domain,void 0,i);const m=ze("div",d).attr("class",`${c}-swatches ${c}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${c}-swatches-columns .${c}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${c}-swatches-columns .${c}-swatch::before) {
  flex-shrink: 0;
}
:where(.${c}-swatches-columns .${c}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,m.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${c}-swatch`).call(n,e,u,s).call(y=>y.append("div").attr("class",`${c}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${c}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${c}-swatches-wrap .${c}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,m.selectAll().data(e.domain).enter().append("span").attr("class",`${c}-swatch`).call(n,e,u,s).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),m.call(y=>y.insert("style","*").text(`:where(.${c}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${c}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",l?`${+l}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",rt(a,"normal")).call(mf,f).node()}const uc=new Map([["symbol",GM],["color",H2],["opacity",zM]]);function UM(e,t,n={}){return(r,i)=>{if(!uc.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return uc.get(r)(e[r],z2(t,n[r],i),a=>e[a])}}function z2({className:e,...t},{label:n,ticks:r,tickFormat:i}={},a){return q9(a,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function H2(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return qM(e,n);case"ramp":return Yx(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function zM({type:e,interpolate:t,...n},{legend:r=!0,color:i=Qn(0,0,0),...a}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return H2({type:e,...n,interpolate:HM(i)},{legend:r,...a})}function HM(e){const{r:t,g:n,b:r}=Qn(e)||Qn(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function WM(e,t,n){const r=[];for(const[i,a]of uc){const o=n[i];if(o!=null&&o.legend&&i in e){const u=a(e[i],z2(t,e[i],o),s=>e[s]);u!=null&&r.push(u)}}return r}const VM={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},jM={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class YM extends ht{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:a=r,insetBottom:o=r,insetLeft:u=r,rx:s,ry:l}=t;super(Co,void 0,t,n==null?VM:jM),this.anchor=bg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Fe(i),this.insetRight=Fe(a),this.insetBottom=Fe(o),this.insetLeft=Fe(u),this.rx=Fe(s),this.ry=Fe(l)}render(t,n,r,i,a){const{marginTop:o,marginRight:u,marginBottom:s,marginLeft:l,width:c,height:f}=i,{anchor:h,insetTop:d,insetRight:m,insetBottom:p,insetLeft:y,rx:w,ry:g}=this,v=l+y,b=c-u-m,_=o+d,x=f-s-p;return ze(h?"svg:line":"svg:rect",a).datum(0).call(zt,this,i,a).call(Ht,this).call(Gn,this,r).call(Tt,this,{}).call(h==="left"?M=>M.attr("x1",v).attr("x2",v).attr("y1",_).attr("y2",x):h==="right"?M=>M.attr("x1",b).attr("x2",b).attr("y1",_).attr("y2",x):h==="top"?M=>M.attr("x1",v).attr("x2",b).attr("y1",_).attr("y2",_):h==="bottom"?M=>M.attr("x1",v).attr("x2",b).attr("y1",x).attr("y2",x):M=>M.attr("x",v).attr("y",_).attr("width",b-v).attr("height",x-_).attr("rx",w).attr("ry",g)).node()}}function XM(e){return new YM(e)}const al={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},ZM=new Set(["geometry","href","src","ariaLabel","scales"]);class KM extends ht{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ar(t)&&vg(t)&&(n={...n,title:st});const{x:r,y:i,x1:a,x2:o,y1:u,y2:s,anchor:l,preferredAnchor:c="bottom",monospace:f,fontFamily:h=f?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:p,fontWeight:y,lineHeight:w=1,lineWidth:g=20,frameAnchor:v,format:b,textAnchor:_="start",textOverflow:x,textPadding:M=8,title:S,pointerSize:E=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:a!=null&&o!=null?null:r,scale:"x",optional:!0},y:{value:u!=null&&s!=null?null:i,scale:"y",optional:!0},x1:{value:a,scale:"x",optional:o==null},y1:{value:u,scale:"y",optional:s==null},x2:{value:o,scale:"x",optional:a==null},y2:{value:s,scale:"y",optional:u==null},title:{value:S,optional:!0}},n,al),this.anchor=ec(l,"anchor"),this.preferredAnchor=ec(c,"preferredAnchor"),this.frameAnchor=os(v),this.textAnchor=rt(_,"middle"),this.textPadding=+M,this.pointerSize=+E,this.pathFilter=ct($),this.lineHeight=+w,this.lineWidth=+g,this.textOverflow=b2(x),this.monospace=!!f,this.fontFamily=ct(h),this.fontSize=Fe(d),this.fontStyle=ct(m),this.fontVariant=ct(p),this.fontWeight=ct(y);for(const P in al)P in this.channels&&(this[P]=al[P]);this.splitLines=y2(this),this.clipLine=w2(this),this.format={...b}}render(t,n,r,i,a){const o=this,{x:u,y:s,fx:l,fy:c}=n,{ownerSVGElement:f,document:h}=a,{anchor:d,monospace:m,lineHeight:p,lineWidth:y}=this,{textPadding:w,pointerSize:g,pathFilter:v}=this,{marginTop:b,marginLeft:_}=i,{x1:x,y1:M,x2:S,y2:E,x:$=x??S,y:P=M??E}=r,T=l?l(t.fx)-_:0,I=c?c(t.fy)-b:0,[B,C]=Wa(this,i),O=n2(r,B),ie=r2(r,C),te=m?kf:Cf,J=te(Zr);let z,H;"title"in r?(z=r.channels,H=nP):(z=tP.call(this,r,n),H=rP);const D=ze("svg:g",a).call(zt,this,i,a).call(g2,this).call(Tt,this,{x:$&&u,y:P&&s}).call(ue=>ue.selectAll().data(t).enter().append("g").attr("transform",ae=>`translate(${Math.round(O(ae))},${Math.round(ie(ae))})`).call(Ht,this).call(ae=>ae.append("path").attr("filter",v)).call(ae=>ae.append("text").each(function(V){const j=ji(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const L=H.call(o,V,t,z,n,r);if(typeof L=="string")for(const W of o.splitLines(L))G(j,{value:o.clipLine(W)});else{const W=new Set;for(const Y of L){const{label:N=""}=Y;N&&W.has(N)||(W.add(N),G(j,Y))}}})));function G(ue,{label:ae,value:V,color:j,opacity:L}){ae??(ae=""),V??(V="");const W=j!=null||L!=null;let Y,N=y*100;const[ge]=di(ae,N,te,J);if(ge>=0)ae=ae.slice(0,ge).trimEnd()+Zr,Y=V.trim(),V="";else{(ae||!V&&!W)&&(V=" "+V);const[me]=di(V,N-te(ae),te,J);me>=0&&(Y=V.trim(),V=V.slice(0,me).trimEnd()+Zr)}const re=ue.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ae&&re.append("tspan").attr("font-weight","bold").text(ae),V&&re.append(()=>h.createTextNode(V)),W&&re.append("tspan").text(" ").attr("fill",j).attr("fill-opacity",L).style("user-select","none"),Y&&re.append("title").text(Y)}function ne(){const{width:ue,height:ae}=i.facet??i;D.selectChildren().each(function(V){let{x:j,width:L,height:W}=this.getBBox();L=Math.round(L),W=Math.round(W);let Y=d;if(Y===void 0){const re=O(V)+T,me=ie(V)+I,xe=re+L+g+w*2<ue,Ue=re-L-g-w*2>0,nt=me+W+g+w*2<ae,De=me-W-g-w*2>0;Y=xe&&Ue?nt&&De?o.preferredAnchor:De?"bottom":"top":nt&&De?xe?"left":"right":(xe||Ue)&&(nt||De)?`${De?"bottom":"top"}-${xe?"left":"right"}`:o.preferredAnchor}const N=this.firstChild,ge=this.lastChild;if(N.setAttribute("d",eP(Y,g,w,L,W)),j)for(const re of ge.childNodes)re.setAttribute("x",-j);ge.setAttribute("y",`${+QM(Y,ge.childNodes.length,p).toFixed(6)}em`),ge.setAttribute("transform",`translate(${JM(Y,g,w,L,W)})`)}),D.attr("visibility",null)}return t.length&&(D.attr("visibility","hidden"),f.isConnected?Promise.resolve().then(ne):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ne)),D.node()}}function W2(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=qa(t,n)),new KM(e,{...r,x:t,y:n})}function QM(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function JM(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function eP(e,t,n,r,i){const a=r+n*2,o=i+n*2;switch(e){case"middle":return`M${-a/2},${-o/2}h${a}v${o}h${-a}z`;case"top-left":return`M0,0l${t},${t}h${a-t}v${o}h${-a}z`;case"top":return`M0,0l${t/2},${t/2}h${(a-t)/2}v${o}h${-a}v${-o}h${(a-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-a}v${o}h${a}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-o/2}h${-a}v${o}h${a}v${t/2-o/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${a-t}v${-o}h${-a}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(a-t)/2}v${-o}h${-a}v${o}h${(a-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-a}v${-o}h${a}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-o/2}h${a}v${o}h${-a}v${t/2-o/2}z`}}function tP({channels:e},t){var i,a;const n={};let r=this.format;r=jd(r,e,"x"),r=jd(r,e,"y"),this.format=r;for(const o in r){const u=r[o];if(!(u===null||u===!1))if(o==="fx"||o==="fy")n[o]=!0;else{const s=xd(e,o);s&&(n[o]=s)}}for(const o in e){if(o in n||o in r||ZM.has(o))continue;const u=xd(e,o);u&&(n[o]=u)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const o in n){const u=this.format[o];if(typeof u=="string"){const s=((i=n[o])==null?void 0:i.value)??((a=t[o])==null?void 0:a.domain())??[];this.format[o]=(vt(s)?La:yi)(u)}else if(u===void 0||u===!0){const s=t[o];this.format[o]=s!=null&&s.bandwidth?Tf(s,s.domain()):Er}}return n}function jd(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const a=Object.entries(e),o=e[n];return a.splice(a.findIndex(([u])=>u===n)+1,0,[r,o],[i,o]),Object.fromEntries(a)}function nP(e,t,{title:n}){return Er(n.value[e],e)}function*rP(e,t,n,r,i){for(const a in n){if(a==="fx"||a==="fy"){yield{label:vu(r,n,a),value:this.format[a](t[a],e)};continue}if(a==="x1"&&"x2"in n||a==="y1"&&"y2"in n)continue;const o=n[a];if(a==="x2"&&"x1"in n)yield{label:Xd(r,n,"x"),value:Yd(this.format.x2,n.x1,o,e)};else if(a==="y2"&&"y1"in n)yield{label:Xd(r,n,"y"),value:Yd(this.format.y2,n.y1,o,e)};else{const u=o.value[e],s=o.scale;if(!er(u)&&s==null)continue;yield{label:vu(r,n,a),value:this.format[a](u,e),color:s==="color"?i[a][e]:null,opacity:s==="opacity"?i[a][e]:null}}}}function Yd(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function Xd(e,t,n){const r=vu(e,t,`${n}1`,n),i=vu(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function vu(e,t,n,r=n){const i=t[n],a=e[(i==null?void 0:i.scale)??n];return String((a==null?void 0:a.label)??(i==null?void 0:i.label)??r)}function dt(e={}){var J;const{facet:t,style:n,title:r,subtitle:i,caption:a,ariaLabel:o,ariaDescription:u}=e,s=df(e.className),l=e.marks===void 0?[]:Kd(e.marks);l.push(...fP(l));const c=lP(t,e),f=new Map;for(const z of l){const H=Qd(z,c,e);H&&f.set(z,H)}const h=new Map;c&&Di(h,[c],e),Di(h,f,e);const d=Kd(hP(l,h,e));for(const z of d){const H=Qd(z,c,e);H&&f.set(z,H)}l.unshift(...d);let m=Nx(h,e);if(m!==void 0){const z=c?tl(m,c):void 0;for(const D of l){if(D.facet===null||D.facet==="super")continue;const G=f.get(D);G!==void 0&&(G.facetsIndex=D.fx!=null||D.fy!=null?tl(m,G):z)}const H=new Set;for(const{facetsIndex:D}of f.values())D==null||D.forEach((G,ne)=>{(G==null?void 0:G.length)>0&&H.add(ne)});m.forEach(0<H.size&&H.size<m.length?(D,G)=>D.empty=!H.has(G):D=>D.empty=!1);for(const D of l)if(D.facet==="exclude"){const G=f.get(D);G!==void 0&&(G.facetsIndex=Lx(G.facetsIndex))}}for(const z of Ie.keys())Ql(e[z])&&z!=="fx"&&z!=="fy"&&h.set(z,[]);const p=new Map;for(const z of l){if(p.has(z))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:H,channels:D}=f.get(z)??{},{data:G,facets:ne,channels:ue}=z.initialize(H,D,e);$f(ue,e),p.set(z,{data:G,facets:ne,channels:ue})}const y=ic(Di(h,p,e),e),w=$x(y,l,e);_x(y,w);const g=$d(y),{fx:v,fy:b}=g,_=v||b?Xg(y,w):w,x=v||b?wP(g,w):w,M=pf(e),S=M.document,E=Bu("svg").call(S.documentElement);let $=E;M.ownerSVGElement=E,M.className=s,M.projection=N8(e,_),M.filterFacets=(z,H)=>tl(m,{channels:H,groups:vf(z,H)}),M.getMarkState=z=>{const H=p.get(z),D=f.get(z);return{...H,channels:{...H.channels,...D==null?void 0:D.channels}}},M.dispatchValue=z=>{$.value!==z&&($.value=z,$.dispatchEvent(new Event("input",{bubbles:!0})))};const P=new Set;for(const[z,H]of p)if(z.initializer!=null){const D=z.facet==="super"?x:_,G=z.initializer(H.data,H.facets,H.channels,g,D,M);if(G.data!==void 0&&(H.data=G.data),G.facets!==void 0&&(H.facets=G.facets),G.channels!==void 0){const{fx:ne,fy:ue,...ae}=G.channels;sP(ae),Object.assign(H.channels,ae);for(const V of Object.values(ae)){const{scale:j}=V;j!=null&&!U9(Ie.get(j))&&(V2(V,e),P.add(j))}(ne!=null||ue!=null)&&f.set(z,!0)}}if(P.size){const z=new Map;Di(z,p,e,ne=>P.has(ne)),Di(h,p,e,ne=>P.has(ne));const H=yP(ic(z,e),y),{scales:D,...G}=$d(H);Object.assign(y,H),Object.assign(g,G),Object.assign(g.scales,D)}let T,I;m!==void 0&&(T={x:v==null?void 0:v.domain(),y:b==null?void 0:b.domain()},m=Fx(m,T),I=Bx(v,b,w));for(const[z,H]of p)H.values=z.scale(H.channels,g,M);const{width:B,height:C}=w;ji(E).attr("class",s).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",B).attr("height",C).attr("viewBox",`0 0 ${B} ${C}`).attr("aria-label",o).attr("aria-description",u).call(z=>z.append("style").text(`:where(.${s}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${s} text),
:where(.${s} tspan) {
  white-space: pre;
}`)).call(mf,n);for(const z of l){const{channels:H,values:D,facets:G}=p.get(z);if(m===void 0||z.facet==="super"){let ne=null;if(G&&(ne=G[0],ne=z.filter(ne,H,D),ne.length===0))continue;const ue=z.render(ne,g,D,x,M);if(ue==null)continue;E.appendChild(ue)}else{let ne;for(const ue of m){if(!(((J=z.facetAnchor)==null?void 0:J.call(z,m,T,ue))??!ue.empty))continue;let ae=null;if(G){const j=f.has(z);if(ae=G[j?ue.i:0],ae=z.filter(ae,H,D),ae.length===0)continue;!j&&ae===G[0]&&(ae=k9(ae)),ae.fx=ue.x,ae.fy=ue.y,ae.fi=ue.i}const V=z.render(ae,g,D,_,M);if(V!=null){(ne??(ne=ji(E).append("g"))).append(()=>V).datum(ue);for(const j of["aria-label","aria-description","aria-hidden","transform"])V.hasAttribute(j)&&(ne.attr(j,V.getAttribute(j)),V.removeAttribute(j))}}ne==null||ne.selectChildren().attr("transform",I)}}const O=WM(y,M,e),{figure:ie=r!=null||i!=null||a!=null||O.length>0}=e;ie&&($=S.createElement("figure"),$.className=`${s}-figure`,$.style.maxWidth="initial",r!=null&&$.append(Zd(S,r,"h2")),i!=null&&$.append(Zd(S,i,"h3")),$.append(...O,E),a!=null&&$.append(iP(S,a))),$.scale=kx(g.scales),$.legend=UM(y,M,e);const te=_8();return te>0&&ji(E).append("text").attr("x",B).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${te.toLocaleString("en-US")} warning${te===1?"":"s"}. Please check the console.`),$}function Zd(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function iP(e,t){const n=e.createElement("figcaption");return n.append(t),n}function aP({marks:e=[],...t}={}){return dt({...t,marks:[...e,this]})}ht.prototype.plot=aP;function Kd(e){return e.flat(1/0).filter(t=>t!=null).map(oP)}function oP(e){return typeof e.render=="function"?e:new uP(e)}class uP extends ht{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function $f(e,t){for(const n in e)V2(e[n],t);return e}function V2(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:a,interval:o,transform:u=a?s=>s*100:wg(o,i)}=t[n]??{};u!=null&&(e.value=Ve(e.value,u),e.transform=!1)}function sP(e){for(const t in e)Cg(t,e[t])}function Di(e,t,n,r=M9){var i,a;for(const{channels:o}of t.values())for(const u in o){const s=o[u],{scale:l}=s;if(l!=null&&r(l))if(l==="projection"){if(!R8(n)){const c=((i=n.x)==null?void 0:i.domain)===void 0,f=((a=n.y)==null?void 0:a.domain)===void 0;if(c||f){const[h,d]=O8(s);c&&ol(e,"x",h),f&&ol(e,"y",d)}}}else ol(e,l,s)}return e}function ol(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function lP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=kt(e.data);if(i==null)throw new Error("missing facet data");const a={};n!=null&&(a.fx=pa(i,{value:n,scale:"fx"})),r!=null&&(a.fy=pa(i,{value:r,scale:"fy"})),$f(a,t);const o=vf(i,a);return{channels:a,groups:o,data:e.data}}function Qd(e,t,n){var s;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const l=kt(e.data??r??i);if(l===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(l===null)return;const c={};return r!=null&&(c.fx=pa(l,{value:r,scale:"fx"})),i!=null&&(c.fy=pa(l,{value:i,scale:"fy"})),$f(c,n),{channels:c,groups:vf(l,c)}}if(t===void 0)return;const{channels:a,groups:o,data:u}=t;if(e.facet!=="auto"||e.data===u)return{channels:a,groups:o};u.length>0&&(o.size>1||o.size===1&&a.fx&&a.fy&&[...o][0][1].size>1)&&((s=kt(e.data))==null?void 0:s.length)===u.length&&Zn(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function cP(e,t={}){return fi({...t,x:null,y:null},(n,r,i,a,o,u)=>u.getMarkState(e))}function fP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:a}=r;i=/^x$/i.test(i)?jx:/^y$/i.test(i)?Od:t2,r=i(cP(n,r)),r.title=null,a===void 0&&(r.preferredAnchor=i===Od?"left":"bottom");const o=W2(n.data,r);o.facet=n.facet,o.facetAnchor=n.facetAnchor,t.push(o)}}return t}function hP(e,t,n){let{projection:r,x:i={},y:a={},fx:o={},fy:u={},axis:s,grid:l,facet:c={},facet:{axis:f=s,grid:h}=c,x:{axis:d=s,grid:m=d===null?null:l}=i,y:{axis:p=s,grid:y=p===null?null:l}=a,fx:{axis:w=f,grid:g=w===null?null:h}=o,fy:{axis:v=f,grid:b=v===null?null:h}=u}=n;(r||!Ql(i)&&!Jd("x",e))&&(d=m=null),(r||!Ql(a)&&!Jd("y",e))&&(p=y=null),t.has("fx")||(w=g=null),t.has("fy")||(v=b=null),d===void 0&&(d=!yo(e,"x")),p===void 0&&(p=!yo(e,"y")),w===void 0&&(w=!yo(e,"fx")),v===void 0&&(v=!yo(e,"fy")),d===!0&&(d="bottom"),p===!0&&(p="left"),w===!0&&(w=d==="top"||d===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const _=[];return go(_,b,DM,u),bo(_,v,AM,"right","left",c,u),go(_,g,FM,o),bo(_,w,SM,"top","bottom",c,o),go(_,y,$M,a),bo(_,p,k2,"left","right",n,a),go(_,m,NM,i),bo(_,d,T2,"bottom","top",n,i),_}function bo(e,t,n,r,i,a,o){if(!t)return;const u=dP(t);o=mP(u?r:t,a,o);const{line:s}=o;(n===k2||n===T2)&&s&&!ma(s)&&e.push(XM(pP(o))),e.push(n(o)),u&&e.push(n({...o,anchor:i,label:null}))}function go(e,t,n,r){!t||ma(t)||e.push(n(bP(t,r)))}function dP(e){return/^\s*both\s*$/i.test(e)}function mP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h=t.label,labelAnchor:d,labelArrow:m=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:a,tickPadding:o,tickFormat:u,tickRotate:s,fontVariant:l,ariaLabel:c,ariaDescription:f,label:h,labelAnchor:d,labelArrow:m,labelOffset:p}}function pP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function bP(e,{stroke:t=as(e)?e:void 0,ticks:n=gP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:a}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:a}}function gP(e){switch(typeof e){case"number":return!0;case"string":return!as(e)}return ar(e)||typeof(e==null?void 0:e.range)=="function"}function yo(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function Jd(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function yP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function wP({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:a,marginLeft:o,width:u,height:s}=wf(n),l=e&&e0(e),c=t&&e0(t);return{marginTop:t?c[0]:r,marginRight:e?u-l[1]:i,marginBottom:t?s-c[1]:a,marginLeft:e?l[0]:o,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:u,height:s}}function e0(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const vP=new Map([["basis",S4],["basis-closed",E4],["basis-open",C4],["bundle",k4],["bump-x",p4],["bump-y",b4],["cardinal",T4],["cardinal-closed",$4],["cardinal-open",D4],["catmull-rom",N4],["catmull-rom-closed",F4],["catmull-rom-open",B4],["linear",Ra],["linear-closed",L4],["monotone-x",R4],["monotone-y",I4],["natural",O4],["step",q4],["step-after",U4],["step-before",G4]]);function j2(e=Ra,t){if(typeof e=="function")return e;const n=vP.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function Y2(e=mi,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?mi:j2(e,t)}function mi(e){return Ra(e)}function _P(e={y:"count"},t={}){[e,t]=PP(e,t);const{x:n,y:r}=t;return MP(AP(n,t,st),null,null,r,e,xf(t))}function xP(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=hf}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function X2(e={}){return xP(_P,"y",hs(e,"x"))}function MP(e,t,n,r,{data:i=Eg,filter:a=wu,sort:o,reverse:u,...s}={},l={}){e=t0(e),t=t0(t),s=EP(s,l),i=Q2(i,st),o=o==null?void 0:Z2("sort",o,l),a=a==null?void 0:K2("filter",a,l),n!=null&&fo(s,"x","x1","x2")&&(n=null),r!=null&&fo(s,"y","y1","y2")&&(r=null);const[c,f]=An(e),[h,d]=An(e),[m,p]=An(t),[y,w]=An(t),[g,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[b,_]=An(g),{x,y:M,z:S,fill:E,stroke:$,x1:P,x2:T,y1:I,y2:B,domain:C,cumulative:O,thresholds:ie,interval:te,...J}=l,[z,H]=An(S),[D]=Rn(E),[G]=Rn($),[ne,ue]=An(D),[ae,V]=An(G);return{..."z"in l&&{z:z||S},..."fill"in l&&{fill:ne||E},..."stroke"in l&&{stroke:ae||$},...ss(J,(j,L,W)=>{const Y=yg(et(j,g),W==null?void 0:W[v]),N=et(j,S),ge=et(j,D),re=et(j,G),me=n8(s,{z:N,fill:ge,stroke:re}),xe=[],Ue=[],nt=Y&&_([]),De=N&&H([]),xt=ge&&ue([]),Ne=re&&V([]),Fr=e&&f([]),Wt=e&&d([]),Te=t&&p([]),Pi=t&&w([]),nn=TP(e,t,j);let He=0;for(const se of s)se.initialize(j);o&&o.initialize(j),a&&a.initialize(j);for(const se of L){const K=[];for(const Me of s)Me.scope("facet",se);o&&o.scope("facet",se),a&&a.scope("facet",se);for(const[Me,R]of yd(se,me))for(const[ee,le]of yd(R,Y))for(const[Ee,Mt]of nn(le))if(!(a&&!a.reduce(Ee,Mt))){K.push(He++),Ue.push(i.reduceIndex(Ee,j,Mt)),Y&&nt.push(ee),N&&De.push(me===N?Me:N[(Ee.length>0?Ee:le)[0]]),ge&&xt.push(me===ge?Me:ge[(Ee.length>0?Ee:le)[0]]),re&&Ne.push(me===re?Me:re[(Ee.length>0?Ee:le)[0]]),Fr&&(Fr.push(Mt.x1),Wt.push(Mt.x2)),Te&&(Te.push(Mt.y1),Pi.push(Mt.y2));for(const Br of s)Br.reduce(Ee,Mt);o&&o.reduce(Ee)}xe.push(K)}return r8(xe,o,u),{data:Ue,facets:xe}}),...!fo(s,"x")&&(c?{x1:c,x2:h,x:Jl(c,h)}:{x,x1:P,x2:T}),...!fo(s,"y")&&(m?{y1:m,y2:y,y:Jl(m,y)}:{y:M,y1:I,y2:B}),...b&&{[v]:b},...Object.fromEntries(s.map(({name:j,output:L})=>[j,L]))}}function PP({cumulative:e,domain:t,thresholds:n,interval:r,...i},a){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...a}]}function AP(e,{cumulative:t,domain:n,thresholds:r,interval:i},a){return e={...Ga(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=a),e.thresholds=SP(e.thresholds,e.interval),e}function t0(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Bt,thresholds:i}=e,a=o=>{let u=et(o,t),s;if(vt(u)||kP(i)){u=Ve(u,pg,Float64Array);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Wr(i)?i(u,c,f):i;typeof h=="number"&&(h=fp(c,f,h)),Wr(h)&&(r===Bt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f))),s=h}else{u=sn(u);let[c,f]=typeof r=="function"?r(u):r,h=typeof i=="function"&&!Wr(i)?i(u,c,f):i;if(typeof h=="number")if(r===Bt){let d=Uo(c,f,h);if(isFinite(d))if(d>0){let m=Math.round(c/d),p=Math.round(f/d);m*d<=c||--m,p*d>f||++p;let y=p-m+1;h=new Float64Array(y);for(let w=0;w<y;++w)h[w]=(m+w)*d}else if(d<0){d=-d;let m=Math.round(c*d),p=Math.round(f*d);m/d<=c||--m,p/d>f||++p;let y=p-m+1;h=new Float64Array(y);for(let w=0;w<y;++w)h[w]=(m+w)/d}else h=[c];else h=[c]}else h=na(c,f,h);else Wr(h)&&(r===Bt&&(c=h.floor(c),f=h.offset(h.floor(f))),h=h.range(c,h.offset(f)));s=h}const l=[];if(s.length===1)l.push([s[0],s[0]]);else for(let c=1;c<s.length;++c)l.push([s[c-1],s[c]]);return l.bin=(n<0?DP:n>0?$P:Df)(l,s,u),l};return a.label=Dr(t),a}function SP(e,t,n=n0){if(e===void 0)return t===void 0?n:vi(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return Lw;case"scott":return M1;case"sturges":return Dw;case"auto":return n0}return ef(e)}return e}function EP(e,t){return J9(e,t,Z2)}function Z2(e,t,n){return Ag(e,t,n,K2)}function K2(e,t,n){return Sg(e,t,n,Q2)}function Q2(e,t){return ff(e,t,CP)}function CP(e){switch(`${e}`.toLowerCase()){case"x":return NP;case"x1":return BP;case"x2":return LP;case"y":return FP;case"y1":return RP;case"y2":return IP}throw new Error(`invalid bin reduce: ${e}`)}function n0(e,t,n){return Math.min(200,M1(e,t,n))}function kP(e){return D9(e)||ar(e)&&vt(e)}function TP(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries()){const c=i.bin(o[u]);for(const[f,[h,d]]of i.entries())yield[c[f],{data:n,x1:s,y1:h,x2:l,y2:d}]}}:r?function*(a){const o=r.bin(a);for(const[u,[s,l]]of r.entries())yield[o[u],{data:n,x1:s,x2:l}]}:function*(a){const o=i.bin(a);for(const[u,[s,l]]of i.entries())yield[o[u],{data:n,y1:s,y2:l}]}}function Df(e,t,n){return t=sn(t),r=>{var a;const i=e.map(()=>[]);for(const o of r)(a=i[Cu(t,n[o])-1])==null||a.push(o);return i}}function $P(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=1,u=a.length;o<u;++o){const s=a[o-1],l=a[o];for(const c of s)l.push(c)}return a}}function DP(e,t,n){const r=Df(e,t,n);return i=>{const a=r(i);for(let o=a.length-2;o>=0;--o){const u=a[o+1],s=a[o];for(const l of u)s.push(l)}return a}}function J2(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const NP={reduceIndex(e,t,{x1:n,x2:r}){return J2(n,r)}},FP={reduceIndex(e,t,{y1:n,y2:r}){return J2(n,r)}},BP={reduceIndex(e,t,{x1:n}){return n}},LP={reduceIndex(e,t,{x2:n}){return n}},RP={reduceIndex(e,t,{y1:n}){return n}},IP={reduceIndex(e,t,{y2:n}){return n}};function ey(e={}){return gg(e)?e:{...e,y:st}}function OP(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const u of t)for(const s of u)r[s]&&++i,r[s]=1;if(i===0)return{data:e,facets:t};e=da(e);const a=e[dg]=new Uint32Array(n+i);t=t.map(u=>da(u,Uint32Array));let o=n;r.fill(0);for(const u of t)for(let s=0,l=u.length;s<l;++s){const c=u[s];r[c]?(u[s]=o,e[o]=e[c],a[o]=c,++o):a[c]=c,r[c]=1}return{data:e,facets:t}}function qP(e={},t={}){arguments.length===1&&([e,t]=GP(e));const{x1:n,x:r=n,y:i,...a}=t,[o,u,s,l]=zP(r,i,"x","y",e,a);return{...o,x1:n,x:u,y1:s,y2:l,y:Jl(s,l)}}function ty({y:e,y1:t,y2:n,...r}={}){return r=hs(r,"x"),t===void 0&&n===void 0?qP({y:e,...r}):([t,n]=C9(e,t,n),{...r,y1:t,y2:n})}function GP(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const UP={length:!0};function zP(e,t=x9,n,r,{offset:i,order:a,reverse:o},u){if(t===null)throw new Error(`stack requires ${r}`);const s=rf(u),[l,c]=An(e),[f,h]=yu(t),[d,m]=yu(t);return f.hint=d.hint=UP,i=HP(i),a=jP(a,i,r),[ss(u,(p,y,w)=>{({data:p,facets:y}=OP(p,y));const g=e==null?void 0:c(yg(et(p,e),w==null?void 0:w[n])),v=et(p,t,Float64Array),b=et(p,s),_=a&&a(p,g,v,b),x=p.length,M=h(new Float64Array(x)),S=m(new Float64Array(x)),E=[];for(const $ of y){const P=g?Array.from($u($,T=>g[T]).values()):[$];if(_)for(const T of P)T.sort(_);for(const T of P){let I=0,B=0;o&&T.reverse();for(const C of T){const O=v[C];O<0?I=S[C]=(M[C]=I)+O:O>0?B=S[C]=(M[C]=B)+O:S[C]=M[C]=B}}E.push(P)}return i&&i(E,M,S,b),{data:p,facets:y}}),l,f,d]}function HP(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return WP;case"center":case"silhouette":return VP;case"wiggle":return ry}throw new Error(`unknown offset: ${e}`)}}function ny(e,t){let n=0,r=0;for(const i of e){const a=t[i];a<n&&(n=a),a>r&&(r=a)}return[n,r]}function WP(e,t,n){for(const r of e)for(const i of r){const[a,o]=ny(i,n);for(const u of i){const s=1/(o-a||1);t[u]=s*(t[u]-a),n[u]=s*(n[u]-a)}}}function VP(e,t,n){for(const r of e){for(const i of r){const[a,o]=ny(i,n);for(const u of i){const s=(o+a)/2;t[u]-=s,n[u]-=s}}iy(r,t,n)}ay(e,t,n)}function ry(e,t,n,r){for(const i of e){const a=new wr;let o=0;for(const u of i){let s=-1;const l=u.map(d=>Math.abs(n[d]-t[d])),c=u.map(d=>{s=r?r[d]:++s;const m=n[d]-t[d],p=a.has(s)?m-a.get(s):0;return a.set(s,m),p}),f=[0,...Sw(c)];for(const d of u)t[d]+=o,n[d]+=o;const h=Kn(l);h&&(o-=Kn(l,(d,m)=>(c[m]/2+f[m])*d)/h)}iy(i,t,n)}ay(e,t,n)}function iy(e,t,n){const r=Nn(e,i=>Nn(i,a=>t[a]));for(const i of e)for(const a of i)t[a]-=r,n[a]-=r}function ay(e,t,n){const r=e.length;if(r===1)return;const i=e.map(u=>u.flat()),a=i.map(u=>(Nn(u,s=>t[s])+qt(u,s=>n[s]))/2),o=Nn(a);for(let u=0;u<r;u++){const s=o-a[u];for(const l of i[u])t[l]+=s,n[l]+=s}}function jP(e,t,n){if(e===void 0&&t===ry)return r0(Qt);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?gu:Qt;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return YP(i);case"z":return XP(i);case"sum":return ZP(i);case"appearance":return KP(i);case"inside-out":return r0(i)}return i0(mg(e))}if(typeof e=="function")return(e.length===1?i0:QP)(e);if(Array.isArray(e))return JP(e);throw new Error(`invalid order: ${e}`)}}function YP(e){return(t,n,r)=>(i,a)=>e(r[i],r[a])}function XP(e){return(t,n,r,i)=>(a,o)=>e(i[a],i[o])}function ZP(e){return ps(e,(t,n,r,i)=>xc(On(t),a=>Kn(a,o=>r[o]),a=>i[a]))}function KP(e){return ps(e,(t,n,r,i)=>xc(On(t),a=>n[x1(a,o=>r[o])],a=>i[a]))}function r0(e){return ps(e,(t,n,r,i)=>{const a=On(t),o=xc(a,f=>n[x1(f,h=>r[h])],f=>i[f]),u=jr(a,f=>Kn(f,h=>r[h]),f=>i[f]),s=[],l=[];let c=0;for(const f of o)c<0?(c+=u.get(f),s.push(f)):(c-=u.get(f),l.push(f));return l.reverse().concat(s)})}function i0(e){return t=>{const n=et(t,e);return(r,i)=>Qt(n[r],n[i])}}function QP(e){return t=>(n,r)=>e(t[n],t[r])}function JP(e){return ps(Qt,()=>e)}function ps(e,t){return(n,r,i,a)=>{if(!a)throw new Error("missing channel: z");const o=new wr(t(n,r,i,a).map((u,s)=>[u,s]));return(u,s)=>e(o.get(a[u]),o.get(a[s]))}}const eA={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class tA extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,z:u,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0},z:{value:rf(n),optional:!0}},n,eA),this.z=u,this.curve=j2(s,l)}filter(t){return t}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r;return ze("svg:g",a).call(zt,this,i,a).call(Tt,this,n,0,0).call(c=>c.selectAll().data(Dg(t,[o,u,s,l],this,r)).enter().append("path").call(Ht,this).call($g,this,r).attr("d",m4().curve(this.curve).defined(f=>f>=0).x0(f=>o[f]).y0(f=>u[f]).x1(f=>s[f]).y1(f=>l[f]))).node()}}function nA(e,t){const{x:n=rs,...r}=X2(t);return new tA(e,ty(ey({...r,x1:n,x2:void 0})))}const rA={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class iA extends ht{constructor(t,n={}){const{x1:r,y1:i,x2:a,y2:o,curve:u,tension:s}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:a,scale:"x",optional:!0},y2:{value:o,scale:"y",optional:!0}},n,rA),this.curve=Y2(u,s),Ya(this,n)}project(t,n,r){this.curve!==mi&&super.project(t,n,r)}render(t,n,r,i,a){const{x1:o,y1:u,x2:s=o,y2:l=u}=r,{curve:c}=this;return ze("svg:g",a).call(zt,this,i,a).call(Tt,this,n).call(f=>f.selectAll().data(t).enter().append("path").call(Ht,this).attr("d",c===mi&&a.projection?aA(a.projection,o,u,s,l):h=>{const d=jn(),m=c(d);return m.lineStart(),m.point(o[h],u[h]),m.point(s[h],l[h]),m.lineEnd(),d}).call(Gn,this,r).call(ds,this,r,a)).node()}}function aA(e,t,n,r,i){const a=Gu(e);return t=sn(t),n=sn(n),r=sn(r),i=sn(i),o=>a({type:"LineString",coordinates:[[t[o],n[o]],[r[o],i[o]]]})}function Nf(e,{x:t,x1:n,x2:r,y:i,y1:a,y2:o,...u}={}){return[n,r]=a0(t,n,r),[a,o]=a0(i,a,o),new iA(e,{...u,x1:n,x2:r,y1:a,y2:o})}function a0(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class oy extends ht{constructor(t,n,r={},i){super(t,n,r,i);const{inset:a=0,insetTop:o=a,insetRight:u=a,insetBottom:s=a,insetLeft:l=a,rx:c,ry:f}=r;this.insetTop=Fe(o),this.insetRight=Fe(u),this.insetBottom=Fe(s),this.insetLeft=Fe(l),this.rx=rt(c,"auto"),this.ry=rt(f,"auto")}render(t,n,r,i,a){const{rx:o,ry:u}=this;return ze("svg:g",a).call(zt,this,i,a).call(this._transform,this,n).call(s=>s.selectAll().data(t).enter().append("rect").call(Ht,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(fe,"rx",o).call(fe,"ry",u).call(Gn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?a=>n[a]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?a=>n[a]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:a}){const{insetLeft:o,insetRight:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:a}){const{insetTop:o,insetBottom:u}=this,s=n&&t?t.bandwidth():a-r-i;return Math.max(0,s-o-u)}}const oA={ariaLabel:"bar"};class uA extends oy{constructor(t,n={}){const{x:r,y1:i,y2:a}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:a,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,oA)}_transform(t,n,{y:r}){t.call(Tt,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:a}=this;return hi(t)?i+a:o=>Math.min(n[o],r[o])+a}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:a,height:o}){const{insetTop:u,insetBottom:s}=this;return hi(t)?o-i-a-u-s:l=>Math.max(0,Math.abs(r[l]-n[l])-u-s)}}function uy(e,t={}){return E9(t)||(t={...t,x:rs,y2:st}),new uA(e,ty(h2(ey(t))))}const sA={ariaLabel:"cell"};class lA extends oy{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,sA)}_transform(t,n){t.call(Tt,n,{},0,0)}}function sy(e,{x:t,y:n,...r}={}){return[t,n]=qa(t,n),new lA(e,{...r,x:t,y:n})}const cA={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function fA(e){return e.sort===void 0&&e.reverse===void 0?Z9({channel:"-r"},e):e}class hA extends ht{constructor(t,n={}){const{x:r,y:i,r:a,rotate:o,symbol:u=fa,frameAnchor:s}=n,[l,c]=ft(o,0),[f,h]=Y9(u),[d,m]=ft(a,f==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:d,scale:"r",filter:ts,optional:!0},rotate:{value:l,optional:!0},symbol:{value:f,scale:"auto",optional:!0}},fA(n),cA),this.r=m,this.rotate=c,this.symbol=h,this.frameAnchor=os(s);const{channels:p}=this,{symbol:y}=p;if(y){const{fill:w,stroke:g}=p;y.hint={fill:w?w.value===y.value?"color":"currentColor":this.fill??"currentColor",stroke:g?g.value===y.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,a){const{x:o,y:u}=n,{x:s,y:l,r:c,rotate:f,symbol:h}=r,{r:d,rotate:m,symbol:p}=this,[y,w]=Wa(this,i),g=p===fa,v=c?void 0:d*d*Math.PI;return Kc(d)&&(t=[]),ze("svg:g",a).call(zt,this,i,a).call(Tt,this,{x:s&&o,y:l&&u}).call(b=>b.selectAll().data(t).enter().append(g?"circle":"path").call(Ht,this).call(g?_=>{_.attr("cx",s?x=>s[x]:y).attr("cy",l?x=>l[x]:w).attr("r",c?x=>c[x]:d)}:_=>{_.attr("transform",Af`translate(${s?x=>s[x]:y},${l?x=>l[x]:w})${f?x=>` rotate(${f[x]})`:m?` rotate(${m})`:""}`).attr("d",c&&h?x=>{const M=jn();return h[x].draw(M,c[x]*c[x]*Math.PI),M}:c?x=>{const M=jn();return p.draw(M,c[x]*c[x]*Math.PI),M}:h?x=>{const M=jn();return h[x].draw(M,v),M}:(()=>{const x=jn();return p.draw(x,v),x})())}).call(Gn,this,r)).node()}}function Ff(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=qa(t,n)),new hA(e,{...r,x:t,y:n})}const dA={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ly extends ht{constructor(t,n={}){const{x:r,y:i,z:a,curve:o,tension:u}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:rf(n),optional:!0}},n,dA),this.z=a,this.curve=Y2(o,u),Ya(this,n)}filter(t){return t}project(t,n,r){this.curve!==mi&&super.project(t,n,r)}render(t,n,r,i,a){const{x:o,y:u}=r,{curve:s}=this;return ze("svg:g",a).call(zt,this,i,a).call(Tt,this,n).call(l=>l.selectAll().data(Dg(t,[o,u],this,r)).enter().append("path").call(Ht,this).call($g,this,r).call(Qx,this,r,a).attr("d",s===mi&&a.projection?mA(a.projection,o,u):Nb().curve(s).defined(c=>c>=0).x(c=>o[c]).y(c=>u[c]))).node()}}function mA(e,t,n){const r=Gu(e);return t=sn(t),n=sn(n),i=>{let a=[];const o=[a];for(const u of i)u===-1?(a=[],o.push(a)):a.push([t[u],n[u]]);return r({type:"MultiLineString",coordinates:o})}}function pA(e,{x:t,y:n,...r}={}){return[t,n]=qa(t,n),new ly(e,{...r,x:t,y:n})}function cy(e,{x:t=rs,y:n=st,...r}={}){return new ly(e,X2({...r,x:t,y:n}))}const bA={ariaLabel:"tick",fill:null,stroke:"currentColor"};class gA extends ht{constructor(t,n,r){super(t,n,r,bA),Ya(this,r)}render(t,n,r,i,a){return ze("svg:g",a).call(zt,this,i,a).call(this._transform,this,n).call(o=>o.selectAll().data(t).enter().append("line").call(Ht,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Gn,this,r).call(ds,this,r,a)).node()}}class yA extends gA{constructor(t,n={}){const{x:r,y:i,inset:a=0,insetTop:o=a,insetBottom:u=a}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=Fe(o),this.insetBottom=Fe(u)}_transform(t,n,{x:r}){t.call(Tt,n,{x:r},gt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?a=>n[a]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:a}=this;return n&&t?o=>n[o]+t.bandwidth()-a:r-i-a}}function bs(e,{x:t=st,...n}={}){return new yA(e,{...n,x:t})}function wA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function vA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=dt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[bs(r,{x:l=>l})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class _A extends Ge{constructor(t){super(),qe(this,t,vA,wA,Oe,{pattern:3,width:0,height:1})}}function xA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function MA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=dt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},marks:[uy(s,{x:(c,f)=>f+1,y:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class PA extends Ge{constructor(t){super(),qe(this,t,MA,xA,Oe,{pattern:3,width:0,height:1})}}function AA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function SA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=r.map((c,f)=>f===0?0:c-r[f-1]),l=dt({width:i,height:a,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[sy(s,{x:(c,f)=>f+1,fill:c=>c})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class ko extends Ge{constructor(t){super(),qe(this,t,SA,AA,Oe,{pattern:3,width:0,height:1})}}function EA(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[5](null)}}}function CA(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;_t(()=>{if(n(2,u.textContent="",u),!r)return;const l=dt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[cy(r,{x:(c,f)=>f/i,y:c=>c})]});u.appendChild(l)});function s(l){We[l?"unshift":"push"](()=>{u=l,n(2,u)})}return e.$$set=l=>{"audioData"in l&&n(3,r=l.audioData),"sampleRate"in l&&n(4,i=l.sampleRate),"width"in l&&n(0,a=l.width),"height"in l&&n(1,o=l.height)},[a,o,u,r,i,s]}class To extends Ge{constructor(t){super(),qe(this,t,CA,EA,Oe,{audioData:3,sampleRate:4,width:0,height:1})}}function kA(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=q(),i=k("button"),i.textContent="play audio (p)",n.controls=!1},m(u,s){Z(u,t,s),A(t,n),e[5](n),A(t,r),A(t,i),a||(o=Qe(i,"click",e[1]),a=!0)},p:de,i:de,o:de,d(u){u&&X(t),e[5](null),a=!1,o()}}}function TA(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:a=-1}=t,o;const u=f=>{f&&o&&Xc(f,i,o)},s=()=>{o&&(n(0,o.currentTime=0,o),o.play())},l=f=>{f.key==="p"&&s()};xa(()=>{document.querySelector("html").addEventListener("keyup",l),u(r)}),hw(()=>{document.querySelector("html").removeEventListener("keyup",l)});function c(f){We[f?"unshift":"push"](()=>{o=f,n(0,o)})}return e.$$set=f=>{"audioData"in f&&n(2,r=f.audioData),"sampleRate"in f&&n(3,i=f.sampleRate),"currentTrialNumber"in f&&n(4,a=f.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&a>-1&&window.setTimeout(s,250),e.$$.dirty&4&&u(r)},[o,s,r,i,a,c]}class fy extends Ge{constructor(t){super(),qe(this,t,TA,kA,Oe,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const hy=new Map,dy=new Map,$A=new Map,DA=new Map;function NA(e){return hy.get(e)}function my(e){return dy.get(e)}const FA=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],BA=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],LA=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of FA)hy.set(e.pitch,e),dy.set(e.label,e);for(const e of BA)$A.set(e.number,e);for(const e of LA){const t=`${e.number}-${e.subnumber}`;DA.set(t,e)}var RA={value:()=>{}};function py(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new $o(n)}function $o(e){this._=e}function IA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}$o.prototype=py.prototype={constructor:$o,on:function(e,t){var n=this._,r=IA(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=OA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=o0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=o0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new $o(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function OA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function o0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=RA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var sc="http://www.w3.org/1999/xhtml";const u0={svg:"http://www.w3.org/2000/svg",xhtml:sc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function gs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),u0.hasOwnProperty(t)?{space:u0[t],local:e}:e}function qA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===sc&&t.documentElement.namespaceURI===sc?t.createElement(e):t.createElementNS(n,e)}}function GA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function by(e){var t=gs(e);return(t.local?GA:qA)(t)}function UA(){}function Bf(e){return e==null?UA:function(){return this.querySelector(e)}}function zA(e){typeof e!="function"&&(e=Bf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=new Array(o),s,l,c=0;c<o;++c)(s=a[c])&&(l=e.call(s,s.__data__,c,a))&&("__data__"in s&&(l.__data__=s.__data__),u[c]=l);return new Ut(r,this._parents)}function gy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function HA(){return[]}function yy(e){return e==null?HA:function(){return this.querySelectorAll(e)}}function WA(e){return function(){var t=e.apply(this,arguments);return t==null?[]:gy(t)}}function VA(e){typeof e=="function"?e=WA(e):e=yy(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&(r.push(e.call(s,s.__data__,l,o)),i.push(s));return new Ut(r,i)}function wy(e){return function(){return this.matches(e)}}function vy(e){return function(t){return t.matches(e)}}var jA=Array.prototype.find;function YA(e){return function(){return jA.call(this.children,e)}}function XA(){return this.firstElementChild}function ZA(e){return this.select(e==null?XA:YA(typeof e=="function"?e:vy(e)))}var KA=Array.prototype.filter;function QA(){return this.children}function JA(e){return function(){return KA.call(this.children,e)}}function eS(e){return this.selectAll(e==null?QA:JA(typeof e=="function"?e:vy(e)))}function tS(e){typeof e!="function"&&(e=wy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new Ut(r,this._parents)}function _y(e){return new Array(e.length)}function nS(){return new Ut(this._enter||this._groups.map(_y),this._parents)}function _u(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_u.prototype={constructor:_u,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rS(e){return function(){return e}}function iS(e,t,n,r,i,a){for(var o=0,u,s=t.length,l=a.length;o<l;++o)(u=t[o])?(u.__data__=a[o],r[o]=u):n[o]=new _u(e,a[o]);for(;o<s;++o)(u=t[o])&&(i[o]=u)}function aS(e,t,n,r,i,a,o){var u,s,l=new Map,c=t.length,f=a.length,h=new Array(c),d;for(u=0;u<c;++u)(s=t[u])&&(h[u]=d=o.call(s,s.__data__,u,t)+"",l.has(d)?i[u]=s:l.set(d,s));for(u=0;u<f;++u)d=o.call(e,a[u],u,a)+"",(s=l.get(d))?(r[u]=s,s.__data__=a[u],l.delete(d)):n[u]=new _u(e,a[u]);for(u=0;u<c;++u)(s=t[u])&&l.get(h[u])===s&&(i[u]=s)}function oS(e){return e.__data__}function uS(e,t){if(!arguments.length)return Array.from(this,oS);var n=t?aS:iS,r=this._parents,i=this._groups;typeof e!="function"&&(e=rS(e));for(var a=i.length,o=new Array(a),u=new Array(a),s=new Array(a),l=0;l<a;++l){var c=r[l],f=i[l],h=f.length,d=gy(e.call(c,c&&c.__data__,l,r)),m=d.length,p=u[l]=new Array(m),y=o[l]=new Array(m),w=s[l]=new Array(h);n(c,f,p,y,w,d,t);for(var g=0,v=0,b,_;g<m;++g)if(b=p[g]){for(g>=v&&(v=g+1);!(_=y[v])&&++v<m;);b._next=_||null}}return o=new Ut(o,r),o._enter=u,o._exit=s,o}function sS(){return new Ut(this._exit||this._groups.map(_y),this._parents)}function lS(e,t,n){var r=this.enter(),i=this,a=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function cS(e){if(!(e instanceof Ut))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new Ut(o,this._parents)}function fS(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function hS(e){e||(e=dS);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],u=o.length,s=i[a]=new Array(u),l,c=0;c<u;++c)(l=o[c])&&(s[c]=l);s.sort(t)}return new Ut(i,this._parents).order()}function dS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mS(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pS(){return Array.from(this)}function bS(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function gS(){let e=0;for(const t of this)++e;return e}function yS(){return!this.node()}function wS(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,u;a<o;++a)(u=i[a])&&e.call(u,u.__data__,a,i);return this}function vS(e){return function(){this.removeAttribute(e)}}function _S(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xS(e,t){return function(){this.setAttribute(e,t)}}function MS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function PS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function AS(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function SS(e,t){var n=gs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?_S:vS:typeof t=="function"?n.local?AS:PS:n.local?MS:xS)(n,t))}function xy(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ES(e){return function(){this.style.removeProperty(e)}}function CS(e,t,n){return function(){this.style.setProperty(e,t,n)}}function kS(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function TS(e,t,n){return arguments.length>1?this.each((t==null?ES:typeof t=="function"?kS:CS)(e,t,n??"")):pi(this.node(),e)}function pi(e,t){return e.style.getPropertyValue(t)||xy(e).getComputedStyle(e,null).getPropertyValue(t)}function $S(e){return function(){delete this[e]}}function DS(e,t){return function(){this[e]=t}}function NS(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function FS(e,t){return arguments.length>1?this.each((t==null?$S:typeof t=="function"?NS:DS)(e,t)):this.node()[e]}function My(e){return e.trim().split(/^|\s+/)}function Lf(e){return e.classList||new Py(e)}function Py(e){this._node=e,this._names=My(e.getAttribute("class")||"")}Py.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ay(e,t){for(var n=Lf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Sy(e,t){for(var n=Lf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function BS(e){return function(){Ay(this,e)}}function LS(e){return function(){Sy(this,e)}}function RS(e,t){return function(){(t.apply(this,arguments)?Ay:Sy)(this,e)}}function IS(e,t){var n=My(e+"");if(arguments.length<2){for(var r=Lf(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?RS:t?BS:LS)(n,t))}function OS(){this.textContent=""}function qS(e){return function(){this.textContent=e}}function GS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function US(e){return arguments.length?this.each(e==null?OS:(typeof e=="function"?GS:qS)(e)):this.node().textContent}function zS(){this.innerHTML=""}function HS(e){return function(){this.innerHTML=e}}function WS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function VS(e){return arguments.length?this.each(e==null?zS:(typeof e=="function"?WS:HS)(e)):this.node().innerHTML}function jS(){this.nextSibling&&this.parentNode.appendChild(this)}function YS(){return this.each(jS)}function XS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ZS(){return this.each(XS)}function KS(e){var t=typeof e=="function"?e:by(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function QS(){return null}function JS(e,t){var n=typeof e=="function"?e:by(e),r=t==null?QS:typeof t=="function"?t:Bf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function eE(){var e=this.parentNode;e&&e.removeChild(this)}function tE(){return this.each(eE)}function nE(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rE(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function iE(e){return this.select(e?rE:nE)}function aE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function oE(e){return function(t){e.call(this,t,this.__data__)}}function uE(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function sE(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function lE(e,t,n){return function(){var r=this.__on,i,a=oE(t);if(r){for(var o=0,u=r.length;o<u;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function cE(e,t,n){var r=uE(e+""),i,a=r.length,o;if(arguments.length<2){var u=this.node().__on;if(u){for(var s=0,l=u.length,c;s<l;++s)for(i=0,c=u[s];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(u=t?lE:sE,i=0;i<a;++i)this.each(u(r[i],t,n));return this}function Ey(e,t,n){var r=xy(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function fE(e,t){return function(){return Ey(this,e,t)}}function hE(e,t){return function(){return Ey(this,e,t.apply(this,arguments))}}function dE(e,t){return this.each((typeof t=="function"?hE:fE)(e,t))}function*mE(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var pE=[null];function Ut(e,t){this._groups=e,this._parents=t}function Xa(){return new Ut([[document.documentElement]],pE)}function bE(){return this}Ut.prototype=Xa.prototype={constructor:Ut,select:zA,selectAll:VA,selectChild:ZA,selectChildren:eS,filter:tS,data:uS,enter:nS,exit:sS,join:lS,merge:cS,selection:bE,order:fS,sort:hS,call:mS,nodes:pS,node:bS,size:gS,empty:yS,each:wS,attr:SS,style:TS,property:FS,classed:IS,text:US,html:VS,raise:YS,lower:ZS,append:KS,insert:JS,remove:tE,clone:iE,datum:aE,on:cE,dispatch:dE,[Symbol.iterator]:mE};function Rf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Cy(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Za(){}var ga=.7,xu=1/ga,Kr="\\s*([+-]?\\d+)\\s*",ya="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",mn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gE=/^#([0-9a-f]{3,8})$/,yE=new RegExp("^rgb\\("+[Kr,Kr,Kr]+"\\)$"),wE=new RegExp("^rgb\\("+[mn,mn,mn]+"\\)$"),vE=new RegExp("^rgba\\("+[Kr,Kr,Kr,ya]+"\\)$"),_E=new RegExp("^rgba\\("+[mn,mn,mn,ya]+"\\)$"),xE=new RegExp("^hsl\\("+[ya,mn,mn]+"\\)$"),ME=new RegExp("^hsla\\("+[ya,mn,mn,ya]+"\\)$"),s0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rf(Za,wa,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:l0,formatHex:l0,formatHsl:PE,formatRgb:c0,toString:c0});function l0(){return this.rgb().formatHex()}function PE(){return ky(this).formatHsl()}function c0(){return this.rgb().formatRgb()}function wa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?f0(t):n===3?new At(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?wo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?wo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=yE.exec(e))?new At(t[1],t[2],t[3],1):(t=wE.exec(e))?new At(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vE.exec(e))?wo(t[1],t[2],t[3],t[4]):(t=_E.exec(e))?wo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xE.exec(e))?m0(t[1],t[2]/100,t[3]/100,1):(t=ME.exec(e))?m0(t[1],t[2]/100,t[3]/100,t[4]):s0.hasOwnProperty(e)?f0(s0[e]):e==="transparent"?new At(NaN,NaN,NaN,0):null}function f0(e){return new At(e>>16&255,e>>8&255,e&255,1)}function wo(e,t,n,r){return r<=0&&(e=t=n=NaN),new At(e,t,n,r)}function AE(e){return e instanceof Za||(e=wa(e)),e?(e=e.rgb(),new At(e.r,e.g,e.b,e.opacity)):new At}function lc(e,t,n,r){return arguments.length===1?AE(e):new At(e,t,n,r??1)}function At(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Rf(At,lc,Cy(Za,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ga:Math.pow(ga,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h0,formatHex:h0,formatRgb:d0,toString:d0}));function h0(){return"#"+ul(this.r)+ul(this.g)+ul(this.b)}function d0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function ul(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function m0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new un(e,t,n,r)}function ky(e){if(e instanceof un)return new un(e.h,e.s,e.l,e.opacity);if(e instanceof Za||(e=wa(e)),!e)return new un;if(e instanceof un)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(t===a?o=(n-r)/u+(n<r)*6:n===a?o=(r-t)/u+2:o=(t-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new un(o,u,s,e.opacity)}function Ty(e,t,n,r){return arguments.length===1?ky(e):new un(e,t,n,r??1)}function un(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Rf(un,Ty,Cy(Za,{brighter:function(e){return e=e==null?xu:Math.pow(xu,e),new un(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ga:Math.pow(ga,e),new un(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new At(sl(e>=240?e-240:e+120,i,r),sl(e,i,r),sl(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function sl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const $y=e=>()=>e;function SE(e,t){return function(n){return e+n*t}}function EE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function CE(e){return(e=+e)==1?Dy:function(t,n){return n-t?EE(t,n,e):$y(isNaN(t)?n:t)}}function Dy(e,t){var n=t-e;return n?SE(e,n):$y(isNaN(e)?t:e)}const cc=function e(t){var n=CE(t);function r(i,a){var o=n((i=lc(i)).r,(a=lc(a)).r),u=n(i.g,a.g),s=n(i.b,a.b),l=Dy(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=u(c),i.b=s(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Vn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var fc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ll=new RegExp(fc.source,"g");function kE(e){return function(){return e}}function TE(e){return function(t){return e(t)+""}}function $E(e,t){var n=fc.lastIndex=ll.lastIndex=0,r,i,a,o=-1,u=[],s=[];for(e=e+"",t=t+"";(r=fc.exec(e))&&(i=ll.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(r=r[0])===(i=i[0])?u[o]?u[o]+=i:u[++o]=i:(u[++o]=null,s.push({i:o,x:Vn(r,i)})),n=ll.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?s[0]?TE(s[0].x):kE(t):(t=s.length,function(l){for(var c=0,f;c<t;++c)u[(f=s[c]).i]=f.x(l);return u.join("")})}var p0=180/Math.PI,hc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ny(e,t,n,r,i,a){var o,u,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*r)&&(n-=e*s,r-=t*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),e*r<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*p0,skewX:Math.atan(s)*p0,scaleX:o,scaleY:u}}var vo;function DE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?hc:Ny(t.a,t.b,t.c,t.d,t.e,t.f)}function NE(e){return e==null||(vo||(vo=document.createElementNS("http://www.w3.org/2000/svg","g")),vo.setAttribute("transform",e),!(e=vo.transform.baseVal.consolidate()))?hc:(e=e.matrix,Ny(e.a,e.b,e.c,e.d,e.e,e.f))}function Fy(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function a(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push("translate(",null,t,null,n);m.push({i:p-4,x:Vn(l,f)},{i:p-2,x:Vn(c,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Vn(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function u(l,c,f,h){l!==c?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Vn(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function s(l,c,f,h,d,m){if(l!==f||c!==h){var p=d.push(i(d)+"scale(",null,",",null,")");m.push({i:p-4,x:Vn(l,f)},{i:p-2,x:Vn(c,h)})}else(f!==1||h!==1)&&d.push(i(d)+"scale("+f+","+h+")")}return function(l,c){var f=[],h=[];return l=e(l),c=e(c),a(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),u(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(d){for(var m=-1,p=h.length,y;++m<p;)f[(y=h[m]).i]=y.x(d);return f.join("")}}}var FE=Fy(DE,"px, ","px)","deg)"),BE=Fy(NE,", ",")",")"),bi=0,zi=0,Ni=0,By=1e3,Mu,Hi,Pu=0,Cr=0,ys=0,va=typeof performance=="object"&&performance.now?performance:Date,Ly=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function If(){return Cr||(Ly(LE),Cr=va.now()+ys)}function LE(){Cr=0}function Au(){this._call=this._time=this._next=null}Au.prototype=Ry.prototype={constructor:Au,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?If():+n)+(t==null?0:+t),!this._next&&Hi!==this&&(Hi?Hi._next=this:Mu=this,Hi=this),this._call=e,this._time=n,dc()},stop:function(){this._call&&(this._call=null,this._time=1/0,dc())}};function Ry(e,t,n){var r=new Au;return r.restart(e,t,n),r}function RE(){If(),++bi;for(var e=Mu,t;e;)(t=Cr-e._time)>=0&&e._call.call(null,t),e=e._next;--bi}function b0(){Cr=(Pu=va.now())+ys,bi=zi=0;try{RE()}finally{bi=0,OE(),Cr=0}}function IE(){var e=va.now(),t=e-Pu;t>By&&(ys-=t,Pu=e)}function OE(){for(var e,t=Mu,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Mu=n);Hi=e,dc(r)}function dc(e){if(!bi){zi&&(zi=clearTimeout(zi));var t=e-Cr;t>24?(e<1/0&&(zi=setTimeout(b0,e-va.now()-ys)),Ni&&(Ni=clearInterval(Ni))):(Ni||(Pu=va.now(),Ni=setInterval(IE,By)),bi=1,Ly(b0))}}function g0(e,t,n){var r=new Au;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var qE=py("start","end","cancel","interrupt"),GE=[],Iy=0,y0=1,mc=2,Do=3,w0=4,pc=5,No=6;function ws(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;UE(e,n,{name:t,index:r,group:i,on:qE,tween:GE,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Iy})}function Of(e,t){var n=tn(e,t);if(n.state>Iy)throw new Error("too late; already scheduled");return n}function vn(e,t){var n=tn(e,t);if(n.state>Do)throw new Error("too late; already running");return n}function tn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function UE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ry(a,0,n.time);function a(l){n.state=y0,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,h,d;if(n.state!==y0)return s();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Do)return g0(o);d.state===w0?(d.state=No,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete r[c]):+c<t&&(d.state=No,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete r[c])}if(g0(function(){n.state===Do&&(n.state=w0,n.timer.restart(u,n.delay,n.time),u(l))}),n.state=mc,n.on.call("start",e,e.__data__,n.index,n.group),n.state===mc){for(n.state=Do,i=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(d=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=d);i.length=f+1}}function u(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(s),n.state=pc,1),f=-1,h=i.length;++f<h;)i[f].call(e,c);n.state===pc&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){n.state=No,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function zE(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>mc&&r.state<pc,r.state=No,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function HE(e){return this.each(function(){zE(this,e)})}function WE(e,t){var n,r;return function(){var i=vn(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,u=r.length;o<u;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function VE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=vn(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},s=0,l=i.length;s<l;++s)if(i[s].name===t){i[s]=u;break}s===l&&i.push(u)}a.tween=i}}function jE(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=tn(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?WE:VE)(n,e,t))}function qf(e,t,n){var r=e._id;return e.each(function(){var i=vn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return tn(i,r).value[t]}}function Oy(e,t){var n;return(typeof t=="number"?Vn:t instanceof wa?cc:(n=wa(t))?(t=n,cc):$E)(e,t)}function YE(e){return function(){this.removeAttribute(e)}}function XE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ZE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function KE(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function QE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttribute(e):(o=this.getAttribute(e),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function JE(e,t,n){var r,i,a;return function(){var o,u=n(this),s;return u==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),s=u+"",o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u)))}}function eC(e,t){var n=gs(e),r=n==="transform"?BE:Oy;return this.attrTween(e,typeof t=="function"?(n.local?JE:QE)(n,r,qf(this,"attr."+e,t)):t==null?(n.local?XE:YE)(n):(n.local?KE:ZE)(n,r,t))}function tC(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function nC(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function rC(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&nC(e,a)),n}return i._value=t,i}function iC(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&tC(e,a)),n}return i._value=t,i}function aC(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=gs(e);return this.tween(n,(r.local?rC:iC)(r,t))}function oC(e,t){return function(){Of(this,e).delay=+t.apply(this,arguments)}}function uC(e,t){return t=+t,function(){Of(this,e).delay=t}}function sC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?oC:uC)(t,e)):tn(this.node(),t).delay}function lC(e,t){return function(){vn(this,e).duration=+t.apply(this,arguments)}}function cC(e,t){return t=+t,function(){vn(this,e).duration=t}}function fC(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lC:cC)(t,e)):tn(this.node(),t).duration}function hC(e,t){if(typeof t!="function")throw new Error;return function(){vn(this,e).ease=t}}function dC(e){var t=this._id;return arguments.length?this.each(hC(t,e)):tn(this.node(),t).ease}function mC(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;vn(this,e).ease=n}}function pC(e){if(typeof e!="function")throw new Error;return this.each(mC(this._id,e))}function bC(e){typeof e!="function"&&(e=wy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,u=r[i]=[],s,l=0;l<o;++l)(s=a[l])&&e.call(s,s.__data__,l,a)&&u.push(s);return new In(r,this._parents,this._name,this._id)}function gC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var s=t[u],l=n[u],c=s.length,f=o[u]=new Array(c),h,d=0;d<c;++d)(h=s[d]||l[d])&&(f[d]=h);for(;u<r;++u)o[u]=t[u];return new In(o,this._parents,this._name,this._id)}function yC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function wC(e,t,n){var r,i,a=yC(t)?Of:vn;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}function vC(e,t){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(e):this.each(wC(n,e,t))}function _C(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function xC(){return this.on("end.remove",_C(this._id))}function MC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Bf(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u=r[o],s=u.length,l=a[o]=new Array(s),c,f,h=0;h<s;++h)(c=u[h])&&(f=e.call(c,c.__data__,h,u))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f,ws(l[h],t,n,h,l,tn(c,n)));return new In(a,this._parents,t,n)}function PC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=yy(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var s=r[u],l=s.length,c,f=0;f<l;++f)if(c=s[f]){for(var h=e.call(c,c.__data__,f,s),d,m=tn(c,n),p=0,y=h.length;p<y;++p)(d=h[p])&&ws(d,t,n,p,h,m);a.push(h),o.push(c)}return new In(a,o,t,n)}var AC=Xa.prototype.constructor;function SC(){return new AC(this._groups,this._parents)}function EC(e,t){var n,r,i;return function(){var a=pi(this,e),o=(this.style.removeProperty(e),pi(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function qy(e){return function(){this.style.removeProperty(e)}}function CC(e,t,n){var r,i=n+"",a;return function(){var o=pi(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function kC(e,t,n){var r,i,a;return function(){var o=pi(this,e),u=n(this),s=u+"";return u==null&&(s=u=(this.style.removeProperty(e),pi(this,e))),o===s?null:o===r&&s===i?a:(i=s,a=t(r=o,u))}}function TC(e,t){var n,r,i,a="style."+t,o="end."+a,u;return function(){var s=vn(this,e),l=s.on,c=s.value[a]==null?u||(u=qy(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),s.on=r}}function $C(e,t,n){var r=(e+="")=="transform"?FE:Oy;return t==null?this.styleTween(e,EC(e,r)).on("end.style."+e,qy(e)):typeof t=="function"?this.styleTween(e,kC(e,r,qf(this,"style."+e,t))).each(TC(this._id,e)):this.styleTween(e,CC(e,r,t),n).on("end.style."+e,null)}function DC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function NC(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&DC(e,o,n)),r}return a._value=t,a}function FC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,NC(e,t,n??""))}function BC(e){return function(){this.textContent=e}}function LC(e){return function(){var t=e(this);this.textContent=t??""}}function RC(e){return this.tween("text",typeof e=="function"?LC(qf(this,"text",e)):BC(e==null?"":e+""))}function IC(e){return function(t){this.textContent=e.call(this,t)}}function OC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&IC(i)),t}return r._value=e,r}function qC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,OC(e))}function GC(){for(var e=this._name,t=this._id,n=Gy(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)if(s=o[l]){var c=tn(s,t);ws(s,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new In(r,this._parents,e,n)}function UC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var u={value:o},s={value:function(){--i===0&&a()}};n.each(function(){var l=vn(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(s)),l.on=t}),i===0&&a()})}var zC=0;function In(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Gy(){return++zC}var sr=Xa.prototype;In.prototype={constructor:In,select:MC,selectAll:PC,filter:bC,merge:gC,selection:SC,transition:GC,call:sr.call,nodes:sr.nodes,node:sr.node,size:sr.size,empty:sr.empty,each:sr.each,on:vC,attr:eC,attrTween:aC,style:$C,styleTween:FC,text:RC,textTween:qC,remove:xC,tween:jE,delay:sC,duration:fC,ease:dC,easeVarying:pC,end:UC,[Symbol.iterator]:sr[Symbol.iterator]};function HC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var WC={time:null,delay:0,duration:250,ease:HC};function VC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function jC(e){var t,n;e instanceof In?(t=e._id,e=e._name):(t=Gy(),(n=WC).time=If(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],u=o.length,s,l=0;l<u;++l)(s=o[l])&&ws(s,e,t,l,o,n||VC(s,t));return new In(r,this._parents,e,t)}Xa.prototype.interrupt=HE;Xa.prototype.transition=jC;function Wi(e,t,n){this.k=e,this.x=t,this.y=n}Wi.prototype={constructor:Wi,scale:function(e){return e===1?this:new Wi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Wi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Wi.prototype;var YC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!a.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let o,u="",s,l,c=0;for(;c<r.length;)o=i.indexOf(r.charAt(c++))<<18|i.indexOf(r.charAt(c++))<<12|(s=i.indexOf(r.charAt(c++)))<<6|(l=i.indexOf(r.charAt(c++))),u+=s===64?String.fromCharCode(o>>16&255):l===64?String.fromCharCode(o>>16&255,o>>8&255):String.fromCharCode(o>>16&255,o>>8&255,o&255);return u},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(a){if(!a.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let o=new FileReader;o.readAsArrayBuffer(a.target.files[0]),o.onload=function(u){i(n.Uint8(new Uint8Array(u.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),a=i.length,o=new Uint8Array(new ArrayBuffer(a));for(let u=0;u<a;u++)o[u]=i.charCodeAt(u);return n.Uint8(o)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(s){return this.pointer+=s,this.pointer},readInt:function(s){if(s=Math.min(s,this.data.byteLength-this.pointer),s<1)return-1;let l=0;if(s>1)for(let c=1;c<=s-1;c++)l+=this.data.getUint8(this.pointer)*Math.pow(256,s-c),this.pointer++;return l+=this.data.getUint8(this.pointer),this.pointer++,l},readStr:function(s){let l="";for(let c=1;c<=s;c++)l+=String.fromCharCode(this.readInt(1));return l},readIntVLV:function(){let s=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)s=this.readInt(1);else{let l=[];for(;this.data.getUint8(this.pointer)>=128;)l.push(this.readInt(1)-128);let c=this.readInt(1);for(let f=1;f<=l.length;f++)s+=l[l.length-f]*Math.pow(128,f);s+=c}return s}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let a={};a.formatType=i.readInt(2),a.tracks=i.readInt(2),a.track=[];let o=i.readInt(1),u=i.readInt(1);o>=128?(a.timeDivision=[],a.timeDivision[0]=o-128,a.timeDivision[1]=u):a.timeDivision=o*256+u;for(let s=1;s<=a.tracks;s++){a.track[s-1]={event:[]};let l=i.readInt(4);if(l===-1)break;if(l!==1297379947)return!1;i.readInt(4);let c=0,f=!1,h,d;for(;!f&&(c++,a.track[s-1].event[c-1]={},a.track[s-1].event[c-1].deltaTime=i.readIntVLV(),h=i.readInt(1),h!==-1);)if(h>=128?d=h:(h=d,i.movePointer(-1)),h===255){a.track[s-1].event[c-1].type=255,a.track[s-1].event[c-1].metaType=i.readInt(1);let m=i.readIntVLV();switch(a.track[s-1].event[c-1].metaType){case 47:case-1:f=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:a.track[s-1].event[c-1].data=i.readStr(m);break;case 33:case 89:case 81:a.track[s-1].event[c-1].data=i.readInt(m);break;case 84:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1),a.track[s-1].event[c-1].data[4]=i.readInt(1);break;case 88:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1),a.track[s-1].event[c-1].data[2]=i.readInt(1),a.track[s-1].event[c-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,m)),(this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)&&(i.readInt(m),a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(h=h.toString(16).split(""),h[1]||h.unshift("0"),a.track[s-1].event[c-1].type=parseInt(h[0],16),a.track[s-1].event[c-1].channel=parseInt(h[1],16),a.track[s-1].event[c-1].type){case 15:{if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].type,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1){let m=i.readIntVLV();a.track[s-1].event[c-1].data=i.readInt(m),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:a.track[s-1].event[c-1].data=[],a.track[s-1].event[c-1].data[0]=i.readInt(1),a.track[s-1].event[c-1].data[1]=i.readInt(1);break;case 12:case 13:a.track[s-1].event[c-1].data=i.readInt(1);break;case-1:f=!0;break;default:if(this.customInterpreter!==null&&(a.track[s-1].event[c-1].data=this.customInterpreter(a.track[s-1].event[c-1].metaType,i,!1)),this.customInterpreter===null||a.track[s-1].event[c-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return a},customInterpreter:null};e.exports=n})()})(YC);function Uy(e){return 1/(e/60)}const zy=[],XC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of XC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;zy.push({type:e,dots:t,duration:n})}zy.sort((e,t)=>e.duration-t.duration);class ce{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>my(r).pitch),this.stringCount=n.length}}new ce("E stand.",["E2","A2","D3","G3","B3","E4"]),new ce("Drop D",["D2","A2","D3","G3","B3","E4"]),new ce("Drop C",["C2","G2","C3","F3","A3","D4"]),new ce("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["C2","F2","A#2","D#3","G3","C4"]),new ce("DADGAG",["D2","A2","D3","G3","A3","D4"]),new ce("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new ce("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new ce("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new ce("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new ce("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new ce("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ce("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new ce("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ce("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new ce("E stand.",["E1","A1","D2","G2"]),new ce("Drop D",["D1","A1","D2","G2"]),new ce("1/2 down",["D#1","G#1","C#2","F#2"]),new ce("1 down",["D1","G1","C2","F2"]),new ce("1 1/2 down",["C#1","F#1","B1","E2"]),new ce("2 down",["C1","F1","A#1","D#2"]),new ce("B stand.",["B0","E1","A1","D2","G2"]),new ce("Drop A",["A0","D1","A1","D2","G2"]),new ce("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new ce("1 down",["A0","D1","G1","C2","F2"]),new ce("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new ce("2 down",["G0","C1","F1","A#1","D#2"]),new ce("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new ce("Drop E",["E0","A0","D1","A1","D2","G2"]),new ce("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new ce("1 down",["E1","A0","D1","G1","C2","F2"]),new ce("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new ce("2 down",["D0","G0","C1","F1","A#1","D#2"]),new ce("Hawaii",["G4","C4","E4","A4"]),new ce("Low G",["G3","C4","E4","A4"]),new ce("D-tuning",["A4","D4","F#4","B4"]),new ce("Canadian",["A3","D4","F#4","B4"]),new ce("Bariton",["D3","G3","B3","E4"]);function Hy(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Wy(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Vy=[0,2,4,-1,1,3,5],jy=Vy.map(e=>Math.floor(e*7/12));function Yy(e){const{step:t,alt:n,oct:r,dir:i=1}=e,a=Vy[t]+7*n;if(r===void 0)return[i*a];const o=r-jy[t]-4*n;return[i*a,i*o]}var ZC=[3,0,4,1,5,2,6];function KC(e){const[t,n,r]=e,i=ZC[QC(t)],a=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:a,dir:r};const o=n+4*a+jy[i];return{step:i,alt:a,oct:o,dir:r}}function QC(e){const t=(e+1)%7;return t<0?7+t:t}var v0=(e,t)=>Array(Math.abs(t)+1).join(e),bc=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),JC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",ek="(AA|A|P|M|m|d|dd)([-+]?\\d+)",tk=new RegExp("^"+JC+"|"+ek+"$");function nk(e){const t=tk.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var _0={};function Su(e){return typeof e=="string"?_0[e]||(_0[e]=rk(e)):Wy(e)?Su(ak(e)):Hy(e)?Su(e.name):bc}var x0=[0,2,4,5,7,9,11],Xy="PMMPPMM";function rk(e){const t=nk(e);if(t[0]==="")return bc;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,a=Xy[i];if(a==="M"&&r==="P")return bc;const o=a==="M"?"majorable":"perfectable",u=""+n+r,s=n<0?-1:1,l=n===8||n===-8?n:s*(i+1),c=ik(o,r),f=Math.floor((Math.abs(n)-1)/7),h=s*(x0[i]+c+12*f),d=(s*(x0[i]+c)%12+12)%12,m=Yy({step:i,alt:c,oct:f,dir:s});return{empty:!1,name:u,num:n,q:r,step:i,alt:c,dir:s,type:o,simple:l,semitones:h,chroma:d,coord:m,oct:f}}function ik(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function ak(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const a=t+1+7*r,o=a===0?t+1:a,u=i<0?"-":"",s=Xy[t]==="M"?"majorable":"perfectable";return u+o+ok(s,n)}function ok(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?v0("A",t):v0("d",e==="perfectable"?t:t+1)}var M0=(e,t)=>Array(Math.abs(t)+1).join(e),Zy=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),P0=new Map,uk=e=>"CDEFGAB".charAt(e),sk=e=>e<0?M0("b",-e):M0("#",e),lk=e=>e[0]==="b"?-e.length:e.length;function _a(e){const t=JSON.stringify(e),n=P0.get(t);if(n)return n;const r=typeof e=="string"?mk(e):Wy(e)?_a(pk(e)):Hy(e)?_a(e.name):Zy;return P0.set(t,r),r}var ck=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function fk(e){const t=ck.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function hk(e){return _a(KC(e))}var dk=(e,t)=>(e%t+t)%t,cl=[0,2,4,5,7,9,11];function mk(e){const t=fk(e);if(t[0]===""||t[3]!=="")return Zy;const n=t[0],r=t[1],i=t[2],a=(n.charCodeAt(0)+3)%7,o=lk(r),u=i.length?+i:void 0,s=Yy({step:a,alt:o,oct:u}),l=n+r+i,c=n+r,f=(cl[a]+o+120)%12,h=u===void 0?dk(cl[a]+o,12)-12*99:cl[a]+o+12*(u+1),d=h>=0&&h<=127?h:null,m=u===void 0?null:Math.pow(2,(h-69)/12)*440;return{empty:!1,acc:r,alt:o,chroma:f,coord:s,freq:m,height:h,letter:n,midi:d,name:l,oct:u,pc:c,step:a}}function pk(e){const{step:t,alt:n,oct:r}=e,i=uk(t);if(!i)return"";const a=i+sk(n);return r||r===0?a+r:a}function bk(e,t){const n=_a(e),r=Array.isArray(t)?t:Su(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,a=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return hk(a).name}function Ky(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var tr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Qy=e=>Number(e).toString(2).padStart(12,"0"),A0=e=>parseInt(e,2),gk=/^[01]{12}$/;function Jy(e){return gk.test(e)}var yk=e=>typeof e=="number"&&e>=0&&e<=4095,wk=e=>e&&Jy(e.chroma),S0={[tr.chroma]:tr};function Gf(e){const t=Jy(e)?e:yk(e)?Qy(e):Array.isArray(e)?Pk(e):wk(e)?e.chroma:tr.chroma;return S0[t]=S0[t]||Mk(t)}var vk=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function _k(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(vk[n]);return t}function xk(e){const t=e.split("");return t.map((n,r)=>Ky(r,t).join(""))}function Mk(e){const t=A0(e),n=xk(e).map(A0).filter(a=>a>=2048).sort()[0],r=Qy(n),i=_k(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function Pk(e){if(e.length===0)return tr.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=_a(e[r]),t.empty&&(t=Su(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var Ak=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],Sk=Ak;({...tr});var ew=[],Fo={};function Ek(e,t,n){const r=kk(e),i={...Gf(e),name:n||"",quality:r,intervals:e,aliases:t};ew.push(i),i.name&&(Fo[i.name]=i),Fo[i.setNum]=i,Fo[i.chroma]=i,i.aliases.forEach(a=>Ck(i,a))}function Ck(e,t){Fo[t]=e}function kk(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}Sk.forEach(([e,t,n])=>Ek(e.split(" "),n.split(" "),t));ew.sort((e,t)=>e.setNum-t.setNum);var Tk=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],$k=Tk;({...tr});var tw=[],Bo={};function Dk(e,t,n){const r=Fk(e),i={...Gf(e),name:n||"",quality:r,intervals:e,aliases:t};tw.push(i),i.name&&(Bo[i.name]=i),Bo[i.setNum]=i,Bo[i.chroma]=i,i.aliases.forEach(a=>Nk(i,a))}function Nk(e,t){Bo[t]=e}function Fk(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}$k.forEach(([e,t,n])=>Dk(e.split(" "),n.split(" "),t));tw.sort((e,t)=>e.setNum-t.setNum);var Bk=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Lk=Bk,Rk={...tr,intervals:[],aliases:[]},Qi={};function Ik(e){return Qi[e]||Rk}function Ok(e,t,n=[]){const r={...Gf(e),name:t,intervals:e,aliases:n};return Qi[r.name]=r,Qi[r.setNum]=r,Qi[r.chroma]=r,r.aliases.forEach(i=>qk(r,i)),r}function qk(e,t){Qi[t]=e}Lk.forEach(([e,t,...n])=>Ok(e.split(" "),t,n));var Uf=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],E0={...tr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Gk=Uf.map(Uk),gc={};Gk.forEach(e=>{gc[e.name]=e,e.aliases.forEach(t=>{gc[t]=e})});function nw(e){return typeof e=="string"?gc[e.toLowerCase()]||E0:e&&e.name?nw(e.name):E0}function Uk(e){const[t,n,r,i,a,o,u]=e,s=u?[u]:[],l=Number(n).toString(2);return{empty:!1,intervals:Ik(i).intervals,modeNum:t,chroma:l,normalized:l,name:i,setNum:n,alt:r,triad:a,seventh:o,aliases:s}}function rw(e){return(t,n)=>{const r=nw(t);if(r.empty)return[];const i=Ky(r.modeNum,e),a=r.intervals.map(o=>bk(n,o));return i.map((o,u)=>a[u]+o)}}rw(Uf.map(e=>e[4]));rw(Uf.map(e=>e[5]));class Un{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>my(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;n.set(i,{number:a,numberString:`${a}${o}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let a=r+1,o="",u=i-12;for(;u>0&&n.has(u);)a=n.get(u).number,o+="",u-=12;const s=NA(i).name;n.set(i,{number:a,letterString:`${s}${o}`})}return[...n.values()].map(r=>r.letterString)}}new Un("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Un("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Un("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Un("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Un("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Un("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Un("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Un("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function zk(e,t=1){const n=Ty(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>zk(e,.5));const Hk=cc("black","steelblue");Array.from({length:12}).map((e,t)=>Hk(t/11));function Wk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function Vk(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=dt({width:i,height:a,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1,domain:["hihat","snare","bass"]},marks:[bs(r,{x:"time",y:"instr"})]});n(2,o.textContent="",o),o.appendChild(s)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class jk extends Ge{constructor(t){super(),qe(this,t,Vk,Wk,Oe,{pattern:3,width:0,height:1})}}function Yk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function Xk(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=kn(r,c=>c.instr).map(([c,f])=>f.map((h,d)=>({index:d,instr:c,time:d===0?0:h.time-f[d-1].time}))).flat(),l=dt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},fy:{label:null,domain:["hihat","snare","bass"]},marks:[uy(s,{x:"index",y:"time",fy:"instr"})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Zk extends Ge{constructor(t){super(),qe(this,t,Xk,Yk,Oe,{pattern:3,width:0,height:1})}}function Kk(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[4](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[4](null)}}}function Qk(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:a=100}=t,o;_t(()=>{const s=kn(r,c=>c.instr).map(([c,f])=>f.map((h,d)=>({index:d,instr:c,time:d===0?0:h.time-f[d-1].time}))).flat(),l=dt({width:i,height:a,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},fy:{label:null,domain:["hihat","snare","bass"]},marks:[sy(s,{x:"index",fill:"time",fy:"instr"})]});n(2,o.textContent="",o),o.appendChild(l)});function u(s){We[s?"unshift":"push"](()=>{o=s,n(2,o)})}return e.$$set=s=>{"pattern"in s&&n(3,r=s.pattern),"width"in s&&n(0,i=s.width),"height"in s&&n(1,a=s.height)},[i,a,o,r,u]}class Jk extends Ge{constructor(t){super(),qe(this,t,Qk,Kk,Oe,{pattern:3,width:0,height:1})}}function eT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px"),Ce(t,"width",e[0]+"px"),Ce(t,"margin","auto")},m(a,o){Z(a,t,o),A(t,n),e[5](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i),o&1&&Ce(t,"width",a[0]+"px")},i:de,o:de,d(a){a&&X(t),e[5](null)}}}function tT(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:a=800}=t,{height:o=50}=t,u;const s=c=>dt({width:a,height:o,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[cy(c.audio,{x:(f,h)=>h/i,y:f=>f})]});_t(()=>{if(n(2,u.textContent="",u),!!r)for(const c of r){const f=s(c);u.appendChild(f)}});function l(c){We[c?"unshift":"push"](()=>{u=c,n(2,u)})}return e.$$set=c=>{"audioData"in c&&n(3,r=c.audioData),"sampleRate"in c&&n(4,i=c.sampleRate),"width"in c&&n(0,a=c.width),"height"in c&&n(1,o=c.height)},[a,o,u,r,i,l]}class nT extends Ge{constructor(t){super(),qe(this,t,tT,eT,Oe,{audioData:3,sampleRate:4,width:0,height:1})}}function rT(e,t,n){const r=e.slice();return r[16]=t[n],r}function iT(e){let t;return{c(){t=k("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],at(t,t.__value)},m(n,r){Z(n,t,r)},p:de,d(n){n&&X(t)}}}function aT(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,y,w,g,v,b,_,x,M,S,E,$,P,T,I,B,C,O,ie,te,J,z=Pt(["single note","single beat","only snare"]),H=[];for(let D=0;D<3;D+=1)H[D]=iT(rT(e,z,D));return m=new fy({props:{audioData:e[2],sampleRate:e[4]}}),y=new To({props:{audioData:e[2],width:zn,height:Hn}}),g=new nT({props:{audioData:e[3],width:zn,height:Hn/3}}),b=new _A({props:{pattern:e[5],width:zn,height:Hn}}),x=new jk({props:{pattern:e[6],width:zn,height:Hn}}),S=new PA({props:{pattern:e[5],width:zn,height:Hn}}),$=new Zk({props:{pattern:e[6],width:zn,height:Hn*2}}),T=new ko({props:{pattern:e[5],width:zn,height:Hn}}),B=new Jk({props:{pattern:e[6],width:zn,height:Hn}}),{c(){t=k("main"),n=k("h2"),n.textContent="Playground",r=q(),i=k("div"),a=k("label"),o=Se(`error mode:
      `),u=k("select");for(let D=0;D<3;D+=1)H[D].c();s=q(),l=k("label"),c=Se(`error severity (in seconds):
      `),f=k("input"),h=q(),d=k("div"),Pe(m.$$.fragment),p=q(),Pe(y.$$.fragment),w=q(),Pe(g.$$.fragment),v=q(),Pe(b.$$.fragment),_=q(),Pe(x.$$.fragment),M=q(),Pe(S.$$.fragment),E=q(),Pe($.$$.fragment),P=q(),Pe(T.$$.fragment),I=q(),Pe(B.$$.fragment),C=q(),O=k("div"),O.innerHTML="<div>early</div> <div>late</div>",e[0]===void 0&&ea(()=>e[7].call(u)),F(a,"class","svelte-1sot113"),F(f,"type","number"),F(f,"min","-0.5"),F(f,"max","0.5"),F(f,"step","0.01"),F(l,"class","svelte-1sot113"),F(d,"class","stimuli svelte-1sot113"),F(O,"class","examples")},m(D,G){Z(D,t,G),A(t,n),A(t,r),A(t,i),A(i,a),A(a,o),A(a,u);for(let ne=0;ne<3;ne+=1)H[ne]&&H[ne].m(u,null);Io(u,e[0],!0),A(i,s),A(i,l),A(l,c),A(l,f),at(f,e[1]),A(t,h),A(t,d),ve(m,d,null),A(d,p),ve(y,d,null),A(d,w),ve(g,d,null),A(d,v),ve(b,d,null),A(d,_),ve(x,d,null),A(d,M),ve(S,d,null),A(d,E),ve($,d,null),A(d,P),ve(T,d,null),A(d,I),ve(B,d,null),A(t,C),A(t,O),ie=!0,te||(J=[Qe(u,"change",e[7]),Qe(f,"input",e[8])],te=!0)},p(D,[G]){G&1&&Io(u,D[0]),G&2&&Qr(f.value)!==D[1]&&at(f,D[1]);const ne={};G&4&&(ne.audioData=D[2]),G&16&&(ne.sampleRate=D[4]),m.$set(ne);const ue={};G&4&&(ue.audioData=D[2]),y.$set(ue);const ae={};G&8&&(ae.audioData=D[3]),g.$set(ae);const V={};G&32&&(V.pattern=D[5]),b.$set(V);const j={};G&64&&(j.pattern=D[6]),x.$set(j);const L={};G&32&&(L.pattern=D[5]),S.$set(L);const W={};G&64&&(W.pattern=D[6]),$.$set(W);const Y={};G&32&&(Y.pattern=D[5]),T.$set(Y);const N={};G&64&&(N.pattern=D[6]),B.$set(N)},i(D){ie||(Q(m.$$.fragment,D),Q(y.$$.fragment,D),Q(g.$$.fragment,D),Q(b.$$.fragment,D),Q(x.$$.fragment,D),Q(S.$$.fragment,D),Q($.$$.fragment,D),Q(T.$$.fragment,D),Q(B.$$.fragment,D),ie=!0)},o(D){oe(m.$$.fragment,D),oe(y.$$.fragment,D),oe(g.$$.fragment,D),oe(b.$$.fragment,D),oe(x.$$.fragment,D),oe(S.$$.fragment,D),oe($.$$.fragment,D),oe(T.$$.fragment,D),oe(B.$$.fragment,D),ie=!1},d(D){D&&X(t),cr(H,D),_e(m),_e(y),_e(g),_e(b),_e(x),_e(S),_e($),_e(T),_e(B),te=!1,gn(J)}}}let zn=600,Hn=100,oT=120;const C0=4;function uT(e,t,n){let r="single note",i=0,a=Uy(oT),o=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const u=C0*a;let s=null,l=[],c,f=[],h=[];const d=async()=>{o=await Promise.all(o.map(async v=>({...v,times:v.beats.map(b=>a*(b-1)),timesOriginal:v.beats.map(b=>a*(b-1)),audioBuffer:await og(v.sample)})))},m=(v="single note",b=0)=>{if(b===0)return o;console.log(`Adding error ${v} ${b}`);const _=p([o]),x=_.filter(S=>S.instrument==="snare")[0],M=_.filter(S=>S.instrument==="hihat")[0];return v==="single note"?x.times[1]=x.timesOriginal[1]+b:v==="single beat"?(x.times[1]=x.timesOriginal[1]+b,M.times[6]=M.timesOriginal[6]+b):v==="only snare"&&(x.times[0]=x.timesOriginal[0]+b,x.times[1]=x.timesOriginal[1]+b),_},p=v=>{console.log(`concat ${v.length} patterns`);const b=v[0].map(_=>({..._,beats:[..._.beats],times:[..._.times],timesOriginal:[..._.timesOriginal]}));for(let _=1;_<v.length;_++){const x=v[_];for(const M of x){const S=b.filter(E=>E.instrument===M.instrument)[0];S.beats=[...S.beats,...M.beats.map(E=>E+_*C0)],S.times=[...S.times,...M.times.map(E=>E+_*u)],S.timesOriginal=[...S.timesOriginal,...M.timesOriginal.map(E=>E+_*u)]}}return b},y=async(v,b)=>{if(!o[0].audioBuffer)return;const x=[m(v,b)],M=p(x);n(5,f=M.map(S=>S.times).flat().sort()),n(6,h=M.map(S=>S.times.map(E=>({time:E,instr:S.instrument}))).flat(1/0).sort((S,E)=>{S.time-E.time})),n(4,c=M[0].audioBuffer.sampleRate),n(2,s=Zl(M,u*x.length+.1,c)),n(3,l=M.map(S=>{const E=Zl([S],u*x.length+.1,c);return{instr:S.instrument,audio:E}}))};xa(async()=>{await d(),y()});function w(){r=d1(this),n(0,r)}function g(){i=Qr(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&y(r,i)},[r,i,s,l,c,f,h,w,g]}class sT extends Ge{constructor(t){super(),qe(this,t,uT,aT,Oe,{})}}function lT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px")},m(a,o){Z(a,t,o),A(t,n),e[7](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i)},i:de,o:de,d(a){a&&X(t),e[7](null)}}}function cT(e,t,n){let{title:r=void 0}=t,{width:i=600}=t,{height:a=200}=t,{data:o}=t,{x:u="x"}=t,{y:s="y"}=t,l;_t(()=>{n(2,l.textContent="",l);const f=dt({title:r,width:i,height:a,x:{domain:[0,70]},marks:[pA(o,{x:u,y:s,stroke:"#ccc"}),Pf([0])]});l.appendChild(f)});function c(f){We[f?"unshift":"push"](()=>{l=f,n(2,l)})}return e.$$set=f=>{"title"in f&&n(3,r=f.title),"width"in f&&n(0,i=f.width),"height"in f&&n(1,a=f.height),"data"in f&&n(4,o=f.data),"x"in f&&n(5,u=f.x),"y"in f&&n(6,s=f.y)},[i,a,l,r,o,u,s,c]}class fT extends Ge{constructor(t){super(),qe(this,t,cT,lT,Oe,{title:3,width:0,height:1,data:4,x:5,y:6})}}var iw={exports:{}};(function(e,t){(function(n,r){r()})(Ft,function(){function n(l,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function r(l,c,f){var h=new XMLHttpRequest;h.open("GET",l),h.responseType="blob",h.onload=function(){s(h.response,c,f)},h.onerror=function(){console.error("could not download file")},h.send()}function i(l){var c=new XMLHttpRequest;c.open("HEAD",l,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function a(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ft=="object"&&Ft.global===Ft?Ft:void 0,u=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(l,c,f){var h=o.URL||o.webkitURL,d=document.createElement("a");c=c||l.name||"download",d.download=c,d.rel="noopener",typeof l=="string"?(d.href=l,d.origin===location.origin?a(d):i(d.href)?r(l,c,f):a(d,d.target="_blank")):(d.href=h.createObjectURL(l),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){a(d)},0))}:"msSaveOrOpenBlob"in navigator?function(l,c,f){if(c=c||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(n(l,f),c);else if(i(l))r(l,c,f);else{var h=document.createElement("a");h.href=l,h.target="_blank",setTimeout(function(){a(h)})}}:function(l,c,f,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof l=="string")return r(l,c,f);var d=l.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||d&&m||u)&&typeof FileReader<"u"){var y=new FileReader;y.onloadend=function(){var v=y.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},y.readAsDataURL(l)}else{var w=o.URL||o.webkitURL,g=w.createObjectURL(l);h?h.location=g:location.href=g,h=null,setTimeout(function(){w.revokeObjectURL(g)},4e4)}});o.saveAs=s.saveAs=s,e.exports=s})})(iw);var hT=iw.exports;const k0=ag(hT);function dT(e){let t,n,r;return{c(){t=k("div"),F(t,"width",n=e[0]+"px"),F(t,"height",r=e[1]+"px")},m(i,a){Z(i,t,a),e[6](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&F(t,"width",n),a&2&&r!==(r=i[1]+"px")&&F(t,"height",r)},i:de,o:de,d(i){i&&X(t),e[6](null)}}}function mT(e,t,n){let{data:r}=t,{domain:i}=t,{title:a=""}=t,{width:o=800}=t,{height:u=100}=t,s;_t(()=>{const c=dt({width:o,height:u,marginLeft:70,marginRight:10,x:{label:a,domain:i},y:{axis:!1,type:"band"},marks:[bs(r,{x:f=>f}),Ef(r,{x:f=>f,dx:7,y:(f,h)=>h,text:(f,h)=>`P${h+1}`})]});n(2,s.textContent="",s),s.appendChild(c)});function l(c){We[c?"unshift":"push"](()=>{s=c,n(2,s)})}return e.$$set=c=>{"data"in c&&n(3,r=c.data),"domain"in c&&n(4,i=c.domain),"title"in c&&n(5,a=c.title),"width"in c&&n(0,o=c.width),"height"in c&&n(1,u=c.height)},[o,u,s,r,i,a,l]}class pT extends Ge{constructor(t){super(),qe(this,t,mT,dT,Oe,{data:3,domain:4,title:5,width:0,height:1})}}function bT(e){let t,n,r;return{c(){t=k("div"),F(t,"width",n=e[0]+"px"),F(t,"height",r=e[1]+"px")},m(i,a){Z(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&F(t,"width",n),a&2&&r!==(r=i[1]+"px")&&F(t,"height",r)},i:de,o:de,d(i){i&&X(t),e[5](null)}}}function gT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;_t(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.finals)})),c=dt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Ff(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Mf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Nu(l),m=1.96*(ku(l)/Math.sqrt(c)),p=f-m,y=f+m;return{mean:f,low:p,high:y}}function s(l){We[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class yT extends Ge{constructor(t){super(),qe(this,t,gT,bT,Oe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function wT(e){let t,n,r;return{c(){t=k("div"),F(t,"width",n=e[0]+"px"),F(t,"height",r=e[1]+"px")},m(i,a){Z(i,t,a),e[5](t)},p(i,[a]){a&1&&n!==(n=i[0]+"px")&&F(t,"width",n),a&2&&r!==(r=i[1]+"px")&&F(t,"height",r)},i:de,o:de,d(i){i&&X(t),e[5](null)}}}function vT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:a=200}=t,o;_t(()=>{const l=r.map(f=>({encoding:f.encoding,...u(f.trialCounts)})),c=dt({width:i,height:a,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:l.sort((f,h)=>f.mean-h.mean).map(f=>f.encoding)},marks:[Ff(l,{x:f=>f.mean,y:f=>f.encoding,symbol:"diamond"}),Nf(l,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Mf([0])]});n(2,o.textContent="",o),o.appendChild(c)});function u(l){const c=l.length,f=Nu(l),m=1.96*(ku(l)/Math.sqrt(c)),p=f-m,y=f+m;return{mean:f,low:p,high:y}}function s(l){We[l?"unshift":"push"](()=>{o=l,n(2,o)})}return e.$$set=l=>{"stimuli"in l&&n(3,r=l.stimuli),"width"in l&&n(0,i=l.width),"height"in l&&n(1,a=l.height)},[i,a,o,r,u,s]}class _T extends Ge{constructor(t){super(),qe(this,t,vT,wT,Oe,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function T0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function xT(e,t,n,r,i,a){const o=new Float64Array(a),u=(a-1)/(i-r);for(let s=0;s<e.length;++s){const l=e[s],c=t(l,s,e),f=n(l,s,e);if(!(Number.isFinite(c)&&Number.isFinite(f)))continue;const h=(c-r)*u,d=Math.floor(h),m=d+1;0<=d&&m<a?(o[d]+=(m-h)*f,o[m]+=(h-d)*f):d===-1?o[m]+=(h-d)*f:m===a&&(o[d]+=(m-h)*f)}return o}function $0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);MT(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),a=1+n[1]+n[2]+n[3]+n[4],o=(r[0]+r[1]+r[2]+r[3])/a,u=(i[1]+i[2]+i[3]+i[4])/a;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:o,sum_anticausal:u}}function MT(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),a=Math.exp(-1.783/n),o=Math.exp(-1.723/n),u=.6318/n,s=1.997/n,l=Float64Array.of(-a*Math.cos(u),a*Math.sin(u),-a*Math.cos(-u),a*Math.sin(-u),-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s)),c=n*2.5066282746310007,f=Float64Array.of(i[0],i[1],0,0,0,0,0,0),h=Float64Array.of(1,0,l[0],l[1],0,0,0,0,0,0);let d,m;for(m=2;m<8;m+=2){for(f[m]=l[m]*f[m-2]-l[m+1]*f[m-1],f[m+1]=l[m]*f[m-1]+l[m+1]*f[m-2],d=m-2;d>0;d-=2)f[d]+=l[m]*f[d-2]-l[m+1]*f[d-1],f[d+1]+=l[m]*f[d-1]+l[m+1]*f[d-2];for(d=0;d<=m;d+=2)f[d]+=i[m]*h[d]-i[m+1]*h[d+1],f[d+1]+=i[m]*h[d+1]+i[m+1]*h[d];for(h[m+2]=l[m]*h[m]-l[m+1]*h[m+1],h[m+3]=l[m]*h[m+1]+l[m+1]*h[m],d=m;d>0;d-=2)h[d]+=l[m]*h[d-2]-l[m+1]*h[d-1],h[d+1]+=l[m]*h[d-1]+l[m+1]*h[d-2]}for(m=0;m<4;++m)d=m<<1,t[m]=f[d]/c,e[m+1]=h[d+2]}function PT(e,t,n,r=1,i=new Float64Array(n),a=new Float64Array(n),o=new Float64Array(5),u=i,s=AT){const l=r*2,c=r*3,f=r*4,h=r*n;let d,m;for(s(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,o,e.sigma),m=4,d=f;m<n;++m,d+=r)i[m]=e.b_causal[0]*t[d]+e.b_causal[1]*t[d-r]+e.b_causal[2]*t[d-l]+e.b_causal[3]*t[d-c]-e.a[1]*i[m-1]-e.a[2]*i[m-2]-e.a[3]*i[m-3]-e.a[4]*i[m-4];for(s(a,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,o,e.sigma),m=4,d=h-r*5;m<n;++m,d-=r)a[m]=e.b_anticausal[1]*t[d+r]+e.b_anticausal[2]*t[d+l]+e.b_anticausal[3]*t[d+c]+e.b_anticausal[4]*t[d+f]-e.a[1]*a[m-1]-e.a[2]*a[m-2]-e.a[3]*a[m-3]-e.a[4]*a[m-4];if(e.negative)for(m=0,d=0;m<n;++m,d+=r)u[d]=i[m]+a[n-m-1];else for(m=0,d=0;m<n;++m,d+=r)u[d]=Math.max(0,i[m]+a[n-m-1]);return u}function AT(e,t,n,r,i,a,o,u,s,l){const c=Math.abs(r)*n,f=r<0?c+r:0;let h,d,m;for(d=0;d<u;++d)for(l[d]=d<=a?i[d]:0,m=1;m<=u&&m<=d;++m)l[d]-=o[m]*l[d-m];for(m=0;m<u;++m)for(e[m]=0,d=1;d<=m;++d)h=f+r*d,h>=0&&h<c&&(e[m]+=l[m-d]*t[h]);const p=t[f];if(p>0)for(m=0;m<u;++m)e[m]+=l[m]*p}function ST(e,t,n=0){const r=e.length;let i,a;for(let o=0;o<r;++o){const u=t(e[o],o,e);u!=null&&(i===void 0?u>=u&&(i=a=u):(u<i&&(i=u),u>a&&(a=u)))}return[i-n,a+n]}function ET(e,t){const n=e.map(t).filter(l=>l!=null&&l>=l);n.sort((l,c)=>l-c);const r=CT(n),i=D0(n,.25),a=D0(n,.75),o=n.length,u=(a-i)/1.34;return 1.06*(Math.min(r,u)||r||Math.abs(i)||1)*Math.pow(o,-.2)}function CT(e){const t=e.length;let n=0,r,i=0,a=0;for(let o=0;o<t;++o){const u=e[o];r=u-i,i+=r/++n,a+=r*(u-i)}return n>1?Math.sqrt(a/(n-1)):NaN}function D0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),a=e[i];return a+(e[i+1]-a)*(r-i)}function kT(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,a=T0(t.x,w=>w),o=T0(t.weight,()=>1/e.length);let u=t.bandwidth??n*ET(e,a);const[s,l]=t.extent??ST(e,a,r*u),c=xT(e,a,o,s,l,i),f=(l-s)/(i-1),h=c.some(w=>w<0);let d=$0(u/f,h),m;function*p(w="x",g="y"){const v=y.grid(),b=1/f;for(let _=0;_<i;++_)yield{[w]:s+_*f,[g]:v[_]*b}}const y={[Symbol.iterator]:p,points:p,grid:()=>m||(m=PT(d,c,i)),extent:()=>[s,l],bandwidth(w){return arguments.length?(w!==u&&(u=w,m=null,d=$0(u/f,h)),y):u}};return y}function TT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px")},m(a,o){Z(a,t,o),A(t,n),e[10](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i)},i:de,o:de,d(a){a&&X(t),e[10](null)}}}function $T(e,t,n){let r,{values:i}=t,{title:a=""}=t,{xLabel:o="some value"}=t,{xDomain:u=void 0}=t,{width:s=1e3}=t,{height:l=100}=t,{bandwidth:c=.25}=t,{bins:f=256}=t,{pad:h=4}=t,d;_t(()=>{const p=[...r.bandwidth(c)];n(2,d.textContent="",d);const y=dt({width:s,height:l,title:a,style:{background:"none"},grid:!0,x:{label:o,domain:u},y:{label:"density",type:"linear"},marks:[nA(p,{x:"x",y:"y",fill:"#ccc"}),bs(i,{x:w=>w,strokeWidth:.5}),Pf([0])]});d.appendChild(y)});function m(p){We[p?"unshift":"push"](()=>{d=p,n(2,d)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,a=p.title),"xLabel"in p&&n(5,o=p.xLabel),"xDomain"in p&&n(6,u=p.xDomain),"width"in p&&n(0,s=p.width),"height"in p&&n(1,l=p.height),"bandwidth"in p&&n(7,c=p.bandwidth),"bins"in p&&n(8,f=p.bins),"pad"in p&&n(9,h=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=kT(i,{bandwidth:c,pad:h,bins:f}))},[s,l,d,i,a,o,u,c,f,h,m]}class DT extends Ge{constructor(t){super(),qe(this,t,$T,TT,Oe,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function NT(e){let t,n,r,i;return{c(){t=k("main"),n=k("div"),F(n,"width",r=e[0]+"px"),F(n,"height",i=e[1]+"px")},m(a,o){Z(a,t,o),A(t,n),e[13](n)},p(a,[o]){o&1&&r!==(r=a[0]+"px")&&F(n,"width",r),o&2&&i!==(i=a[1]+"px")&&F(n,"height",i)},i:de,o:de,d(a){a&&X(t),e[13](null)}}}function FT(e,t,n){let{title:r=""}=t,{data:i}=t,{x:a="x"}=t,{y:o="y"}=t,{tipTitle:u=null}=t,{xLabel:s=null}=t,{yLabel:l=null}=t,{xDomain:c=void 0}=t,{yDomain:f=void 0}=t,{grid:h=!1}=t,{width:d=300}=t,{height:m=300}=t,p;_t(()=>{console.log(i,a,o),n(2,p.textContent="",p);const w=dt({width:d,height:m,title:r,grid:h,style:{background:"none"},x:{label:s||(typeof a=="string"?a:"x"),domain:c},y:{label:l||(typeof o=="string"?o:"y"),domain:f},marks:[Ff(i,{x:a,y:o}),W2(i,t2({x:a,y:o,title:u})),Nf({length:1},{x1:c[0],x2:c[1],y1:f[0],y2:f[1],stroke:"#ccc"})]});p.appendChild(w)});function y(w){We[w?"unshift":"push"](()=>{p=w,n(2,p)})}return e.$$set=w=>{"title"in w&&n(3,r=w.title),"data"in w&&n(4,i=w.data),"x"in w&&n(5,a=w.x),"y"in w&&n(6,o=w.y),"tipTitle"in w&&n(7,u=w.tipTitle),"xLabel"in w&&n(8,s=w.xLabel),"yLabel"in w&&n(9,l=w.yLabel),"xDomain"in w&&n(10,c=w.xDomain),"yDomain"in w&&n(11,f=w.yDomain),"grid"in w&&n(12,h=w.grid),"width"in w&&n(0,d=w.width),"height"in w&&n(1,m=w.height)},[d,m,p,r,i,a,o,u,s,l,c,f,h,y]}class N0 extends Ge{constructor(t){super(),qe(this,t,FT,NT,Oe,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function F0(e,t,n){const r=e.slice();return r[12]=t[n],r}function B0(e,t,n){const r=e.slice();return r[15]=t[n],r}function L0(e,t,n){const r=e.slice();return r[18]=t[n],r}function R0(e,t,n){const r=e.slice();return r[21]=t[n],r}function I0(e,t,n){const r=e.slice();return r[24]=t[n],r}function O0(e,t,n){const r=e.slice();return r[27]=t[n][0],r[28]=t[n][1],r}function q0(e){let t,n=e[27]+"",r,i,a=e[28].length+"",o,u;return{c(){t=k("p"),r=Se(n),i=Se(": "),o=Se(a),u=Se(" times")},m(s,l){Z(s,t,l),A(t,r),A(t,i),A(t,o),A(t,u)},p(s,l){l&1&&n!==(n=s[27]+"")&&St(r,n),l&1&&a!==(a=s[28].length+"")&&St(o,a)},d(s){s&&X(t)}}}function G0(e){let t,n;return t=new DT({props:{title:`Density of final values for ${e[24][0]}`,values:e[24][1].map(X0),xLabel:"final values",xDomain:[-1,20],bandwidth:RT}}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=`Density of final values for ${r[24][0]}`),i&2&&(a.values=r[24][1].map(X0)),t.$set(a)},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function U0(e){let t,n=e[21].encoding+"",r,i,a,o;return a=new pT({props:{data:e[21].finals,title:e[21].encoding,domain:[0,e[2]]}}),{c(){t=k("b"),r=Se(n),i=q(),Pe(a.$$.fragment)},m(u,s){Z(u,t,s),A(t,r),Z(u,i,s),ve(a,u,s),o=!0},p(u,s){(!o||s&8)&&n!==(n=u[21].encoding+"")&&St(r,n);const l={};s&8&&(l.data=u[21].finals),s&8&&(l.title=u[21].encoding),s&4&&(l.domain=[0,u[2]]),a.$set(l)},i(u){o||(Q(a.$$.fragment,u),o=!0)},o(u){oe(a.$$.fragment,u),o=!1},d(u){u&&(X(t),X(i)),_e(a,u)}}}function z0(e){let t,n=e[18]+"",r;return{c(){t=k("p"),r=Se(n)},m(i,a){Z(i,t,a),A(t,r)},p(i,a){a&1&&n!==(n=i[18]+"")&&St(r,n)},d(i){i&&X(t)}}}function H0(e){let t,n,r,i=e[15].demographics.internalPID+"",a,o,u=e[15].demographics.partID+"",s,l,c,f=Pt(e[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<f.length;d+=1)h[d]=z0(L0(e,f,d));return{c(){t=k("div"),n=k("b"),r=Se("P"),a=Se(i),o=q(),s=Se(u),l=Se(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();c=q(),Ce(t,"text-align","left")},m(d,m){Z(d,t,m),A(t,n),A(n,r),A(n,a),A(t,o),A(t,s),A(t,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(t,null);A(t,c)},p(d,m){if(m&1&&i!==(i=d[15].demographics.internalPID+"")&&St(a,i),m&1&&u!==(u=d[15].demographics.partID+"")&&St(s,u),m&1){f=Pt(d[15].demographics.partFeedback.split(`
`));let p;for(p=0;p<f.length;p+=1){const y=L0(d,f,p);h[p]?h[p].p(y,m):(h[p]=z0(y),h[p].c(),h[p].m(t,c))}for(;p<h.length;p+=1)h[p].d(1);h.length=f.length}},d(d){d&&X(t),cr(h,d)}}}function W0(e){let t,n;return t=new fT({props:{title:e[12].encoding,width:LT,height:150,data:e[12].data,x:OT,y:e[7]}}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},p(r,i){const a={};i&2&&(a.title=r[12].encoding),i&2&&(a.data=r[12].data),t.$set(a)},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function BT(e){let t,n,r,i,a,o,u,s,l,c,f,h=e[0].length+"",d,m,p=e[1].length+"",y,w,g=e[4].length+"",v,b,_,x,M,S,E,$,P,T,I,B,C,O,ie,te,J,z,H,D,G,ne,ue,ae,V,j,L,W,Y,N,ge,re,me,xe,Ue,nt=Pt(kn(e[0],V0).sort(j0)),De=[];for(let R=0;R<nt.length;R+=1)De[R]=q0(O0(e,nt,R));let xt=Pt(kn(e[1],Y0)),Ne=[];for(let R=0;R<xt.length;R+=1)Ne[R]=G0(I0(e,xt,R));const Fr=R=>oe(Ne[R],1,1,()=>{Ne[R]=null});T=new N0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:e[0]}}),B=new N0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:e[0]}}),J=new yT({props:{stimuli:e[3]}}),ne=new _T({props:{stimuli:e[3]}});let Wt=Pt(e[3]),Te=[];for(let R=0;R<Wt.length;R+=1)Te[R]=U0(R0(e,Wt,R));const Pi=R=>oe(Te[R],1,1,()=>{Te[R]=null});let nn=Pt(e[0].filter(Z0)),He=[];for(let R=0;R<nn.length;R+=1)He[R]=H0(B0(e,nn,R));let se=Pt(e[1]),K=[];for(let R=0;R<se.length;R+=1)K[R]=W0(F0(e,se,R));const Me=R=>oe(K[R],1,1,()=>{K[R]=null});return{c(){t=k("main"),n=k("h2"),n.textContent="Analysis",r=q(),i=k("div"),a=k("label"),o=Se(`Results JSONs and Prolific demographics CSV
      `),u=k("input"),s=q(),l=k("button"),l.textContent="export JSON",c=q(),f=k("div"),d=Se(h),m=Se(` participants completed -
    `),y=Se(p),w=Se(` tests -
    `),v=Se(g),b=Se(" filtered tests"),_=q(),x=k("div"),M=k("h3"),M.textContent="Encoding order",S=q();for(let R=0;R<De.length;R+=1)De[R].c();E=q(),$=k("div");for(let R=0;R<Ne.length;R+=1)Ne[R].c();P=q(),Pe(T.$$.fragment),I=q(),Pe(B.$$.fragment),C=q(),O=k("div"),ie=k("h3"),ie.textContent="Mean and CI of Final Values",te=q(),Pe(J.$$.fragment),z=q(),H=k("div"),D=k("h3"),D.textContent="Mean and CI of Trial Counts",G=q(),Pe(ne.$$.fragment),ue=q(),ae=k("div"),V=k("h3"),V.textContent="Final Values for Each Stimulus and All Participants",j=q();for(let R=0;R<Te.length;R+=1)Te[R].c();L=q(),W=k("div"),Y=k("h3"),Y.textContent="Feedback",N=q();for(let R=0;R<He.length;R+=1)He[R].c();ge=q(),re=k("div");for(let R=0;R<K.length;R+=1)K[R].c();F(u,"type","file"),F(u,"accept",".json,.csv"),u.multiple=!0},m(R,ee){Z(R,t,ee),A(t,n),A(t,r),A(t,i),A(i,a),A(a,o),A(a,u),A(i,s),A(i,l),A(t,c),A(t,f),A(f,d),A(f,m),A(f,y),A(f,w),A(f,v),A(f,b),A(t,_),A(t,x),A(x,M),A(x,S);for(let le=0;le<De.length;le+=1)De[le]&&De[le].m(x,null);A(t,E),A(t,$);for(let le=0;le<Ne.length;le+=1)Ne[le]&&Ne[le].m($,null);A(t,P),ve(T,t,null),A(t,I),ve(B,t,null),A(t,C),A(t,O),A(O,ie),A(O,te),ve(J,O,null),A(t,z),A(t,H),A(H,D),A(H,G),ve(ne,H,null),A(t,ue),A(t,ae),A(ae,V),A(ae,j);for(let le=0;le<Te.length;le+=1)Te[le]&&Te[le].m(ae,null);A(t,L),A(t,W),A(W,Y),A(W,N);for(let le=0;le<He.length;le+=1)He[le]&&He[le].m(W,null);A(t,ge),A(t,re);for(let le=0;le<K.length;le+=1)K[le]&&K[le].m(re,null);me=!0,xe||(Ue=[Qe(u,"input",e[5]),Qe(l,"click",e[6])],xe=!0)},p(R,[ee]){if((!me||ee&1)&&h!==(h=R[0].length+"")&&St(d,h),(!me||ee&2)&&p!==(p=R[1].length+"")&&St(y,p),(!me||ee&16)&&g!==(g=R[4].length+"")&&St(v,g),ee&1){nt=Pt(kn(R[0],V0).sort(j0));let U;for(U=0;U<nt.length;U+=1){const Xe=O0(R,nt,U);De[U]?De[U].p(Xe,ee):(De[U]=q0(Xe),De[U].c(),De[U].m(x,null))}for(;U<De.length;U+=1)De[U].d(1);De.length=nt.length}if(ee&2){xt=Pt(kn(R[1],Y0));let U;for(U=0;U<xt.length;U+=1){const Xe=I0(R,xt,U);Ne[U]?(Ne[U].p(Xe,ee),Q(Ne[U],1)):(Ne[U]=G0(Xe),Ne[U].c(),Q(Ne[U],1),Ne[U].m($,null))}for(cn(),U=xt.length;U<Ne.length;U+=1)Fr(U);fn()}const le={};ee&1&&(le.data=R[0]),T.$set(le);const Ee={};ee&1&&(Ee.data=R[0]),B.$set(Ee);const Mt={};ee&8&&(Mt.stimuli=R[3]),J.$set(Mt);const Br={};if(ee&8&&(Br.stimuli=R[3]),ne.$set(Br),ee&12){Wt=Pt(R[3]);let U;for(U=0;U<Wt.length;U+=1){const Xe=R0(R,Wt,U);Te[U]?(Te[U].p(Xe,ee),Q(Te[U],1)):(Te[U]=U0(Xe),Te[U].c(),Q(Te[U],1),Te[U].m(ae,null))}for(cn(),U=Wt.length;U<Te.length;U+=1)Pi(U);fn()}if(ee&1){nn=Pt(R[0].filter(Z0));let U;for(U=0;U<nn.length;U+=1){const Xe=B0(R,nn,U);He[U]?He[U].p(Xe,ee):(He[U]=H0(Xe),He[U].c(),He[U].m(W,null))}for(;U<He.length;U+=1)He[U].d(1);He.length=nn.length}if(ee&2){se=Pt(R[1]);let U;for(U=0;U<se.length;U+=1){const Xe=F0(R,se,U);K[U]?(K[U].p(Xe,ee),Q(K[U],1)):(K[U]=W0(Xe),K[U].c(),Q(K[U],1),K[U].m(re,null))}for(cn(),U=se.length;U<K.length;U+=1)Me(U);fn()}},i(R){if(!me){for(let ee=0;ee<xt.length;ee+=1)Q(Ne[ee]);Q(T.$$.fragment,R),Q(B.$$.fragment,R),Q(J.$$.fragment,R),Q(ne.$$.fragment,R);for(let ee=0;ee<Wt.length;ee+=1)Q(Te[ee]);for(let ee=0;ee<se.length;ee+=1)Q(K[ee]);me=!0}},o(R){Ne=Ne.filter(Boolean);for(let ee=0;ee<Ne.length;ee+=1)oe(Ne[ee]);oe(T.$$.fragment,R),oe(B.$$.fragment,R),oe(J.$$.fragment,R),oe(ne.$$.fragment,R),Te=Te.filter(Boolean);for(let ee=0;ee<Te.length;ee+=1)oe(Te[ee]);K=K.filter(Boolean);for(let ee=0;ee<K.length;ee+=1)oe(K[ee]);me=!1},d(R){R&&X(t),cr(De,R),cr(Ne,R),_e(T),_e(B),_e(J),_e(ne),cr(Te,R),cr(He,R),cr(K,R),xe=!1,gn(Ue)}}}const LT=800;let RT=1,IT=20;const V0=e=>e.encodingOrder,j0=(e,t)=>e[1].lenght-t[1].length,Y0=e=>e.testType,X0=e=>e.final,Z0=e=>e.demographics.partFeedback.trim().length>0,OT=(e,t)=>t;function qT(e,t,n){let r,i,a,o,u=[],s=null;const l=async p=>{const y=[];for(const g of p.target.files)if(g.name.endsWith(".csv")){const v=await g.text();s=D5(v),console.log("p demo",s)}else{const v=await g.text();y.push(JSON.parse(v))}const w=kn(y,g=>g.demographics.partID);console.log(`${w.length} participants`,w),n(0,u=y.filter(g=>g.studyStep==="feedback").map((g,v)=>({...g,demographics:{...g.demographics,internalPID:v+1},prolificDemogr:s.filter(b=>b["Participant id"]===g.demographics.partID)[0],finalAudio:g.tests.filter(b=>b.encoding.startsWith("audio"))[0].final,finalColor:g.tests.filter(b=>b.encoding.startsWith("color"))[0].final,finalWaveform:g.tests.filter(b=>b.encoding.startsWith("waveform"))[0].final,encodingOrder:g.tests.map(b=>b.encoding).join(", ")}))),console.log("participants",u)},c=p=>{if(p.lenght===0)return[];const y=(g,v=5)=>{const b=Math.floor(g/v)*v;return`${b}-${b+v-1}`},w=[];for(const g of p)for(const[v,b]of g.tests.entries()){let _=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(_=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),w.push({...g.demographics,partAge:g.demographics.partAge?g.demographics.partAge:y(g.prolificDemogr.Age),partSex:g.demographics.partGender?g.demographics.partGender:g.prolificDemogr.Sex,countryBirth:g.prolificDemogr["Country of birth"],countryResidence:g.prolificDemogr["Country of residence"],prolificApprovals:g.prolificDemogr["Total approvals"],...b,date:g.date,testType:_,testOrder:v})}return console.log("tests",w),w},f=(p,y)=>p.filter(w=>w.final<y),h=p=>p.length===0?[]:kn(p,w=>w.testType).map(([w,g])=>{const v=g.map(b=>b.final);return{encoding:w,testType:w,finals:v,finalMean:Nu(v),finalVar:_c(v),trialCounts:g.map(b=>b.trialCount)}}),d=()=>{const p=JSON.stringify(u,void 0,2),y=new Blob([p],{type:"text/plain;charset=utf-8"});k0(y,"participants.json");const w=JSON.stringify(r,void 0,2),g=new Blob([w],{type:"text/plain;charset=utf-8"});k0(g,"tests.json")},m=p=>Math.abs(p);return e.$$.update=()=>{e.$$.dirty&1&&n(1,r=c(u)),e.$$.dirty&2&&n(4,i=f(r,IT)),e.$$.dirty&2&&n(3,a=h(r)),e.$$.dirty&2&&n(2,o=qt(r.map(p=>Math.abs(p.final)))),e.$$.dirty&2&&console.log("tests by enc",kn(r,p=>p.testType))},[u,r,o,a,i,l,d,m]}class GT extends Ge{constructor(t){super(),qe(this,t,qT,BT,Oe,{})}}function Be(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Be.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Be.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Be.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Be.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=aw(0,e.length-1);return this.activate(e[t]),this};Be.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=aw(0,e.length-1);this.activate(e[t])};Be.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Be.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Be.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Be.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Be.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Be.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Be.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Be.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Be.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Be.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Be.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Be.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Be.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Be.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Be.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Be.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const zf=function(){};zf.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};zf.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Be.prototype.checkErr=new zf;function aw(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Lo(e,t){return new URLSearchParams(e.location.search).get(t)}function UT(e){let t,n,r,i,a,o,u;return{c(){t=k("main"),n=k("audio"),r=q(),i=k("button"),a=Se(e[0]),n.controls=!1},m(s,l){Z(s,t,l),A(t,n),e[5](n),A(t,r),A(t,i),A(i,a),o||(u=Qe(i,"click",e[2]),o=!0)},p(s,[l]){l&1&&St(a,s[0])},i:de,o:de,d(s){s&&X(t),e[5](null),o=!1,u()}}}function zT(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:a="play audio"}=t,o=null,u;const s=(f,h)=>{h&&u&&(o=c9(h,f),Xc(o,h.sampleRate,u))};xa(()=>s(r,i));const l=async()=>{u&&(n(1,u.currentTime=0,u),u.play())};function c(f){We[f?"unshift":"push"](()=>{u=f,n(1,u)})}return e.$$set=f=>{"pattern"in f&&n(3,r=f.pattern),"cachedAudio"in f&&n(4,i=f.cachedAudio),"label"in f&&n(0,a=f.label)},[a,u,l,r,i,c]}class Ro extends Ge{constructor(t){super(),qe(this,t,zT,UT,Oe,{pattern:3,cachedAudio:4,label:0})}}var Hf={exports:{}};Hf.exports;(function(e){(function(t,n,r){function i(s){var l=this,c=u();l.next=function(){var f=2091639*l.s0+l.c*23283064365386963e-26;return l.s0=l.s1,l.s1=l.s2,l.s2=f-(l.c=f|0)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(s),l.s0<0&&(l.s0+=1),l.s1-=c(s),l.s1<0&&(l.s1+=1),l.s2-=c(s),l.s2<0&&(l.s2+=1),c=null}function a(s,l){return l.c=s.c,l.s0=s.s0,l.s1=s.s1,l.s2=s.s2,l}function o(s,l){var c=new i(s),f=l&&l.state,h=c.next;return h.int32=function(){return c.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,f&&(typeof f=="object"&&a(f,c),h.state=function(){return a(c,{})}),h}function u(){var s=4022871197,l=function(c){c=String(c);for(var f=0;f<c.length;f++){s+=c.charCodeAt(f);var h=.02519603282416938*s;s=h>>>0,h-=s,h*=s,s=h>>>0,h-=s,s+=h*4294967296}return(s>>>0)*23283064365386963e-26};return l}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Ft,e,!1)})(Hf);var HT=Hf.exports,Wf={exports:{}};Wf.exports;(function(e){(function(t,n,r){function i(u){var s=this,l="";s.x=0,s.y=0,s.z=0,s.w=0,s.next=function(){var f=s.x^s.x<<11;return s.x=s.y,s.y=s.z,s.z=s.w,s.w^=s.w>>>19^f^f>>>8},u===(u|0)?s.x=u:l+=u;for(var c=0;c<l.length+64;c++)s.x^=l.charCodeAt(c)|0,s.next()}function a(u,s){return s.x=u.x,s.y=u.y,s.z=u.z,s.w=u.w,s}function o(u,s){var l=new i(u),c=s&&s.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Ft,e,!1)})(Wf);var WT=Wf.exports,Vf={exports:{}};Vf.exports;(function(e){(function(t,n,r){function i(u){var s=this,l="";s.next=function(){var f=s.x^s.x>>>2;return s.x=s.y,s.y=s.z,s.z=s.w,s.w=s.v,(s.d=s.d+362437|0)+(s.v=s.v^s.v<<4^(f^f<<1))|0},s.x=0,s.y=0,s.z=0,s.w=0,s.v=0,u===(u|0)?s.x=u:l+=u;for(var c=0;c<l.length+64;c++)s.x^=l.charCodeAt(c)|0,c==l.length&&(s.d=s.x<<10^s.x>>>4),s.next()}function a(u,s){return s.x=u.x,s.y=u.y,s.z=u.z,s.w=u.w,s.v=u.v,s.d=u.d,s}function o(u,s){var l=new i(u),c=s&&s.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Ft,e,!1)})(Vf);var VT=Vf.exports,jf={exports:{}};jf.exports;(function(e){(function(t,n,r){function i(u){var s=this;s.next=function(){var c=s.x,f=s.i,h,d;return h=c[f],h^=h>>>7,d=h^h<<24,h=c[f+1&7],d^=h^h>>>10,h=c[f+3&7],d^=h^h>>>3,h=c[f+4&7],d^=h^h<<7,h=c[f+7&7],h=h^h<<13,d^=h^h<<9,c[f]=d,s.i=f+1&7,d};function l(c,f){var h,d=[];if(f===(f|0))d[0]=f;else for(f=""+f,h=0;h<f.length;++h)d[h&7]=d[h&7]<<15^f.charCodeAt(h)+d[h+1&7]<<13;for(;d.length<8;)d.push(0);for(h=0;h<8&&d[h]===0;++h);for(h==8?d[7]=-1:d[h],c.x=d,c.i=0,h=256;h>0;--h)c.next()}l(s,u)}function a(u,s){return s.x=u.x.slice(),s.i=u.i,s}function o(u,s){u==null&&(u=+new Date);var l=new i(u),c=s&&s.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.x&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Ft,e,!1)})(jf);var jT=jf.exports,Yf={exports:{}};Yf.exports;(function(e){(function(t,n,r){function i(u){var s=this;s.next=function(){var c=s.w,f=s.X,h=s.i,d,m;return s.w=c=c+1640531527|0,m=f[h+34&127],d=f[h=h+1&127],m^=m<<13,d^=d<<17,m^=m>>>15,d^=d>>>12,m=f[h]=m^d,s.i=h,m+(c^c>>>16)|0};function l(c,f){var h,d,m,p,y,w=[],g=128;for(f===(f|0)?(d=f,f=null):(f=f+"\0",d=0,g=Math.max(g,f.length)),m=0,p=-32;p<g;++p)f&&(d^=f.charCodeAt((p+32)%f.length)),p===0&&(y=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,p>=0&&(y=y+1640531527|0,h=w[p&127]^=d+y,m=h==0?m+1:0);for(m>=128&&(w[(f&&f.length||0)&127]=-1),m=127,p=4*128;p>0;--p)d=w[m+34&127],h=w[m=m+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,w[m]=d^h;c.w=y,c.X=w,c.i=m}l(s,u)}function a(u,s){return s.i=u.i,s.w=u.w,s.X=u.X.slice(),s}function o(u,s){u==null&&(u=+new Date);var l=new i(u),c=s&&s.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(c.X&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Ft,e,!1)})(Yf);var YT=Yf.exports,Xf={exports:{}};Xf.exports;(function(e){(function(t,n,r){function i(u){var s=this,l="";s.next=function(){var f=s.b,h=s.c,d=s.d,m=s.a;return f=f<<25^f>>>7^h,h=h-d|0,d=d<<24^d>>>8^m,m=m-f|0,s.b=f=f<<20^f>>>12^h,s.c=h=h-d|0,s.d=d<<16^h>>>16^m,s.a=m-f|0},s.a=0,s.b=0,s.c=-1640531527,s.d=1367130551,u===Math.floor(u)?(s.a=u/4294967296|0,s.b=u|0):l+=u;for(var c=0;c<l.length+20;c++)s.b^=l.charCodeAt(c)|0,s.next()}function a(u,s){return s.a=u.a,s.b=u.b,s.c=u.c,s.d=u.d,s}function o(u,s){var l=new i(u),c=s&&s.state,f=function(){return(l.next()>>>0)/4294967296};return f.double=function(){do var h=l.next()>>>11,d=(l.next()>>>0)/4294967296,m=(h+d)/(1<<21);while(m===0);return m},f.int32=l.next,f.quick=f,c&&(typeof c=="object"&&a(c,l),f.state=function(){return a(l,{})}),f}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Ft,e,!1)})(Xf);var XT=Xf.exports,ow={exports:{}};const ZT={},KT=Object.freeze(Object.defineProperty({__proto__:null,default:ZT},Symbol.toStringTag,{value:"Module"})),QT=n9(KT);(function(e){(function(t,n,r){var i=256,a=6,o=52,u="random",s=r.pow(i,a),l=r.pow(2,o),c=l*2,f=i-1,h;function d(b,_,x){var M=[];_=_==!0?{entropy:!0}:_||{};var S=w(y(_.entropy?[b,v(n)]:b??g(),3),M),E=new m(M),$=function(){for(var P=E.g(a),T=s,I=0;P<l;)P=(P+I)*i,T*=i,I=E.g(1);for(;P>=c;)P/=2,T/=2,I>>>=1;return(P+I)/T};return $.int32=function(){return E.g(4)|0},$.quick=function(){return E.g(4)/4294967296},$.double=$,w(v(E.S),n),(_.pass||x||function(P,T,I,B){return B&&(B.S&&p(B,E),P.state=function(){return p(E,{})}),I?(r[u]=P,T):P})($,S,"global"in _?_.global:this==r,_.state)}function m(b){var _,x=b.length,M=this,S=0,E=M.i=M.j=0,$=M.S=[];for(x||(b=[x++]);S<i;)$[S]=S++;for(S=0;S<i;S++)$[S]=$[E=f&E+b[S%x]+(_=$[S])],$[E]=_;(M.g=function(P){for(var T,I=0,B=M.i,C=M.j,O=M.S;P--;)T=O[B=f&B+1],I=I*i+O[f&(O[B]=O[C=f&C+T])+(O[C]=T)];return M.i=B,M.j=C,I})(i)}function p(b,_){return _.i=b.i,_.j=b.j,_.S=b.S.slice(),_}function y(b,_){var x=[],M=typeof b,S;if(_&&M=="object")for(S in b)try{x.push(y(b[S],_-1))}catch{}return x.length?x:M=="string"?b:b+"\0"}function w(b,_){for(var x=b+"",M,S=0;S<x.length;)_[f&S]=f&(M^=_[f&S]*19)+x.charCodeAt(S++);return v(_)}function g(){try{var b;return h&&(b=h.randomBytes)?b=b(i):(b=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(b)),v(b)}catch{var _=t.navigator,x=_&&_.plugins;return[+new Date,t,x,t.screen,v(n)]}}function v(b){return String.fromCharCode.apply(0,b)}if(w(r.random(),n),e.exports){e.exports=d;try{h=QT}catch{}}else r["seed"+u]=d})(typeof self<"u"?self:Ft,[],Math)})(ow);var JT=ow.exports,e$=HT,t$=WT,n$=VT,r$=jT,i$=YT,a$=XT,Mi=JT;Mi.alea=e$;Mi.xor128=t$;Mi.xorwow=n$;Mi.xorshift7=r$;Mi.xor4096=i$;Mi.tychei=a$;function o$(e){let t,n,r,i,a,o;return{c(){t=k("main"),n=k("audio"),r=q(),i=k("button"),i.textContent="play audio",n.controls=!1},m(u,s){Z(u,t,s),A(t,n),e[4](n),A(t,r),A(t,i),a||(o=Qe(i,"click",e[1]),a=!0)},p:de,i:de,o:de,d(u){u&&X(t),e[4](null),a=!1,o()}}}function u$(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,a;const o=l=>{l&&a&&Xc(l,i,a)};xa(()=>o(r));const u=()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(l){We[l?"unshift":"push"](()=>{a=l,n(0,a)})}return e.$$set=l=>{"audioData"in l&&n(2,r=l.audioData),"sampleRate"in l&&n(3,i=l.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&o(r)},[a,u,r,i,s]}class K0 extends Ge{constructor(t){super(),qe(this,t,u$,o$,Oe,{audioData:2,sampleRate:3})}}function Q0(e){let t;return{c(){t=k("div"),t.innerHTML=`<p class="svelte-wlo9ru">In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p class="svelte-wlo9ru">For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p class="svelte-wlo9ru">By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p class="svelte-wlo9ru">If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function J0(e){let t,n,r,i,a,o,u,s,l;return i=new Ro({props:{pattern:[.1,.6,1.1],cachedAudio:e[15][2].audioBuffer}}),{c(){t=k("div"),n=k("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=q(),Pe(i.$$.fragment),a=q(),o=k("p"),o.textContent="If you cannot hear anything, you cannot participate in this study.",u=q(),s=k("a"),s.innerHTML="<button>I can NOT hear the audio and will NOT participate in this study</button>",F(n,"class","svelte-wlo9ru"),F(o,"class","svelte-wlo9ru"),F(s,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(c,f){Z(c,t,f),A(t,n),A(t,r),ve(i,t,null),A(t,a),A(t,o),A(t,u),A(t,s),l=!0},p(c,f){const h={};f[0]&32768&&(h.cachedAudio=c[15][2].audioBuffer),i.$set(h)},i(c){l||(Q(i.$$.fragment,c),l=!0)},o(c){oe(i.$$.fragment,c),l=!1},d(c){c&&X(t),_e(i)}}}function e1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,y,w,g;return{c(){t=k("div"),n=k("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=q(),i=k("div"),a=k("button"),a.textContent="+",o=q(),u=k("button"),u.textContent="-",s=q(),l=Kf("svg"),c=Kf("rect"),p=q(),y=k("p"),y.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,F(n,"class","svelte-wlo9ru"),F(c,"width",f=e[0]*.52),F(c,"height",h=e[23]*2),F(c,"fill","#ccc"),F(c,"rx","8"),F(l,"width",d=e[0]*.52+"px"),F(l,"height",m=e[23]*2+"px"),F(y,"class","svelte-wlo9ru")},m(v,b){Z(v,t,b),A(t,n),A(t,r),A(t,i),A(i,a),A(i,o),A(i,u),A(t,s),A(t,l),A(l,c),A(t,p),A(t,y),w||(g=[Qe(a,"click",e[25]),Qe(u,"click",e[26])],w=!0)},p(v,b){b[0]&1&&f!==(f=v[0]*.52)&&F(c,"width",f),b[0]&8388608&&h!==(h=v[23]*2)&&F(c,"height",h),b[0]&1&&d!==(d=v[0]*.52+"px")&&F(l,"width",d),b[0]&8388608&&m!==(m=v[23]*2+"px")&&F(l,"height",m)},d(v){v&&X(t),w=!1,gn(g)}}}function t1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,y,w,g,v;return h=new Ro({props:{pattern:[.1],cachedAudio:e[15][0].audioBuffer,label:"hi-hat"}}),m=new Ro({props:{pattern:[.1],cachedAudio:e[15][1].audioBuffer,label:"snare drum"}}),y=new Ro({props:{pattern:[.1],cachedAudio:e[15][2].audioBuffer,label:"bass drum"}}),{c(){t=k("div"),n=k("div"),n.innerHTML=`<p class="svelte-wlo9ru">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-wlo9ru">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-wlo9ru">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played togehter will still be played at
          the same time, but this time will be either too early or too late.</p>`,r=Se(`
      This is what the pattern looks like in sheet music:
      `),i=k("div"),a=k("img"),s=q(),l=k("div"),c=k("span"),c.textContent="Click to hear the different sounds:",f=q(),Pe(h.$$.fragment),d=q(),Pe(m.$$.fragment),p=q(),Pe(y.$$.fragment),w=Se(`
      This is what the full, correctly played pattern sounds like:
      `),g=k("div"),g.innerHTML='<audio src="drum-pattern-correct-once.wav" controls=""></audio>',F(a,"width",o=e[0]+"px"),lw(a.src,u="drum-pattern-labels2.png")||F(a,"src",u),F(a,"alt","drum pattern as sheet music"),Ce(l,"display","grid"),Ce(l,"grid-template-columns","repeat(4,max-content)"),Ce(l,"gap","10px"),Ce(l,"align-items","center")},m(b,_){Z(b,t,_),A(t,n),A(t,r),A(t,i),A(i,a),A(t,s),A(t,l),A(l,c),A(l,f),ve(h,l,null),A(l,d),ve(m,l,null),A(l,p),ve(y,l,null),A(t,w),A(t,g),v=!0},p(b,_){(!v||_[0]&1&&o!==(o=b[0]+"px"))&&F(a,"width",o);const x={};_[0]&32768&&(x.cachedAudio=b[15][0].audioBuffer),h.$set(x);const M={};_[0]&32768&&(M.cachedAudio=b[15][1].audioBuffer),m.$set(M);const S={};_[0]&32768&&(S.cachedAudio=b[15][2].audioBuffer),y.$set(S)},i(b){v||(Q(h.$$.fragment,b),Q(m.$$.fragment,b),Q(y.$$.fragment,b),v=!0)},o(b){oe(h.$$.fragment,b),oe(m.$$.fragment,b),oe(y.$$.fragment,b),v=!1},d(b){b&&X(t),_e(h),_e(m),_e(y)}}}function n1(e){let t,n,r,i,a,o,u,s,l,c,f,h,d,m,p,y,w,g,v,b,_,x,M,S,E,$,P,T,I;return{c(){t=k("div"),n=k("p"),n.textContent="Please answer the following questions about yourself:",r=q(),i=k("label"),a=k("span"),a.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,o=q(),u=k("select"),s=k("option"),s.textContent="none",l=k("option"),l.textContent="high school",c=k("option"),c.textContent="bachelor",f=k("option"),f.textContent="master",h=k("option"),h.textContent="phd",d=q(),m=k("label"),p=k("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,y=q(),w=k("input"),g=q(),v=k("label"),b=k("span"),b.textContent="For how many years do you roughly play it/them?",_=q(),x=k("input"),M=q(),S=k("label"),E=k("span"),E.textContent=`How many years of experience do you have with information
          visualization?`,$=q(),P=k("input"),F(n,"class","svelte-wlo9ru"),s.__value="none",at(s,s.__value),l.__value="highs",at(l,l.__value),c.__value="bachelor",at(c,c.__value),f.__value="master",at(f,f.__value),h.__value="phd",at(h,h.__value),e[4]===void 0&&ea(()=>e[27].call(u)),F(i,"class","svelte-wlo9ru"),F(w,"type","text"),F(w,"placeholder","free text"),F(m,"class","svelte-wlo9ru"),F(x,"type","number"),F(x,"min","0"),F(x,"step","1"),F(v,"class","svelte-wlo9ru"),F(P,"type","number"),F(P,"min","0"),F(P,"step","1"),F(S,"class","svelte-wlo9ru"),F(t,"class","demo-form svelte-wlo9ru")},m(B,C){Z(B,t,C),A(t,n),A(t,r),A(t,i),A(i,a),A(i,o),A(i,u),A(u,s),A(u,l),A(u,c),A(u,f),A(u,h),Io(u,e[4],!0),A(t,d),A(t,m),A(m,p),A(m,y),A(m,w),at(w,e[5]),A(t,g),A(t,v),A(v,b),A(v,_),A(v,x),at(x,e[6]),A(t,M),A(t,S),A(S,E),A(S,$),A(S,P),at(P,e[7]),T||(I=[Qe(u,"change",e[27]),Qe(w,"input",e[28]),Qe(x,"input",e[29]),Qe(P,"input",e[30])],T=!0)},p(B,C){C[0]&16&&Io(u,B[4]),C[0]&32&&w.value!==B[5]&&at(w,B[5]),C[0]&64&&Qr(x.value)!==B[6]&&at(x,B[6]),C[0]&128&&Qr(P.value)!==B[7]&&at(P,B[7])},d(B){B&&X(t),T=!1,gn(I)}}}function r1(e){let t,n,r=e[10]&&i1(e);return{c(){r&&r.c(),t=yc()},m(i,a){r&&r.m(i,a),Z(i,t,a),n=!0},p(i,a){i[10]?r?(r.p(i,a),a[0]&1024&&Q(r,1)):(r=i1(i),r.c(),Q(r,1),r.m(t.parentNode,t)):r&&(cn(),oe(r,1,1,()=>{r=null}),fn())},i(i){n||(Q(r),n=!0)},o(i){oe(r),n=!1},d(i){i&&X(t),r&&r.d(i)}}}function i1(e){let t,n,r=e[3]+1+"",i,a,o=e[1].length+"",u,s,l,c,f,h,d,m=e[9]+1+"",p,y,w,g,v,b;function _(P,T){if(P[14]==="only-hihat")return c$;if(P[14]==="hihat-snare")return l$;if(P[14]==="hihat-bass")return s$}let x=_(e),M=x&&x(e);const S=[h$,f$],E=[];function $(P,T){return P[13]==="audio"?0:P[12]===!1?1:-1}return~(w=$(e))&&(g=E[w]=S[w](e)),{c(){t=k("p"),n=Se("Test number "),i=Se(r),a=Se(" of "),u=Se(o),s=q(),M&&M.c(),l=q(),c=k("p"),c.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,f=q(),h=k("p"),d=Se("Trial number "),p=Se(m),y=q(),g&&g.c(),v=yc(),F(t,"class","svelte-wlo9ru"),F(c,"class","svelte-wlo9ru"),F(h,"class","svelte-wlo9ru")},m(P,T){Z(P,t,T),A(t,n),A(t,i),A(t,a),A(t,u),Z(P,s,T),M&&M.m(P,T),Z(P,l,T),Z(P,c,T),Z(P,f,T),Z(P,h,T),A(h,d),A(h,p),Z(P,y,T),~w&&E[w].m(P,T),Z(P,v,T),b=!0},p(P,T){(!b||T[0]&8)&&r!==(r=P[3]+1+"")&&St(i,r),(!b||T[0]&2)&&o!==(o=P[1].length+"")&&St(u,o),x!==(x=_(P))&&(M&&M.d(1),M=x&&x(P),M&&(M.c(),M.m(l.parentNode,l))),(!b||T[0]&512)&&m!==(m=P[9]+1+"")&&St(p,m);let I=w;w=$(P),w===I?~w&&E[w].p(P,T):(g&&(cn(),oe(E[I],1,1,()=>{E[I]=null}),fn()),~w?(g=E[w],g?g.p(P,T):(g=E[w]=S[w](P),g.c()),Q(g,1),g.m(v.parentNode,v)):g=null)},i(P){b||(Q(g),b=!0)},o(P){oe(g),b=!1},d(P){P&&(X(t),X(s),X(l),X(c),X(f),X(h),X(y),X(v)),M&&M.d(P),~w&&E[w].d(P)}}}function s$(e){let t;return{c(){t=k("p"),t.innerHTML="A beat with a <b>hi-hat and a bass</b> note is shifted.",F(t,"class","svelte-wlo9ru")},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function l$(e){let t;return{c(){t=k("p"),t.innerHTML="A beat with a <b>hi-hat and a snare</b> note is shifted.",F(t,"class","svelte-wlo9ru")},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function c$(e){let t;return{c(){t=k("p"),t.innerHTML="Only a <b>single hi-hat</b> note is shifted.",F(t,"class","svelte-wlo9ru")},m(n,r){Z(n,t,r)},d(n){n&&X(t)}}}function f$(e){let t,n,r,i;const a=[m$,d$],o=[];function u(s,l){return s[13]==="waveform"?0:s[13]==="color"?1:-1}return~(t=u(e))&&(n=o[t]=a[t](e)),{c(){n&&n.c(),r=yc()},m(s,l){~t&&o[t].m(s,l),Z(s,r,l),i=!0},p(s,l){let c=t;t=u(s),t===c?~t&&o[t].p(s,l):(n&&(cn(),oe(o[c],1,1,()=>{o[c]=null}),fn()),~t?(n=o[t],n?n.p(s,l):(n=o[t]=a[t](s),n.c()),Q(n,1),n.m(r.parentNode,r)):n=null)},i(s){i||(Q(n),i=!0)},o(s){oe(n),i=!1},d(s){s&&X(r),~t&&o[t].d(s)}}}function h$(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new K0({props:{audioData:e[17],sampleRate:e[19]}}),o=new K0({props:{audioData:e[18],sampleRate:e[19]}}),h=new fy({props:{audioData:e[16],sampleRate:e[19],currentTrialNumber:e[9]}}),{c(){t=k("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=q(),r=k("div"),Pe(i.$$.fragment),a=q(),Pe(o.$$.fragment),u=q(),s=k("div"),s.textContent="Example for early",l=q(),c=k("div"),c.textContent="Example for late",f=q(),Pe(h.$$.fragment),F(t,"class","svelte-wlo9ru"),F(s,"class","svelte-wlo9ru"),F(c,"class","svelte-wlo9ru"),F(r,"class","vis-example svelte-wlo9ru")},m(m,p){Z(m,t,p),Z(m,n,p),Z(m,r,p),ve(i,r,null),A(r,a),ve(o,r,null),A(r,u),A(r,s),A(r,l),A(r,c),Z(m,f,p),ve(h,m,p),d=!0},p(m,p){const y={};p[0]&131072&&(y.audioData=m[17]),p[0]&524288&&(y.sampleRate=m[19]),i.$set(y);const w={};p[0]&262144&&(w.audioData=m[18]),p[0]&524288&&(w.sampleRate=m[19]),o.$set(w);const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&524288&&(g.sampleRate=m[19]),p[0]&512&&(g.currentTrialNumber=m[9]),h.$set(g)},i(m){d||(Q(i.$$.fragment,m),Q(o.$$.fragment,m),Q(h.$$.fragment,m),d=!0)},o(m){oe(i.$$.fragment,m),oe(o.$$.fragment,m),oe(h.$$.fragment,m),d=!1},d(m){m&&(X(t),X(n),X(r),X(f)),_e(i),_e(o),_e(h,m)}}}function d$(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new ko({props:{pattern:e[21],width:e[0]/2,height:e[23]*.7}}),o=new ko({props:{pattern:e[22],width:e[0]/2,height:e[23]/2}}),h=new ko({props:{pattern:e[20],width:e[0],height:e[23]}}),{c(){t=k("p"),t.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Brighter bars show smaller gaps (early),
            darker bars show wider gaps (late).`,n=q(),r=k("div"),Pe(i.$$.fragment),a=q(),Pe(o.$$.fragment),u=q(),s=k("div"),s.textContent="Example for early",l=q(),c=k("div"),c.textContent="Example for late",f=q(),Pe(h.$$.fragment),F(t,"class","svelte-wlo9ru"),F(s,"class","svelte-wlo9ru"),F(c,"class","svelte-wlo9ru"),F(r,"class","vis-example svelte-wlo9ru")},m(m,p){Z(m,t,p),Z(m,n,p),Z(m,r,p),ve(i,r,null),A(r,a),ve(o,r,null),A(r,u),A(r,s),A(r,l),A(r,c),Z(m,f,p),ve(h,m,p),d=!0},p(m,p){const y={};p[0]&2097152&&(y.pattern=m[21]),p[0]&1&&(y.width=m[0]/2),p[0]&8388608&&(y.height=m[23]*.7),i.$set(y);const w={};p[0]&4194304&&(w.pattern=m[22]),p[0]&1&&(w.width=m[0]/2),p[0]&8388608&&(w.height=m[23]/2),o.$set(w);const g={};p[0]&1048576&&(g.pattern=m[20]),p[0]&1&&(g.width=m[0]),p[0]&8388608&&(g.height=m[23]),h.$set(g)},i(m){d||(Q(i.$$.fragment,m),Q(o.$$.fragment,m),Q(h.$$.fragment,m),d=!0)},o(m){oe(i.$$.fragment,m),oe(o.$$.fragment,m),oe(h.$$.fragment,m),d=!1},d(m){m&&(X(t),X(n),X(r),X(f)),_e(i),_e(o),_e(h,m)}}}function m$(e){let t,n,r,i,a,o,u,s,l,c,f,h,d;return i=new To({props:{audioData:e[17],width:e[0]/2,height:e[23]/2}}),o=new To({props:{audioData:e[18],width:e[0]/2,height:e[23]/2}}),h=new To({props:{audioData:e[16],width:e[0],height:e[23]}}),{c(){t=k("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=q(),r=k("div"),Pe(i.$$.fragment),a=q(),Pe(o.$$.fragment),u=q(),s=k("div"),s.textContent="Example for early",l=q(),c=k("div"),c.textContent="Example for late",f=q(),Pe(h.$$.fragment),F(t,"class","svelte-wlo9ru"),F(s,"class","svelte-wlo9ru"),F(c,"class","svelte-wlo9ru"),F(r,"class","vis-example svelte-wlo9ru")},m(m,p){Z(m,t,p),Z(m,n,p),Z(m,r,p),ve(i,r,null),A(r,a),ve(o,r,null),A(r,u),A(r,s),A(r,l),A(r,c),Z(m,f,p),ve(h,m,p),d=!0},p(m,p){const y={};p[0]&131072&&(y.audioData=m[17]),p[0]&1&&(y.width=m[0]/2),p[0]&8388608&&(y.height=m[23]/2),i.$set(y);const w={};p[0]&262144&&(w.audioData=m[18]),p[0]&1&&(w.width=m[0]/2),p[0]&8388608&&(w.height=m[23]/2),o.$set(w);const g={};p[0]&65536&&(g.audioData=m[16]),p[0]&1&&(g.width=m[0]),p[0]&8388608&&(g.height=m[23]),h.$set(g)},i(m){d||(Q(i.$$.fragment,m),Q(o.$$.fragment,m),Q(h.$$.fragment,m),d=!0)},o(m){oe(i.$$.fragment,m),oe(o.$$.fragment,m),oe(h.$$.fragment,m),d=!1},d(m){m&&(X(t),X(n),X(r),X(f)),_e(i),_e(o),_e(h,m)}}}function a1(e){let t,n,r,i,a,o,u;return{c(){t=k("div"),n=Se(`Almost done!
      `),r=k("p"),r.textContent="Do you have any final feedback/comments?",i=q(),a=k("textarea"),F(r,"class","svelte-wlo9ru")},m(s,l){Z(s,t,l),A(t,n),A(t,r),A(t,i),A(t,a),at(a,e[8]),o||(u=Qe(a,"input",e[31]),o=!0)},p(s,l){l[0]&256&&at(a,s[8])},d(s){s&&X(t),o=!1,u()}}}function o1(e){let t,n,r;return{c(){t=k("div"),t.textContent="Thanks for participating!",n=q(),r=k("a"),r.textContent="click here to get your compensation",F(r,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(i,a){Z(i,t,a),Z(i,n,a),Z(i,r,a)},d(i){i&&(X(t),X(n),X(r))}}}function u1(e){let t,n,r;return{c(){t=k("button"),t.textContent="next step",F(t,"class","next-btn svelte-wlo9ru")},m(i,a){Z(i,t,a),n||(r=Qe(t,"click",e[24]),n=!0)},p:de,d(i){i&&X(t),n=!1,r()}}}function p$(e){let t,n,r,i,a,o,u,s,l,c,f=e[2]==="consent"&&Q0(),h=e[2]==="start1"&&J0(e),d=e[2]==="start2"&&e1(e),m=e[2]==="start3"&&t1(e),p=e[2]==="demo"&&n1(e),y=e[2]==="tests"&&r1(e),w=e[2]==="feedback"&&a1(e),g=e[2]==="done"&&o1(),v=!e[11]&&e[2]!=="done"&&u1(e);return{c(){t=k("main"),f&&f.c(),n=q(),h&&h.c(),r=q(),d&&d.c(),i=q(),m&&m.c(),a=q(),p&&p.c(),o=q(),y&&y.c(),u=q(),w&&w.c(),s=q(),g&&g.c(),l=q(),v&&v.c(),F(t,"class","svelte-wlo9ru")},m(b,_){Z(b,t,_),f&&f.m(t,null),A(t,n),h&&h.m(t,null),A(t,r),d&&d.m(t,null),A(t,i),m&&m.m(t,null),A(t,a),p&&p.m(t,null),A(t,o),y&&y.m(t,null),A(t,u),w&&w.m(t,null),A(t,s),g&&g.m(t,null),A(t,l),v&&v.m(t,null),c=!0},p(b,_){b[2]==="consent"?f||(f=Q0(),f.c(),f.m(t,n)):f&&(f.d(1),f=null),b[2]==="start1"?h?(h.p(b,_),_[0]&4&&Q(h,1)):(h=J0(b),h.c(),Q(h,1),h.m(t,r)):h&&(cn(),oe(h,1,1,()=>{h=null}),fn()),b[2]==="start2"?d?d.p(b,_):(d=e1(b),d.c(),d.m(t,i)):d&&(d.d(1),d=null),b[2]==="start3"?m?(m.p(b,_),_[0]&4&&Q(m,1)):(m=t1(b),m.c(),Q(m,1),m.m(t,a)):m&&(cn(),oe(m,1,1,()=>{m=null}),fn()),b[2]==="demo"?p?p.p(b,_):(p=n1(b),p.c(),p.m(t,o)):p&&(p.d(1),p=null),b[2]==="tests"?y?(y.p(b,_),_[0]&4&&Q(y,1)):(y=r1(b),y.c(),Q(y,1),y.m(t,u)):y&&(cn(),oe(y,1,1,()=>{y=null}),fn()),b[2]==="feedback"?w?w.p(b,_):(w=a1(b),w.c(),w.m(t,s)):w&&(w.d(1),w=null),b[2]==="done"?g||(g=o1(),g.c(),g.m(t,l)):g&&(g.d(1),g=null),!b[11]&&b[2]!=="done"?v?v.p(b,_):(v=u1(b),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(b){c||(Q(h),Q(m),Q(y),c=!0)},o(b){oe(h),oe(m),oe(y),c=!1},d(b){b&&X(t),f&&f.d(),h&&h.d(),d&&d.d(),m&&m.d(),p&&p.d(),y&&y.d(),w&&w.d(),g&&g.d(),v&&v.d()}}}const b$="/store",g$=120,_o=.2,s1=.05,l1=4;function y$(e,t,n){let r,i=Lo(window,"PROLIFIC_PID"),a=Lo(window,"STUDY_ID"),o=Lo(window,"SESSION_ID"),l=b1(["audio"],["only-hihat","hihat-snare","hihat-bass"]).map(([se,K])=>({encoding:se,pattern:K}));console.log({tests:l});let c="consent",f=0,h,d="",m="",p=0,y=0,w="",g=0,v,b={},_=[],x,M,S=!1,E=!1,$=!1,P="tick",T="only-hihat",I=600,B=[],C=0;const O=[];xa(()=>{document.querySelector("html").addEventListener("keyup",ne)});const ie=()=>{M=new Be({ratio:{firstVal:_o,down:2,up:1,stepSizeDown:s1,stepSizeUp:s1*.5488,limits:[0,_o],direction:-1,reversalLimit:5,verbosity:0}}),M.init()};function te(){c==="consent"?n(2,c="start1"):c==="start1"?n(2,c="start2"):c==="start2"?n(2,c="start3"):c==="start3"?(n(1,l=f9(l)),n(2,c="demo")):c==="demo"?(d==""||m=="",n(2,c="tests"),n(3,f=0)):c==="tests"?f<l.length?J():n(2,c="feedback"):c==="feedback"&&(ae(),n(2,c="done"))}function J(){ie(),n(13,P=l[f].encoding),n(14,T=l[f].pattern);const se=xt(T,-_o),K=xt(T,_o);n(21,me=se.noteTimes),n(22,xe=K.noteTimes),n(17,Y=se.renderedAudio),n(18,N=K.renderedAudio),n(9,g=0),v=0,x=0,n(10,S=!0),B=[],_=[],h=new Date,z()}function z(){console.log("Starting trial "+g),b={},n(11,E=!0),H()}function H(){let K=M.getLast("ratio");K=Math.random()<.5?K:-K,b.deviation=K;const Me=xt(T,K);n(20,re=Me.noteTimes),Me.noteTimesSeparate,n(19,ge=Me.sampleRate),n(16,W=Me.renderedAudio),console.log("generated pattern"),n(12,$=!0),window.setTimeout(()=>{n(12,$=!1),b.startTime=new Date},1e3)}function D(se){if(!E)return;n(11,E=!1),b.decisionChoice=se,b.errorCode=0,b.timeTaken=(new Date-b.startTime)/1e3;const K=x;(b.decisionChoice==0&&b.deviation<0||b.decisionChoice==1&&b.deviation>0)&&b.errorCode==0&&x++,b.errorCode==0&&(M.next(K!=x),_[_.length]=b),b.errorCode==0&&v++,n(9,g++,g),M.reversalLimitReached("ratio")?G():z()}function G(){n(10,S=!1),n(11,E=!1),ue(),B=[],C=M.getFinalVal("ratio");for(let K=0;K<_.length;K++)B[K]=_[K].deviation;console.log(B);const se=new Date;O.push({encoding:P,pattern:T,final:C,data:B,score:x,testNumber:f,trialCount:g+1,trials:_,validTrialCount:v+1,testTimeSeconds:(se-h)/1e3}),n(3,f++,f)}function ne(se){if(!$)switch(se.key){case"ArrowLeft":E&&D(0);break;case"ArrowRight":E&&D(1);break;case"PageDown":!E&&c!=="done"&&te()}}function ue(){`${x}`,g+1,`${(x/(g+1)*100).toFixed(1)}${M.getFinalVal("ratio")}`}function ae(){const se={studyStep:c,demographics:{partID:i,studyID:a,sessionID:o,partEduation:d,partMusicInstr:m,partMusicInstrYears:p,partVisExperienceYears:y,partFeedback:w,visWidth:I},date:new Date().toISOString(),tests:O};console.log("saving data",se);const K=JSON.stringify(se,void 0,2);fetch(b$,{method:"POST",headers:{"Content-Type":"application/json"},body:K}).then(Me=>{console.log("Data saved:",Me)})}let V=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}],j=Uy(g$);const L=l1*j;let W=null,Y=null,N=null,ge,re=[],me=[],xe=[];(async()=>{n(15,V=await Promise.all(V.map(async se=>({...se,times:se.beats.map(K=>j*(K-1)),timesOriginal:se.beats.map(K=>j*(K-1)),audioBuffer:await og(se.sample)}))))})();const nt=(se,K=0)=>{if(K===0)return V;const Me=De([V]),R=Me.filter(Ee=>Ee.instrument==="hihat")[0],ee=Me.filter(Ee=>Ee.instrument==="snare")[0],le=Me.filter(Ee=>Ee.instrument==="bass")[0];return se==="only-hihat"?R.times[5]=R.timesOriginal[5]+K:se==="hihat-snare"?(ee.times[1]=ee.timesOriginal[1]+K,R.times[6]=R.timesOriginal[6]+K):se==="hihat-bass"?(le.times[1]=le.timesOriginal[1]+K,R.times[4]=R.timesOriginal[4]+K):alert("wrong error mode"),Me},De=se=>{const K=se[0].map(Me=>({...Me,beats:[...Me.beats],times:[...Me.times],timesOriginal:[...Me.timesOriginal]}));for(let Me=1;Me<se.length;Me++){const R=se[Me];for(const ee of R){const le=K.filter(Ee=>Ee.instrument===ee.instrument)[0];le.beats=[...le.beats,...ee.beats.map(Ee=>Ee+Me*l1)],le.times=[...le.times,...ee.times.map(Ee=>Ee+Me*L)],le.timesOriginal=[...le.timesOriginal,...ee.timesOriginal.map(Ee=>Ee+Me*L)]}}return K},xt=(se,K)=>{if(!V[0].audioBuffer)return;const R=[nt(se,K)],ee=De(R),le=ee.map(U=>U.times).flat().sort(),Ee=ee.map(U=>U.times.map(Xe=>({time:Xe,instr:U.instrument}))).flat(1/0).sort((U,Xe)=>{U.time-Xe.time}),Mt=ee[0].audioBuffer.sampleRate,Br=Zl(ee,L*R.length+.1,Mt);return{noteTimes:le,noteTimesSeparate:Ee,sampleRate:Mt,renderedAudio:Br}},Ne=()=>n(0,I*=1.05),Fr=()=>n(0,I*=.95);function Wt(){d=d1(this),n(4,d)}function Te(){m=this.value,n(5,m)}function Pi(){p=Qr(this.value),n(6,p)}function nn(){y=Qr(this.value),n(7,y)}function He(){w=this.value,n(8,w)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(23,r=I/6)},[I,l,c,f,d,m,p,y,w,g,S,E,$,P,T,V,W,Y,N,ge,re,me,xe,r,te,Ne,Fr,Wt,Te,Pi,nn,He]}class w$ extends Ge{constructor(t){super(),qe(this,t,y$,p$,Oe,{},null,[-1,-1,-1])}}function c1(e){let t,n,r,i,a,o,u,s;return{c(){t=k("div"),n=k("button"),n.textContent="Playground",r=q(),i=k("button"),i.textContent="Study",a=q(),o=k("button"),o.textContent="Analysis"},m(l,c){Z(l,t,c),A(t,n),A(t,r),A(t,i),A(t,a),A(t,o),u||(s=[Qe(n,"click",e[1]),Qe(i,"click",e[2]),Qe(o,"click",e[3])],u=!0)},p:de,d(l){l&&X(t),u=!1,gn(s)}}}function v$(e){let t,n;return t=new GT({}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function _$(e){let t,n;return t=new w$({}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function x$(e){let t,n;return t=new sT({}),{c(){Pe(t.$$.fragment)},m(r,i){ve(t,r,i),n=!0},i(r){n||(Q(t.$$.fragment,r),n=!0)},o(r){oe(t.$$.fragment,r),n=!1},d(r){_e(t,r)}}}function M$(e){let t,n,r,i,a,o,u,s=e[0]!=="study_drums"&&c1(e);const l=[x$,_$,v$],c=[];function f(h,d){return h[0]==="playground"?0:h[0]==="study_drums"?1:h[0]==="analysis"?2:-1}return~(a=f(e))&&(o=c[a]=l[a](e)),{c(){t=k("main"),n=k("h1"),n.textContent="Rhythm Error Sensitivity Study",r=q(),s&&s.c(),i=q(),o&&o.c()},m(h,d){Z(h,t,d),A(t,n),A(t,r),s&&s.m(t,null),A(t,i),~a&&c[a].m(t,null),u=!0},p(h,[d]){h[0]!=="study_drums"?s?s.p(h,d):(s=c1(h),s.c(),s.m(t,i)):s&&(s.d(1),s=null);let m=a;a=f(h),a!==m&&(o&&(cn(),oe(c[m],1,1,()=>{c[m]=null}),fn()),~a?(o=c[a],o||(o=c[a]=l[a](h),o.c()),Q(o,1),o.m(t,null)):o=null)},i(h){u||(Q(o),u=!0)},o(h){oe(o),u=!1},d(h){h&&X(t),s&&s.d(),~a&&c[a].d()}}}function P$(e,t,n){let r=Lo(window,"p")??"study_prolific";return r="playground",r="study_drums",[r,()=>n(0,r="playground"),()=>n(0,r="study_drums"),()=>n(0,r="analysis")]}class A$ extends Ge{constructor(t){super(),qe(this,t,P$,M$,Oe,{})}}new A$({target:document.getElementById("app")});export{ag as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-DyMM3-yQ.js","assets/index-CSUFdESr.js","assets/browser-12Dk7PKi.js","assets/index-dPsm3TzX.js","assets/index-CbpveHOb.js","assets/index-nBAeNSNL.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

var U_=Object.defineProperty;var z_=(e,t,n)=>t in e?U_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Nl=(e,t,n)=>(z_(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Me(){}function K1(e){return e()}function ih(){return Object.create(null)}function Nt(e){e.forEach(K1)}function J1(e){return typeof e=="function"}function Je(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ca;function Nf(e,t){return e===t?!0:(ca||(ca=document.createElement("a")),ca.href=t,e===ca.href)}function H_(e){return Object.keys(e).length===0}function w(e,t){e.appendChild(t)}function F(e,t,n){e.insertBefore(t,n||null)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function Qn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function fi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function oe(e){return document.createTextNode(e)}function C(){return oe(" ")}function Yn(){return oe("")}function Ie(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function A(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function At(e){return e===""?null:+e}function V_(e){return Array.from(e.childNodes)}function ze(e,t){t=""+t,e.data!==t&&(e.data=t)}function we(e,t){e.value=t??""}function Xe(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function or(e,t,n){for(let r=0;r<e.options.length;r+=1){const i=e.options[r];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Bs(e){const t=e.querySelector(":checked");return t&&t.__value}let ho;function oo(e){ho=e}function If(){if(!ho)throw new Error("Function called outside component initialization");return ho}function Br(e){If().$$.on_mount.push(e)}function xn(e){If().$$.after_update.push(e)}function W_(e){If().$$.on_destroy.push(e)}const ei=[],_t=[];let ii=[];const oh=[],Y_=Promise.resolve();let Au=!1;function j_(){Au||(Au=!0,Y_.then(Q1))}function Ar(e){ii.push(e)}const Il=new Set;let Vr=0;function Q1(){if(Vr!==0)return;const e=ho;do{try{for(;Vr<ei.length;){const t=ei[Vr];Vr++,oo(t),X_(t.$$)}}catch(t){throw ei.length=0,Vr=0,t}for(oo(null),ei.length=0,Vr=0;_t.length;)_t.pop()();for(let t=0;t<ii.length;t+=1){const n=ii[t];Il.has(n)||(Il.add(n),n())}ii.length=0}while(ei.length);for(;oh.length;)oh.pop()();Au=!1,Il.clear(),oo(e)}function X_(e){if(e.fragment!==null){e.update(),Nt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ar)}}function Z_(e){const t=[],n=[];ii.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),ii=t}const Fa=new Set;let wr;function Ge(){wr={r:0,c:[],p:wr}}function Ue(){wr.r||Nt(wr.c),wr=wr.p}function B(e,t){e&&e.i&&(Fa.delete(e),e.i(t))}function U(e,t,n,r){if(e&&e.o){if(Fa.has(e))return;Fa.add(e),wr.c.push(()=>{Fa.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function pt(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function he(e){e&&e.c()}function ue(e,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(t,n),Ar(()=>{const o=e.$$.on_mount.map(K1).filter(J1);e.$$.on_destroy?e.$$.on_destroy.push(...o):Nt(o),e.$$.on_mount=[]}),i.forEach(Ar)}function fe(e,t){const n=e.$$;n.fragment!==null&&(Z_(n.after_update),Nt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function K_(e,t){e.$$.dirty[0]===-1&&(ei.push(e),j_(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Qe(e,t,n,r,i,o,a=null,s=[-1]){const l=ho;oo(e);const u=e.$$={fragment:null,ctx:[],props:o,update:Me,not_equal:i,bound:ih(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ih(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(u.root);let f=!1;if(u.ctx=n?n(e,t.props||{},(h,c,...m)=>{const d=m.length?m[0]:c;return u.ctx&&i(u.ctx[h],u.ctx[h]=d)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](d),f&&K_(e,h)),c}):[],u.update(),f=!0,Nt(u.before_update),u.fragment=r?r(u.ctx):!1,t.target){if(t.hydrate){const h=V_(t.target);u.fragment&&u.fragment.l(h),h.forEach(R)}else u.fragment&&u.fragment.c();t.intro&&B(e.$$.fragment),ue(e,t.target,t.anchor),Q1()}oo(l)}class et{constructor(){Nl(this,"$$");Nl(this,"$$set")}$destroy(){fe(this,1),this.$destroy=Me}$on(t,n){if(!J1(n))return Me;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(t){this.$$set&&!H_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const J_="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(J_);function St(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fo(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Os(e){let t,n,r;e.length!==2?(t=St,n=(s,l)=>St(e(s),l),r=(s,l)=>e(s)-l):(t=e===St||e===Fo?e:Q_,n=e,r=e);function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<0?u=h+1:f=h}while(u<f)}return u}function o(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function a(s,l,u=0,f=s.length){const h=i(s,l,u,f-1);return h>u&&r(s[h-1],l)>-r(s[h],l)?h-1:h}return{left:i,center:a,right:o}}function Q_(){return 0}function em(e){return e===null?NaN:+e}function*ew(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const tw=Os(St),qs=tw.right;Os(em).center;function Lf(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&++n}return n}function nw(e){return e.length|0}function rw(e){return!(e>0)}function iw(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function ow(e){return t=>e(...t)}function aw(...e){const t=typeof e[e.length-1]=="function"&&ow(e.pop());e=e.map(iw);const n=e.map(nw),r=e.length-1,i=new Array(r+1).fill(0),o=[];if(r<0||n.some(rw))return o;for(;;){o.push(i.map((s,l)=>e[l][s]));let a=r;for(;++i[a]===n[a];){if(a===0)return t?o.map(t):o;i[a--]=0}}}function sw(e,t){var n=0,r=0;return Float64Array.from(e,t===void 0?i=>n+=+i||0:i=>n+=+t(i,r++,e)||0)}function Rf(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function Ff(e,t){const n=Rf(e,t);return n&&Math.sqrt(n)}function Bt(e,t){let n,r;if(t===void 0)for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}class kr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class Er extends Map{constructor(t,n=rm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(ku(this,t))}has(t){return super.has(ku(this,t))}set(t,n){return super.set(tm(this,t),n)}delete(t){return super.delete(nm(this,t))}}class Gs extends Set{constructor(t,n=rm){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(ku(this,t))}add(t){return super.add(tm(this,t))}delete(t){return super.delete(nm(this,t))}}function ku({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function tm({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function nm({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function rm(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Xa(e){return e}function Us(e,...t){return zs(e,Xa,Xa,t)}function Ln(e,...t){return zs(e,Array.from,Xa,t)}function oi(e,t,...n){return zs(e,Xa,t,n)}function lw(e,t,...n){return zs(e,Array.from,t,n)}function zs(e,t,n,r){return function i(o,a){if(a>=r.length)return n(o);const s=new Er,l=r[a++];let u=-1;for(const f of o){const h=l(f,++u,o),c=s.get(h);c?c.push(f):s.set(h,[f])}for(const[f,h]of s)s.set(f,i(h,a));return t(s)}(e,0)}function uw(e,t){return Array.from(t,n=>e[n])}function mo(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n]=t;if(n&&n.length!==2||t.length>1){const r=Uint32Array.from(e,(i,o)=>o);return t.length>1?(t=t.map(i=>e.map(i)),r.sort((i,o)=>{for(const a of t){const s=Za(a[i],a[o]);if(s)return s}})):(n=e.map(n),r.sort((i,o)=>Za(n[i],n[o]))),uw(e,r)}return e.sort(im(n))}function im(e=St){if(e===St)return Za;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Za(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}function Bf(e,t,n){return(t.length!==2?mo(oi(e,t,n),([r,i],[o,a])=>St(i,a)||St(r,o)):mo(Us(e,n),([r,i],[o,a])=>t(i,a)||St(r,o))).map(([r])=>r)}const fw=Math.sqrt(50),cw=Math.sqrt(10),hw=Math.sqrt(2);function Ka(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=fw?10:o>=cw?5:o>=hw?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?Ka(e,t,n*2):[s,l,u]}function po(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?Ka(t,e,n):Ka(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function Ja(e,t,n){return t=+t,e=+e,n=+n,Ka(e,t,n)[2]}function Eu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?Ja(t,e,n):Ja(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function dw(e){return Math.max(1,Math.ceil(Math.log(Lf(e))/Math.LN2)+1)}function zt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function mw(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,r=i);return r}function Gn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function pw(e,t){let n,r=-1,i=-1;if(t===void 0)for(const o of e)++i,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);else for(let o of e)(o=t(o,++i,e))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,r=i);return r}function om(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Za:im(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),h=.5*Math.exp(2*f/3),c=.5*Math.sqrt(f*h*(l-h)/l)*(u-l/2<0?-1:1),m=Math.max(n,Math.floor(t-u*h/l+c)),d=Math.min(r,Math.floor(t+(l-u)*h/l+c));om(e,t,m,d,i)}const o=e[t];let a=n,s=r;for(Li(e,n,t),i(e[r],o)>0&&Li(e,n,r);a<s;){for(Li(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?Li(e,n,s):(++s,Li(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Li(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function am(e,t=St){let n,r=!1;if(t.length===1){let i;for(const o of e){const a=t(o);(r?St(a,i)>0:St(a,a)===0)&&(n=o,i=a,r=!0)}}else for(const i of e)(r?t(i,n)>0:t(i,i)===0)&&(n=i,r=!0);return n}function ci(e,t,n){if(e=Float64Array.from(ew(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Gn(e);if(t>=1)return zt(e);var r,i=(r-1)*t,o=Math.floor(i),a=zt(om(e,o).subarray(0,o+1)),s=Gn(e.subarray(o+1));return a+(s-a)*(i-o)}}function bw(e,t,n=em){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function gw(e,t,n){const r=Lf(e),i=ci(e,.75)-ci(e,.25);return r&&i?Math.ceil((n-t)/(2*i*Math.pow(r,-1/3))):1}function sm(e,t,n){const r=Lf(e),i=Ff(e);return r&&i?Math.ceil((n-t)*Math.cbrt(r)/(3.49*i)):1}function Of(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Cu(e,t){return ci(e,.5,t)}function*yw(e){for(const t of e)yield*t}function lm(e){return Array.from(yw(e))}function _w(e,t){const n=new Er;if(t===void 0)for(let o of e)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let r,i=0;for(const[o,a]of n)a>i&&(i=a,r=o);return r}function ww(e,t=vw){const n=[];let r,i=!1;for(const o of e)i&&n.push(t(r,o)),r=o,i=!0;return n}function vw(e,t){return[e,t]}function Tu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function ar(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Qa(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Mw(e){return e}var Ll=1,Rl=2,$u=3,ha=4,ah=1e-6;function xw(e){return"translate("+e+",0)"}function Pw(e){return"translate(0,"+e+")"}function Sw(e){return t=>+e(t)}function Aw(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function kw(){return!this.__axis}function Ew(e,t){var n=[],r=null,i=null,o=6,a=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===Ll||e===ha?-1:1,f=e===ha||e===Rl?"x":"y",h=e===Ll||e===$u?xw:Pw;function c(m){var d=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):Mw),g=Math.max(o,0)+s,_=t.range(),b=+_[0]+l,v=+_[_.length-1]+l,y=(t.bandwidth?Aw:Sw)(t.copy(),l),x=m.selection?m.selection():m,M=x.selectAll(".domain").data([null]),P=x.selectAll(".tick").data(d,t).order(),$=P.exit(),N=P.enter().append("g").attr("class","tick"),I=P.select("line"),E=P.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),P=P.merge(N),I=I.merge(N.append("line").attr("stroke","currentColor").attr(f+"2",u*o)),E=E.merge(N.append("text").attr("fill","currentColor").attr(f,u*g).attr("dy",e===Ll?"0em":e===$u?"0.71em":"0.32em")),m!==x&&(M=M.transition(m),P=P.transition(m),I=I.transition(m),E=E.transition(m),$=$.transition(m).attr("opacity",ah).attr("transform",function(O){return isFinite(O=y(O))?h(O+l):this.getAttribute("transform")}),N.attr("opacity",ah).attr("transform",function(O){var H=this.parentNode.__axis;return h((H&&isFinite(H=H(O))?H:y(O))+l)})),$.remove(),M.attr("d",e===ha||e===Rl?a?"M"+u*a+","+b+"H"+l+"V"+v+"H"+u*a:"M"+l+","+b+"V"+v:a?"M"+b+","+u*a+"V"+l+"H"+v+"V"+u*a:"M"+b+","+l+"H"+v),P.attr("opacity",1).attr("transform",function(O){return h(y(O)+l)}),I.attr(f+"2",u*o),E.attr(f,u*g).text(p),x.filter(kw).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Rl?"start":e===ha?"end":"middle"),x.each(function(){this.__axis=y})}return c.scale=function(m){return arguments.length?(t=m,c):t},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(m){return arguments.length?(n=m==null?[]:Array.from(m),c):n.slice()},c.tickValues=function(m){return arguments.length?(r=m==null?null:Array.from(m),c):r&&r.slice()},c.tickFormat=function(m){return arguments.length?(i=m,c):i},c.tickSize=function(m){return arguments.length?(o=a=+m,c):o},c.tickSizeInner=function(m){return arguments.length?(o=+m,c):o},c.tickSizeOuter=function(m){return arguments.length?(a=+m,c):a},c.tickPadding=function(m){return arguments.length?(s=+m,c):s},c.offset=function(m){return arguments.length?(l=+m,c):l},c}function Cw(e){return Ew($u,e)}var Tw={value:()=>{}};function um(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ba(n)}function Ba(e){this._=e}function $w(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ba.prototype=um.prototype={constructor:Ba,on:function(e,t){var n=this._,r=$w(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=Dw(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=sh(n[i],e.name,t);else if(t==null)for(i in n)n[i]=sh(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ba(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Dw(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function sh(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Tw,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Du="http://www.w3.org/1999/xhtml";const hi={svg:"http://www.w3.org/2000/svg",xhtml:Du,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Hs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),hi.hasOwnProperty(t)?{space:hi[t],local:e}:e}function Nw(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Du&&t.documentElement.namespaceURI===Du?t.createElement(e):t.createElementNS(n,e)}}function Iw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vs(e){var t=Hs(e);return(t.local?Iw:Nw)(t)}function Lw(){}function qf(e){return e==null?Lw:function(){return this.querySelector(e)}}function Rw(e){typeof e!="function"&&(e=qf(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),l,u,f=0;f<a;++f)(l=o[f])&&(u=e.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new Tt(r,this._parents)}function Fw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Bw(){return[]}function fm(e){return e==null?Bw:function(){return this.querySelectorAll(e)}}function Ow(e){return function(){return Fw(e.apply(this,arguments))}}function qw(e){typeof e=="function"?e=Ow(e):e=fm(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),i.push(l));return new Tt(r,i)}function cm(e){return function(){return this.matches(e)}}function hm(e){return function(t){return t.matches(e)}}var Gw=Array.prototype.find;function Uw(e){return function(){return Gw.call(this.children,e)}}function zw(){return this.firstElementChild}function Hw(e){return this.select(e==null?zw:Uw(typeof e=="function"?e:hm(e)))}var Vw=Array.prototype.filter;function Ww(){return Array.from(this.children)}function Yw(e){return function(){return Vw.call(this.children,e)}}function jw(e){return this.selectAll(e==null?Ww:Yw(typeof e=="function"?e:hm(e)))}function Xw(e){typeof e!="function"&&(e=cm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Tt(r,this._parents)}function dm(e){return new Array(e.length)}function Zw(){return new Tt(this._enter||this._groups.map(dm),this._parents)}function es(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}es.prototype={constructor:es,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Kw(e){return function(){return e}}function Jw(e,t,n,r,i,o){for(var a=0,s,l=t.length,u=o.length;a<u;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new es(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Qw(e,t,n,r,i,o,a){var s,l,u=new Map,f=t.length,h=o.length,c=new Array(f),m;for(s=0;s<f;++s)(l=t[s])&&(c[s]=m=a.call(l,l.__data__,s,t)+"",u.has(m)?i[s]=l:u.set(m,l));for(s=0;s<h;++s)m=a.call(e,o[s],s,o)+"",(l=u.get(m))?(r[s]=l,l.__data__=o[s],u.delete(m)):n[s]=new es(e,o[s]);for(s=0;s<f;++s)(l=t[s])&&u.get(c[s])===l&&(i[s]=l)}function e3(e){return e.__data__}function t3(e,t){if(!arguments.length)return Array.from(this,e3);var n=t?Qw:Jw,r=this._parents,i=this._groups;typeof e!="function"&&(e=Kw(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=r[u],h=i[u],c=h.length,m=n3(e.call(f,f&&f.__data__,u,r)),d=m.length,p=s[u]=new Array(d),g=a[u]=new Array(d),_=l[u]=new Array(c);n(f,h,p,g,_,m,t);for(var b=0,v=0,y,x;b<d;++b)if(y=p[b]){for(b>=v&&(v=b+1);!(x=g[v])&&++v<d;);y._next=x||null}}return a=new Tt(a,r),a._enter=s,a._exit=l,a}function n3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function r3(){return new Tt(this._exit||this._groups.map(dm),this._parents)}function i3(e,t,n){var r=this.enter(),i=this,o=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function o3(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var u=n[l],f=r[l],h=u.length,c=s[l]=new Array(h),m,d=0;d<h;++d)(m=u[d]||f[d])&&(c[d]=m);for(;l<i;++l)s[l]=n[l];return new Tt(s,this._parents)}function a3(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function s3(e){e||(e=l3);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),u,f=0;f<s;++f)(u=a[f])&&(l[f]=u);l.sort(t)}return new Tt(i,this._parents).order()}function l3(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function u3(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function f3(){return Array.from(this)}function c3(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function h3(){let e=0;for(const t of this)++e;return e}function d3(){return!this.node()}function m3(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function p3(e){return function(){this.removeAttribute(e)}}function b3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function g3(e,t){return function(){this.setAttribute(e,t)}}function y3(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function _3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function w3(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function v3(e,t){var n=Hs(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?b3:p3:typeof t=="function"?n.local?w3:_3:n.local?y3:g3)(n,t))}function mm(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function M3(e){return function(){this.style.removeProperty(e)}}function x3(e,t,n){return function(){this.style.setProperty(e,t,n)}}function P3(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function S3(e,t,n){return arguments.length>1?this.each((t==null?M3:typeof t=="function"?P3:x3)(e,t,n??"")):di(this.node(),e)}function di(e,t){return e.style.getPropertyValue(t)||mm(e).getComputedStyle(e,null).getPropertyValue(t)}function A3(e){return function(){delete this[e]}}function k3(e,t){return function(){this[e]=t}}function E3(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function C3(e,t){return arguments.length>1?this.each((t==null?A3:typeof t=="function"?E3:k3)(e,t)):this.node()[e]}function pm(e){return e.trim().split(/^|\s+/)}function Gf(e){return e.classList||new bm(e)}function bm(e){this._node=e,this._names=pm(e.getAttribute("class")||"")}bm.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function gm(e,t){for(var n=Gf(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ym(e,t){for(var n=Gf(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function T3(e){return function(){gm(this,e)}}function $3(e){return function(){ym(this,e)}}function D3(e,t){return function(){(t.apply(this,arguments)?gm:ym)(this,e)}}function N3(e,t){var n=pm(e+"");if(arguments.length<2){for(var r=Gf(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?D3:t?T3:$3)(n,t))}function I3(){this.textContent=""}function L3(e){return function(){this.textContent=e}}function R3(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function F3(e){return arguments.length?this.each(e==null?I3:(typeof e=="function"?R3:L3)(e)):this.node().textContent}function B3(){this.innerHTML=""}function O3(e){return function(){this.innerHTML=e}}function q3(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function G3(e){return arguments.length?this.each(e==null?B3:(typeof e=="function"?q3:O3)(e)):this.node().innerHTML}function U3(){this.nextSibling&&this.parentNode.appendChild(this)}function z3(){return this.each(U3)}function H3(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V3(){return this.each(H3)}function W3(e){var t=typeof e=="function"?e:Vs(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Y3(){return null}function j3(e,t){var n=typeof e=="function"?e:Vs(e),r=t==null?Y3:typeof t=="function"?t:qf(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function X3(){var e=this.parentNode;e&&e.removeChild(this)}function Z3(){return this.each(X3)}function K3(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function J3(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Q3(e){return this.select(e?J3:K3)}function ev(e){return arguments.length?this.property("__data__",e):this.node().__data__}function tv(e){return function(t){e.call(this,t,this.__data__)}}function nv(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function rv(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function iv(e,t,n){return function(){var r=this.__on,i,o=tv(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ov(e,t,n){var r=nv(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=t?iv:rv,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function _m(e,t,n){var r=mm(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function av(e,t){return function(){return _m(this,e,t)}}function sv(e,t){return function(){return _m(this,e,t.apply(this,arguments))}}function lv(e,t){return this.each((typeof t=="function"?sv:av)(e,t))}function*uv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var wm=[null];function Tt(e,t){this._groups=e,this._parents=t}function Bo(){return new Tt([[document.documentElement]],wm)}function fv(){return this}Tt.prototype=Bo.prototype={constructor:Tt,select:Rw,selectAll:qw,selectChild:Hw,selectChildren:jw,filter:Xw,data:t3,enter:Zw,exit:r3,join:i3,merge:o3,selection:fv,order:a3,sort:s3,call:u3,nodes:f3,node:c3,size:h3,empty:d3,each:m3,attr:v3,style:S3,property:C3,classed:N3,text:F3,html:G3,raise:z3,lower:V3,append:W3,insert:j3,remove:Z3,clone:Q3,datum:ev,on:ov,dispatch:lv,[Symbol.iterator]:uv};function ao(e){return typeof e=="string"?new Tt([[document.querySelector(e)]],[document.documentElement]):new Tt([[e]],wm)}function cv(e){let t;for(;t=e.sourceEvent;)e=t;return e}function hv(e,t){if(e=cv(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function Ci(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Oo(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function cr(){}var Cr=.7,mi=1/Cr,ai="\\s*([+-]?\\d+)\\s*",bo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dv=/^#([0-9a-f]{3,8})$/,mv=new RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),pv=new RegExp(`^rgb\\(${bn},${bn},${bn}\\)$`),bv=new RegExp(`^rgba\\(${ai},${ai},${ai},${bo}\\)$`),gv=new RegExp(`^rgba\\(${bn},${bn},${bn},${bo}\\)$`),yv=new RegExp(`^hsl\\(${bo},${bn},${bn}\\)$`),_v=new RegExp(`^hsla\\(${bo},${bn},${bn},${bo}\\)$`),lh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ci(cr,Tr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:uh,formatHex:uh,formatHex8:wv,formatHsl:vv,formatRgb:fh,toString:fh});function uh(){return this.rgb().formatHex()}function wv(){return this.rgb().formatHex8()}function vv(){return vm(this).formatHsl()}function fh(){return this.rgb().formatRgb()}function Tr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dv.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ch(t):n===3?new st(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=mv.exec(e))?new st(t[1],t[2],t[3],1):(t=pv.exec(e))?new st(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=bv.exec(e))?da(t[1],t[2],t[3],t[4]):(t=gv.exec(e))?da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=yv.exec(e))?mh(t[1],t[2]/100,t[3]/100,1):(t=_v.exec(e))?mh(t[1],t[2]/100,t[3]/100,t[4]):lh.hasOwnProperty(e)?ch(lh[e]):e==="transparent"?new st(NaN,NaN,NaN,0):null}function ch(e){return new st(e>>16&255,e>>8&255,e&255,1)}function da(e,t,n,r){return r<=0&&(e=t=n=NaN),new st(e,t,n,r)}function Uf(e){return e instanceof cr||(e=Tr(e)),e?(e=e.rgb(),new st(e.r,e.g,e.b,e.opacity)):new st}function sr(e,t,n,r){return arguments.length===1?Uf(e):new st(e,t,n,r??1)}function st(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ci(st,sr,Oo(cr,{brighter(e){return e=e==null?mi:Math.pow(mi,e),new st(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new st(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new st(xr(this.r),xr(this.g),xr(this.b),ts(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:hh,formatHex:hh,formatHex8:Mv,formatRgb:dh,toString:dh}));function hh(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}`}function Mv(){return`#${vr(this.r)}${vr(this.g)}${vr(this.b)}${vr((isNaN(this.opacity)?1:this.opacity)*255)}`}function dh(){const e=ts(this.opacity);return`${e===1?"rgb(":"rgba("}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${e===1?")":`, ${e})`}`}function ts(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vr(e){return e=xr(e),(e<16?"0":"")+e.toString(16)}function mh(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Zt(e,t,n,r)}function vm(e){if(e instanceof Zt)return new Zt(e.h,e.s,e.l,e.opacity);if(e instanceof cr||(e=Tr(e)),!e)return new Zt;if(e instanceof Zt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Zt(a,s,l,e.opacity)}function Nu(e,t,n,r){return arguments.length===1?vm(e):new Zt(e,t,n,r??1)}function Zt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ci(Zt,Nu,Oo(cr,{brighter(e){return e=e==null?mi:Math.pow(mi,e),new Zt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new Zt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new st(Fl(e>=240?e-240:e+120,i,r),Fl(e,i,r),Fl(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Zt(ph(this.h),ma(this.s),ma(this.l),ts(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ts(this.opacity);return`${e===1?"hsl(":"hsla("}${ph(this.h)}, ${ma(this.s)*100}%, ${ma(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ph(e){return e=(e||0)%360,e<0?e+360:e}function ma(e){return Math.max(0,Math.min(1,e||0))}function Fl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Mm=Math.PI/180,xm=180/Math.PI,ns=18,Pm=.96422,Sm=1,Am=.82521,km=4/29,si=6/29,Em=3*si*si,xv=si*si*si;function Cm(e){if(e instanceof gn)return new gn(e.l,e.a,e.b,e.opacity);if(e instanceof Bn)return Tm(e);e instanceof st||(e=Uf(e));var t=Gl(e.r),n=Gl(e.g),r=Gl(e.b),i=Bl((.2225045*t+.7168786*n+.0606169*r)/Sm),o,a;return t===n&&n===r?o=a=i:(o=Bl((.4360747*t+.3850649*n+.1430804*r)/Pm),a=Bl((.0139322*t+.0971045*n+.7141733*r)/Am)),new gn(116*i-16,500*(o-i),200*(i-a),e.opacity)}function Iu(e,t,n,r){return arguments.length===1?Cm(e):new gn(e,t,n,r??1)}function gn(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ci(gn,Iu,Oo(cr,{brighter(e){return new gn(this.l+ns*(e??1),this.a,this.b,this.opacity)},darker(e){return new gn(this.l-ns*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Pm*Ol(t),e=Sm*Ol(e),n=Am*Ol(n),new st(ql(3.1338561*t-1.6168667*e-.4906146*n),ql(-.9787684*t+1.9161415*e+.033454*n),ql(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Bl(e){return e>xv?Math.pow(e,1/3):e/Em+km}function Ol(e){return e>si?e*e*e:Em*(e-km)}function ql(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Gl(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Pv(e){if(e instanceof Bn)return new Bn(e.h,e.c,e.l,e.opacity);if(e instanceof gn||(e=Cm(e)),e.a===0&&e.b===0)return new Bn(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*xm;return new Bn(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Lu(e,t,n,r){return arguments.length===1?Pv(e):new Bn(e,t,n,r??1)}function Bn(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Tm(e){if(isNaN(e.h))return new gn(e.l,0,0,e.opacity);var t=e.h*Mm;return new gn(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ci(Bn,Lu,Oo(cr,{brighter(e){return new Bn(this.h,this.c,this.l+ns*(e??1),this.opacity)},darker(e){return new Bn(this.h,this.c,this.l-ns*(e??1),this.opacity)},rgb(){return Tm(this).rgb()}}));var $m=-.14861,zf=1.78277,Hf=-.29227,Ws=-.90649,go=1.97294,bh=go*Ws,gh=go*zf,yh=zf*Hf-Ws*$m;function Sv(e){if(e instanceof Pr)return new Pr(e.h,e.s,e.l,e.opacity);e instanceof st||(e=Uf(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(yh*r+bh*t-gh*n)/(yh+bh-gh),o=r-i,a=(go*(n-i)-Hf*o)/Ws,s=Math.sqrt(a*a+o*o)/(go*i*(1-i)),l=s?Math.atan2(a,o)*xm-120:NaN;return new Pr(l<0?l+360:l,s,i,e.opacity)}function vn(e,t,n,r){return arguments.length===1?Sv(e):new Pr(e,t,n,r??1)}function Pr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ci(Pr,vn,Oo(cr,{brighter(e){return e=e==null?mi:Math.pow(mi,e),new Pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cr:Math.pow(Cr,e),new Pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Mm,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new st(255*(t+n*($m*r+zf*i)),255*(t+n*(Hf*r+Ws*i)),255*(t+n*(go*r)),this.opacity)}}));function Av(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function kv(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Av((n-r/t)*t,a,i,o,s)}}const Ys=e=>()=>e;function Dm(e,t){return function(n){return e+n*t}}function Ev(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Vf(e,t){var n=t-e;return n?Dm(e,n>180||n<-180?n-360*Math.round(n/360):n):Ys(isNaN(e)?t:e)}function Cv(e){return(e=+e)==1?ht:function(t,n){return n-t?Ev(t,n,e):Ys(isNaN(t)?n:t)}}function ht(e,t){var n=t-e;return n?Dm(e,n):Ys(isNaN(e)?t:e)}const $r=function e(t){var n=Cv(t);function r(i,o){var a=n((i=sr(i)).r,(o=sr(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=ht(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function Tv(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=sr(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=o(l),s+""}}}var $v=Tv(kv);function Dv(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function Nv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Iv(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=qo(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Lv(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ct(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Rv(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=qo(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Ru=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ul=new RegExp(Ru.source,"g");function Fv(e){return function(){return e}}function Bv(e){return function(t){return e(t)+""}}function Nm(e,t){var n=Ru.lastIndex=Ul.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Ru.exec(e))&&(i=Ul.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ct(r,i)})),n=Ul.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Bv(l[0].x):Fv(t):(t=l.length,function(u){for(var f=0,h;f<t;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}function qo(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ys(t):(n==="number"?ct:n==="string"?(r=Tr(t))?(t=r,$r):Nm:t instanceof Tr?$r:t instanceof Date?Lv:Nv(t)?Dv:Array.isArray(t)?Iv:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Rv:ct)(e,t)}function Wf(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var _h=180/Math.PI,Fu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Im(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*_h,skewX:Math.atan(l)*_h,scaleX:a,scaleY:s}}var pa;function Ov(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Fu:Im(t.a,t.b,t.c,t.d,t.e,t.f)}function qv(e){return e==null||(pa||(pa=document.createElementNS("http://www.w3.org/2000/svg","g")),pa.setAttribute("transform",e),!(e=pa.transform.baseVal.consolidate()))?Fu:(e=e.matrix,Im(e.a,e.b,e.c,e.d,e.e,e.f))}function Lm(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,m,d){if(u!==h||f!==c){var p=m.push("translate(",null,t,null,n);d.push({i:p-4,x:ct(u,h)},{i:p-2,x:ct(f,c)})}else(h||c)&&m.push("translate("+h+t+c+n)}function a(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:ct(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:ct(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function l(u,f,h,c,m,d){if(u!==h||f!==c){var p=m.push(i(m)+"scale(",null,",",null,")");d.push({i:p-4,x:ct(u,h)},{i:p-2,x:ct(f,c)})}else(h!==1||c!==1)&&m.push(i(m)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),a(u.rotate,f.rotate,h,c),s(u.skewX,f.skewX,h,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(m){for(var d=-1,p=c.length,g;++d<p;)h[(g=c[d]).i]=g.x(m);return h.join("")}}}var Gv=Lm(Ov,"px, ","px)","deg)"),Uv=Lm(qv,", ",")",")");function zv(e){return function(t,n){var r=e((t=Nu(t)).h,(n=Nu(n)).h),i=ht(t.s,n.s),o=ht(t.l,n.l),a=ht(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const Hv=zv(Vf);function Vv(e,t){var n=ht((e=Iu(e)).l,(t=Iu(t)).l),r=ht(e.a,t.a),i=ht(e.b,t.b),o=ht(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function Wv(e){return function(t,n){var r=e((t=Lu(t)).h,(n=Lu(n)).h),i=ht(t.c,n.c),o=ht(t.l,n.l),a=ht(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const Yv=Wv(Vf);function Rm(e){return function t(n){n=+n;function r(i,o){var a=e((i=vn(i)).h,(o=vn(o)).h),s=ht(i.s,o.s),l=ht(i.l,o.l),u=ht(i.opacity,o.opacity);return function(f){return i.h=a(f),i.s=s(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r}(1)}Rm(Vf);var Yf=Rm(ht);function js(e,t){t===void 0&&(t=e,e=qo);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Qt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}var pi=0,Yi=0,Ri=0,Fm=1e3,rs,ji,is=0,Dr=0,Xs=0,yo=typeof performance=="object"&&performance.now?performance:Date,Bm=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jf(){return Dr||(Bm(jv),Dr=yo.now()+Xs)}function jv(){Dr=0}function os(){this._call=this._time=this._next=null}os.prototype=Om.prototype={constructor:os,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jf():+n)+(t==null?0:+t),!this._next&&ji!==this&&(ji?ji._next=this:rs=this,ji=this),this._call=e,this._time=n,Bu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Bu())}};function Om(e,t,n){var r=new os;return r.restart(e,t,n),r}function Xv(){jf(),++pi;for(var e=rs,t;e;)(t=Dr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pi}function wh(){Dr=(is=yo.now())+Xs,pi=Yi=0;try{Xv()}finally{pi=0,Kv(),Dr=0}}function Zv(){var e=yo.now(),t=e-is;t>Fm&&(Xs-=t,is=e)}function Kv(){for(var e,t=rs,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:rs=n);ji=e,Bu(r)}function Bu(e){if(!pi){Yi&&(Yi=clearTimeout(Yi));var t=e-Dr;t>24?(e<1/0&&(Yi=setTimeout(wh,e-yo.now()-Xs)),Ri&&(Ri=clearInterval(Ri))):(Ri||(is=yo.now(),Ri=setInterval(Zv,Fm)),pi=1,Bm(wh))}}function vh(e,t,n){var r=new os;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Jv=um("start","end","cancel","interrupt"),Qv=[],qm=0,Mh=1,Ou=2,Oa=3,xh=4,qu=5,qa=6;function Zs(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;e5(e,n,{name:t,index:r,group:i,on:Jv,tween:Qv,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:qm})}function Xf(e,t){var n=rn(e,t);if(n.state>qm)throw new Error("too late; already scheduled");return n}function Pn(e,t){var n=rn(e,t);if(n.state>Oa)throw new Error("too late; already running");return n}function rn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function e5(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Om(o,0,n.time);function o(u){n.state=Mh,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,h,c,m;if(n.state!==Mh)return l();for(f in r)if(m=r[f],m.name===n.name){if(m.state===Oa)return vh(a);m.state===xh?(m.state=qa,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[f]):+f<t&&(m.state=qa,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[f])}if(vh(function(){n.state===Oa&&(n.state=xh,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Ou,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Ou){for(n.state=Oa,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(m=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=m);i.length=h+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=qu,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===qu&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=qa,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function t5(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Ou&&r.state<qu,r.state=qa,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function n5(e){return this.each(function(){t5(this,e)})}function r5(e,t){var n,r;return function(){var i=Pn(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function i5(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=Pn(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function o5(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=rn(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?r5:i5)(n,e,t))}function Zf(e,t,n){var r=e._id;return e.each(function(){var i=Pn(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return rn(i,r).value[t]}}function Gm(e,t){var n;return(typeof t=="number"?ct:t instanceof Tr?$r:(n=Tr(t))?(t=n,$r):Nm)(e,t)}function a5(e){return function(){this.removeAttribute(e)}}function s5(e){return function(){this.removeAttributeNS(e.space,e.local)}}function l5(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function u5(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function f5(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function c5(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function h5(e,t){var n=Hs(e),r=n==="transform"?Uv:Gm;return this.attrTween(e,typeof t=="function"?(n.local?c5:f5)(n,r,Zf(this,"attr."+e,t)):t==null?(n.local?s5:a5)(n):(n.local?u5:l5)(n,r,t))}function d5(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function m5(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function p5(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&m5(e,o)),n}return i._value=t,i}function b5(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&d5(e,o)),n}return i._value=t,i}function g5(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Hs(e);return this.tween(n,(r.local?p5:b5)(r,t))}function y5(e,t){return function(){Xf(this,e).delay=+t.apply(this,arguments)}}function _5(e,t){return t=+t,function(){Xf(this,e).delay=t}}function w5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?y5:_5)(t,e)):rn(this.node(),t).delay}function v5(e,t){return function(){Pn(this,e).duration=+t.apply(this,arguments)}}function M5(e,t){return t=+t,function(){Pn(this,e).duration=t}}function x5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?v5:M5)(t,e)):rn(this.node(),t).duration}function P5(e,t){if(typeof t!="function")throw new Error;return function(){Pn(this,e).ease=t}}function S5(e){var t=this._id;return arguments.length?this.each(P5(t,e)):rn(this.node(),t).ease}function A5(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pn(this,e).ease=n}}function k5(e){if(typeof e!="function")throw new Error;return this.each(A5(this._id,e))}function E5(e){typeof e!="function"&&(e=cm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Un(r,this._parents,this._name,this._id)}function C5(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=t[s],u=n[s],f=l.length,h=a[s]=new Array(f),c,m=0;m<f;++m)(c=l[m]||u[m])&&(h[m]=c);for(;s<r;++s)a[s]=t[s];return new Un(a,this._parents,this._name,this._id)}function T5(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $5(e,t,n){var r,i,o=T5(t)?Xf:Pn;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function D5(e,t){var n=this._id;return arguments.length<2?rn(this.node(),n).on.on(e):this.each($5(n,e,t))}function N5(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function I5(){return this.on("end.remove",N5(this._id))}function L5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qf(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,u=o[a]=new Array(l),f,h,c=0;c<l;++c)(f=s[c])&&(h=e.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,Zs(u[c],t,n,c,u,rn(f,n)));return new Un(o,this._parents,t,n)}function R5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fm(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var c=e.call(f,f.__data__,h,l),m,d=rn(f,n),p=0,g=c.length;p<g;++p)(m=c[p])&&Zs(m,t,n,p,c,d);o.push(c),a.push(f)}return new Un(o,a,t,n)}var F5=Bo.prototype.constructor;function B5(){return new F5(this._groups,this._parents)}function O5(e,t){var n,r,i;return function(){var o=di(this,e),a=(this.style.removeProperty(e),di(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function Um(e){return function(){this.style.removeProperty(e)}}function q5(e,t,n){var r,i=n+"",o;return function(){var a=di(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function G5(e,t,n){var r,i,o;return function(){var a=di(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),di(this,e))),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}function U5(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var l=Pn(this,e),u=l.on,f=l.value[o]==null?s||(s=Um(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),l.on=r}}function z5(e,t,n){var r=(e+="")=="transform"?Gv:Gm;return t==null?this.styleTween(e,O5(e,r)).on("end.style."+e,Um(e)):typeof t=="function"?this.styleTween(e,G5(e,r,Zf(this,"style."+e,t))).each(U5(this._id,e)):this.styleTween(e,q5(e,r,t),n).on("end.style."+e,null)}function H5(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function V5(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&H5(e,a,n)),r}return o._value=t,o}function W5(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,V5(e,t,n??""))}function Y5(e){return function(){this.textContent=e}}function j5(e){return function(){var t=e(this);this.textContent=t??""}}function X5(e){return this.tween("text",typeof e=="function"?j5(Zf(this,"text",e)):Y5(e==null?"":e+""))}function Z5(e){return function(t){this.textContent=e.call(this,t)}}function K5(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Z5(i)),t}return r._value=e,r}function J5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,K5(e))}function Q5(){for(var e=this._name,t=this._id,n=zm(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var f=rn(l,t);Zs(l,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Un(r,this._parents,e,n)}function e6(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var u=Pn(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&o()})}var t6=0;function Un(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zm(){return++t6}var Cn=Bo.prototype;Un.prototype={constructor:Un,select:L5,selectAll:R5,selectChild:Cn.selectChild,selectChildren:Cn.selectChildren,filter:E5,merge:C5,selection:B5,transition:Q5,call:Cn.call,nodes:Cn.nodes,node:Cn.node,size:Cn.size,empty:Cn.empty,each:Cn.each,on:D5,attr:h5,attrTween:g5,style:z5,styleTween:W5,text:X5,textTween:J5,remove:I5,tween:o5,delay:w5,duration:x5,ease:S5,easeVarying:k5,end:e6,[Symbol.iterator]:Cn[Symbol.iterator]};function n6(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var r6={time:null,delay:0,duration:250,ease:n6};function i6(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function o6(e){var t,n;e instanceof Un?(t=e._id,e=e._name):(t=zm(),(n=r6).time=jf(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&Zs(l,e,t,u,a,n||i6(l,t));return new Un(r,this._parents,e,t)}Bo.prototype.interrupt=n5;Bo.prototype.transition=o6;const Gu=Math.PI,Uu=2*Gu,yr=1e-6,a6=Uu-yr;function Hm(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function s6(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Hm;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Vm{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Hm:s6(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-t,u=i-n,f=a-t,h=s-n,c=f*f+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(c>yr)if(!(Math.abs(h*l-u*f)>yr)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-a,d=i-s,p=l*l+u*u,g=m*m+d*d,_=Math.sqrt(p),b=Math.sqrt(c),v=o*Math.tan((Gu-Math.acos((p+c-g)/(2*_*b)))/2),y=v/b,x=v/_;Math.abs(y-1)>yr&&this._append`L${t+y*f},${n+y*h}`,this._append`A${o},${o},0,0,${+(h*m>f*d)},${this._x1=t+x*l},${this._y1=n+x*u}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=t+s,f=n+l,h=1^a,c=a?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>yr||Math.abs(this._y1-f)>yr)&&this._append`L${u},${f}`,r&&(c<0&&(c=c%Uu+Uu),c>a6?this._append`A${r},${r},0,1,${h},${t-s},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:c>yr&&this._append`A${r},${r},0,${+(c>=Gu)},${h},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function tr(e=3){return new Vm(+e)}var Ph={},zl={},Hl=34,Fi=10,Vl=13;function Wm(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function l6(e,t){var n=Wm(e);return function(r,i){return t(n(r),i,e)}}function Sh(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Mt(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function u6(e){return e<0?"-"+Mt(-e,6):e>9999?"+"+Mt(e,6):Mt(e,4)}function f6(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":u6(e.getUTCFullYear())+"-"+Mt(e.getUTCMonth()+1,2)+"-"+Mt(e.getUTCDate(),2)+(i?"T"+Mt(t,2)+":"+Mt(n,2)+":"+Mt(r,2)+"."+Mt(i,3)+"Z":r?"T"+Mt(t,2)+":"+Mt(n,2)+":"+Mt(r,2)+"Z":n||t?"T"+Mt(t,2)+":"+Mt(n,2)+"Z":"")}function c6(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,c){var m,d,p=i(h,function(g,_){if(m)return m(g,_-1);d=g,m=c?l6(g,c):Wm(g)});return p.columns=d||[],p}function i(h,c){var m=[],d=h.length,p=0,g=0,_,b=d<=0,v=!1;h.charCodeAt(d-1)===Fi&&--d,h.charCodeAt(d-1)===Vl&&--d;function y(){if(b)return zl;if(v)return v=!1,Ph;var M,P=p,$;if(h.charCodeAt(P)===Hl){for(;p++<d&&h.charCodeAt(p)!==Hl||h.charCodeAt(++p)===Hl;);return(M=p)>=d?b=!0:($=h.charCodeAt(p++))===Fi?v=!0:$===Vl&&(v=!0,h.charCodeAt(p)===Fi&&++p),h.slice(P+1,M-1).replace(/""/g,'"')}for(;p<d;){if(($=h.charCodeAt(M=p++))===Fi)v=!0;else if($===Vl)v=!0,h.charCodeAt(p)===Fi&&++p;else if($!==n)continue;return h.slice(P,M)}return b=!0,h.slice(P,d)}for(;(_=y())!==zl;){for(var x=[];_!==Ph&&_!==zl;)x.push(_),_=y();c&&(x=c(x,g++))==null||m.push(x)}return m}function o(h,c){return h.map(function(m){return c.map(function(d){return f(m[d])}).join(e)})}function a(h,c){return c==null&&(c=Sh(h)),[c.map(f).join(e)].concat(o(h,c)).join(`
`)}function s(h,c){return c==null&&(c=Sh(h)),o(h,c).join(`
`)}function l(h){return h.map(u).join(`
`)}function u(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?f6(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:f}}var h6=c6(","),d6=h6.parse;function m6(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function as(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function bi(e){return e=as(Math.abs(e)),e?e[1]:NaN}function p6(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function b6(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var g6=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _o(e){if(!(t=g6.exec(e)))throw new Error("invalid format: "+e);var t;return new Kf({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}_o.prototype=Kf.prototype;function Kf(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Kf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function y6(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Ym;function _6(e,t){var n=as(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(Ym=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+as(e,Math.max(0,t+o-1))[0]}function Ah(e,t){var n=as(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const kh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:m6,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ah(e*100,t),r:Ah,s:_6,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Eh(e){return e}var Ch=Array.prototype.map,Th=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function w6(e){var t=e.grouping===void 0||e.thousands===void 0?Eh:p6(Ch.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?Eh:b6(Ch.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(h){h=_o(h);var c=h.fill,m=h.align,d=h.sign,p=h.symbol,g=h.zero,_=h.width,b=h.comma,v=h.precision,y=h.trim,x=h.type;x==="n"?(b=!0,x="g"):kh[x]||(v===void 0&&(v=12),y=!0,x="g"),(g||c==="0"&&m==="=")&&(g=!0,c="0",m="=");var M=p==="$"?n:p==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",P=p==="$"?r:/[%p]/.test(x)?a:"",$=kh[x],N=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function I(E){var O=M,H=P,D,T,z;if(x==="c")H=$(E)+H,E="";else{E=+E;var ae=E<0||1/E<0;if(E=isNaN(E)?l:$(Math.abs(E),v),y&&(E=y6(E)),ae&&+E==0&&d!=="+"&&(ae=!1),O=(ae?d==="("?d:s:d==="-"||d==="("?"":d)+O,H=(x==="s"?Th[8+Ym/3]:"")+H+(ae&&d==="("?")":""),N){for(D=-1,T=E.length;++D<T;)if(z=E.charCodeAt(D),48>z||z>57){H=(z===46?i+E.slice(D+1):E.slice(D))+H,E=E.slice(0,D);break}}}b&&!g&&(E=t(E,1/0));var ne=O.length+E.length+H.length,se=ne<_?new Array(_-ne+1).join(c):"";switch(b&&g&&(E=t(se+E,se.length?_-H.length:1/0),se=""),m){case"<":E=O+E+H+se;break;case"=":E=O+se+E+H;break;case"^":E=se.slice(0,ne=se.length>>1)+O+E+H+se.slice(ne);break;default:E=se+O+E+H;break}return o(E)}return I.toString=function(){return h+""},I}function f(h,c){var m=u((h=_o(h),h.type="f",h)),d=Math.max(-8,Math.min(8,Math.floor(bi(c)/3)))*3,p=Math.pow(10,-d),g=Th[8+d/3];return function(_){return m(p*_)+g}}return{format:u,formatPrefix:f}}var ba,Ti,jm;v6({thousands:",",grouping:[3],currency:["$",""]});function v6(e){return ba=w6(e),Ti=ba.format,jm=ba.formatPrefix,ba}function M6(e){return Math.max(0,-bi(Math.abs(e)))}function x6(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bi(t)/3)))*3-bi(Math.abs(e)))}function P6(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,bi(t)-bi(e))+1}var xe=1e-6,Xm=1e-12,ke=Math.PI,We=ke/2,$h=ke/4,$t=ke*2,bt=180/ke,Ve=ke/180,Re=Math.abs,$i=Math.atan,zn=Math.atan2,Ae=Math.cos,Zm=Math.exp,ss=Math.log,Wl=Math.pow,ve=Math.sin,Ot=Math.sign||function(e){return e>0?1:e<0?-1:0},kt=Math.sqrt,Jf=Math.tan;function Km(e){return e>1?0:e<-1?ke:Math.acos(e)}function Ht(e){return e>1?We:e<-1?-We:Math.asin(e)}function qt(){}function ls(e,t){e&&Nh.hasOwnProperty(e.type)&&Nh[e.type](e,t)}var Dh={Feature:function(e,t){ls(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ls(n[r].geometry,t)}},Nh={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){zu(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)zu(n[r],t,0)},Polygon:function(e,t){Ih(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Ih(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ls(n[r],t)}};function zu(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function Ih(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)zu(e[n],t,1);t.polygonEnd()}function _r(e,t){e&&Dh.hasOwnProperty(e.type)?Dh[e.type](e,t):ls(e,t)}function Hu(e){return[zn(e[1],e[0]),Ht(e[2])]}function gi(e){var t=e[0],n=e[1],r=Ae(n);return[r*Ae(t),r*ve(t),ve(n)]}function ga(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function us(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Yl(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ya(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Vu(e){var t=kt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function Wu(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function Yu(e,t){return Re(e)>ke&&(e-=Math.round(e/$t)*$t),[e,t]}Yu.invert=Yu;function Jm(e,t,n){return(e%=$t)?t||n?Wu(Rh(e),Fh(t,n)):Rh(e):t||n?Fh(t,n):Yu}function Lh(e){return function(t,n){return t+=e,Re(t)>ke&&(t-=Math.round(t/$t)*$t),[t,n]}}function Rh(e){var t=Lh(e);return t.invert=Lh(-e),t}function Fh(e,t){var n=Ae(e),r=ve(e),i=Ae(t),o=ve(t);function a(s,l){var u=Ae(l),f=Ae(s)*u,h=ve(s)*u,c=ve(l),m=c*n+f*r;return[zn(h*i-m*o,f*n-c*r),Ht(m*i+h*o)]}return a.invert=function(s,l){var u=Ae(l),f=Ae(s)*u,h=ve(s)*u,c=ve(l),m=c*i-h*o;return[zn(h*i+c*o,f*n+m*r),Ht(m*n-f*r)]},a}function S6(e){e=Jm(e[0]*Ve,e[1]*Ve,e.length>2?e[2]*Ve:0);function t(n){return n=e(n[0]*Ve,n[1]*Ve),n[0]*=bt,n[1]*=bt,n}return t.invert=function(n){return n=e.invert(n[0]*Ve,n[1]*Ve),n[0]*=bt,n[1]*=bt,n},t}function A6(e,t,n,r,i,o){if(n){var a=Ae(t),s=ve(t),l=r*n;i==null?(i=t+r*$t,o=t-l/2):(i=Bh(a,i),o=Bh(a,o),(r>0?i<o:i>o)&&(i+=r*$t));for(var u,f=i;r>0?f>o:f<o;f-=l)u=Hu([a,-s*Ae(f),-s*ve(f)]),e.point(u[0],u[1])}}function Bh(e,t){t=gi(t),t[0]-=e,Vu(t);var n=Km(-t[1]);return((-t[2]<0?-n:n)+$t-xe)%$t}function Qm(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:qt,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Ga(e,t){return Re(e[0]-t[0])<xe&&Re(e[1]-t[1])<xe}function _a(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ep(e,t,n,r,i){var o=[],a=[],s,l;if(e.forEach(function(d){if(!((p=d.length-1)<=0)){var p,g=d[0],_=d[p],b;if(Ga(g,_)){if(!g[2]&&!_[2]){for(i.lineStart(),s=0;s<p;++s)i.point((g=d[s])[0],g[1]);i.lineEnd();return}_[0]+=2*xe}o.push(b=new _a(g,d,null,!0)),a.push(b.o=new _a(g,null,b,!1)),o.push(b=new _a(_,d,null,!1)),a.push(b.o=new _a(_,null,b,!0))}}),!!o.length){for(a.sort(t),Oh(o),Oh(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var u=o[0],f,h;;){for(var c=u,m=!0;c.v;)if((c=c.n)===u)return;f=c.z,i.lineStart();do{if(c.v=c.o.v=!0,c.e){if(m)for(s=0,l=f.length;s<l;++s)i.point((h=f[s])[0],h[1]);else r(c.x,c.n.x,1,i);c=c.n}else{if(m)for(f=c.p.z,s=f.length-1;s>=0;--s)i.point((h=f[s])[0],h[1]);else r(c.x,c.p.x,-1,i);c=c.p}c=c.o,f=c.z,m=!m}while(!c.v);i.lineEnd()}}}function Oh(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function jl(e){return Re(e[0])<=ke?e[0]:Ot(e[0])*((Re(e[0])+ke)%$t-ke)}function k6(e,t){var n=jl(t),r=t[1],i=ve(r),o=[ve(n),-Ae(n),0],a=0,s=0,l=new kr;i===1?r=We+xe:i===-1&&(r=-We-xe);for(var u=0,f=e.length;u<f;++u)if(c=(h=e[u]).length)for(var h,c,m=h[c-1],d=jl(m),p=m[1]/2+$h,g=ve(p),_=Ae(p),b=0;b<c;++b,d=y,g=M,_=P,m=v){var v=h[b],y=jl(v),x=v[1]/2+$h,M=ve(x),P=Ae(x),$=y-d,N=$>=0?1:-1,I=N*$,E=I>ke,O=g*M;if(l.add(zn(O*N*ve(I),_*P+O*Ae(I))),a+=E?$+N*$t:$,E^d>=n^y>=n){var H=us(gi(m),gi(v));Vu(H);var D=us(o,H);Vu(D);var T=(E^$>=0?-1:1)*Ht(D[2]);(r>T||r===T&&(H[0]||H[1]))&&(s+=E^$>=0?1:-1)}}return(a<-xe||a<xe&&l<-Xm)^s&1}function tp(e,t,n,r){return function(i){var o=t(i),a=Qm(),s=t(a),l=!1,u,f,h,c={point:m,lineStart:p,lineEnd:g,polygonStart:function(){c.point=_,c.lineStart=b,c.lineEnd=v,f=[],u=[]},polygonEnd:function(){c.point=m,c.lineStart=p,c.lineEnd=g,f=lm(f);var y=k6(u,r);f.length?(l||(i.polygonStart(),l=!0),ep(f,C6,y,n,i)):y&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(y,x){e(y,x)&&i.point(y,x)}function d(y,x){o.point(y,x)}function p(){c.point=d,o.lineStart()}function g(){c.point=m,o.lineEnd()}function _(y,x){h.push([y,x]),s.point(y,x)}function b(){s.lineStart(),h=[]}function v(){_(h[0][0],h[0][1]),s.lineEnd();var y=s.clean(),x=a.result(),M,P=x.length,$,N,I;if(h.pop(),u.push(h),h=null,!!P){if(y&1){if(N=x[0],($=N.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),M=0;M<$;++M)i.point((I=N[M])[0],I[1]);i.lineEnd()}return}P>1&&y&2&&x.push(x.pop().concat(x.shift())),f.push(x.filter(E6))}}return c}}function E6(e){return e.length>1}function C6(e,t){return((e=e.x)[0]<0?e[1]-We-xe:We-e[1])-((t=t.x)[0]<0?t[1]-We-xe:We-t[1])}const qh=tp(function(){return!0},T6,D6,[-ke,-We]);function T6(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?ke:-ke,l=Re(o-t);Re(l-ke)<xe?(e.point(t,n=(n+a)/2>0?We:-We),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&l>=ke&&(Re(t-r)<xe&&(t-=r*xe),Re(o-s)<xe&&(o-=s*xe),n=$6(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function $6(e,t,n,r){var i,o,a=ve(e-n);return Re(a)>xe?$i((ve(t)*(o=Ae(r))*ve(n)-ve(r)*(i=Ae(t))*ve(e))/(i*o*a)):(t+r)/2}function D6(e,t,n,r){var i;if(e==null)i=n*We,r.point(-ke,i),r.point(0,i),r.point(ke,i),r.point(ke,0),r.point(ke,-i),r.point(0,-i),r.point(-ke,-i),r.point(-ke,0),r.point(-ke,i);else if(Re(e[0]-t[0])>xe){var o=e[0]<t[0]?ke:-ke;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function N6(e){var t=Ae(e),n=6*Ve,r=t>0,i=Re(t)>xe;function o(f,h,c,m){A6(m,e,n,c,f,h)}function a(f,h){return Ae(f)*Ae(h)>t}function s(f){var h,c,m,d,p;return{lineStart:function(){d=m=!1,p=1},point:function(g,_){var b=[g,_],v,y=a(g,_),x=r?y?0:u(g,_):y?u(g+(g<0?ke:-ke),_):0;if(!h&&(d=m=y)&&f.lineStart(),y!==m&&(v=l(h,b),(!v||Ga(h,v)||Ga(b,v))&&(b[2]=1)),y!==m)p=0,y?(f.lineStart(),v=l(b,h),f.point(v[0],v[1])):(v=l(h,b),f.point(v[0],v[1],2),f.lineEnd()),h=v;else if(i&&h&&r^y){var M;!(x&c)&&(M=l(b,h,!0))&&(p=0,r?(f.lineStart(),f.point(M[0][0],M[0][1]),f.point(M[1][0],M[1][1]),f.lineEnd()):(f.point(M[1][0],M[1][1]),f.lineEnd(),f.lineStart(),f.point(M[0][0],M[0][1],3)))}y&&(!h||!Ga(h,b))&&f.point(b[0],b[1]),h=b,m=y,c=x},lineEnd:function(){m&&f.lineEnd(),h=null},clean:function(){return p|(d&&m)<<1}}}function l(f,h,c){var m=gi(f),d=gi(h),p=[1,0,0],g=us(m,d),_=ga(g,g),b=g[0],v=_-b*b;if(!v)return!c&&f;var y=t*_/v,x=-t*b/v,M=us(p,g),P=ya(p,y),$=ya(g,x);Yl(P,$);var N=M,I=ga(P,N),E=ga(N,N),O=I*I-E*(ga(P,P)-1);if(!(O<0)){var H=kt(O),D=ya(N,(-I-H)/E);if(Yl(D,P),D=Hu(D),!c)return D;var T=f[0],z=h[0],ae=f[1],ne=h[1],se;z<T&&(se=T,T=z,z=se);var Y=z-T,K=Re(Y-ke)<xe,Z=K||Y<xe;if(!K&&ne<ae&&(se=ae,ae=ne,ne=se),Z?K?ae+ne>0^D[1]<(Re(D[0]-T)<xe?ae:ne):ae<=D[1]&&D[1]<=ne:Y>ke^(T<=D[0]&&D[0]<=z)){var Q=ya(N,(-I+H)/E);return Yl(Q,P),[D,Hu(Q)]}}}function u(f,h){var c=r?e:ke-e,m=0;return f<-c?m|=1:f>c&&(m|=2),h<-c?m|=4:h>c&&(m|=8),m}return tp(a,s,o,r?[0,-e]:[-ke,e-ke])}function I6(e,t,n,r,i,o){var a=e[0],s=e[1],l=t[0],u=t[1],f=0,h=1,c=l-a,m=u-s,d;if(d=n-a,!(!c&&d>0)){if(d/=c,c<0){if(d<f)return;d<h&&(h=d)}else if(c>0){if(d>h)return;d>f&&(f=d)}if(d=i-a,!(!c&&d<0)){if(d/=c,c<0){if(d>h)return;d>f&&(f=d)}else if(c>0){if(d<f)return;d<h&&(h=d)}if(d=r-s,!(!m&&d>0)){if(d/=m,m<0){if(d<f)return;d<h&&(h=d)}else if(m>0){if(d>h)return;d>f&&(f=d)}if(d=o-s,!(!m&&d<0)){if(d/=m,m<0){if(d>h)return;d>f&&(f=d)}else if(m>0){if(d<f)return;d<h&&(h=d)}return f>0&&(e[0]=a+f*c,e[1]=s+f*m),h<1&&(t[0]=a+h*c,t[1]=s+h*m),!0}}}}}var Xi=1e9,wa=-Xi;function np(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,h,c){var m=0,d=0;if(u==null||(m=a(u,h))!==(d=a(f,h))||l(u,f)<0^h>0)do c.point(m===0||m===3?e:n,m>1?r:t);while((m=(m+h+4)%4)!==d);else c.point(f[0],f[1])}function a(u,f){return Re(u[0]-e)<xe?f>0?0:3:Re(u[0]-n)<xe?f>0?2:1:Re(u[1]-t)<xe?f>0?1:0:f>0?3:2}function s(u,f){return l(u.x,f.x)}function l(u,f){var h=a(u,1),c=a(f,1);return h!==c?h-c:h===0?f[1]-u[1]:h===1?u[0]-f[0]:h===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,h=Qm(),c,m,d,p,g,_,b,v,y,x,M,P={point:$,lineStart:O,lineEnd:H,polygonStart:I,polygonEnd:E};function $(T,z){i(T,z)&&f.point(T,z)}function N(){for(var T=0,z=0,ae=m.length;z<ae;++z)for(var ne=m[z],se=1,Y=ne.length,K=ne[0],Z,Q,me=K[0],de=K[1];se<Y;++se)Z=me,Q=de,K=ne[se],me=K[0],de=K[1],Q<=r?de>r&&(me-Z)*(r-Q)>(de-Q)*(e-Z)&&++T:de<=r&&(me-Z)*(r-Q)<(de-Q)*(e-Z)&&--T;return T}function I(){f=h,c=[],m=[],M=!0}function E(){var T=N(),z=M&&T,ae=(c=lm(c)).length;(z||ae)&&(u.polygonStart(),z&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),ae&&ep(c,s,T,o,u),u.polygonEnd()),f=u,c=m=d=null}function O(){P.point=D,m&&m.push(d=[]),x=!0,y=!1,b=v=NaN}function H(){c&&(D(p,g),_&&y&&h.rejoin(),c.push(h.result())),P.point=$,y&&f.lineEnd()}function D(T,z){var ae=i(T,z);if(m&&d.push([T,z]),x)p=T,g=z,_=ae,x=!1,ae&&(f.lineStart(),f.point(T,z));else if(ae&&y)f.point(T,z);else{var ne=[b=Math.max(wa,Math.min(Xi,b)),v=Math.max(wa,Math.min(Xi,v))],se=[T=Math.max(wa,Math.min(Xi,T)),z=Math.max(wa,Math.min(Xi,z))];I6(ne,se,e,t,n,r)?(y||(f.lineStart(),f.point(ne[0],ne[1])),f.point(se[0],se[1]),ae||f.lineEnd(),M=!1):ae&&(f.lineStart(),f.point(T,z),M=!1)}b=T,v=z,y=ae}return P}}const ju=e=>e;var Xl=new kr,Xu=new kr,rp,ip,Zu,Ku,Fn={point:qt,lineStart:qt,lineEnd:qt,polygonStart:function(){Fn.lineStart=L6,Fn.lineEnd=F6},polygonEnd:function(){Fn.lineStart=Fn.lineEnd=Fn.point=qt,Xl.add(Re(Xu)),Xu=new kr},result:function(){var e=Xl/2;return Xl=new kr,e}};function L6(){Fn.point=R6}function R6(e,t){Fn.point=op,rp=Zu=e,ip=Ku=t}function op(e,t){Xu.add(Ku*e-Zu*t),Zu=e,Ku=t}function F6(){op(rp,ip)}var yi=1/0,fs=yi,wo=-yi,cs=wo,hs={point:B6,lineStart:qt,lineEnd:qt,polygonStart:qt,polygonEnd:qt,result:function(){var e=[[yi,fs],[wo,cs]];return wo=cs=-(fs=yi=1/0),e}};function B6(e,t){e<yi&&(yi=e),e>wo&&(wo=e),t<fs&&(fs=t),t>cs&&(cs=t)}var Ju=0,Qu=0,Zi=0,ds=0,ms=0,ti=0,ef=0,tf=0,Ki=0,ap,sp,cn,hn,Ft={point:Nr,lineStart:Gh,lineEnd:Uh,polygonStart:function(){Ft.lineStart=G6,Ft.lineEnd=U6},polygonEnd:function(){Ft.point=Nr,Ft.lineStart=Gh,Ft.lineEnd=Uh},result:function(){var e=Ki?[ef/Ki,tf/Ki]:ti?[ds/ti,ms/ti]:Zi?[Ju/Zi,Qu/Zi]:[NaN,NaN];return Ju=Qu=Zi=ds=ms=ti=ef=tf=Ki=0,e}};function Nr(e,t){Ju+=e,Qu+=t,++Zi}function Gh(){Ft.point=O6}function O6(e,t){Ft.point=q6,Nr(cn=e,hn=t)}function q6(e,t){var n=e-cn,r=t-hn,i=kt(n*n+r*r);ds+=i*(cn+e)/2,ms+=i*(hn+t)/2,ti+=i,Nr(cn=e,hn=t)}function Uh(){Ft.point=Nr}function G6(){Ft.point=z6}function U6(){lp(ap,sp)}function z6(e,t){Ft.point=lp,Nr(ap=cn=e,sp=hn=t)}function lp(e,t){var n=e-cn,r=t-hn,i=kt(n*n+r*r);ds+=i*(cn+e)/2,ms+=i*(hn+t)/2,ti+=i,i=hn*e-cn*t,ef+=i*(cn+e),tf+=i*(hn+t),Ki+=i*3,Nr(cn=e,hn=t)}function up(e){this._context=e}up.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,$t);break}}},result:qt};var nf=new kr,Zl,fp,cp,Ji,Qi,vo={point:qt,lineStart:function(){vo.point=H6},lineEnd:function(){Zl&&hp(fp,cp),vo.point=qt},polygonStart:function(){Zl=!0},polygonEnd:function(){Zl=null},result:function(){var e=+nf;return nf=new kr,e}};function H6(e,t){vo.point=hp,fp=Ji=e,cp=Qi=t}function hp(e,t){Ji-=e,Qi-=t,nf.add(kt(Ji*Ji+Qi*Qi)),Ji=e,Qi=t}let zh,ps,Hh,Vh;class Wh{constructor(t){this._append=t==null?dp:V6(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Hh||this._append!==ps){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Hh=r,ps=this._append,Vh=this._,this._=i}this._+=Vh;break}}}result(){const t=this._;return this._="",t.length?t:null}}function dp(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function V6(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return dp;if(t!==zh){const n=10**t;zh=t,ps=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return ps}function Ks(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),_r(s,i(o))),o.result()}return a.area=function(s){return _r(s,i(Fn)),Fn.result()},a.measure=function(s){return _r(s,i(vo)),vo.result()},a.bounds=function(s){return _r(s,i(hs)),hs.result()},a.centroid=function(s){return _r(s,i(Ft)),Ft.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,ju):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new Wh(n)):new up(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(o=new Wh(n)),a},a.projection(e).digits(n).context(t)}function rf(e){return{stream:Js(e)}}function Js(e){return function(t){var n=new of;for(var r in e)n[r]=e[r];return n.stream=t,n}}function of(){}of.prototype={constructor:of,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Qf(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),_r(n,e.stream(hs)),t(hs.result()),r!=null&&e.clipExtent(r),e}function ec(e,t,n){return Qf(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function mp(e,t,n){return ec(e,[[0,0],t],n)}function pp(e,t,n){return Qf(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function bp(e,t,n){return Qf(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var Yh=16,W6=Ae(30*Ve);function jh(e,t){return+t?j6(e,t):Y6(e)}function Y6(e){return Js({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function j6(e,t){function n(r,i,o,a,s,l,u,f,h,c,m,d,p,g){var _=u-r,b=f-i,v=_*_+b*b;if(v>4*t&&p--){var y=a+c,x=s+m,M=l+d,P=kt(y*y+x*x+M*M),$=Ht(M/=P),N=Re(Re(M)-1)<xe||Re(o-h)<xe?(o+h)/2:zn(x,y),I=e(N,$),E=I[0],O=I[1],H=E-r,D=O-i,T=b*H-_*D;(T*T/v>t||Re((_*H+b*D)/v-.5)>.3||a*c+s*m+l*d<W6)&&(n(r,i,o,a,s,l,E,O,N,y/=P,x/=P,M,p,g),g.point(E,O),n(E,O,N,y,x,M,u,f,h,c,m,d,p,g))}}return function(r){var i,o,a,s,l,u,f,h,c,m,d,p,g={point:_,lineStart:b,lineEnd:y,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function _($,N){$=e($,N),r.point($[0],$[1])}function b(){h=NaN,g.point=v,r.lineStart()}function v($,N){var I=gi([$,N]),E=e($,N);n(h,c,f,m,d,p,h=E[0],c=E[1],f=$,m=I[0],d=I[1],p=I[2],Yh,r),r.point(h,c)}function y(){g.point=_,r.lineEnd()}function x(){b(),g.point=M,g.lineEnd=P}function M($,N){v(i=$,N),o=h,a=c,s=m,l=d,u=p,g.point=v}function P(){n(h,c,f,m,d,p,o,a,i,s,l,u,Yh,r),g.lineEnd=y,y()}return g}}var X6=Js({point:function(e,t){this.stream.point(e*Ve,t*Ve)}});function Z6(e){return Js({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function K6(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function Xh(e,t,n,r,i,o){if(!o)return K6(e,t,n,r,i);var a=Ae(o),s=ve(o),l=a*e,u=s*e,f=a/e,h=s/e,c=(s*n-a*t)/e,m=(s*t+a*n)/e;function d(p,g){return p*=r,g*=i,[l*p-u*g+t,n-u*p-l*g]}return d.invert=function(p,g){return[r*(f*p-h*g+c),i*(m-h*p-f*g)]},d}function hr(e){return gp(function(){return e})()}function gp(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,l=0,u=0,f,h=0,c=1,m=1,d=null,p=qh,g=null,_,b,v,y=ju,x=.5,M,P,$,N,I;function E(T){return $(T[0]*Ve,T[1]*Ve)}function O(T){return T=$.invert(T[0],T[1]),T&&[T[0]*bt,T[1]*bt]}E.stream=function(T){return N&&I===T?N:N=X6(Z6(f)(p(M(y(I=T)))))},E.preclip=function(T){return arguments.length?(p=T,d=void 0,D()):p},E.postclip=function(T){return arguments.length?(y=T,g=_=b=v=null,D()):y},E.clipAngle=function(T){return arguments.length?(p=+T?N6(d=T*Ve):(d=null,qh),D()):d*bt},E.clipExtent=function(T){return arguments.length?(y=T==null?(g=_=b=v=null,ju):np(g=+T[0][0],_=+T[0][1],b=+T[1][0],v=+T[1][1]),D()):g==null?null:[[g,_],[b,v]]},E.scale=function(T){return arguments.length?(n=+T,H()):n},E.translate=function(T){return arguments.length?(r=+T[0],i=+T[1],H()):[r,i]},E.center=function(T){return arguments.length?(o=T[0]%360*Ve,a=T[1]%360*Ve,H()):[o*bt,a*bt]},E.rotate=function(T){return arguments.length?(s=T[0]%360*Ve,l=T[1]%360*Ve,u=T.length>2?T[2]%360*Ve:0,H()):[s*bt,l*bt,u*bt]},E.angle=function(T){return arguments.length?(h=T%360*Ve,H()):h*bt},E.reflectX=function(T){return arguments.length?(c=T?-1:1,H()):c<0},E.reflectY=function(T){return arguments.length?(m=T?-1:1,H()):m<0},E.precision=function(T){return arguments.length?(M=jh(P,x=T*T),D()):kt(x)},E.fitExtent=function(T,z){return ec(E,T,z)},E.fitSize=function(T,z){return mp(E,T,z)},E.fitWidth=function(T,z){return pp(E,T,z)},E.fitHeight=function(T,z){return bp(E,T,z)};function H(){var T=Xh(n,0,0,c,m,h).apply(null,t(o,a)),z=Xh(n,r-T[0],i-T[1],c,m,h);return f=Jm(s,l,u),P=Wu(t,z),$=Wu(f,P),M=jh(P,x),D()}function D(){return N=I=null,E}return function(){return t=e.apply(this,arguments),E.invert=t.invert&&O,H()}}function tc(e){var t=0,n=ke/3,r=gp(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ve,n=o[1]*Ve):[t*bt,n*bt]},i}function J6(e){var t=Ae(e);function n(r,i){return[r*t,ve(i)/t]}return n.invert=function(r,i){return[r/t,Ht(i*t)]},n}function Q6(e,t){var n=ve(e),r=(n+ve(t))/2;if(Re(r)<xe)return J6(e);var i=1+n*(2*r-n),o=kt(i)/r;function a(s,l){var u=kt(i-2*r*ve(l))/r;return[u*ve(s*=r),o-u*Ae(s)]}return a.invert=function(s,l){var u=o-l,f=zn(s,Re(u))*Ot(u);return u*r<0&&(f-=ke*Ot(s)*Ot(u)),[f/r,Ht((i-(s*s+u*u)*r*r)/(2*r))]},a}function bs(){return tc(Q6).scale(155.424).center([0,33.6442])}function yp(){return bs().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function e7(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function t7(){var e,t,n=yp(),r,i=bs().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=bs().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(c,m){l=[c,m]}};function f(c){var m=c[0],d=c[1];return l=null,r.point(m,d),l||(o.point(m,d),l)||(s.point(m,d),l)}f.invert=function(c){var m=n.scale(),d=n.translate(),p=(c[0]-d[0])/m,g=(c[1]-d[1])/m;return(g>=.12&&g<.234&&p>=-.425&&p<-.214?i:g>=.166&&g<.234&&p>=-.214&&p<-.115?a:n).invert(c)},f.stream=function(c){return e&&t===c?e:e=e7([n.stream(t=c),i.stream(c),a.stream(c)])},f.precision=function(c){return arguments.length?(n.precision(c),i.precision(c),a.precision(c),h()):n.precision()},f.scale=function(c){return arguments.length?(n.scale(c),i.scale(c*.35),a.scale(c),f.translate(n.translate())):n.scale()},f.translate=function(c){if(!arguments.length)return n.translate();var m=n.scale(),d=+c[0],p=+c[1];return r=n.translate(c).clipExtent([[d-.455*m,p-.238*m],[d+.455*m,p+.238*m]]).stream(u),o=i.translate([d-.307*m,p+.201*m]).clipExtent([[d-.425*m+xe,p+.12*m+xe],[d-.214*m-xe,p+.234*m-xe]]).stream(u),s=a.translate([d-.205*m,p+.212*m]).clipExtent([[d-.214*m+xe,p+.166*m+xe],[d-.115*m-xe,p+.234*m-xe]]).stream(u),h()},f.fitExtent=function(c,m){return ec(f,c,m)},f.fitSize=function(c,m){return mp(f,c,m)},f.fitWidth=function(c,m){return pp(f,c,m)},f.fitHeight=function(c,m){return bp(f,c,m)};function h(){return e=t=null,f}return f.scale(1070)}function _p(e){return function(t,n){var r=Ae(t),i=Ae(n),o=e(r*i);return o===1/0?[2,0]:[o*i*ve(t),o*ve(n)]}}function Go(e){return function(t,n){var r=kt(t*t+n*n),i=e(r),o=ve(i),a=Ae(i);return[zn(t*o,r*a),Ht(r&&n*o/r)]}}var wp=_p(function(e){return kt(2/(1+e))});wp.invert=Go(function(e){return 2*Ht(e/2)});function n7(){return hr(wp).scale(124.75).clipAngle(180-.001)}var vp=_p(function(e){return(e=Km(e))&&e/ve(e)});vp.invert=Go(function(e){return e});function r7(){return hr(vp).scale(79.4188).clipAngle(180-.001)}function Qs(e,t){return[e,ss(Jf((We+t)/2))]}Qs.invert=function(e,t){return[e,2*$i(Zm(t))-We]};function i7(){return Mp(Qs).scale(961/$t)}function Mp(e){var t=hr(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,l,u;t.scale=function(h){return arguments.length?(r(h),f()):r()},t.translate=function(h){return arguments.length?(i(h),f()):i()},t.center=function(h){return arguments.length?(n(h),f()):n()},t.clipExtent=function(h){return arguments.length?(h==null?a=s=l=u=null:(a=+h[0][0],s=+h[0][1],l=+h[1][0],u=+h[1][1]),f()):a==null?null:[[a,s],[l,u]]};function f(){var h=ke*r(),c=t(S6(t.rotate()).invert([0,0]));return o(a==null?[[c[0]-h,c[1]-h],[c[0]+h,c[1]+h]]:e===Qs?[[Math.max(c[0]-h,a),s],[Math.min(c[0]+h,l),u]]:[[a,Math.max(c[1]-h,s)],[l,Math.min(c[1]+h,u)]])}return f()}function va(e){return Jf((We+e)/2)}function o7(e,t){var n=Ae(e),r=e===t?ve(e):ss(n/Ae(t))/ss(va(t)/va(e)),i=n*Wl(va(e),r)/r;if(!r)return Qs;function o(a,s){i>0?s<-We+xe&&(s=-We+xe):s>We-xe&&(s=We-xe);var l=i/Wl(va(s),r);return[l*ve(r*a),i-l*Ae(r*a)]}return o.invert=function(a,s){var l=i-s,u=Ot(r)*kt(a*a+l*l),f=zn(a,Re(l))*Ot(l);return l*r<0&&(f-=ke*Ot(a)*Ot(l)),[f/r,2*$i(Wl(i/u,1/r))-We]},o}function a7(){return tc(o7).scale(109.5).parallels([30,30])}function gs(e,t){return[e,t]}gs.invert=gs;function s7(){return hr(gs).scale(152.63)}function l7(e,t){var n=Ae(e),r=e===t?ve(e):(n-Ae(t))/(t-e),i=n/r+e;if(Re(r)<xe)return gs;function o(a,s){var l=i-s,u=r*a;return[l*ve(u),i-l*Ae(u)]}return o.invert=function(a,s){var l=i-s,u=zn(a,Re(l))*Ot(l);return l*r<0&&(u-=ke*Ot(a)*Ot(l)),[u/r,i-Ot(r)*kt(a*a+l*l)]},o}function u7(){return tc(l7).scale(131.154).center([0,13.9389])}var so=1.340264,lo=-.081106,uo=893e-6,fo=.003796,ys=kt(3)/2,f7=12;function xp(e,t){var n=Ht(ys*ve(t)),r=n*n,i=r*r*r;return[e*Ae(n)/(ys*(so+3*lo*r+i*(7*uo+9*fo*r))),n*(so+lo*r+i*(uo+fo*r))]}xp.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,l;o<f7&&(s=n*(so+lo*r+i*(uo+fo*r))-t,l=so+3*lo*r+i*(7*uo+9*fo*r),n-=a=s/l,r=n*n,i=r*r*r,!(Re(a)<Xm));++o);return[ys*e*(so+3*lo*r+i*(7*uo+9*fo*r))/Ae(n),Ht(ve(n)/ys)]};function c7(){return hr(xp).scale(177.158)}function Pp(e,t){var n=Ae(t),r=Ae(e)*n;return[n*ve(e)/r,ve(t)/r]}Pp.invert=Go($i);function h7(){return hr(Pp).scale(144.049).clipAngle(60)}function Sp(e,t){return[Ae(t)*ve(e),ve(t)]}Sp.invert=Go(Ht);function d7(){return hr(Sp).scale(249.5).clipAngle(90+xe)}function Ap(e,t){var n=Ae(t),r=1+Ae(e)*n;return[n*ve(e)/r,ve(t)/r]}Ap.invert=Go(function(e){return 2*$i(e)});function m7(){return hr(Ap).scale(250).clipAngle(142)}function kp(e,t){return[ss(Jf((We+t)/2)),-e]}kp.invert=function(e,t){return[-t,2*$i(Zm(e))-We]};function p7(){var e=Mp(kp),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Sn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function el(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const af=Symbol("implicit");function nc(){var e=new Er,t=[],n=[],r=af;function i(o){let a=e.get(o);if(a===void 0){if(r!==af)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new Er;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return nc(t,n).unknown(r)},Sn.apply(i,arguments),i}function tl(){var e=nc().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,o,a,s=!1,l=0,u=0,f=.5;delete e.unknown;function h(){var c=t().length,m=i<r,d=m?i:r,p=m?r:i;o=(p-d)/Math.max(1,c-l+u*2),s&&(o=Math.floor(o)),d+=(p-d-o*(c-l))*f,a=o*(1-l),s&&(d=Math.round(d),a=Math.round(a));var g=Tu(c).map(function(_){return d+o*_});return n(m?g.reverse():g)}return e.domain=function(c){return arguments.length?(t(c),h()):t()},e.range=function(c){return arguments.length?([r,i]=c,r=+r,i=+i,h()):[r,i]},e.rangeRound=function(c){return[r,i]=c,r=+r,i=+i,s=!0,h()},e.bandwidth=function(){return a},e.step=function(){return o},e.round=function(c){return arguments.length?(s=!!c,h()):s},e.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),h()):l},e.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},e.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},e.align=function(c){return arguments.length?(f=Math.max(0,Math.min(1,c)),h()):f},e.copy=function(){return tl(t(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(f)},Sn.apply(h(),arguments)}function Ep(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Ep(t())},e}function b7(){return Ep(tl.apply(null,arguments).paddingInner(1))}function g7(e){return function(){return e}}function sf(e){return+e}var Zh=[0,1];function Gt(e){return e}function lf(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:g7(isNaN(t)?NaN:.5)}function y7(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function _7(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=lf(i,r),o=n(a,o)):(r=lf(r,i),o=n(o,a)),function(s){return o(r(s))}}function w7(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=lf(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=qs(e,s,1,r)-1;return o[l](i[l](s))}}function Uo(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function nl(){var e=Zh,t=Zh,n=qo,r,i,o,a=Gt,s,l,u;function f(){var c=Math.min(e.length,t.length);return a!==Gt&&(a=y7(e[0],e[c-1])),s=c>2?w7:_7,l=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(l||(l=s(e.map(r),t,n)))(r(a(c)))}return h.invert=function(c){return a(i((u||(u=s(t,e.map(r),ct)))(c)))},h.domain=function(c){return arguments.length?(e=Array.from(c,sf),f()):e.slice()},h.range=function(c){return arguments.length?(t=Array.from(c),f()):t.slice()},h.rangeRound=function(c){return t=Array.from(c),n=Wf,f()},h.clamp=function(c){return arguments.length?(a=c?!0:Gt,f()):a!==Gt},h.interpolate=function(c){return arguments.length?(n=c,f()):n},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,m){return r=c,i=m,f()}}function Cp(){return nl()(Gt,Gt)}function v7(e,t,n,r){var i=Eu(e,t,n),o;switch(r=_o(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=x6(i,a))&&(r.precision=o),jm(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=P6(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=M6(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ti(r)}function zo(e){var t=e.domain;return e.ticks=function(n){var r=t();return po(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return v7(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,f=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);f-- >0;){if(u=Ja(a,s,n),u===l)return r[i]=a,r[o]=s,t(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function rc(){var e=Cp();return e.copy=function(){return Uo(e,rc())},Sn.apply(e,arguments),zo(e)}function Tp(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,sf),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Tp(e).unknown(t)},e=arguments.length?Array.from(e,sf):[0,1],zo(n)}function $p(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function Kh(e){return Math.log(e)}function Jh(e){return Math.exp(e)}function M7(e){return-Math.log(-e)}function x7(e){return-Math.exp(-e)}function P7(e){return isFinite(e)?+("1e"+e):e<0?0:e}function S7(e){return e===10?P7:e===Math.E?Math.exp:t=>Math.pow(e,t)}function A7(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Qh(e){return(t,n)=>-e(-t,n)}function Dp(e){const t=e(Kh,Jh),n=t.domain;let r=10,i,o;function a(){return i=A7(r),o=S7(r),n()[0]<0?(i=Qh(i),o=Qh(o),e(M7,x7)):e(Kh,Jh),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const l=n();let u=l[0],f=l[l.length-1];const h=f<u;h&&([u,f]=[f,u]);let c=i(u),m=i(f),d,p;const g=s==null?10:+s;let _=[];if(!(r%1)&&m-c<g){if(c=Math.floor(c),m=Math.ceil(m),u>0){for(;c<=m;++c)for(d=1;d<r;++d)if(p=c<0?d/o(-c):d*o(c),!(p<u)){if(p>f)break;_.push(p)}}else for(;c<=m;++c)for(d=r-1;d>=1;--d)if(p=c>0?d/o(-c):d*o(c),!(p<u)){if(p>f)break;_.push(p)}_.length*2<g&&(_=po(u,f,g))}else _=po(c,m,Math.min(m-c,g)).map(o);return h?_.reverse():_},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=_o(l)).precision==null&&(l.trim=!0),l=Ti(l)),s===1/0)return l;const u=Math.max(1,r*s/t.ticks().length);return f=>{let h=f/o(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?l(f):""}},t.nice=()=>n($p(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function Np(){const e=Dp(nl()).domain([1,10]);return e.copy=()=>Uo(e,Np()).base(e.base()),Sn.apply(e,arguments),e}function ed(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function td(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ip(e){var t=1,n=e(ed(t),td(t));return n.constant=function(r){return arguments.length?e(ed(t=+r),td(t)):t},zo(n)}function Lp(){var e=Ip(nl());return e.copy=function(){return Uo(e,Lp()).constant(e.constant())},Sn.apply(e,arguments)}function nd(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function k7(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function E7(e){return e<0?-e*e:e*e}function Rp(e){var t=e(Gt,Gt),n=1;function r(){return n===1?e(Gt,Gt):n===.5?e(k7,E7):e(nd(n),nd(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},zo(t)}function Fp(){var e=Rp(nl());return e.copy=function(){return Uo(e,Fp()).exponent(e.exponent())},Sn.apply(e,arguments),e}function Bp(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=bw(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[qs(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(St),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return Bp().domain(e).range(t).unknown(r)},Sn.apply(o,arguments)}function Op(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[qs(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Op().domain(e).range(t).unknown(n)},Sn.apply(i,arguments)}const Kl=new Date,Jl=new Date;function tt(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},i.filter=o=>tt(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(Kl.setTime(+o),Jl.setTime(+a),e(Kl),e(Jl),Math.floor(n(Kl,Jl))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const _s=tt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);_s.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?tt(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):_s);_s.range;const On=1e3,Ut=On*60,qn=Ut*60,Hn=qn*24,ic=Hn*7,rd=Hn*30,Ql=Hn*365,Kt=tt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getUTCSeconds());Kt.range;const Ho=tt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*On)},(e,t)=>{e.setTime(+e+t*Ut)},(e,t)=>(t-e)/Ut,e=>e.getMinutes());Ho.range;const Vo=tt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ut)},(e,t)=>(t-e)/Ut,e=>e.getUTCMinutes());Vo.range;const Wo=tt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*On-e.getMinutes()*Ut)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getHours());Wo.range;const Yo=tt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getUTCHours());Yo.range;const Or=tt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ut)/Hn,e=>e.getDate()-1);Or.range;const rl=tt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hn,e=>e.getUTCDate()-1);rl.range;const il=tt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Hn,e=>Math.floor(e/Hn));il.range;function qr(e){return tt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ut)/ic)}const _i=qr(0),Mo=qr(1),qp=qr(2),Gp=qr(3),Ir=qr(4),Up=qr(5),zp=qr(6);_i.range;Mo.range;qp.range;Gp.range;Ir.range;Up.range;zp.range;function Gr(e){return tt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ic)}const wi=Gr(0),xo=Gr(1),Hp=Gr(2),Vp=Gr(3),Lr=Gr(4),Wp=Gr(5),Yp=Gr(6);wi.range;xo.range;Hp.range;Vp.range;Lr.range;Wp.range;Yp.range;const jo=tt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());jo.range;const Xo=tt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Xo.range;const en=tt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());en.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:tt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});en.range;const tn=tt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());tn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:tt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});tn.range;function jp(e,t,n,r,i,o){const a=[[Kt,1,On],[Kt,5,5*On],[Kt,15,15*On],[Kt,30,30*On],[o,1,Ut],[o,5,5*Ut],[o,15,15*Ut],[o,30,30*Ut],[i,1,qn],[i,3,3*qn],[i,6,6*qn],[i,12,12*qn],[r,1,Hn],[r,2,2*Hn],[n,1,ic],[t,1,rd],[t,3,3*rd],[e,1,Ql]];function s(u,f,h){const c=f<u;c&&([u,f]=[f,u]);const m=h&&typeof h.range=="function"?h:l(u,f,h),d=m?m.range(u,+f+1):[];return c?d.reverse():d}function l(u,f,h){const c=Math.abs(f-u)/h,m=Os(([,,g])=>g).right(a,c);if(m===a.length)return e.every(Eu(u/Ql,f/Ql,h));if(m===0)return _s.every(Math.max(Eu(u,f,h),1));const[d,p]=a[c/a[m-1][2]<a[m][2]/c?m-1:m];return d.every(p)}return[s,l]}const[C7,Xp]=jp(tn,Xo,wi,il,Yo,Vo),[T7,$7]=jp(en,jo,_i,Or,Wo,Ho);function eu(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tu(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Bi(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function D7(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=Oi(i),f=qi(i),h=Oi(o),c=qi(o),m=Oi(a),d=qi(a),p=Oi(s),g=qi(s),_=Oi(l),b=qi(l),v={a:ae,A:ne,b:se,B:Y,c:null,d:ud,e:ud,f:t4,g:c4,G:d4,H:J7,I:Q7,j:e4,L:Zp,m:n4,M:r4,p:K,q:Z,Q:hd,s:dd,S:i4,u:o4,U:a4,V:s4,w:l4,W:u4,x:null,X:null,y:f4,Y:h4,Z:m4,"%":cd},y={a:Q,A:me,b:de,B:ce,c:null,d:fd,e:fd,f:y4,g:E4,G:T4,H:p4,I:b4,j:g4,L:Jp,m:_4,M:w4,p:ee,q:re,Q:hd,s:dd,S:v4,u:M4,U:x4,V:P4,w:S4,W:A4,x:null,X:null,y:k4,Y:C4,Z:$4,"%":cd},x={a:I,A:E,b:O,B:H,c:D,d:sd,e:sd,f:j7,g:ad,G:od,H:ld,I:ld,j:H7,L:Y7,m:z7,M:V7,p:N,q:U7,Q:Z7,s:K7,S:W7,u:F7,U:B7,V:O7,w:R7,W:q7,x:T,X:z,y:ad,Y:od,Z:G7,"%":X7};v.x=M(n,v),v.X=M(r,v),v.c=M(t,v),y.x=M(n,y),y.X=M(r,y),y.c=M(t,y);function M(G,J){return function(te){var L=[],pe=-1,ie=0,be=G.length,Ee,$e,De;for(te instanceof Date||(te=new Date(+te));++pe<be;)G.charCodeAt(pe)===37&&(L.push(G.slice(ie,pe)),($e=id[Ee=G.charAt(++pe)])!=null?Ee=G.charAt(++pe):$e=Ee==="e"?" ":"0",(De=J[Ee])&&(Ee=De(te,$e)),L.push(Ee),ie=pe+1);return L.push(G.slice(ie,pe)),L.join("")}}function P(G,J){return function(te){var L=Bi(1900,void 0,1),pe=$(L,G,te+="",0),ie,be;if(pe!=te.length)return null;if("Q"in L)return new Date(L.Q);if("s"in L)return new Date(L.s*1e3+("L"in L?L.L:0));if(J&&!("Z"in L)&&(L.Z=0),"p"in L&&(L.H=L.H%12+L.p*12),L.m===void 0&&(L.m="q"in L?L.q:0),"V"in L){if(L.V<1||L.V>53)return null;"w"in L||(L.w=1),"Z"in L?(ie=tu(Bi(L.y,0,1)),be=ie.getUTCDay(),ie=be>4||be===0?xo.ceil(ie):xo(ie),ie=rl.offset(ie,(L.V-1)*7),L.y=ie.getUTCFullYear(),L.m=ie.getUTCMonth(),L.d=ie.getUTCDate()+(L.w+6)%7):(ie=eu(Bi(L.y,0,1)),be=ie.getDay(),ie=be>4||be===0?Mo.ceil(ie):Mo(ie),ie=Or.offset(ie,(L.V-1)*7),L.y=ie.getFullYear(),L.m=ie.getMonth(),L.d=ie.getDate()+(L.w+6)%7)}else("W"in L||"U"in L)&&("w"in L||(L.w="u"in L?L.u%7:"W"in L?1:0),be="Z"in L?tu(Bi(L.y,0,1)).getUTCDay():eu(Bi(L.y,0,1)).getDay(),L.m=0,L.d="W"in L?(L.w+6)%7+L.W*7-(be+5)%7:L.w+L.U*7-(be+6)%7);return"Z"in L?(L.H+=L.Z/100|0,L.M+=L.Z%100,tu(L)):eu(L)}}function $(G,J,te,L){for(var pe=0,ie=J.length,be=te.length,Ee,$e;pe<ie;){if(L>=be)return-1;if(Ee=J.charCodeAt(pe++),Ee===37){if(Ee=J.charAt(pe++),$e=x[Ee in id?J.charAt(pe++):Ee],!$e||(L=$e(G,te,L))<0)return-1}else if(Ee!=te.charCodeAt(L++))return-1}return L}function N(G,J,te){var L=u.exec(J.slice(te));return L?(G.p=f.get(L[0].toLowerCase()),te+L[0].length):-1}function I(G,J,te){var L=m.exec(J.slice(te));return L?(G.w=d.get(L[0].toLowerCase()),te+L[0].length):-1}function E(G,J,te){var L=h.exec(J.slice(te));return L?(G.w=c.get(L[0].toLowerCase()),te+L[0].length):-1}function O(G,J,te){var L=_.exec(J.slice(te));return L?(G.m=b.get(L[0].toLowerCase()),te+L[0].length):-1}function H(G,J,te){var L=p.exec(J.slice(te));return L?(G.m=g.get(L[0].toLowerCase()),te+L[0].length):-1}function D(G,J,te){return $(G,t,J,te)}function T(G,J,te){return $(G,n,J,te)}function z(G,J,te){return $(G,r,J,te)}function ae(G){return a[G.getDay()]}function ne(G){return o[G.getDay()]}function se(G){return l[G.getMonth()]}function Y(G){return s[G.getMonth()]}function K(G){return i[+(G.getHours()>=12)]}function Z(G){return 1+~~(G.getMonth()/3)}function Q(G){return a[G.getUTCDay()]}function me(G){return o[G.getUTCDay()]}function de(G){return l[G.getUTCMonth()]}function ce(G){return s[G.getUTCMonth()]}function ee(G){return i[+(G.getUTCHours()>=12)]}function re(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var J=M(G+="",v);return J.toString=function(){return G},J},parse:function(G){var J=P(G+="",!1);return J.toString=function(){return G},J},utcFormat:function(G){var J=M(G+="",y);return J.toString=function(){return G},J},utcParse:function(G){var J=P(G+="",!0);return J.toString=function(){return G},J}}}var id={"-":"",_:" ",0:"0"},ut=/^\s*\d+/,N7=/^%/,I7=/[\\^$*+?|[\]().{}]/g;function Ne(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function L7(e){return e.replace(I7,"\\$&")}function Oi(e){return new RegExp("^(?:"+e.map(L7).join("|")+")","i")}function qi(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function R7(e,t,n){var r=ut.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function F7(e,t,n){var r=ut.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function B7(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function O7(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function q7(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function od(e,t,n){var r=ut.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ad(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function G7(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function U7(e,t,n){var r=ut.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function z7(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sd(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function H7(e,t,n){var r=ut.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ld(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function V7(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function W7(e,t,n){var r=ut.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Y7(e,t,n){var r=ut.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function j7(e,t,n){var r=ut.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function X7(e,t,n){var r=N7.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Z7(e,t,n){var r=ut.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function K7(e,t,n){var r=ut.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ud(e,t){return Ne(e.getDate(),t,2)}function J7(e,t){return Ne(e.getHours(),t,2)}function Q7(e,t){return Ne(e.getHours()%12||12,t,2)}function e4(e,t){return Ne(1+Or.count(en(e),e),t,3)}function Zp(e,t){return Ne(e.getMilliseconds(),t,3)}function t4(e,t){return Zp(e,t)+"000"}function n4(e,t){return Ne(e.getMonth()+1,t,2)}function r4(e,t){return Ne(e.getMinutes(),t,2)}function i4(e,t){return Ne(e.getSeconds(),t,2)}function o4(e){var t=e.getDay();return t===0?7:t}function a4(e,t){return Ne(_i.count(en(e)-1,e),t,2)}function Kp(e){var t=e.getDay();return t>=4||t===0?Ir(e):Ir.ceil(e)}function s4(e,t){return e=Kp(e),Ne(Ir.count(en(e),e)+(en(e).getDay()===4),t,2)}function l4(e){return e.getDay()}function u4(e,t){return Ne(Mo.count(en(e)-1,e),t,2)}function f4(e,t){return Ne(e.getFullYear()%100,t,2)}function c4(e,t){return e=Kp(e),Ne(e.getFullYear()%100,t,2)}function h4(e,t){return Ne(e.getFullYear()%1e4,t,4)}function d4(e,t){var n=e.getDay();return e=n>=4||n===0?Ir(e):Ir.ceil(e),Ne(e.getFullYear()%1e4,t,4)}function m4(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ne(t/60|0,"0",2)+Ne(t%60,"0",2)}function fd(e,t){return Ne(e.getUTCDate(),t,2)}function p4(e,t){return Ne(e.getUTCHours(),t,2)}function b4(e,t){return Ne(e.getUTCHours()%12||12,t,2)}function g4(e,t){return Ne(1+rl.count(tn(e),e),t,3)}function Jp(e,t){return Ne(e.getUTCMilliseconds(),t,3)}function y4(e,t){return Jp(e,t)+"000"}function _4(e,t){return Ne(e.getUTCMonth()+1,t,2)}function w4(e,t){return Ne(e.getUTCMinutes(),t,2)}function v4(e,t){return Ne(e.getUTCSeconds(),t,2)}function M4(e){var t=e.getUTCDay();return t===0?7:t}function x4(e,t){return Ne(wi.count(tn(e)-1,e),t,2)}function Qp(e){var t=e.getUTCDay();return t>=4||t===0?Lr(e):Lr.ceil(e)}function P4(e,t){return e=Qp(e),Ne(Lr.count(tn(e),e)+(tn(e).getUTCDay()===4),t,2)}function S4(e){return e.getUTCDay()}function A4(e,t){return Ne(xo.count(tn(e)-1,e),t,2)}function k4(e,t){return Ne(e.getUTCFullYear()%100,t,2)}function E4(e,t){return e=Qp(e),Ne(e.getUTCFullYear()%100,t,2)}function C4(e,t){return Ne(e.getUTCFullYear()%1e4,t,4)}function T4(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Lr(e):Lr.ceil(e),Ne(e.getUTCFullYear()%1e4,t,4)}function $4(){return"+0000"}function cd(){return"%"}function hd(e){return+e}function dd(e){return Math.floor(+e/1e3)}var Wr,oc,Zo;D4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function D4(e){return Wr=D7(e),oc=Wr.format,Wr.parse,Zo=Wr.utcFormat,Wr.utcParse,Wr}function N4(e){return new Date(e)}function I4(e){return e instanceof Date?+e:+new Date(+e)}function ac(e,t,n,r,i,o,a,s,l,u){var f=Cp(),h=f.invert,c=f.domain,m=u(".%L"),d=u(":%S"),p=u("%I:%M"),g=u("%I %p"),_=u("%a %d"),b=u("%b %d"),v=u("%B"),y=u("%Y");function x(M){return(l(M)<M?m:s(M)<M?d:a(M)<M?p:o(M)<M?g:r(M)<M?i(M)<M?_:b:n(M)<M?v:y)(M)}return f.invert=function(M){return new Date(h(M))},f.domain=function(M){return arguments.length?c(Array.from(M,I4)):c().map(N4)},f.ticks=function(M){var P=c();return e(P[0],P[P.length-1],M??10)},f.tickFormat=function(M,P){return P==null?x:u(P)},f.nice=function(M){var P=c();return(!M||typeof M.range!="function")&&(M=t(P[0],P[P.length-1],M??10)),M?c($p(P,M)):f},f.copy=function(){return Uo(f,ac(e,t,n,r,i,o,a,s,l,u))},f}function L4(){return Sn.apply(ac(T7,$7,en,jo,_i,Or,Wo,Ho,Kt,oc).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function R4(){return Sn.apply(ac(C7,Xp,tn,Xo,wi,rl,Yo,Vo,Kt,Zo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ol(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function al(){var e=0,t=.5,n=1,r=1,i,o,a,s,l,u=Gt,f,h=!1,c;function m(p){return isNaN(p=+p)?c:(p=.5+((p=+f(p))-o)*(r*p<r*o?s:l),u(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,n]=p,i=f(e=+e),o=f(t=+t),a=f(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,m):[e,t,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(u=p,m):u};function d(p){return function(g){var _,b,v;return arguments.length?([_,b,v]=g,u=js(p,[_,b,v]),m):[u(0),u(.5),u(1)]}}return m.range=d(qo),m.rangeRound=d(Wf),m.unknown=function(p){return arguments.length?(c=p,m):c},function(p){return f=p,i=p(e),o=p(t),a=p(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,m}}function eb(){var e=zo(al()(Gt));return e.copy=function(){return ol(e,eb())},el.apply(e,arguments)}function tb(){var e=Dp(al()).domain([.1,1,10]);return e.copy=function(){return ol(e,tb()).base(e.base())},el.apply(e,arguments)}function nb(){var e=Ip(al());return e.copy=function(){return ol(e,nb()).constant(e.constant())},el.apply(e,arguments)}function rb(){var e=Rp(al());return e.copy=function(){return ol(e,rb()).exponent(e.exponent())},el.apply(e,arguments)}function Pe(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const F4=Pe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),B4=Pe("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),O4=Pe("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),q4=Pe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),G4=Pe("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),U4=Pe("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),z4=Pe("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),H4=Pe("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),V4=Pe("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),W4=Pe("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Fe=e=>$v(e[e.length-1]);var ib=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Pe);const ob=Fe(ib);var ab=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Pe);const sb=Fe(ab);var lb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Pe);const ub=Fe(lb);var fb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Pe);const cb=Fe(fb);var uf=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Pe);const ws=Fe(uf);var hb=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Pe);const db=Fe(hb);var ff=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Pe);const vs=Fe(ff);var mb=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Pe);const pb=Fe(mb);var bb=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Pe);const gb=Fe(bb);var yb=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Pe);const _b=Fe(yb);var wb=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Pe);const vb=Fe(wb);var Mb=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Pe);const xb=Fe(Mb);var Pb=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Pe);const Sb=Fe(Pb);var Ab=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Pe);const kb=Fe(Ab);var Eb=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Pe);const Cb=Fe(Eb);var Tb=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Pe);const $b=Fe(Tb);var Db=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Pe);const Nb=Fe(Db);var Ib=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Pe);const Lb=Fe(Ib);var Rb=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Pe);const Fb=Fe(Rb);var Bb=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Pe);const Ob=Fe(Bb);var qb=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Pe);const Gb=Fe(qb);var Ub=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Pe);const zb=Fe(Ub);var Hb=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Pe);const Vb=Fe(Hb);var Wb=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Pe);const Yb=Fe(Wb);var jb=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Pe);const Xb=Fe(jb);var Zb=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Pe);const Kb=Fe(Zb);var Jb=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Pe);const Qb=Fe(Jb);function eg(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-e*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-e*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-e*2475.67)))))))+")"}const tg=Yf(vn(300,.5,0),vn(-240,.5,1));var ng=Yf(vn(-100,.75,.35),vn(80,1.5,.8)),rg=Yf(vn(260,.75,.35),vn(80,1.5,.8)),Ma=vn();function ig(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ma.h=360*e-100,Ma.s=1.5-1.5*t,Ma.l=.8-.9*t,Ma+""}var xa=sr(),Y4=Math.PI/3,j4=Math.PI*2/3;function og(e){var t;return e=(.5-e)*Math.PI,xa.r=255*(t=Math.sin(e))*t,xa.g=255*(t=Math.sin(e+Y4))*t,xa.b=255*(t=Math.sin(e+j4))*t,xa+""}function ag(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-e*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+e*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-e*6838.66)))))))+")"}function sl(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const sg=sl(Pe("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var lg=sl(Pe("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ug=sl(Pe("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),fg=sl(Pe("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function at(e){return function(){return e}}const cg=Math.cos,sc=Math.min,Ms=Math.sin,nt=Math.sqrt,md=1e-12,xs=Math.PI,ll=2*xs;function hg(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Vm(t)}function dg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mg(e){this._context=e}mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Ko(e){return new mg(e)}function pg(e){return e[0]}function bg(e){return e[1]}function gg(e,t){var n=at(!0),r=null,i=Ko,o=null,a=hg(s);e=typeof e=="function"?e:e===void 0?pg:at(e),t=typeof t=="function"?t:t===void 0?bg:at(t);function s(l){var u,f=(l=dg(l)).length,h,c=!1,m;for(r==null&&(o=i(m=a())),u=0;u<=f;++u)!(u<f&&n(h=l[u],u,l))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+e(h,u,l),+t(h,u,l));if(m)return o=null,m+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:at(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:at(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:at(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function X4(e,t,n){var r=null,i=at(!0),o=null,a=Ko,s=null,l=hg(u);e=typeof e=="function"?e:e===void 0?pg:at(+e),t=typeof t=="function"?t:at(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?bg:at(+n);function u(h){var c,m,d,p=(h=dg(h)).length,g,_=!1,b,v=new Array(p),y=new Array(p);for(o==null&&(s=a(b=l())),c=0;c<=p;++c){if(!(c<p&&i(g=h[c],c,h))===_)if(_=!_)m=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=c-1;d>=m;--d)s.point(v[d],y[d]);s.lineEnd(),s.areaEnd()}_&&(v[c]=+e(g,c,h),y[c]=+t(g,c,h),s.point(r?+r(g,c,h):v[c],n?+n(g,c,h):y[c]))}if(b)return s=null,b+""||null}function f(){return gg().defined(i).curve(a).context(o)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:at(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:at(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:at(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:at(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:at(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:at(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:at(!!h),u):i},u.curve=function(h){return arguments.length?(a=h,o!=null&&(s=a(o)),u):a},u.context=function(h){return arguments.length?(h==null?o=s=null:s=a(o=h),u):o},u}class yg{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Z4(e){return new yg(e,!0)}function K4(e){return new yg(e,!1)}const J4=nt(3),_g={draw(e,t){const n=nt(t+sc(t/28,.75))*.59436,r=n/2,i=r*J4;e.moveTo(0,n),e.lineTo(0,-n),e.moveTo(-i,-r),e.lineTo(i,r),e.moveTo(-i,r),e.lineTo(i,-r)}},Po={draw(e,t){const n=nt(t/xs);e.moveTo(n,0),e.arc(0,0,n,0,ll)}},wg={draw(e,t){const n=nt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},vg=nt(1/3),Q4=vg*2,Mg={draw(e,t){const n=nt(t/Q4),r=n*vg;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},xg={draw(e,t){const n=nt(t)*.62625;e.moveTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.lineTo(-n,0),e.closePath()}},Pg={draw(e,t){const n=nt(t-sc(t/7,2))*.87559;e.moveTo(-n,0),e.lineTo(n,0),e.moveTo(0,n),e.lineTo(0,-n)}},Sg={draw(e,t){const n=nt(t),r=-n/2;e.rect(r,r,n,n)}},Ag={draw(e,t){const n=nt(t)*.4431;e.moveTo(n,n),e.lineTo(n,-n),e.lineTo(-n,-n),e.lineTo(-n,n),e.closePath()}},e8=.8908130915292852,kg=Ms(xs/10)/Ms(7*xs/10),t8=Ms(ll/10)*kg,n8=-cg(ll/10)*kg,Eg={draw(e,t){const n=nt(t*e8),r=t8*n,i=n8*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const a=ll*o/5,s=cg(a),l=Ms(a);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}},nu=nt(3),Cg={draw(e,t){const n=-nt(t/(nu*3));e.moveTo(0,n*2),e.lineTo(-nu*n,-n),e.lineTo(nu*n,-n),e.closePath()}},r8=nt(3),Tg={draw(e,t){const n=nt(t)*.6824,r=n/2,i=n*r8/2;e.moveTo(0,-n),e.lineTo(i,r),e.lineTo(-i,r),e.closePath()}},Lt=-.5,Rt=nt(3)/2,cf=1/nt(12),i8=(cf/2+1)*3,$g={draw(e,t){const n=nt(t/i8),r=n/2,i=n*cf,o=r,a=n*cf+n,s=-o,l=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo(Lt*r-Rt*i,Rt*r+Lt*i),e.lineTo(Lt*o-Rt*a,Rt*o+Lt*a),e.lineTo(Lt*s-Rt*l,Rt*s+Lt*l),e.lineTo(Lt*r+Rt*i,Lt*i-Rt*r),e.lineTo(Lt*o+Rt*a,Lt*a-Rt*o),e.lineTo(Lt*s+Rt*l,Lt*l-Rt*s),e.closePath()}},Dg={draw(e,t){const n=nt(t-sc(t/6,1.7))*.6189;e.moveTo(-n,-n),e.lineTo(n,n),e.moveTo(-n,n),e.lineTo(n,-n)}},o8=[Po,wg,Mg,Sg,Eg,Cg,$g],a8=[Po,Pg,Dg,Tg,_g,Ag,xg];function lr(){}function Ps(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ul(e){this._context=e}ul.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ps(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ps(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function s8(e){return new ul(e)}function Ng(e){this._context=e}Ng.prototype={areaStart:lr,areaEnd:lr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ps(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function l8(e){return new Ng(e)}function Ig(e){this._context=e}Ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ps(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function u8(e){return new Ig(e)}function Lg(e,t){this._basis=new ul(e),this._beta=t}Lg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+l*o),this._beta*t[s]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const f8=function e(t){function n(r){return t===1?new ul(r):new Lg(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function Ss(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lc(e,t){this._context=e,this._k=(1-t)/6}lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ss(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Ss(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const c8=function e(t){function n(r){return new lc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uc(e,t){this._context=e,this._k=(1-t)/6}uc.prototype={areaStart:lr,areaEnd:lr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Ss(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const h8=function e(t){function n(r){return new uc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fc(e,t){this._context=e,this._k=(1-t)/6}fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ss(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const d8=function e(t){function n(r){return new fc(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cc(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>md){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>md){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/f,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function Rg(e,t){this._context=e,this._alpha=t}Rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:cc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const m8=function e(t){function n(r){return t?new Rg(r,t):new lc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Fg(e,t){this._context=e,this._alpha=t}Fg.prototype={areaStart:lr,areaEnd:lr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const p8=function e(t){function n(r){return t?new Fg(r,t):new uc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Bg(e,t){this._context=e,this._alpha=t}Bg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cc(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const b8=function e(t){function n(r){return t?new Bg(r,t):new fc(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Og(e){this._context=e}Og.prototype={areaStart:lr,areaEnd:lr,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function g8(e){return new Og(e)}function pd(e){return e<0?-1:1}function bd(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(pd(o)+pd(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function gd(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ru(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function As(e){this._context=e}As.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ru(this,this._t0,gd(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ru(this,gd(this,n=bd(this,e,t)),n);break;default:ru(this,this._t0,n=bd(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function qg(e){this._context=new Gg(e)}(qg.prototype=Object.create(As.prototype)).point=function(e,t){As.prototype.point.call(this,t,e)};function Gg(e){this._context=e}Gg.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function y8(e){return new As(e)}function _8(e){return new qg(e)}function Ug(e){this._context=e}Ug.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=yd(e),i=yd(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yd(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function w8(e){return new Ug(e)}function fl(e,t){this._context=e,this._t=t}fl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function v8(e){return new fl(e,.5)}function M8(e){return new fl(e,0)}function x8(e){return new fl(e,1)}function eo(e,t,n){this.k=e,this.x=t,this.y=n}eo.prototype={constructor:eo,scale:function(e){return e===1?this:new eo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new eo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};eo.prototype;const P8="modulepreload",S8=function(e){return"/rhythm-vis/"+e},_d={},Yr=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");i=Promise.all(n.map(a=>{if(a=S8(a),a in _d)return;_d[a]=!0;const s=a.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!r)for(let h=o.length-1;h>=0;h--){const c=o[h];if(c.href===a&&(!s||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const f=document.createElement("link");if(f.rel=s?"stylesheet":P8,s||(f.as="script",f.crossOrigin=""),f.href=a,document.head.appendChild(f),s)return new Promise((h,c)=>{f.addEventListener("load",h),f.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>t()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function A8(e){if(e){if(e=new Uint8Array(e.buffer||e),E8(e))return"wav";if(k8(e))return"mp3";if(T8(e))return"flac";if($8(e))return"m4a";if(D8(e))return"opus";if(C8(e))return"oga";if(N8(e))return"qoa"}}function k8(e){if(!(!e||e.length<3))return e[0]===73&&e[1]===68&&e[2]===51||e[0]===255&&(e[1]&224)===224||e[0]===84&&e[1]===65&&e[2]===71}function E8(e){if(!(!e||e.length<12))return e[0]===82&&e[1]===73&&e[2]===70&&e[3]===70&&e[8]===87&&e[9]===65&&e[10]===86&&e[11]===69}function C8(e){if(!(!e||e.length<4))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83}function T8(e){if(!(!e||e.length<4))return e[0]===102&&e[1]===76&&e[2]===97&&e[3]===67}function $8(e){if(!(!e||e.length<8))return e[4]===102&&e[5]===116&&e[6]===121&&e[7]===112||e[0]===77&&e[1]===52&&e[2]===65&&e[3]===32}function D8(e){if(!(!e||e.length<36))return e[0]===79&&e[1]===103&&e[2]===103&&e[3]===83&&e[28]===79&&e[29]===112&&e[30]===117&&e[31]===115&&e[32]===72&&e[33]===101&&e[34]===97&&e[35]===100}function N8(e){if(e)return e[0]===113&&e[1]===111&&e[2]===97&&e[3]===102}let I8=class{constructor(t){if(!t)throw TypeError("options argument is required");if(!t.sampleRate)throw TypeError("options.sampleRate is required");if(t.sampleRate<3e3||t.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!t.length)throw TypeError("options.length must be more than 0");this.sampleRate=t.sampleRate,this.numberOfChannels=t.numberOfChannels||1,this.length=t.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(t){if(t>=this.numberOfChannels||t<0||t==null)throw Error("Cannot getChannelData: channel number ("+t+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[t]}copyFromChannel(t,n,r){r==null&&(r=0);for(var i=this._channelData[n],o=r,a=0;o<this.length&&a<t.length;o++,a++)t[a]=i[o]}copyToChannel(t,n,r){var i=this._channelData[n];r||(r=0);for(var o=r,a=0;o<this.length&&a<t.length;o++,a++)i[o]=t[a]}};const L8=globalThis.AudioBuffer||I8;async function R8(e){if(!e&&!(e.length||e.buffer))throw Error("Bad decode target");e=new Uint8Array(e.buffer||e);let t=A8(e);if(!t)throw Error("Cannot detect audio format");if(!vt[t])throw Error("Missing decoder for "+t+" format");return vt[t](e)}const vt={async oga(e){let{decoder:t}=vt.oga;if(t)await t.reset();else{let{OggVorbisDecoder:n}=await Yr(()=>import("./index-DLNVfB_I.js"),__vite__mapDeps([0,1,2]));await(vt.oga.decoder=t=new n).ready}return e&&jr(await t.decodeFile(e))},async mp3(e){let{decoder:t}=vt.mp3;if(t)await t.reset();else{const{MPEGDecoder:n}=await Yr(()=>import("./index-DNA9enrs.js"),__vite__mapDeps([3,2]));await(vt.mp3.decoder=t=new n).ready}return e&&jr(await t.decode(e))},async flac(e){let{decoder:t}=vt.flac;if(t)await t.reset();else{const{FLACDecoder:n}=await Yr(()=>import("./index-B9VA2s6L.js"),__vite__mapDeps([4,1,2]));await(vt.flac.decoder=t=new n).ready}return e&&jr(await t.decode(e))},async opus(e){let{decoder:t}=vt.opus;if(t)await t.reset();else{const{OggOpusDecoder:n}=await Yr(()=>import("./index-BOn-tw8C.js"),__vite__mapDeps([5,1,2]));await(vt.opus.decoder=t=new n).ready}return e&&jr(await t.decodeFile(e))},async wav(e){let{decode:t}=vt.wav;if(!t){let n=await Yr(()=>import("./index-DyieNgs2.js").then(r=>r.i),__vite__mapDeps([]));t=vt.wav.decode=n.default.decode}return e&&jr(await t(e))},async qoa(e){let{decode:t}=vt.qoa;return t||(vt.qoa.decode=t=(await Yr(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),e&&jr(await t(e))}};function jr({channelData:e,sampleRate:t}){let n=new L8({sampleRate:t,length:e[0].length,numberOfChannels:e.length});for(let r=0;r<e.length;r++)n.getChannelData(r).set(e[r]);return n}var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var F8=B8;function B8(e,t){t=t||{};var n=e.numberOfChannels,r=e.sampleRate,i=t.float32?3:1,o=i===3?32:16,a;return n===2?a=q8(e.getChannelData(0),e.getChannelData(1)):a=e.getChannelData(0),O8(a,i,r,n,o)}function O8(e,t,n,r,i){var o=i/8,a=r*o,s=new ArrayBuffer(44+e.length*o),l=new DataView(s);return Pa(l,0,"RIFF"),l.setUint32(4,36+e.length*o,!0),Pa(l,8,"WAVE"),Pa(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,t,!0),l.setUint16(22,r,!0),l.setUint32(24,n,!0),l.setUint32(28,n*a,!0),l.setUint16(32,a,!0),l.setUint16(34,i,!0),Pa(l,36,"data"),l.setUint32(40,e.length*o,!0),t===1?U8(l,44,e):G8(l,44,e),s}function q8(e,t){for(var n=e.length+t.length,r=new Float32Array(n),i=0,o=0;i<n;)r[i++]=e[o],r[i++]=t[o],o++;return r}function G8(e,t,n){for(var r=0;r<n.length;r++,t+=4)e.setFloat32(t,n[r],!0)}function U8(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?i*32768:i*32767,!0)}}function Pa(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))}const z8=zg(F8);async function cl(e){const n=await(await fetch(e)).arrayBuffer();return await R8(n)}function H8(e,t,n=1){const r=t.at(-1)+n,i=e.getChannelData(0),o=new Float32Array(Math.ceil(r*e.sampleRate));for(const a of t){const s=Math.round(a*e.sampleRate);let l=1;for(let u=0;u<i.length;++u)l=Math.max(0,l-2/40100),o[s+u]=i[u]*l}return o}function hc(e,t,n){const r=new AudioBuffer({sampleRate:t,length:e.length});r.copyToChannel(e,0);const i=new Blob([z8(r)],{type:"audio/wav"});n.src=window.URL.createObjectURL(i)}function dc(e){return e.map(t=>({value:t,sort:Math.random()})).sort((t,n)=>t.sort-n.sort).map(({value:t})=>t)}function So(e,t,n){const r=new Float32Array(Math.ceil(t*e[0].audioBuffer.sampleRate));for(const i of e){const o=i.audioBuffer.getChannelData(0);for(const a of i.times){const s=Math.round(a*n);for(let l=0;l<o.length;++l)r[s+l]=Math.min(r[s+l]+o[l],1)}}return r}function ur(e){return e!=null&&!Number.isNaN(e)}function nn(e,t){return+ur(t)-+ur(e)||St(e,t)}function ks(e,t){return+ur(t)-+ur(e)||Fo(e,t)}function mc(e){return e!=null&&`${e}`!=""}function Hg(e){return isFinite(e)?e:NaN}function hl(e){return e>0&&isFinite(e)?e:NaN}function pc(e){return e<0&&isFinite(e)?e:NaN}function V8(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${W8(e.getUTCFullYear())}-${Rn(e.getUTCMonth()+1,2)}-${Rn(e.getUTCDate(),2)}${n||r||i||o?`T${Rn(n,2)}:${Rn(r,2)}${i||o?`:${Rn(i,2)}${o?`.${Rn(o,3)}`:""}`:""}Z`:""}`}function W8(e){return e<0?`-${Rn(-e,6)}`:e>9999?`+${Rn(e,6)}`:Rn(e,4)}function Rn(e,t){return`${e}`.padStart(t,"0")}const Y8=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Vg(e,t){return Y8.test(e+="")?new Date(e):typeof t=="function"?t(e):t}const ni=1e3,nr=ni*60,rr=nr*60,Mn=rr*24,fn=Mn*7,Sr=Mn*30,Jn=Mn*365,iu=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",ni],["5 seconds",5*ni],["15 seconds",15*ni],["30 seconds",30*ni],["minute",nr],["5 minutes",5*nr],["15 minutes",15*nr],["30 minutes",30*nr],["hour",rr],["3 hours",3*rr],["6 hours",6*rr],["12 hours",12*rr],["day",Mn],["2 days",2*Mn],["week",fn],["2 weeks",2*fn],["month",Sr],["3 months",3*Sr],["6 months",6*Sr],["year",Jn],["2 years",2*Jn],["5 years",5*Jn],["10 years",10*Jn],["20 years",20*Jn],["50 years",50*Jn],["100 years",100*Jn]],bc=new Map([["second",ni],["minute",nr],["hour",rr],["day",Mn],["monday",fn],["tuesday",fn],["wednesday",fn],["thursday",fn],["friday",fn],["saturday",fn],["sunday",fn],["week",fn],["month",Sr],["year",Jn]]),Wg=new Map([["second",Kt],["minute",Ho],["hour",Wo],["day",Or],["monday",Mo],["tuesday",qp],["wednesday",Gp],["thursday",Ir],["friday",Up],["saturday",zp],["sunday",_i],["week",_i],["month",jo],["year",en]]),gc=new Map([["second",Kt],["minute",Vo],["hour",Yo],["day",il],["monday",xo],["tuesday",Hp],["wednesday",Vp],["thursday",Lr],["friday",Wp],["saturday",Yp],["sunday",wi],["week",wi],["month",Xo],["year",tn]]),Jo=Symbol("intervalDuration"),dl=Symbol("intervalType");for(const[e,t]of Wg)t[Jo]=bc.get(e),t[dl]="time";for(const[e,t]of gc)t[Jo]=bc.get(e),t[dl]="utc";const to=[["year",tn,"utc"],["month",Xo,"utc"],["day",il,"utc",6*Sr],["hour",Yo,"utc",3*Mn],["minute",Vo,"utc",6*rr],["second",Kt,"utc",30*nr]],Ua=[["year",en,"time"],["month",jo,"time"],["day",Or,"time",6*Sr],["hour",Wo,"time",3*Mn],["minute",Ho,"time",6*rr],["second",Kt,"time",30*nr]],j8=[to[0],Ua[0],to[1],Ua[1],to[2],Ua[2],...to.slice(3)];function Yg(e){let t=`${e}`.toLowerCase();t.endsWith("s")&&(t=t.slice(0,-1));let n=1;const r=/^(?:(\d+)\s+)/.exec(t);switch(r&&(t=t.slice(r[0].length),n=+r[1]),t){case"quarter":t="month",n*=3;break;case"half":t="month",n*=6;break}let i=gc.get(t);if(!i)throw new Error(`unknown interval: ${e}`);if(n>1&&!i.every)throw new Error(`non-periodic interval: ${t}`);return[t,n]}function jg(e){return Xg(Yg(e),"time")}function yc(e){return Xg(Yg(e),"utc")}function Xg([e,t],n){let r=(n==="time"?Wg:gc).get(e);return t>1&&(r=r.every(t),r[Jo]=bc.get(e)*t,r[dl]=n),r}function wd(e,t){if(!(t>1))return;const n=e[Jo];if(!iu.some(([,i])=>i===n)||n%Mn===0&&Mn<n&&n<Sr)return;const[r]=iu[Os(([,i])=>Math.log(i)).center(iu,Math.log(n*t))];return(e[dl]==="time"?jg:yc)(r)}function vd(e,t,n){const r=t==="time"?oc:Zo;if(n==null)return r(e==="year"?"%Y":e==="month"?"%Y-%m":e==="day"?"%Y-%m-%d":e==="hour"||e==="minute"?"%Y-%m-%dT%H:%M":e==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const i=X8(n);switch(e){case"millisecond":return Xr(r(".%L"),r(":%M:%S"),i);case"second":return Xr(r(":%S"),r("%-I:%M"),i);case"minute":return Xr(r("%-I:%M"),r("%p"),i);case"hour":return Xr(r("%-I %p"),r("%b %-d"),i);case"day":return Xr(r("%-d"),r("%b"),i);case"month":return Xr(r("%b"),r("%Y"),i);case"year":return r("%Y")}throw new Error("unable to format time ticks")}function X8(e){return e==="left"||e==="right"?(t,n)=>`
${t}
${n}`:e==="top"?(t,n)=>`${n}
${t}`:(t,n)=>`${t}
${n}`}function Z8(e){return e==="time"?Ua:e==="utc"?to:j8}function K8(e,t,n){const r=zt(ww(t,(i,o)=>Math.abs(o-i)));if(r<1e3)return vd("millisecond","utc",n);for(const[i,o,a,s]of Z8(e)){if(r>s||i==="hour"&&!r)break;if(t.every(l=>o.floor(l)>=l))return vd(i,a,n)}}function Xr(e,t,n){return(r,i,o)=>{const a=e(r,i),s=t(r,i),l=i-Mi(o);return i!==l&&o[l]!==void 0&&s===t(o[l],l)?a:n(a,s)}}const Ao=Object.getPrototypeOf(Uint8Array),J8=Object.prototype.toString,Zg=Symbol("reindex");function lt(e,t,n){const r=typeof t;return r==="string"?Md(e,Kg(t),n):r==="function"?Md(e,t,n):r==="number"||t instanceof Date||r==="boolean"?Ke(e,Qo(t),n):typeof(t==null?void 0:t.transform)=="function"?xd(t.transform(e),n):Q8(xd(t,n),e==null?void 0:e[Zg])}function Q8(e,t){return t?Mc(e,t):e}function Md(e,t,n){return Ke(e,(n==null?void 0:n.prototype)instanceof Ao?e9(t):t,n)}function xd(e,t){return t===void 0?Dt(e):e instanceof t?e:t.prototype instanceof Ao&&!(e instanceof Ao)?t.from(e,wc):t.from(e)}function e9(e){return(t,n)=>wc(e(t,n))}const za=[null],Kg=e=>t=>t[e],ml={transform:jn},dt={transform:e=>e},t9=()=>1,n9=()=>!0,gt=e=>e==null?e:`${e}`,qe=e=>e==null?e:+e,_c=e=>e?e[0]:void 0,hf=e=>e?e[1]:void 0,Qo=e=>()=>e;function r9(e){const t=+`${e}`.slice(1)/100;return(n,r)=>ci(n,t,r)}function mn(e){return e instanceof Ao?e:Ke(e,wc,Float64Array)}function wc(e){return e==null?NaN:Number(e)}function i9(e){return Ke(e,Jg)}function Jg(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Vg(e):e==null||isNaN(e=+e)?void 0:new Date(e)}function Vn(e,t){return e===void 0&&(e=t),e===null?[void 0,"none"]:bl(e)?[void 0,e]:[e,void 0]}function yt(e,t){return e===void 0&&(e=t),e===null||typeof e=="number"?[void 0,e]:[e,void 0]}function Qg(e,t,n){if(e!=null)return on(e,t,n)}function on(e,t,n){const r=`${e}`.toLowerCase();if(!n.includes(r))throw new Error(`invalid ${t}: ${e}`);return r}function Dt(e){return e==null||e instanceof Array||e instanceof Ao?e:Array.from(e)}function Ke(e,t,n=Array){return e==null?e:e instanceof n?e.map(t):n.from(e,t)}function ko(e,t=Array){return e instanceof t?e.slice():t.from(e)}function o9({x:e,x1:t,x2:n}){return e!==void 0||t!==void 0||n!==void 0}function e2({y:e,y1:t,y2:n}){return e!==void 0||t!==void 0||n!==void 0}function a9(e){return o9(e)||e2(e)||e.interval!==void 0}function dr(e){return(e==null?void 0:e.toString)===J8}function df(e){return dr(e)&&(e.type!==void 0||e.domain!==void 0)}function pl(e){return dr(e)&&typeof e.transform!="function"}function vi(e){return pl(e)&&e.value===void 0&&e.channel===void 0}function s9(e,t,n,r=dt){return t===void 0&&n===void 0?(t=0,n=e===void 0?r:e):t===void 0?t=e===void 0?0:e:n===void 0&&(n=e===void 0?0:e),[t,n]}function ea(e,t){return e===void 0&&t===void 0?[_c,hf]:[e,t]}function vc({z:e,fill:t,stroke:n}={}){return e===void 0&&([e]=Vn(t)),e===void 0&&([e]=Vn(n)),e}function jn(e){const t=e.length,n=new Uint32Array(t);for(let r=0;r<t;++r)n[r]=r;return n}function Mc(e,t){return Ke(t,n=>e[n],e.constructor)}function l9(e,t,n){return e.subarray?e.subarray(t,n):e.slice(t,n)}function Mr(e){return e!==null&&typeof e=="object"?e.valueOf():e}function u9(e,t){if(t[e]!==void 0)return t[e];switch(e){case"x1":case"x2":e="x";break;case"y1":case"y2":e="y";break}return t[e]}function Es(e){let t;return[{transform:()=>t,label:Ur(e)},n=>t=n]}function Nn(e){return e==null?[e]:Es(e)}function Ur(e,t){return typeof e=="string"?e:e&&e.label!==void 0?e.label:t}function mf(e,t){return{transform(n){const r=e.transform(n),i=t.transform(n);return Et(r)||Et(i)?Ke(r,(o,a)=>new Date((+r[a]+ +i[a])/2)):Ke(r,(o,a)=>(+r[a]+ +i[a])/2,Float64Array)},label:e.label}}function t2(e,t){const n=n2(t==null?void 0:t.interval,t==null?void 0:t.type);return n?Ke(e,n):e}function n2(e,t){const n=xc(e,t);return n&&(r=>ur(r)?n.floor(r):r)}function xc(e,t){if(e!=null){if(typeof e=="number"){0<e&&e<1&&Number.isInteger(1/e)&&(e=-1/e);const n=Math.abs(e);return e<0?{floor:r=>Math.floor(r*n)/n,offset:r=>(r*n+1)/n,range:(r,i)=>Tu(Math.ceil(r*n),i*n).map(o=>o/n)}:{floor:r=>Math.floor(r/n)*n,offset:r=>r+n,range:(r,i)=>Tu(Math.ceil(r/n),i/n).map(o=>o*n)}}if(typeof e=="string")return(t==="time"?jg:yc)(e);if(typeof e.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof e.offset!="function")throw new Error("invalid interval; missing offset method");return e}}function Di(e,t){if(e=xc(e,t),e&&typeof e.range!="function")throw new Error("invalid interval: missing range method");return e}function f9(e,t){if(e=Di(e,t),e&&typeof e.ceil!="function")throw new Error("invalid interval: missing ceil method");return e}function c9(e){return ri(e)&&typeof(e==null?void 0:e.floor)=="function"&&e.floor()instanceof Date}function ri(e){return typeof(e==null?void 0:e.range)=="function"}function ta(e){return e===void 0||pl(e)?e:{value:e}}function h9(e){return e==null?null:{transform:t=>lt(t,e,Float64Array),label:Ur(e)}}function mr(e){return e&&typeof e[Symbol.iterator]=="function"}function r2(e){for(const t of e)if(t!=null)return typeof t!="object"||t instanceof Date}function Pd(e){for(const t of e){if(t==null)continue;const n=typeof t;return n==="string"||n==="boolean"}}function Et(e){for(const t of e)if(t!=null)return t instanceof Date}function d9(e){for(const t of e)if(t!=null)return typeof t=="string"&&isNaN(t)&&Vg(t)}function m9(e){for(const t of e)if(t!=null){if(typeof t!="string")return!1;if(t.trim())return!isNaN(t)}}function p9(e){for(const t of e)if(t!=null)return typeof t=="number"}function ou(e,t){let n;for(const r of e)if(r!=null){if(!t(r))return!1;n=!0}return n}const b9=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function bl(e){return typeof e!="string"?!1:(e=e.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(e)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(e)||b9.has(e))}function g9(e){return typeof e=="number"&&(0<=e&&e<=1||isNaN(e))}function xt(e){return e==null||Eo(e)}function Eo(e){return/^\s*none\s*$/i.test(e)}function y9(e){return/^\s*round\s*$/i.test(e)}function pf(e,t){return Qg(e,t,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function gl(e="middle"){return pf(e,"frameAnchor")}function Mi(e){if(e==null)return;const t=e[0],n=e[e.length-1];return Fo(t,n)}function _9(e={},...t){let n=e;for(const r of t)for(const i in r)if(n[i]===void 0){const o=r[i];n===e?n={...n,[i]:o}:n[i]=o}return n}function w9(e){console.warn("named iterables are deprecated; please use an object instead");const t=new Set;return Object.fromEntries(Array.from(e,n=>{const{name:r}=n;if(r==null)throw new Error("missing name");const i=`${r}`;if(i==="__proto__")throw new Error(`illegal name: ${i}`);if(t.has(i))throw new Error(`duplicate name: ${i}`);return t.add(i),[r,n]}))}function i2(e){return mr(e)?w9(e):e}const pn=Symbol("position"),Xn=Symbol("color"),na=Symbol("radius"),ra=Symbol("length"),ia=Symbol("opacity"),yl=Symbol("symbol"),o2=Symbol("projection"),Ye=new Map([["x",pn],["y",pn],["fx",pn],["fy",pn],["r",na],["color",Xn],["opacity",ia],["symbol",yl],["length",ra],["projection",o2]]);function v9(e){return e===pn||e===o2}function M9(e){return e===pn||e===na||e===ra||e===ia}const x9=Math.sqrt(3),P9=2/x9,S9={draw(e,t){const n=Math.sqrt(t/Math.PI),r=n*P9,i=r/2;e.moveTo(0,r),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(0,-r),e.lineTo(-n,-i),e.lineTo(-n,i),e.closePath()}},Pc=new Map([["asterisk",_g],["circle",Po],["cross",wg],["diamond",Mg],["diamond2",xg],["hexagon",S9],["plus",Pg],["square",Sg],["square2",Ag],["star",Eg],["times",Dg],["triangle",Cg],["triangle2",Tg],["wye",$g]]);function Sc(e){return e&&typeof e.draw=="function"}function A9(e){return Sc(e)?!0:typeof e!="string"?!1:Pc.has(e.toLowerCase())}function Ac(e){if(e==null||Sc(e))return e;const t=Pc.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid symbol: ${e}`)}function k9(e){if(e==null||Sc(e))return[void 0,e];if(typeof e=="string"){const t=Pc.get(`${e}`.toLowerCase());if(t)return[void 0,t]}return[e,void 0]}function _l({filter:e,sort:t,reverse:n,transform:r,initializer:i,...o}={},a){if(r===void 0&&(e!=null&&(r=a2(e)),t!=null&&!vi(t)&&(r=au(r,kc(t))),n&&(r=au(r,s2))),a!=null&&i!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(t===null||vi(t))&&{sort:t},transform:au(r,a)}}function xi({filter:e,sort:t,reverse:n,initializer:r,...i}={},o){return r===void 0&&(e!=null&&(r=a2(e)),t!=null&&!vi(t)&&(r=su(r,kc(t))),n&&(r=su(r,s2))),{...i,...(t===null||vi(t))&&{sort:t},initializer:su(r,o)}}function au(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i){return{data:n,facets:r}=e.call(this,n,r,i),t.call(this,Dt(n),r,i)}}function su(e,t){return e==null?t===null?void 0:t:t==null?e===null?void 0:e:function(n,r,i,...o){let a,s,l,u,f,h;return{data:s=n,facets:l=r,channels:a}=e.call(this,n,r,i,...o),{data:f=s,facets:h=l,channels:u}=t.call(this,s,l,{...i,...a},...o),{data:f,facets:h,channels:{...a,...u}}}}function E9(e,t){return(e.initializer!=null?xi:_l)(e,t)}function a2(e){return(t,n)=>{const r=lt(t,e);return{data:t,facets:n.map(i=>i.filter(o=>r[o]))}}}function s2(e,t){return{data:e,facets:t.map(n=>n.slice().reverse())}}function C9(e,{sort:t,...n}={}){return{...(pl(e)&&e.channel!==void 0?xi:E9)(n,kc(e)),sort:vi(t)?t:null}}function kc(e){return(typeof e=="function"&&e.length!==1?T9:$9)(e)}function T9(e){return(t,n)=>{const r=(i,o)=>e(t[i],t[o]);return{data:t,facets:n.map(i=>i.slice().sort(r))}}}function $9(e){let t,n;({channel:t,value:e,order:n}={...ta(e)});const r=t==null?void 0:t.startsWith("-");if(r&&(t=t.slice(1)),n===void 0&&(n=r?ks:nn),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=nn;break;case"descending":n=ks;break;default:throw new Error(`invalid order: ${n}`)}return(i,o,a)=>{let s;if(t===void 0)s=lt(i,e);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(s=a[t],!s)return{};s=s.value}const l=(u,f)=>n(s[u],s[f]);return{data:i,facets:o.map(u=>u.slice().sort(l))}}}function Sa(e,...t){for(const{name:n}of e)if(t.includes(n))return!0;return!1}function D9(e,t,n=l2){const r=Object.entries(e);return t.title!=null&&e.title===void 0&&r.push(["title",O9]),t.href!=null&&e.href===void 0&&r.push(["href",Cc]),r.filter(([,i])=>i!==void 0).map(([i,o])=>o===null?N9(i):n(i,o,t))}function l2(e,t,n,r=u2){let i;dr(t)&&"reduce"in t&&(i=t.scale,t=t.reduce);const o=r(e,t,n),[a,s]=Es(o.label);let l;return{name:e,output:i===void 0?a:{value:a,scale:i},initialize(u){o.initialize(u),l=s([])},scope(u,f){o.scope(u,f)},reduce(u,f){l.push(o.reduce(u,f))}}}function N9(e){return{name:e,initialize(){},scope(){},reduce(){}}}function u2(e,t,n,r=Ec){const i=u9(e,n),o=r(t,i);let a,s;return{label:Ur(o===Cs?null:i,o.label),initialize(l){a=i===void 0?l:lt(l,i),o.scope==="data"&&(s=o.reduceIndex(jn(l),a))},scope(l,u){o.scope===l&&(s=o.reduceIndex(u,a))},reduce(l,u){return o.scope==null?o.reduceIndex(l,a,u):o.reduceIndex(l,a,s,u)}}}function Sd(e,t){return t?mo(Us(e,n=>t[n]),_c):[[,e]]}function Ec(e,t,n=I9){if(e==null)return n(e);if(typeof e.reduceIndex=="function")return e;if(typeof e.reduce=="function"&&dr(e))return F9(e);if(typeof e=="function")return B9(e);if(/^p\d{2}$/i.test(e))return In(r9(e));switch(`${e}`.toLowerCase()){case"first":return Cc;case"last":return q9;case"identity":return f2;case"count":return Cs;case"distinct":return G9;case"sum":return t==null?Cs:U9;case"proportion":return kd(t,"data");case"proportion-facet":return kd(t,"facet");case"deviation":return In(Ff);case"min":return In(Gn);case"min-index":return In(pw);case"max":return In(zt);case"max-index":return In(mw);case"mean":return Ad(Of);case"median":return Ad(Cu);case"variance":return In(Rf);case"mode":return In(_w)}return n(e)}function I9(e){throw new Error(`invalid reduce: ${e}`)}function L9(e,t){for(const n in t){const r=t[n];if(r!==void 0&&!e.some(i=>i.name===n))return r}}function R9(e,t,n){if(t){const r=t.output.transform(),i=(o,a)=>nn(r[o],r[a]);e.forEach(o=>o.sort(i))}n&&e.forEach(r=>r.reverse())}function F9(e){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...e,reduceIndex:e.reduce.bind(e)}}function B9(e){return{reduceIndex(t,n,r){return e(Mc(n,t),r)}}}function In(e){return{reduceIndex(t,n){return e(t,r=>n[r])}}}function Ad(e){return{reduceIndex(t,n){const r=e(t,i=>n[i]);return Et(n)?new Date(r):r}}}const f2={reduceIndex(e,t){return Mc(t,e)}},Cc={reduceIndex(e,t){return t[e[0]]}},O9={reduceIndex(e,t){const r=mo(oi(e,o=>o.length,o=>t[o]),hf),i=r.slice(-5).reverse();if(i.length<r.length){const o=r.slice(0,-4);i[4]=[` ${o.length.toLocaleString("en-US")} more`,ar(o,hf)]}return i.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},q9={reduceIndex(e,t){return t[e[e.length-1]]}},Cs={label:"Frequency",reduceIndex(e){return e.length}},G9={label:"Distinct",reduceIndex(e,t){const n=new Gs;for(const r of e)n.add(t[r]);return n.size}},U9=In(ar);function kd(e,t){return e==null?{scope:t,label:"Frequency",reduceIndex:(n,r,i=1)=>n.length/i}:{scope:t,reduceIndex:(n,r,i=1)=>ar(n,o=>r[o])/i}}function Co(e,{scale:t,type:n,value:r,filter:i,hint:o,label:a=Ur(r)},s){return o===void 0&&typeof(r==null?void 0:r.transform)=="function"&&(o=r.hint),c2(s,{scale:t,type:n,value:lt(e,r),label:a,filter:i,hint:o})}function z9(e,t){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,Co(t,r,n)]))}function H9(e,t){const n=Object.fromEntries(Object.entries(e).map(([r,{scale:i,value:o}])=>{const a=i==null?null:t[i];return[r,a==null?o:Ke(o,a)]}));return n.channels=e,n}function c2(e,t){const{scale:n,value:r}=t;if(n===!0||n==="auto")switch(e){case"fill":case"stroke":case"color":t.scale=n!==!0&&ou(r,bl)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":t.scale=n!==!0&&ou(r,g9)?null:"opacity";break;case"symbol":n!==!0&&ou(r,A9)?(t.scale=null,t.value=Ke(r,Ac)):t.scale="symbol";break;default:t.scale=Ye.has(e)?e:null;break}else if(n===!1)t.scale=null;else if(n!=null&&!Ye.has(n))throw new Error(`unknown scale: ${n}`);return t}function V9(e,t,n,r,i){const{order:o,reverse:a,reduce:s=!0,limit:l}=i;for(const u in i){if(!Ye.has(u))continue;let{value:f,order:h=o,reverse:c=a,reduce:m=s,limit:d=l}=ta(i[u]);const p=f==null?void 0:f.startsWith("-");if(p&&(f=f.slice(1)),h=h===void 0?p!==(f==="width"||f==="height")?d2:h2:j9(h),m==null||m===!1)continue;const g=u==="fx"||u==="fy"?Y9(t,r[u]):W9(n,u);if(!g)throw new Error(`missing channel for scale: ${u}`);const _=g.value,[b=0,v=1/0]=mr(d)?d:d<0?[d]:[0,d];if(f==null)g.domain=()=>{let y=Array.from(new Gs(_));return c&&(y=y.reverse()),(b!==0||v!==1/0)&&(y=y.slice(b,v)),y};else{const y=f==="data"?e:f==="height"?Ed(n,"y1","y2"):f==="width"?Ed(n,"x1","x2"):bf(n,f,f==="y"?"y2":f==="x"?"x2":void 0),x=Ec(m===!0?"max":m,y);g.domain=()=>{let M=lw(jn(_),P=>x.reduceIndex(P,y),P=>_[P]);return h&&M.sort(h),c&&M.reverse(),(b!==0||v!==1/0)&&(M=M.slice(b,v)),M.map(_c)}}}}function W9(e,t){for(const n in e){const r=e[n];if(r.scale===t)return r}}function Y9(e,t){const n=e.original;if(n===e)return t;const r=t.value,i=t.value=[];for(let o=0;o<n.length;++o){const a=r[n[o][0]];for(const s of e[o])i[s]=a}return t}function Ed(e,t,n){const r=bf(e,t),i=bf(e,n);return Ke(i,(o,a)=>Math.abs(o-r[a]),Float64Array)}function bf(e,t,n){let r=e[t];if(!r&&n!==void 0&&(r=e[n]),r)return r.value;throw new Error(`missing channel: ${t}`)}function j9(e){if(e==null||typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"ascending":return h2;case"descending":return d2}throw new Error(`invalid order: ${e}`)}function h2([e,t],[n,r]){return nn(t,r)||nn(e,n)}function d2([e,t],[n,r]){return ks(t,r)||nn(e,n)}function Cd(e,t){let n=e[t];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function X9(e){let t,n;return(...r)=>(((n==null?void 0:n.length)!==r.length||n.some((i,o)=>i!==r[o]))&&(n=r,t=e(...r)),t)}const Z9=X9(e=>new Intl.NumberFormat(e));function K9(e="en-US"){const t=Z9(e);return n=>n!=null&&!isNaN(n)?t.format(n):void 0}function J9(e){return V8(e,"Invalid Date")}function Q9(e="en-US"){const t=K9(e);return n=>(n instanceof Date?J9:typeof n=="number"?t:gt)(n)}const Rr=Q9();let gf=0,yf;function eM(){const e=gf;return gf=0,yf=void 0,e}function ir(e){e!==yf&&(yf=e,console.warn(e),++gf)}const Pt=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let tM=0;function Td(){return`plot-clip-${++tM}`}function nM(e,{title:t,href:n,ariaLabel:r,ariaDescription:i,ariaHidden:o,target:a,fill:s,fillOpacity:l,stroke:u,strokeWidth:f,strokeOpacity:h,strokeLinejoin:c,strokeLinecap:m,strokeMiterlimit:d,strokeDasharray:p,strokeDashoffset:g,opacity:_,mixBlendMode:b,imageFilter:v,paintOrder:y,pointerEvents:x,shapeRendering:M,channels:P},{ariaLabel:$,fill:N="currentColor",fillOpacity:I,stroke:E="none",strokeOpacity:O,strokeWidth:H,strokeLinecap:D,strokeLinejoin:T,strokeMiterlimit:z,paintOrder:ae}){N===null&&(s=null,l=null),E===null&&(u=null,h=null),xt(N)?!xt(E)&&(!xt(s)||P!=null&&P.fill)&&(E="none"):xt(E)&&(!xt(u)||P!=null&&P.stroke)&&(N="none");const[ne,se]=Vn(s,N),[Y,K]=yt(l,I),[Z,Q]=Vn(u,E),[me,de]=yt(h,O),[ce,ee]=yt(_);Eo(Q)||(f===void 0&&(f=H),m===void 0&&(m=D),c===void 0&&(c=T),d===void 0&&!y9(c)&&(d=z),!Eo(se)&&y===void 0&&(y=ae));const[re,G]=yt(f);return N!==null&&(e.fill=ft(se,"currentColor"),e.fillOpacity=Ui(K,1)),E!==null&&(e.stroke=ft(Q,"none"),e.strokeWidth=Ui(G,1),e.strokeOpacity=Ui(de,1),e.strokeLinejoin=ft(c,"miter"),e.strokeLinecap=ft(m,"butt"),e.strokeMiterlimit=Ui(d,4),e.strokeDasharray=ft(p,"none"),e.strokeDashoffset=ft(g,"0")),e.target=gt(a),e.ariaLabel=gt($),e.ariaDescription=gt(i),e.ariaHidden=gt(o),e.opacity=Ui(ee,1),e.mixBlendMode=ft(b,"normal"),e.imageFilter=ft(v,"none"),e.paintOrder=ft(y,"normal"),e.pointerEvents=ft(x,"auto"),e.shapeRendering=ft(M,"auto"),{title:{value:t,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:r,optional:!0,filter:null},fill:{value:ne,scale:"auto",optional:!0},fillOpacity:{value:Y,scale:"auto",optional:!0},stroke:{value:Z,scale:"auto",optional:!0},strokeOpacity:{value:me,scale:"auto",optional:!0},strokeWidth:{value:re,optional:!0},opacity:{value:ce,scale:"auto",optional:!0}}}function rM(e,t){t&&e.filter(n=>mc(t[n])).append("title").call(oM,t)}function iM(e,t){t&&e.filter(([n])=>mc(t[n])).append("title").call(aM,t)}function oM(e,t){t&&e.text(n=>Rr(t[n]))}function aM(e,t){t&&e.text(([n])=>Rr(t[n]))}function Zn(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:s,strokeOpacity:l,strokeWidth:u,opacity:f,href:h}){r&&_e(e,"aria-label",c=>r[c]),o&&_e(e,"fill",c=>o[c]),a&&_e(e,"fill-opacity",c=>a[c]),s&&_e(e,"stroke",c=>s[c]),l&&_e(e,"stroke-opacity",c=>l[c]),u&&_e(e,"stroke-width",c=>u[c]),f&&_e(e,"opacity",c=>f[c]),h&&g2(e,c=>h[c],t),n||rM(e,i)}function m2(e,{target:t,tip:n},{ariaLabel:r,title:i,fill:o,fillOpacity:a,stroke:s,strokeOpacity:l,strokeWidth:u,opacity:f,href:h}){r&&_e(e,"aria-label",([c])=>r[c]),o&&_e(e,"fill",([c])=>o[c]),a&&_e(e,"fill-opacity",([c])=>a[c]),s&&_e(e,"stroke",([c])=>s[c]),l&&_e(e,"stroke-opacity",([c])=>l[c]),u&&_e(e,"stroke-width",([c])=>u[c]),f&&_e(e,"opacity",([c])=>f[c]),h&&g2(e,([c])=>h[c],t),n||iM(e,i)}function sM({ariaLabel:e,title:t,fill:n,fillOpacity:r,stroke:i,strokeOpacity:o,strokeWidth:a,opacity:s,href:l},{tip:u}){return[e,u?void 0:t,n,r,i,o,a,s,l].filter(f=>f!==void 0)}function lM(e,t,n){const r=Us(e,i=>t[i]);return n===void 0&&r.size>1+e.length>>1&&ir("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),r.values()}function*p2(e,t,n,r){const{z:i}=n,{z:o}=r,a=sM(r,n),s=[...t,...a];for(const l of o?lM(e,o,i):[e]){let u,f;e:for(const h of l){for(const c of s)if(!ur(c[h])){f&&f.push(-1);continue e}if(u===void 0){f&&(yield f),u=a.map(c=>Mr(c[h])),f=[h];continue}f.push(h);for(let c=0;c<a.length;++c)if(Mr(a[c][h])!==u[c]){yield f,u=a.map(d=>Mr(d[h])),f=[h];continue e}}f&&(yield f)}}function b2(e){return e===!0?e="frame":e===!1?e=null:e!=null&&(e=on(e,"clip",["frame","sphere"])),e}function uM(e,t,n,r){let i;const{clip:o=r.clip}=t;switch(o){case"frame":{const{width:a,height:s,marginLeft:l,marginRight:u,marginTop:f,marginBottom:h}=n,c=Td();i=`url(#${c})`,e=Ze("svg:g",r).call(m=>m.append("svg:clipPath").attr("id",c).append("rect").attr("x",l).attr("y",f).attr("width",a-u-l).attr("height",s-f-h)).each(function(){this.appendChild(e.node()),e.node=()=>this});break}case"sphere":{const{projection:a}=r;if(!a)throw new Error('the "sphere" clip option requires a projection');const s=Td();i=`url(#${s})`,e.append("clipPath").attr("id",s).append("path").attr("d",Ks(a)({type:"Sphere"}));break}}_e(e,"aria-label",t.ariaLabel),_e(e,"aria-description",t.ariaDescription),_e(e,"aria-hidden",t.ariaHidden),_e(e,"clip-path",i)}function Yt(e,t,n,r){uM(e,t,n,r),_e(e,"fill",t.fill),_e(e,"fill-opacity",t.fillOpacity),_e(e,"stroke",t.stroke),_e(e,"stroke-width",t.strokeWidth),_e(e,"stroke-opacity",t.strokeOpacity),_e(e,"stroke-linejoin",t.strokeLinejoin),_e(e,"stroke-linecap",t.strokeLinecap),_e(e,"stroke-miterlimit",t.strokeMiterlimit),_e(e,"stroke-dasharray",t.strokeDasharray),_e(e,"stroke-dashoffset",t.strokeDashoffset),_e(e,"shape-rendering",t.shapeRendering),_e(e,"filter",t.imageFilter),_e(e,"paint-order",t.paintOrder);const{pointerEvents:i=r.pointerSticky===!1?"none":void 0}=t;_e(e,"pointer-events",i)}function jt(e,t){fM(e,"mix-blend-mode",t.mixBlendMode),_e(e,"opacity",t.opacity)}function g2(e,t,n){e.each(function(r){const i=t(r);if(i!=null){const o=this.ownerDocument.createElementNS(hi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(hi.xlink,"href",i),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function _e(e,t,n){n!=null&&e.attr(t,n)}function fM(e,t,n){n!=null&&e.style(t,n)}function It(e,t,{x:n,y:r},i=Pt,o=Pt){i+=t.dx,o+=t.dy,n!=null&&n.bandwidth&&(i+=n.bandwidth()/2),r!=null&&r.bandwidth&&(o+=r.bandwidth()/2),(i||o)&&e.attr("transform",`translate(${i},${o})`)}function ft(e,t){if((e=gt(e))!==t)return e}function Ui(e,t){if((e=qe(e))!==t)return e}const cM=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Tc(e){if(e===void 0)return"plot-d6a7b5";if(e=`${e}`,!cM.test(e))throw new Error(`invalid class name: ${e}`);return e}function $c(e,t){if(typeof t=="string")e.property("style",t);else if(t!=null)for(const n of e)Object.assign(n.style,t)}function oa({frameAnchor:e},{width:t,height:n,marginTop:r,marginRight:i,marginBottom:o,marginLeft:a}){return[/left$/.test(e)?a:/right$/.test(e)?t-i:(a+t-i)/2,/^top/.test(e)?r:/^bottom/.test(e)?n-o:(r+n-o)/2]}function Dc(e={}){const{document:t=typeof window<"u"?window.document:void 0,clip:n}=e;return{document:t,clip:b2(n)}}function Ze(e,{document:t}){return ao(Vs(e).call(t.documentElement))}const y2=Math.PI,Tn=2*y2,$d=.618;function hM({projection:e,inset:t=0,insetTop:n=t,insetRight:r=t,insetBottom:i=t,insetLeft:o=t}={},a){if(e==null)return;if(typeof e.stream=="function")return e;let s,l,u="frame";if(dr(e)){let x;if({type:e,domain:l,inset:x,insetTop:n=x!==void 0?x:n,insetRight:r=x!==void 0?x:r,insetBottom:i=x!==void 0?x:i,insetLeft:o=x!==void 0?x:o,clip:u=u,...s}=e,e==null)return}typeof e!="function"&&({type:e}=_2(e));const{width:f,height:h,marginLeft:c,marginRight:m,marginTop:d,marginBottom:p}=a,g=f-c-m-o-r,_=h-d-p-n-i;if(e=e==null?void 0:e({width:g,height:_,clip:u,...s}),e==null)return;u=dM(u,c,d,f-m,h-p);let b=c+o,v=d+n,y;if(l!=null){const[[x,M],[P,$]]=Ks(e).bounds(l),N=Math.min(g/(P-x),_/($-M));N>0?(b-=(N*(x+P)-g)/2,v-=(N*(M+$)-_)/2,y=rf({point(I,E){this.stream.point(I*N+b,E*N+v)}})):ir("Warning: the projection could not be fit to the specified domain; using the default scale.")}return y??(y=b===0&&v===0?w2():rf({point(x,M){this.stream.point(x+b,M+v)}})),{stream:x=>e.stream(y.stream(u(x)))}}function _2(e){switch(`${e}`.toLowerCase()){case"albers-usa":return Xt(t7,.7463,.4673);case"albers":return Aa(yp,.7463,.4673);case"azimuthal-equal-area":return Xt(n7,4,4);case"azimuthal-equidistant":return Xt(r7,Tn,Tn);case"conic-conformal":return Aa(a7,Tn,Tn);case"conic-equal-area":return Aa(bs,6.1702,2.9781);case"conic-equidistant":return Aa(u7,7.312,3.6282);case"equal-earth":return Xt(c7,5.4133,2.6347);case"equirectangular":return Xt(s7,Tn,y2);case"gnomonic":return Xt(h7,3.4641,3.4641);case"identity":return{type:w2};case"reflect-y":return{type:mM};case"mercator":return Xt(i7,Tn,Tn);case"orthographic":return Xt(d7,2,2);case"stereographic":return Xt(m7,2,2);case"transverse-mercator":return Xt(p7,Tn,Tn);default:throw new Error(`unknown projection type: ${e}`)}}function dM(e,t,n,r,i){if(e===!1||e==null||typeof e=="number")return o=>o;switch(e===!0&&(e="frame"),`${e}`.toLowerCase()){case"frame":return np(t,n,r,i);default:throw new Error(`unknown projection clip type: ${e}`)}}function Xt(e,t,n){return{type:({width:r,height:i,rotate:o,precision:a=.15,clip:s})=>{var u,f,h;const l=e();return a!=null&&((u=l.precision)==null||u.call(l,a)),o!=null&&((f=l.rotate)==null||f.call(l,o)),typeof s=="number"&&((h=l.clipAngle)==null||h.call(l,s)),l.scale(Math.min(r/t,i/n)),l.translate([r/2,i/2]),l},aspectRatio:n/t}}function Aa(e,t,n){const{type:r,aspectRatio:i}=Xt(e,t,n);return{type:o=>{const{parallels:a,domain:s,width:l,height:u}=o,f=r(o);return a!=null&&(f.parallels(a),s===void 0&&f.fitSize([l,u],{type:"Sphere"})),f},aspectRatio:i}}const w2=Qo({stream:e=>e}),mM=Qo(rf({point(e,t){this.stream.point(e,-t)}}));function pM(e,t,n,r){const i=n[e],o=n[t],a=i.length,s=n[e]=new Float64Array(a).fill(NaN),l=n[t]=new Float64Array(a).fill(NaN);let u;const f=r.stream({point(h,c){s[u]=h,l[u]=c}});for(u=0;u<a;++u)f.point(i[u],o[u])}function bM({projection:e}={}){return e==null?!1:typeof e.stream=="function"?!0:(dr(e)&&(e=e.type),e!=null)}function gM(e){if(typeof(e==null?void 0:e.stream)=="function")return $d;if(dr(e)&&(e=e.type),e!=null){if(typeof e!="function"){const{aspectRatio:t}=_2(e);if(t)return t}return $d}}function yM(e){const t=[],n=[],r={scale:"x",value:t},i={scale:"y",value:n},o={point(a,s){t.push(a),n.push(s)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of e.value)_r(a,o);return[r,i]}const _M=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],v2=new Map([["accent",B4],["category10",F4],["dark2",O4],["observable10",_M],["paired",q4],["pastel1",G4],["pastel2",U4],["set1",z4],["set2",H4],["set3",V4],["tableau10",W4]]);function wM(e){return e!=null&&v2.has(`${e}`.toLowerCase())}const Dd=new Map([...v2,["brbg",$n(ib,ob)],["prgn",$n(ab,sb)],["piyg",$n(lb,ub)],["puor",$n(fb,cb)],["rdbu",$n(uf,ws)],["rdgy",$n(hb,db)],["rdylbu",$n(ff,vs)],["rdylgn",$n(mb,pb)],["spectral",$n(bb,gb)],["burd",Nd(uf,ws)],["buylrd",Nd(ff,vs)],["blues",ot(Ub,zb)],["greens",ot(Hb,Vb)],["greys",ot(Wb,Yb)],["oranges",ot(Jb,Qb)],["purples",ot(jb,Xb)],["reds",ot(Zb,Kb)],["turbo",Dn(ag)],["viridis",Dn(sg)],["magma",Dn(lg)],["inferno",Dn(ug)],["plasma",Dn(fg)],["cividis",Dn(eg)],["cubehelix",Dn(tg)],["warm",Dn(ng)],["cool",Dn(rg)],["bugn",ot(yb,_b)],["bupu",ot(wb,vb)],["gnbu",ot(Mb,xb)],["orrd",ot(Pb,Sb)],["pubu",ot(Eb,Cb)],["pubugn",ot(Ab,kb)],["purd",ot(Tb,$b)],["rdpu",ot(Db,Nb)],["ylgn",ot(Rb,Fb)],["ylgnbu",ot(Ib,Lb)],["ylorbr",ot(Bb,Ob)],["ylorrd",ot(qb,Gb)],["rainbow",Id(ig)],["sinebow",Id(og)]]);function ot(e,t){return({length:n})=>n===1?[e[3][1]]:n===2?[e[3][1],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Qt(t,n):e[n])}function $n(e,t){return({length:n})=>n===2?[e[3][0],e[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Qt(t,n):e[n])}function Nd(e,t){return({length:n})=>n===2?[e[3][2],e[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Qt(r=>t(1-r),n):e[n].slice().reverse())}function Dn(e){return({length:t})=>Qt(e,Math.max(2,Math.floor(t)))}function Id(e){return({length:t})=>Qt(e,Math.floor(t)+1).slice(0,-1)}function M2(e){const t=`${e}`.toLowerCase();if(!Dd.has(t))throw new Error(`unknown ordinal scheme: ${t}`);return Dd.get(t)}function wl(e,t){const n=M2(e),r=typeof n=="function"?n({length:t}):n;return r.length!==t?r.slice(0,t):r}function vM(e,t="greys"){const n=new Set,[r,i]=wl(t,2);for(const o of e)if(o!=null)if(o===!0)n.add(i);else if(o===!1)n.add(r);else return;return[...n]}const Ld=new Map([["brbg",ob],["prgn",sb],["piyg",ub],["puor",cb],["rdbu",ws],["rdgy",db],["rdylbu",vs],["rdylgn",pb],["spectral",gb],["burd",e=>ws(1-e)],["buylrd",e=>vs(1-e)],["blues",zb],["greens",Vb],["greys",Yb],["purples",Xb],["reds",Kb],["oranges",Qb],["turbo",ag],["viridis",sg],["magma",lg],["inferno",ug],["plasma",fg],["cividis",eg],["cubehelix",tg],["warm",ng],["cool",rg],["bugn",_b],["bupu",vb],["gnbu",xb],["orrd",Sb],["pubugn",kb],["pubu",Cb],["purd",$b],["rdpu",Nb],["ylgnbu",Lb],["ylgn",Fb],["ylorbr",Ob],["ylorrd",Gb],["rainbow",ig],["sinebow",og]]);function Nc(e){const t=`${e}`.toLowerCase();if(!Ld.has(t))throw new Error(`unknown quantitative scheme: ${t}`);return Ld.get(t)}const MM=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function xM(e){return e!=null&&MM.has(`${e}`.toLowerCase())}const x2=e=>t=>e(1-t),lu=[0,1],Rd=new Map([["number",ct],["rgb",$r],["hsl",Hv],["hcl",Yv],["lab",Vv]]);function P2(e){const t=`${e}`.toLowerCase();if(!Rd.has(t))throw new Error(`unknown interpolator: ${t}`);return Rd.get(t)}function aa(e,t,n,{type:r,nice:i,clamp:o,zero:a,domain:s=A2(e,n),unknown:l,round:u,scheme:f,interval:h,range:c=Ye.get(e)===na?IM(n,s):Ye.get(e)===ra?LM(n,s):Ye.get(e)===ia?lu:void 0,interpolate:m=Ye.get(e)===Xn?f==null&&c!==void 0?$r:Nc(f!==void 0?f:r==="cyclical"?"rainbow":"turbo"):u?Wf:ct,reverse:d}){if(h=Di(h,r),(r==="cyclical"||r==="sequential")&&(r="linear"),typeof m!="function"&&(m=P2(m)),d=!!d,c!==void 0){const p=(s=Dt(s)).length,g=(c=Dt(c)).length;if(p!==g){if(m.length===1)throw new Error("invalid piecewise interpolator");m=js(m,c),c=void 0}}if(m.length===1?(d&&(m=x2(m),d=!1),c===void 0&&(c=Float64Array.from(s,(p,g)=>g/(s.length-1)),c.length===2&&(c=lu)),t.interpolate((c===lu?Qo:Lc)(m))):t.interpolate(m),a){const[p,g]=Bt(s);(p>0||g<0)&&(s=ko(s),Mi(s)!==Math.sign(p)?s[s.length-1]=0:s[0]=0)}return d&&(s=Qa(s)),t.domain(s).unknown(l),i&&(t.nice(PM(i,r)),s=t.domain()),c!==void 0&&t.range(c),o&&t.clamp(o),{type:r,domain:s,range:c,scale:t,interpolate:m,interval:h}}function PM(e,t){return e===!0?void 0:typeof e=="number"?e:f9(e,t)}function SM(e,t,n){return aa(e,rc(),t,n)}function AM(e,t,n){return S2(e,t,{...n,exponent:.5})}function S2(e,t,{exponent:n=1,...r}){return aa(e,Fp().exponent(n),t,{...r,type:"pow"})}function kM(e,t,{base:n=10,domain:r=RM(t),...i}){return aa(e,Np().base(n),t,{...i,domain:r})}function EM(e,t,{constant:n=1,...r}){return aa(e,Lp().constant(n),t,r)}function CM(e,t,{range:n,quantiles:r=n===void 0?5:(n=[...n]).length,n:i=r,scheme:o="rdylbu",domain:a=FM(t),unknown:s,interpolate:l,reverse:u}){return n===void 0&&(n=l!==void 0?Qt(l,i):Ye.get(e)===Xn?wl(o,i):void 0),a.length>0&&(a=Bp(a,n===void 0?{length:i}:n).quantiles()),Ic(e,t,{domain:a,range:n,reverse:u,unknown:s})}function TM(e,t,{range:n,n:r=n===void 0?5:(n=[...n]).length,scheme:i="rdylbu",domain:o=A2(e,t),unknown:a,interpolate:s,reverse:l}){const[u,f]=Bt(o);let h;return n===void 0?(h=po(u,f,r),h[0]<=u&&h.splice(0,1),h[h.length-1]>=f&&h.pop(),r=h.length+1,n=s!==void 0?Qt(s,r):Ye.get(e)===Xn?wl(i,r):void 0):(h=Qt(ct(u,f),r+1).slice(1,-1),u instanceof Date&&(h=h.map(c=>new Date(c)))),Mi(Dt(o))<0&&h.reverse(),Ic(e,t,{domain:h,range:n,reverse:l,unknown:a})}function Ic(e,t,{domain:n=[0],unknown:r,scheme:i="rdylbu",interpolate:o,range:a=o!==void 0?Qt(o,n.length+1):Ye.get(e)===Xn?wl(i,n.length+1):void 0,reverse:s}){n=Dt(n);const l=Mi(n);if(!isNaN(l)&&!$M(n,l))throw new Error(`the ${e} scale has a non-monotonic domain`);return s&&(a=Qa(a)),{type:"threshold",scale:Op(l<0?Qa(n):n,a===void 0?[]:a).unknown(r),domain:n,range:a}}function $M(e,t){for(let n=1,r=e.length,i=e[0];n<r;++n){const o=Fo(i,i=e[n]);if(o!==0&&o!==t)return!1}return!0}function DM(e){return{type:"identity",scale:M9(Ye.get(e))?Tp():t=>t}}function To(e,t=Hg){return e.length?[Gn(e,({value:n})=>n===void 0?n:Gn(n,t)),zt(e,({value:n})=>n===void 0?n:zt(n,t))]:[0,1]}function A2(e,t){const n=Ye.get(e);return(n===na||n===ia||n===ra?NM:To)(t)}function NM(e){return[0,e.length?zt(e,({value:t})=>t===void 0?t:zt(t,Hg)):1]}function IM(e,t){const n=e.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const r=ci(e,.5,({value:a})=>a===void 0?NaN:ci(a,.25,hl)),i=t.map(a=>3*Math.sqrt(a/r)),o=30/zt(i);return o<1?i.map(a=>a*o):i}function LM(e,t){const n=Cu(e,({value:o})=>o===void 0?NaN:Cu(o,Math.abs)),r=t.map(o=>12*o/n),i=60/zt(r);return i<1?r.map(o=>o*i):r}function RM(e){for(const{value:t}of e)if(t!==void 0)for(let n of t){if(n>0)return To(e,hl);if(n<0)return To(e,pc)}return[1,10]}function FM(e){const t=[];for(const{value:n}of e)if(n!==void 0)for(const r of n)t.push(r);return t}function Lc(e){return(t,n)=>r=>e(t+r*(n-t))}function vl(e,t,n,r,{type:i,nice:o,clamp:a,domain:s=To(r),unknown:l,pivot:u=0,scheme:f,range:h,symmetric:c=!0,interpolate:m=Ye.get(e)===Xn?f==null&&h!==void 0?$r:Nc(f!==void 0?f:"rdbu"):ct,reverse:d}){u=+u,s=Dt(s);let[p,g]=s;if(s.length>2&&ir(`Warning: the diverging ${e} scale domain contains extra elements.`),Fo(p,g)<0&&([p,g]=[g,p],d=!d),p=Math.min(p,u),g=Math.max(g,u),typeof m!="function"&&(m=P2(m)),h!==void 0&&(m=m.length===1?Lc(m)(...h):js(m,h)),d&&(m=x2(m)),c){const _=n.apply(u),b=_-n.apply(p),v=n.apply(g)-_;b<v?p=n.invert(_-v):b>v&&(g=n.invert(_+b))}return t.domain([p,u,g]).unknown(l).interpolator(m),a&&t.clamp(a),o&&t.nice(o),{type:i,domain:[p,g],pivot:u,interpolate:m,scale:t}}function BM(e,t,n){return vl(e,eb(),UM,t,n)}function OM(e,t,n){return k2(e,t,{...n,exponent:.5})}function k2(e,t,{exponent:n=1,...r}){return vl(e,rb().exponent(n=+n),VM(n),t,{...r,type:"diverging-pow"})}function qM(e,t,{base:n=10,pivot:r=1,domain:i=To(t,r<0?pc:hl),...o}){return vl(e,tb().base(n=+n),zM,t,{domain:i,pivot:r,...o})}function GM(e,t,{constant:n=1,...r}){return vl(e,nb().constant(n=+n),WM(n),t,r)}const UM={apply(e){return e},invert(e){return e}},zM={apply:Math.log,invert:Math.exp},HM={apply(e){return Math.sign(e)*Math.sqrt(Math.abs(e))},invert(e){return Math.sign(e)*(e*e)}};function VM(e){return e===.5?HM:{apply(t){return Math.sign(t)*Math.pow(Math.abs(t),e)},invert(t){return Math.sign(t)*Math.pow(Math.abs(t),1/e)}}}function WM(e){return{apply(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))},invert(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}}function E2(e,t,n,r){return aa(e,t,n,r)}function YM(e,t,n){return E2(e,L4(),t,n)}function jM(e,t,n){return E2(e,R4(),t,n)}const sa=Symbol("ordinal");function C2(e,t,n,{type:r,interval:i,domain:o,range:a,reverse:s,hint:l}){return i=Di(i,r),o===void 0&&(o=$2(n,i,e)),(r==="categorical"||r===sa)&&(r="ordinal"),s&&(o=Qa(o)),o=t.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),t.range(a)),{type:r,domain:o,range:a,scale:t,hint:l,interval:i}}function XM(e,t,{type:n,interval:r,domain:i,range:o,scheme:a,unknown:s,...l}){r=Di(r,n),i===void 0&&(i=$2(t,r,e));let u;if(Ye.get(e)===yl)u=JM(t),o=o===void 0?QM(u):Ke(o,Ac);else if(Ye.get(e)===Xn&&(o===void 0&&(n==="ordinal"||n===sa)&&(o=vM(i,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const f=Nc(a),h=o[0],c=o[1]-o[0];o=({length:m})=>Qt(d=>f(h+c*d),m)}else o=M2(a);if(s===af)throw new Error(`implicit unknown on ${e} scale is not supported`);return C2(e,nc().unknown(s),t,{...l,type:n,domain:i,range:o,hint:u})}function ZM(e,t,{align:n=.5,padding:r=.5,...i}){return T2(b7().align(n).padding(r),t,i,e)}function KM(e,t,{align:n=.5,padding:r=.1,paddingInner:i=r,paddingOuter:o=e==="fx"||e==="fy"?0:r,...a}){return T2(tl().align(n).paddingInner(i).paddingOuter(o),t,a,e)}function T2(e,t,n,r){let{round:i}=n;return i!==void 0&&e.round(i=!!i),e=C2(r,e,t,n),e.round=i,e}function $2(e,t,n){const r=new Gs;for(const{value:i,domain:o}of e){if(o!==void 0)return o();if(i!==void 0)for(const a of i)r.add(a)}if(t!==void 0){const[i,o]=Bt(r).map(t.floor,t);return t.range(i,t.offset(o))}if(r.size>1e4&&Ye.get(n)===pn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return mo(r,nn)}function Fd(e,t){let n;for(const{hint:r}of e){const i=r==null?void 0:r[t];if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}}return n}function JM(e){return{fill:Fd(e,"fill"),stroke:Fd(e,"stroke")}}function QM(e){return xt(e.fill)?a8:o8}function _f(e,{label:t,inset:n=0,insetTop:r=n,insetRight:i=n,insetBottom:o=n,insetLeft:a=n,round:s,nice:l,clamp:u,zero:f,align:h,padding:c,projection:m,facet:{label:d=t}={},...p}={}){const g={};for(const[_,b]of e){const v=p[_],y=ix(_,b,{round:Ye.get(_)===pn?s:void 0,nice:l,clamp:u,zero:f,align:h,padding:c,projection:m,...v});if(y){let{label:x=_==="fx"||_==="fy"?d:t,percent:M,transform:P,inset:$,insetTop:N=$!==void 0?$:_==="y"?r:0,insetRight:I=$!==void 0?$:_==="x"?i:0,insetBottom:E=$!==void 0?$:_==="y"?o:0,insetLeft:O=$!==void 0?$:_==="x"?a:0}=v||{};if(P==null)P=void 0;else if(typeof P!="function")throw new Error("invalid scale transform; not a function");y.percent=!!M,y.label=x===void 0?tx(b,y):x,y.transform=P,_==="x"||_==="fx"?(y.insetLeft=+O,y.insetRight=+I):(_==="y"||_==="fy")&&(y.insetTop=+N,y.insetBottom=+E),g[_]=y}}return g}function Bd(e){const t={},n={scales:t};for(const[r,i]of Object.entries(e)){const{scale:o,type:a,interval:s,label:l}=i;t[r]=ux(i),n[r]=o,o.type=a,s!=null&&(o.interval=s),l!=null&&(o.label=l)}return n}function ex(e,t){const{x:n,y:r,fx:i,fy:o}=e,a=i||o?Rc(t):t;i&&Od(i,a),o&&qd(o,a);const s=i||o?D2(e,t):t;n&&Od(n,s),r&&qd(r,s)}function tx(e=[],t){let n;for(const{label:r}of e)if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}if(n!==void 0)return!zr(t)&&t.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function nx(e){return Math.sign(Mi(e.domain()))*Math.sign(Mi(e.range()))}function Rc(e){const{marginTop:t,marginRight:n,marginBottom:r,marginLeft:i,width:o,height:a,facet:{marginTop:s,marginRight:l,marginBottom:u,marginLeft:f}}=e;return{marginTop:Math.max(t,s),marginRight:Math.max(n,l),marginBottom:Math.max(r,u),marginLeft:Math.max(i,f),width:o,height:a}}function D2({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:l}=Rc(n);return{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:e?e.scale.bandwidth()+a+i:s,height:t?t.scale.bandwidth()+r+o:l,facet:{width:s,height:l}}}function Od(e,t){if(e.range===void 0){const{insetLeft:n,insetRight:r}=e,{width:i,marginLeft:o=0,marginRight:a=0}=t,s=o+n,l=i-a-r;e.range=[s,Math.max(s,l)],zr(e)||(e.range=I2(e)),e.scale.range(e.range)}N2(e)}function qd(e,t){if(e.range===void 0){const{insetTop:n,insetBottom:r}=e,{height:i,marginTop:o=0,marginBottom:a=0}=t,s=o+n,l=i-a-r;e.range=[Math.max(s,l),s],zr(e)?e.range.reverse():e.range=I2(e),e.scale.range(e.range)}N2(e)}function N2(e){e.round===void 0&&ax(e)&&rx(e)<=30&&e.scale.round(!0)}function rx({scale:e}){const t=e.domain().length,[n,r]=e.range(),i=e.paddingInner?e.paddingInner():1,o=e.paddingOuter?e.paddingOuter():e.padding(),a=t-i,s=Math.abs(r-n)/Math.max(1,a+o*2);return(s-Math.floor(s))*a}function I2(e){const t=e.scale.domain().length+L2(e);if(!(t>2))return e.range;const[n,r]=e.range;return Array.from({length:t},(i,o)=>n+o/(t-1)*(r-n))}function ix(e,t=[],n={}){const r=ox(e,t,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&e!=="fx"&&e!=="fy"&&zr({type:r})){const i=t.map(({value:o})=>o).filter(o=>o!==void 0);i.some(Et)?ir(`Warning: some data associated with the ${e} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Zr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${e} scale to "${Zr(r)}".`):i.some(d9)?ir(`Warning: some data associated with the ${e} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Zr(r)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${e} scale to "${Zr(r)}".`):i.some(m9)&&ir(`Warning: some data associated with the ${e} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Zr(r)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${e} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${e} scale to "${Zr(r)}".`)}switch(n.type=r,r){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=ka(t,n,mn);break;case"identity":switch(Ye.get(e)){case pn:n=ka(t,n,mn);break;case yl:n=ka(t,n,sx);break}break;case"utc":case"time":n=ka(t,n,i9);break}switch(r){case"diverging":return BM(e,t,n);case"diverging-sqrt":return OM(e,t,n);case"diverging-pow":return k2(e,t,n);case"diverging-log":return qM(e,t,n);case"diverging-symlog":return GM(e,t,n);case"categorical":case"ordinal":case sa:return XM(e,t,n);case"cyclical":case"sequential":case"linear":return SM(e,t,n);case"sqrt":return AM(e,t,n);case"threshold":return Ic(e,t,n);case"quantile":return CM(e,t,n);case"quantize":return TM(e,t,n);case"pow":return S2(e,t,n);case"log":return kM(e,t,n);case"symlog":return EM(e,t,n);case"utc":return jM(e,t,n);case"time":return YM(e,t,n);case"point":return ZM(e,t,n);case"band":return KM(e,t,n);case"identity":return DM(e);case void 0:return;default:throw new Error(`unknown scale type: ${r}`)}}function Zr(e){return typeof e=="symbol"?e.description:e}function Gd(e){return typeof e=="string"?`${e}`.toLowerCase():e}const Ud={toString:()=>"projection"};function ox(e,t,{type:n,domain:r,range:i,scheme:o,pivot:a,projection:s}){if(n=Gd(n),e==="fx"||e==="fy")return"band";(e==="x"||e==="y")&&s!=null&&(n=Ud);for(const u of t){const f=Gd(u.type);if(f!==void 0){if(n===void 0)n=f;else if(n!==f)throw new Error(`scale incompatible with channel: ${n} !== ${f}`)}}if(n===Ud)return;if(n!==void 0)return n;if(r===void 0&&!t.some(({value:u})=>u!==void 0))return;const l=Ye.get(e);if(l===na)return"sqrt";if(l===ia||l===ra)return"linear";if(l===yl)return"ordinal";if((r||i||[]).length>2)return uu(l);if(r!==void 0){if(Pd(r))return uu(l);if(Et(r))return"utc"}else{const u=t.map(({value:f})=>f).filter(f=>f!==void 0);if(u.some(Pd))return uu(l);if(u.some(Et))return"utc"}if(l===Xn){if(a!=null||xM(o))return"diverging";if(wM(o))return"categorical"}return"linear"}function uu(e){switch(e){case pn:return"point";case Xn:return sa;default:return"ordinal"}}function zr({type:e}){return e==="ordinal"||e==="point"||e==="band"||e===sa}function L2({type:e}){return e==="threshold"}function ax({type:e}){return e==="point"||e==="band"}function Pi(e){if(e===void 0)return!0;const t=e.domain(),n=e(t[0]);for(let r=1,i=t.length;r<i;++r)if(e(t[r])-n)return!1;return!0}function ka(e,{domain:t,...n},r){var i;for(const o of e)o.value!==void 0&&(t===void 0&&(t=(i=o.value)==null?void 0:i.domain),o.value=r(o.value));return{domain:t===void 0?t:r(t),...n}}function sx(e){return Ke(e,Ac)}function lx(e){return t=>{if(!Ye.has(t=`${t}`))throw new Error(`unknown scale: ${t}`);return e[t]}}function ux({scale:e,type:t,domain:n,range:r,interpolate:i,interval:o,transform:a,percent:s,pivot:l}){if(t==="identity")return{type:"identity",apply:f=>f,invert:f=>f};const u=e.unknown?e.unknown():void 0;return{type:t,domain:ko(n),...r!==void 0&&{range:ko(r)},...a!==void 0&&{transform:a},...s&&{percent:s},...u!==void 0&&{unknown:u},...o!==void 0&&{interval:o},...i!==void 0&&{interpolate:i},...e.clamp&&{clamp:e.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...e.base&&{base:e.base()},...e.exponent&&{exponent:e.exponent()},...e.constant&&{constant:e.constant()},...e.align&&{align:e.align(),round:e.round()},...e.padding&&(e.paddingInner?{paddingInner:e.paddingInner(),paddingOuter:e.paddingOuter()}:{padding:e.padding()}),...e.bandwidth&&{bandwidth:e.bandwidth(),step:e.step()},apply:f=>e(f),...e.invert&&{invert:f=>e.invert(f)}}}function fx(e,t,n={}){let r=.5-Pt,i=.5+Pt,o=.5+Pt,a=.5-Pt;for(const{marginTop:p,marginRight:g,marginBottom:_,marginLeft:b}of t)p>r&&(r=p),g>i&&(i=g),_>o&&(o=_),b>a&&(a=b);let{margin:s,marginTop:l=s!==void 0?s:r,marginRight:u=s!==void 0?s:i,marginBottom:f=s!==void 0?s:o,marginLeft:h=s!==void 0?s:a}=n;l=+l,u=+u,f=+f,h=+h;let{width:c=640,height:m=cx(e,n,{width:c,marginTopDefault:r,marginRightDefault:i,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,l-r+f-o)}=n;c=+c,m=+m;const d={width:c,height:m,marginTop:l,marginRight:u,marginBottom:f,marginLeft:h};if(e.fx||e.fy){let{margin:p,marginTop:g=p!==void 0?p:l,marginRight:_=p!==void 0?p:u,marginBottom:b=p!==void 0?p:f,marginLeft:v=p!==void 0?p:h}=n.facet??{};g=+g,_=+_,b=+b,v=+v,d.facet={marginTop:g,marginRight:_,marginBottom:b,marginLeft:v}}return d}function cx({x:e,y:t,fy:n,fx:r},{projection:i,aspectRatio:o},{width:a,marginTopDefault:s,marginRightDefault:l,marginBottomDefault:u,marginLeftDefault:f}){const h=n?n.scale.domain().length:1,c=gM(i);if(c){const d=r?r.scale.domain().length:1,p=(1.1*h-.1)/(1.1*d-.1)*c,g=Math.max(.1,Math.min(10,p));return Math.round((a-f-l)*g+s+u)}const m=t?zr(t)?t.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const d=zd("y",t)/(zd("x",e)*o),p=r?r.scale.bandwidth():1,g=n?n.scale.bandwidth():1,_=p*(a-f-l)-e.insetLeft-e.insetRight;return(d*_+t.insetTop+t.insetBottom)/g+s+u}return!!(t||n)*Math.max(1,Math.min(60,m*h))*20+!!r*30+60}function zd(e,t){if(!t)throw new Error(`aspectRatio requires ${e} scale`);const{type:n,domain:r}=t;let i;switch(n){case"linear":case"utc":case"time":i=Number;break;case"pow":{const s=t.scale.exponent();i=l=>Math.pow(l,s);break}case"log":i=Math.log;break;case"point":case"band":return r.length;default:throw new Error(`unsupported ${e} scale for aspectRatio: ${n}`)}const[o,a]=Bt(r);return Math.abs(i(a)-i(o))}function hx(e,t){const{fx:n,fy:r}=_f(e,t),i=n==null?void 0:n.scale.domain(),o=r==null?void 0:r.scale.domain();return i&&o?aw(i,o).map(([a,s],l)=>({x:a,y:s,i:l})):i?i.map((a,s)=>({x:a,i:s})):o?o.map((a,s)=>({y:a,i:s})):void 0}function dx(e,{x:t,y:n}){return t&&(t=wf(t)),n&&(n=wf(n)),e.filter(t&&n?r=>t.has(r.x)&&n.has(r.y):t?r=>t.has(r.x):r=>n.has(r.y)).sort(t&&n?(r,i)=>t.get(r.x)-t.get(i.x)||n.get(r.y)-n.get(i.y):t?(r,i)=>t.get(r.x)-t.get(i.x):(r,i)=>n.get(r.y)-n.get(i.y))}function Fc(e,{fx:t,fy:n}){const r=jn(e),i=t==null?void 0:t.value,o=n==null?void 0:n.value;return t&&n?oi(r,a=>(a.fx=i[a[0]],a.fy=o[a[0]],a),a=>i[a],a=>o[a]):t?oi(r,a=>(a.fx=i[a[0]],a),a=>i[a]):oi(r,a=>(a.fy=o[a[0]],a),a=>o[a])}function mx(e,t,{marginTop:n,marginLeft:r}){return e&&t?({x:i,y:o})=>`translate(${e(i)-r},${t(o)-n})`:e?({x:i})=>`translate(${e(i)-r},0)`:({y:i})=>`translate(0,${t(i)-n})`}function px(e){const t=[],n=new Uint32Array(ar(e,r=>r.length));for(const r of e){let i=0;for(const o of e)r!==o&&(n.set(o,i),i+=o.length);t.push(n.slice(0,i))}return t}const bx=new Map([["top",fu],["right",du],["bottom",cu],["left",hu],["top-left",Ea(fu,hu)],["top-right",Ea(fu,du)],["bottom-left",Ea(cu,hu)],["bottom-right",Ea(cu,du)],["top-empty",_x],["right-empty",Mx],["bottom-empty",wx],["left-empty",vx],["empty",xx]]);function gx(e){if(e==null)return null;const t=bx.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid facet anchor: ${e}`)}const Hd=new WeakMap;function wf(e){let t=Hd.get(e);return t||Hd.set(e,t=new Er(Ke(e,(n,r)=>[n,r]))),t}function pr(e,t){return wf(e).get(t)}function yx(e,t,n){return t=Mr(t),n=Mr(n),e.find(r=>Object.is(Mr(r.x),t)&&Object.is(Mr(r.y),n))}function Ml(e,t,n){var r;return(r=yx(e,t,n))==null?void 0:r.empty}function fu(e,{y:t},{y:n}){return t?pr(t,n)===0:!0}function cu(e,{y:t},{y:n}){return t?pr(t,n)===t.length-1:!0}function hu(e,{x:t},{x:n}){return t?pr(t,n)===0:!0}function du(e,{x:t},{x:n}){return t?pr(t,n)===t.length-1:!0}function _x(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,r);if(o>0)return Ml(e,n,t[o-1])}function wx(e,{y:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,r);if(o<t.length-1)return Ml(e,n,t[o+1])}function vx(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,n);if(o>0)return Ml(e,t[o-1],r)}function Mx(e,{x:t},{x:n,y:r,empty:i}){if(i)return!1;if(!t)return;const o=pr(t,n);if(o<t.length-1)return Ml(e,t[o+1],r)}function xx(e,t,{empty:n}){return n}function Ea(e,t){return function(){return e.apply(null,arguments)&&t.apply(null,arguments)}}function mu(e,{channels:{fx:t,fy:n},groups:r}){return t&&n?e.map(({x:i,y:o})=>{var a;return((a=r.get(i))==null?void 0:a.get(o))??[]}):t?e.map(({x:i})=>r.get(i)??[]):e.map(({y:i})=>r.get(i)??[])}class wt{constructor(t,n={},r={},i){const{facet:o="auto",facetAnchor:a,fx:s,fy:l,sort:u,dx:f=0,dy:h=0,margin:c=0,marginTop:m=c,marginRight:d=c,marginBottom:p=c,marginLeft:g=c,clip:_=i==null?void 0:i.clip,channels:b,tip:v,render:y}=r;if(this.data=t,this.sort=vi(u)?u:null,this.initializer=xi(r).initializer,this.transform=this.initializer?r.transform:_l(r).transform,o===null||o===!1?this.facet=null:(this.facet=on(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=t===za&&typeof s=="string"?[s]:s,this.fy=t===za&&typeof l=="string"?[l]:l),this.facetAnchor=gx(a),n=i2(n),b!==void 0&&(n={...Px(b),...n}),i!==void 0&&(n={...nM(this,r,i),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,M])=>{if(pl(M.value)){const{value:P,label:$=M.label,scale:N=M.scale}=M.value;M={...M,label:$,scale:N,value:P}}if(t===za&&typeof M.value=="string"){const{value:P}=M;M={...M,value:[P]}}return[x,M]}).filter(([x,{value:M,optional:P}])=>{if(M!=null)return!0;if(P)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+f,this.dy=+h,this.marginTop=+m,this.marginRight=+d,this.marginBottom=+p,this.marginLeft=+g,this.clip=b2(_),this.tip=Sx(v),this.facet==="super"){if(s||l)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:M}=n[x];if(!(M!=="x"&&M!=="y"))throw new Error("super-faceting cannot use x or y")}}y!=null&&(this.render=F2(y,this.render))}initialize(t,n,r){let i=Dt(this.data);t===void 0&&i!=null&&(t=[jn(i)]);const o=t;this.transform!=null&&({facets:t,data:i}=this.transform(i,t,r),i=Dt(i)),t!==void 0&&(t.original=o);const a=z9(this.channels,i);return this.sort!=null&&V9(i,t,a,n,this.sort),{data:i,facets:t,channels:a}}filter(t,n,r){for(const i in n){const{filter:o=ur}=n[i];if(o!==null){const a=r[i];t=t.filter(s=>o(a[s]))}}return t}project(t,n,r){for(const i in t)if(t[i].scale==="x"&&/^x|x$/.test(i)){const o=i.replace(/^x|x$/,"y");o in t&&t[o].scale==="y"&&pM(i,o,n,r.projection)}}scale(t,n,r){const i=H9(t,n);return r.projection&&this.project(t,i,r),i}}function R2(...e){return e.plot=wt.prototype.plot,e}function F2(e,t){if(e==null)return t===null?void 0:t;if(t==null)return e===null?void 0:e;if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);return function(n,r,i,o,a,s){return e.call(this,n,r,i,o,a,(l,u,f,h,c)=>t.call(this,l,u,f,h,c,s))}}function Px(e){return Object.fromEntries(Object.entries(i2(e)).map(([t,n])=>(n=typeof n=="string"?{value:n,label:t}:ta(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[t,n])))}function Sx(e){return e===!0?"xy":e===!1||e==null?null:typeof e=="string"?on(e,"tip",["x","y","xy"]):e}function xl(e,t){return(e==null?void 0:e.tip)===!0?{...e,tip:t}:dr(e==null?void 0:e.tip)&&e.tip.pointer===void 0?{...e,tip:{...e.tip,pointer:t}}:e}const Vd=new WeakMap;function Bc(e,t,{x:n,y:r,px:i,py:o,maxRadius:a=40,channels:s,render:l,...u}={}){return a=+a,i!=null&&(n??(n=null),s={...s,px:{value:i,scale:"x"}}),o!=null&&(r??(r=null),s={...s,py:{value:o,scale:"y"}}),{x:n,y:r,channels:s,...u,render:F2(function(f,h,c,m,d,p){d={...d,pointerSticky:!1};const g=d.ownerSVGElement,{data:_}=d.getMarkState(this);let b=Vd.get(g);b||Vd.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(Q)-1;const{x:y,y:x,fx:M,fy:P}=h;let $=M?M(f.fx)-m.marginLeft:0,N=P?P(f.fy)-m.marginTop:0;y!=null&&y.bandwidth&&($+=y.bandwidth()/2),x!=null&&x.bandwidth&&(N+=x.bandwidth()/2);const I=f.fi!=null;let E;if(I){let ee=b.facetStates;ee||(b.facetStates=ee=new Map),E=ee.get(this),E||ee.set(this,E=new Map)}const[O,H]=oa(this,m),{px:D,py:T}=c,z=D?ee=>D[ee]:B2(c,O),ae=T?ee=>T[ee]:O2(c,H);let ne,se,Y,K;function Z(ee,re){if(I)if(K&&(K=cancelAnimationFrame(K)),ee==null)E.delete(f.fi);else{E.set(f.fi,re),K=requestAnimationFrame(()=>{K=null;for(const[G,J]of E)if(J<re||J===re&&G<f.fi){ee=null;break}Q(ee)});return}Q(ee)}function Q(ee){if(ne===ee&&Y===b.sticky)return;ne=ee,Y=d.pointerSticky=b.sticky;const re=ne==null?[]:[ne];I&&(re.fx=f.fx,re.fy=f.fy,re.fi=f.fi);const G=p(re,h,c,m,d);if(se){if(I){const J=se.parentNode,te=se.getAttribute("transform"),L=G.getAttribute("transform");te?G.setAttribute("transform",te):G.removeAttribute("transform"),L?J.setAttribute("transform",L):J.removeAttribute("transform"),G.removeAttribute("aria-label"),G.removeAttribute("aria-description"),G.removeAttribute("aria-hidden")}se.replaceWith(G)}return b.roots[v]=se=G,ne==null&&(E==null?void 0:E.size)>1||d.dispatchValue(ne==null?null:_[ne]),G}function me(ee){if(b.sticky||ee.pointerType==="mouse"&&ee.buttons===1)return;let[re,G]=hv(ee);re-=$,G-=N;const J=re<m.marginLeft||re>m.width-m.marginRight?1:e,te=G<m.marginTop||G>m.height-m.marginBottom?1:t;let L=null,pe=a*a;for(const ie of f){const be=J*(z(ie)-re),Ee=te*(ae(ie)-G),$e=be*be+Ee*Ee;$e<=pe&&(L=ie,pe=$e)}if(L!=null&&(e!==1||t!==1)){const ie=z(L)-re,be=ae(L)-G;pe=ie*ie+be*be}Z(L,pe)}function de(ee){ee.pointerType==="mouse"&&ne!=null&&(b.sticky&&b.roots.some(re=>re==null?void 0:re.contains(ee.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(re=>re(null))):(b.sticky=!0,Q(ne)),ee.stopImmediatePropagation()))}function ce(ee){ee.pointerType==="mouse"&&(b.sticky||Z(null))}return g.addEventListener("pointerenter",me),g.addEventListener("pointermove",me),g.addEventListener("pointerdown",de),g.addEventListener("pointerleave",ce),Q(null)},l)}}function Ax(e){return Bc(1,1,e)}function kx(e){return Bc(1,.01,e)}function Wd(e){return Bc(.01,1,e)}function B2({x1:e,x2:t,x:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function O2({y1:e,y2:t,y:n=e},r){return e&&t?i=>(e[i]+t[i])/2:n?i=>n[i]:()=>r}function q2(e){return zr(e)&&e.interval===void 0?void 0:"tabular-nums"}function Ex(e,t){let{label:n=e.label,tickSize:r=6,width:i=240,height:o=44+r,marginTop:a=18,marginRight:s=0,marginBottom:l=16+r,marginLeft:u=0,style:f,ticks:h=(i-u-s)/64,tickFormat:c,fontVariant:m=q2(e),round:d=!0,opacity:p,className:g}=t;const _=Dc(t);g=Tc(g),p=yt(p)[1],c===null&&(c=()=>null);const b=Ze("svg",_).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",i).attr("height",o).attr("viewBox",`0 0 ${i} ${o}`).call(O=>O.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call($c,f);let v=O=>O.selectAll(".tick line").attr("y1",a+l-o),y;const x=d?(O,H)=>O.rangeRound(H):(O,H)=>O.range(H),{type:M,domain:P,range:$,interpolate:N,scale:I,pivot:E}=e;if(N){const O=$===void 0?N:js(N.length===1?Lc(N):N,$);y=x(I.copy(),Qt(ct(u,i-s),Math.min(P.length+(E!==void 0),$===void 0?1/0:$.length)));const H=256,D=_.document.createElement("canvas");D.width=H,D.height=1;const T=D.getContext("2d");for(let z=0,ae=H-1;z<H;++z)T.fillStyle=O(z/ae),T.fillRect(z,0,1,1);b.append("image").attr("opacity",p).attr("x",u).attr("y",a).attr("width",i-u-s).attr("height",o-a-l).attr("preserveAspectRatio","none").attr("xlink:href",D.toDataURL())}else if(M==="threshold"){const O=P,H=c===void 0?D=>D:typeof c=="string"?Ti(c):c;y=x(rc().domain([-1,$.length-1]),[u,i-s]),b.append("g").attr("fill-opacity",p).selectAll().data($).enter().append("rect").attr("x",(D,T)=>y(T-1)).attr("y",a).attr("width",(D,T)=>y(T)-y(T-1)).attr("height",o-a-l).attr("fill",D=>D),h=Ke(O,(D,T)=>T),c=D=>H(O[D],D)}else y=x(tl().domain(P),[u,i-s]),b.append("g").attr("fill-opacity",p).selectAll().data(P).enter().append("rect").attr("x",y).attr("y",a).attr("width",Math.max(0,y.bandwidth()-1)).attr("height",o-a-l).attr("fill",I),v=()=>{};return b.append("g").attr("transform",`translate(0,${o-l})`).call(Cw(y).ticks(Array.isArray(h)?null:h,typeof c=="string"?c:void 0).tickFormat(typeof c=="function"?c:void 0).tickSize(r).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ft(m,"normal")).call(v).call(O=>O.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",u).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const G2=Math.PI/180;function la(e,{marker:t,markerStart:n=t,markerMid:r=t,markerEnd:i=t}={}){e.markerStart=pu(n),e.markerMid=pu(r),e.markerEnd=pu(i)}function pu(e){if(e==null||e===!1)return null;if(e===!0)return jd;if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"none":return null;case"arrow":return Yd("auto");case"arrow-reverse":return Yd("auto-start-reverse");case"dot":return Cx;case"circle":case"circle-fill":return jd;case"circle-stroke":return Tx;case"tick":return bu("auto");case"tick-x":return bu(90);case"tick-y":return bu(0)}throw new Error(`invalid marker: ${e}`)}function Yd(e){return(t,n)=>Ze("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",e).attr("fill","none").attr("stroke",t).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(r=>r.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Cx(e,t){return Ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function jd(e,t){return Ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",e).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Tx(e,t){return Ze("svg:marker",t).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",e).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function bu(e){return(t,n)=>Ze("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",e).attr("stroke",t).call(r=>r.append("path").attr("d","M0,-3v6")).node()}let $x=0;function Pl(e,t,{stroke:n},r){return U2(e,t,n&&(i=>n[i]),r)}function Dx(e,t,{stroke:n},r){return U2(e,t,n&&(([i])=>n[i]),r)}function U2(e,{markerStart:t,markerMid:n,markerEnd:r,stroke:i},o=()=>i,a){const s=new Map;function l(u){return function(f){const h=o(f);let c=s.get(u);c||s.set(u,c=new Map);let m=c.get(h);if(!m){const d=this.parentNode.insertBefore(u(h,a),this),p=`plot-marker-${++$x}`;d.setAttribute("id",p),c.set(h,m=`url(#${p})`)}return m}}t&&e.attr("marker-start",l(t)),n&&e.attr("marker-mid",l(n)),r&&e.attr("marker-end",l(r))}function Oc({inset:e,insetLeft:t,insetRight:n,...r}={}){return[t,n]=H2(e,t,n),{inset:e,insetLeft:t,insetRight:n,...r}}function z2({inset:e,insetTop:t,insetBottom:n,...r}={}){return[t,n]=H2(e,t,n),{inset:e,insetTop:t,insetBottom:n,...r}}function H2(e,t,n){return e===void 0&&t===void 0&&n===void 0?Pt?[1,0]:[.5,.5]:[t,n]}function V2(e,{interval:t}){return e={...ta(e)},e.interval=xc(e.interval===void 0?t:e.interval),e}function W2(e,t,n,r){const{[e]:i,[`${e}1`]:o,[`${e}2`]:a}=n,{value:s,interval:l}=V2(i,n);if(s==null||l==null&&!r)return n;const u=Ur(i);if(l==null){let m;const d={transform:p=>m||(m=lt(p,s)),label:u};return{...n,[e]:void 0,[`${e}1`]:o===void 0?d:o,[`${e}2`]:a===void 0&&!(o===a&&r)?d:a}}let f,h;function c(m){return h!==void 0&&m===f?h:h=Ke(lt(f=m,s),d=>l.floor(d))}return t({...n,[e]:void 0,[`${e}1`]:o===void 0?{transform:c,label:u}:o,[`${e}2`]:a===void 0?{transform:m=>c(m).map(d=>l.offset(d)),label:u}:a})}function Y2(e,t,n){const{[e]:r}=n,{value:i,interval:o}=V2(r,n);return i==null||o==null?n:t({...n,[e]:{label:Ur(r),transform:a=>{const s=Ke(lt(a,i),u=>o.floor(u)),l=s.map(u=>o.offset(u));return s.map(Et(s)?(u,f)=>u==null||isNaN(u=+u)||(f=l[f],f==null)||isNaN(f=+f)?void 0:new Date((u+f)/2):(u,f)=>u==null||(f=l[f],f==null)?NaN:(+u+ +f)/2)}}})}function Nx(e={}){return W2("x",Oc,e)}function j2(e={}){return W2("y",z2,e)}function Ix(e={}){return Y2("x",Oc,e)}function Lx(e={}){return Y2("y",z2,e)}const X2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class Rx extends wt{constructor(t,n={}){const{x:r,y1:i,y2:o,inset:a=0,insetTop:s=a,insetBottom:l=a}=n;super(t,{x:{value:r,scale:"x",optional:!0},y1:{value:i,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},xl(n,"x"),X2),this.insetTop=qe(s),this.insetBottom=qe(l),la(this,n)}render(t,n,r,i,o){const{x:a,y:s}=n,{x:l,y1:u,y2:f}=r,{width:h,height:c,marginTop:m,marginRight:d,marginLeft:p,marginBottom:g}=i,{insetTop:_,insetBottom:b}=this;return Ze("svg:g",o).call(Yt,this,i,o).call(It,this,{x:l&&a},Pt,0).call(v=>v.selectAll().data(t).enter().append("line").call(jt,this).attr("x1",l?y=>l[y]:(p+h-d)/2).attr("x2",l?y=>l[y]:(p+h-d)/2).attr("y1",u&&!Pi(s)?y=>u[y]+_:m+_).attr("y2",f&&!Pi(s)?s.bandwidth?y=>f[y]+s.bandwidth()-b:y=>f[y]-b:c-g-b).call(Zn,this,r).call(Pl,this,r,o)).node()}}class Fx extends wt{constructor(t,n={}){const{x1:r,x2:i,y:o,inset:a=0,insetRight:s=a,insetLeft:l=a}=n;super(t,{y:{value:o,scale:"y",optional:!0},x1:{value:r,scale:"x",optional:!0},x2:{value:i,scale:"x",optional:!0}},xl(n,"y"),X2),this.insetRight=qe(s),this.insetLeft=qe(l),la(this,n)}render(t,n,r,i,o){const{x:a,y:s}=n,{y:l,x1:u,x2:f}=r,{width:h,height:c,marginTop:m,marginRight:d,marginLeft:p,marginBottom:g}=i,{insetLeft:_,insetRight:b}=this;return Ze("svg:g",o).call(Yt,this,i,o).call(It,this,{y:l&&s},0,Pt).call(v=>v.selectAll().data(t).enter().append("line").call(jt,this).attr("x1",u&&!Pi(a)?y=>u[y]+_:p+_).attr("x2",f&&!Pi(a)?a.bandwidth?y=>f[y]+a.bandwidth()-b:y=>f[y]-b:h-d-b).attr("y1",l?y=>l[y]:(m+c-g)/2).attr("y2",l?y=>l[y]:(m+c-g)/2).call(Zn,this,r).call(Pl,this,r,o)).node()}}function Z2(e,t){let{x:n=dt,y:r,y1:i,y2:o,...a}=j2(t);return[i,o]=K2(r,i,o),new Rx(e,{...a,x:n,y1:i,y2:o})}function Ts(e,t){let{y:n=dt,x:r,x1:i,x2:o,...a}=Nx(t);return[i,o]=K2(r,i,o),new Fx(e,{...a,y:n,x1:i,x2:o})}function K2(e,t,n){if(e==null){if(t===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,t]}else{if(t===void 0)return n===void 0?[0,e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}function qc(e,...t){let n=t.length;for(let r=0,i=!0;r<n;++r)typeof t[r]!="function"&&(i&&(e=e.slice(),i=!1),e.splice(r,2,e[r]+t[r]+e[r+1]),t.splice(r,1),--r,--n);return r=>{let i=e[0];for(let o=0;o<n;++o)i+=t[o](r)+e[o+1];return i}}const Bx={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},J2="";class Gc extends wt{constructor(t,n={}){const{x:r,y:i,text:o=mr(t)&&r2(t)?dt:ml,frameAnchor:a,textAnchor:s=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:l=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:u=1,lineWidth:f=1/0,textOverflow:h,monospace:c,fontFamily:m=c?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:g,fontWeight:_,rotate:b}=n,[v,y]=yt(b,0),[x,M]=Hx(d);if(super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:h9(v),optional:!0},text:{value:o,filter:mc,optional:!0}},n,Bx),this.rotate=y,this.textAnchor=ft(s,"middle"),this.lineAnchor=on(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+f,this.textOverflow=Q2(h),this.monospace=!!c,this.fontFamily=gt(m),this.fontSize=M,this.fontStyle=gt(p),this.fontVariant=gt(g),this.fontWeight=gt(_),this.frameAnchor=gl(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${f}`);this.splitLines=ty(this),this.clipLine=ny(this)}render(t,n,r,i,o){const{x:a,y:s}=n,{x:l,y:u,rotate:f,text:h,title:c,fontSize:m}=r,{rotate:d}=this,[p,g]=oa(this,i);return Ze("svg:g",o).call(Yt,this,i,o).call(ey,this,h,i).call(It,this,{x:l&&a,y:u&&s}).call(_=>_.selectAll().data(t).enter().append("text").call(jt,this).call(Ox,this,h,c).attr("transform",qc`translate(${l?b=>l[b]:p},${u?b=>u[b]:g})${f?b=>` rotate(${f[b]})`:d?` rotate(${d})`:""}`).call(_e,"font-size",m&&(b=>m[b])).call(Zn,this,r)).node()}}function Q2(e){return e==null?null:on(e,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function Ox(e,t,n,r){if(!n)return;const{lineAnchor:i,lineHeight:o,textOverflow:a,splitLines:s,clipLine:l}=t;e.each(function(u){const f=s(Rr(n[u])??"").map(l),h=f.length,c=i==="top"?.71:i==="bottom"?1-h:(164-h*100)/200;if(h>1){let m=0;for(let d=0;d<h;++d){if(++m,!f[d])continue;const p=this.ownerDocument.createElementNS(hi.svg,"tspan");p.setAttribute("x",0),d===m-1?p.setAttribute("y",`${(c+d)*o}em`):p.setAttribute("dy",`${m*o}em`),p.textContent=f[d],this.appendChild(p),m=0}}else c&&this.setAttribute("y",`${c*o}em`),this.textContent=f[0];if(a&&!r&&f[0]!==n[u]){const m=this.ownerDocument.createElementNS(hi.svg,"title");m.textContent=n[u],this.appendChild(m)}})}function Sl(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ea(t,n)),new Gc(e,{...r,x:t,y:n})}function qx(e,{x:t=dt,...n}={}){return new Gc(e,Lx({...n,x:t}))}function Gx(e,{y:t=dt,...n}={}){return new Gc(e,Ix({...n,y:t}))}function ey(e,t,n){_e(e,"text-anchor",t.textAnchor),_e(e,"font-family",t.fontFamily),_e(e,"font-size",t.fontSize),_e(e,"font-style",t.fontStyle),_e(e,"font-variant",t.fontVariant===void 0?Ux(n):t.fontVariant),_e(e,"font-weight",t.fontWeight)}function Ux(e){return e&&(p9(e)||Et(e))?"tabular-nums":void 0}const zx=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Hx(e){return e==null||typeof e=="number"?[void 0,e]:typeof e!="string"?[e,void 0]:(e=e.trim().toLowerCase(),zx.has(e)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(e)?[void 0,e]:[e,void 0])}function Vx(e,t,n){const r=[];let i,o=0;for(const[a,s,l]of Wx(e)){if(i===void 0&&(i=a),o>i&&n(e,i,s)>t&&(r.push(e.slice(i,o)+(e[o-1]===J2?"-":"")),i=a),l){r.push(e.slice(i,s)),i=void 0;continue}o=s}return r}function*Wx(e){let t=0,n=0;const r=e.length;for(;n<r;){let i=1;switch(e[n]){case J2:case"-":++n,yield[t,n,!1],t=n;break;case" ":for(yield[t,n,!1];e[++n]===" ";);t=n;break;case"\r":e[n+1]===`
`&&++i;case`
`:yield[t,n,!0],n+=i,t=n;break;default:++n;break}}yield[t,n,!0]}const Xd={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Uc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ni(e,i))r+=Xd[e[i]]??(iy(e,i)?120:Xd.e);return r}function zc(e,t=0,n=e.length){let r=0;for(let i=t;i<n;i=Ni(e,i))r+=iy(e,i)?126:63;return r}function ty({monospace:e,lineWidth:t,textOverflow:n}){if(n!=null||t==1/0)return o=>o.split(/\r\n?|\n/g);const r=e?zc:Uc,i=t*100;return o=>Vx(o,i,r)}function ny({monospace:e,lineWidth:t,textOverflow:n}){if(n==null||t==1/0)return o=>o;const r=e?zc:Uc,i=t*100;switch(n){case"clip-start":return o=>Kd(o,i,r,"");case"clip-end":return o=>Zd(o,i,r,"");case"ellipsis-start":return o=>Kd(o,i,r,li);case"ellipsis-middle":return o=>Yx(o,i,r,li);case"ellipsis-end":return o=>Zd(o,i,r,li)}}const li="";function Si(e,t,n,r){const i=[];let o=0;for(let a=0,s=0,l=e.length;a<l;a=s){s=Ni(e,a);const u=n(e,a,s);if(o+u>t){for(o+=r;o>t&&a>0;)s=a,a=i.pop(),o-=n(e,a,s);return[a,t-o]}o+=u,i.push(a)}return[-1,0]}function Zd(e,t,n,r){e=e.trim();const i=n(r),[o]=Si(e,t,n,i);return o<0?e:e.slice(0,o).trimEnd()+r}function Yx(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r)/2,[a,s]=Si(e,t/2,n,o),[l]=Si(e,i-t/2-s+o,n,-o);return l<0?r:e.slice(0,a).trimEnd()+r+e.slice(Ni(e,l)).trimStart()}function Kd(e,t,n,r){e=e.trim();const i=n(e);if(i<=t)return e;const o=n(r),[a]=Si(e,i-t+o,n,-o);return a<0?r:r+e.slice(Ni(e,a)).trimStart()}const vf=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Jd=new RegExp("\\p{Extended_Pictographic}","uy");function Ni(e,t){return t+=jx(e,t)?2:1,Zx(e,t)&&(t=vf.lastIndex),Xx(e,t)?Ni(e,t+1):t}function ry(e,t){return e.charCodeAt(t)<128}function jx(e,t){const n=e.charCodeAt(t);if(n>=55296&&n<56320){const r=e.charCodeAt(t+1);return r>=56320&&r<57344}return!1}function Xx(e,t){return e.charCodeAt(t)===8205}function Zx(e,t){return ry(e,t)?!1:(vf.lastIndex=t,vf.test(e))}function iy(e,t){return ry(e,t)?!1:(Jd.lastIndex=t,Jd.test(e))}const Kx={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},oy=3.5,Jx=oy*5,ay={draw(e,t,n){const r=t*n/Jx;e.moveTo(0,0),e.lineTo(0,-t),e.moveTo(-r,r-t),e.lineTo(0,-t),e.lineTo(r,r-t)}},Qx={draw(e,t,n){e.moveTo(-n,0),e.lineTo(0,-t),e.lineTo(n,0)}},eP=new Map([["arrow",ay],["spike",Qx]]);function tP(e){return e&&typeof e.draw=="function"}function nP(e){if(tP(e))return e;const t=eP.get(`${e}`.toLowerCase());if(t)return t;throw new Error(`invalid shape: ${e}`)}class sy extends wt{constructor(t,n={}){const{x:r,y:i,r:o=oy,length:a,rotate:s,shape:l=ay,anchor:u="middle",frameAnchor:f}=n,[h,c]=yt(a,12),[m,d]=yt(s,0);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:m,optional:!0}},n,Kx),this.r=+o,this.length=c,this.rotate=d,this.shape=nP(l),this.anchor=on(u,"anchor",["start","middle","end"]),this.frameAnchor=gl(f)}render(t,n,r,i,o){const{x:a,y:s}=n,{x:l,y:u,length:f,rotate:h}=r,{length:c,rotate:m,anchor:d,shape:p,r:g}=this,[_,b]=oa(this,i);return Ze("svg:g",o).call(Yt,this,i,o).call(It,this,{x:l&&a,y:u&&s}).call(v=>v.selectAll().data(t).enter().append("path").call(jt,this).attr("transform",qc`translate(${l?y=>l[y]:_},${u?y=>u[y]:b})${h?y=>` rotate(${h[y]})`:m?` rotate(${m})`:""}${d==="start"?"":d==="end"?f?y=>` translate(0,${f[y]})`:` translate(0,${c})`:f?y=>` translate(0,${f[y]/2})`:` translate(0,${c/2})`}`).attr("d",f?y=>{const x=tr();return p.draw(x,f[y],g),x}:(()=>{const y=tr();return p.draw(y,c,g),y})()).call(Zn,this,r)).node()}}function rP(e,t={}){const{x:n=dt,...r}=t;return new sy(e,{...r,x:n})}function iP(e,t={}){const{y:n=dt,...r}=t;return new sy(e,{...r,y:n})}function br(e,t){return arguments.length<2&&!mr(e)&&(t=e,e=null),t===void 0&&(t={}),[e,t]}function Al({anchor:e}={},t){return e===void 0?t[0]:on(e,"anchor",t)}function ly(e){return Al(e,["left","right"])}function uy(e){return Al(e,["right","left"])}function fy(e){return Al(e,["bottom","top"])}function cy(e){return Al(e,["top","bottom"])}function hy(){const[e,t]=br(...arguments);return my("y",ly(t),e,t)}function oP(){const[e,t]=br(...arguments);return my("fy",uy(t),e,t)}function dy(){const[e,t]=br(...arguments);return py("x",fy(t),e,t)}function aP(){const[e,t]=br(...arguments);return py("fx",cy(t),e,t)}function my(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:l=r,fillOpacity:u=i,textAnchor:f,textStroke:h,textStrokeOpacity:c,textStrokeWidth:m,tickSize:d=e==="y"?6:0,tickPadding:p,tickRotate:g,x:_,margin:b,marginTop:v=b===void 0?20:b,marginRight:y=b===void 0?t==="right"?40:0:b,marginBottom:x=b===void 0?20:b,marginLeft:M=b===void 0?t==="left"?40:0:b,label:P,labelAnchor:$,labelArrow:N,labelOffset:I,...E}){return d=qe(d),p=qe(p),g=qe(g),$!==void 0&&($=on($,"labelAnchor",["center","top","bottom"])),N=xy(N),R2(d&&!xt(o)?sP(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:d,tickPadding:p,tickRotate:g,x:_,...E}):null,xt(l)?null:uP(e,t,n,{fill:l,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:m,textAnchor:f,tickSize:d,tickPadding:p,tickRotate:g,x:_,marginTop:v,marginRight:y,marginBottom:x,marginLeft:M,...E}),!xt(l)&&P!==null?Sl([],_y({fill:l,fillOpacity:u,...E},function(O,H,D,T,z){const ae=T[e],{marginTop:ne,marginRight:se,marginBottom:Y,marginLeft:K}=e==="y"&&z.inset||z,Z=$??(ae.bandwidth?"center":"top"),Q=I??(t==="right"?se:K)-3;return Z==="center"?(this.textAnchor=void 0,this.lineAnchor=t==="right"?"bottom":"top",this.frameAnchor=t,this.rotate=-90):(this.textAnchor=t==="right"?"end":"start",this.lineAnchor=Z,this.frameAnchor=`${Z}-${t}`,this.rotate=0),this.dy=Z==="top"?3-ne:Z==="bottom"?Y-3:0,this.dx=t==="right"?Q:-Q,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[My(e,ae,{anchor:t,label:P,labelAnchor:Z,labelArrow:N})]}}}})):null)}function py(e,t,n,{color:r="currentColor",opacity:i=1,stroke:o=r,strokeOpacity:a=i,strokeWidth:s=1,fill:l=r,fillOpacity:u=i,textAnchor:f,textStroke:h,textStrokeOpacity:c,textStrokeWidth:m,tickSize:d=e==="x"?6:0,tickPadding:p,tickRotate:g,y:_,margin:b,marginTop:v=b===void 0?t==="top"?30:0:b,marginRight:y=b===void 0?20:b,marginBottom:x=b===void 0?t==="bottom"?30:0:b,marginLeft:M=b===void 0?20:b,label:P,labelAnchor:$,labelArrow:N,labelOffset:I,...E}){return d=qe(d),p=qe(p),g=qe(g),$!==void 0&&($=on($,"labelAnchor",["center","left","right"])),N=xy(N),R2(d&&!xt(o)?lP(e,t,n,{stroke:o,strokeOpacity:a,strokeWidth:s,tickSize:d,tickPadding:p,tickRotate:g,y:_,...E}):null,xt(l)?null:fP(e,t,n,{fill:l,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:m,textAnchor:f,tickSize:d,tickPadding:p,tickRotate:g,y:_,marginTop:v,marginRight:y,marginBottom:x,marginLeft:M,...E}),!xt(l)&&P!==null?Sl([],_y({fill:l,fillOpacity:u,...E},function(O,H,D,T,z){const ae=T[e],{marginTop:ne,marginRight:se,marginBottom:Y,marginLeft:K}=e==="x"&&z.inset||z,Z=$??(ae.bandwidth?"center":"right"),Q=I??(t==="top"?ne:Y)-3;return Z==="center"?(this.frameAnchor=t,this.textAnchor=void 0):(this.frameAnchor=`${t}-${Z}`,this.textAnchor=Z==="right"?"end":"start"),this.lineAnchor=t,this.dy=t==="top"?-Q:Q,this.dx=Z==="right"?se-3:Z==="left"?3-K:0,this.ariaLabel=`${e}-axis label`,{facets:[[0]],channels:{text:{value:[My(e,ae,{anchor:t,label:P,labelAnchor:Z,labelArrow:N})]}}}})):null)}function sP(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="y"?"-empty":""),frameAnchor:s=t,tickSize:l,inset:u=0,insetLeft:f=u,insetRight:h=u,dx:c=0,y:m=e==="y"?void 0:null,...d}){return Ii(iP,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinecap:i,strokeLinejoin:o,facetAnchor:a,frameAnchor:s,y:m,...d,dx:t==="left"?+c-Pt+ +f:+c+Pt-h,anchor:"start",length:l,shape:t==="left"?yP:_P})}function lP(e,t,n,{strokeWidth:r=1,strokeLinecap:i=null,strokeLinejoin:o=null,facetAnchor:a=t+(e==="x"?"-empty":""),frameAnchor:s=t,tickSize:l,inset:u=0,insetTop:f=u,insetBottom:h=u,dy:c=0,x:m=e==="x"?void 0:null,...d}){return Ii(rP,e,t,`${e}-axis tick`,n,{strokeWidth:r,strokeLinejoin:o,strokeLinecap:i,facetAnchor:a,frameAnchor:s,x:m,...d,dy:t==="bottom"?+c-Pt-h:+c+Pt+ +f,anchor:"start",length:l,shape:t==="bottom"?bP:gP})}function uP(e,t,n,{facetAnchor:r=t+(e==="y"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*G2):0),text:l,textAnchor:u=Math.abs(a)>60?"middle":t==="left"?"end":"start",lineAnchor:f=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:c=0,insetLeft:m=c,insetRight:d=c,dx:p=0,y:g=e==="y"?void 0:null,..._}){return Ii(Gx,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l,textAnchor:u,lineAnchor:f,fontVariant:h,rotate:a,y:g,..._,dx:t==="left"?+p-o-s+ +m:+p+ +o+ +s-d},function(b,v,y,x,M){h===void 0&&(this.fontVariant=vy(b)),l===void 0&&(M.text=wy(b,v,y,x,t))})}function fP(e,t,n,{facetAnchor:r=t+(e==="x"?"-empty":""),frameAnchor:i=t,tickSize:o,tickRotate:a=0,tickPadding:s=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*G2):0),text:l,textAnchor:u=Math.abs(a)>=10?a<0^t==="bottom"?"start":"end":"middle",lineAnchor:f=Math.abs(a)>=10?"middle":t==="bottom"?"top":"bottom",fontVariant:h,inset:c=0,insetTop:m=c,insetBottom:d=c,dy:p=0,x:g=e==="x"?void 0:null,..._}){return Ii(qx,e,t,`${e}-axis tick label`,n,{facetAnchor:r,frameAnchor:i,text:l===void 0?null:l,textAnchor:u,lineAnchor:f,fontVariant:h,rotate:a,x:g,..._,dy:t==="bottom"?+p+ +o+ +s-d:+p-o-s+ +m},function(b,v,y,x,M){h===void 0&&(this.fontVariant=vy(b)),l===void 0&&(M.text=wy(b,v,y,x,t))})}function cP(){const[e,t]=br(...arguments);return by("y",ly(t),e,t)}function hP(){const[e,t]=br(...arguments);return by("fy",uy(t),e,t)}function dP(){const[e,t]=br(...arguments);return gy("x",fy(t),e,t)}function mP(){const[e,t]=br(...arguments);return gy("fx",cy(t),e,t)}function by(e,t,n,{y:r=e==="y"?void 0:null,x:i=null,x1:o=t==="left"?i:null,x2:a=t==="right"?i:null,...s}){return Ii(Ts,e,t,`${e}-grid`,n,{y:r,x1:o,x2:a,...yy(s)})}function gy(e,t,n,{x:r=e==="x"?void 0:null,y:i=null,y1:o=t==="top"?i:null,y2:a=t==="bottom"?i:null,...s}){return Ii(Z2,e,t,`${e}-grid`,n,{x:r,y1:o,y2:a,...yy(s)})}function yy({color:e="currentColor",opacity:t=.1,stroke:n=e,strokeOpacity:r=t,strokeWidth:i=1,...o}){return{stroke:n,strokeOpacity:r,strokeWidth:i,...o}}function _y({fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:s,pointerEvents:l,shapeRendering:u,clip:f=!1},h){return[,e]=Vn(e),[,t]=yt(t),{facet:"super",x:null,y:null,fill:e,fillOpacity:t,fontFamily:n,fontSize:r,fontStyle:i,fontVariant:o,fontWeight:a,monospace:s,pointerEvents:l,shapeRendering:u,clip:f,initializer:h}}function Ii(e,t,n,r,i,o,a){let s;function l(h,c,m,d,p,g){const _=h==null&&(t==="fx"||t==="fy"),{[t]:b}=d;if(!b)throw new Error(`missing scale: ${t}`);const v=b.domain();let{interval:y,ticks:x,tickFormat:M,tickSpacing:P=t==="x"?80:35}=o;if(typeof x=="string"&&Py(b)&&(y=x,x=void 0),x===void 0&&(x=Di(y,b.type)??pP(b,P)),h==null){if(mr(x))h=Dt(x);else if(ri(x))h=gu(x,...Bt(v));else if(b.interval){let N=b.interval;if(b.ticks){const[I,E]=Bt(v),O=(E-I)/N[Jo];N=wd(N,O/x)??N,h=gu(N,I,E)}else{h=v;const I=h.length;N=wd(N,I/x)??N,N!==b.interval&&(h=gu(N,...Bt(h)))}if(N===b.interval){const I=Math.round(h.length/x);I>1&&(h=h.filter((E,O)=>O%I===0))}}else b.ticks?h=b.ticks(x):h=v;if(!b.ticks&&h.length&&h!==v){const N=new Gs(v);h=h.filter(I=>N.has(I)),h.length||ir(`Warning: the ${t}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}t==="y"||t==="x"?c=[jn(h)]:s[t]={scale:t,value:dt}}a==null||a.call(this,b,h,x,M,s);const $=Object.fromEntries(Object.entries(s).map(([N,I])=>[N,{...I,value:lt(h,I.value)}]));return _&&(c=g.filterFacets(h,$)),{data:h,facets:c,channels:$}}const u=xi(o).initializer,f=e(i,xi({...o,initializer:l},u));return i==null?(s=f.channels,f.channels={}):s={},f.ariaLabel=r,f.clip===void 0&&(f.clip=!1),f}function pP(e,t){const[n,r]=Bt(e.range());return(r-n)/t}function wy(e,t,n,r,i){return{value:Hc(e,t,n,r,i)}}function Hc(e,t,n,r,i){return typeof r=="function"?r:r===void 0&&t&&Et(t)?K8(e.type,t,i)??Rr:e.tickFormat?e.tickFormat(typeof n=="number"?n:null,r):r===void 0?Rr:typeof r=="string"?(Et(e.domain())?Zo:Ti)(r):Qo(r)}function gu(e,t,n){return e.range(t,e.offset(e.floor(n)))}const bP={draw(e,t){e.moveTo(0,0),e.lineTo(0,t)}},gP={draw(e,t){e.moveTo(0,0),e.lineTo(0,-t)}},yP={draw(e,t){e.moveTo(0,0),e.lineTo(-t,0)}},_P={draw(e,t){e.moveTo(0,0),e.lineTo(t,0)}};function vy(e){return e.bandwidth&&!e.interval?void 0:"tabular-nums"}function My(e,t,{anchor:n,label:r=t.label,labelAnchor:i,labelArrow:o}={}){if(!(r==null||r.inferred&&Py(t)&&/^(date|time|year)$/i.test(r))){if(r=String(r),o==="auto"&&(o=(!t.bandwidth||t.interval)&&!/[]/.test(r)),!o)return r;if(o===!0){const a=nx(t);a&&(o=/x$/.test(e)||i==="center"?/x$/.test(e)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${r}`;case"right":return`${r} `;case"up":return n==="right"?`${r} `:` ${r}`;case"down":return n==="right"?`${r} `:` ${r}`}return r}}function xy(e="auto"){return xt(e)?!1:typeof e=="boolean"?e:on(e,"labelArrow",["auto","up","right","down","left"])}function Py(e){return Et(e.domain())}function Qd(e,t){if(t==null)return t;const n=e(t);if(!n)throw new Error(`scale not found: ${t}`);return n}function wP(e,{opacity:t,...n}={}){if(!zr(e)&&!L2(e))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${e.type})`);return Sy(e,n,(r,i,o,a)=>r.append("svg").attr("width",o).attr("height",a).attr("fill",i.scale).attr("fill-opacity",yt(t)[1]).append("rect").attr("width","100%").attr("height","100%"))}function vP(e,{fill:t=(u=>(u=e.hint)==null?void 0:u.fill)()!==void 0?e.hint.fill:"none",fillOpacity:n=1,stroke:r=(f=>(f=e.hint)==null?void 0:f.stroke)()!==void 0?e.hint.stroke:xt(t)?"currentColor":"none",strokeOpacity:i=1,strokeWidth:o=1.5,r:a=4.5,...s}={},l){const[h,c]=Vn(t),[m,d]=Vn(r),p=Qd(l,h),g=Qd(l,m),_=a*a*Math.PI;return n=yt(n)[1],i=yt(i)[1],o=yt(o)[1],Sy(e,s,(b,v,y,x)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",y).attr("height",x).attr("fill",h==="color"?M=>p.scale(M):c).attr("fill-opacity",n).attr("stroke",m==="color"?M=>g.scale(M):d).attr("stroke-opacity",i).attr("stroke-width",o).append("path").attr("d",M=>{const P=tr();return e.scale(M).draw(P,_),P}))}function Sy(e,t={},n){let{columns:r,tickFormat:i,fontVariant:o=q2(e),swatchSize:a=15,swatchWidth:s=a,swatchHeight:l=a,marginLeft:u=0,className:f,style:h,width:c}=t;const m=Dc(t);f=Tc(f),i=Hc(e.scale,e.domain,void 0,i);const d=Ze("div",m).attr("class",`${f}-swatches ${f}-swatches-${r!=null?"columns":"wrap"}`);let p;return r!=null?(p=`:where(.${f}-swatches-columns .${f}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${f}-swatches-columns .${f}-swatch::before) {
  flex-shrink: 0;
}
:where(.${f}-swatches-columns .${f}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",r).selectAll().data(e.domain).enter().append("div").attr("class",`${f}-swatch`).call(n,e,s,l).call(g=>g.append("div").attr("class",`${f}-swatch-label`).attr("title",i).text(i))):(p=`:where(.${f}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${f}-swatches-wrap .${f}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(e.domain).enter().append("span").attr("class",`${f}-swatch`).call(n,e,s,l).append(function(){return this.ownerDocument.createTextNode(i.apply(this,arguments))})),d.call(g=>g.insert("style","*").text(`:where(.${f}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${f}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${p}`)).style("margin-left",u?`${+u}px`:null).style("width",c===void 0?null:`${+c}px`).style("font-variant",ft(o,"normal")).call($c,h).node()}const Mf=new Map([["symbol",vP],["color",ky],["opacity",xP]]);function MP(e,t,n={}){return(r,i)=>{if(!Mf.has(r))throw new Error(`unknown legend type: ${r}`);if(r in e)return Mf.get(r)(e[r],Ay(t,n[r],i),o=>e[o])}}function Ay({className:e,...t},{label:n,ticks:r,tickFormat:i}={},o){return _9(o,{className:e,...t},{label:n,ticks:r,tickFormat:i})}function ky(e,{legend:t=!0,...n}){if(t===!0&&(t=e.type==="ordinal"?"swatches":"ramp"),e.domain!==void 0)switch(`${t}`.toLowerCase()){case"swatches":return wP(e,n);case"ramp":return Ex(e,n);default:throw new Error(`unknown legend type: ${t}`)}}function xP({type:e,interpolate:t,...n},{legend:r=!0,color:i=sr(0,0,0),...o}){if(!t)throw new Error(`${e} opacity scales are not supported`);if(r===!0&&(r="ramp"),`${r}`.toLowerCase()!=="ramp")throw new Error(`${r} opacity legends are not supported`);return ky({type:e,...n,interpolate:PP(i)},{legend:r,...o})}function PP(e){const{r:t,g:n,b:r}=sr(e)||sr(0,0,0);return i=>`rgba(${t},${n},${r},${i})`}function SP(e,t,n){const r=[];for(const[i,o]of Mf){const a=n[i];if(a!=null&&a.legend&&i in e){const s=o(e[i],Ay(t,e[i],a),l=>e[l]);s!=null&&r.push(s)}}return r}const AP={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},kP={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class EP extends wt{constructor(t={}){const{anchor:n=null,inset:r=0,insetTop:i=r,insetRight:o=r,insetBottom:a=r,insetLeft:s=r,rx:l,ry:u}=t;super(za,void 0,t,n==null?AP:kP),this.anchor=Qg(n,"anchor",["top","right","bottom","left"]),this.insetTop=qe(i),this.insetRight=qe(o),this.insetBottom=qe(a),this.insetLeft=qe(s),this.rx=qe(l),this.ry=qe(u)}render(t,n,r,i,o){const{marginTop:a,marginRight:s,marginBottom:l,marginLeft:u,width:f,height:h}=i,{anchor:c,insetTop:m,insetRight:d,insetBottom:p,insetLeft:g,rx:_,ry:b}=this,v=u+g,y=f-s-d,x=a+m,M=h-l-p;return Ze(c?"svg:line":"svg:rect",o).datum(0).call(Yt,this,i,o).call(jt,this).call(Zn,this,r).call(It,this,{}).call(c==="left"?P=>P.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",M):c==="right"?P=>P.attr("x1",y).attr("x2",y).attr("y1",x).attr("y2",M):c==="top"?P=>P.attr("x1",v).attr("x2",y).attr("y1",x).attr("y2",x):c==="bottom"?P=>P.attr("x1",v).attr("x2",y).attr("y1",M).attr("y2",M):P=>P.attr("x",v).attr("y",x).attr("width",y-v).attr("height",M-x).attr("rx",_).attr("ry",b)).node()}}function CP(e){return new EP(e)}const yu={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},TP=new Set(["geometry","href","src","ariaLabel","scales"]);class $P extends wt{constructor(t,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&mr(t)&&r2(t)&&(n={...n,title:dt});const{x:r,y:i,x1:o,x2:a,y1:s,y2:l,anchor:u,preferredAnchor:f="bottom",monospace:h,fontFamily:c=h?"ui-monospace, monospace":void 0,fontSize:m,fontStyle:d,fontVariant:p,fontWeight:g,lineHeight:_=1,lineWidth:b=20,frameAnchor:v,format:y,textAnchor:x="start",textOverflow:M,textPadding:P=8,title:$,pointerSize:N=12,pathFilter:I="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(t,{x:{value:o!=null&&a!=null?null:r,scale:"x",optional:!0},y:{value:s!=null&&l!=null?null:i,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:s,scale:"y",optional:l==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:l,scale:"y",optional:s==null},title:{value:$,optional:!0}},n,yu),this.anchor=pf(u,"anchor"),this.preferredAnchor=pf(f,"preferredAnchor"),this.frameAnchor=gl(v),this.textAnchor=ft(x,"middle"),this.textPadding=+P,this.pointerSize=+N,this.pathFilter=gt(I),this.lineHeight=+_,this.lineWidth=+b,this.textOverflow=Q2(M),this.monospace=!!h,this.fontFamily=gt(c),this.fontSize=qe(m),this.fontStyle=gt(d),this.fontVariant=gt(p),this.fontWeight=gt(g);for(const E in yu)E in this.channels&&(this[E]=yu[E]);this.splitLines=ty(this),this.clipLine=ny(this),this.format={...y}}render(t,n,r,i,o){const a=this,{x:s,y:l,fx:u,fy:f}=n,{ownerSVGElement:h,document:c}=o,{anchor:m,monospace:d,lineHeight:p,lineWidth:g}=this,{textPadding:_,pointerSize:b,pathFilter:v}=this,{marginTop:y,marginLeft:x}=i,{x1:M,y1:P,x2:$,y2:N,x:I=M??$,y:E=P??N}=r,O=u?u(t.fx)-x:0,H=f?f(t.fy)-y:0,[D,T]=oa(this,i),z=B2(r,D),ae=O2(r,T),ne=d?zc:Uc,se=ne(li);let Y,K;"title"in r?(Y=r.channels,K=FP):(Y=RP.call(this,r,n),K=BP);const Z=Ze("svg:g",o).call(Yt,this,i,o).call(ey,this).call(It,this,{x:I&&s,y:E&&l}).call(de=>de.selectAll().data(t).enter().append("g").attr("transform",ce=>`translate(${Math.round(z(ce))},${Math.round(ae(ce))})`).call(jt,this).call(ce=>ce.append("path").attr("filter",v)).call(ce=>ce.append("text").each(function(ee){const re=ao(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const G=K.call(a,ee,t,Y,n,r);if(typeof G=="string")for(const J of a.splitLines(G))Q(re,{value:a.clipLine(J)});else{const J=new Set;for(const te of G){const{label:L=""}=te;L&&J.has(L)||(J.add(L),Q(re,te))}}})));function Q(de,{label:ce,value:ee,color:re,opacity:G}){ce??(ce=""),ee??(ee="");const J=re!=null||G!=null;let te,L=g*100;const[pe]=Si(ce,L,ne,se);if(pe>=0)ce=ce.slice(0,pe).trimEnd()+li,te=ee.trim(),ee="";else{(ce||!ee&&!J)&&(ee=" "+ee);const[be]=Si(ee,L-ne(ce),ne,se);be>=0&&(te=ee.trim(),ee=ee.slice(0,be).trimEnd()+li)}const ie=de.append("tspan").attr("x",0).attr("dy",`${p}em`).text("");ce&&ie.append("tspan").attr("font-weight","bold").text(ce),ee&&ie.append(()=>c.createTextNode(ee)),J&&ie.append("tspan").text(" ").attr("fill",re).attr("fill-opacity",G).style("user-select","none"),te&&ie.append("title").text(te)}function me(){const{width:de,height:ce}=i.facet??i;Z.selectChildren().each(function(ee){let{x:re,width:G,height:J}=this.getBBox();G=Math.round(G),J=Math.round(J);let te=m;if(te===void 0){const ie=z(ee)+O,be=ae(ee)+H,Ee=ie+G+b+_*2<de,$e=ie-G-b-_*2>0,De=be+J+b+_*2<ce,Oe=be-J-b-_*2>0;te=Ee&&$e?De&&Oe?a.preferredAnchor:Oe?"bottom":"top":De&&Oe?Ee?"left":"right":(Ee||$e)&&(De||Oe)?`${Oe?"bottom":"top"}-${Ee?"left":"right"}`:a.preferredAnchor}const L=this.firstChild,pe=this.lastChild;if(L.setAttribute("d",LP(te,b,_,G,J)),re)for(const ie of pe.childNodes)ie.setAttribute("x",-re);pe.setAttribute("y",`${+NP(te,pe.childNodes.length,p).toFixed(6)}em`),pe.setAttribute("transform",`translate(${IP(te,b,_,G,J)})`)}),Z.attr("visibility",null)}return t.length&&(Z.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(me):typeof requestAnimationFrame<"u"&&requestAnimationFrame(me)),Z.node()}}function DP(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ea(t,n)),new $P(e,{...r,x:t,y:n})}function NP(e,t,n){return/^top(?:-|$)/.test(e)?.94-n:-.29-t*n}function IP(e,t,n,r,i){switch(e){case"middle":return[-r/2,i/2];case"top-left":return[n,t+n];case"top":return[-r/2,t/2+n];case"top-right":return[-r-n,t+n];case"right":return[-t/2-r-n,i/2];case"bottom-left":return[n,-t-n];case"bottom":return[-r/2,-t/2-n];case"bottom-right":return[-r-n,-t-n];case"left":return[n+t/2,i/2]}}function LP(e,t,n,r,i){const o=r+n*2,a=i+n*2;switch(e){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${t},${t}h${o-t}v${a}h${-o}z`;case"top":return`M0,0l${t/2},${t/2}h${(o-t)/2}v${a}h${-o}v${-a}h${(o-t)/2}z`;case"top-right":return`M0,0l${-t},${t}h${t-o}v${a}h${o}z`;case"right":return`M0,0l${-t/2},${-t/2}v${t/2-a/2}h${-o}v${a}h${o}v${t/2-a/2}z`;case"bottom-left":return`M0,0l${t},${-t}h${o-t}v${-a}h${-o}z`;case"bottom":return`M0,0l${t/2},${-t/2}h${(o-t)/2}v${-a}h${-o}v${a}h${(o-t)/2}z`;case"bottom-right":return`M0,0l${-t},${-t}h${t-o}v${-a}h${o}z`;case"left":return`M0,0l${t/2},${-t/2}v${t/2-a/2}h${o}v${a}h${-o}v${t/2-a/2}z`}}function RP({channels:e},t){var i,o;const n={};let r=this.format;r=e0(r,e,"x"),r=e0(r,e,"y"),this.format=r;for(const a in r){const s=r[a];if(!(s===null||s===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const l=Cd(e,a);l&&(n[a]=l)}}for(const a in e){if(a in n||a in r||TP.has(a))continue;const s=Cd(e,a);s&&(n[a]=s)}this.facet&&(t.fx&&!("fx"in r)&&(n.fx=!0),t.fy&&!("fy"in r)&&(n.fy=!0));for(const a in n){const s=this.format[a];if(typeof s=="string"){const l=((i=n[a])==null?void 0:i.value)??((o=t[a])==null?void 0:o.domain())??[];this.format[a]=(Et(l)?Zo:Ti)(s)}else if(s===void 0||s===!0){const l=t[a];this.format[a]=l!=null&&l.bandwidth?Hc(l,l.domain()):Rr}}return n}function e0(e,t,n){if(!(n in e))return e;const r=`${n}1`,i=`${n}2`;if((r in e||!(r in t))&&(i in e||!(i in t)))return e;const o=Object.entries(e),a=e[n];return o.splice(o.findIndex(([s])=>s===n)+1,0,[r,a],[i,a]),Object.fromEntries(o)}function FP(e,t,{title:n}){return Rr(n.value[e],e)}function*BP(e,t,n,r,i){for(const o in n){if(o==="fx"||o==="fy"){yield{label:$s(r,n,o),value:this.format[o](t[o],e)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:n0(r,n,"x"),value:t0(this.format.x2,n.x1,a,e)};else if(o==="y2"&&"y1"in n)yield{label:n0(r,n,"y"),value:t0(this.format.y2,n.y1,a,e)};else{const s=a.value[e],l=a.scale;if(!ur(s)&&l==null)continue;yield{label:$s(r,n,o),value:this.format[o](s,e),color:l==="color"?i[o][e]:null,opacity:l==="opacity"?i[o][e]:null}}}}function t0(e,t,n,r){var i;return(i=n.hint)!=null&&i.length?`${e(n.value[r]-t.value[r],r)}`:`${e(t.value[r],r)}${e(n.value[r],r)}`}function n0(e,t,n){const r=$s(e,t,`${n}1`,n),i=$s(e,t,`${n}2`,n);return r===i?r:`${r}${i}`}function $s(e,t,n,r=n){const i=t[n],o=e[(i==null?void 0:i.scale)??n];return String((o==null?void 0:o.label)??(i==null?void 0:i.label)??r)}function an(e={}){var se;const{facet:t,style:n,title:r,subtitle:i,caption:o,ariaLabel:a,ariaDescription:s}=e,l=Tc(e.className),u=e.marks===void 0?[]:i0(e.marks);u.push(...WP(u));const f=HP(t,e),h=new Map;for(const Y of u){const K=o0(Y,f,e);K&&h.set(Y,K)}const c=new Map;f&&zi(c,[f],e),zi(c,h,e);const m=i0(YP(u,c,e));for(const Y of m){const K=o0(Y,f,e);K&&h.set(Y,K)}u.unshift(...m);let d=hx(c,e);if(d!==void 0){const Y=f?mu(d,f):void 0;for(const Z of u){if(Z.facet===null||Z.facet==="super")continue;const Q=h.get(Z);Q!==void 0&&(Q.facetsIndex=Z.fx!=null||Z.fy!=null?mu(d,Q):Y)}const K=new Set;for(const{facetsIndex:Z}of h.values())Z==null||Z.forEach((Q,me)=>{(Q==null?void 0:Q.length)>0&&K.add(me)});d.forEach(0<K.size&&K.size<d.length?(Z,Q)=>Z.empty=!K.has(Q):Z=>Z.empty=!1);for(const Z of u)if(Z.facet==="exclude"){const Q=h.get(Z);Q!==void 0&&(Q.facetsIndex=px(Q.facetsIndex))}}for(const Y of Ye.keys())df(e[Y])&&Y!=="fx"&&Y!=="fy"&&c.set(Y,[]);const p=new Map;for(const Y of u){if(p.has(Y))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:K,channels:Z}=h.get(Y)??{},{data:Q,facets:me,channels:de}=Y.initialize(K,Z,e);Vc(de,e),p.set(Y,{data:Q,facets:me,channels:de})}const g=_f(zi(c,p,e),e),_=fx(g,u,e);ex(g,_);const b=Bd(g),{fx:v,fy:y}=b,x=v||y?D2(g,_):_,M=v||y?eS(b,_):_,P=Dc(e),$=P.document,N=Vs("svg").call($.documentElement);let I=N;P.ownerSVGElement=N,P.className=l,P.projection=hM(e,x),P.filterFacets=(Y,K)=>mu(d,{channels:K,groups:Fc(Y,K)}),P.getMarkState=Y=>{const K=p.get(Y),Z=h.get(Y);return{...K,channels:{...K.channels,...Z==null?void 0:Z.channels}}},P.dispatchValue=Y=>{I.value!==Y&&(I.value=Y,I.dispatchEvent(new Event("input",{bubbles:!0})))};const E=new Set;for(const[Y,K]of p)if(Y.initializer!=null){const Z=Y.facet==="super"?M:x,Q=Y.initializer(K.data,K.facets,K.channels,b,Z,P);if(Q.data!==void 0&&(K.data=Q.data),Q.facets!==void 0&&(K.facets=Q.facets),Q.channels!==void 0){const{fx:me,fy:de,...ce}=Q.channels;zP(ce),Object.assign(K.channels,ce);for(const ee of Object.values(ce)){const{scale:re}=ee;re!=null&&!v9(Ye.get(re))&&(Ey(ee,e),E.add(re))}(me!=null||de!=null)&&h.set(Y,!0)}}if(E.size){const Y=new Map;zi(Y,p,e,me=>E.has(me)),zi(c,p,e,me=>E.has(me));const K=QP(_f(Y,e),g),{scales:Z,...Q}=Bd(K);Object.assign(g,K),Object.assign(b,Q),Object.assign(b.scales,Z)}let O,H;d!==void 0&&(O={x:v==null?void 0:v.domain(),y:y==null?void 0:y.domain()},d=dx(d,O),H=mx(v,y,_));for(const[Y,K]of p)K.values=Y.scale(K.channels,b,P);const{width:D,height:T}=_;ao(N).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",D).attr("height",T).attr("viewBox",`0 0 ${D} ${T}`).attr("aria-label",a).attr("aria-description",s).call(Y=>Y.append("style").text(`:where(.${l}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${l} text),
:where(.${l} tspan) {
  white-space: pre;
}`)).call($c,n);for(const Y of u){const{channels:K,values:Z,facets:Q}=p.get(Y);if(d===void 0||Y.facet==="super"){let me=null;if(Q&&(me=Q[0],me=Y.filter(me,K,Z),me.length===0))continue;const de=Y.render(me,b,Z,M,P);if(de==null)continue;N.appendChild(de)}else{let me;for(const de of d){if(!(((se=Y.facetAnchor)==null?void 0:se.call(Y,d,O,de))??!de.empty))continue;let ce=null;if(Q){const re=h.has(Y);if(ce=Q[re?de.i:0],ce=Y.filter(ce,K,Z),ce.length===0)continue;!re&&ce===Q[0]&&(ce=l9(ce)),ce.fx=de.x,ce.fy=de.y,ce.fi=de.i}const ee=Y.render(ce,b,Z,x,P);if(ee!=null){(me??(me=ao(N).append("g"))).append(()=>ee).datum(de);for(const re of["aria-label","aria-description","aria-hidden","transform"])ee.hasAttribute(re)&&(me.attr(re,ee.getAttribute(re)),ee.removeAttribute(re))}}me==null||me.selectChildren().attr("transform",H)}}const z=SP(g,P,e),{figure:ae=r!=null||i!=null||o!=null||z.length>0}=e;ae&&(I=$.createElement("figure"),I.className=`${l}-figure`,I.style.maxWidth="initial",r!=null&&I.append(r0($,r,"h2")),i!=null&&I.append(r0($,i,"h3")),I.append(...z,N),o!=null&&I.append(OP($,o))),I.scale=lx(b.scales),I.legend=MP(g,P,e);const ne=eM();return ne>0&&ao(N).append("text").attr("x",D).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${ne.toLocaleString("en-US")} warning${ne===1?"":"s"}. Please check the console.`),I}function r0(e,t,n){if(t.ownerDocument)return t;const r=e.createElement(n);return r.append(t),r}function OP(e,t){const n=e.createElement("figcaption");return n.append(t),n}function qP({marks:e=[],...t}={}){return an({...t,marks:[...e,this]})}wt.prototype.plot=qP;function i0(e){return e.flat(1/0).filter(t=>t!=null).map(GP)}function GP(e){return typeof e.render=="function"?e:new UP(e)}class UP extends wt{constructor(t){if(typeof t!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=t}render(){}}function Vc(e,t){for(const n in e)Ey(e[n],t);return e}function Ey(e,t){const{scale:n,transform:r=!0}=e;if(n==null||!r)return;const{type:i,percent:o,interval:a,transform:s=o?l=>l*100:n2(a,i)}=t[n]??{};s!=null&&(e.value=Ke(e.value,s),e.transform=!1)}function zP(e){for(const t in e)c2(t,e[t])}function zi(e,t,n,r=n9){var i,o;for(const{channels:a}of t.values())for(const s in a){const l=a[s],{scale:u}=l;if(u!=null&&r(u))if(u==="projection"){if(!bM(n)){const f=((i=n.x)==null?void 0:i.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(f||h){const[c,m]=yM(l);f&&_u(e,"x",c),h&&_u(e,"y",m)}}}else _u(e,u,l)}return e}function _u(e,t,n){const r=e.get(t);r!==void 0?r.push(n):e.set(t,[n])}function HP(e,t){if(e==null)return;const{x:n,y:r}=e;if(n==null&&r==null)return;const i=Dt(e.data);if(i==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Co(i,{value:n,scale:"fx"})),r!=null&&(o.fy=Co(i,{value:r,scale:"fy"})),Vc(o,t);const a=Fc(i,o);return{channels:o,groups:a,data:e.data}}function o0(e,t,n){var l;if(e.facet===null||e.facet==="super")return;const{fx:r,fy:i}=e;if(r!=null||i!=null){const u=Dt(e.data??r??i);if(u===void 0)throw new Error(`missing facet data in ${e.ariaLabel}`);if(u===null)return;const f={};return r!=null&&(f.fx=Co(u,{value:r,scale:"fx"})),i!=null&&(f.fy=Co(u,{value:i,scale:"fy"})),Vc(f,n),{channels:f,groups:Fc(u,f)}}if(t===void 0)return;const{channels:o,groups:a,data:s}=t;if(e.facet!=="auto"||e.data===s)return{channels:o,groups:a};s.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((l=Dt(e.data))==null?void 0:l.length)===s.length&&ir(`Warning: the ${e.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function VP(e,t={}){return xi({...t,x:null,y:null},(n,r,i,o,a,s)=>s.getMarkState(e))}function WP(e){const t=[];for(const n of e){let r=n.tip;if(r){r===!0?r={}:typeof r=="string"&&(r={pointer:r});let{pointer:i,preferredAnchor:o}=r;i=/^x$/i.test(i)?kx:/^y$/i.test(i)?Wd:Ax,r=i(VP(n,r)),r.title=null,o===void 0&&(r.preferredAnchor=i===Wd?"left":"bottom");const a=DP(n.data,r);a.facet=n.facet,a.facetAnchor=n.facetAnchor,t.push(a)}}return t}function YP(e,t,n){let{projection:r,x:i={},y:o={},fx:a={},fy:s={},axis:l,grid:u,facet:f={},facet:{axis:h=l,grid:c}=f,x:{axis:m=l,grid:d=m===null?null:u}=i,y:{axis:p=l,grid:g=p===null?null:u}=o,fx:{axis:_=h,grid:b=_===null?null:c}=a,fy:{axis:v=h,grid:y=v===null?null:c}=s}=n;(r||!df(i)&&!a0("x",e))&&(m=d=null),(r||!df(o)&&!a0("y",e))&&(p=g=null),t.has("fx")||(_=b=null),t.has("fy")||(v=y=null),m===void 0&&(m=!$a(e,"x")),p===void 0&&(p=!$a(e,"y")),_===void 0&&(_=!$a(e,"fx")),v===void 0&&(v=!$a(e,"fy")),m===!0&&(m="bottom"),p===!0&&(p="left"),_===!0&&(_=m==="top"||m===null?"bottom":"top"),v===!0&&(v=p==="right"||p===null?"left":"right");const x=[];return Ta(x,y,hP,s),Ca(x,v,oP,"right","left",f,s),Ta(x,b,mP,a),Ca(x,_,aP,"top","bottom",f,a),Ta(x,g,cP,o),Ca(x,p,hy,"left","right",n,o),Ta(x,d,dP,i),Ca(x,m,dy,"bottom","top",n,i),x}function Ca(e,t,n,r,i,o,a){if(!t)return;const s=jP(t);a=XP(s?r:t,o,a);const{line:l}=a;(n===hy||n===dy)&&l&&!Eo(l)&&e.push(CP(ZP(a))),e.push(n(a)),s&&e.push(n({...a,anchor:i,label:null}))}function Ta(e,t,n,r){!t||Eo(t)||e.push(n(KP(t,r)))}function jP(e){return/^\s*both\s*$/i.test(e)}function XP(e,t,{line:n=t.line,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:l,fontVariant:u,ariaLabel:f,ariaDescription:h,label:c=t.label,labelAnchor:m,labelArrow:d=t.labelArrow,labelOffset:p}){return{anchor:e,line:n,ticks:r,tickSize:i,tickSpacing:o,tickPadding:a,tickFormat:s,tickRotate:l,fontVariant:u,ariaLabel:f,ariaDescription:h,label:c,labelAnchor:m,labelArrow:d,labelOffset:p}}function ZP(e){const{anchor:t,line:n}=e;return{anchor:t,facetAnchor:t+"-empty",stroke:n===!0?void 0:n}}function KP(e,{stroke:t=bl(e)?e:void 0,ticks:n=JP(e)?e:void 0,tickSpacing:r,ariaLabel:i,ariaDescription:o}){return{stroke:t,ticks:n,tickSpacing:r,ariaLabel:i,ariaDescription:o}}function JP(e){switch(typeof e){case"number":return!0;case"string":return!bl(e)}return mr(e)||typeof(e==null?void 0:e.range)=="function"}function $a(e,t){const n=`${t}-axis `;return e.some(r=>{var i;return(i=r.ariaLabel)==null?void 0:i.startsWith(n)})}function a0(e,t){for(const n of t)for(const r in n.channels){const{scale:i}=n.channels[r];if(i===e||i==="projection")return!0}return!1}function QP(e,t){for(const n in e){const r=e[n],i=t[n];r.label===void 0&&i&&(r.label=i.label)}return e}function eS({fx:e,fy:t},n){const{marginTop:r,marginRight:i,marginBottom:o,marginLeft:a,width:s,height:l}=Rc(n),u=e&&s0(e),f=t&&s0(t);return{marginTop:t?f[0]:r,marginRight:e?s-u[1]:i,marginBottom:t?l-f[1]:o,marginLeft:e?u[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:s,height:l}}function s0(e){const t=e.domain();let n=e(t[0]),r=e(t[t.length-1]);return r<n&&([n,r]=[r,n]),[n,r+e.bandwidth()]}const tS=new Map([["basis",s8],["basis-closed",l8],["basis-open",u8],["bundle",f8],["bump-x",Z4],["bump-y",K4],["cardinal",c8],["cardinal-closed",h8],["cardinal-open",d8],["catmull-rom",m8],["catmull-rom-closed",p8],["catmull-rom-open",b8],["linear",Ko],["linear-closed",g8],["monotone-x",y8],["monotone-y",_8],["natural",w8],["step",v8],["step-after",x8],["step-before",M8]]);function Cy(e=Ko,t){if(typeof e=="function")return e;const n=tS.get(`${e}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${e}`);if(t!==void 0){if("beta"in n)return n.beta(t);if("tension"in n)return n.tension(t);if("alpha"in n)return n.alpha(t)}return n}function Ty(e=Ai,t){return typeof e!="function"&&`${e}`.toLowerCase()==="auto"?Ai:Cy(e,t)}function Ai(e){return Ko(e)}function nS(e={y:"count"},t={}){[e,t]=oS(e,t);const{x:n,y:r}=t;return iS(aS(n,t,dt),null,null,r,e,Oc(t))}function rS(e,t,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:r=Cc}=n,i={filter:null};return n[t]!=null&&(i[t]=r),n[`${t}1`]!=null&&(i[`${t}1`]=r),n[`${t}2`]!=null&&(i[`${t}2`]=r),e(i,n)}function $y(e={}){return rS(nS,"y",xl(e,"x"))}function iS(e,t,n,r,{data:i=f2,filter:o=Cs,sort:a,reverse:s,...l}={},u={}){e=l0(e),t=l0(t),l=lS(l,u),i=Iy(i,dt),a=a==null?void 0:Dy("sort",a,u),o=o==null?void 0:Ny("filter",o,u),n!=null&&Sa(l,"x","x1","x2")&&(n=null),r!=null&&Sa(l,"y","y1","y2")&&(r=null);const[f,h]=Nn(e),[c,m]=Nn(e),[d,p]=Nn(t),[g,_]=Nn(t),[b,v]=n!=null?[n,"x"]:r!=null?[r,"y"]:[],[y,x]=Nn(b),{x:M,y:P,z:$,fill:N,stroke:I,x1:E,x2:O,y1:H,y2:D,domain:T,cumulative:z,thresholds:ae,interval:ne,...se}=u,[Y,K]=Nn($),[Z]=Vn(N),[Q]=Vn(I),[me,de]=Nn(Z),[ce,ee]=Nn(Q);return{..."z"in u&&{z:Y||$},..."fill"in u&&{fill:me||N},..."stroke"in u&&{stroke:ce||I},..._l(se,(re,G,J)=>{const te=t2(lt(re,b),J==null?void 0:J[v]),L=lt(re,$),pe=lt(re,Z),ie=lt(re,Q),be=L9(l,{z:L,fill:pe,stroke:ie}),Ee=[],$e=[],De=te&&x([]),Oe=L&&K([]),He=pe&&de([]),rt=ie&&ee([]),Se=e&&h([]),ln=e&&m([]),je=t&&p([]),Le=t&&_([]),kn=cS(e,t,re);let mt=0;for(const Te of l)Te.initialize(re);a&&a.initialize(re),o&&o.initialize(re);for(const Te of G){const un=[];for(const X of l)X.scope("facet",Te);a&&a.scope("facet",Te),o&&o.scope("facet",Te);for(const[X,j]of Sd(Te,be))for(const[k,q]of Sd(j,te))for(const[W,le]of kn(q))if(!(o&&!o.reduce(W,le))){un.push(mt++),$e.push(i.reduceIndex(W,re,le)),te&&De.push(k),L&&Oe.push(be===L?X:L[(W.length>0?W:q)[0]]),pe&&He.push(be===pe?X:pe[(W.length>0?W:q)[0]]),ie&&rt.push(be===ie?X:ie[(W.length>0?W:q)[0]]),Se&&(Se.push(le.x1),ln.push(le.x2)),je&&(je.push(le.y1),Le.push(le.y2));for(const Ce of l)Ce.reduce(W,le);a&&a.reduce(W)}Ee.push(un)}return R9(Ee,a,s),{data:$e,facets:Ee}}),...!Sa(l,"x")&&(f?{x1:f,x2:c,x:mf(f,c)}:{x:M,x1:E,x2:O}),...!Sa(l,"y")&&(d?{y1:d,y2:g,y:mf(d,g)}:{y:P,y1:H,y2:D}),...y&&{[v]:y},...Object.fromEntries(l.map(({name:re,output:G})=>[re,G]))}}function oS({cumulative:e,domain:t,thresholds:n,interval:r,...i},o){return[i,{cumulative:e,domain:t,thresholds:n,interval:r,...o}]}function aS(e,{cumulative:t,domain:n,thresholds:r,interval:i},o){return e={...ta(e)},e.domain===void 0&&(e.domain=n),e.cumulative===void 0&&(e.cumulative=t),e.thresholds===void 0&&(e.thresholds=r),e.interval===void 0&&(e.interval=i),e.value===void 0&&(e.value=o),e.thresholds=sS(e.thresholds,e.interval),e}function l0(e){if(e==null)return;const{value:t,cumulative:n,domain:r=Bt,thresholds:i}=e,o=a=>{let s=lt(a,t),l;if(Et(s)||fS(i)){s=Ke(s,Jg,Float64Array);let[f,h]=typeof r=="function"?r(s):r,c=typeof i=="function"&&!ri(i)?i(s,f,h):i;typeof c=="number"&&(c=Xp(f,h,c)),ri(c)&&(r===Bt&&(f=c.floor(f),h=c.offset(c.floor(h))),c=c.range(f,c.offset(h))),l=c}else{s=mn(s);let[f,h]=typeof r=="function"?r(s):r,c=typeof i=="function"&&!ri(i)?i(s,f,h):i;if(typeof c=="number")if(r===Bt){let m=Ja(f,h,c);if(isFinite(m))if(m>0){let d=Math.round(f/m),p=Math.round(h/m);d*m<=f||--d,p*m>h||++p;let g=p-d+1;c=new Float64Array(g);for(let _=0;_<g;++_)c[_]=(d+_)*m}else if(m<0){m=-m;let d=Math.round(f*m),p=Math.round(h*m);d/m<=f||--d,p/m>h||++p;let g=p-d+1;c=new Float64Array(g);for(let _=0;_<g;++_)c[_]=(d+_)/m}else c=[f];else c=[f]}else c=po(f,h,c);else ri(c)&&(r===Bt&&(f=c.floor(f),h=c.offset(c.floor(h))),c=c.range(f,c.offset(h)));l=c}const u=[];if(l.length===1)u.push([l[0],l[0]]);else for(let f=1;f<l.length;++f)u.push([l[f-1],l[f]]);return u.bin=(n<0?dS:n>0?hS:Wc)(u,l,s),u};return o.label=Ur(t),o}function sS(e,t,n=u0){if(e===void 0)return t===void 0?n:Di(t);if(typeof e=="string"){switch(e.toLowerCase()){case"freedman-diaconis":return gw;case"scott":return sm;case"sturges":return dw;case"auto":return u0}return yc(e)}return e}function lS(e,t){return D9(e,t,Dy)}function Dy(e,t,n){return l2(e,t,n,Ny)}function Ny(e,t,n){return u2(e,t,n,Iy)}function Iy(e,t){return Ec(e,t,uS)}function uS(e){switch(`${e}`.toLowerCase()){case"x":return mS;case"x1":return bS;case"x2":return gS;case"y":return pS;case"y1":return yS;case"y2":return _S}throw new Error(`invalid bin reduce: ${e}`)}function u0(e,t,n){return Math.min(200,sm(e,t,n))}function fS(e){return c9(e)||mr(e)&&Et(e)}function cS(e,t,n){const r=e==null?void 0:e(n),i=t==null?void 0:t(n);return r&&i?function*(o){const a=r.bin(o);for(const[s,[l,u]]of r.entries()){const f=i.bin(a[s]);for(const[h,[c,m]]of i.entries())yield[f[h],{data:n,x1:l,y1:c,x2:u,y2:m}]}}:r?function*(o){const a=r.bin(o);for(const[s,[l,u]]of r.entries())yield[a[s],{data:n,x1:l,x2:u}]}:function*(o){const a=i.bin(o);for(const[s,[l,u]]of i.entries())yield[a[s],{data:n,y1:l,y2:u}]}}function Wc(e,t,n){return t=mn(t),r=>{var o;const i=e.map(()=>[]);for(const a of r)(o=i[qs(t,n[a])-1])==null||o.push(a);return i}}function hS(e,t,n){const r=Wc(e,t,n);return i=>{const o=r(i);for(let a=1,s=o.length;a<s;++a){const l=o[a-1],u=o[a];for(const f of l)u.push(f)}return o}}function dS(e,t,n){const r=Wc(e,t,n);return i=>{const o=r(i);for(let a=o.length-2;a>=0;--a){const s=o[a+1],l=o[a];for(const u of s)l.push(u)}return o}}function Ly(e,t){const n=(+e+ +t)/2;return e instanceof Date?new Date(n):n}const mS={reduceIndex(e,t,{x1:n,x2:r}){return Ly(n,r)}},pS={reduceIndex(e,t,{y1:n,y2:r}){return Ly(n,r)}},bS={reduceIndex(e,t,{x1:n}){return n}},gS={reduceIndex(e,t,{x2:n}){return n}},yS={reduceIndex(e,t,{y1:n}){return n}},_S={reduceIndex(e,t,{y2:n}){return n}};function Ry(e={}){return e2(e)?e:{...e,y:dt}}function wS(e,t){if(t.length===1)return{data:e,facets:t};const n=e.length,r=new Uint8Array(n);let i=0;for(const s of t)for(const l of s)r[l]&&++i,r[l]=1;if(i===0)return{data:e,facets:t};e=ko(e);const o=e[Zg]=new Uint32Array(n+i);t=t.map(s=>ko(s,Uint32Array));let a=n;r.fill(0);for(const s of t)for(let l=0,u=s.length;l<u;++l){const f=s[l];r[f]?(s[l]=a,e[a]=e[f],o[a]=f,++a):o[f]=f,r[f]=1}return{data:e,facets:t}}function vS(e={},t={}){arguments.length===1&&([e,t]=MS(e));const{x1:n,x:r=n,y:i,...o}=t,[a,s,l,u]=PS(r,i,"x","y",e,o);return{...a,x1:n,x:s,y1:l,y2:u,y:mf(l,u)}}function Fy({y:e,y1:t,y2:n,...r}={}){return r=xl(r,"x"),t===void 0&&n===void 0?vS({y:e,...r}):([t,n]=s9(e,t,n),{...r,y1:t,y2:n})}function MS(e){const{offset:t,order:n,reverse:r,...i}=e;return[{offset:t,order:n,reverse:r},i]}const xS={length:!0};function PS(e,t=t9,n,r,{offset:i,order:o,reverse:a},s){if(t===null)throw new Error(`stack requires ${r}`);const l=vc(s),[u,f]=Nn(e),[h,c]=Es(t),[m,d]=Es(t);return h.hint=m.hint=xS,i=SS(i),o=ES(o,i,r),[_l(s,(p,g,_)=>{({data:p,facets:g}=wS(p,g));const b=e==null?void 0:f(t2(lt(p,e),_==null?void 0:_[n])),v=lt(p,t,Float64Array),y=lt(p,l),x=o&&o(p,b,v,y),M=p.length,P=c(new Float64Array(M)),$=d(new Float64Array(M)),N=[];for(const I of g){const E=b?Array.from(Us(I,O=>b[O]).values()):[I];if(x)for(const O of E)O.sort(x);for(const O of E){let H=0,D=0;a&&O.reverse();for(const T of O){const z=v[T];z<0?H=$[T]=(P[T]=H)+z:z>0?D=$[T]=(P[T]=D)+z:$[T]=P[T]=D}}N.push(E)}return i&&i(N,P,$,y),{data:p,facets:g}}),u,h,m]}function SS(e){if(e!=null){if(typeof e=="function")return e;switch(`${e}`.toLowerCase()){case"expand":case"normalize":return AS;case"center":case"silhouette":return kS;case"wiggle":return Oy}throw new Error(`unknown offset: ${e}`)}}function By(e,t){let n=0,r=0;for(const i of e){const o=t[i];o<n&&(n=o),o>r&&(r=o)}return[n,r]}function AS(e,t,n){for(const r of e)for(const i of r){const[o,a]=By(i,n);for(const s of i){const l=1/(a-o||1);t[s]=l*(t[s]-o),n[s]=l*(n[s]-o)}}}function kS(e,t,n){for(const r of e){for(const i of r){const[o,a]=By(i,n);for(const s of i){const l=(a+o)/2;t[s]-=l,n[s]-=l}}qy(r,t,n)}Gy(e,t,n)}function Oy(e,t,n,r){for(const i of e){const o=new Er;let a=0;for(const s of i){let l=-1;const u=s.map(m=>Math.abs(n[m]-t[m])),f=s.map(m=>{l=r?r[m]:++l;const d=n[m]-t[m],p=o.has(l)?d-o.get(l):0;return o.set(l,d),p}),h=[0,...sw(f)];for(const m of s)t[m]+=a,n[m]+=a;const c=ar(u);c&&(a-=ar(u,(m,d)=>(f[d]/2+h[d])*m)/c)}qy(i,t,n)}Gy(e,t,n)}function qy(e,t,n){const r=Gn(e,i=>Gn(i,o=>t[o]));for(const i of e)for(const o of i)t[o]-=r,n[o]-=r}function Gy(e,t,n){const r=e.length;if(r===1)return;const i=e.map(s=>s.flat()),o=i.map(s=>(Gn(s,l=>t[l])+zt(s,l=>n[l]))/2),a=Gn(o);for(let s=0;s<r;s++){const l=a-o[s];for(const u of i[s])t[u]+=l,n[u]+=l}}function ES(e,t,n){if(e===void 0&&t===Oy)return f0(nn);if(e!=null){if(typeof e=="string"){const r=e.startsWith("-"),i=r?ks:nn;switch((r?e.slice(1):e).toLowerCase()){case"value":case n:return CS(i);case"z":return TS(i);case"sum":return $S(i);case"appearance":return DS(i);case"inside-out":return f0(i)}return c0(Kg(e))}if(typeof e=="function")return(e.length===1?c0:NS)(e);if(Array.isArray(e))return IS(e);throw new Error(`invalid order: ${e}`)}}function CS(e){return(t,n,r)=>(i,o)=>e(r[i],r[o])}function TS(e){return(t,n,r,i)=>(o,a)=>e(i[o],i[a])}function $S(e){return kl(e,(t,n,r,i)=>Bf(jn(t),o=>ar(o,a=>r[a]),o=>i[o]))}function DS(e){return kl(e,(t,n,r,i)=>Bf(jn(t),o=>n[am(o,a=>r[a])],o=>i[o]))}function f0(e){return kl(e,(t,n,r,i)=>{const o=jn(t),a=Bf(o,h=>n[am(h,c=>r[c])],h=>i[h]),s=oi(o,h=>ar(h,c=>r[c]),h=>i[h]),l=[],u=[];let f=0;for(const h of a)f<0?(f+=s.get(h),l.push(h)):(f-=s.get(h),u.push(h));return u.reverse().concat(l)})}function c0(e){return t=>{const n=lt(t,e);return(r,i)=>nn(n[r],n[i])}}function NS(e){return t=>(n,r)=>e(t[n],t[r])}function IS(e){return kl(nn,()=>e)}function kl(e,t){return(n,r,i,o)=>{if(!o)throw new Error("missing channel: z");const a=new Er(t(n,r,i,o).map((s,l)=>[s,l]));return(s,l)=>e(a.get(o[s]),a.get(o[l]))}}const LS={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class RS extends wt{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a,z:s,curve:l,tension:u}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:vc(n),optional:!0}},n,LS),this.z=s,this.curve=Cy(l,u)}filter(t){return t}render(t,n,r,i,o){const{x1:a,y1:s,x2:l=a,y2:u=s}=r;return Ze("svg:g",o).call(Yt,this,i,o).call(It,this,n,0,0).call(f=>f.selectAll().data(p2(t,[a,s,l,u],this,r)).enter().append("path").call(jt,this).call(m2,this,r).attr("d",X4().curve(this.curve).defined(h=>h>=0).x0(h=>a[h]).y0(h=>s[h]).x1(h=>l[h]).y1(h=>u[h]))).node()}}function FS(e,t){const{x:n=ml,...r}=$y(t);return new RS(e,Fy(Ry({...r,x1:n,x2:void 0})))}const BS={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class OS extends wt{constructor(t,n={}){const{x1:r,y1:i,x2:o,y2:a,curve:s,tension:l}=n;super(t,{x1:{value:r,scale:"x"},y1:{value:i,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,BS),this.curve=Ty(s,l),la(this,n)}project(t,n,r){this.curve!==Ai&&super.project(t,n,r)}render(t,n,r,i,o){const{x1:a,y1:s,x2:l=a,y2:u=s}=r,{curve:f}=this;return Ze("svg:g",o).call(Yt,this,i,o).call(It,this,n).call(h=>h.selectAll().data(t).enter().append("path").call(jt,this).attr("d",f===Ai&&o.projection?qS(o.projection,a,s,l,u):c=>{const m=tr(),d=f(m);return d.lineStart(),d.point(a[c],s[c]),d.point(l[c],u[c]),d.lineEnd(),m}).call(Zn,this,r).call(Pl,this,r,o)).node()}}function qS(e,t,n,r,i){const o=Ks(e);return t=mn(t),n=mn(n),r=mn(r),i=mn(i),a=>o({type:"LineString",coordinates:[[t[a],n[a]],[r[a],i[a]]]})}function Uy(e,{x:t,x1:n,x2:r,y:i,y1:o,y2:a,...s}={}){return[n,r]=h0(t,n,r),[o,a]=h0(i,o,a),new OS(e,{...s,x1:n,x2:r,y1:o,y2:a})}function h0(e,t,n){if(e===void 0){if(t===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[t]}else{if(t===void 0)return n===void 0?[e]:[e,n];if(n===void 0)return[e,t]}return[t,n]}class zy extends wt{constructor(t,n,r={},i){super(t,n,r,i);const{inset:o=0,insetTop:a=o,insetRight:s=o,insetBottom:l=o,insetLeft:u=o,rx:f,ry:h}=r;this.insetTop=qe(a),this.insetRight=qe(s),this.insetBottom=qe(l),this.insetLeft=qe(u),this.rx=ft(f,"auto"),this.ry=ft(h,"auto")}render(t,n,r,i,o){const{rx:a,ry:s}=this;return Ze("svg:g",o).call(Yt,this,i,o).call(this._transform,this,n).call(l=>l.selectAll().data(t).enter().append("rect").call(jt,this).attr("x",this._x(n,r,i)).attr("width",this._width(n,r,i)).attr("y",this._y(n,r,i)).attr("height",this._height(n,r,i)).call(_e,"rx",a).call(_e,"ry",s).call(Zn,this,r)).node()}_x(t,{x:n},{marginLeft:r}){const{insetLeft:i}=this;return n?o=>n[o]+i:r+i}_y(t,{y:n},{marginTop:r}){const{insetTop:i}=this;return n?o=>n[o]+i:r+i}_width({x:t},{x:n},{marginRight:r,marginLeft:i,width:o}){const{insetLeft:a,insetRight:s}=this,l=n&&t?t.bandwidth():o-r-i;return Math.max(0,l-a-s)}_height({y:t},{y:n},{marginTop:r,marginBottom:i,height:o}){const{insetTop:a,insetBottom:s}=this,l=n&&t?t.bandwidth():o-r-i;return Math.max(0,l-a-s)}}const GS={ariaLabel:"bar"};class US extends zy{constructor(t,n={}){const{x:r,y1:i,y2:o}=n;super(t,{y1:{value:i,scale:"y"},y2:{value:o,scale:"y"},x:{value:r,scale:"x",type:"band",optional:!0}},n,GS)}_transform(t,n,{y:r}){t.call(It,n,{y:r},0,0)}_y({y:t},{y1:n,y2:r},{marginTop:i}){const{insetTop:o}=this;return Pi(t)?i+o:a=>Math.min(n[a],r[a])+o}_height({y:t},{y1:n,y2:r},{marginTop:i,marginBottom:o,height:a}){const{insetTop:s,insetBottom:l}=this;return Pi(t)?a-i-o-s-l:u=>Math.max(0,Math.abs(r[u]-n[u])-s-l)}}function zS(e,t={}){return a9(t)||(t={...t,x:ml,y2:dt}),new US(e,Fy(j2(Ry(t))))}const HS={ariaLabel:"cell"};class VS extends zy{constructor(t,{x:n,y:r,...i}={}){super(t,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:r,scale:"y",type:"band",optional:!0}},i,HS)}_transform(t,n){t.call(It,n,{},0,0)}}function Hy(e,{x:t,y:n,...r}={}){return[t,n]=ea(t,n),new VS(e,{...r,x:t,y:n})}const WS={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function YS(e){return e.sort===void 0&&e.reverse===void 0?C9({channel:"-r"},e):e}class jS extends wt{constructor(t,n={}){const{x:r,y:i,r:o,rotate:a,symbol:s=Po,frameAnchor:l}=n,[u,f]=yt(a,0),[h,c]=k9(s),[m,d]=yt(o,h==null?3:4.5);super(t,{x:{value:r,scale:"x",optional:!0},y:{value:i,scale:"y",optional:!0},r:{value:m,scale:"r",filter:hl,optional:!0},rotate:{value:u,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},YS(n),WS),this.r=d,this.rotate=f,this.symbol=c,this.frameAnchor=gl(l);const{channels:p}=this,{symbol:g}=p;if(g){const{fill:_,stroke:b}=p;g.hint={fill:_?_.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(t,n,r,i,o){const{x:a,y:s}=n,{x:l,y:u,r:f,rotate:h,symbol:c}=r,{r:m,rotate:d,symbol:p}=this,[g,_]=oa(this,i),b=p===Po,v=f?void 0:m*m*Math.PI;return pc(m)&&(t=[]),Ze("svg:g",o).call(Yt,this,i,o).call(It,this,{x:l&&a,y:u&&s}).call(y=>y.selectAll().data(t).enter().append(b?"circle":"path").call(jt,this).call(b?x=>{x.attr("cx",l?M=>l[M]:g).attr("cy",u?M=>u[M]:_).attr("r",f?M=>f[M]:m)}:x=>{x.attr("transform",qc`translate(${l?M=>l[M]:g},${u?M=>u[M]:_})${h?M=>` rotate(${h[M]})`:d?` rotate(${d})`:""}`).attr("d",f&&c?M=>{const P=tr();return c[M].draw(P,f[M]*f[M]*Math.PI),P}:f?M=>{const P=tr();return p.draw(P,f[M]*f[M]*Math.PI),P}:c?M=>{const P=tr();return c[M].draw(P,v),P}:(()=>{const M=tr();return p.draw(M,v),M})())}).call(Zn,this,r)).node()}}function Yc(e,{x:t,y:n,...r}={}){return r.frameAnchor===void 0&&([t,n]=ea(t,n)),new jS(e,{...r,x:t,y:n})}const XS={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Vy extends wt{constructor(t,n={}){const{x:r,y:i,z:o,curve:a,tension:s}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y"},z:{value:vc(n),optional:!0}},n,XS),this.z=o,this.curve=Ty(a,s),la(this,n)}filter(t){return t}project(t,n,r){this.curve!==Ai&&super.project(t,n,r)}render(t,n,r,i,o){const{x:a,y:s}=r,{curve:l}=this;return Ze("svg:g",o).call(Yt,this,i,o).call(It,this,n).call(u=>u.selectAll().data(p2(t,[a,s],this,r)).enter().append("path").call(jt,this).call(m2,this,r).call(Dx,this,r,o).attr("d",l===Ai&&o.projection?ZS(o.projection,a,s):gg().curve(l).defined(f=>f>=0).x(f=>a[f]).y(f=>s[f]))).node()}}function ZS(e,t,n){const r=Ks(e);return t=mn(t),n=mn(n),i=>{let o=[];const a=[o];for(const s of i)s===-1?(o=[],a.push(o)):o.push([t[s],n[s]]);return r({type:"MultiLineString",coordinates:a})}}function KS(e,{x:t,y:n,...r}={}){return[t,n]=ea(t,n),new Vy(e,{...r,x:t,y:n})}function JS(e,{x:t=ml,y:n=dt,...r}={}){return new Vy(e,$y({...r,x:t,y:n}))}const QS={ariaLabel:"tick",fill:null,stroke:"currentColor"};class eA extends wt{constructor(t,n,r){super(t,n,r,QS),la(this,r)}render(t,n,r,i,o){return Ze("svg:g",o).call(Yt,this,i,o).call(this._transform,this,n).call(a=>a.selectAll().data(t).enter().append("line").call(jt,this).attr("x1",this._x1(n,r,i)).attr("x2",this._x2(n,r,i)).attr("y1",this._y1(n,r,i)).attr("y2",this._y2(n,r,i)).call(Zn,this,r).call(Pl,this,r,o)).node()}}class tA extends eA{constructor(t,n={}){const{x:r,y:i,inset:o=0,insetTop:a=o,insetBottom:s=o}=n;super(t,{x:{value:r,scale:"x"},y:{value:i,scale:"y",type:"band",optional:!0}},n),this.insetTop=qe(a),this.insetBottom=qe(s)}_transform(t,n,{x:r}){t.call(It,n,{x:r},Pt,0)}_x1(t,{x:n}){return r=>n[r]}_x2(t,{x:n}){return r=>n[r]}_y1({y:t},{y:n},{marginTop:r}){const{insetTop:i}=this;return n&&t?o=>n[o]+i:r+i}_y2({y:t},{y:n},{height:r,marginBottom:i}){const{insetBottom:o}=this;return n&&t?a=>n[a]+t.bandwidth()-o:r-i-o}}function jc(e,{x:t=dt,...n}={}){return new tA(e,{...n,x:t})}function nA(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Xe(t,"width",e[0]+"px"),Xe(t,"margin","auto")},m(o,a){F(o,t,a),w(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Xe(t,"width",o[0]+"px")},i:Me,o:Me,d(o){o&&R(t),e[4](null)}}}function rA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;xn(()=>{const l=an({width:i,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[jc(r,{x:u=>u})]});n(2,a.textContent="",a),a.appendChild(l)});function s(l){_t[l?"unshift":"push"](()=>{a=l,n(2,a)})}return e.$$set=l=>{"pattern"in l&&n(3,r=l.pattern),"width"in l&&n(0,i=l.width),"height"in l&&n(1,o=l.height)},[i,o,a,r,s]}class iA extends et{constructor(t){super(),Qe(this,t,rA,nA,Je,{pattern:3,width:0,height:1})}}function oA(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Xe(t,"width",e[0]+"px"),Xe(t,"margin","auto")},m(o,a){F(o,t,a),w(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Xe(t,"width",o[0]+"px")},i:Me,o:Me,d(o){o&&R(t),e[4](null)}}}function aA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;xn(()=>{const l=r.map((f,h)=>h===0?0:f-r[h-1]),u=an({width:i,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[zS(l,{x:(f,h)=>h+1,y:f=>f})]});n(2,a.textContent="",a),a.appendChild(u)});function s(l){_t[l?"unshift":"push"](()=>{a=l,n(2,a)})}return e.$$set=l=>{"pattern"in l&&n(3,r=l.pattern),"width"in l&&n(0,i=l.width),"height"in l&&n(1,o=l.height)},[i,o,a,r,s]}class sA extends et{constructor(t){super(),Qe(this,t,aA,oA,Je,{pattern:3,width:0,height:1})}}function lA(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Xe(t,"width",e[0]+"px"),Xe(t,"margin","auto")},m(o,a){F(o,t,a),w(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Xe(t,"width",o[0]+"px")},i:Me,o:Me,d(o){o&&R(t),e[4](null)}}}function uA(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;xn(()=>{const l=r.map((f,h)=>h===0?0:f-r[h-1]),u=an({width:i,height:o,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Hy(l,{x:(f,h)=>h+1,fill:f=>f})]});n(2,a.textContent="",a),a.appendChild(u)});function s(l){_t[l?"unshift":"push"](()=>{a=l,n(2,a)})}return e.$$set=l=>{"pattern"in l&&n(3,r=l.pattern),"width"in l&&n(0,i=l.width),"height"in l&&n(1,o=l.height)},[i,o,a,r,s]}class fA extends et{constructor(t){super(),Qe(this,t,uA,lA,Je,{pattern:3,width:0,height:1})}}function cA(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Xe(t,"width",e[0]+"px"),Xe(t,"margin","auto")},m(o,a){F(o,t,a),w(t,n),e[5](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Xe(t,"width",o[0]+"px")},i:Me,o:Me,d(o){o&&R(t),e[5](null)}}}function hA(e,t,n){let{audioData:r=[]}=t,{sampleRate:i=1}=t,{width:o=800}=t,{height:a=50}=t,s;xn(()=>{if(n(2,s.textContent="",s),!r)return;const u=an({width:o,height:a,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1,domain:[-1,1]},marks:[JS(r,{x:(f,h)=>h/i,y:f=>f})]});s.appendChild(u)});function l(u){_t[u?"unshift":"push"](()=>{s=u,n(2,s)})}return e.$$set=u=>{"audioData"in u&&n(3,r=u.audioData),"sampleRate"in u&&n(4,i=u.sampleRate),"width"in u&&n(0,o=u.width),"height"in u&&n(1,a=u.height)},[o,a,s,r,i,l]}class yn extends et{constructor(t){super(),Qe(this,t,hA,cA,Je,{audioData:3,sampleRate:4,width:0,height:1})}}function dA(e){let t,n,r,i,o,a;return{c(){t=S("main"),n=S("audio"),r=C(),i=S("button"),i.textContent="play audio (p)",n.controls=!1},m(s,l){F(s,t,l),w(t,n),e[5](n),w(t,r),w(t,i),o||(a=Ie(i,"click",e[1]),o=!0)},p:Me,i:Me,o:Me,d(s){s&&R(t),e[5](null),o=!1,a()}}}function mA(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,{currentTrialNumber:o=-1}=t,a;const s=h=>{h&&a&&hc(h,i,a)},l=()=>{a&&(n(0,a.currentTime=0,a),a.play())},u=h=>{h.key==="p"&&l()};Br(()=>{document.querySelector("html").addEventListener("keyup",u),s(r)}),W_(()=>{document.querySelector("html").removeEventListener("keyup",u)});function f(h){_t[h?"unshift":"push"](()=>{a=h,n(0,a)})}return e.$$set=h=>{"audioData"in h&&n(2,r=h.audioData),"sampleRate"in h&&n(3,i=h.sampleRate),"currentTrialNumber"in h&&n(4,o=h.currentTrialNumber)},e.$$.update=()=>{e.$$.dirty&16&&o>-1&&window.setTimeout(l,250),e.$$.dirty&4&&s(r)},[a,l,r,i,o,f]}class El extends et{constructor(t){super(),Qe(this,t,mA,dA,Je,{audioData:2,sampleRate:3,currentTrialNumber:4})}}const Wy=new Map,Yy=new Map,pA=new Map,bA=new Map;function gA(e){return Wy.get(e)}function jy(e){return Yy.get(e)}const yA=[{pitch:0,name:"C",octave:-1,label:"C-1",frequency:8.176},{pitch:1,name:"C#",octave:-1,label:"C#-1",frequency:8.662},{pitch:2,name:"D",octave:-1,label:"D-1",frequency:9.177},{pitch:3,name:"D#",octave:-1,label:"D#-1",frequency:9.723},{pitch:4,name:"E",octave:-1,label:"E-1",frequency:10.301},{pitch:5,name:"F",octave:-1,label:"F-1",frequency:10.913},{pitch:6,name:"F#",octave:-1,label:"F#-1",frequency:11.562},{pitch:7,name:"G",octave:-1,label:"G-1",frequency:12.25},{pitch:8,name:"G#",octave:-1,label:"G#-1",frequency:12.978},{pitch:9,name:"A",octave:-1,label:"A-1",frequency:13.75},{pitch:10,name:"A#",octave:-1,label:"A#-1",frequency:14.568},{pitch:11,name:"B",octave:-1,label:"B-1",frequency:15.434},{pitch:12,name:"C",octave:0,label:"C0",frequency:16.352},{pitch:13,name:"C#",octave:0,label:"C#0",frequency:17.324},{pitch:14,name:"D",octave:0,label:"D0",frequency:18.354},{pitch:15,name:"D#",octave:0,label:"D#0",frequency:19.445},{pitch:16,name:"E",octave:0,label:"E0",frequency:20.602},{pitch:17,name:"F",octave:0,label:"F0",frequency:21.827},{pitch:18,name:"F#",octave:0,label:"F#0",frequency:23.125},{pitch:19,name:"G",octave:0,label:"G0",frequency:24.5},{pitch:20,name:"G#",octave:0,label:"G#0",frequency:25.957},{pitch:21,name:"A",octave:0,label:"A0",frequency:27.5},{pitch:22,name:"A#",octave:0,label:"A#0",frequency:29.135},{pitch:23,name:"B",octave:0,label:"B0",frequency:30.868},{pitch:24,name:"C",octave:1,label:"C1",frequency:32.703},{pitch:25,name:"C#",octave:1,label:"C#1",frequency:34.648},{pitch:26,name:"D",octave:1,label:"D1",frequency:36.708},{pitch:27,name:"D#",octave:1,label:"D#1",frequency:38.891},{pitch:28,name:"E",octave:1,label:"E1",frequency:41.203},{pitch:29,name:"F",octave:1,label:"F1",frequency:43.654},{pitch:30,name:"F#",octave:1,label:"F#1",frequency:46.249},{pitch:31,name:"G",octave:1,label:"G1",frequency:48.999},{pitch:32,name:"G#",octave:1,label:"G#1",frequency:51.913},{pitch:33,name:"A",octave:1,label:"A1",frequency:55},{pitch:34,name:"A#",octave:1,label:"A#1",frequency:58.27},{pitch:35,name:"B",octave:1,label:"B1",frequency:61.735},{pitch:36,name:"C",octave:2,label:"C2",frequency:65.406},{pitch:37,name:"C#",octave:2,label:"C#2",frequency:69.296},{pitch:38,name:"D",octave:2,label:"D2",frequency:73.416},{pitch:39,name:"D#",octave:2,label:"D#2",frequency:77.782},{pitch:40,name:"E",octave:2,label:"E2",frequency:82.407},{pitch:41,name:"F",octave:2,label:"F2",frequency:87.307},{pitch:42,name:"F#",octave:2,label:"F#2",frequency:92.499},{pitch:43,name:"G",octave:2,label:"G2",frequency:97.999},{pitch:44,name:"G#",octave:2,label:"G#2",frequency:103.826},{pitch:45,name:"A",octave:2,label:"A2",frequency:110},{pitch:46,name:"A#",octave:2,label:"A#2",frequency:116.541},{pitch:47,name:"B",octave:2,label:"B2",frequency:123.471},{pitch:48,name:"C",octave:3,label:"C3",frequency:130.813},{pitch:49,name:"C#",octave:3,label:"C#3",frequency:138.591},{pitch:50,name:"D",octave:3,label:"D3",frequency:146.832},{pitch:51,name:"D#",octave:3,label:"D#3",frequency:155.563},{pitch:52,name:"E",octave:3,label:"E3",frequency:164.814},{pitch:53,name:"F",octave:3,label:"F3",frequency:174.614},{pitch:54,name:"F#",octave:3,label:"F#3",frequency:184.997},{pitch:55,name:"G",octave:3,label:"G3",frequency:195.998},{pitch:56,name:"G#",octave:3,label:"G#3",frequency:207.652},{pitch:57,name:"A",octave:3,label:"A3",frequency:220},{pitch:58,name:"A#",octave:3,label:"A#3",frequency:233.082},{pitch:59,name:"B",octave:3,label:"B3",frequency:246.942},{pitch:60,name:"C",octave:4,label:"C4",frequency:261.626},{pitch:61,name:"C#",octave:4,label:"C#4",frequency:277.183},{pitch:62,name:"D",octave:4,label:"D4",frequency:293.665},{pitch:63,name:"D#",octave:4,label:"D#4",frequency:311.127},{pitch:64,name:"E",octave:4,label:"E4",frequency:329.628},{pitch:65,name:"F",octave:4,label:"F4",frequency:349.228},{pitch:66,name:"F#",octave:4,label:"F#4",frequency:369.994},{pitch:67,name:"G",octave:4,label:"G4",frequency:391.995},{pitch:68,name:"G#",octave:4,label:"G#4",frequency:415.305},{pitch:69,name:"A",octave:4,label:"A4",frequency:440},{pitch:70,name:"A#",octave:4,label:"A#4",frequency:466.164},{pitch:71,name:"B",octave:4,label:"B4",frequency:493.883},{pitch:72,name:"C",octave:5,label:"C5",frequency:523.251},{pitch:73,name:"C#",octave:5,label:"C#5",frequency:554.365},{pitch:74,name:"D",octave:5,label:"D5",frequency:587.33},{pitch:75,name:"D#",octave:5,label:"D#5",frequency:622.254},{pitch:76,name:"E",octave:5,label:"E5",frequency:659.255},{pitch:77,name:"F",octave:5,label:"F5",frequency:698.456},{pitch:78,name:"F#",octave:5,label:"F#5",frequency:739.989},{pitch:79,name:"G",octave:5,label:"G5",frequency:783.991},{pitch:80,name:"G#",octave:5,label:"G#5",frequency:830.609},{pitch:81,name:"A",octave:5,label:"A5",frequency:880},{pitch:82,name:"A#",octave:5,label:"A#5",frequency:932.328},{pitch:83,name:"B",octave:5,label:"B5",frequency:987.767},{pitch:84,name:"C",octave:6,label:"C6",frequency:1046.502},{pitch:85,name:"C#",octave:6,label:"C#6",frequency:1108.731},{pitch:86,name:"D",octave:6,label:"D6",frequency:1174.659},{pitch:87,name:"D#",octave:6,label:"D#6",frequency:1244.508},{pitch:88,name:"E",octave:6,label:"E6",frequency:1318.51},{pitch:89,name:"F",octave:6,label:"F6",frequency:1396.913},{pitch:90,name:"F#",octave:6,label:"F#6",frequency:1479.978},{pitch:91,name:"G",octave:6,label:"G6",frequency:1567.982},{pitch:92,name:"G#",octave:6,label:"G#6",frequency:1661.219},{pitch:93,name:"A",octave:6,label:"A6",frequency:1760},{pitch:94,name:"A#",octave:6,label:"A#6",frequency:1864.655},{pitch:95,name:"B",octave:6,label:"B6",frequency:1975.533},{pitch:96,name:"C",octave:7,label:"C7",frequency:2093.005},{pitch:97,name:"C#",octave:7,label:"C#7",frequency:2217.461},{pitch:98,name:"D",octave:7,label:"D7",frequency:2349.318},{pitch:99,name:"D#",octave:7,label:"D#7",frequency:2489.016},{pitch:100,name:"E",octave:7,label:"E7",frequency:2637.02},{pitch:101,name:"F",octave:7,label:"F7",frequency:2793.826},{pitch:102,name:"F#",octave:7,label:"F#7",frequency:2959.955},{pitch:103,name:"G",octave:7,label:"G7",frequency:3135.963},{pitch:104,name:"G#",octave:7,label:"G#7",frequency:3322.438},{pitch:105,name:"A",octave:7,label:"A7",frequency:3520},{pitch:106,name:"A#",octave:7,label:"A#7",frequency:3729.31},{pitch:107,name:"B",octave:7,label:"B7",frequency:3951.066},{pitch:108,name:"C",octave:8,label:"C8",frequency:4186.009},{pitch:109,name:"C#",octave:8,label:"C#8",frequency:4434.922},{pitch:110,name:"D",octave:8,label:"D8",frequency:4698.636},{pitch:111,name:"D#",octave:8,label:"D#8",frequency:4978.032},{pitch:112,name:"E",octave:8,label:"E8",frequency:5274.041},{pitch:113,name:"F",octave:8,label:"F8",frequency:5587.652},{pitch:114,name:"F#",octave:8,label:"F#8",frequency:5919.911},{pitch:115,name:"G",octave:8,label:"G8",frequency:6271.927},{pitch:116,name:"G#",octave:8,label:"G#8",frequency:6644.875},{pitch:117,name:"A",octave:8,label:"A8",frequency:7040},{pitch:118,name:"A#",octave:8,label:"A#8",frequency:7458.62},{pitch:119,name:"B",octave:8,label:"B8",frequency:7902.133},{pitch:120,name:"C",octave:9,label:"C9",frequency:8372.018},{pitch:121,name:"C#",octave:9,label:"C#9",frequency:8869.844},{pitch:122,name:"D",octave:9,label:"D9",frequency:9397.273},{pitch:123,name:"D#",octave:9,label:"D#9",frequency:9956.063},{pitch:124,name:"E",octave:9,label:"E9",frequency:10548.08},{pitch:125,name:"F",octave:9,label:"F9",frequency:11175.3},{pitch:126,name:"F#",octave:9,label:"F#9",frequency:11839.82},{pitch:127,name:"G",octave:9,label:"G9",frequency:12543.85}],_A=[{number:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,group:"Piano",label:"Bright Acoustic Piano"},{number:2,group:"Piano",label:"Electric Grand Piano"},{number:3,group:"Piano",label:"Honky-tonk Piano"},{number:4,group:"Piano",label:"Electric Piano 1"},{number:5,group:"Piano",label:"Electric Piano 2"},{number:6,group:"Piano",label:"Harpsichord"},{number:7,group:"Piano",label:"Clavinet"},{number:8,group:"Chromatic Percussion",label:"Celesta"},{number:9,group:"Chromatic Percussion",label:"Glockenspiel"},{number:10,group:"Chromatic Percussion",label:"Music Box"},{number:11,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,group:"Chromatic Percussion",label:"Marimba"},{number:13,group:"Chromatic Percussion",label:"Xylophone"},{number:14,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,group:"Chromatic Percussion",label:"Dulcimer"},{number:16,group:"Organ",label:"Drawbar Organ"},{number:17,group:"Organ",label:"Percussive Organ"},{number:18,group:"Organ",label:"Rock Organ"},{number:19,group:"Organ",label:"Church Organ"},{number:20,group:"Organ",label:"Reed Organ"},{number:21,group:"Organ",label:"Accordion"},{number:22,group:"Organ",label:"Harmonica"},{number:23,group:"Organ",label:"Tango Accordion"},{number:24,group:"Guitar",label:"Acoustic Guitar(nylon)"},{number:25,group:"Guitar",label:"Acoustic Guitar(steel)"},{number:26,group:"Guitar",label:"Electric Guitar(jazz)"},{number:27,group:"Guitar",label:"Electric Guitar(clean)"},{number:28,group:"Guitar",label:"Electric Guitar(muted)"},{number:29,group:"Guitar",label:"Overdriven Guitar"},{number:30,group:"Guitar",label:"Distortion Guitar"},{number:31,group:"Guitar",label:"Guitar harmonics"},{number:32,group:"Bass",label:"Acoustic Bass"},{number:33,group:"Bass",label:"Electric Bass(finger)"},{number:34,group:"Bass",label:"Electric Bass(pick)"},{number:35,group:"Bass",label:"Fretless Bass"},{number:36,group:"Bass",label:"Slap Bass 1"},{number:37,group:"Bass",label:"Slap Bass 2"},{number:38,group:"Bass",label:"Synth Bass 1"},{number:39,group:"Bass",label:"Synth Bass 2"},{number:40,group:"Strings",label:"Violin"},{number:41,group:"Strings",label:"Viola"},{number:42,group:"Strings",label:"Cello"},{number:43,group:"Strings",label:"Contrabass"},{number:44,group:"Strings",label:"Tremolo Strings"},{number:45,group:"Strings",label:"Pizzicato Strings"},{number:46,group:"Strings",label:"Orchestral Harp"},{number:47,group:"Strings",label:"Timpani"},{number:48,group:"Strings (continued)",label:"String Ensemble 1"},{number:49,group:"Strings (continued)",label:"String Ensemble 2"},{number:50,group:"Strings (continued)",label:"Synth Strings 1"},{number:51,group:"Strings (continued)",label:"Synth Strings 2"},{number:52,group:"Strings (continued)",label:"Choir Aahs"},{number:53,group:"Strings (continued)",label:"Voice Oohs"},{number:54,group:"Strings (continued)",label:"Synth Voice"},{number:55,group:"Strings (continued)",label:"Orchestra Hit"},{number:56,group:"Brass",label:"Trumpet"},{number:57,group:"Brass",label:"Trombone"},{number:58,group:"Brass",label:"Tuba"},{number:59,group:"Brass",label:"Muted Trumpet"},{number:60,group:"Brass",label:"French Horn"},{number:61,group:"Brass",label:"Brass Section"},{number:62,group:"Brass",label:"Synth Brass 1"},{number:63,group:"Brass",label:"Synth Brass 2"},{number:64,group:"Reed",label:"Soprano Sax"},{number:65,group:"Reed",label:"Alto Sax"},{number:66,group:"Reed",label:"Tenor Sax"},{number:67,group:"Reed",label:"Baritone Sax"},{number:68,group:"Reed",label:"Oboe"},{number:69,group:"Reed",label:"English Horn"},{number:70,group:"Reed",label:"Bassoon"},{number:71,group:"Reed",label:"Clarinet"},{number:72,group:"Pipe",label:"Piccolo"},{number:73,group:"Pipe",label:"Flute"},{number:74,group:"Pipe",label:"Recorder"},{number:75,group:"Pipe",label:"Pan Flute"},{number:76,group:"Pipe",label:"Blown Bottle"},{number:77,group:"Pipe",label:"Shakuhachi"},{number:78,group:"Pipe",label:"Whistle"},{number:79,group:"Pipe",label:"Ocarina"},{number:80,group:"Synth Lead",label:"Lead 1(square)"},{number:81,group:"Synth Lead",label:"Lead 2(sawtooth)"},{number:82,group:"Synth Lead",label:"Lead 3(calliope)"},{number:83,group:"Synth Lead",label:"Lead 4(chiff)"},{number:84,group:"Synth Lead",label:"Lead 5(charang)"},{number:85,group:"Synth Lead",label:"Lead 6(voice)"},{number:86,group:"Synth Lead",label:"Lead 7(fifths)"},{number:87,group:"Synth Lead",label:"Lead 8(bass + lead)"},{number:88,group:"Synth Pad",label:"Pad 1(new age)"},{number:89,group:"Synth Pad",label:"Pad 2(warm)"},{number:90,group:"Synth Pad",label:"Pad 3(polysynth)"},{number:91,group:"Synth Pad",label:"Pad 4(choir)"},{number:92,group:"Synth Pad",label:"Pad 5(bowed)"},{number:93,group:"Synth Pad",label:"Pad 6(metallic)"},{number:94,group:"Synth Pad",label:"Pad 7(halo)"},{number:95,group:"Synth Pad",label:"Pad 8(sweep)"},{number:96,group:"Synth Effects",label:"FX 1(rain)"},{number:97,group:"Synth Effects",label:"FX 2(soundtrack)"},{number:98,group:"Synth Effects",label:"FX 3(crystal)"},{number:99,group:"Synth Effects",label:"FX 4(atmosphere)"},{number:100,group:"Synth Effects",label:"FX 5(brightness)"},{number:101,group:"Synth Effects",label:"FX 6(goblins)"},{number:102,group:"Synth Effects",label:"FX 7(echoes)"},{number:103,group:"Synth Effects",label:"FX 8(sci-fi)"},{number:104,group:"Ethnic",label:"Sitar"},{number:105,group:"Ethnic",label:"Banjo"},{number:106,group:"Ethnic",label:"Shamisen"},{number:107,group:"Ethnic",label:"Koto"},{number:108,group:"Ethnic",label:"Kalimba"},{number:109,group:"Ethnic",label:"Bag pipe"},{number:110,group:"Ethnic",label:"Fiddle"},{number:111,group:"Ethnic",label:"Shanai"},{number:112,group:"Percussive",label:"Tinkle Bell"},{number:113,group:"Percussive",label:"Agogo"},{number:114,group:"Percussive",label:"Steel Drums"},{number:115,group:"Percussive",label:"Woodblock"},{number:116,group:"Percussive",label:"Taiko Drum"},{number:117,group:"Percussive",label:"Melodic Tom"},{number:118,group:"Percussive",label:"Synth Drum"},{number:119,group:"Sound Effects",label:"Reverse Cymbal"},{number:120,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,group:"Sound Effects",label:"Breath Noise"},{number:122,group:"Sound Effects",label:"Seashore"},{number:123,group:"Sound Effects",label:"Bird Tweet"},{number:124,group:"Sound Effects",label:"Telephone Ring"},{number:125,group:"Sound Effects",label:"Helicopter"},{number:126,group:"Sound Effects",label:"Applause"},{number:127,group:"Sound Effects",label:"Gunshot"}],wA=[{number:1,subnumber:0,group:"Piano",label:"Acoustic Grand Piano"},{number:1,subnumber:1,group:"Piano",label:"Wide Acoustic Grand"},{number:1,subnumber:2,group:"Piano",label:"Dark Acoustic Grand"},{number:2,subnumber:0,group:"Piano",label:"Bright Acoustic Piano"},{number:2,subnumber:1,group:"Piano",label:"Wide Bright Acoustic"},{number:3,subnumber:0,group:"Piano",label:"Electric Grand Piano"},{number:3,subnumber:1,group:"Piano",label:"Wide Electric Grand"},{number:4,subnumber:0,group:"Piano",label:"Honky-tonk Piano"},{number:4,subnumber:1,group:"Piano",label:"Wide Honky-tonk"},{number:5,subnumber:0,group:"Piano",label:"Rhodes Piano"},{number:5,subnumber:1,group:"Piano",label:"Detuned Electric Piano 1"},{number:5,subnumber:2,group:"Piano",label:"Electric Piano 1 Variation"},{number:5,subnumber:3,group:"Piano",label:"60's Electric Piano"},{number:6,subnumber:0,group:"Piano",label:"Chorused Electric Piano"},{number:6,subnumber:1,group:"Piano",label:"Detuned Electric Piano 2"},{number:6,subnumber:2,group:"Piano",label:"Electric Piano 2 Variation"},{number:6,subnumber:3,group:"Piano",label:"Electric Piano Legend"},{number:6,subnumber:4,group:"Piano",label:"Electric Piano Phase"},{number:7,subnumber:0,group:"Piano",label:"Harpsichord"},{number:7,subnumber:1,group:"Piano",label:"Coupled Harpsichord"},{number:7,subnumber:2,group:"Piano",label:"Wide Harpsichord"},{number:7,subnumber:3,group:"Piano",label:"Open Harpsichord"},{number:8,subnumber:0,group:"Piano",label:"Clavinet"},{number:8,subnumber:1,group:"Piano",label:"Pulse Clavinet"},{number:9,subnumber:0,group:"Chromatic Percussion",label:"Celesta"},{number:10,subnumber:0,group:"Chromatic Percussion",label:"Glockenspiel"},{number:11,subnumber:0,group:"Chromatic Percussion",label:"Music Box"},{number:12,subnumber:0,group:"Chromatic Percussion",label:"Vibraphone"},{number:12,subnumber:1,group:"Chromatic Percussion",label:"Wet Vibraphone"},{number:13,subnumber:0,group:"Chromatic Percussion",label:"Marimba"},{number:13,subnumber:1,group:"Chromatic Percussion",label:"Wide Marimba"},{number:14,subnumber:0,group:"Chromatic Percussion",label:"Xylophone"},{number:15,subnumber:0,group:"Chromatic Percussion",label:"Tubular Bells"},{number:15,subnumber:1,group:"Chromatic Percussion",label:"Church Bells"},{number:15,subnumber:2,group:"Chromatic Percussion",label:"Carillon"},{number:16,subnumber:0,group:"Chromatic Percussion",label:"Dulcimer / Santur"},{number:17,subnumber:0,group:"Organ",label:"Hammond Organ"},{number:17,subnumber:1,group:"Organ",label:"Detuned Organ 1"},{number:17,subnumber:2,group:"Organ",label:"60's Organ 1"},{number:17,subnumber:3,group:"Organ",label:"Organ 4"},{number:18,subnumber:0,group:"Organ",label:"Percussive Organ"},{number:18,subnumber:1,group:"Organ",label:"Detuned Organ 2"},{number:18,subnumber:2,group:"Organ",label:"Organ 5"},{number:19,subnumber:0,group:"Organ",label:"Rock Organ"},{number:20,subnumber:0,group:"Organ",label:"Church Organ 1"},{number:20,subnumber:1,group:"Organ",label:"Church Organ 2"},{number:20,subnumber:2,group:"Organ",label:"Church Organ 3"},{number:21,subnumber:0,group:"Organ",label:"Reed Organ"},{number:21,subnumber:1,group:"Organ",label:"Puff Organ"},{number:22,subnumber:0,group:"Organ",label:"French Accordion"},{number:22,subnumber:1,group:"Organ",label:"Italian Accordion"},{number:23,subnumber:0,group:"Organ",label:"Harmonica"},{number:24,subnumber:0,group:"Organ",label:"Bandoneon"},{number:25,subnumber:0,group:"Guitar",label:"Nylon-String Guitar"},{number:25,subnumber:1,group:"Guitar",label:"Ukelele"},{number:25,subnumber:2,group:"Guitar",label:"Open Nylon Guitar"},{number:25,subnumber:3,group:"Guitar",label:"Nylon Guitar 2"},{number:26,subnumber:0,group:"Guitar",label:"Steel-String Guitar"},{number:26,subnumber:1,group:"Guitar",label:"12-String Guitar"},{number:26,subnumber:2,group:"Guitar",label:"Mandolin"},{number:26,subnumber:3,group:"Guitar",label:"Steel + Body"},{number:27,subnumber:0,group:"Guitar",label:"Jazz Guitar"},{number:27,subnumber:1,group:"Guitar",label:"Hawaiian Guitar"},{number:28,subnumber:0,group:"Guitar",label:"Clean Electric Guitar"},{number:28,subnumber:1,group:"Guitar",label:"Chorus Guitar"},{number:28,subnumber:2,group:"Guitar",label:"Mid Tone Guitar"},{number:29,subnumber:0,group:"Guitar",label:"Muted Electric Guitar"},{number:29,subnumber:1,group:"Guitar",label:"Funk Guitar"},{number:29,subnumber:2,group:"Guitar",label:"Funk Guitar 2"},{number:29,subnumber:3,group:"Guitar",label:"Jazz Man"},{number:30,subnumber:0,group:"Guitar",label:"Overdriven Guitar"},{number:30,subnumber:1,group:"Guitar",label:"Guitar Pinch"},{number:31,subnumber:0,group:"Guitar",label:"Distortion Guitar"},{number:31,subnumber:1,group:"Guitar",label:"Feedback Guitar"},{number:31,subnumber:2,group:"Guitar",label:"Distortion Rtm Guitar"},{number:32,subnumber:0,group:"Guitar",label:"Guitar Harmonics"},{number:32,subnumber:1,group:"Guitar",label:"Guitar Feedback"},{number:33,subnumber:0,group:"Bass",label:"Acoustic Bass"},{number:34,subnumber:0,group:"Bass",label:"Fingered Bass"},{number:34,subnumber:1,group:"Bass",label:"Finger Slap"},{number:35,subnumber:0,group:"Bass",label:"Picked Bass"},{number:36,subnumber:0,group:"Bass",label:"Fretless Bass"},{number:37,subnumber:0,group:"Bass",label:"Slap Bass 1"},{number:38,subnumber:0,group:"Bass",label:"Slap Bass 2"},{number:39,subnumber:0,group:"Bass",label:"Synth Bass 1"},{number:39,subnumber:1,group:"Bass",label:"Synth Bass 101"},{number:39,subnumber:2,group:"Bass",label:"Synth Bass 3"},{number:39,subnumber:3,group:"Bass",label:"Clavi Bass"},{number:39,subnumber:4,group:"Bass",label:"Hammer"},{number:40,subnumber:0,group:"Bass",label:"Synth Bass 2"},{number:40,subnumber:1,group:"Bass",label:"Synth Bass 4"},{number:40,subnumber:2,group:"Bass",label:"Rubber Bass"},{number:40,subnumber:3,group:"Bass",label:"Attack Pulse"},{number:41,subnumber:0,group:"Strings",label:"Violin"},{number:41,subnumber:1,group:"Strings",label:"Slow Violin"},{number:42,subnumber:0,group:"Strings",label:"Viola"},{number:43,subnumber:0,group:"Strings",label:"Cello"},{number:44,subnumber:0,group:"Strings",label:"Contrabass"},{number:45,subnumber:0,group:"Strings",label:"Tremolo Strings"},{number:46,subnumber:0,group:"Strings",label:"Pizzicato Strings"},{number:47,subnumber:0,group:"Strings",label:"Harp"},{number:47,subnumber:1,group:"Strings",label:"Yang Qin"},{number:48,subnumber:0,group:"Strings",label:"Timpani"},{number:49,subnumber:0,group:"Orchestral Ensemble",label:"String Ensemble"},{number:49,subnumber:1,group:"Orchestral Ensemble",label:"Orchestra Strings"},{number:49,subnumber:2,group:"Orchestral Ensemble",label:"60's Strings"},{number:50,subnumber:0,group:"Orchestral Ensemble",label:"Slow String Ensemble"},{number:51,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 1"},{number:51,subnumber:1,group:"Orchestral Ensemble",label:"Synth Strings 3"},{number:52,subnumber:0,group:"Orchestral Ensemble",label:"Synth Strings 2"},{number:53,subnumber:0,group:"Orchestral Ensemble",label:"Choir Aahs"},{number:53,subnumber:1,group:"Orchestral Ensemble",label:"Choir Aahs 2"},{number:54,subnumber:0,group:"Orchestral Ensemble",label:"Voice Oohs"},{number:54,subnumber:1,group:"Orchestral Ensemble",label:"Humming"},{number:55,subnumber:0,group:"Orchestral Ensemble",label:"Synth Voice"},{number:55,subnumber:1,group:"Orchestral Ensemble",label:"Analog Voice"},{number:56,subnumber:0,group:"Orchestral Ensemble",label:"Orchestra Hit"},{number:56,subnumber:1,group:"Orchestral Ensemble",label:"Bass Hit"},{number:56,subnumber:2,group:"Orchestral Ensemble",label:"6th Hit"},{number:56,subnumber:3,group:"Orchestral Ensemble",label:"Euro Hit"},{number:57,subnumber:0,group:"Brass",label:"Trumpet"},{number:57,subnumber:1,group:"Brass",label:"Dark Trumpet"},{number:58,subnumber:0,group:"Brass",label:"Trombone"},{number:58,subnumber:1,group:"Brass",label:"Trombone 2"},{number:58,subnumber:2,group:"Brass",label:"Bright Trombone"},{number:59,subnumber:0,group:"Brass",label:"Tuba"},{number:60,subnumber:0,group:"Brass",label:"Muted Trumpet"},{number:60,subnumber:1,group:"Brass",label:"Muted Trumpet 2"},{number:61,subnumber:0,group:"Brass",label:"French Horn"},{number:61,subnumber:1,group:"Brass",label:"French Horn 2"},{number:62,subnumber:0,group:"Brass",label:"Brass Section"},{number:62,subnumber:1,group:"Brass",label:"Brass Section"},{number:63,subnumber:0,group:"Brass",label:"Synth Brass 1"},{number:63,subnumber:1,group:"Brass",label:"Synth Brass 3"},{number:63,subnumber:2,group:"Brass",label:"Analog Brass 1"},{number:63,subnumber:3,group:"Brass",label:"Jump Brass"},{number:64,subnumber:0,group:"Brass",label:"Synth Brass 2"},{number:64,subnumber:1,group:"Brass",label:"Synth Brass 4"},{number:64,subnumber:2,group:"Brass",label:"Analog Brass 2"},{number:65,subnumber:0,group:"Reed",label:"Soprano Sax"},{number:66,subnumber:0,group:"Reed",label:"Alto Sax"},{number:67,subnumber:0,group:"Reed",label:"Tenor Sax"},{number:68,subnumber:0,group:"Reed",label:"Baritone Sax"},{number:69,subnumber:0,group:"Reed",label:"Oboe"},{number:70,subnumber:0,group:"Reed",label:"English Horn"},{number:71,subnumber:0,group:"Reed",label:"Bassoon"},{number:72,subnumber:0,group:"Reed",label:"Clarinet"},{number:73,subnumber:0,group:"Wind",label:"Piccolo"},{number:74,subnumber:0,group:"Wind",label:"Flute"},{number:75,subnumber:0,group:"Wind",label:"Recorder"},{number:76,subnumber:0,group:"Wind",label:"Pan Flute"},{number:77,subnumber:0,group:"Wind",label:"Blown Bottle"},{number:78,subnumber:0,group:"Wind",label:"Shakuhachi"},{number:79,subnumber:0,group:"Wind",label:"Whistle"},{number:80,subnumber:0,group:"Wind",label:"Ocarina"},{number:81,subnumber:0,group:"Lead",label:"Square Lead"},{number:81,subnumber:1,group:"Lead",label:"Square Wave"},{number:81,subnumber:2,group:"Lead",label:"Sine Wave"},{number:82,subnumber:0,group:"Lead",label:"Saw Lead"},{number:82,subnumber:1,group:"Lead",label:"Saw Wave"},{number:82,subnumber:2,group:"Lead",label:"Doctor Solo"},{number:82,subnumber:3,group:"Lead",label:"Natural Lead"},{number:82,subnumber:4,group:"Lead",label:"Sequenced Saw"},{number:83,subnumber:0,group:"Lead",label:"Synth Calliope"},{number:84,subnumber:0,group:"Lead",label:"Chiffer Lead"},{number:85,subnumber:0,group:"Lead",label:"Charang"},{number:85,subnumber:1,group:"Lead",label:"Wire Lead"},{number:86,subnumber:0,group:"Lead",label:"Solo Synth Vox"},{number:87,subnumber:0,group:"Lead",label:"5th Saw Wave"},{number:88,subnumber:0,group:"Lead",label:"Bass & Lead"},{number:88,subnumber:1,group:"Lead",label:"Delayed Lead"},{number:89,subnumber:0,group:"Synth Pad",label:"Fantasia Pad"},{number:90,subnumber:0,group:"Synth Pad",label:"Warm Pad"},{number:90,subnumber:1,group:"Synth Pad",label:"Sine Pad"},{number:91,subnumber:0,group:"Synth Pad",label:"Polysynth Pad"},{number:92,subnumber:0,group:"Synth Pad",label:"Space Voice Pad"},{number:92,subnumber:1,group:"Synth Pad",label:"Itopia"},{number:93,subnumber:0,group:"Synth Pad",label:"Bowed Glass Pad"},{number:94,subnumber:0,group:"Synth Pad",label:"Metal Pad"},{number:95,subnumber:0,group:"Synth Pad",label:"Halo Pad"},{number:96,subnumber:0,group:"Synth Pad",label:"Sweep Pad"},{number:97,subnumber:0,group:"Synth Effects",label:"Ice Rain"},{number:98,subnumber:0,group:"Synth Effects",label:"Soundtrack"},{number:99,subnumber:0,group:"Synth Effects",label:"Crystal"},{number:99,subnumber:1,group:"Synth Effects",label:"Synth Mallet"},{number:100,subnumber:0,group:"Synth Effects",label:"Atmosphere"},{number:101,subnumber:0,group:"Synth Effects",label:"Brightness"},{number:102,subnumber:0,group:"Synth Effects",label:"Goblin"},{number:103,subnumber:0,group:"Synth Effects",label:"Echo Drops"},{number:103,subnumber:1,group:"Synth Effects",label:"Echo Bell"},{number:103,subnumber:2,group:"Synth Effects",label:"Echo Pan"},{number:104,subnumber:0,group:"Synth Effects",label:"Star Theme"},{number:105,subnumber:0,group:"Ethnic",label:"Sitar"},{number:105,subnumber:1,group:"Ethnic",label:"Sitar 2"},{number:106,subnumber:0,group:"Ethnic",label:"Banjo"},{number:107,subnumber:0,group:"Ethnic",label:"Shamisen"},{number:108,subnumber:0,group:"Ethnic",label:"Koto"},{number:108,subnumber:1,group:"Ethnic",label:"Taisho Koto"},{number:109,subnumber:0,group:"Ethnic",label:"Kalimba"},{number:110,subnumber:0,group:"Ethnic",label:"Bagpipe"},{number:111,subnumber:0,group:"Ethnic",label:"Fiddle"},{number:112,subnumber:0,group:"Ethnic",label:"Shanai"},{number:113,subnumber:0,group:"Percussive",label:"Tinkle Bell"},{number:114,subnumber:0,group:"Percussive",label:"Agogo"},{number:115,subnumber:0,group:"Percussive",label:"Steel Drums"},{number:116,subnumber:0,group:"Percussive",label:"Woodblock"},{number:116,subnumber:1,group:"Percussive",label:"Castanets"},{number:117,subnumber:0,group:"Percussive",label:"Taiko Drum"},{number:117,subnumber:1,group:"Percussive",label:"Concert Bass Drum"},{number:118,subnumber:0,group:"Percussive",label:"Melodic Tom 1"},{number:118,subnumber:1,group:"Percussive",label:"Melodic Tom 2"},{number:119,subnumber:0,group:"Percussive",label:"Synth Drum"},{number:119,subnumber:1,group:"Percussive",label:"808 Tom"},{number:119,subnumber:2,group:"Percussive",label:"Electric Percussion"},{number:120,subnumber:0,group:"Percussive",label:"Reverse Cymbal"},{number:121,subnumber:0,group:"Sound Effects",label:"Guitar Fret Noise"},{number:121,subnumber:1,group:"Sound Effects",label:"Guitar Cut Noise"},{number:121,subnumber:2,group:"Sound Effects",label:"String Slap"},{number:122,subnumber:0,group:"Sound Effects",label:"Breath Noise"},{number:122,subnumber:1,group:"Sound Effects",label:"Flute Key Click"},{number:123,subnumber:0,group:"Sound Effects",label:"Seashore"},{number:123,subnumber:1,group:"Sound Effects",label:"Rain"},{number:123,subnumber:2,group:"Sound Effects",label:"Thunder"},{number:123,subnumber:3,group:"Sound Effects",label:"Wind"},{number:123,subnumber:4,group:"Sound Effects",label:"Stream"},{number:123,subnumber:5,group:"Sound Effects",label:"Bubble"},{number:124,subnumber:0,group:"Sound Effects",label:"Bird Tweet"},{number:124,subnumber:1,group:"Sound Effects",label:"Dog"},{number:124,subnumber:2,group:"Sound Effects",label:"Horse Gallop"},{number:124,subnumber:3,group:"Sound Effects",label:"Bird 2"},{number:125,subnumber:0,group:"Sound Effects",label:"Telephone 1"},{number:125,subnumber:1,group:"Sound Effects",label:"Telephone 2"},{number:125,subnumber:2,group:"Sound Effects",label:"Door Creaking"},{number:125,subnumber:3,group:"Sound Effects",label:"Door Closing"},{number:125,subnumber:4,group:"Sound Effects",label:"Scratch"},{number:125,subnumber:5,group:"Sound Effects",label:"Wind Chimes"},{number:126,subnumber:0,group:"Sound Effects",label:"Helicopter"},{number:126,subnumber:1,group:"Sound Effects",label:"Car Engine"},{number:126,subnumber:2,group:"Sound Effects",label:"Car Stop"},{number:126,subnumber:3,group:"Sound Effects",label:"Car Pass"},{number:126,subnumber:4,group:"Sound Effects",label:"Car Crash"},{number:126,subnumber:5,group:"Sound Effects",label:"Siren"},{number:126,subnumber:6,group:"Sound Effects",label:"Train"},{number:126,subnumber:7,group:"Sound Effects",label:"Jetplane"},{number:126,subnumber:8,group:"Sound Effects",label:"Starship"},{number:126,subnumber:9,group:"Sound Effects",label:"Burst Noise"},{number:127,subnumber:0,group:"Sound Effects",label:"Applause"},{number:127,subnumber:1,group:"Sound Effects",label:"Laughing"},{number:127,subnumber:2,group:"Sound Effects",label:"Screaming"},{number:127,subnumber:3,group:"Sound Effects",label:"Punch"},{number:127,subnumber:4,group:"Sound Effects",label:"Heart Beat"},{number:127,subnumber:5,group:"Sound Effects",label:"Footsteps"},{number:128,subnumber:0,group:"Sound Effects",label:"Gun Shot"},{number:128,subnumber:1,group:"Sound Effects",label:"Machine Gun"},{number:128,subnumber:2,group:"Sound Effects",label:"Lasergun"},{number:128,subnumber:3,group:"Sound Effects",label:"Explosion"}];for(const e of yA)Wy.set(e.pitch,e),Yy.set(e.label,e);for(const e of _A)pA.set(e.number,e);for(const e of wA){const t=`${e.number}-${e.subnumber}`;bA.set(t,e)}var vA={value:()=>{}};function Xy(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ha(n)}function Ha(e){this._=e}function MA(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ha.prototype=Xy.prototype={constructor:Ha,on:function(e,t){var n=this._,r=MA(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=xA(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=d0(n[i],e.name,t);else if(t==null)for(i in n)n[i]=d0(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ha(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function xA(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function d0(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=vA,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xf="http://www.w3.org/1999/xhtml";const m0={svg:"http://www.w3.org/2000/svg",xhtml:xf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cl(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),m0.hasOwnProperty(t)?{space:m0[t],local:e}:e}function PA(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xf&&t.documentElement.namespaceURI===xf?t.createElement(e):t.createElementNS(n,e)}}function SA(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Zy(e){var t=Cl(e);return(t.local?SA:PA)(t)}function AA(){}function Xc(e){return e==null?AA:function(){return this.querySelector(e)}}function kA(e){typeof e!="function"&&(e=Xc(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=new Array(a),l,u,f=0;f<a;++f)(l=o[f])&&(u=e.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new Vt(r,this._parents)}function Ky(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function EA(){return[]}function Jy(e){return e==null?EA:function(){return this.querySelectorAll(e)}}function CA(e){return function(){var t=e.apply(this,arguments);return t==null?[]:Ky(t)}}function TA(e){typeof e=="function"?e=CA(e):e=Jy(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a=t[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(r.push(e.call(l,l.__data__,u,a)),i.push(l));return new Vt(r,i)}function Qy(e){return function(){return this.matches(e)}}function e_(e){return function(t){return t.matches(e)}}var $A=Array.prototype.find;function DA(e){return function(){return $A.call(this.children,e)}}function NA(){return this.firstElementChild}function IA(e){return this.select(e==null?NA:DA(typeof e=="function"?e:e_(e)))}var LA=Array.prototype.filter;function RA(){return this.children}function FA(e){return function(){return LA.call(this.children,e)}}function BA(e){return this.selectAll(e==null?RA:FA(typeof e=="function"?e:e_(e)))}function OA(e){typeof e!="function"&&(e=Qy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Vt(r,this._parents)}function t_(e){return new Array(e.length)}function qA(){return new Vt(this._enter||this._groups.map(t_),this._parents)}function Ds(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Ds.prototype={constructor:Ds,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function GA(e){return function(){return e}}function UA(e,t,n,r,i,o){for(var a=0,s,l=t.length,u=o.length;a<u;++a)(s=t[a])?(s.__data__=o[a],r[a]=s):n[a]=new Ds(e,o[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function zA(e,t,n,r,i,o,a){var s,l,u=new Map,f=t.length,h=o.length,c=new Array(f),m;for(s=0;s<f;++s)(l=t[s])&&(c[s]=m=a.call(l,l.__data__,s,t)+"",u.has(m)?i[s]=l:u.set(m,l));for(s=0;s<h;++s)m=a.call(e,o[s],s,o)+"",(l=u.get(m))?(r[s]=l,l.__data__=o[s],u.delete(m)):n[s]=new Ds(e,o[s]);for(s=0;s<f;++s)(l=t[s])&&u.get(c[s])===l&&(i[s]=l)}function HA(e){return e.__data__}function VA(e,t){if(!arguments.length)return Array.from(this,HA);var n=t?zA:UA,r=this._parents,i=this._groups;typeof e!="function"&&(e=GA(e));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),u=0;u<o;++u){var f=r[u],h=i[u],c=h.length,m=Ky(e.call(f,f&&f.__data__,u,r)),d=m.length,p=s[u]=new Array(d),g=a[u]=new Array(d),_=l[u]=new Array(c);n(f,h,p,g,_,m,t);for(var b=0,v=0,y,x;b<d;++b)if(y=p[b]){for(b>=v&&(v=b+1);!(x=g[v])&&++v<d;);y._next=x||null}}return a=new Vt(a,r),a._enter=s,a._exit=l,a}function WA(){return new Vt(this._exit||this._groups.map(t_),this._parents)}function YA(e,t,n){var r=this.enter(),i=this,o=this.exit();return r=typeof e=="function"?e(r):r.append(e+""),t!=null&&(i=t(i)),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function jA(e){if(!(e instanceof Vt))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=t[s],u=n[s],f=l.length,h=a[s]=new Array(f),c,m=0;m<f;++m)(c=l[m]||u[m])&&(h[m]=c);for(;s<r;++s)a[s]=t[s];return new Vt(a,this._parents)}function XA(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ZA(e){e||(e=KA);function t(h,c){return h&&c?e(h.__data__,c.__data__):!h-!c}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),u,f=0;f<s;++f)(u=a[f])&&(l[f]=u);l.sort(t)}return new Vt(i,this._parents).order()}function KA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function JA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function QA(){return Array.from(this)}function ek(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function tk(){let e=0;for(const t of this)++e;return e}function nk(){return!this.node()}function rk(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&e.call(s,s.__data__,o,i);return this}function ik(e){return function(){this.removeAttribute(e)}}function ok(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ak(e,t){return function(){this.setAttribute(e,t)}}function sk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function lk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function uk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function fk(e,t){var n=Cl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?ok:ik:typeof t=="function"?n.local?uk:lk:n.local?sk:ak)(n,t))}function n_(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ck(e){return function(){this.style.removeProperty(e)}}function hk(e,t,n){return function(){this.style.setProperty(e,t,n)}}function dk(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function mk(e,t,n){return arguments.length>1?this.each((t==null?ck:typeof t=="function"?dk:hk)(e,t,n??"")):ki(this.node(),e)}function ki(e,t){return e.style.getPropertyValue(t)||n_(e).getComputedStyle(e,null).getPropertyValue(t)}function pk(e){return function(){delete this[e]}}function bk(e,t){return function(){this[e]=t}}function gk(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function yk(e,t){return arguments.length>1?this.each((t==null?pk:typeof t=="function"?gk:bk)(e,t)):this.node()[e]}function r_(e){return e.trim().split(/^|\s+/)}function Zc(e){return e.classList||new i_(e)}function i_(e){this._node=e,this._names=r_(e.getAttribute("class")||"")}i_.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function o_(e,t){for(var n=Zc(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function a_(e,t){for(var n=Zc(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function _k(e){return function(){o_(this,e)}}function wk(e){return function(){a_(this,e)}}function vk(e,t){return function(){(t.apply(this,arguments)?o_:a_)(this,e)}}function Mk(e,t){var n=r_(e+"");if(arguments.length<2){for(var r=Zc(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?vk:t?_k:wk)(n,t))}function xk(){this.textContent=""}function Pk(e){return function(){this.textContent=e}}function Sk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ak(e){return arguments.length?this.each(e==null?xk:(typeof e=="function"?Sk:Pk)(e)):this.node().textContent}function kk(){this.innerHTML=""}function Ek(e){return function(){this.innerHTML=e}}function Ck(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Tk(e){return arguments.length?this.each(e==null?kk:(typeof e=="function"?Ck:Ek)(e)):this.node().innerHTML}function $k(){this.nextSibling&&this.parentNode.appendChild(this)}function Dk(){return this.each($k)}function Nk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ik(){return this.each(Nk)}function Lk(e){var t=typeof e=="function"?e:Zy(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Rk(){return null}function Fk(e,t){var n=typeof e=="function"?e:Zy(e),r=t==null?Rk:typeof t=="function"?t:Xc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Bk(){var e=this.parentNode;e&&e.removeChild(this)}function Ok(){return this.each(Bk)}function qk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Uk(e){return this.select(e?Gk:qk)}function zk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hk(e){return function(t){e.call(this,t,this.__data__)}}function Vk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wk(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,o;n<i;++n)o=t[n],(!e.type||o.type===e.type)&&o.name===e.name?this.removeEventListener(o.type,o.listener,o.options):t[++r]=o;++r?t.length=r:delete this.__on}}}function Yk(e,t,n){return function(){var r=this.__on,i,o=Hk(t);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=t;return}}this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function jk(e,t,n){var r=Vk(e+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<o;++i)if((a=r[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=t?Yk:Wk,i=0;i<o;++i)this.each(s(r[i],t,n));return this}function s_(e,t,n){var r=n_(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Xk(e,t){return function(){return s_(this,e,t)}}function Zk(e,t){return function(){return s_(this,e,t.apply(this,arguments))}}function Kk(e,t){return this.each((typeof t=="function"?Zk:Xk)(e,t))}function*Jk(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Qk=[null];function Vt(e,t){this._groups=e,this._parents=t}function ua(){return new Vt([[document.documentElement]],Qk)}function eE(){return this}Vt.prototype=ua.prototype={constructor:Vt,select:kA,selectAll:TA,selectChild:IA,selectChildren:BA,filter:OA,data:VA,enter:qA,exit:WA,join:YA,merge:jA,selection:eE,order:XA,sort:ZA,call:JA,nodes:QA,node:ek,size:tk,empty:nk,each:rk,attr:fk,style:mk,property:yk,classed:Mk,text:Ak,html:Tk,raise:Dk,lower:Ik,append:Lk,insert:Fk,remove:Ok,clone:Uk,datum:zk,on:jk,dispatch:Kk,[Symbol.iterator]:Jk};function Kc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function l_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function fa(){}var $o=.7,Ns=1/$o,ui="\\s*([+-]?\\d+)\\s*",Do="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tE=/^#([0-9a-f]{3,8})$/,nE=new RegExp("^rgb\\("+[ui,ui,ui]+"\\)$"),rE=new RegExp("^rgb\\("+[_n,_n,_n]+"\\)$"),iE=new RegExp("^rgba\\("+[ui,ui,ui,Do]+"\\)$"),oE=new RegExp("^rgba\\("+[_n,_n,_n,Do]+"\\)$"),aE=new RegExp("^hsl\\("+[Do,_n,_n]+"\\)$"),sE=new RegExp("^hsla\\("+[Do,_n,_n,Do]+"\\)$"),p0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kc(fa,No,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:b0,formatHex:b0,formatHsl:lE,formatRgb:g0,toString:g0});function b0(){return this.rgb().formatHex()}function lE(){return u_(this).formatHsl()}function g0(){return this.rgb().formatRgb()}function No(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tE.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?y0(t):n===3?new Ct(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Da(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Da(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nE.exec(e))?new Ct(t[1],t[2],t[3],1):(t=rE.exec(e))?new Ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iE.exec(e))?Da(t[1],t[2],t[3],t[4]):(t=oE.exec(e))?Da(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=aE.exec(e))?v0(t[1],t[2]/100,t[3]/100,1):(t=sE.exec(e))?v0(t[1],t[2]/100,t[3]/100,t[4]):p0.hasOwnProperty(e)?y0(p0[e]):e==="transparent"?new Ct(NaN,NaN,NaN,0):null}function y0(e){return new Ct(e>>16&255,e>>8&255,e&255,1)}function Da(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ct(e,t,n,r)}function uE(e){return e instanceof fa||(e=No(e)),e?(e=e.rgb(),new Ct(e.r,e.g,e.b,e.opacity)):new Ct}function Pf(e,t,n,r){return arguments.length===1?uE(e):new Ct(e,t,n,r??1)}function Ct(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Kc(Ct,Pf,l_(fa,{brighter:function(e){return e=e==null?Ns:Math.pow(Ns,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?$o:Math.pow($o,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_0,formatHex:_0,formatRgb:w0,toString:w0}));function _0(){return"#"+wu(this.r)+wu(this.g)+wu(this.b)}function w0(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function wu(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function v0(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new dn(e,t,n,r)}function u_(e){if(e instanceof dn)return new dn(e.h,e.s,e.l,e.opacity);if(e instanceof fa||(e=No(e)),!e)return new dn;if(e instanceof dn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new dn(a,s,l,e.opacity)}function f_(e,t,n,r){return arguments.length===1?u_(e):new dn(e,t,n,r??1)}function dn(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Kc(dn,f_,l_(fa,{brighter:function(e){return e=e==null?Ns:Math.pow(Ns,e),new dn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?$o:Math.pow($o,e),new dn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Ct(vu(e>=240?e-240:e+120,i,r),vu(e,i,r),vu(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function vu(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const c_=e=>()=>e;function fE(e,t){return function(n){return e+n*t}}function cE(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function hE(e){return(e=+e)==1?h_:function(t,n){return n-t?cE(t,n,e):c_(isNaN(t)?n:t)}}function h_(e,t){var n=t-e;return n?fE(e,n):c_(isNaN(e)?t:e)}const Sf=function e(t){var n=hE(t);function r(i,o){var a=n((i=Pf(i)).r,(o=Pf(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=h_(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r}(1);function er(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Af=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mu=new RegExp(Af.source,"g");function dE(e){return function(){return e}}function mE(e){return function(t){return e(t)+""}}function pE(e,t){var n=Af.lastIndex=Mu.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Af.exec(e))&&(i=Mu.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:er(r,i)})),n=Mu.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?mE(l[0].x):dE(t):(t=l.length,function(u){for(var f=0,h;f<t;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}var M0=180/Math.PI,kf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function d_(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*M0,skewX:Math.atan(l)*M0,scaleX:a,scaleY:s}}var Na;function bE(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kf:d_(t.a,t.b,t.c,t.d,t.e,t.f)}function gE(e){return e==null||(Na||(Na=document.createElementNS("http://www.w3.org/2000/svg","g")),Na.setAttribute("transform",e),!(e=Na.transform.baseVal.consolidate()))?kf:(e=e.matrix,d_(e.a,e.b,e.c,e.d,e.e,e.f))}function m_(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,h,c,m,d){if(u!==h||f!==c){var p=m.push("translate(",null,t,null,n);d.push({i:p-4,x:er(u,h)},{i:p-2,x:er(f,c)})}else(h||c)&&m.push("translate("+h+t+c+n)}function a(u,f,h,c){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),c.push({i:h.push(i(h)+"rotate(",null,r)-2,x:er(u,f)})):f&&h.push(i(h)+"rotate("+f+r)}function s(u,f,h,c){u!==f?c.push({i:h.push(i(h)+"skewX(",null,r)-2,x:er(u,f)}):f&&h.push(i(h)+"skewX("+f+r)}function l(u,f,h,c,m,d){if(u!==h||f!==c){var p=m.push(i(m)+"scale(",null,",",null,")");d.push({i:p-4,x:er(u,h)},{i:p-2,x:er(f,c)})}else(h!==1||c!==1)&&m.push(i(m)+"scale("+h+","+c+")")}return function(u,f){var h=[],c=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,h,c),a(u.rotate,f.rotate,h,c),s(u.skewX,f.skewX,h,c),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,c),u=f=null,function(m){for(var d=-1,p=c.length,g;++d<p;)h[(g=c[d]).i]=g.x(m);return h.join("")}}}var yE=m_(bE,"px, ","px)","deg)"),_E=m_(gE,", ",")",")"),Ei=0,no=0,Hi=0,p_=1e3,Is,ro,Ls=0,Fr=0,Tl=0,Io=typeof performance=="object"&&performance.now?performance:Date,b_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Jc(){return Fr||(b_(wE),Fr=Io.now()+Tl)}function wE(){Fr=0}function Rs(){this._call=this._time=this._next=null}Rs.prototype=g_.prototype={constructor:Rs,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Jc():+n)+(t==null?0:+t),!this._next&&ro!==this&&(ro?ro._next=this:Is=this,ro=this),this._call=e,this._time=n,Ef()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ef())}};function g_(e,t,n){var r=new Rs;return r.restart(e,t,n),r}function vE(){Jc(),++Ei;for(var e=Is,t;e;)(t=Fr-e._time)>=0&&e._call.call(null,t),e=e._next;--Ei}function x0(){Fr=(Ls=Io.now())+Tl,Ei=no=0;try{vE()}finally{Ei=0,xE(),Fr=0}}function ME(){var e=Io.now(),t=e-Ls;t>p_&&(Tl-=t,Ls=e)}function xE(){for(var e,t=Is,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Is=n);ro=e,Ef(r)}function Ef(e){if(!Ei){no&&(no=clearTimeout(no));var t=e-Fr;t>24?(e<1/0&&(no=setTimeout(x0,e-Io.now()-Tl)),Hi&&(Hi=clearInterval(Hi))):(Hi||(Ls=Io.now(),Hi=setInterval(ME,p_)),Ei=1,b_(x0))}}function P0(e,t,n){var r=new Rs;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var PE=Xy("start","end","cancel","interrupt"),SE=[],y_=0,S0=1,Cf=2,Va=3,A0=4,Tf=5,Wa=6;function $l(e,t,n,r,i,o){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;AE(e,n,{name:t,index:r,group:i,on:PE,tween:SE,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:y_})}function Qc(e,t){var n=sn(e,t);if(n.state>y_)throw new Error("too late; already scheduled");return n}function An(e,t){var n=sn(e,t);if(n.state>Va)throw new Error("too late; already running");return n}function sn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function AE(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=g_(o,0,n.time);function o(u){n.state=S0,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,h,c,m;if(n.state!==S0)return l();for(f in r)if(m=r[f],m.name===n.name){if(m.state===Va)return P0(a);m.state===A0?(m.state=Wa,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[f]):+f<t&&(m.state=Wa,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[f])}if(P0(function(){n.state===Va&&(n.state=A0,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Cf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Cf){for(n.state=Va,i=new Array(c=n.tween.length),f=0,h=-1;f<c;++f)(m=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=m);i.length=h+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Tf,1),h=-1,c=i.length;++h<c;)i[h].call(e,f);n.state===Tf&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Wa,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function kE(e,t){var n=e.__transition,r,i,o=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((r=n[a]).name!==t){o=!1;continue}i=r.state>Cf&&r.state<Tf,r.state=Wa,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[a]}o&&delete e.__transition}}function EE(e){return this.each(function(){kE(this,e)})}function CE(e,t){var n,r;return function(){var i=An(this,e),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===t){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function TE(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=An(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}o.tween=i}}function $E(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=sn(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((t==null?CE:TE)(n,e,t))}function eh(e,t,n){var r=e._id;return e.each(function(){var i=An(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return sn(i,r).value[t]}}function __(e,t){var n;return(typeof t=="number"?er:t instanceof No?Sf:(n=No(t))?(t=n,Sf):pE)(e,t)}function DE(e){return function(){this.removeAttribute(e)}}function NE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function IE(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttribute(e);return a===i?null:a===r?o:o=t(r=a,n)}}function LE(e,t,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===r?o:o=t(r=a,n)}}function RE(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function FE(e,t,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s)))}}function BE(e,t){var n=Cl(e),r=n==="transform"?_E:__;return this.attrTween(e,typeof t=="function"?(n.local?FE:RE)(n,r,eh(this,"attr."+e,t)):t==null?(n.local?NE:DE)(n):(n.local?LE:IE)(n,r,t))}function OE(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function qE(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function GE(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&qE(e,o)),n}return i._value=t,i}function UE(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&OE(e,o)),n}return i._value=t,i}function zE(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Cl(e);return this.tween(n,(r.local?GE:UE)(r,t))}function HE(e,t){return function(){Qc(this,e).delay=+t.apply(this,arguments)}}function VE(e,t){return t=+t,function(){Qc(this,e).delay=t}}function WE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?HE:VE)(t,e)):sn(this.node(),t).delay}function YE(e,t){return function(){An(this,e).duration=+t.apply(this,arguments)}}function jE(e,t){return t=+t,function(){An(this,e).duration=t}}function XE(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?YE:jE)(t,e)):sn(this.node(),t).duration}function ZE(e,t){if(typeof t!="function")throw new Error;return function(){An(this,e).ease=t}}function KE(e){var t=this._id;return arguments.length?this.each(ZE(t,e)):sn(this.node(),t).ease}function JE(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;An(this,e).ease=n}}function QE(e){if(typeof e!="function")throw new Error;return this.each(JE(this._id,e))}function eC(e){typeof e!="function"&&(e=Qy(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o=t[i],a=o.length,s=r[i]=[],l,u=0;u<a;++u)(l=o[u])&&e.call(l,l.__data__,u,o)&&s.push(l);return new Wn(r,this._parents,this._name,this._id)}function tC(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=t[s],u=n[s],f=l.length,h=a[s]=new Array(f),c,m=0;m<f;++m)(c=l[m]||u[m])&&(h[m]=c);for(;s<r;++s)a[s]=t[s];return new Wn(a,this._parents,this._name,this._id)}function nC(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function rC(e,t,n){var r,i,o=nC(t)?Qc:An;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}function iC(e,t){var n=this._id;return arguments.length<2?sn(this.node(),n).on.on(e):this.each(rC(n,e,t))}function oC(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function aC(){return this.on("end.remove",oC(this._id))}function sC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xc(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,u=o[a]=new Array(l),f,h,c=0;c<l;++c)(f=s[c])&&(h=e.call(f,f.__data__,c,s))&&("__data__"in f&&(h.__data__=f.__data__),u[c]=h,$l(u[c],t,n,c,u,sn(f,n)));return new Wn(o,this._parents,t,n)}function lC(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Jy(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var c=e.call(f,f.__data__,h,l),m,d=sn(f,n),p=0,g=c.length;p<g;++p)(m=c[p])&&$l(m,t,n,p,c,d);o.push(c),a.push(f)}return new Wn(o,a,t,n)}var uC=ua.prototype.constructor;function fC(){return new uC(this._groups,this._parents)}function cC(e,t){var n,r,i;return function(){var o=ki(this,e),a=(this.style.removeProperty(e),ki(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}function w_(e){return function(){this.style.removeProperty(e)}}function hC(e,t,n){var r,i=n+"",o;return function(){var a=ki(this,e);return a===i?null:a===r?o:o=t(r=a,n)}}function dC(e,t,n){var r,i,o;return function(){var a=ki(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),ki(this,e))),a===l?null:a===r&&l===i?o:(i=l,o=t(r=a,s))}}function mC(e,t){var n,r,i,o="style."+t,a="end."+o,s;return function(){var l=An(this,e),u=l.on,f=l.value[o]==null?s||(s=w_(t)):void 0;(u!==n||i!==f)&&(r=(n=u).copy()).on(a,i=f),l.on=r}}function pC(e,t,n){var r=(e+="")=="transform"?yE:__;return t==null?this.styleTween(e,cC(e,r)).on("end.style."+e,w_(e)):typeof t=="function"?this.styleTween(e,dC(e,r,eh(this,"style."+e,t))).each(mC(this._id,e)):this.styleTween(e,hC(e,r,t),n).on("end.style."+e,null)}function bC(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function gC(e,t,n){var r,i;function o(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&bC(e,a,n)),r}return o._value=t,o}function yC(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,gC(e,t,n??""))}function _C(e){return function(){this.textContent=e}}function wC(e){return function(){var t=e(this);this.textContent=t??""}}function vC(e){return this.tween("text",typeof e=="function"?wC(eh(this,"text",e)):_C(e==null?"":e+""))}function MC(e){return function(t){this.textContent=e.call(this,t)}}function xC(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&MC(i)),t}return r._value=e,r}function PC(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,xC(e))}function SC(){for(var e=this._name,t=this._id,n=v_(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var f=sn(l,t);$l(l,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Wn(r,this._parents,e,n)}function AC(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var u=An(this,r),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&o()})}var kC=0;function Wn(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function v_(){return++kC}var gr=ua.prototype;Wn.prototype={constructor:Wn,select:sC,selectAll:lC,filter:eC,merge:tC,selection:fC,transition:SC,call:gr.call,nodes:gr.nodes,node:gr.node,size:gr.size,empty:gr.empty,each:gr.each,on:iC,attr:BE,attrTween:zE,style:pC,styleTween:yC,text:vC,textTween:PC,remove:aC,tween:$E,delay:WE,duration:XE,ease:KE,easeVarying:QE,end:AC,[Symbol.iterator]:gr[Symbol.iterator]};function EC(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var CC={time:null,delay:0,duration:250,ease:EC};function TC(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function $C(e){var t,n;e instanceof Wn?(t=e._id,e=e._name):(t=v_(),(n=CC).time=Jc(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,u=0;u<s;++u)(l=a[u])&&$l(l,e,t,u,a,n||TC(l,t));return new Wn(r,this._parents,e,t)}ua.prototype.interrupt=EE;ua.prototype.transition=$C;function io(e,t,n){this.k=e,this.x=t,this.y=n}io.prototype={constructor:io,scale:function(e){return e===1?this:new io(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new io(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};io.prototype;var DC={exports:{}};(function(e){(function(){const t=function(r){let i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/;if(r=r.replace(/^.*?base64,/,""),r=String(r).replace(/[\t\n\f\r ]+/g,""),!o.test(r))throw new TypeError("Failed to execute _atob() : The string to be decoded is not correctly encoded.");r+="==".slice(2-(r.length&3));let a,s="",l,u,f=0;for(;f<r.length;)a=i.indexOf(r.charAt(f++))<<18|i.indexOf(r.charAt(f++))<<12|(l=i.indexOf(r.charAt(f++)))<<6|(u=i.indexOf(r.charAt(f++))),s+=l===64?String.fromCharCode(a>>16&255):u===64?String.fromCharCode(a>>16&255,a>>8&255):String.fromCharCode(a>>16&255,a>>8&255,a&255);return s},n={debug:!1,parse:function(r,i){if(r instanceof Uint8Array)return n.Uint8(r);if(typeof r=="string")return n.Base64(r);if(r instanceof HTMLElement&&r.type==="file")return n.addListener(r,i);throw new Error("MidiParser.parse() : Invalid input provided")},addListener:function(r,i){if(!File||!FileReader)throw new Error("The File|FileReader APIs are not supported in this browser. Use instead MidiParser.Base64() or MidiParser.Uint8()");if(r===void 0||!(r instanceof HTMLElement)||r.tagName!=="INPUT"||r.type.toLowerCase()!=="file")return console.warn("MidiParser.addListener() : Provided element is not a valid FILE INPUT element"),!1;i=i||function(){},r.addEventListener("change",function(o){if(!o.target.files.length)return!1;console.log("MidiParser.addListener() : File detected in INPUT ELEMENT processing data..");let a=new FileReader;a.readAsArrayBuffer(o.target.files[0]),a.onload=function(s){i(n.Uint8(new Uint8Array(s.target.result)))}})},Base64:function(r){r=String(r);let i=t(r),o=i.length,a=new Uint8Array(new ArrayBuffer(o));for(let s=0;s<o;s++)a[s]=i.charCodeAt(s);return n.Uint8(a)},Uint8:function(r){let i={data:null,pointer:0,movePointer:function(l){return this.pointer+=l,this.pointer},readInt:function(l){if(l=Math.min(l,this.data.byteLength-this.pointer),l<1)return-1;let u=0;if(l>1)for(let f=1;f<=l-1;f++)u+=this.data.getUint8(this.pointer)*Math.pow(256,l-f),this.pointer++;return u+=this.data.getUint8(this.pointer),this.pointer++,u},readStr:function(l){let u="";for(let f=1;f<=l;f++)u+=String.fromCharCode(this.readInt(1));return u},readIntVLV:function(){let l=0;if(this.pointer>=this.data.byteLength)return-1;if(this.data.getUint8(this.pointer)<128)l=this.readInt(1);else{let u=[];for(;this.data.getUint8(this.pointer)>=128;)u.push(this.readInt(1)-128);let f=this.readInt(1);for(let h=1;h<=u.length;h++)l+=u[u.length-h]*Math.pow(128,h);l+=f}return l}};if(i.data=new DataView(r.buffer,r.byteOffset,r.byteLength),i.readInt(4)!==1297377380)return console.warn("Header validation failed (not MIDI standard or file corrupt.)"),!1;i.readInt(4);let o={};o.formatType=i.readInt(2),o.tracks=i.readInt(2),o.track=[];let a=i.readInt(1),s=i.readInt(1);a>=128?(o.timeDivision=[],o.timeDivision[0]=a-128,o.timeDivision[1]=s):o.timeDivision=a*256+s;for(let l=1;l<=o.tracks;l++){o.track[l-1]={event:[]};let u=i.readInt(4);if(u===-1)break;if(u!==1297379947)return!1;i.readInt(4);let f=0,h=!1,c,m;for(;!h&&(f++,o.track[l-1].event[f-1]={},o.track[l-1].event[f-1].deltaTime=i.readIntVLV(),c=i.readInt(1),c!==-1);)if(c>=128?m=c:(c=m,i.movePointer(-1)),c===255){o.track[l-1].event[f-1].type=255,o.track[l-1].event[f-1].metaType=i.readInt(1);let d=i.readIntVLV();switch(o.track[l-1].event[f-1].metaType){case 47:case-1:h=!0;break;case 1:case 2:case 3:case 4:case 5:case 7:case 6:o.track[l-1].event[f-1].data=i.readStr(d);break;case 33:case 89:case 81:o.track[l-1].event[f-1].data=i.readInt(d);break;case 84:o.track[l-1].event[f-1].data=[],o.track[l-1].event[f-1].data[0]=i.readInt(1),o.track[l-1].event[f-1].data[1]=i.readInt(1),o.track[l-1].event[f-1].data[2]=i.readInt(1),o.track[l-1].event[f-1].data[3]=i.readInt(1),o.track[l-1].event[f-1].data[4]=i.readInt(1);break;case 88:o.track[l-1].event[f-1].data=[],o.track[l-1].event[f-1].data[0]=i.readInt(1),o.track[l-1].event[f-1].data[1]=i.readInt(1),o.track[l-1].event[f-1].data[2]=i.readInt(1),o.track[l-1].event[f-1].data[3]=i.readInt(1);break;default:this.customInterpreter!==null&&(o.track[l-1].event[f-1].data=this.customInterpreter(o.track[l-1].event[f-1].metaType,i,d)),(this.customInterpreter===null||o.track[l-1].event[f-1].data===!1)&&(i.readInt(d),o.track[l-1].event[f-1].data=i.readInt(d),this.debug&&console.info("Unimplemented 0xFF meta event! data block readed as Integer"))}}else switch(c=c.toString(16).split(""),c[1]||c.unshift("0"),o.track[l-1].event[f-1].type=parseInt(c[0],16),o.track[l-1].event[f-1].channel=parseInt(c[1],16),o.track[l-1].event[f-1].type){case 15:{if(this.customInterpreter!==null&&(o.track[l-1].event[f-1].data=this.customInterpreter(o.track[l-1].event[f-1].type,i,!1)),this.customInterpreter===null||o.track[l-1].event[f-1].data===!1){let d=i.readIntVLV();o.track[l-1].event[f-1].data=i.readInt(d),this.debug&&console.info("Unimplemented 0xF exclusive events! data block readed as Integer")}break}case 10:case 11:case 14:case 8:case 9:o.track[l-1].event[f-1].data=[],o.track[l-1].event[f-1].data[0]=i.readInt(1),o.track[l-1].event[f-1].data[1]=i.readInt(1);break;case 12:case 13:o.track[l-1].event[f-1].data=i.readInt(1);break;case-1:h=!0;break;default:if(this.customInterpreter!==null&&(o.track[l-1].event[f-1].data=this.customInterpreter(o.track[l-1].event[f-1].metaType,i,!1)),this.customInterpreter===null||o.track[l-1].event[f-1].data===!1)return console.log("Unknown EVENT detected... reading cancelled!"),!1}}return o},customInterpreter:null};e.exports=n})()})(DC);function Lo(e){return 1/(e/60)}const M_=[],NC=[2,1,1/2,1/4,1/8,1/16,1/32,1/64];for(const e of NC)for(let t=0;t<4;t++){let n=e,r=e;for(let i=0;i<t;i++)r/=2,n+=r;M_.push({type:e,dots:t,duration:n})}M_.sort((e,t)=>e.duration-t.duration);class ge{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>jy(r).pitch),this.stringCount=n.length}}new ge("E stand.",["E2","A2","D3","G3","B3","E4"]),new ge("Drop D",["D2","A2","D3","G3","B3","E4"]),new ge("Drop C",["C2","G2","C3","F3","A3","D4"]),new ge("1/2 down",["D#2","G#2","C#3","F#3","A#3","D#4"]),new ge("1 down",["D2","G2","C3","F3","A3","D4"]),new ge("1 1/2 down",["C#2","F#2","B2","E3","G#3","C#4"]),new ge("2 down",["C2","F2","A#2","D#3","G3","C4"]),new ge("DADGAG",["D2","A2","D3","G3","A3","D4"]),new ge("B stand.",["B1","E2","A2","D3","G3","B3","E4"]),new ge("Drop A",["A1","E2","A2","D3","G3","B3","E4"]),new ge("1/2 down",["A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ge("1 down",["A1","D2","G2","C3","F3","A3","D4"]),new ge("1 1/2 down",["G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ge("2 down",["G1","C2","F2","A#2","D#3","G3","C4"]),new ge("F# stand.",["F#1","B1","E2","A2","D3","G3","B3","E4"]),new ge("Drop E",["E1","B1","E2","A2","D3","G3","B3","E4"]),new ge("1/2 down",["F1","A#1","D#2","G#2","C#3","F#3","A#3","D#4"]),new ge("1 down",["E1","A1","D2","G2","C3","F3","A3","D4"]),new ge("1 1/2 down",["D#1","G#1","C#2","F#2","B2","E3","G#3","C#4"]),new ge("2 down",["D1","G1","C2","F2","A#2","D#3","G3","C4"]),new ge("E stand.",["E1","A1","D2","G2"]),new ge("Drop D",["D1","A1","D2","G2"]),new ge("1/2 down",["D#1","G#1","C#2","F#2"]),new ge("1 down",["D1","G1","C2","F2"]),new ge("1 1/2 down",["C#1","F#1","B1","E2"]),new ge("2 down",["C1","F1","A#1","D#2"]),new ge("B stand.",["B0","E1","A1","D2","G2"]),new ge("Drop A",["A0","D1","A1","D2","G2"]),new ge("1/2 down",["A#0","D#1","G#1","C#2","F#2"]),new ge("1 down",["A0","D1","G1","C2","F2"]),new ge("1 1/2 down",["G#0","C#1","F#1","B1","E2"]),new ge("2 down",["G0","C1","F1","A#1","D#2"]),new ge("F# stand.",["F#0","B0","E1","A1","D2","G2"]),new ge("Drop E",["E0","A0","D1","A1","D2","G2"]),new ge("1/2 down",["F0","A#0","D#1","G#1","C#2","F#2"]),new ge("1 down",["E1","A0","D1","G1","C2","F2"]),new ge("1 1/2 down",["D#0","G#0","C#1","F#1","B1","E2"]),new ge("2 down",["D0","G0","C1","F1","A#1","D#2"]),new ge("Hawaii",["G4","C4","E4","A4"]),new ge("Low G",["G3","C4","E4","A4"]),new ge("D-tuning",["A4","D4","F#4","B4"]),new ge("Canadian",["A3","D4","F#4","B4"]),new ge("Bariton",["D3","G3","B3","E4"]);function x_(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function P_(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var S_=[0,2,4,-1,1,3,5],A_=S_.map(e=>Math.floor(e*7/12));function k_(e){const{step:t,alt:n,oct:r,dir:i=1}=e,o=S_[t]+7*n;if(r===void 0)return[i*o];const a=r-A_[t]-4*n;return[i*o,i*a]}var IC=[3,0,4,1,5,2,6];function LC(e){const[t,n,r]=e,i=IC[RC(t)],o=Math.floor((t+1)/7);if(n===void 0)return{step:i,alt:o,dir:r};const a=n+4*o+A_[i];return{step:i,alt:o,oct:a,dir:r}}function RC(e){const t=(e+1)%7;return t<0?7+t:t}var k0=(e,t)=>Array(Math.abs(t)+1).join(e),$f=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),FC="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",BC="(AA|A|P|M|m|d|dd)([-+]?\\d+)",OC=new RegExp("^"+FC+"|"+BC+"$");function qC(e){const t=OC.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var E0={};function Fs(e){return typeof e=="string"?E0[e]||(E0[e]=GC(e)):P_(e)?Fs(zC(e)):x_(e)?Fs(e.name):$f}var C0=[0,2,4,5,7,9,11],E_="PMMPPMM";function GC(e){const t=qC(e);if(t[0]==="")return $f;const n=+t[0],r=t[1],i=(Math.abs(n)-1)%7,o=E_[i];if(o==="M"&&r==="P")return $f;const a=o==="M"?"majorable":"perfectable",s=""+n+r,l=n<0?-1:1,u=n===8||n===-8?n:l*(i+1),f=UC(a,r),h=Math.floor((Math.abs(n)-1)/7),c=l*(C0[i]+f+12*h),m=(l*(C0[i]+f)%12+12)%12,d=k_({step:i,alt:f,oct:h,dir:l});return{empty:!1,name:s,num:n,q:r,step:i,alt:f,dir:l,type:a,simple:u,semitones:c,chroma:m,coord:d,oct:h}}function UC(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function zC(e){const{step:t,alt:n,oct:r=0,dir:i}=e;if(!i)return"";const o=t+1+7*r,a=o===0?t+1:o,s=i<0?"-":"",l=E_[t]==="M"?"majorable":"perfectable";return s+a+HC(l,n)}function HC(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?k0("A",t):k0("d",e==="perfectable"?t:t+1)}var T0=(e,t)=>Array(Math.abs(t)+1).join(e),C_=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),$0=new Map,VC=e=>"CDEFGAB".charAt(e),WC=e=>e<0?T0("b",-e):T0("#",e),YC=e=>e[0]==="b"?-e.length:e.length;function Ro(e){const t=JSON.stringify(e),n=$0.get(t);if(n)return n;const r=typeof e=="string"?JC(e):P_(e)?Ro(QC(e)):x_(e)?Ro(e.name):C_;return $0.set(t,r),r}var jC=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function XC(e){const t=jC.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function ZC(e){return Ro(LC(e))}var KC=(e,t)=>(e%t+t)%t,xu=[0,2,4,5,7,9,11];function JC(e){const t=XC(e);if(t[0]===""||t[3]!=="")return C_;const n=t[0],r=t[1],i=t[2],o=(n.charCodeAt(0)+3)%7,a=YC(r),s=i.length?+i:void 0,l=k_({step:o,alt:a,oct:s}),u=n+r+i,f=n+r,h=(xu[o]+a+120)%12,c=s===void 0?KC(xu[o]+a,12)-12*99:xu[o]+a+12*(s+1),m=c>=0&&c<=127?c:null,d=s===void 0?null:Math.pow(2,(c-69)/12)*440;return{empty:!1,acc:r,alt:a,chroma:h,coord:l,freq:d,height:c,letter:n,midi:m,name:u,oct:s,pc:f,step:o}}function QC(e){const{step:t,alt:n,oct:r}=e,i=VC(t);if(!i)return"";const o=i+WC(n);return r||r===0?o+r:o}function eT(e,t){const n=Ro(e),r=Array.isArray(t)?t:Fs(t).coord;if(n.empty||!r||r.length<2)return"";const i=n.coord,o=i.length===1?[i[0]+r[0]]:[i[0]+r[0],i[1]+r[1]];return ZC(o).name}function T_(e,t){const n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var fr={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},$_=e=>Number(e).toString(2).padStart(12,"0"),D0=e=>parseInt(e,2),tT=/^[01]{12}$/;function D_(e){return tT.test(e)}var nT=e=>typeof e=="number"&&e>=0&&e<=4095,rT=e=>e&&D_(e.chroma),N0={[fr.chroma]:fr};function th(e){const t=D_(e)?e:nT(e)?$_(e):Array.isArray(e)?lT(e):rT(e)?e.chroma:fr.chroma;return N0[t]=N0[t]||sT(t)}var iT=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function oT(e){const t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(iT[n]);return t}function aT(e){const t=e.split("");return t.map((n,r)=>T_(r,t).join(""))}function sT(e){const t=D0(e),n=aT(e).map(D0).filter(o=>o>=2048).sort()[0],r=$_(n),i=oT(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:i}}function lT(e){if(e.length===0)return fr.chroma;let t;const n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=Ro(e[r]),t.empty&&(t=Fs(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var uT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],fT=uT;({...fr});var N_=[],Ya={};function cT(e,t,n){const r=dT(e),i={...th(e),name:n||"",quality:r,intervals:e,aliases:t};N_.push(i),i.name&&(Ya[i.name]=i),Ya[i.setNum]=i,Ya[i.chroma]=i,i.aliases.forEach(o=>hT(i,o))}function hT(e,t){Ya[t]=e}function dT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}fT.forEach(([e,t,n])=>cT(e.split(" "),n.split(" "),t));N_.sort((e,t)=>e.setNum-t.setNum);var mT=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7  ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 9 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 #4 #11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -7 m -^7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim  o"],["1P 3m 5d 7d","diminished seventh","dim7 7 o7"],["1P 3m 5d 7m","half-diminished","m7b5  -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 9#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],pT=mT;({...fr});var I_=[],ja={};function bT(e,t,n){const r=yT(e),i={...th(e),name:n||"",quality:r,intervals:e,aliases:t};I_.push(i),i.name&&(ja[i.name]=i),ja[i.setNum]=i,ja[i.chroma]=i,i.aliases.forEach(o=>gT(i,o))}function gT(e,t){ja[t]=e}function yT(e){const t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}pT.forEach(([e,t,n])=>bT(e.split(" "),n.split(" "),t));I_.sort((e,t)=>e.setNum-t.setNum);var _T=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],wT=_T,vT={...fr,intervals:[],aliases:[]},co={};function MT(e){return co[e]||vT}function xT(e,t,n=[]){const r={...th(e),name:t,intervals:e,aliases:n};return co[r.name]=r,co[r.setNum]=r,co[r.chroma]=r,r.aliases.forEach(i=>PT(r,i)),r}function PT(e,t){co[t]=e}wT.forEach(([e,t,...n])=>xT(e.split(" "),t,n));var nh=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],I0={...fr,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},ST=nh.map(AT),Df={};ST.forEach(e=>{Df[e.name]=e,e.aliases.forEach(t=>{Df[t]=e})});function L_(e){return typeof e=="string"?Df[e.toLowerCase()]||I0:e&&e.name?L_(e.name):I0}function AT(e){const[t,n,r,i,o,a,s]=e,l=s?[s]:[],u=Number(n).toString(2);return{empty:!1,intervals:MT(i).intervals,modeNum:t,chroma:u,normalized:u,name:i,setNum:n,alt:r,triad:o,seventh:a,aliases:l}}function R_(e){return(t,n)=>{const r=L_(t);if(r.empty)return[];const i=T_(r.modeNum,e),o=r.intervals.map(a=>eT(n,a));return i.map((a,s)=>o[s]+a)}}R_(nh.map(e=>e[4]));R_(nh.map(e=>e[5]));class Kn{constructor(t,n){this.name=t,this.notes=n,this.short=n.join(" "),this.pitches=n.map(r=>jy(r).pitch),this.pitchesSorted=[...this.pitches].sort((r,i)=>r-i),this.keyCount=n.length}getNumbers(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let o=r+1,a="",s=i-12;for(;s>0&&n.has(s);)o=n.get(s).number,a+="",s-=12;n.set(i,{number:o,numberString:`${o}${a}`})}return[...n.values()].map(r=>r.numberString)}getLetters(){const t=this.pitchesSorted,n=new Map;for(const[r,i]of t.entries()){let o=r+1,a="",s=i-12;for(;s>0&&n.has(s);)o=n.get(s).number,a+="",s-=12;const l=gA(i).name;n.set(i,{number:o,letterString:`${l}${a}`})}return[...n.values()].map(r=>r.letterString)}}new Kn("9 A Major",["A5","C#6","C#5","A5","A4","F#5","E5","E6","B5"]),new Kn("9 A Minor",["A5","C6","C5","A5","A4","F5","E5","E6","B5"]),new Kn("9 A Minor 7",["A5","C6","C5","A5","A4","F#5","E5","E6","B5"]),new Kn("9 A Ake Bono",["A5","D6","D5","A5","A4","F5","E5","E6","A#5"]),new Kn("9 A Hijaz",["G5","D6","D5","A5","A4","F#5","D#5","D#6","A#5"]),new Kn("9 A Pygmy",["G5","C6","C5","G5","G4","D#5","D5","D#6","A#5"]),new Kn("17 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","C4","E4","G4","B4","D5","F5","A5","C6","E6"]),new Kn("21 C Major",["D6","B5","G5","E5","C5","A4","F4","D4","B3","G3","F3","A3","C4","E4","G4","B4","D5","F5","A5","C6","E6"]);function kT(e,t=1){const n=f_(e);return n.s=t,n.toString()}["#ff0000","#ff4e00","#db7b00","#ffcc00","#e4ed00","#81d700","#00ffb4","#00ffea","#00baff","#3c00ff","#a800ff","#ff00fd"].map(e=>kT(e,.5));const ET=Sf("black","steelblue");Array.from({length:12}).map((e,t)=>ET(t/11));function CT(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px"),Xe(t,"width",e[0]+"px"),Xe(t,"margin","auto")},m(o,a){F(o,t,a),w(t,n),e[4](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i),a&1&&Xe(t,"width",o[0]+"px")},i:Me,o:Me,d(o){o&&R(t),e[4](null)}}}function TT(e,t,n){let{pattern:r}=t,{width:i=800}=t,{height:o=100}=t,a;xn(()=>{const l=[...new Set(r)],u=l.map((h,c)=>c===0?0:h-l[c-1]),f=an({width:i,height:o,marginTop:4,marginLeft:0,marginRight:1,style:{backgroundColor:"white",borderRadius:"5px"},x:{label:"beat"},y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Hy(u,{x:(h,c)=>c+1,fill:h=>h})]});n(2,a.textContent="",a),a.appendChild(f)});function s(l){_t[l?"unshift":"push"](()=>{a=l,n(2,a)})}return e.$$set=l=>{"pattern"in l&&n(3,r=l.pattern),"width"in l&&n(0,i=l.width),"height"in l&&n(1,o=l.height)},[i,o,a,r,s]}class wn extends et{constructor(t){super(),Qe(this,t,TT,CT,Je,{pattern:3,width:0,height:1})}}function $T(e,t,n){const r=e.slice();return r[16]=t[n],r}function DT(e){let t;return{c(){t=S("option"),t.textContent=`${e[16].substring(0,30)}`,t.__value=e[16],we(t,t.__value)},m(n,r){F(n,t,r)},p:Me,d(n){n&&R(t)}}}function NT(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b,v,y,x,M,P,$,N,I,E,O=pt(["single note","single beat","only snare","beat 5"]),H=[];for(let D=0;D<4;D+=1)H[D]=DT($T(e,O,D));return d=new El({props:{audioData:e[2],sampleRate:e[3]}}),g=new yn({props:{audioData:e[2],width:Vi,height:Wi}}),b=new iA({props:{pattern:e[4],width:Vi,height:Wi}}),y=new sA({props:{pattern:e[4],width:Vi,height:Wi}}),M=new fA({props:{pattern:e[4],width:Vi,height:Wi}}),$=new wn({props:{pattern:e[4],width:Vi,height:Wi}}),{c(){t=S("main"),n=S("h2"),n.textContent="Playground",r=C(),i=S("div"),o=S("label"),a=oe(`error mode:
      `),s=S("select");for(let D=0;D<4;D+=1)H[D].c();l=C(),u=S("label"),f=oe(`error severity (in seconds):
      `),h=S("input"),c=C(),m=S("div"),he(d.$$.fragment),p=C(),he(g.$$.fragment),_=C(),he(b.$$.fragment),v=C(),he(y.$$.fragment),x=C(),he(M.$$.fragment),P=C(),he($.$$.fragment),e[0]===void 0&&Ar(()=>e[5].call(s)),A(o,"class","svelte-1sot113"),A(h,"type","number"),A(h,"min","-0.5"),A(h,"max","0.5"),A(h,"step","0.01"),A(u,"class","svelte-1sot113"),A(m,"class","stimuli svelte-1sot113")},m(D,T){F(D,t,T),w(t,n),w(t,r),w(t,i),w(i,o),w(o,a),w(o,s);for(let z=0;z<4;z+=1)H[z]&&H[z].m(s,null);or(s,e[0],!0),w(i,l),w(i,u),w(u,f),w(u,h),we(h,e[1]),w(t,c),w(t,m),ue(d,m,null),w(m,p),ue(g,m,null),w(m,_),ue(b,m,null),w(m,v),ue(y,m,null),w(m,x),ue(M,m,null),w(m,P),ue($,m,null),N=!0,I||(E=[Ie(s,"change",e[5]),Ie(h,"input",e[6])],I=!0)},p(D,[T]){T&1&&or(s,D[0]),T&2&&At(h.value)!==D[1]&&we(h,D[1]);const z={};T&4&&(z.audioData=D[2]),T&8&&(z.sampleRate=D[3]),d.$set(z);const ae={};T&4&&(ae.audioData=D[2]),g.$set(ae);const ne={};T&16&&(ne.pattern=D[4]),b.$set(ne);const se={};T&16&&(se.pattern=D[4]),y.$set(se);const Y={};T&16&&(Y.pattern=D[4]),M.$set(Y);const K={};T&16&&(K.pattern=D[4]),$.$set(K)},i(D){N||(B(d.$$.fragment,D),B(g.$$.fragment,D),B(b.$$.fragment,D),B(y.$$.fragment,D),B(M.$$.fragment,D),B($.$$.fragment,D),N=!0)},o(D){U(d.$$.fragment,D),U(g.$$.fragment,D),U(b.$$.fragment,D),U(y.$$.fragment,D),U(M.$$.fragment,D),U($.$$.fragment,D),N=!1},d(D){D&&R(t),Qn(H,D),fe(d),fe(g),fe(b),fe(y),fe(M),fe($),I=!1,Nt(E)}}}let Vi=600,Wi=100,IT=120;const L0=4;function LT(e,t,n){let r="beat 5",i=0,o=Lo(IT),a=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const s=L0*o;let l=null,u,f=[];const h=async()=>{a=await Promise.all(a.map(async _=>({..._,times:_.beats.map(b=>o*(b-1)),timesOriginal:_.beats.map(b=>o*(b-1)),audioBuffer:await cl(_.sample)})))},c=(_="single note",b=0)=>{if(b===0)return a;console.log(`Adding error ${_} ${b}`);const v=m([a]),y=v.filter(P=>P.instrument==="snare")[0],x=v.filter(P=>P.instrument==="hihat")[0],M=v.filter(P=>P.instrument==="bass")[0];return _==="single note"?y.times[1]=y.timesOriginal[1]+b:_==="single beat"?(y.times[1]=y.timesOriginal[1]+b,x.times[6]=x.timesOriginal[6]+b):_==="only snare"?(y.times[0]=y.timesOriginal[0]+b,y.times[1]=y.timesOriginal[1]+b):_==="beat 5"&&(M.times[1]=M.timesOriginal[1]+b,x.times[4]=x.timesOriginal[4]+b),v},m=_=>{console.log(`concat ${_.length} patterns`);const b=_[0].map(v=>({...v,beats:[...v.beats],times:[...v.times],timesOriginal:[...v.timesOriginal]}));for(let v=1;v<_.length;v++){const y=_[v];for(const x of y){const M=b.filter(P=>P.instrument===x.instrument)[0];M.beats=[...M.beats,...x.beats.map(P=>P+v*L0)],M.times=[...M.times,...x.times.map(P=>P+v*s)],M.timesOriginal=[...M.timesOriginal,...x.timesOriginal.map(P=>P+v*s)]}}return b},d=async(_,b)=>{if(!a[0].audioBuffer)return;const y=[c(_,b)],x=m(y);n(4,f=x.map(M=>M.times).flat().sort()),x.map(M=>M.times.map(P=>({time:P,instr:M.instrument}))).flat(1/0).sort((M,P)=>{M.time-P.time}),n(3,u=x[0].audioBuffer.sampleRate),n(2,l=So(x,s*y.length+.1,u)),x.map(M=>{const P=So([M],s*y.length+.1,u);return{instr:M.instrument,audio:P}})};Br(async()=>{await h(),d()});function p(){r=Bs(this),n(0,r)}function g(){i=At(this.value),n(1,i)}return e.$$.update=()=>{e.$$.dirty&3&&d(r,i)},[r,i,l,u,f,p,g]}class RT extends et{constructor(t){super(),Qe(this,t,LT,NT,Je,{})}}function FT(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px")},m(o,a){F(o,t,a),w(t,n),e[9](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i)},i:Me,o:Me,d(o){o&&R(t),e[9](null)}}}function BT(e,t,n){let{title:r=void 0}=t,{final:i=void 0}=t,{width:o=600}=t,{height:a=180}=t,{data:s}=t,{x:l=(m,d)=>d}=t,{y:u=m=>m}=t,{xDomain:f=[0,70]}=t,h;xn(()=>{n(2,h.textContent="",h);const m=an({title:r,width:o,height:a,x:{domain:f},marks:[KS(s,{x:l,y:u,stroke:"#ccc"}),Yc(s,{x:l,y:u,fill:"#aaa",r:2,tip:!0}),Ts([0]),Ts([i],{stroke:"#88888888"}),Sl([i],{x:65,y:i,dy:-7,text:d=>`final: ${d.toFixed(3)}`})]});h.appendChild(m)});function c(m){_t[m?"unshift":"push"](()=>{h=m,n(2,h)})}return e.$$set=m=>{"title"in m&&n(3,r=m.title),"final"in m&&n(4,i=m.final),"width"in m&&n(0,o=m.width),"height"in m&&n(1,a=m.height),"data"in m&&n(5,s=m.data),"x"in m&&n(6,l=m.x),"y"in m&&n(7,u=m.y),"xDomain"in m&&n(8,f=m.xDomain)},[o,a,h,r,i,s,l,u,f,c]}class OT extends et{constructor(t){super(),Qe(this,t,BT,FT,Je,{title:3,final:4,width:0,height:1,data:5,x:6,y:7,xDomain:8})}}var F_={exports:{}};(function(e,t){(function(n,r){r()})(Gi,function(){function n(u,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function r(u,f,h){var c=new XMLHttpRequest;c.open("GET",u),c.responseType="blob",c.onload=function(){l(c.response,f,h)},c.onerror=function(){console.error("could not download file")},c.send()}function i(u){var f=new XMLHttpRequest;f.open("HEAD",u,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(f)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Gi=="object"&&Gi.global===Gi?Gi:void 0,s=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(u,f,h){var c=a.URL||a.webkitURL,m=document.createElement("a");f=f||u.name||"download",m.download=f,m.rel="noopener",typeof u=="string"?(m.href=u,m.origin===location.origin?o(m):i(m.href)?r(u,f,h):o(m,m.target="_blank")):(m.href=c.createObjectURL(u),setTimeout(function(){c.revokeObjectURL(m.href)},4e4),setTimeout(function(){o(m)},0))}:"msSaveOrOpenBlob"in navigator?function(u,f,h){if(f=f||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,h),f);else if(i(u))r(u,f,h);else{var c=document.createElement("a");c.href=u,c.target="_blank",setTimeout(function(){o(c)})}}:function(u,f,h,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof u=="string")return r(u,f,h);var m=u.type==="application/octet-stream",d=/constructor/i.test(a.HTMLElement)||a.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||m&&d||s)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=p?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=v:location=v,c=null},g.readAsDataURL(u)}else{var _=a.URL||a.webkitURL,b=_.createObjectURL(u);c?c.location=b:location.href=b,c=null,setTimeout(function(){_.revokeObjectURL(b)},4e4)}});a.saveAs=l.saveAs=l,e.exports=l})})(F_);var qT=F_.exports;const R0=zg(qT);function GT(e){let t,n,r;return{c(){t=S("div"),A(t,"width",n=e[0]+"px"),A(t,"height",r=e[1]+"px")},m(i,o){F(i,t,o),e[6](t)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&A(t,"width",n),o&2&&r!==(r=i[1]+"px")&&A(t,"height",r)},i:Me,o:Me,d(i){i&&R(t),e[6](null)}}}function UT(e,t,n){let{data:r}=t,{domain:i}=t,{title:o=""}=t,{width:a=800}=t,{height:s=100}=t,l;xn(()=>{const f=an({width:a,height:s,marginLeft:70,marginRight:10,x:{label:o,domain:i},y:{axis:!1,type:"band"},marks:[jc(r,{x:h=>h}),Sl(r,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${c+1}`})]});n(2,l.textContent="",l),l.appendChild(f)});function u(f){_t[f?"unshift":"push"](()=>{l=f,n(2,l)})}return e.$$set=f=>{"data"in f&&n(3,r=f.data),"domain"in f&&n(4,i=f.domain),"title"in f&&n(5,o=f.title),"width"in f&&n(0,a=f.width),"height"in f&&n(1,s=f.height)},[a,s,l,r,i,o,u]}class zT extends et{constructor(t){super(),Qe(this,t,UT,GT,Je,{data:3,domain:4,title:5,width:0,height:1})}}function HT(e){let t,n,r;return{c(){t=S("div"),A(t,"width",n=e[0]+"px"),A(t,"height",r=e[1]+"px")},m(i,o){F(i,t,o),e[5](t)},p(i,[o]){o&1&&n!==(n=i[0]+"px")&&A(t,"width",n),o&2&&r!==(r=i[1]+"px")&&A(t,"height",r)},i:Me,o:Me,d(i){i&&R(t),e[5](null)}}}function VT(e,t,n){let{stimuli:r}=t,{width:i=800}=t,{height:o=200}=t,a;xn(()=>{const u=r.map(h=>({encoding:h.encoding,...s(h.finals)})),f=an({width:i,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:u.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Yc(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),Uy(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Z2([0])]});n(2,a.textContent="",a),a.appendChild(f)});function s(u){const f=u.length,h=Of(u),d=1.96*(Ff(u)/Math.sqrt(f)),p=h-d,g=h+d;return{mean:h,low:p,high:g}}function l(u){_t[u?"unshift":"push"](()=>{a=u,n(2,a)})}return e.$$set=u=>{"stimuli"in u&&n(3,r=u.stimuli),"width"in u&&n(0,i=u.width),"height"in u&&n(1,o=u.height)},[i,o,a,r,s,l]}class WT extends et{constructor(t){super(),Qe(this,t,VT,HT,Je,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function F0(e,t){return e==null?t:typeof e=="function"?e:n=>n[e]}function YT(e,t,n,r,i,o){const a=new Float64Array(o),s=(o-1)/(i-r);for(let l=0;l<e.length;++l){const u=e[l],f=t(u,l,e),h=n(u,l,e);if(!(Number.isFinite(f)&&Number.isFinite(h)))continue;const c=(f-r)*s,m=Math.floor(c),d=m+1;0<=m&&d<o?(a[m]+=(d-c)*h,a[d]+=(c-m)*h):m===-1?a[d]+=(c-m)*h:d===o&&(a[m]+=(d-c)*h)}return a}function B0(e,t=!1){const n=new Float64Array(5),r=new Float64Array(4);jT(n,r,e);const i=Float64Array.of(0,r[1]-n[1]*r[0],r[2]-n[2]*r[0],r[3]-n[3]*r[0],-n[4]*r[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(r[0]+r[1]+r[2]+r[3])/o,s=(i[1]+i[2]+i[3]+i[4])/o;return{sigma:e,negative:t,a:n,b_causal:r,b_anticausal:i,sum_causal:a,sum_anticausal:s}}function jT(e,t,n){const i=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),s=.6318/n,l=1.997/n,u=Float64Array.of(-o*Math.cos(s),o*Math.sin(s),-o*Math.cos(-s),o*Math.sin(-s),-a*Math.cos(l),a*Math.sin(l),-a*Math.cos(-l),a*Math.sin(-l)),f=n*2.5066282746310007,h=Float64Array.of(i[0],i[1],0,0,0,0,0,0),c=Float64Array.of(1,0,u[0],u[1],0,0,0,0,0,0);let m,d;for(d=2;d<8;d+=2){for(h[d]=u[d]*h[d-2]-u[d+1]*h[d-1],h[d+1]=u[d]*h[d-1]+u[d+1]*h[d-2],m=d-2;m>0;m-=2)h[m]+=u[d]*h[m-2]-u[d+1]*h[m-1],h[m+1]+=u[d]*h[m-1]+u[d+1]*h[m-2];for(m=0;m<=d;m+=2)h[m]+=i[d]*c[m]-i[d+1]*c[m+1],h[m+1]+=i[d]*c[m+1]+i[d+1]*c[m];for(c[d+2]=u[d]*c[d]-u[d+1]*c[d+1],c[d+3]=u[d]*c[d+1]+u[d+1]*c[d],m=d;m>0;m-=2)c[m]+=u[d]*c[m-2]-u[d+1]*c[m-1],c[m+1]+=u[d]*c[m-1]+u[d+1]*c[m-2]}for(d=0;d<4;++d)m=d<<1,t[d]=h[m]/f,e[d+1]=c[m+2]}function XT(e,t,n,r=1,i=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),s=i,l=ZT){const u=r*2,f=r*3,h=r*4,c=r*n;let m,d;for(l(i,t,n,r,e.b_causal,3,e.a,4,e.sum_causal,a,e.sigma),d=4,m=h;d<n;++d,m+=r)i[d]=e.b_causal[0]*t[m]+e.b_causal[1]*t[m-r]+e.b_causal[2]*t[m-u]+e.b_causal[3]*t[m-f]-e.a[1]*i[d-1]-e.a[2]*i[d-2]-e.a[3]*i[d-3]-e.a[4]*i[d-4];for(l(o,t,n,-r,e.b_anticausal,4,e.a,4,e.sum_anticausal,a,e.sigma),d=4,m=c-r*5;d<n;++d,m-=r)o[d]=e.b_anticausal[1]*t[m+r]+e.b_anticausal[2]*t[m+u]+e.b_anticausal[3]*t[m+f]+e.b_anticausal[4]*t[m+h]-e.a[1]*o[d-1]-e.a[2]*o[d-2]-e.a[3]*o[d-3]-e.a[4]*o[d-4];if(e.negative)for(d=0,m=0;d<n;++d,m+=r)s[m]=i[d]+o[n-d-1];else for(d=0,m=0;d<n;++d,m+=r)s[m]=Math.max(0,i[d]+o[n-d-1]);return s}function ZT(e,t,n,r,i,o,a,s,l,u){const f=Math.abs(r)*n,h=r<0?f+r:0;let c,m,d;for(m=0;m<s;++m)for(u[m]=m<=o?i[m]:0,d=1;d<=s&&d<=m;++d)u[m]-=a[d]*u[m-d];for(d=0;d<s;++d)for(e[d]=0,m=1;m<=d;++m)c=h+r*m,c>=0&&c<f&&(e[d]+=u[d-m]*t[c]);const p=t[h];if(p>0)for(d=0;d<s;++d)e[d]+=u[d]*p}function KT(e,t,n=0){const r=e.length;let i,o;for(let a=0;a<r;++a){const s=t(e[a],a,e);s!=null&&(i===void 0?s>=s&&(i=o=s):(s<i&&(i=s),s>o&&(o=s)))}return[i-n,o+n]}function JT(e,t){const n=e.map(t).filter(u=>u!=null&&u>=u);n.sort((u,f)=>u-f);const r=QT(n),i=O0(n,.25),o=O0(n,.75),a=n.length,s=(o-i)/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i)||1)*Math.pow(a,-.2)}function QT(e){const t=e.length;let n=0,r,i=0,o=0;for(let a=0;a<t;++a){const s=e[a];r=s-i,i+=r/++n,o+=r*(s-i)}return n>1?Math.sqrt(o/(n-1)):NaN}function O0(e,t){const n=e.length;if(!n)return NaN;if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];const r=(n-1)*t,i=Math.floor(r),o=e[i];return o+(e[i+1]-o)*(r-i)}function e$(e,t={}){const{adjust:n=1,pad:r=3,bins:i=512}=t,o=F0(t.x,_=>_),a=F0(t.weight,()=>1/e.length);let s=t.bandwidth??n*JT(e,o);const[l,u]=t.extent??KT(e,o,r*s),f=YT(e,o,a,l,u,i),h=(u-l)/(i-1),c=f.some(_=>_<0);let m=B0(s/h,c),d;function*p(_="x",b="y"){const v=g.grid(),y=1/h;for(let x=0;x<i;++x)yield{[_]:l+x*h,[b]:v[x]*y}}const g={[Symbol.iterator]:p,points:p,grid:()=>d||(d=XT(m,f,i)),extent:()=>[l,u],bandwidth(_){return arguments.length?(_!==s&&(s=_,d=null,m=B0(s/h,c)),g):s}};return g}function t$(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px")},m(o,a){F(o,t,a),w(t,n),e[10](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i)},i:Me,o:Me,d(o){o&&R(t),e[10](null)}}}function n$(e,t,n){let r,{values:i}=t,{title:o=""}=t,{xLabel:a="some value"}=t,{xDomain:s=void 0}=t,{width:l=1e3}=t,{height:u=100}=t,{bandwidth:f=.25}=t,{bins:h=256}=t,{pad:c=4}=t,m;xn(()=>{const p=[...r.bandwidth(f)];n(2,m.textContent="",m);const g=an({width:l,height:u,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:s},y:{label:"density",type:"linear"},marks:[FS(p,{x:"x",y:"y",fill:"#ccc"}),jc(i,{x:_=>_,strokeWidth:.5}),Ts([0])]});m.appendChild(g)});function d(p){_t[p?"unshift":"push"](()=>{m=p,n(2,m)})}return e.$$set=p=>{"values"in p&&n(3,i=p.values),"title"in p&&n(4,o=p.title),"xLabel"in p&&n(5,a=p.xLabel),"xDomain"in p&&n(6,s=p.xDomain),"width"in p&&n(0,l=p.width),"height"in p&&n(1,u=p.height),"bandwidth"in p&&n(7,f=p.bandwidth),"bins"in p&&n(8,h=p.bins),"pad"in p&&n(9,c=p.pad)},e.$$.update=()=>{e.$$.dirty&904&&(r=e$(i,{bandwidth:f,pad:c,bins:h}))},[l,u,m,i,o,a,s,f,h,c,d]}class r$ extends et{constructor(t){super(),Qe(this,t,n$,t$,Je,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function i$(e){let t,n,r,i;return{c(){t=S("main"),n=S("div"),A(n,"width",r=e[0]+"px"),A(n,"height",i=e[1]+"px")},m(o,a){F(o,t,a),w(t,n),e[14](n)},p(o,[a]){a&1&&r!==(r=o[0]+"px")&&A(n,"width",r),a&2&&i!==(i=o[1]+"px")&&A(n,"height",i)},i:Me,o:Me,d(o){o&&R(t),e[14](null)}}}function o$(e,t,n){let{title:r=""}=t,{data:i}=t,{x:o="x"}=t,{y:a="y"}=t,{fill:s=null}=t,{tipTitle:l=null}=t,{xLabel:u=null}=t,{yLabel:f=null}=t,{xDomain:h=void 0}=t,{yDomain:c=void 0}=t,{grid:m=!1}=t,{width:d=300}=t,{height:p=300}=t,g;xn(()=>{console.log(i,o,a),n(2,g.textContent="",g);const b=an({width:d,height:p,title:r,grid:m,style:{background:"none"},color:{legend:!0},x:{label:u||(typeof o=="string"?o:"x"),domain:h},y:{label:f||(typeof a=="string"?a:"y"),domain:c},marks:[Yc(i,{x:o,y:a,stroke:s,tip:!0}),Uy({length:1},{x1:h[0],x2:h[1],y1:c[0],y2:c[1],stroke:"#ccc"})]});g.appendChild(b)});function _(b){_t[b?"unshift":"push"](()=>{g=b,n(2,g)})}return e.$$set=b=>{"title"in b&&n(3,r=b.title),"data"in b&&n(4,i=b.data),"x"in b&&n(5,o=b.x),"y"in b&&n(6,a=b.y),"fill"in b&&n(7,s=b.fill),"tipTitle"in b&&n(8,l=b.tipTitle),"xLabel"in b&&n(9,u=b.xLabel),"yLabel"in b&&n(10,f=b.yLabel),"xDomain"in b&&n(11,h=b.xDomain),"yDomain"in b&&n(12,c=b.yDomain),"grid"in b&&n(13,m=b.grid),"width"in b&&n(0,d=b.width),"height"in b&&n(1,p=b.height)},[d,p,g,r,i,o,a,s,l,u,f,h,c,m,_]}class q0 extends et{constructor(t){super(),Qe(this,t,o$,i$,Je,{title:3,data:4,x:5,y:6,fill:7,tipTitle:8,xLabel:9,yLabel:10,xDomain:11,yDomain:12,grid:13,width:0,height:1})}}function G0(e,t,n){const r=e.slice();return r[13]=t[n],r}function U0(e,t,n){const r=e.slice();return r[16]=t[n],r}function z0(e,t,n){const r=e.slice();return r[19]=t[n],r}function H0(e,t,n){const r=e.slice();return r[22]=t[n],r}function V0(e,t,n){const r=e.slice();return r[25]=t[n],r}function W0(e,t,n){const r=e.slice();return r[28]=t[n][0],r[29]=t[n][1],r}function Y0(e,t,n){const r=e.slice();return r[32]=t[n],r}function j0(e){let t,n=e[32]+"",r;return{c(){t=S("div"),r=oe(n)},m(i,o){F(i,t,o),w(t,r)},p(i,o){o[0]&1&&n!==(n=i[32]+"")&&ze(r,n)},d(i){i&&R(t)}}}function X0(e){let t,n=e[28]+"",r,i,o=e[29].length+"",a,s;return{c(){t=S("p"),r=oe(n),i=oe(": "),a=oe(o),s=oe(" times")},m(l,u){F(l,t,u),w(t,r),w(t,i),w(t,a),w(t,s)},p(l,u){u[0]&1&&n!==(n=l[28]+"")&&ze(r,n),u[0]&1&&o!==(o=l[29].length+"")&&ze(a,o)},d(l){l&&R(t)}}}function Z0(e){let t,n;return t=new r$({props:{title:`Density of final values for ${e[25][0]}`,values:e[25][1].map(a1),xLabel:"final values",xDomain:[-.01,.2],bandwidth:l$}}),{c(){he(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},p(r,i){const o={};i[0]&2&&(o.title=`Density of final values for ${r[25][0]}`),i[0]&2&&(o.values=r[25][1].map(a1)),t.$set(o)},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){U(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function K0(e){let t,n;return t=new OT({props:{title:e[22].studyName+" P"+e[22].internalPID+" "+e[22].encoding+" "+e[22].data.length+" trials "+(e[22].isOutlier?"OUTLIER":""),final:e[22].final,width:s$,height:120,data:e[22].data,x:f$,y:e[7],xDomain:[0,165]}}),{c(){he(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},p(r,i){const o={};i[0]&2&&(o.title=r[22].studyName+" P"+r[22].internalPID+" "+r[22].encoding+" "+r[22].data.length+" trials "+(r[22].isOutlier?"OUTLIER":"")),i[0]&2&&(o.final=r[22].final),i[0]&2&&(o.data=r[22].data),t.$set(o)},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){U(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function J0(e){let t,n=e[19].encoding+"",r,i,o,a;return o=new zT({props:{data:e[19].finals,title:e[19].encoding,domain:[0,e[2]]}}),{c(){t=S("b"),r=oe(n),i=C(),he(o.$$.fragment)},m(s,l){F(s,t,l),w(t,r),F(s,i,l),ue(o,s,l),a=!0},p(s,l){(!a||l[0]&8)&&n!==(n=s[19].encoding+"")&&ze(r,n);const u={};l[0]&8&&(u.data=s[19].finals),l[0]&8&&(u.title=s[19].encoding),l[0]&4&&(u.domain=[0,s[2]]),o.$set(u)},i(s){a||(B(o.$$.fragment,s),a=!0)},o(s){U(o.$$.fragment,s),a=!1},d(s){s&&(R(t),R(i)),fe(o,s)}}}function Q0(e){let t,n=e[16]+"",r;return{c(){t=S("p"),r=oe(n)},m(i,o){F(i,t,o),w(t,r)},p(i,o){o[0]&1&&n!==(n=i[16]+"")&&ze(r,n)},d(i){i&&R(t)}}}function e1(e){let t,n,r,i=e[13].demographics.internalPID+"",o,a,s=e[13].demographics.partID+"",l,u,f,h=pt(e[13].demographics.partFeedback.split(`
`)),c=[];for(let m=0;m<h.length;m+=1)c[m]=Q0(U0(e,h,m));return{c(){t=S("div"),n=S("b"),r=oe("P"),o=oe(i),a=C(),l=oe(s),u=oe(`:
        `);for(let m=0;m<c.length;m+=1)c[m].c();f=C(),Xe(t,"text-align","left")},m(m,d){F(m,t,d),w(t,n),w(n,r),w(n,o),w(t,a),w(t,l),w(t,u);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);w(t,f)},p(m,d){if(d[0]&1&&i!==(i=m[13].demographics.internalPID+"")&&ze(o,i),d[0]&1&&s!==(s=m[13].demographics.partID+"")&&ze(l,s),d[0]&1){h=pt(m[13].demographics.partFeedback.split(`
`));let p;for(p=0;p<h.length;p+=1){const g=U0(m,h,p);c[p]?c[p].p(g,d):(c[p]=Q0(g),c[p].c(),c[p].m(t,f))}for(;p<c.length;p+=1)c[p].d(1);c.length=h.length}},d(m){m&&R(t),Qn(c,m)}}}function a$(e){let t,n,r,i,o,a,s,l,u,f,h,c=e[0].length+"",m,d,p=e[1].length+"",g,_,b=e[4].length+"",v,y,x,M,P,$,N,I,E,O,H,D,T,z,ae,ne,se,Y,K,Z,Q,me,de,ce,ee,re,G,J,te,L,pe,ie,be,Ee,$e=pt(Ln(e[0],t1).map(n1)),De=[];for(let k=0;k<$e.length;k+=1)De[k]=j0(Y0(e,$e,k));let Oe=pt(Ln(e[0],r1).sort(i1)),He=[];for(let k=0;k<Oe.length;k+=1)He[k]=X0(W0(e,Oe,k));let rt=pt(Ln(e[1],o1)),Se=[];for(let k=0;k<rt.length;k+=1)Se[k]=Z0(V0(e,rt,k));const ln=k=>U(Se[k],1,1,()=>{Se[k]=null});let je=pt(e[1]),Le=[];for(let k=0;k<je.length;k+=1)Le[k]=K0(H0(e,je,k));const kn=k=>U(Le[k],1,1,()=>{Le[k]=null});ne=new q0({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",fill:"studyName",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),Y=new q0({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",fill:"studyName",tipTitle:"partID",xDomain:[0,.1],yDomain:[0,.1],data:e[0]}}),de=new WT({props:{stimuli:e[3]}});let mt=pt(e[3]),Te=[];for(let k=0;k<mt.length;k+=1)Te[k]=J0(z0(e,mt,k));const un=k=>U(Te[k],1,1,()=>{Te[k]=null});let X=pt(e[0].filter(s1)),j=[];for(let k=0;k<X.length;k+=1)j[k]=e1(G0(e,X,k));return{c(){t=S("main"),n=S("h2"),n.textContent="Analysis",r=C(),i=S("div"),o=S("label"),a=oe(`Results JSONs and Prolific demographics CSV
      `),s=S("input"),l=C(),u=S("button"),u.textContent="export JSON",f=C(),h=S("div"),m=oe(c),d=oe(` participants completed -
    `),g=oe(p),_=oe(` tests -
    `),v=oe(b),y=oe(" filtered tests"),x=C(),M=S("div"),P=S("h3"),P.textContent="Studies",$=C();for(let k=0;k<De.length;k+=1)De[k].c();N=C(),I=S("div"),E=S("h3"),E.textContent="Encoding order",O=C();for(let k=0;k<He.length;k+=1)He[k].c();H=C(),D=S("div");for(let k=0;k<Se.length;k+=1)Se[k].c();T=C(),z=S("div");for(let k=0;k<Le.length;k+=1)Le[k].c();ae=C(),he(ne.$$.fragment),se=C(),he(Y.$$.fragment),K=C(),Z=S("div"),Q=S("h3"),Q.textContent="Mean and CI of Final Values",me=C(),he(de.$$.fragment),ce=C(),ee=S("div"),re=S("h3"),re.textContent="Final Values for Each Stimulus and All Participants",G=C();for(let k=0;k<Te.length;k+=1)Te[k].c();J=C(),te=S("div"),L=S("h3"),L.textContent="Feedback",pe=C();for(let k=0;k<j.length;k+=1)j[k].c();A(s,"type","file"),A(s,"accept",".json,.csv"),s.multiple=!0},m(k,q){F(k,t,q),w(t,n),w(t,r),w(t,i),w(i,o),w(o,a),w(o,s),w(i,l),w(i,u),w(t,f),w(t,h),w(h,m),w(h,d),w(h,g),w(h,_),w(h,v),w(h,y),w(t,x),w(t,M),w(M,P),w(M,$);for(let W=0;W<De.length;W+=1)De[W]&&De[W].m(M,null);w(t,N),w(t,I),w(I,E),w(I,O);for(let W=0;W<He.length;W+=1)He[W]&&He[W].m(I,null);w(t,H),w(t,D);for(let W=0;W<Se.length;W+=1)Se[W]&&Se[W].m(D,null);w(t,T),w(t,z);for(let W=0;W<Le.length;W+=1)Le[W]&&Le[W].m(z,null);w(t,ae),ue(ne,t,null),w(t,se),ue(Y,t,null),w(t,K),w(t,Z),w(Z,Q),w(Z,me),ue(de,Z,null),w(t,ce),w(t,ee),w(ee,re),w(ee,G);for(let W=0;W<Te.length;W+=1)Te[W]&&Te[W].m(ee,null);w(t,J),w(t,te),w(te,L),w(te,pe);for(let W=0;W<j.length;W+=1)j[W]&&j[W].m(te,null);ie=!0,be||(Ee=[Ie(s,"input",e[5]),Ie(u,"click",e[6])],be=!0)},p(k,q){if((!ie||q[0]&1)&&c!==(c=k[0].length+"")&&ze(m,c),(!ie||q[0]&2)&&p!==(p=k[1].length+"")&&ze(g,p),(!ie||q[0]&16)&&b!==(b=k[4].length+"")&&ze(v,b),q[0]&1){$e=pt(Ln(k[0],t1).map(n1));let V;for(V=0;V<$e.length;V+=1){const ye=Y0(k,$e,V);De[V]?De[V].p(ye,q):(De[V]=j0(ye),De[V].c(),De[V].m(M,null))}for(;V<De.length;V+=1)De[V].d(1);De.length=$e.length}if(q[0]&1){Oe=pt(Ln(k[0],r1).sort(i1));let V;for(V=0;V<Oe.length;V+=1){const ye=W0(k,Oe,V);He[V]?He[V].p(ye,q):(He[V]=X0(ye),He[V].c(),He[V].m(I,null))}for(;V<He.length;V+=1)He[V].d(1);He.length=Oe.length}if(q[0]&2){rt=pt(Ln(k[1],o1));let V;for(V=0;V<rt.length;V+=1){const ye=V0(k,rt,V);Se[V]?(Se[V].p(ye,q),B(Se[V],1)):(Se[V]=Z0(ye),Se[V].c(),B(Se[V],1),Se[V].m(D,null))}for(Ge(),V=rt.length;V<Se.length;V+=1)ln(V);Ue()}if(q[0]&2){je=pt(k[1]);let V;for(V=0;V<je.length;V+=1){const ye=H0(k,je,V);Le[V]?(Le[V].p(ye,q),B(Le[V],1)):(Le[V]=K0(ye),Le[V].c(),B(Le[V],1),Le[V].m(z,null))}for(Ge(),V=je.length;V<Le.length;V+=1)kn(V);Ue()}const W={};q[0]&1&&(W.data=k[0]),ne.$set(W);const le={};q[0]&1&&(le.data=k[0]),Y.$set(le);const Ce={};if(q[0]&8&&(Ce.stimuli=k[3]),de.$set(Ce),q[0]&12){mt=pt(k[3]);let V;for(V=0;V<mt.length;V+=1){const ye=z0(k,mt,V);Te[V]?(Te[V].p(ye,q),B(Te[V],1)):(Te[V]=J0(ye),Te[V].c(),B(Te[V],1),Te[V].m(ee,null))}for(Ge(),V=mt.length;V<Te.length;V+=1)un(V);Ue()}if(q[0]&1){X=pt(k[0].filter(s1));let V;for(V=0;V<X.length;V+=1){const ye=G0(k,X,V);j[V]?j[V].p(ye,q):(j[V]=e1(ye),j[V].c(),j[V].m(te,null))}for(;V<j.length;V+=1)j[V].d(1);j.length=X.length}},i(k){if(!ie){for(let q=0;q<rt.length;q+=1)B(Se[q]);for(let q=0;q<je.length;q+=1)B(Le[q]);B(ne.$$.fragment,k),B(Y.$$.fragment,k),B(de.$$.fragment,k);for(let q=0;q<mt.length;q+=1)B(Te[q]);ie=!0}},o(k){Se=Se.filter(Boolean);for(let q=0;q<Se.length;q+=1)U(Se[q]);Le=Le.filter(Boolean);for(let q=0;q<Le.length;q+=1)U(Le[q]);U(ne.$$.fragment,k),U(Y.$$.fragment,k),U(de.$$.fragment,k),Te=Te.filter(Boolean);for(let q=0;q<Te.length;q+=1)U(Te[q]);ie=!1},d(k){k&&R(t),Qn(De,k),Qn(He,k),Qn(Se,k),Qn(Le,k),fe(ne),fe(Y),fe(de),Qn(Te,k),Qn(j,k),be=!1,Nt(Ee)}}}const s$=1200;let l$=.001,u$=20;const t1=e=>e.studyName,n1=([e,t])=>`${e} had ${t.length} parts`,r1=e=>e.encodingOrder,i1=(e,t)=>e[1].lenght-t[1].length,o1=e=>e.testType,a1=e=>e.final,f$=(e,t)=>t,s1=e=>e.demographics.partFeedback.trim().length>0;function c$(e,t,n){let r,i,o,a,s=[],l=null;const u=async g=>{const _=[];l=[];for(const v of g.target.files)if(v.name.endsWith(".csv")){const y=await v.text(),x=d6(y);l=[...l,...x],console.log("p demo",l)}else{const y=await v.text();_.push(JSON.parse(y))}const b=Ln(_,v=>v.demographics.partID);console.log(`${b.length} participants`,b),n(0,s=_.filter(v=>v.studyStep==="feedback").map((v,y)=>({...v,demographics:{...v.demographics,internalPID:y+1},prolificDemogr:l.filter(x=>x["Participant id"]===v.demographics.partID)[0],finalAudio:v.tests.filter(x=>x.encoding.startsWith("audio"))[0].final,finalColor:v.tests.filter(x=>x.encoding.startsWith("color"))[0].final,finalWaveform:v.tests.filter(x=>x.encoding.startsWith("waveform"))[0].final,encodingOrder:v.tests.map(x=>x.encoding).join(", ")})).filter(v=>v.prolificDemogr!==void 0)),console.log("participants",s)},f=g=>{if(g.lenght===0)return[];const _=(v,y=5)=>{const x=Math.floor(v/y)*y;return`${x}-${x+y-1}`},b=[];for(const v of g)for(const[y,x]of v.tests.entries()){let M=x.encoding;b.push({studyName:v.studyName,...v.demographics,partAge:v.demographics.partAge?v.demographics.partAge:_(v.prolificDemogr.Age,10),partSex:v.demographics.partGender?v.demographics.partGender:v.prolificDemogr.Sex,countryBirth:v.prolificDemogr["Country of birth"],countryResidence:v.prolificDemogr["Country of residence"],prolificApprovals:v.prolificDemogr["Total approvals"],...x,date:v.date,testType:M,testOrder:y,isOutlier:m(x,10,.1,2)})}return console.log("tests",b),b},h=(g,_)=>g.filter(b=>b.final<_),c=g=>g.length===0?[]:Ln(g,b=>b.testType).map(([b,v])=>{const y=v.map(x=>x.final);return{encoding:b,testType:b,finals:y,finalMean:Of(y),finalVar:Rf(y),trialCounts:v.map(x=>x.trialCount)}}),m=(g,_=10,b=.1,v=2)=>{const y=g.data.map(Math.abs);let x=0;for(let M=_;M<y.length;M++)if(y[M]>=b&&(x++,x>=v))return!0;return!1},d=()=>{const g=JSON.stringify(s,void 0,2),_=new Blob([g],{type:"text/plain;charset=utf-8"});R0(_,"participants.json");const b=JSON.stringify(r,void 0,2),v=new Blob([b],{type:"text/plain;charset=utf-8"});R0(v,"tests.json")},p=g=>Math.abs(g);return e.$$.update=()=>{e.$$.dirty[0]&1&&n(1,r=f(s)),e.$$.dirty[0]&2&&n(4,i=h(r,u$)),e.$$.dirty[0]&2&&n(3,o=c(r)),e.$$.dirty[0]&2&&n(2,a=zt(r.map(g=>Math.abs(g.final)))),e.$$.dirty[0]&2&&console.log("tests by enc",Ln(r,g=>g.testType))},[s,r,a,o,i,u,d,p]}class h$ extends et{constructor(t){super(),Qe(this,t,c$,a$,Je,{},null,[-1,-1])}}function Be(e){this.stairs={};for(const t in e){if(this.stairs[t]=e[t],this.stairs[t].name=t,typeof e[t].firstVal>"u")throw new Error("No firstVal specified for "+t);if(e[t].hasOwnProperty("firstVal")&&(this.stairs[t].firstVal=e[t].firstVal),typeof e[t].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+t);if(this.stairs[t].stepSizeDown=e[t].stepSizeDown,typeof e[t].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+t);this.stairs[t].stepSizeUp=e[t].stepSizeUp,this.stairs[t].down=e[t].down||1,this.stairs[t].up=e[t].up||1,this.stairs[t].direction=e[t].direction||-1,this.stairs[t].reversalLimit=e[t].reversalLimit||0,this.stairs[t].limits=e[t].limits||!1,this.stairs[t].operation=e[t].operation||"add",this.stairs[t].wait=e[t].wait||1,this.stairs[t].val=e[t].val||[this.stairs[t].firstVal],this.stairs[t].active=e[t].active||!1,this.stairs[t].sameStairMax=e[t].sameStairMax||-1,this.stairs[t].limitReached=e[t].limitReached||!1,this.stairs[t].reversals=e[t].reversals||0,this.stairs[t].successiveGood=e[t].successiveGood||0,this.stairs[t].successiveBad=e[t].successiveBad||0,this.stairs[t].sameStairCount=e[t].sameStairCount||0,this.stairs[t].verbosity=e[t].verbosity||0,this.stairs[t].verbosity>0&&console.log("Built staircase '"+this.stairs[t].name+"' ("+this.stairs[t].operation+"): Start="+this.stairs[t].firstVal+"; StepSize="+this.stairs[t].stepSize+"; Limits=["+this.stairs[t].limits[0]+", "+this.stairs[t].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSizeDown/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.up)}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]}}},multiply:{noWait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.down/t.up)},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.val[t.val.length-1]*t.stepSizeUp}},wait:{1:function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]},"-1":function(t){return t.successiveGood=0,t.successiveBad++,t.successiveBad>=t.up?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]}}}},harder:{add:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]+t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]-t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]+t.stepSizeUp*(t.stepSizeUp/t.down)},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]-t.stepSizeDown*(t.stepSize/t.down)}}},multiply:{wait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]*t.stepSizeUp:t.val[t.val.length-1]},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.successiveGood>=t.down?t.val[t.val.length-1]/t.stepSizeDown:t.val[t.val.length-1]}},noWait:{1:function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]*t.stepSizeUp},"-1":function(t){return t.sameStairCount++,t.successiveGood++,t.successiveBad=0,t.val[t.val.length-1]/Math.pow(t.stepSizeDown,t.up/t.down)}}}}}}Be.prototype.choose=function(e){const t=this.getActive(),n=e?"harder":"easier";e||(t.startingExplorationScale=1);const r=t.wait?"wait":"noWait";return t.verbosity>0&&console.log("Staircase '"+t.name+"' ("+t.operation+"): making test "+n+", "+r+" mode."),this.tasks[n][t.operation][r][t.direction](t)};Be.prototype.checkLimits=function(e){const t=e;t.val[t.val.length-1]<t.val[t.val.length-2]&&t.val[t.val.length-1]<t.limits[0]?(t.val[t.val.length-1]=t.limits[0],t.limitReached=!0):t.val[t.val.length-1]>t.val[t.val.length-2]&&t.val[t.val.length-1]>t.limits[1]?(t.val[t.val.length-1]=t.limits[1],t.limitReached=!0):t.limitReached=!1};Be.prototype.next=function(e){this.checkErr.ARG("next",arguments,1);const t=this.getActive();return t.val[t.val.length]=this.choose(e),this.checkLimits(t),t.val[t.val.length-1]};Be.prototype.init=function(){const e=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(e[e.length]=n);const t=B_(0,e.length-1);return this.activate(e[t]),this};Be.prototype.changeActive=function(){const e=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?e[e.length]=n:this.stairs[n].active&&this.deactivate(n);const t=B_(0,e.length-1);this.activate(e[t])};Be.prototype.setsameStairMax=function(e,t){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].sameStairMax=e};Be.prototype.get=function(e){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val};Be.prototype.getLast=function(e){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length-1]};Be.prototype.getActive=function(){for(const e in this.stairs)if(this.stairs[e].active)return this.stairs[e];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Be.prototype.activate=function(e){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!0,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' now active")};Be.prototype.deactivate=function(e){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active=!1,this.stairs[e].verbosity>0&&console.log("Staircase '"+this.stairs[e].name+"' deactivated")};Be.prototype.resetCounts=function(e){this.stairs[e].sameStairCount=0,this.stairs[e].successiveGood=0,this.stairs[e].limitReached=!1};Be.prototype.isActive=function(e){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].active};Be.prototype.active=function(e){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);for(const t in this.stairs)if(this.stairs[t].active)return t};Be.prototype.lock=function(e){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!0};Be.prototype.unlock=function(e){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock=!1};Be.prototype.isLocked=function(e){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].lock};Be.prototype.setVal=function(e,t){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].val[this.stairs[e].val.length]=t};Be.prototype.getReversals=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=[];let n=this.stairs[e].direction*-1;for(let r=1;r<this.stairs[e].val.length;r++)(n===1&&this.stairs[e].val[r]>this.stairs[e].val[r-1]||n===-1&&this.stairs[e].val[r]<this.stairs[e].val[r-1])&&(t[t.length]=this.stairs[e].val[r-1],n=n*-1);return t.shift(),t};Be.prototype.reversalLimitReached=function(e){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e),this.getReversals(e).length>=this.stairs[e].reversalLimit&&this.stairs[e].reversalLimit!==0};Be.prototype.getFinalVal=function(e){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,e);const t=this.getReversals(e);if(!t.length)throw new Error("Staircase '"+this.stairs[e].name+"': Not enough reversals to calculate final value.");let n=0;for(let r=0;r<t.length;r++)n=n+t[r];return n/t.length};const rh=function(){};rh.prototype.UNDEFINED=function(e,t){if(e[t]===void 0)throw new Error("Unable to find the staircase '"+t+"'")};rh.prototype.ARG=function(e,t,n){if(t.length===0)throw new Error("Wrong number of arguments for the method '"+e+"'. Required: "+n)};Be.prototype.checkErr=new rh;function B_(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Jt(e,t){return new URLSearchParams(e.location.search).get(t)}function d$(e){let t,n,r,i,o,a,s;return{c(){t=S("main"),n=S("audio"),r=C(),i=S("button"),o=oe(e[0]),n.controls=!1},m(l,u){F(l,t,u),w(t,n),e[5](n),w(t,r),w(t,i),w(i,o),a||(s=Ie(i,"click",e[2]),a=!0)},p(l,[u]){u&1&&ze(o,l[0])},i:Me,o:Me,d(l){l&&R(t),e[5](null),a=!1,s()}}}function m$(e,t,n){let{pattern:r}=t,{cachedAudio:i=null}=t,{label:o="play audio"}=t,a=null,s;const l=(h,c)=>{c&&s&&(a=H8(c,h),hc(a,c.sampleRate,s))};Br(()=>l(r,i));const u=async()=>{s&&(n(1,s.currentTime=0,s),s.play())};function f(h){_t[h?"unshift":"push"](()=>{s=h,n(1,s)})}return e.$$set=h=>{"pattern"in h&&n(3,r=h.pattern),"cachedAudio"in h&&n(4,i=h.cachedAudio),"label"in h&&n(0,o=h.label)},[o,s,u,r,i,f]}class Pu extends et{constructor(t){super(),Qe(this,t,m$,d$,Je,{pattern:3,cachedAudio:4,label:0})}}function p$(e){let t,n,r,i,o,a;return{c(){t=S("main"),n=S("audio"),r=C(),i=S("button"),i.textContent="play audio",n.controls=!1},m(s,l){F(s,t,l),w(t,n),e[4](n),w(t,r),w(t,i),o||(a=Ie(i,"click",e[1]),o=!0)},p:Me,i:Me,o:Me,d(s){s&&R(t),e[4](null),o=!1,a()}}}function b$(e,t,n){let{audioData:r=null}=t,{sampleRate:i=null}=t,o;const a=u=>{u&&o&&hc(u,i,o)};Br(()=>a(r));const s=()=>{o&&(n(0,o.currentTime=0,o),o.play())};function l(u){_t[u?"unshift":"push"](()=>{o=u,n(0,o)})}return e.$$set=u=>{"audioData"in u&&n(2,r=u.audioData),"sampleRate"in u&&n(3,i=u.sampleRate)},e.$$.update=()=>{e.$$.dirty&4&&a(r)},[o,s,r,i,l]}class Wt extends et{constructor(t){super(),Qe(this,t,b$,p$,Je,{audioData:2,sampleRate:3})}}function l1(e){let t,n,r,i,o,a,s,l,u,f,h;return{c(){t=S("div"),n=S("p"),n.textContent=`In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.`,r=C(),i=S("p"),i.innerHTML=`For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.`,o=C(),a=S("p"),a.innerHTML=`By clicking <i>next step</i> you consent to participating in this study and
        data collection.`,s=C(),l=S("p"),l.innerHTML=`If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.`,u=C(),f=S("a"),h=S("button"),h.textContent="I do NOT consent and will not participate",A(n,"class","svelte-9uo0u8"),A(i,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"href","https://app.prolific.com/submissions/complete?cc="+P$)},m(c,m){F(c,t,m),w(t,n),w(t,r),w(t,i),w(t,o),w(t,a),w(t,s),w(t,l),w(t,u),w(t,f),w(f,h)},p:Me,d(c){c&&R(t)}}}function u1(e){let t,n,r,i,o,a,s,l,u,f;return i=new Wt({props:{audioData:e[19],sampleRate:e[17]}}),{c(){t=S("div"),n=S("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=C(),he(i.$$.fragment),o=C(),a=S("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",s=C(),l=S("a"),u=S("button"),u.textContent="I can NOT hear the audio and will NOT participate in this study",A(n,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(l,"href","https://app.prolific.com/submissions/complete?cc="+S$)},m(h,c){F(h,t,c),w(t,n),w(t,r),ue(i,t,null),w(t,o),w(t,a),w(t,s),w(t,l),w(l,u),f=!0},p(h,c){const m={};c[0]&524288&&(m.audioData=h[19]),c[0]&131072&&(m.sampleRate=h[17]),i.$set(m)},i(h){f||(B(i.$$.fragment,h),f=!0)},o(h){U(i.$$.fragment,h),f=!1},d(h){h&&R(t),fe(i)}}}function f1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b;return{c(){t=S("div"),n=S("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=C(),i=S("div"),o=S("button"),o.textContent="+",a=C(),s=S("button"),s.textContent="-",l=C(),u=fi("svg"),f=fi("rect"),p=C(),g=S("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,A(n,"class","svelte-9uo0u8"),A(f,"width",h=e[0]*.52),A(f,"height",c=e[25]*2),A(f,"fill","#ccc"),A(f,"rx","8"),A(u,"width",m=e[0]*.52+"px"),A(u,"height",d=e[25]*2+"px"),A(g,"class","svelte-9uo0u8")},m(v,y){F(v,t,y),w(t,n),w(t,r),w(t,i),w(i,o),w(i,a),w(i,s),w(t,l),w(t,u),w(u,f),w(t,p),w(t,g),_||(b=[Ie(o,"click",e[27]),Ie(s,"click",e[28])],_=!0)},p(v,y){y[0]&1&&h!==(h=v[0]*.52)&&A(f,"width",h),y[0]&33554432&&c!==(c=v[25]*2)&&A(f,"height",c),y[0]&1&&m!==(m=v[0]*.52+"px")&&A(u,"width",m),y[0]&33554432&&d!==(d=v[25]*2+"px")&&A(u,"height",d)},d(v){v&&R(t),_=!1,Nt(b)}}}function c1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b,v,y;return c=new Pu({props:{pattern:[.1],cachedAudio:e[1][0].audioBuffer,label:"hi-hat"}}),d=new Pu({props:{pattern:[.1],cachedAudio:e[1][1].audioBuffer,label:"snare drum"}}),g=new Pu({props:{pattern:[.1],cachedAudio:e[1][2].audioBuffer,label:"bass drum"}}),v=new Wt({props:{audioData:e[19],sampleRate:e[17]}}),{c(){t=S("div"),n=S("div"),n.innerHTML=`<p class="svelte-9uo0u8">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-9uo0u8">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. The timing error is made will always affect a single <i>beat</i>: notes that are supposed to played together will still be played at
          the same time, but this time will be either too early or too late.
          Notes after the mistake will also be affected and be early/late, such
          that only one time interval is shorter/longer than supposed.</p>`,r=oe(`
      This is what the pattern looks like in sheet music:
      `),i=S("div"),o=S("img"),l=C(),u=S("div"),f=S("span"),f.textContent="Click to hear the different sounds:",h=C(),he(c.$$.fragment),m=C(),he(d.$$.fragment),p=C(),he(g.$$.fragment),_=oe(`
      This is what the full, correctly played pattern sounds like:
      `),b=S("div"),he(v.$$.fragment),A(o,"width",a=e[0]+"px"),Nf(o.src,s="drum-pattern-labels3.png")||A(o,"src",s),A(o,"alt","drum pattern as sheet music"),Xe(u,"display","grid"),Xe(u,"grid-template-columns","repeat(4,max-content)"),Xe(u,"gap","10px"),Xe(u,"align-items","center")},m(x,M){F(x,t,M),w(t,n),w(t,r),w(t,i),w(i,o),w(t,l),w(t,u),w(u,f),w(u,h),ue(c,u,null),w(u,m),ue(d,u,null),w(u,p),ue(g,u,null),w(t,_),w(t,b),ue(v,b,null),y=!0},p(x,M){(!y||M[0]&1&&a!==(a=x[0]+"px"))&&A(o,"width",a);const P={};M[0]&2&&(P.cachedAudio=x[1][0].audioBuffer),c.$set(P);const $={};M[0]&2&&($.cachedAudio=x[1][1].audioBuffer),d.$set($);const N={};M[0]&2&&(N.cachedAudio=x[1][2].audioBuffer),g.$set(N);const I={};M[0]&524288&&(I.audioData=x[19]),M[0]&131072&&(I.sampleRate=x[17]),v.$set(I)},i(x){y||(B(c.$$.fragment,x),B(d.$$.fragment,x),B(g.$$.fragment,x),B(v.$$.fragment,x),y=!0)},o(x){U(c.$$.fragment,x),U(d.$$.fragment,x),U(g.$$.fragment,x),U(v.$$.fragment,x),y=!1},d(x){x&&R(t),fe(c),fe(d),fe(g),fe(v)}}}function h1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b,v,y,x,M,P,$,N,I,E,O,H;return{c(){t=S("div"),n=S("p"),n.textContent="Please answer the following questions about yourself:",r=C(),i=S("label"),o=S("span"),o.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,a=C(),s=S("select"),l=S("option"),l.textContent="none",u=S("option"),u.textContent="high school",f=S("option"),f.textContent="bachelor",h=S("option"),h.textContent="master",c=S("option"),c.textContent="phd",m=C(),d=S("label"),p=S("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=C(),_=S("input"),b=C(),v=S("label"),y=S("span"),y.textContent="For how many years do you roughly play it/them?",x=C(),M=S("input"),P=C(),$=S("label"),N=S("span"),N.textContent=`How many years of experience do you have with information
          visualization?`,I=C(),E=S("input"),A(n,"class","svelte-9uo0u8"),l.__value="none",we(l,l.__value),u.__value="highs",we(u,u.__value),f.__value="bachelor",we(f,f.__value),h.__value="master",we(h,h.__value),c.__value="phd",we(c,c.__value),e[7]===void 0&&Ar(()=>e[29].call(s)),A(i,"class","svelte-9uo0u8"),A(_,"type","text"),A(_,"placeholder","free text"),A(d,"class","svelte-9uo0u8"),A(M,"type","number"),A(M,"min","0"),A(M,"step","1"),A(v,"class","svelte-9uo0u8"),A(E,"type","number"),A(E,"min","0"),A(E,"step","1"),A($,"class","svelte-9uo0u8"),A(t,"class","demo-form svelte-9uo0u8")},m(D,T){F(D,t,T),w(t,n),w(t,r),w(t,i),w(i,o),w(i,a),w(i,s),w(s,l),w(s,u),w(s,f),w(s,h),w(s,c),or(s,e[7],!0),w(t,m),w(t,d),w(d,p),w(d,g),w(d,_),we(_,e[8]),w(t,b),w(t,v),w(v,y),w(v,x),w(v,M),we(M,e[9]),w(t,P),w(t,$),w($,N),w($,I),w($,E),we(E,e[10]),O||(H=[Ie(s,"change",e[29]),Ie(_,"input",e[30]),Ie(M,"input",e[31]),Ie(E,"input",e[32])],O=!0)},p(D,T){T[0]&128&&or(s,D[7]),T[0]&256&&_.value!==D[8]&&we(_,D[8]),T[0]&512&&At(M.value)!==D[9]&&we(M,D[9]),T[0]&1024&&At(E.value)!==D[10]&&we(E,D[10])},d(D){D&&R(t),O=!1,Nt(H)}}}function d1(e){let t,n,r=(e[13]||e[5])&&m1(e);return{c(){r&&r.c(),t=Yn()},m(i,o){r&&r.m(i,o),F(i,t,o),n=!0},p(i,o){i[13]||i[5]?r?(r.p(i,o),o[0]&8224&&B(r,1)):(r=m1(i),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(Ge(),U(r,1,1,()=>{r=null}),Ue())},i(i){n||(B(r),n=!0)},o(i){U(r),n=!1},d(i){i&&R(t),r&&r.d(i)}}}function m1(e){let t,n,r=e[4]+1+"",i,o,a=e[2].length+"",s,l,u,f,h,c,m,d,p;function g(M,P){return M[5]?y$:g$}let _=g(e),b=_(e);const v=[w$,_$],y=[];function x(M,P){return M[16]==="audio"?0:M[15]===!1?1:-1}return~(c=x(e))&&(m=y[c]=v[c](e)),{c(){t=S("p"),n=oe("Test number "),i=oe(r),o=oe(" of "),s=oe(a),l=C(),b.c(),u=C(),f=S("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=C(),m&&m.c(),d=Yn(),A(t,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8")},m(M,P){F(M,t,P),w(t,n),w(t,i),w(t,o),w(t,s),F(M,l,P),b.m(M,P),F(M,u,P),F(M,f,P),F(M,h,P),~c&&y[c].m(M,P),F(M,d,P),p=!0},p(M,P){(!p||P[0]&16)&&r!==(r=M[4]+1+"")&&ze(i,r),(!p||P[0]&4)&&a!==(a=M[2].length+"")&&ze(s,a),_===(_=g(M))&&b?b.p(M,P):(b.d(1),b=_(M),b&&(b.c(),b.m(u.parentNode,u)));let $=c;c=x(M),c===$?~c&&y[c].p(M,P):(m&&(Ge(),U(y[$],1,1,()=>{y[$]=null}),Ue()),~c?(m=y[c],m?m.p(M,P):(m=y[c]=v[c](M),m.c()),B(m,1),m.m(d.parentNode,d)):m=null)},i(M){p||(B(m),p=!0)},o(M){U(m),p=!1},d(M){M&&(R(t),R(l),R(u),R(f),R(h),R(d)),b.d(M),~c&&y[c].d(M)}}}function g$(e){let t,n,r=e[12]+1+"",i;return{c(){t=S("p"),n=oe("Trial number "),i=oe(r),A(t,"class","svelte-9uo0u8")},m(o,a){F(o,t,a),w(t,n),w(t,i)},p(o,a){a[0]&4096&&r!==(r=o[12]+1+"")&&ze(i,r)},d(o){o&&R(t)}}}function y$(e){let t,n,r,i,o,a,s,l,u,f,h,c;return{c(){t=S("p"),n=S("b"),n.textContent="Training:",r=oe(" the training will end when you got "),i=oe(O_),o=oe(` correct
          in a streak.`),a=S("br"),s=oe(`
          Current streak: `),l=oe(e[6]),u=oe("."),f=S("br"),h=C(),c=S("b"),c.innerHTML='<span id="trainingFeedback"></span>',A(t,"class","training svelte-9uo0u8")},m(m,d){F(m,t,d),w(t,n),w(t,r),w(t,i),w(t,o),w(t,a),w(t,s),w(t,l),w(t,u),w(t,f),w(t,h),w(t,c)},p(m,d){d[0]&64&&ze(l,m[6])},d(m){m&&R(t)}}}function _$(e){let t,n,r,i=(e[16]==="waveform"||Ia)&&p1(e),o=(e[16]==="color"||Ia)&&b1(e);return{c(){i&&i.c(),t=C(),o&&o.c(),n=Yn()},m(a,s){i&&i.m(a,s),F(a,t,s),o&&o.m(a,s),F(a,n,s),r=!0},p(a,s){a[16]==="waveform"||Ia?i?(i.p(a,s),s[0]&65536&&B(i,1)):(i=p1(a),i.c(),B(i,1),i.m(t.parentNode,t)):i&&(Ge(),U(i,1,1,()=>{i=null}),Ue()),a[16]==="color"||Ia?o?(o.p(a,s),s[0]&65536&&B(o,1)):(o=b1(a),o.c(),B(o,1),o.m(n.parentNode,n)):o&&(Ge(),U(o,1,1,()=>{o=null}),Ue())},i(a){r||(B(i),B(o),r=!0)},o(a){U(i),U(o),r=!1},d(a){a&&(R(t),R(n)),i&&i.d(a),o&&o.d(a)}}}function w$(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new Wt({props:{audioData:e[20],sampleRate:e[17]}}),a=new Wt({props:{audioData:e[21],sampleRate:e[17]}}),c=new El({props:{audioData:e[18],sampleRate:e[17],currentTrialNumber:e[12]}}),{c(){t=S("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&1048576&&(g.audioData=d[20]),p[0]&131072&&(g.sampleRate=d[17]),i.$set(g);const _={};p[0]&2097152&&(_.audioData=d[21]),p[0]&131072&&(_.sampleRate=d[17]),a.$set(_);const b={};p[0]&262144&&(b.audioData=d[18]),p[0]&131072&&(b.sampleRate=d[17]),p[0]&4096&&(b.currentTrialNumber=d[12]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function p1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new yn({props:{audioData:e[20],width:e[0]/2,height:e[25]/2}}),a=new yn({props:{audioData:e[21],width:e[0]/2,height:e[25]/2}}),c=new yn({props:{audioData:e[18],width:e[0],height:e[25]}}),{c(){t=S("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&1048576&&(g.audioData=d[20]),p[0]&1&&(g.width=d[0]/2),p[0]&33554432&&(g.height=d[25]/2),i.$set(g);const _={};p[0]&2097152&&(_.audioData=d[21]),p[0]&1&&(_.width=d[0]/2),p[0]&33554432&&(_.height=d[25]/2),a.$set(_);const b={};p[0]&262144&&(b.audioData=d[18]),p[0]&1&&(b.width=d[0]),p[0]&33554432&&(b.height=d[25]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function b1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new wn({props:{pattern:e[23],width:e[0]/2,height:e[25]*.7}}),a=new wn({props:{pattern:e[24],width:e[0]/2,height:e[25]*.7}}),c=new wn({props:{pattern:e[22],width:e[0],height:e[25]}}),{c(){t=S("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&8388608&&(g.pattern=d[23]),p[0]&1&&(g.width=d[0]/2),p[0]&33554432&&(g.height=d[25]*.7),i.$set(g);const _={};p[0]&16777216&&(_.pattern=d[24]),p[0]&1&&(_.width=d[0]/2),p[0]&33554432&&(_.height=d[25]*.7),a.$set(_);const b={};p[0]&4194304&&(b.pattern=d[22]),p[0]&1&&(b.width=d[0]),p[0]&33554432&&(b.height=d[25]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function g1(e){let t,n,r,i,o,a,s;return{c(){t=S("div"),n=oe(`Almost done!
      `),r=S("p"),r.textContent="Do you have any final feedback/comments?",i=C(),o=S("textarea"),A(r,"class","svelte-9uo0u8")},m(l,u){F(l,t,u),w(t,n),w(t,r),w(t,i),w(t,o),we(o,e[11]),a||(s=Ie(o,"input",e[33]),a=!0)},p(l,u){u[0]&2048&&we(o,l[11])},d(l){l&&R(t),a=!1,s()}}}function y1(e){let t,n,r,i;return{c(){t=S("div"),t.textContent="Thanks for participating!",n=C(),r=S("a"),i=S("b"),i.textContent="Click here to get your compensation",A(r,"href","https://app.prolific.com/submissions/complete?cc="+x$)},m(o,a){F(o,t,a),F(o,n,a),F(o,r,a),w(r,i)},p:Me,d(o){o&&(R(t),R(n),R(r))}}}function _1(e){let t,n,r;return{c(){t=S("button"),t.textContent="next step",A(t,"class","next-btn svelte-9uo0u8")},m(i,o){F(i,t,o),n||(r=Ie(t,"click",e[26]),n=!0)},p:Me,d(i){i&&R(t),n=!1,r()}}}function v$(e){let t,n,r,i,o,a,s,l,u,f,h=e[3]==="consent"&&l1(),c=e[3]==="start1"&&u1(e),m=e[3]==="start2"&&f1(e),d=e[3]==="start3"&&c1(e),p=e[3]==="demo"&&h1(e),g=e[3]==="tests"&&d1(e),_=e[3]==="feedback"&&g1(e),b=e[3]==="done"&&y1(),v=!e[14]&&e[3]!=="done"&&!e[5]&&_1(e);return{c(){t=S("main"),h&&h.c(),n=C(),c&&c.c(),r=C(),m&&m.c(),i=C(),d&&d.c(),o=C(),p&&p.c(),a=C(),g&&g.c(),s=C(),_&&_.c(),l=C(),b&&b.c(),u=C(),v&&v.c(),A(t,"class","svelte-9uo0u8")},m(y,x){F(y,t,x),h&&h.m(t,null),w(t,n),c&&c.m(t,null),w(t,r),m&&m.m(t,null),w(t,i),d&&d.m(t,null),w(t,o),p&&p.m(t,null),w(t,a),g&&g.m(t,null),w(t,s),_&&_.m(t,null),w(t,l),b&&b.m(t,null),w(t,u),v&&v.m(t,null),f=!0},p(y,x){y[3]==="consent"?h?h.p(y,x):(h=l1(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),y[3]==="start1"?c?(c.p(y,x),x[0]&8&&B(c,1)):(c=u1(y),c.c(),B(c,1),c.m(t,r)):c&&(Ge(),U(c,1,1,()=>{c=null}),Ue()),y[3]==="start2"?m?m.p(y,x):(m=f1(y),m.c(),m.m(t,i)):m&&(m.d(1),m=null),y[3]==="start3"?d?(d.p(y,x),x[0]&8&&B(d,1)):(d=c1(y),d.c(),B(d,1),d.m(t,o)):d&&(Ge(),U(d,1,1,()=>{d=null}),Ue()),y[3]==="demo"?p?p.p(y,x):(p=h1(y),p.c(),p.m(t,a)):p&&(p.d(1),p=null),y[3]==="tests"?g?(g.p(y,x),x[0]&8&&B(g,1)):(g=d1(y),g.c(),B(g,1),g.m(t,s)):g&&(Ge(),U(g,1,1,()=>{g=null}),Ue()),y[3]==="feedback"?_?_.p(y,x):(_=g1(y),_.c(),_.m(t,l)):_&&(_.d(1),_=null),y[3]==="done"?b?b.p(y,x):(b=y1(),b.c(),b.m(t,u)):b&&(b.d(1),b=null),!y[14]&&y[3]!=="done"&&!y[5]?v?v.p(y,x):(v=_1(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(y){f||(B(c),B(d),B(g),f=!0)},o(y){U(c),U(d),U(g),f=!1},d(y){y&&R(t),h&&h.d(),c&&c.d(),m&&m.d(),d&&d.d(),p&&p.d(),g&&g.d(),_&&_.d(),b&&b.d(),v&&v.d()}}}const w1="8beat_backbeat_120bpm",Ia=!1,M$="/store",v1=120,Kr=.1,x$="C11VVLWN",P$="COYRYK1U",S$="CILRS92A",M1=4;let O_=8;function A$(e,t,n){let r;console.log(w1,v1,Kr);let i=Jt(window,"PROLIFIC_PID"),o=Jt(window,"STUDY_ID"),a=Jt(window,"SESSION_ID"),s=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]},{instrument:"snare",sample:"./snare2.mp3",beats:[2,4]},{instrument:"bass",sample:"./bass2.mp3",beats:[1,3]}];const l=(X=0)=>{if(X===0)return s;const j=rt([s]),k=j.filter(le=>le.instrument==="hihat")[0],q=j.filter(le=>le.instrument==="snare")[0],W=j.filter(le=>le.instrument==="bass")[0];W.times[1]=W.timesOriginal[1]+X,k.times[4]=k.timesOriginal[4]+X;for(const le of[6,7,8])k.times[le-1]=k.timesOriginal[le-1]+X;return q.times[1]=q.timesOriginal[1]+X,j};let u=["audio","waveform","color"].map(X=>({encoding:X})),f="consent",h=0,c,m=!1,d=0,p=0,g="",_="",b=0,v=0,y="",x=0,M,P={},$=[],N,I,E=!1,O=!1,H=!1,D="",T=600,z=[],ae=0;const ne=[];Br(()=>{document.querySelector("html").addEventListener("keyup",re)});const se=()=>{I=new Be({ratio:{firstVal:Kr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Kr],direction:-1,reversalLimit:12,verbosity:0}}),I.init()};function Y(){f==="consent"?n(3,f="start1"):f==="start1"?n(3,f="start2"):f==="start2"?n(3,f="start3"):f==="start3"?(n(2,u=dc(u)),n(3,f="demo")):f==="demo"?g==""||_==""?alert("please fill the form first"):(n(3,f="tests"),n(4,h=0)):f==="tests"?h>=u.length?n(3,f="feedback"):(n(16,D=u[h].encoding),d===0?(n(5,m=!0),me()):(K(),n(6,d=0))):f==="feedback"&&(G(),n(3,f="done"))}function K(){se(),n(12,x=0),M=0,N=0,n(13,E=!0),z=[],$=[],c=new Date,Z()}function Z(){console.log("Starting trial "+x),P={},n(14,O=!0),Q()}function Q(){let j=I.getLast("ratio");j=Math.random()<.5?j:-j,P.deviation=j;const k=Se(j);n(22,$e=k.noteTimes),k.noteTimesSeparate,n(17,L=k.sampleRate),n(18,pe=k.renderedAudio),console.log("generated pattern"),n(15,H=!0),window.setTimeout(()=>{n(15,H=!1),P.startTime=new Date},1e3)}function me(){console.log("show training");let X=(Math.random()*.5+.5)*Kr;X=Math.random()<.5?X:-X,p=X,console.log("training severity",X);const j=Se(X);n(22,$e=j.noteTimes),j.noteTimesSeparate,n(17,L=j.sampleRate),n(18,pe=j.renderedAudio),console.log("generated training",j),n(12,x++,x)}function de(X){if(!O)return;n(14,O=!1),P.decisionChoice=X,P.errorCode=0,P.timeTaken=(new Date-P.startTime)/1e3;const j=N;(P.decisionChoice==0&&P.deviation<0||P.decisionChoice==1&&P.deviation>0)&&P.errorCode==0&&N++,P.errorCode==0&&(I.next(j!=N),$[$.length]=P),P.errorCode==0&&M++,n(12,x++,x),I.reversalLimitReached("ratio")?ee():Z()}function ce(X){const j=document.querySelectorAll("#trainingFeedback")[0];X==="early"&&p<0||X==="late"&&p>0?(n(6,d++,d),d>=O_?n(5,m=!1):j.innerHTML='<span class="correct">correct!</span>'):(n(6,d=0),j.innerHTML='<span class="wrong">wrong!</span>'),console.log(j),me()}function ee(){n(13,E=!1),n(14,O=!1),z=[],ae=I.getFinalVal("ratio");for(let j=0;j<$.length;j++)z[j]=$[j].deviation;console.log(z);const X=new Date;ne.push({encoding:D,final:ae,data:z,score:N,testNumber:h,trialCount:x+1,trials:$,validTrialCount:M+1,testTimeSeconds:(X-c)/1e3}),n(4,h++,h)}function re(X){if(!H)switch(X.key){case"ArrowLeft":O&&de(0),m&&ce("early");break;case"ArrowRight":O&&de(1),m&&ce("late");break;case"PageDown":!O&&f!=="done"&&Y()}}function G(){const X={studyName:w1,studyStep:f,demographics:{partID:i,studyID:o,sessionID:a,partEduation:g,partMusicInstr:_,partMusicInstrYears:b,partVisExperienceYears:v,partFeedback:y,visWidth:T},date:new Date().toISOString(),tests:ne};console.log("saving data",X);const j=JSON.stringify(X,void 0,2);fetch(M$,{method:"POST",headers:{"Content-Type":"application/json"},body:j}).then(k=>{console.log("Data saved:",k)})}let J=Lo(v1);const te=M1*J;let L,pe=null,ie=null,be=null,Ee=null,$e=[],De=[],Oe=[];(async()=>{n(1,s=await Promise.all(s.map(async q=>({...q,times:q.beats.map(W=>J*(W-1)),timesOriginal:q.beats.map(W=>J*(W-1)),audioBuffer:await cl(q.sample)}))));const X=Se(0),j=Se(-Kr),k=Se(Kr);X.noteTimes,n(23,De=j.noteTimes),n(24,Oe=k.noteTimes),n(19,ie=X.renderedAudio),n(20,be=j.renderedAudio),n(21,Ee=k.renderedAudio),n(17,L=s[0].audioBuffer.sampleRate)})();const rt=X=>{const j=X[0].map(k=>({...k,beats:[...k.beats],times:[...k.times],timesOriginal:[...k.timesOriginal]}));for(let k=1;k<X.length;k++){const q=X[k];for(const W of q){const le=j.filter(Ce=>Ce.instrument===W.instrument)[0];le.beats=[...le.beats,...W.beats.map(Ce=>Ce+k*M1)],le.times=[...le.times,...W.times.map(Ce=>Ce+k*te)],le.timesOriginal=[...le.timesOriginal,...W.timesOriginal.map(Ce=>Ce+k*te)]}}return j},Se=X=>{if(!s[0].audioBuffer)return;const k=[l(X)],q=rt(k),W=q.map(ye=>ye.times).flat().sort(),le=q.map(ye=>ye.times.map(En=>({time:En,instr:ye.instrument}))).flat(1/0).sort((ye,En)=>{ye.time-En.time}),Ce=q[0].audioBuffer.sampleRate,V=So(q,te*k.length+.1,Ce);return{noteTimes:W,noteTimesSeparate:le,sampleRate:Ce,renderedAudio:V}},ln=()=>n(0,T*=1.05),je=()=>n(0,T*=.95);function Le(){g=Bs(this),n(7,g)}function kn(){_=this.value,n(8,_)}function mt(){b=At(this.value),n(9,b)}function Te(){v=At(this.value),n(10,v)}function un(){y=this.value,n(11,y)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(25,r=T/6)},[T,s,u,f,h,m,d,g,_,b,v,y,x,E,O,H,D,L,pe,ie,be,Ee,$e,De,Oe,r,Y,ln,je,Le,kn,mt,Te,un]}class k$ extends et{constructor(t){super(),Qe(this,t,A$,v$,Je,{},null,[-1,-1,-1])}}function x1(e){let t,n,r,i,o,a,s,l,u,f,h;return{c(){t=S("div"),n=S("p"),n.textContent=`In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.`,r=C(),i=S("p"),i.innerHTML=`For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.`,o=C(),a=S("p"),a.innerHTML=`By clicking <i>next step</i> you consent to participating in this study and
        data collection.`,s=C(),l=S("p"),l.innerHTML=`If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.`,u=C(),f=S("a"),h=S("button"),h.textContent="I do NOT consent and will not participate",A(n,"class","svelte-9uo0u8"),A(i,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"href","https://app.prolific.com/submissions/complete?cc="+L$)},m(c,m){F(c,t,m),w(t,n),w(t,r),w(t,i),w(t,o),w(t,a),w(t,s),w(t,l),w(t,u),w(t,f),w(f,h)},p:Me,d(c){c&&R(t)}}}function P1(e){let t,n,r,i,o,a,s,l,u,f;return i=new Wt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=S("div"),n=S("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=C(),he(i.$$.fragment),o=C(),a=S("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",s=C(),l=S("a"),u=S("button"),u.textContent="I can NOT hear the audio and will NOT participate in this study",A(n,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(l,"href","https://app.prolific.com/submissions/complete?cc="+R$)},m(h,c){F(h,t,c),w(t,n),w(t,r),ue(i,t,null),w(t,o),w(t,a),w(t,s),w(t,l),w(l,u),f=!0},p(h,c){const m={};c[0]&262144&&(m.audioData=h[18]),c[0]&65536&&(m.sampleRate=h[16]),i.$set(m)},i(h){f||(B(i.$$.fragment,h),f=!0)},o(h){U(i.$$.fragment,h),f=!1},d(h){h&&R(t),fe(i)}}}function S1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b;return{c(){t=S("div"),n=S("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=C(),i=S("div"),o=S("button"),o.textContent="+",a=C(),s=S("button"),s.textContent="-",l=C(),u=fi("svg"),f=fi("rect"),p=C(),g=S("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,A(n,"class","svelte-9uo0u8"),A(f,"width",h=e[0]*.52),A(f,"height",c=e[24]*2),A(f,"fill","#ccc"),A(f,"rx","8"),A(u,"width",m=e[0]*.52+"px"),A(u,"height",d=e[24]*2+"px"),A(g,"class","svelte-9uo0u8")},m(v,y){F(v,t,y),w(t,n),w(t,r),w(t,i),w(i,o),w(i,a),w(i,s),w(t,l),w(t,u),w(u,f),w(t,p),w(t,g),_||(b=[Ie(o,"click",e[26]),Ie(s,"click",e[27])],_=!0)},p(v,y){y[0]&1&&h!==(h=v[0]*.52)&&A(f,"width",h),y[0]&16777216&&c!==(c=v[24]*2)&&A(f,"height",c),y[0]&1&&m!==(m=v[0]*.52+"px")&&A(u,"width",m),y[0]&16777216&&d!==(d=v[24]*2+"px")&&A(u,"height",d)},d(v){v&&R(t),_=!1,Nt(b)}}}function A1(e){let t,n,r,i,o,a,s,l,u,f,h;return f=new Wt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=S("div"),n=S("div"),n.innerHTML=`<p class="svelte-9uo0u8">Imagine you are a music teacher and want to give feedback to your
          students. As listening to all they play takes too much time, you try
          different visualizations that show you their note timing.</p> <p class="svelte-9uo0u8">In this study, the goal is to learn how these visualizations compare
          to each other and to listening. We want to know, how small of a timing
          error is still clear to see/hear as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. Notes after the mistake will also be affected and be
          early/late, such that only one time interval is shorter/longer than
          supposed.</p>`,r=oe(`
      This is what the pattern looks like in sheet music:
      `),i=S("div"),o=S("img"),l=oe(`
      This is what the full, correctly played pattern sounds like:
      `),u=S("div"),he(f.$$.fragment),A(o,"width",a=e[0]+"px"),Nf(o.src,s="8note-pattern-hihat.png")||A(o,"src",s),A(o,"alt","drum pattern as sheet music")},m(c,m){F(c,t,m),w(t,n),w(t,r),w(t,i),w(i,o),w(t,l),w(t,u),ue(f,u,null),h=!0},p(c,m){(!h||m[0]&1&&a!==(a=c[0]+"px"))&&A(o,"width",a);const d={};m[0]&262144&&(d.audioData=c[18]),m[0]&65536&&(d.sampleRate=c[16]),f.$set(d)},i(c){h||(B(f.$$.fragment,c),h=!0)},o(c){U(f.$$.fragment,c),h=!1},d(c){c&&R(t),fe(f)}}}function k1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b,v,y,x,M,P,$,N,I,E,O,H;return{c(){t=S("div"),n=S("p"),n.textContent="Please answer the following questions about yourself:",r=C(),i=S("label"),o=S("span"),o.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,a=C(),s=S("select"),l=S("option"),l.textContent="none",u=S("option"),u.textContent="high school",f=S("option"),f.textContent="bachelor",h=S("option"),h.textContent="master",c=S("option"),c.textContent="phd",m=C(),d=S("label"),p=S("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=C(),_=S("input"),b=C(),v=S("label"),y=S("span"),y.textContent="For how many years do you roughly play it/them?",x=C(),M=S("input"),P=C(),$=S("label"),N=S("span"),N.textContent=`How many years of experience do you have with information
          visualization?`,I=C(),E=S("input"),A(n,"class","svelte-9uo0u8"),l.__value="none",we(l,l.__value),u.__value="highs",we(u,u.__value),f.__value="bachelor",we(f,f.__value),h.__value="master",we(h,h.__value),c.__value="phd",we(c,c.__value),e[6]===void 0&&Ar(()=>e[28].call(s)),A(i,"class","svelte-9uo0u8"),A(_,"type","text"),A(_,"placeholder","free text"),A(d,"class","svelte-9uo0u8"),A(M,"type","number"),A(M,"min","0"),A(M,"step","1"),A(v,"class","svelte-9uo0u8"),A(E,"type","number"),A(E,"min","0"),A(E,"step","1"),A($,"class","svelte-9uo0u8"),A(t,"class","demo-form svelte-9uo0u8")},m(D,T){F(D,t,T),w(t,n),w(t,r),w(t,i),w(i,o),w(i,a),w(i,s),w(s,l),w(s,u),w(s,f),w(s,h),w(s,c),or(s,e[6],!0),w(t,m),w(t,d),w(d,p),w(d,g),w(d,_),we(_,e[7]),w(t,b),w(t,v),w(v,y),w(v,x),w(v,M),we(M,e[8]),w(t,P),w(t,$),w($,N),w($,I),w($,E),we(E,e[9]),O||(H=[Ie(s,"change",e[28]),Ie(_,"input",e[29]),Ie(M,"input",e[30]),Ie(E,"input",e[31])],O=!0)},p(D,T){T[0]&64&&or(s,D[6]),T[0]&128&&_.value!==D[7]&&we(_,D[7]),T[0]&256&&At(M.value)!==D[8]&&we(M,D[8]),T[0]&512&&At(E.value)!==D[9]&&we(E,D[9])},d(D){D&&R(t),O=!1,Nt(H)}}}function E1(e){let t,n,r=(e[12]||e[4])&&C1(e);return{c(){r&&r.c(),t=Yn()},m(i,o){r&&r.m(i,o),F(i,t,o),n=!0},p(i,o){i[12]||i[4]?r?(r.p(i,o),o[0]&4112&&B(r,1)):(r=C1(i),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(Ge(),U(r,1,1,()=>{r=null}),Ue())},i(i){n||(B(r),n=!0)},o(i){U(r),n=!1},d(i){i&&R(t),r&&r.d(i)}}}function C1(e){let t,n,r=e[3]+1+"",i,o,a=e[1].length+"",s,l,u,f,h,c,m,d,p;function g(M,P){return M[4]?C$:E$}let _=g(e),b=_(e);const v=[$$,T$],y=[];function x(M,P){return M[15]==="audio"?0:M[14]===!1?1:-1}return~(c=x(e))&&(m=y[c]=v[c](e)),{c(){t=S("p"),n=oe("Test number "),i=oe(r),o=oe(" of "),s=oe(a),l=C(),b.c(),u=C(),f=S("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=C(),m&&m.c(),d=Yn(),A(t,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8")},m(M,P){F(M,t,P),w(t,n),w(t,i),w(t,o),w(t,s),F(M,l,P),b.m(M,P),F(M,u,P),F(M,f,P),F(M,h,P),~c&&y[c].m(M,P),F(M,d,P),p=!0},p(M,P){(!p||P[0]&8)&&r!==(r=M[3]+1+"")&&ze(i,r),(!p||P[0]&2)&&a!==(a=M[1].length+"")&&ze(s,a),_===(_=g(M))&&b?b.p(M,P):(b.d(1),b=_(M),b&&(b.c(),b.m(u.parentNode,u)));let $=c;c=x(M),c===$?~c&&y[c].p(M,P):(m&&(Ge(),U(y[$],1,1,()=>{y[$]=null}),Ue()),~c?(m=y[c],m?m.p(M,P):(m=y[c]=v[c](M),m.c()),B(m,1),m.m(d.parentNode,d)):m=null)},i(M){p||(B(m),p=!0)},o(M){U(m),p=!1},d(M){M&&(R(t),R(l),R(u),R(f),R(h),R(d)),b.d(M),~c&&y[c].d(M)}}}function E$(e){let t,n,r=e[11]+1+"",i;return{c(){t=S("p"),n=oe("Trial number "),i=oe(r),A(t,"class","svelte-9uo0u8")},m(o,a){F(o,t,a),w(t,n),w(t,i)},p(o,a){a[0]&2048&&r!==(r=o[11]+1+"")&&ze(i,r)},d(o){o&&R(t)}}}function C$(e){let t,n,r,i,o,a,s,l,u,f,h,c;return{c(){t=S("p"),n=S("b"),n.textContent="Training:",r=oe(" the training will end when you got "),i=oe(q_),o=oe(` correct
          in a streak.`),a=S("br"),s=oe(`
          Current streak: `),l=oe(e[5]),u=oe("."),f=S("br"),h=C(),c=S("b"),c.innerHTML='<span id="trainingFeedback"></span>',A(t,"class","training svelte-9uo0u8")},m(m,d){F(m,t,d),w(t,n),w(t,r),w(t,i),w(t,o),w(t,a),w(t,s),w(t,l),w(t,u),w(t,f),w(t,h),w(t,c)},p(m,d){d[0]&32&&ze(l,m[5])},d(m){m&&R(t)}}}function T$(e){let t,n,r,i=(e[15]==="waveform"||La)&&T1(e),o=(e[15]==="color"||La)&&$1(e);return{c(){i&&i.c(),t=C(),o&&o.c(),n=Yn()},m(a,s){i&&i.m(a,s),F(a,t,s),o&&o.m(a,s),F(a,n,s),r=!0},p(a,s){a[15]==="waveform"||La?i?(i.p(a,s),s[0]&32768&&B(i,1)):(i=T1(a),i.c(),B(i,1),i.m(t.parentNode,t)):i&&(Ge(),U(i,1,1,()=>{i=null}),Ue()),a[15]==="color"||La?o?(o.p(a,s),s[0]&32768&&B(o,1)):(o=$1(a),o.c(),B(o,1),o.m(n.parentNode,n)):o&&(Ge(),U(o,1,1,()=>{o=null}),Ue())},i(a){r||(B(i),B(o),r=!0)},o(a){U(i),U(o),r=!1},d(a){a&&(R(t),R(n)),i&&i.d(a),o&&o.d(a)}}}function $$(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new Wt({props:{audioData:e[19],sampleRate:e[16]}}),a=new Wt({props:{audioData:e[20],sampleRate:e[16]}}),c=new El({props:{audioData:e[17],sampleRate:e[16],currentTrialNumber:e[11]}}),{c(){t=S("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&524288&&(g.audioData=d[19]),p[0]&65536&&(g.sampleRate=d[16]),i.$set(g);const _={};p[0]&1048576&&(_.audioData=d[20]),p[0]&65536&&(_.sampleRate=d[16]),a.$set(_);const b={};p[0]&131072&&(b.audioData=d[17]),p[0]&65536&&(b.sampleRate=d[16]),p[0]&2048&&(b.currentTrialNumber=d[11]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function T1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new yn({props:{audioData:e[19],width:e[0]/2,height:e[24]/2}}),a=new yn({props:{audioData:e[20],width:e[0]/2,height:e[24]/2}}),c=new yn({props:{audioData:e[17],width:e[0],height:e[24]}}),{c(){t=S("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&524288&&(g.audioData=d[19]),p[0]&1&&(g.width=d[0]/2),p[0]&16777216&&(g.height=d[24]/2),i.$set(g);const _={};p[0]&1048576&&(_.audioData=d[20]),p[0]&1&&(_.width=d[0]/2),p[0]&16777216&&(_.height=d[24]/2),a.$set(_);const b={};p[0]&131072&&(b.audioData=d[17]),p[0]&1&&(b.width=d[0]),p[0]&16777216&&(b.height=d[24]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function $1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new wn({props:{pattern:e[22],width:e[0]/2,height:e[24]*.7}}),a=new wn({props:{pattern:e[23],width:e[0]/2,height:e[24]*.7}}),c=new wn({props:{pattern:e[21],width:e[0],height:e[24]}}),{c(){t=S("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&4194304&&(g.pattern=d[22]),p[0]&1&&(g.width=d[0]/2),p[0]&16777216&&(g.height=d[24]*.7),i.$set(g);const _={};p[0]&8388608&&(_.pattern=d[23]),p[0]&1&&(_.width=d[0]/2),p[0]&16777216&&(_.height=d[24]*.7),a.$set(_);const b={};p[0]&2097152&&(b.pattern=d[21]),p[0]&1&&(b.width=d[0]),p[0]&16777216&&(b.height=d[24]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function D1(e){let t,n,r,i,o,a,s;return{c(){t=S("div"),n=oe(`Almost done!
      `),r=S("p"),r.textContent="Do you have any final feedback/comments?",i=C(),o=S("textarea"),A(r,"class","svelte-9uo0u8")},m(l,u){F(l,t,u),w(t,n),w(t,r),w(t,i),w(t,o),we(o,e[10]),a||(s=Ie(o,"input",e[32]),a=!0)},p(l,u){u[0]&1024&&we(o,l[10])},d(l){l&&R(t),a=!1,s()}}}function N1(e){let t,n,r,i;return{c(){t=S("div"),t.textContent="Thanks for participating!",n=C(),r=S("a"),i=S("b"),i.textContent="Click here to get your compensation",A(r,"href","https://app.prolific.com/submissions/complete?cc="+I$)},m(o,a){F(o,t,a),F(o,n,a),F(o,r,a),w(r,i)},p:Me,d(o){o&&(R(t),R(n),R(r))}}}function I1(e){let t,n,r;return{c(){t=S("button"),t.textContent="next step",A(t,"class","next-btn svelte-9uo0u8")},m(i,o){F(i,t,o),n||(r=Ie(t,"click",e[25]),n=!0)},p:Me,d(i){i&&R(t),n=!1,r()}}}function D$(e){let t,n,r,i,o,a,s,l,u,f,h=e[2]==="consent"&&x1(),c=e[2]==="start1"&&P1(e),m=e[2]==="start2"&&S1(e),d=e[2]==="start3"&&A1(e),p=e[2]==="demo"&&k1(e),g=e[2]==="tests"&&E1(e),_=e[2]==="feedback"&&D1(e),b=e[2]==="done"&&N1(),v=!e[13]&&e[2]!=="done"&&!e[4]&&I1(e);return{c(){t=S("main"),h&&h.c(),n=C(),c&&c.c(),r=C(),m&&m.c(),i=C(),d&&d.c(),o=C(),p&&p.c(),a=C(),g&&g.c(),s=C(),_&&_.c(),l=C(),b&&b.c(),u=C(),v&&v.c(),A(t,"class","svelte-9uo0u8")},m(y,x){F(y,t,x),h&&h.m(t,null),w(t,n),c&&c.m(t,null),w(t,r),m&&m.m(t,null),w(t,i),d&&d.m(t,null),w(t,o),p&&p.m(t,null),w(t,a),g&&g.m(t,null),w(t,s),_&&_.m(t,null),w(t,l),b&&b.m(t,null),w(t,u),v&&v.m(t,null),f=!0},p(y,x){y[2]==="consent"?h?h.p(y,x):(h=x1(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),y[2]==="start1"?c?(c.p(y,x),x[0]&4&&B(c,1)):(c=P1(y),c.c(),B(c,1),c.m(t,r)):c&&(Ge(),U(c,1,1,()=>{c=null}),Ue()),y[2]==="start2"?m?m.p(y,x):(m=S1(y),m.c(),m.m(t,i)):m&&(m.d(1),m=null),y[2]==="start3"?d?(d.p(y,x),x[0]&4&&B(d,1)):(d=A1(y),d.c(),B(d,1),d.m(t,o)):d&&(Ge(),U(d,1,1,()=>{d=null}),Ue()),y[2]==="demo"?p?p.p(y,x):(p=k1(y),p.c(),p.m(t,a)):p&&(p.d(1),p=null),y[2]==="tests"?g?(g.p(y,x),x[0]&4&&B(g,1)):(g=E1(y),g.c(),B(g,1),g.m(t,s)):g&&(Ge(),U(g,1,1,()=>{g=null}),Ue()),y[2]==="feedback"?_?_.p(y,x):(_=D1(y),_.c(),_.m(t,l)):_&&(_.d(1),_=null),y[2]==="done"?b?b.p(y,x):(b=N1(),b.c(),b.m(t,u)):b&&(b.d(1),b=null),!y[13]&&y[2]!=="done"&&!y[4]?v?v.p(y,x):(v=I1(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(y){f||(B(c),B(d),B(g),f=!0)},o(y){U(c),U(d),U(g),f=!1},d(y){y&&R(t),h&&h.d(),c&&c.d(),m&&m.d(),d&&d.d(),p&&p.d(),g&&g.d(),_&&_.d(),b&&b.d(),v&&v.d()}}}const L1="8beat_hihat_8ths_120bpm",La=!1,N$="/store",R1=120,Jr=.1,I$="C11VVLWN",L$="COYRYK1U",R$="CILRS92A",F1=4;let q_=8;function F$(e,t,n){let r;console.log(L1,R1,Jr);let i=Jt(window,"PROLIFIC_PID"),o=Jt(window,"STUDY_ID"),a=Jt(window,"SESSION_ID"),s=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]}];const l=(X=0)=>{if(X===0)return s;const j=rt([s]),k=j.filter(q=>q.instrument==="hihat")[0];for(const q of[5,6,7,8])k.times[q-1]=k.timesOriginal[q-1]+X;return j};let u=["audio","waveform","color"].map(X=>({encoding:X})),f="consent",h=0,c,m=!1,d=0,p=0,g="",_="",b=0,v=0,y="",x=0,M,P={},$=[],N,I,E=!1,O=!1,H=!1,D="",T=600,z=[],ae=0;const ne=[];Br(()=>{document.querySelector("html").addEventListener("keyup",re)});const se=()=>{I=new Be({ratio:{firstVal:Jr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Jr],direction:-1,reversalLimit:12,verbosity:0}}),I.init()};function Y(){f==="consent"?n(2,f="start1"):f==="start1"?n(2,f="start2"):f==="start2"?n(2,f="start3"):f==="start3"?(n(1,u=dc(u)),n(2,f="demo")):f==="demo"?g==""||_==""?alert("please fill the form first"):(n(2,f="tests"),n(3,h=0)):f==="tests"?h>=u.length?n(2,f="feedback"):(n(15,D=u[h].encoding),d===0?(n(4,m=!0),me()):(K(),n(5,d=0))):f==="feedback"&&(G(),n(2,f="done"))}function K(){se(),n(11,x=0),M=0,N=0,n(12,E=!0),z=[],$=[],c=new Date,Z()}function Z(){console.log("Starting trial "+x),P={},n(13,O=!0),Q()}function Q(){let j=I.getLast("ratio");j=Math.random()<.5?j:-j,P.deviation=j;const k=Se(j);n(21,$e=k.noteTimes),k.noteTimesSeparate,n(16,L=k.sampleRate),n(17,pe=k.renderedAudio),console.log("generated pattern"),n(14,H=!0),window.setTimeout(()=>{n(14,H=!1),P.startTime=new Date},1e3)}function me(){console.log("show training");let X=(Math.random()*.5+.5)*Jr;X=Math.random()<.5?X:-X,p=X,console.log("training severity",X);const j=Se(X);n(21,$e=j.noteTimes),j.noteTimesSeparate,n(16,L=j.sampleRate),n(17,pe=j.renderedAudio),console.log("generated training",j),n(11,x++,x)}function de(X){if(!O)return;n(13,O=!1),P.decisionChoice=X,P.errorCode=0,P.timeTaken=(new Date-P.startTime)/1e3;const j=N;(P.decisionChoice==0&&P.deviation<0||P.decisionChoice==1&&P.deviation>0)&&P.errorCode==0&&N++,P.errorCode==0&&(I.next(j!=N),$[$.length]=P),P.errorCode==0&&M++,n(11,x++,x),I.reversalLimitReached("ratio")?ee():Z()}function ce(X){const j=document.querySelectorAll("#trainingFeedback")[0];X==="early"&&p<0||X==="late"&&p>0?(n(5,d++,d),d>=q_?n(4,m=!1):j.innerHTML='<span class="correct">correct!</span>'):(n(5,d=0),j.innerHTML='<span class="wrong">wrong!</span>'),console.log(j),me()}function ee(){n(12,E=!1),n(13,O=!1),z=[],ae=I.getFinalVal("ratio");for(let j=0;j<$.length;j++)z[j]=$[j].deviation;console.log(z);const X=new Date;ne.push({encoding:D,final:ae,data:z,score:N,testNumber:h,trialCount:x+1,trials:$,validTrialCount:M+1,testTimeSeconds:(X-c)/1e3}),n(3,h++,h)}function re(X){if(!H)switch(X.key){case"ArrowLeft":O&&de(0),m&&ce("early");break;case"ArrowRight":O&&de(1),m&&ce("late");break;case"PageDown":!O&&f!=="done"&&Y()}}function G(){const X={studyName:L1,studyStep:f,demographics:{partID:i,studyID:o,sessionID:a,partEduation:g,partMusicInstr:_,partMusicInstrYears:b,partVisExperienceYears:v,partFeedback:y,visWidth:T},date:new Date().toISOString(),tests:ne};console.log("saving data",X);const j=JSON.stringify(X,void 0,2);fetch(N$,{method:"POST",headers:{"Content-Type":"application/json"},body:j}).then(k=>{console.log("Data saved:",k)})}let J=Lo(R1);const te=F1*J;let L,pe=null,ie=null,be=null,Ee=null,$e=[],De=[],Oe=[];(async()=>{s=await Promise.all(s.map(async q=>({...q,times:q.beats.map(W=>J*(W-1)),timesOriginal:q.beats.map(W=>J*(W-1)),audioBuffer:await cl(q.sample)})));const X=Se(0),j=Se(-Jr),k=Se(Jr);X.noteTimes,n(22,De=j.noteTimes),n(23,Oe=k.noteTimes),n(18,ie=X.renderedAudio),n(19,be=j.renderedAudio),n(20,Ee=k.renderedAudio),n(16,L=s[0].audioBuffer.sampleRate)})();const rt=X=>{const j=X[0].map(k=>({...k,beats:[...k.beats],times:[...k.times],timesOriginal:[...k.timesOriginal]}));for(let k=1;k<X.length;k++){const q=X[k];for(const W of q){const le=j.filter(Ce=>Ce.instrument===W.instrument)[0];le.beats=[...le.beats,...W.beats.map(Ce=>Ce+k*F1)],le.times=[...le.times,...W.times.map(Ce=>Ce+k*te)],le.timesOriginal=[...le.timesOriginal,...W.timesOriginal.map(Ce=>Ce+k*te)]}}return j},Se=X=>{if(!s[0].audioBuffer)return;const k=[l(X)],q=rt(k),W=q.map(ye=>ye.times).flat().sort(),le=q.map(ye=>ye.times.map(En=>({time:En,instr:ye.instrument}))).flat(1/0).sort((ye,En)=>{ye.time-En.time}),Ce=q[0].audioBuffer.sampleRate,V=So(q,te*k.length+.1,Ce);return{noteTimes:W,noteTimesSeparate:le,sampleRate:Ce,renderedAudio:V}},ln=()=>n(0,T*=1.05),je=()=>n(0,T*=.95);function Le(){g=Bs(this),n(6,g)}function kn(){_=this.value,n(7,_)}function mt(){b=At(this.value),n(8,b)}function Te(){v=At(this.value),n(9,v)}function un(){y=this.value,n(10,y)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(24,r=T/6)},[T,u,f,h,m,d,g,_,b,v,y,x,E,O,H,D,L,pe,ie,be,Ee,$e,De,Oe,r,Y,ln,je,Le,kn,mt,Te,un]}class B$ extends et{constructor(t){super(),Qe(this,t,F$,D$,Je,{},null,[-1,-1,-1])}}function B1(e){let t,n,r,i,o,a,s,l,u,f,h;return{c(){t=S("div"),n=S("p"),n.textContent=`In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.`,r=C(),i=S("p"),i.innerHTML=`For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.`,o=C(),a=S("p"),a.innerHTML=`By clicking <i>next step</i> you consent to participating in this study and
        data collection.`,s=C(),l=S("p"),l.innerHTML=`If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.`,u=C(),f=S("a"),h=S("button"),h.textContent="I do NOT consent and will not participate",A(n,"class","svelte-9uo0u8"),A(i,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"href","https://app.prolific.com/submissions/complete?cc="+W$)},m(c,m){F(c,t,m),w(t,n),w(t,r),w(t,i),w(t,o),w(t,a),w(t,s),w(t,l),w(t,u),w(t,f),w(f,h)},p:Me,d(c){c&&R(t)}}}function O1(e){let t,n,r,i,o,a,s,l,u,f;return i=new Wt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=S("div"),n=S("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,r=C(),he(i.$$.fragment),o=C(),a=S("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",s=C(),l=S("a"),u=S("button"),u.textContent="I can NOT hear the audio and will NOT participate in this study",A(n,"class","svelte-9uo0u8"),A(a,"class","svelte-9uo0u8"),A(l,"href","https://app.prolific.com/submissions/complete?cc="+Y$)},m(h,c){F(h,t,c),w(t,n),w(t,r),ue(i,t,null),w(t,o),w(t,a),w(t,s),w(t,l),w(l,u),f=!0},p(h,c){const m={};c[0]&262144&&(m.audioData=h[18]),c[0]&65536&&(m.sampleRate=h[16]),i.$set(m)},i(h){f||(B(i.$$.fragment,h),f=!0)},o(h){U(i.$$.fragment,h),f=!1},d(h){h&&R(t),fe(i)}}}function q1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b;return{c(){t=S("div"),n=S("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",r=C(),i=S("div"),o=S("button"),o.textContent="+",a=C(),s=S("button"),s.textContent="-",l=C(),u=fi("svg"),f=fi("rect"),p=C(),g=S("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,A(n,"class","svelte-9uo0u8"),A(f,"width",h=e[0]*.52),A(f,"height",c=e[24]*2),A(f,"fill","#ccc"),A(f,"rx","8"),A(u,"width",m=e[0]*.52+"px"),A(u,"height",d=e[24]*2+"px"),A(g,"class","svelte-9uo0u8")},m(v,y){F(v,t,y),w(t,n),w(t,r),w(t,i),w(i,o),w(i,a),w(i,s),w(t,l),w(t,u),w(u,f),w(t,p),w(t,g),_||(b=[Ie(o,"click",e[26]),Ie(s,"click",e[27])],_=!0)},p(v,y){y[0]&1&&h!==(h=v[0]*.52)&&A(f,"width",h),y[0]&16777216&&c!==(c=v[24]*2)&&A(f,"height",c),y[0]&1&&m!==(m=v[0]*.52+"px")&&A(u,"width",m),y[0]&16777216&&d!==(d=v[24]*2+"px")&&A(u,"height",d)},d(v){v&&R(t),_=!1,Nt(b)}}}function G1(e){let t,n,r,i,o,a,s,l,u,f,h;return f=new Wt({props:{audioData:e[18],sampleRate:e[16]}}),{c(){t=S("div"),n=S("div"),n.innerHTML=`<p class="svelte-9uo0u8">We want to know, how small of a timing error is still clear to detect
          as either <i>too early</i> or
          <i>too late</i>.</p> <p class="svelte-9uo0u8">This study uses a simple drum pattern that you can see and listen to
          below. Notes after the mistake will also be affected and be
          early/late, such that only one time interval is shorter/longer than
          supposed.</p>`,r=oe(`
      This is what the pattern looks like in sheet music:
      `),i=S("div"),o=S("img"),l=oe(`
      This is what the full, correctly played pattern sounds like:
      `),u=S("div"),he(f.$$.fragment),A(o,"width",a=e[0]+"px"),Nf(o.src,s="8note-pattern-hihat.png")||A(o,"src",s),A(o,"alt","drum pattern as sheet music")},m(c,m){F(c,t,m),w(t,n),w(t,r),w(t,i),w(i,o),w(t,l),w(t,u),ue(f,u,null),h=!0},p(c,m){(!h||m[0]&1&&a!==(a=c[0]+"px"))&&A(o,"width",a);const d={};m[0]&262144&&(d.audioData=c[18]),m[0]&65536&&(d.sampleRate=c[16]),f.$set(d)},i(c){h||(B(f.$$.fragment,c),h=!0)},o(c){U(f.$$.fragment,c),h=!1},d(c){c&&R(t),fe(f)}}}function U1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m,d,p,g,_,b,v,y,x,M,P,$,N,I,E,O,H;return{c(){t=S("div"),n=S("p"),n.textContent="Please answer the following questions about yourself:",r=C(),i=S("label"),o=S("span"),o.textContent=`What is your highest finished degree of education? (select the best
          fitting one)`,a=C(),s=S("select"),l=S("option"),l.textContent="none",u=S("option"),u.textContent="high school",f=S("option"),f.textContent="bachelor",h=S("option"),h.textContent="master",c=S("option"),c.textContent="phd",m=C(),d=S("label"),p=S("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,g=C(),_=S("input"),b=C(),v=S("label"),y=S("span"),y.textContent="For how many years do you roughly play it/them?",x=C(),M=S("input"),P=C(),$=S("label"),N=S("span"),N.textContent=`How many years of experience do you have with information
          visualization?`,I=C(),E=S("input"),A(n,"class","svelte-9uo0u8"),l.__value="none",we(l,l.__value),u.__value="highs",we(u,u.__value),f.__value="bachelor",we(f,f.__value),h.__value="master",we(h,h.__value),c.__value="phd",we(c,c.__value),e[6]===void 0&&Ar(()=>e[28].call(s)),A(i,"class","svelte-9uo0u8"),A(_,"type","text"),A(_,"placeholder","free text"),A(d,"class","svelte-9uo0u8"),A(M,"type","number"),A(M,"min","0"),A(M,"step","1"),A(v,"class","svelte-9uo0u8"),A(E,"type","number"),A(E,"min","0"),A(E,"step","1"),A($,"class","svelte-9uo0u8"),A(t,"class","demo-form svelte-9uo0u8")},m(D,T){F(D,t,T),w(t,n),w(t,r),w(t,i),w(i,o),w(i,a),w(i,s),w(s,l),w(s,u),w(s,f),w(s,h),w(s,c),or(s,e[6],!0),w(t,m),w(t,d),w(d,p),w(d,g),w(d,_),we(_,e[7]),w(t,b),w(t,v),w(v,y),w(v,x),w(v,M),we(M,e[8]),w(t,P),w(t,$),w($,N),w($,I),w($,E),we(E,e[9]),O||(H=[Ie(s,"change",e[28]),Ie(_,"input",e[29]),Ie(M,"input",e[30]),Ie(E,"input",e[31])],O=!0)},p(D,T){T[0]&64&&or(s,D[6]),T[0]&128&&_.value!==D[7]&&we(_,D[7]),T[0]&256&&At(M.value)!==D[8]&&we(M,D[8]),T[0]&512&&At(E.value)!==D[9]&&we(E,D[9])},d(D){D&&R(t),O=!1,Nt(H)}}}function z1(e){let t,n,r=(e[12]||e[4])&&H1(e);return{c(){r&&r.c(),t=Yn()},m(i,o){r&&r.m(i,o),F(i,t,o),n=!0},p(i,o){i[12]||i[4]?r?(r.p(i,o),o[0]&4112&&B(r,1)):(r=H1(i),r.c(),B(r,1),r.m(t.parentNode,t)):r&&(Ge(),U(r,1,1,()=>{r=null}),Ue())},i(i){n||(B(r),n=!0)},o(i){U(r),n=!1},d(i){i&&R(t),r&&r.d(i)}}}function H1(e){let t,n,r=e[3]+1+"",i,o,a=e[1].length+"",s,l,u,f,h,c,m,d,p;function g(M,P){return M[4]?q$:O$}let _=g(e),b=_(e);const v=[U$,G$],y=[];function x(M,P){return M[15]==="audio"?0:M[14]===!1?1:-1}return~(c=x(e))&&(m=y[c]=v[c](e)),{c(){t=S("p"),n=oe("Test number "),i=oe(r),o=oe(" of "),s=oe(a),l=C(),b.c(),u=C(),f=S("p"),f.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`,h=C(),m&&m.c(),d=Yn(),A(t,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8")},m(M,P){F(M,t,P),w(t,n),w(t,i),w(t,o),w(t,s),F(M,l,P),b.m(M,P),F(M,u,P),F(M,f,P),F(M,h,P),~c&&y[c].m(M,P),F(M,d,P),p=!0},p(M,P){(!p||P[0]&8)&&r!==(r=M[3]+1+"")&&ze(i,r),(!p||P[0]&2)&&a!==(a=M[1].length+"")&&ze(s,a),_===(_=g(M))&&b?b.p(M,P):(b.d(1),b=_(M),b&&(b.c(),b.m(u.parentNode,u)));let $=c;c=x(M),c===$?~c&&y[c].p(M,P):(m&&(Ge(),U(y[$],1,1,()=>{y[$]=null}),Ue()),~c?(m=y[c],m?m.p(M,P):(m=y[c]=v[c](M),m.c()),B(m,1),m.m(d.parentNode,d)):m=null)},i(M){p||(B(m),p=!0)},o(M){U(m),p=!1},d(M){M&&(R(t),R(l),R(u),R(f),R(h),R(d)),b.d(M),~c&&y[c].d(M)}}}function O$(e){let t,n,r=e[11]+1+"",i;return{c(){t=S("p"),n=oe("Trial number "),i=oe(r),A(t,"class","svelte-9uo0u8")},m(o,a){F(o,t,a),w(t,n),w(t,i)},p(o,a){a[0]&2048&&r!==(r=o[11]+1+"")&&ze(i,r)},d(o){o&&R(t)}}}function q$(e){let t,n,r,i,o,a,s,l,u,f,h,c;return{c(){t=S("p"),n=S("b"),n.textContent="Training:",r=oe(" the training will end when you got "),i=oe(G_),o=oe(` correct
          in a streak.`),a=S("br"),s=oe(`
          Current streak: `),l=oe(e[5]),u=oe("."),f=S("br"),h=C(),c=S("b"),c.innerHTML='<span id="trainingFeedback"></span>',A(t,"class","training svelte-9uo0u8")},m(m,d){F(m,t,d),w(t,n),w(t,r),w(t,i),w(t,o),w(t,a),w(t,s),w(t,l),w(t,u),w(t,f),w(t,h),w(t,c)},p(m,d){d[0]&32&&ze(l,m[5])},d(m){m&&R(t)}}}function G$(e){let t,n,r,i=(e[15]==="waveform"||Ra)&&V1(e),o=(e[15]==="color"||Ra)&&W1(e);return{c(){i&&i.c(),t=C(),o&&o.c(),n=Yn()},m(a,s){i&&i.m(a,s),F(a,t,s),o&&o.m(a,s),F(a,n,s),r=!0},p(a,s){a[15]==="waveform"||Ra?i?(i.p(a,s),s[0]&32768&&B(i,1)):(i=V1(a),i.c(),B(i,1),i.m(t.parentNode,t)):i&&(Ge(),U(i,1,1,()=>{i=null}),Ue()),a[15]==="color"||Ra?o?(o.p(a,s),s[0]&32768&&B(o,1)):(o=W1(a),o.c(),B(o,1),o.m(n.parentNode,n)):o&&(Ge(),U(o,1,1,()=>{o=null}),Ue())},i(a){r||(B(i),B(o),r=!0)},o(a){U(i),U(o),r=!1},d(a){a&&(R(t),R(n)),i&&i.d(a),o&&o.d(a)}}}function U$(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new Wt({props:{audioData:e[19],sampleRate:e[16]}}),a=new Wt({props:{audioData:e[20],sampleRate:e[16]}}),c=new El({props:{audioData:e[17],sampleRate:e[16],currentTrialNumber:e[11]}}),{c(){t=S("p"),t.innerHTML=`Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&524288&&(g.audioData=d[19]),p[0]&65536&&(g.sampleRate=d[16]),i.$set(g);const _={};p[0]&1048576&&(_.audioData=d[20]),p[0]&65536&&(_.sampleRate=d[16]),a.$set(_);const b={};p[0]&131072&&(b.audioData=d[17]),p[0]&65536&&(b.sampleRate=d[16]),p[0]&2048&&(b.currentTrialNumber=d[11]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function V1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new yn({props:{audioData:e[19],width:e[0]/2,height:e[24]/2}}),a=new yn({props:{audioData:e[20],width:e[0]/2,height:e[24]/2}}),c=new yn({props:{audioData:e[17],width:e[0],height:e[24]}}),{c(){t=S("p"),t.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&524288&&(g.audioData=d[19]),p[0]&1&&(g.width=d[0]/2),p[0]&16777216&&(g.height=d[24]/2),i.$set(g);const _={};p[0]&1048576&&(_.audioData=d[20]),p[0]&1&&(_.width=d[0]/2),p[0]&16777216&&(_.height=d[24]/2),a.$set(_);const b={};p[0]&131072&&(b.audioData=d[17]),p[0]&1&&(b.width=d[0]),p[0]&16777216&&(b.height=d[24]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function W1(e){let t,n,r,i,o,a,s,l,u,f,h,c,m;return i=new wn({props:{pattern:e[22],width:e[0]/2,height:e[24]*.7}}),a=new wn({props:{pattern:e[23],width:e[0]/2,height:e[24]*.7}}),c=new wn({props:{pattern:e[21],width:e[0],height:e[24]}}),{c(){t=S("p"),t.innerHTML=`The color chart shows the size of the time gaps between <b>beats</b>
            in the rectangles&#39; darkness (example: color at 2 shows the gap between
            the first and second beat). Look at the rectangle at 5, it is either
            brigher (early) or darker (late) than the others.`,n=C(),r=S("div"),he(i.$$.fragment),o=C(),he(a.$$.fragment),s=C(),l=S("div"),l.textContent="Example for early",u=C(),f=S("div"),f.textContent="Example for late",h=C(),he(c.$$.fragment),A(t,"class","svelte-9uo0u8"),A(l,"class","svelte-9uo0u8"),A(f,"class","svelte-9uo0u8"),A(r,"class","vis-example svelte-9uo0u8")},m(d,p){F(d,t,p),F(d,n,p),F(d,r,p),ue(i,r,null),w(r,o),ue(a,r,null),w(r,s),w(r,l),w(r,u),w(r,f),F(d,h,p),ue(c,d,p),m=!0},p(d,p){const g={};p[0]&4194304&&(g.pattern=d[22]),p[0]&1&&(g.width=d[0]/2),p[0]&16777216&&(g.height=d[24]*.7),i.$set(g);const _={};p[0]&8388608&&(_.pattern=d[23]),p[0]&1&&(_.width=d[0]/2),p[0]&16777216&&(_.height=d[24]*.7),a.$set(_);const b={};p[0]&2097152&&(b.pattern=d[21]),p[0]&1&&(b.width=d[0]),p[0]&16777216&&(b.height=d[24]),c.$set(b)},i(d){m||(B(i.$$.fragment,d),B(a.$$.fragment,d),B(c.$$.fragment,d),m=!0)},o(d){U(i.$$.fragment,d),U(a.$$.fragment,d),U(c.$$.fragment,d),m=!1},d(d){d&&(R(t),R(n),R(r),R(h)),fe(i),fe(a),fe(c,d)}}}function Y1(e){let t,n,r,i,o,a,s;return{c(){t=S("div"),n=oe(`Almost done!
      `),r=S("p"),r.textContent="Do you have any final feedback/comments?",i=C(),o=S("textarea"),A(r,"class","svelte-9uo0u8")},m(l,u){F(l,t,u),w(t,n),w(t,r),w(t,i),w(t,o),we(o,e[10]),a||(s=Ie(o,"input",e[32]),a=!0)},p(l,u){u[0]&1024&&we(o,l[10])},d(l){l&&R(t),a=!1,s()}}}function j1(e){let t,n,r,i;return{c(){t=S("div"),t.textContent="Thanks for participating!",n=C(),r=S("a"),i=S("b"),i.textContent="Click here to get your compensation",A(r,"href","https://app.prolific.com/submissions/complete?cc="+V$)},m(o,a){F(o,t,a),F(o,n,a),F(o,r,a),w(r,i)},p:Me,d(o){o&&(R(t),R(n),R(r))}}}function X1(e){let t,n,r;return{c(){t=S("button"),t.textContent="next step",A(t,"class","next-btn svelte-9uo0u8")},m(i,o){F(i,t,o),n||(r=Ie(t,"click",e[25]),n=!0)},p:Me,d(i){i&&R(t),n=!1,r()}}}function z$(e){let t,n,r,i,o,a,s,l,u,f,h=e[2]==="consent"&&B1(),c=e[2]==="start1"&&O1(e),m=e[2]==="start2"&&q1(e),d=e[2]==="start3"&&G1(e),p=e[2]==="demo"&&U1(e),g=e[2]==="tests"&&z1(e),_=e[2]==="feedback"&&Y1(e),b=e[2]==="done"&&j1(),v=!e[13]&&e[2]!=="done"&&!e[4]&&X1(e);return{c(){t=S("main"),h&&h.c(),n=C(),c&&c.c(),r=C(),m&&m.c(),i=C(),d&&d.c(),o=C(),p&&p.c(),a=C(),g&&g.c(),s=C(),_&&_.c(),l=C(),b&&b.c(),u=C(),v&&v.c(),A(t,"class","svelte-9uo0u8")},m(y,x){F(y,t,x),h&&h.m(t,null),w(t,n),c&&c.m(t,null),w(t,r),m&&m.m(t,null),w(t,i),d&&d.m(t,null),w(t,o),p&&p.m(t,null),w(t,a),g&&g.m(t,null),w(t,s),_&&_.m(t,null),w(t,l),b&&b.m(t,null),w(t,u),v&&v.m(t,null),f=!0},p(y,x){y[2]==="consent"?h?h.p(y,x):(h=B1(),h.c(),h.m(t,n)):h&&(h.d(1),h=null),y[2]==="start1"?c?(c.p(y,x),x[0]&4&&B(c,1)):(c=O1(y),c.c(),B(c,1),c.m(t,r)):c&&(Ge(),U(c,1,1,()=>{c=null}),Ue()),y[2]==="start2"?m?m.p(y,x):(m=q1(y),m.c(),m.m(t,i)):m&&(m.d(1),m=null),y[2]==="start3"?d?(d.p(y,x),x[0]&4&&B(d,1)):(d=G1(y),d.c(),B(d,1),d.m(t,o)):d&&(Ge(),U(d,1,1,()=>{d=null}),Ue()),y[2]==="demo"?p?p.p(y,x):(p=U1(y),p.c(),p.m(t,a)):p&&(p.d(1),p=null),y[2]==="tests"?g?(g.p(y,x),x[0]&4&&B(g,1)):(g=z1(y),g.c(),B(g,1),g.m(t,s)):g&&(Ge(),U(g,1,1,()=>{g=null}),Ue()),y[2]==="feedback"?_?_.p(y,x):(_=Y1(y),_.c(),_.m(t,l)):_&&(_.d(1),_=null),y[2]==="done"?b?b.p(y,x):(b=j1(),b.c(),b.m(t,u)):b&&(b.d(1),b=null),!y[13]&&y[2]!=="done"&&!y[4]?v?v.p(y,x):(v=X1(y),v.c(),v.m(t,null)):v&&(v.d(1),v=null)},i(y){f||(B(c),B(d),B(g),f=!0)},o(y){U(c),U(d),U(g),f=!1},d(y){y&&R(t),h&&h.d(),c&&c.d(),m&&m.d(),d&&d.d(),p&&p.d(),g&&g.d(),_&&_.d(),b&&b.d(),v&&v.d()}}}const Z1="8beat_tempi",Ra=!1,H$="/store";let Qr=.1;const V$="C11VVLWN",W$="COYRYK1U",Y$="CILRS92A",Su=4;let G_=8;function j$(e,t,n){let r,i=120;console.log(Z1,i,Qr);let o=Jt(window,"e");(!o||!["audio","waveform"].includes(o))&&alert(`Invalid encoding ${o}`);let a=Jt(window,"PROLIFIC_PID"),s=Jt(window,"STUDY_ID"),l=Jt(window,"SESSION_ID"),u=[{instrument:"hihat",sample:"./hihat.mp3",beats:[1,1.5,2,2.5,3,3.5,4,4.5]}];const f=(k=0)=>{if(k===0)return u;const q=ln([u]),W=q.filter(le=>le.instrument==="hihat")[0];for(const le of[5,6,7,8])W.times[le-1]=W.timesOriginal[le-1]+k;return q};let h=[60,90,120].map(k=>({bpm:k})),c="consent",m=0,d,p=!1,g=0,_=0,b="",v="",y=0,x=0,M="",P=0,$,N={},I=[],E,O,H=!1,D=!1,T=!1,z="",ae=600,ne=[],se=0;const Y=[];Br(()=>{document.querySelector("html").addEventListener("keyup",J)});const K=()=>{O=new Be({ratio:{firstVal:Qr,operation:"multiply",down:1,up:1,stepSizeDown:1.25,stepSizeUp:1.25*1.25*1.25,limits:[0,Qr],direction:-1,reversalLimit:12,verbosity:0}}),O.init()};async function Z(){c==="consent"?n(2,c="start1"):c==="start1"?n(2,c="start2"):c==="start2"?n(2,c="start3"):c==="start3"?(n(1,h=dc(h)),n(2,c="demo")):c==="demo"?b==""||v==""?alert("please fill the form first"):(n(2,c="tests"),n(3,m=0)):c==="tests"?m>=h.length?n(2,c="feedback"):(n(15,z=o),i=h[m].bpm,L=Lo(i),pe=Su*L,await Se(),g===0?(n(4,p=!0),ce()):(n(4,p=!1),Q(),n(5,g=0))):c==="feedback"&&(te(),n(2,c="done"))}function Q(){K(),n(11,P=0),$=0,E=0,n(12,H=!0),ne=[],I=[],d=new Date,me()}function me(){console.log("Starting trial "+P),N={},n(13,D=!0),de()}function de(){let q=O.getLast("ratio");q=Math.random()<.5?q:-q,N.deviation=q;const W=je(q);n(21,Oe=W.noteTimes),W.noteTimesSeparate,n(16,ie=W.sampleRate),n(17,be=W.renderedAudio),console.log("generated pattern"),n(14,T=!0),window.setTimeout(()=>{n(14,T=!1),N.startTime=new Date},1e3)}function ce(){console.log("show training");let k=(Math.random()*.5+.5)*Qr;k=Math.random()<.5?k:-k,_=k,console.log("training severity",k);const q=je(k);n(21,Oe=q.noteTimes),q.noteTimesSeparate,n(16,ie=q.sampleRate),n(17,be=q.renderedAudio),console.log("generated training",q),n(11,P++,P)}function ee(k){if(!D)return;n(13,D=!1),N.decisionChoice=k,N.errorCode=0,N.timeTaken=(new Date-N.startTime)/1e3;const q=E;(N.decisionChoice==0&&N.deviation<0||N.decisionChoice==1&&N.deviation>0)&&N.errorCode==0&&E++,N.errorCode==0&&(O.next(q!=E),I[I.length]=N),N.errorCode==0&&$++,n(11,P++,P),O.reversalLimitReached("ratio")?G():me()}function re(k){const q=document.querySelectorAll("#trainingFeedback")[0];k==="early"&&_<0||k==="late"&&_>0?(n(5,g++,g),g>=G_?n(4,p=!1):q.innerHTML='<span class="correct">correct!</span>'):(n(5,g=0),q.innerHTML='<span class="wrong">wrong!</span>'),console.log(q),ce()}function G(){n(12,H=!1),n(13,D=!1),ne=[],se=O.getFinalVal("ratio");for(let q=0;q<I.length;q++)ne[q]=I[q].deviation;console.log(ne);const k=new Date;Y.push({encoding:z,final:se,data:ne,score:E,testNumber:m,trialCount:P+1,trials:I,validTrialCount:$+1,testTimeSeconds:(k-d)/1e3}),n(3,m++,m)}function J(k){if(!T)switch(k.key){case"ArrowLeft":D&&ee(0),p&&re("early");break;case"ArrowRight":D&&ee(1),p&&re("late");break;case"PageDown":!D&&c!=="done"&&Z()}}function te(){const k={studyName:Z1,studyStep:c,demographics:{partID:a,studyID:s,sessionID:l,partEduation:b,partMusicInstr:v,partMusicInstrYears:y,partVisExperienceYears:x,partFeedback:M,visWidth:ae},date:new Date().toISOString(),tests:Y};console.log("saving data",k);const q=JSON.stringify(k,void 0,2);fetch(H$,{method:"POST",headers:{"Content-Type":"application/json"},body:q}).then(W=>{console.log("Data saved:",W)})}let L=Lo(i),pe=Su*L,ie,be=null,Ee=null,$e=null,De=null,Oe=[],He=[],rt=[];const Se=async()=>{u=await Promise.all(u.map(async le=>({...le,times:le.beats.map(Ce=>L*(Ce-1)),timesOriginal:le.beats.map(Ce=>L*(Ce-1)),audioBuffer:le.audioBuffer??await cl(le.sample)})));const k=je(0),q=je(-Qr),W=je(Qr);k.noteTimes,n(22,He=q.noteTimes),n(23,rt=W.noteTimes),n(18,Ee=k.renderedAudio),n(19,$e=q.renderedAudio),n(20,De=W.renderedAudio),n(16,ie=u[0].audioBuffer.sampleRate)};Se();const ln=k=>{const q=k[0].map(W=>({...W,beats:[...W.beats],times:[...W.times],timesOriginal:[...W.timesOriginal]}));for(let W=1;W<k.length;W++){const le=k[W];for(const Ce of le){const V=q.filter(ye=>ye.instrument===Ce.instrument)[0];V.beats=[...V.beats,...Ce.beats.map(ye=>ye+W*Su)],V.times=[...V.times,...Ce.times.map(ye=>ye+W*pe)],V.timesOriginal=[...V.timesOriginal,...Ce.timesOriginal.map(ye=>ye+W*pe)]}}return q},je=k=>{if(!u[0].audioBuffer)return;const W=[f(k)],le=ln(W),Ce=le.map(Hr=>Hr.times).flat().sort(),V=le.map(Hr=>Hr.times.map(Dl=>({time:Dl,instr:Hr.instrument}))).flat(1/0).sort((Hr,Dl)=>{Hr.time-Dl.time}),ye=le[0].audioBuffer.sampleRate,En=So(le,pe*W.length+.1,ye);return console.log("creating drum pattern",{BPM:i,duration:pe}),{noteTimes:Ce,noteTimesSeparate:V,sampleRate:ye,renderedAudio:En}},Le=()=>n(0,ae*=1.05),kn=()=>n(0,ae*=.95);function mt(){b=Bs(this),n(6,b)}function Te(){v=this.value,n(7,v)}function un(){y=At(this.value),n(8,y)}function X(){x=At(this.value),n(9,x)}function j(){M=this.value,n(10,M)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(24,r=ae/6)},[ae,h,c,m,p,g,b,v,y,x,M,P,H,D,T,z,ie,be,Ee,$e,De,Oe,He,rt,r,Z,Le,kn,mt,Te,un,X,j]}class X$ extends et{constructor(t){super(),Qe(this,t,j$,z$,Je,{},null,[-1,-1,-1])}}function Z$(e){let t,n;return t=new h$({}),{c(){he(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){U(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function K$(e){let t,n;return t=new X$({}),{c(){he(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){U(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function J$(e){let t,n;return t=new k$({}),{c(){he(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){U(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function Q$(e){let t,n;return t=new B$({}),{c(){he(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){U(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function eD(e){let t,n;return t=new RT({}),{c(){he(t.$$.fragment)},m(r,i){ue(t,r,i),n=!0},i(r){n||(B(t.$$.fragment,r),n=!0)},o(r){U(t.$$.fragment,r),n=!1},d(r){fe(t,r)}}}function tD(e){let t,n,r,i,o,a;const s=[eD,Q$,J$,K$,Z$],l=[];function u(f,h){return f[0]==="playground"?0:f[0]==="study_8note"?1:f[0]==="study_drums"?2:f[0]==="study_tempi"?3:f[0]==="analysis"?4:-1}return~(i=u(e))&&(o=l[i]=s[i](e)),{c(){t=S("main"),n=S("h1"),n.textContent="Rhythm Error Sensitivity Study",r=C(),o&&o.c()},m(f,h){F(f,t,h),w(t,n),w(t,r),~i&&l[i].m(t,null),a=!0},p:Me,i(f){a||(B(o),a=!0)},o(f){U(o),a=!1},d(f){f&&R(t),~i&&l[i].d()}}}function nD(e){let t=Jt(window,"p");return console.log(t),[t]}class rD extends et{constructor(t){super(),Qe(this,t,nD,tD,Je,{})}}new rD({target:document.getElementById("app")});export{zg as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-DLNVfB_I.js","assets/index-BgRuOJdg.js","assets/browser-COOmd8S-.js","assets/index-DNA9enrs.js","assets/index-B9VA2s6L.js","assets/index-BOn-tw8C.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}

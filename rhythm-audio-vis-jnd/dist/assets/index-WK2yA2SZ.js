var eb=Object.defineProperty;var nb=(t,e,n)=>e in t?eb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var En=(t,e,n)=>(nb(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function kt(){}function e0(t){return t()}function Wu(){return Object.create(null)}function Se(t){t.forEach(e0)}function n0(t){return typeof t=="function"}function Rt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ib(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function X(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function vn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function Df(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function at(t){return document.createTextNode(t)}function D(){return at(" ")}function jn(){return at("")}function gt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function I(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _e(t){return t===""?null:+t}function rb(t){return Array.from(t.childNodes)}function Dt(t,e){e=""+e,t.data!==e&&(t.data=e)}function ft(t,e){t.value=e??""}function ge(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function pe(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ci(t){const e=t.querySelector(":checked");return e&&e.__value}class ob{constructor(e=!1){En(this,"is_svg",!1);En(this,"e");En(this,"n");En(this,"t");En(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Df(n.nodeName):this.e=M(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)X(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(V)}}let Or;function Dr(t){Or=t}function i0(){if(!Or)throw new Error("Function called outside component initialization");return Or}function Ha(t){i0().$$.on_mount.push(t)}function Ve(t){i0().$$.after_update.push(t)}const Fi=[],se=[];let Pi=[];const Yu=[],ab=Promise.resolve();let Ff=!1;function lb(){Ff||(Ff=!0,ab.then(r0))}function on(t){Pi.push(t)}const Bl=new Set;let Ci=0;function r0(){if(Ci!==0)return;const t=Or;do{try{for(;Ci<Fi.length;){const e=Fi[Ci];Ci++,Dr(e),fb(e.$$)}}catch(e){throw Fi.length=0,Ci=0,e}for(Dr(null),Fi.length=0,Ci=0;se.length;)se.pop()();for(let e=0;e<Pi.length;e+=1){const n=Pi[e];Bl.has(n)||(Bl.add(n),n())}Pi.length=0}while(Fi.length);for(;Yu.length;)Yu.pop()();Ff=!1,Bl.clear(),Dr(t)}function fb(t){if(t.fragment!==null){t.update(),Se(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(on)}}function sb(t){const e=[],n=[];Pi.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Pi=e}const Jo=new Set;let oi;function Jt(){oi={r:0,c:[],p:oi}}function te(){oi.r||Se(oi.c),oi=oi.p}function H(t,e){t&&t.i&&(Jo.delete(t),t.i(e))}function K(t,e,n,i){if(t&&t.o){if(Jo.has(t))return;Jo.add(t),oi.c.push(()=>{Jo.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Zt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ht(t){t&&t.c()}function ut(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),on(()=>{const o=t.$$.on_mount.map(e0).filter(n0);t.$$.on_destroy?t.$$.on_destroy.push(...o):Se(o),t.$$.on_mount=[]}),r.forEach(on)}function ct(t,e){const n=t.$$;n.fragment!==null&&(sb(n.after_update),Se(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ub(t,e){t.$$.dirty[0]===-1&&(Fi.push(t),lb(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pt(t,e,n,i,r,o,a=null,l=[-1]){const f=Or;Dr(t);const s=t.$$={fragment:null,ctx:[],props:o,update:kt,not_equal:r,bound:Wu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Wu(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(c,h,...p)=>{const d=p.length?p[0]:h;return s.ctx&&r(s.ctx[c],s.ctx[c]=d)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](d),u&&ub(t,c)),h}):[],s.update(),u=!0,Se(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const c=rb(e.target);s.fragment&&s.fragment.l(c),c.forEach(V)}else s.fragment&&s.fragment.c();e.intro&&H(t.$$.fragment),ut(t,e.target,e.anchor),r0()}Dr(f)}class Ot{constructor(){En(this,"$$");En(this,"$$set")}$destroy(){ct(this,1),this.$destroy=kt}$on(e,n){if(!n0(n))return kt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!ib(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const cb="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(cb);const hb="modulepreload",db=function(t){return"/rhythm-vis/"+t},Hu={},$i=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=db(a),a in Hu)return;Hu[a]=!0;const l=a.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(!!i)for(let c=o.length-1;c>=0;c--){const h=o[c];if(h.href===a&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":hb,l||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),l)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function pb(t){if(t){if(t=new Uint8Array(t.buffer||t),gb(t))return"wav";if(mb(t))return"mp3";if(_b(t))return"flac";if(yb(t))return"m4a";if(wb(t))return"opus";if(bb(t))return"oga";if(vb(t))return"qoa"}}function mb(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function gb(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function bb(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function _b(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function yb(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function wb(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function vb(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let xb=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const kb=globalThis.AudioBuffer||xb;async function Mb(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=pb(t);if(!e)throw Error("Cannot detect audio format");if(!ce[e])throw Error("Missing decoder for "+e+" format");return ce[e](t)}const ce={async oga(t){let{decoder:e}=ce.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await $i(()=>import("./index-onklNlKE.js"),__vite__mapDeps([0,1,2]));await(ce.oga.decoder=e=new n).ready}return t&&Ai(await e.decodeFile(t))},async mp3(t){let{decoder:e}=ce.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await $i(()=>import("./index-SKz-Ovmx.js"),__vite__mapDeps([3,1]));await(ce.mp3.decoder=e=new n).ready}return t&&Ai(await e.decode(t))},async flac(t){let{decoder:e}=ce.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await $i(()=>import("./index-PAfX_8Je.js"),__vite__mapDeps([4,1,2]));await(ce.flac.decoder=e=new n).ready}return t&&Ai(await e.decode(t))},async opus(t){let{decoder:e}=ce.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await $i(()=>import("./index-9vZZth91.js"),__vite__mapDeps([5,1,2]));await(ce.opus.decoder=e=new n).ready}return t&&Ai(await e.decodeFile(t))},async wav(t){let{decode:e}=ce.wav;if(!e){let n=await $i(()=>import("./index-4bSC68pE.js").then(i=>i.i),__vite__mapDeps([]));e=ce.wav.decode=n.default.decode}return t&&Ai(await e(t))},async qoa(t){let{decode:e}=ce.qoa;return e||(ce.qoa.decode=e=(await $i(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&Ai(await e(t))}};function Ai({channelData:t,sampleRate:e}){let n=new kb({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function o0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sb=Tb;function Tb(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=$b(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Cb(a,r,i,n,o)}function Cb(t,e,n,i,r){var o=r/8,a=i*o,l=new ArrayBuffer(44+t.length*o),f=new DataView(l);return Eo(f,0,"RIFF"),f.setUint32(4,36+t.length*o,!0),Eo(f,8,"WAVE"),Eo(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,e,!0),f.setUint16(22,i,!0),f.setUint32(24,n,!0),f.setUint32(28,n*a,!0),f.setUint16(32,a,!0),f.setUint16(34,r,!0),Eo(f,36,"data"),f.setUint32(40,t.length*o,!0),e===1?Eb(f,44,t):Ab(f,44,t),l}function $b(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function Ab(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function Eb(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function Eo(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const Nb=o0(Sb);function qi(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let l=0;l<t;++l){let f;r?f=l>=n?i:0:f=l===n?i:0,a.push(l*e+o+f)}return a}async function As(t){const n=await(await fetch(t)).arrayBuffer();return await Mb(n)}function Es(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const l=Math.round(a*t.sampleRate);let f=1;for(let s=0;s<r.length;++s)f=Math.max(0,f-2/40100),o[l+s]=r[s]*f}return o}function a0(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([Nb(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function Ns(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function be(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Va(t){let e,n,i;t.length!==2?(e=be,n=(l,f)=>be(t(l),f),i=(l,f)=>t(l)-f):(e=t===be||t===eo?t:Db,n=t,i=t);function r(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<0?s=c+1:u=c}while(s<u)}return s}function o(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<=0?s=c+1:u=c}while(s<u)}return s}function a(l,f,s=0,u=l.length){const c=r(l,f,s,u-1);return c>s&&i(l[c-1],f)>-i(l[c],f)?c-1:c}return{left:r,center:a,right:o}}function Db(){return 0}function l0(t){return t===null?NaN:+t}function*Fb(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const Lb=Va(be),Ib=Lb.right;Va(l0).center;const Ga=Ib;function Ds(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function Rb(t){return t.length|0}function Pb(t){return!(t>0)}function Ob(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Ub(t){return e=>t(...e)}function zb(...t){const e=typeof t[t.length-1]=="function"&&Ub(t.pop());t=t.map(Ob);const n=t.map(Rb),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(Pb))return o;for(;;){o.push(r.map((l,f)=>t[f][l]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function Bb(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Wi(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,o+=i*(l-r))}if(n>1)return o/(n-1)}function no(t,e){const n=Wi(t,e);return n&&Math.sqrt(n)}function Ae(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class hi{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,l=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);l&&(n[i++]=l),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class di extends Map{constructor(e,n=u0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Lf(this,e))}has(e){return super.has(Lf(this,e))}set(e,n){return super.set(f0(this,e),n)}delete(e){return super.delete(s0(this,e))}}class Xa extends Set{constructor(e,n=u0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(Lf(this,e))}add(e){return super.add(f0(this,e))}delete(e){return super.delete(s0(this,e))}}function Lf({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function f0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function s0({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function u0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fa(t){return t}function ja(t,...e){return Za(t,fa,fa,e)}function On(t,...e){return Za(t,Array.from,fa,e)}function Oi(t,e,...n){return Za(t,fa,e,n)}function qb(t,e,...n){return Za(t,Array.from,e,n)}function Za(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const l=new di,f=i[a++];let s=-1;for(const u of o){const c=f(u,++s,o),h=l.get(c);h?h.push(u):l.set(c,[u])}for(const[u,c]of l)l.set(u,r(c,a));return e(l)}(t,0)}function Wb(t,e){return Array.from(e,n=>t[n])}function Ur(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const l=sa(a[r],a[o]);if(l)return l}})):(n=t.map(n),i.sort((r,o)=>sa(n[r],n[o]))),Wb(t,i)}return t.sort(c0(n))}function c0(t=be){if(t===be)return sa;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function sa(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Fs(t,e,n){return(e.length!==2?Ur(Oi(t,e,n),([i,r],[o,a])=>be(r,a)||be(i,o)):Ur(ja(t,n),([i,r],[o,a])=>e(r,a)||be(i,o))).map(([i])=>i)}const Yb=Math.sqrt(50),Hb=Math.sqrt(10),Vb=Math.sqrt(2);function ua(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Yb?10:o>=Hb?5:o>=Vb?2:1;let l,f,s;return r<0?(s=Math.pow(10,-r)/a,l=Math.round(t*s),f=Math.round(e*s),l/s<t&&++l,f/s>e&&--f,s=-s):(s=Math.pow(10,r)*a,l=Math.round(t/s),f=Math.round(e/s),l*s<t&&++l,f*s>e&&--f),f<l&&.5<=n&&n<2?ua(t,e,n*2):[l,f,s]}function zr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?ua(e,t,n):ua(t,e,n);if(!(o>=r))return[];const l=o-r+1,f=new Array(l);if(i)if(a<0)for(let s=0;s<l;++s)f[s]=(o-s)/-a;else for(let s=0;s<l;++s)f[s]=(o-s)*a;else if(a<0)for(let s=0;s<l;++s)f[s]=(r+s)/-a;else for(let s=0;s<l;++s)f[s]=(r+s)*a;return f}function ca(t,e,n){return e=+e,t=+t,n=+n,ua(t,e,n)[2]}function If(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?ca(e,t,n):ca(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Gb(t){return Math.max(1,Math.ceil(Math.log(Ds(t))/Math.LN2)+1)}function ye(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Xb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function xn(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function jb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function h0(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?sa:c0(r);i>n;){if(i-n>600){const f=i-n+1,s=e-n+1,u=Math.log(f),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(f-c)/f)*(s-f/2<0?-1:1),p=Math.max(n,Math.floor(e-s*c/f+h)),d=Math.min(i,Math.floor(e+(f-s)*c/f+h));h0(t,e,p,d,r)}const o=t[e];let a=n,l=i;for(mr(t,n,e),r(t[i],o)>0&&mr(t,n,i);a<l;){for(mr(t,a,l),++a,--l;r(t[a],o)<0;)++a;for(;r(t[l],o)>0;)--l}r(t[n],o)===0?mr(t,n,l):(++l,mr(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function mr(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function d0(t,e=be){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?be(a,r)>0:be(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Yi(t,e,n){if(t=Float64Array.from(Fb(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return xn(t);if(e>=1)return ye(t);var i,r=(i-1)*e,o=Math.floor(r),a=ye(h0(t,o).subarray(0,o+1)),l=xn(t.subarray(o+1));return a+(l-a)*(r-o)}}function Zb(t,e,n=l0){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return a+(l-a)*(r-o)}}function Kb(t,e,n){const i=Ds(t),r=Yi(t,.75)-Yi(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function p0(t,e,n){const i=Ds(t),r=no(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function Yn(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function Rf(t,e){return Yi(t,.5,e)}function*Qb(t){for(const e of t)yield*e}function m0(t){return Array.from(Qb(t))}function Jb(t,e){const n=new di;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function t_(t,e=e_){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function e_(t,e){return[t,e]}function Pf(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Hn(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function ha(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function n_(t){return t}var ql=1,Wl=2,Of=3,No=4,Vu=1e-6;function i_(t){return"translate("+t+",0)"}function r_(t){return"translate(0,"+t+")"}function o_(t){return e=>+t(e)}function a_(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function l_(){return!this.__axis}function f_(t,e){var n=[],i=null,r=null,o=6,a=6,l=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===ql||t===No?-1:1,u=t===No||t===Wl?"x":"y",c=t===ql||t===Of?i_:r_;function h(p){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):n_),g=Math.max(o,0)+l,_=e.range(),b=+_[0]+f,v=+_[_.length-1]+f,w=(e.bandwidth?a_:o_)(e.copy(),f),k=p.selection?p.selection():p,x=k.selectAll(".domain").data([null]),S=k.selectAll(".tick").data(d,e).order(),T=S.exit(),A=S.enter().append("g").attr("class","tick"),F=S.select("line"),C=S.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(A),F=F.merge(A.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),C=C.merge(A.append("text").attr("fill","currentColor").attr(u,s*g).attr("dy",t===ql?"0em":t===Of?"0.71em":"0.32em")),p!==k&&(x=x.transition(p),S=S.transition(p),F=F.transition(p),C=C.transition(p),T=T.transition(p).attr("opacity",Vu).attr("transform",function(L){return isFinite(L=w(L))?c(L+f):this.getAttribute("transform")}),A.attr("opacity",Vu).attr("transform",function(L){var R=this.parentNode.__axis;return c((R&&isFinite(R=R(L))?R:w(L))+f)})),T.remove(),x.attr("d",t===No||t===Wl?a?"M"+s*a+","+b+"H"+f+"V"+v+"H"+s*a:"M"+f+","+b+"V"+v:a?"M"+b+","+s*a+"V"+f+"H"+v+"V"+s*a:"M"+b+","+f+"H"+v),S.attr("opacity",1).attr("transform",function(L){return c(w(L)+f)}),F.attr(u+"2",s*o),C.attr(u,s*g).text(m),k.filter(l_).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Wl?"start":t===No?"end":"middle"),k.each(function(){this.__axis=w})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),h):i&&i.slice()},h.tickFormat=function(p){return arguments.length?(r=p,h):r},h.tickSize=function(p){return arguments.length?(o=a=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(l=+p,h):l},h.offset=function(p){return arguments.length?(f=+p,h):f},h}function s_(t){return f_(Of,t)}var u_={value:()=>{}};function g0(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ta(n)}function ta(t){this._=t}function c_(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ta.prototype=g0.prototype={constructor:ta,on:function(t,e){var n=this._,i=c_(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=h_(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=Gu(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Gu(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ta(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function h_(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Gu(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=u_,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Uf="http://www.w3.org/1999/xhtml";const Hi={svg:"http://www.w3.org/2000/svg",xhtml:Uf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ka(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Hi.hasOwnProperty(e)?{space:Hi[e],local:t}:t}function d_(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Uf&&e.documentElement.namespaceURI===Uf?e.createElement(t):e.createElementNS(n,t)}}function p_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qa(t){var e=Ka(t);return(e.local?p_:d_)(e)}function m_(){}function Ls(t){return t==null?m_:function(){return this.querySelector(t)}}function g_(t){typeof t!="function"&&(t=Ls(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=new Array(a),f,s,u=0;u<a;++u)(f=o[u])&&(s=t.call(f,f.__data__,u,o))&&("__data__"in f&&(s.__data__=f.__data__),l[u]=s);return new xe(i,this._parents)}function b_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function __(){return[]}function b0(t){return t==null?__:function(){return this.querySelectorAll(t)}}function y_(t){return function(){return b_(t.apply(this,arguments))}}function w_(t){typeof t=="function"?t=y_(t):t=b0(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&(i.push(t.call(f,f.__data__,s,a)),r.push(f));return new xe(i,r)}function _0(t){return function(){return this.matches(t)}}function y0(t){return function(e){return e.matches(t)}}var v_=Array.prototype.find;function x_(t){return function(){return v_.call(this.children,t)}}function k_(){return this.firstElementChild}function M_(t){return this.select(t==null?k_:x_(typeof t=="function"?t:y0(t)))}var S_=Array.prototype.filter;function T_(){return Array.from(this.children)}function C_(t){return function(){return S_.call(this.children,t)}}function $_(t){return this.selectAll(t==null?T_:C_(typeof t=="function"?t:y0(t)))}function A_(t){typeof t!="function"&&(t=_0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new xe(i,this._parents)}function w0(t){return new Array(t.length)}function E_(){return new xe(this._enter||this._groups.map(w0),this._parents)}function da(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}da.prototype={constructor:da,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function N_(t){return function(){return t}}function D_(t,e,n,i,r,o){for(var a=0,l,f=e.length,s=o.length;a<s;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):n[a]=new da(t,o[a]);for(;a<f;++a)(l=e[a])&&(r[a]=l)}function F_(t,e,n,i,r,o,a){var l,f,s=new Map,u=e.length,c=o.length,h=new Array(u),p;for(l=0;l<u;++l)(f=e[l])&&(h[l]=p=a.call(f,f.__data__,l,e)+"",s.has(p)?r[l]=f:s.set(p,f));for(l=0;l<c;++l)p=a.call(t,o[l],l,o)+"",(f=s.get(p))?(i[l]=f,f.__data__=o[l],s.delete(p)):n[l]=new da(t,o[l]);for(l=0;l<u;++l)(f=e[l])&&s.get(h[l])===f&&(r[l]=f)}function L_(t){return t.__data__}function I_(t,e){if(!arguments.length)return Array.from(this,L_);var n=e?F_:D_,i=this._parents,r=this._groups;typeof t!="function"&&(t=N_(t));for(var o=r.length,a=new Array(o),l=new Array(o),f=new Array(o),s=0;s<o;++s){var u=i[s],c=r[s],h=c.length,p=R_(t.call(u,u&&u.__data__,s,i)),d=p.length,m=l[s]=new Array(d),g=a[s]=new Array(d),_=f[s]=new Array(h);n(u,c,m,g,_,p,e);for(var b=0,v=0,w,k;b<d;++b)if(w=m[b]){for(b>=v&&(v=b+1);!(k=g[v])&&++v<d;);w._next=k||null}}return a=new xe(a,i),a._enter=l,a._exit=f,a}function R_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function P_(){return new xe(this._exit||this._groups.map(w0),this._parents)}function O_(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function U_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),l=new Array(r),f=0;f<a;++f)for(var s=n[f],u=i[f],c=s.length,h=l[f]=new Array(c),p,d=0;d<c;++d)(p=s[d]||u[d])&&(h[d]=p);for(;f<r;++f)l[f]=n[f];return new xe(l,this._parents)}function z_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function B_(t){t||(t=q_);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],l=a.length,f=r[o]=new Array(l),s,u=0;u<l;++u)(s=a[u])&&(f[u]=s);f.sort(e)}return new xe(r,this._parents).order()}function q_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function W_(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Y_(){return Array.from(this)}function H_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function V_(){let t=0;for(const e of this)++t;return t}function G_(){return!this.node()}function X_(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,l;o<a;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function j_(t){return function(){this.removeAttribute(t)}}function Z_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function K_(t,e){return function(){this.setAttribute(t,e)}}function Q_(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function J_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ty(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ey(t,e){var n=Ka(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Z_:j_:typeof e=="function"?n.local?ty:J_:n.local?Q_:K_)(n,e))}function v0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ny(t){return function(){this.style.removeProperty(t)}}function iy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ry(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function oy(t,e,n){return arguments.length>1?this.each((e==null?ny:typeof e=="function"?ry:iy)(t,e,n??"")):Vi(this.node(),t)}function Vi(t,e){return t.style.getPropertyValue(e)||v0(t).getComputedStyle(t,null).getPropertyValue(e)}function ay(t){return function(){delete this[t]}}function ly(t,e){return function(){this[t]=e}}function fy(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function sy(t,e){return arguments.length>1?this.each((e==null?ay:typeof e=="function"?fy:ly)(t,e)):this.node()[t]}function x0(t){return t.trim().split(/^|\s+/)}function Is(t){return t.classList||new k0(t)}function k0(t){this._node=t,this._names=x0(t.getAttribute("class")||"")}k0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function M0(t,e){for(var n=Is(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function S0(t,e){for(var n=Is(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function uy(t){return function(){M0(this,t)}}function cy(t){return function(){S0(this,t)}}function hy(t,e){return function(){(e.apply(this,arguments)?M0:S0)(this,t)}}function dy(t,e){var n=x0(t+"");if(arguments.length<2){for(var i=Is(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?hy:e?uy:cy)(n,e))}function py(){this.textContent=""}function my(t){return function(){this.textContent=t}}function gy(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function by(t){return arguments.length?this.each(t==null?py:(typeof t=="function"?gy:my)(t)):this.node().textContent}function _y(){this.innerHTML=""}function yy(t){return function(){this.innerHTML=t}}function wy(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function vy(t){return arguments.length?this.each(t==null?_y:(typeof t=="function"?wy:yy)(t)):this.node().innerHTML}function xy(){this.nextSibling&&this.parentNode.appendChild(this)}function ky(){return this.each(xy)}function My(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sy(){return this.each(My)}function Ty(t){var e=typeof t=="function"?t:Qa(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Cy(){return null}function $y(t,e){var n=typeof t=="function"?t:Qa(t),i=e==null?Cy:typeof e=="function"?e:Ls(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ay(){var t=this.parentNode;t&&t.removeChild(this)}function Ey(){return this.each(Ay)}function Ny(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Dy(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Fy(t){return this.select(t?Dy:Ny)}function Ly(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Iy(t){return function(e){t.call(this,e,this.__data__)}}function Ry(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Py(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Oy(t,e,n){return function(){var i=this.__on,r,o=Iy(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Uy(t,e,n){var i=Ry(t+""),r,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,s=l.length,u;f<s;++f)for(r=0,u=l[f];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(l=e?Oy:Py,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function T0(t,e,n){var i=v0(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function zy(t,e){return function(){return T0(this,t,e)}}function By(t,e){return function(){return T0(this,t,e.apply(this,arguments))}}function qy(t,e){return this.each((typeof e=="function"?By:zy)(t,e))}function*Wy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var C0=[null];function xe(t,e){this._groups=t,this._parents=e}function io(){return new xe([[document.documentElement]],C0)}function Yy(){return this}xe.prototype=io.prototype={constructor:xe,select:g_,selectAll:w_,selectChild:M_,selectChildren:$_,filter:A_,data:I_,enter:E_,exit:P_,join:O_,merge:U_,selection:Yy,order:z_,sort:B_,call:W_,nodes:Y_,node:H_,size:V_,empty:G_,each:X_,attr:ey,style:oy,property:sy,classed:dy,text:by,html:vy,raise:ky,lower:Sy,append:Ty,insert:$y,remove:Ey,clone:Fy,datum:Ly,on:Uy,dispatch:qy,[Symbol.iterator]:Wy};function Fr(t){return typeof t=="string"?new xe([[document.querySelector(t)]],[document.documentElement]):new xe([[t]],C0)}function Hy(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Vy(t,e){if(t=Hy(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function lr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ro(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Zn(){}var pi=.7,Gi=1/pi,Ui="\\s*([+-]?\\d+)\\s*",Br="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gy=/^#([0-9a-f]{3,8})$/,Xy=new RegExp(`^rgb\\(${Ui},${Ui},${Ui}\\)$`),jy=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),Zy=new RegExp(`^rgba\\(${Ui},${Ui},${Ui},${Br}\\)$`),Ky=new RegExp(`^rgba\\(${nn},${nn},${nn},${Br}\\)$`),Qy=new RegExp(`^hsl\\(${Br},${nn},${nn}\\)$`),Jy=new RegExp(`^hsla\\(${Br},${nn},${nn},${Br}\\)$`),Xu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lr(Zn,mi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ju,formatHex:ju,formatHex8:tw,formatHsl:ew,formatRgb:Zu,toString:Zu});function ju(){return this.rgb().formatHex()}function tw(){return this.rgb().formatHex8()}function ew(){return $0(this).formatHsl()}function Zu(){return this.rgb().formatRgb()}function mi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Gy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ku(e):n===3?new Kt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Do(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Do(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xy.exec(t))?new Kt(e[1],e[2],e[3],1):(e=jy.exec(t))?new Kt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zy.exec(t))?Do(e[1],e[2],e[3],e[4]):(e=Ky.exec(t))?Do(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qy.exec(t))?tc(e[1],e[2]/100,e[3]/100,1):(e=Jy.exec(t))?tc(e[1],e[2]/100,e[3]/100,e[4]):Xu.hasOwnProperty(t)?Ku(Xu[t]):t==="transparent"?new Kt(NaN,NaN,NaN,0):null}function Ku(t){return new Kt(t>>16&255,t>>8&255,t&255,1)}function Do(t,e,n,i){return i<=0&&(t=e=n=NaN),new Kt(t,e,n,i)}function Rs(t){return t instanceof Zn||(t=mi(t)),t?(t=t.rgb(),new Kt(t.r,t.g,t.b,t.opacity)):new Kt}function Vn(t,e,n,i){return arguments.length===1?Rs(t):new Kt(t,e,n,i??1)}function Kt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}lr(Kt,Vn,ro(Zn,{brighter(t){return t=t==null?Gi:Math.pow(Gi,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new Kt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Kt(fi(this.r),fi(this.g),fi(this.b),pa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Qu,formatHex:Qu,formatHex8:nw,formatRgb:Ju,toString:Ju}));function Qu(){return`#${ai(this.r)}${ai(this.g)}${ai(this.b)}`}function nw(){return`#${ai(this.r)}${ai(this.g)}${ai(this.b)}${ai((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ju(){const t=pa(this.opacity);return`${t===1?"rgb(":"rgba("}${fi(this.r)}, ${fi(this.g)}, ${fi(this.b)}${t===1?")":`, ${t})`}`}function pa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ai(t){return t=fi(t),(t<16?"0":"")+t.toString(16)}function tc(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ue(t,e,n,i)}function $0(t){if(t instanceof Ue)return new Ue(t.h,t.s,t.l,t.opacity);if(t instanceof Zn||(t=mi(t)),!t)return new Ue;if(t instanceof Ue)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,l=o-r,f=(o+r)/2;return l?(e===o?a=(n-i)/l+(n<i)*6:n===o?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?o+r:2-o-r,a*=60):l=f>0&&f<1?0:a,new Ue(a,l,f,t.opacity)}function zf(t,e,n,i){return arguments.length===1?$0(t):new Ue(t,e,n,i??1)}function Ue(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}lr(Ue,zf,ro(Zn,{brighter(t){return t=t==null?Gi:Math.pow(Gi,t),new Ue(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new Ue(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Kt(Yl(t>=240?t-240:t+120,r,i),Yl(t,r,i),Yl(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ue(ec(this.h),Fo(this.s),Fo(this.l),pa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=pa(this.opacity);return`${t===1?"hsl(":"hsla("}${ec(this.h)}, ${Fo(this.s)*100}%, ${Fo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ec(t){return t=(t||0)%360,t<0?t+360:t}function Fo(t){return Math.max(0,Math.min(1,t||0))}function Yl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const A0=Math.PI/180,E0=180/Math.PI,ma=18,N0=.96422,D0=1,F0=.82521,L0=4/29,zi=6/29,I0=3*zi*zi,iw=zi*zi*zi;function R0(t){if(t instanceof rn)return new rn(t.l,t.a,t.b,t.opacity);if(t instanceof _n)return P0(t);t instanceof Kt||(t=Rs(t));var e=Xl(t.r),n=Xl(t.g),i=Xl(t.b),r=Hl((.2225045*e+.7168786*n+.0606169*i)/D0),o,a;return e===n&&n===i?o=a=r:(o=Hl((.4360747*e+.3850649*n+.1430804*i)/N0),a=Hl((.0139322*e+.0971045*n+.7141733*i)/F0)),new rn(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Bf(t,e,n,i){return arguments.length===1?R0(t):new rn(t,e,n,i??1)}function rn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}lr(rn,Bf,ro(Zn,{brighter(t){return new rn(this.l+ma*(t??1),this.a,this.b,this.opacity)},darker(t){return new rn(this.l-ma*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=N0*Vl(e),t=D0*Vl(t),n=F0*Vl(n),new Kt(Gl(3.1338561*e-1.6168667*t-.4906146*n),Gl(-.9787684*e+1.9161415*t+.033454*n),Gl(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Hl(t){return t>iw?Math.pow(t,1/3):t/I0+L0}function Vl(t){return t>zi?t*t*t:I0*(t-L0)}function Gl(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Xl(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function rw(t){if(t instanceof _n)return new _n(t.h,t.c,t.l,t.opacity);if(t instanceof rn||(t=R0(t)),t.a===0&&t.b===0)return new _n(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*E0;return new _n(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function qf(t,e,n,i){return arguments.length===1?rw(t):new _n(t,e,n,i??1)}function _n(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function P0(t){if(isNaN(t.h))return new rn(t.l,0,0,t.opacity);var e=t.h*A0;return new rn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}lr(_n,qf,ro(Zn,{brighter(t){return new _n(this.h,this.c,this.l+ma*(t??1),this.opacity)},darker(t){return new _n(this.h,this.c,this.l-ma*(t??1),this.opacity)},rgb(){return P0(this).rgb()}}));var O0=-.14861,Ps=1.78277,Os=-.29227,Ja=-.90649,qr=1.97294,nc=qr*Ja,ic=qr*Ps,rc=Ps*Os-Ja*O0;function ow(t){if(t instanceof si)return new si(t.h,t.s,t.l,t.opacity);t instanceof Kt||(t=Rs(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(rc*i+nc*e-ic*n)/(rc+nc-ic),o=i-r,a=(qr*(n-r)-Os*o)/Ja,l=Math.sqrt(a*a+o*o)/(qr*r*(1-r)),f=l?Math.atan2(a,o)*E0-120:NaN;return new si(f<0?f+360:f,l,r,t.opacity)}function an(t,e,n,i){return arguments.length===1?ow(t):new si(t,e,n,i??1)}function si(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}lr(si,an,ro(Zn,{brighter(t){return t=t==null?Gi:Math.pow(Gi,t),new si(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new si(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*A0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Kt(255*(e+n*(O0*i+Ps*r)),255*(e+n*(Os*i+Ja*r)),255*(e+n*(qr*i)),this.opacity)}}));function aw(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function lw(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return aw((n-i/e)*e,a,r,o,l)}}const tl=t=>()=>t;function U0(t,e){return function(n){return t+n*e}}function fw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Us(t,e){var n=e-t;return n?U0(t,n>180||n<-180?n-360*Math.round(n/360):n):tl(isNaN(t)?e:t)}function sw(t){return(t=+t)==1?re:function(e,n){return n-e?fw(e,n,t):tl(isNaN(e)?n:e)}}function re(t,e){var n=e-t;return n?U0(t,n):tl(isNaN(t)?e:t)}const gi=function t(e){var n=sw(e);function i(r,o){var a=n((r=Vn(r)).r,(o=Vn(o)).r),l=n(r.g,o.g),f=n(r.b,o.b),s=re(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=l(u),r.b=f(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function uw(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=Vn(e[a]),i[a]=l.r||0,r[a]=l.g||0,o[a]=l.b||0;return i=t(i),r=t(r),o=t(o),l.opacity=1,function(f){return l.r=i(f),l.g=r(f),l.b=o(f),l+""}}}var cw=uw(lw);function hw(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function dw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pw(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=oo(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=r[a](l);return o}}function mw(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ie(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gw(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=oo(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Wf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jl=new RegExp(Wf.source,"g");function bw(t){return function(){return t}}function _w(t){return function(e){return t(e)+""}}function z0(t,e){var n=Wf.lastIndex=jl.lastIndex=0,i,r,o,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=Wf.exec(t))&&(r=jl.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:ie(i,r)})),n=jl.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?f[0]?_w(f[0].x):bw(e):(e=f.length,function(s){for(var u=0,c;u<e;++u)l[(c=f[u]).i]=c.x(s);return l.join("")})}function oo(t,e){var n=typeof e,i;return e==null||n==="boolean"?tl(e):(n==="number"?ie:n==="string"?(i=mi(e))?(e=i,gi):z0:e instanceof mi?gi:e instanceof Date?mw:dw(e)?hw:Array.isArray(e)?pw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gw:ie)(t,e)}function zs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var oc=180/Math.PI,Yf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B0(t,e,n,i,r,o){var a,l,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),t*i<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*oc,skewX:Math.atan(f)*oc,scaleX:a,scaleY:l}}var Lo;function yw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yf:B0(e.a,e.b,e.c,e.d,e.e,e.f)}function ww(t){return t==null||(Lo||(Lo=document.createElementNS("http://www.w3.org/2000/svg","g")),Lo.setAttribute("transform",t),!(t=Lo.transform.baseVal.consolidate()))?Yf:(t=t.matrix,B0(t.a,t.b,t.c,t.d,t.e,t.f))}function q0(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push("translate(",null,e,null,n);d.push({i:m-4,x:ie(s,c)},{i:m-2,x:ie(u,h)})}else(c||h)&&p.push("translate("+c+e+h+n)}function a(s,u,c,h){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),h.push({i:c.push(r(c)+"rotate(",null,i)-2,x:ie(s,u)})):u&&c.push(r(c)+"rotate("+u+i)}function l(s,u,c,h){s!==u?h.push({i:c.push(r(c)+"skewX(",null,i)-2,x:ie(s,u)}):u&&c.push(r(c)+"skewX("+u+i)}function f(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push(r(p)+"scale(",null,",",null,")");d.push({i:m-4,x:ie(s,c)},{i:m-2,x:ie(u,h)})}else(c!==1||h!==1)&&p.push(r(p)+"scale("+c+","+h+")")}return function(s,u){var c=[],h=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,c,h),a(s.rotate,u.rotate,c,h),l(s.skewX,u.skewX,c,h),f(s.scaleX,s.scaleY,u.scaleX,u.scaleY,c,h),s=u=null,function(p){for(var d=-1,m=h.length,g;++d<m;)c[(g=h[d]).i]=g.x(p);return c.join("")}}}var vw=q0(yw,"px, ","px)","deg)"),xw=q0(ww,", ",")",")");function kw(t){return function(e,n){var i=t((e=zf(e)).h,(n=zf(n)).h),r=re(e.s,n.s),o=re(e.l,n.l),a=re(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Mw=kw(Us);function Sw(t,e){var n=re((t=Bf(t)).l,(e=Bf(e)).l),i=re(t.a,e.a),r=re(t.b,e.b),o=re(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function Tw(t){return function(e,n){var i=t((e=qf(e)).h,(n=qf(n)).h),r=re(e.c,n.c),o=re(e.l,n.l),a=re(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Cw=Tw(Us);function W0(t){return function e(n){n=+n;function i(r,o){var a=t((r=an(r)).h,(o=an(o)).h),l=re(r.s,o.s),f=re(r.l,o.l),s=re(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=l(u),r.l=f(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}W0(Us);var Bs=W0(re);function el(t,e){e===void 0&&(e=t,t=oo);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[l](a-l)}}function qe(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Xi=0,kr=0,gr=0,Y0=1e3,ga,Mr,ba=0,bi=0,nl=0,Wr=typeof performance=="object"&&performance.now?performance:Date,H0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function qs(){return bi||(H0($w),bi=Wr.now()+nl)}function $w(){bi=0}function _a(){this._call=this._time=this._next=null}_a.prototype=V0.prototype={constructor:_a,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?qs():+n)+(e==null?0:+e),!this._next&&Mr!==this&&(Mr?Mr._next=this:ga=this,Mr=this),this._call=t,this._time=n,Hf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hf())}};function V0(t,e,n){var i=new _a;return i.restart(t,e,n),i}function Aw(){qs(),++Xi;for(var t=ga,e;t;)(e=bi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xi}function ac(){bi=(ba=Wr.now())+nl,Xi=kr=0;try{Aw()}finally{Xi=0,Nw(),bi=0}}function Ew(){var t=Wr.now(),e=t-ba;e>Y0&&(nl-=e,ba=t)}function Nw(){for(var t,e=ga,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ga=n);Mr=t,Hf(i)}function Hf(t){if(!Xi){kr&&(kr=clearTimeout(kr));var e=t-bi;e>24?(t<1/0&&(kr=setTimeout(ac,t-Wr.now()-nl)),gr&&(gr=clearInterval(gr))):(gr||(ba=Wr.now(),gr=setInterval(Ew,Y0)),Xi=1,H0(ac))}}function lc(t,e,n){var i=new _a;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Dw=g0("start","end","cancel","interrupt"),Fw=[],G0=0,fc=1,Vf=2,ea=3,sc=4,Gf=5,na=6;function il(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Lw(t,n,{name:e,index:i,group:r,on:Dw,tween:Fw,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:G0})}function Ws(t,e){var n=Ge(t,e);if(n.state>G0)throw new Error("too late; already scheduled");return n}function fn(t,e){var n=Ge(t,e);if(n.state>ea)throw new Error("too late; already running");return n}function Ge(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Lw(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=V0(o,0,n.time);function o(s){n.state=fc,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,c,h,p;if(n.state!==fc)return f();for(u in i)if(p=i[u],p.name===n.name){if(p.state===ea)return lc(a);p.state===sc?(p.state=na,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[u]):+u<e&&(p.state=na,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[u])}if(lc(function(){n.state===ea&&(n.state=sc,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=Vf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Vf){for(n.state=ea,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=p);r.length=c+1}}function l(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(f),n.state=Gf,1),c=-1,h=r.length;++c<h;)r[c].call(t,u);n.state===Gf&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=na,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function Iw(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>Vf&&i.state<Gf,i.state=na,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function Rw(t){return this.each(function(){Iw(this,t)})}function Pw(t,e){var n,i;return function(){var r=fn(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Ow(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=fn(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},f=0,s=r.length;f<s;++f)if(r[f].name===e){r[f]=l;break}f===s&&r.push(l)}o.tween=r}}function Uw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Ge(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Pw:Ow)(n,t,e))}function Ys(t,e,n){var i=t._id;return t.each(function(){var r=fn(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Ge(r,i).value[e]}}function X0(t,e){var n;return(typeof e=="number"?ie:e instanceof mi?gi:(n=mi(e))?(e=n,gi):z0)(t,e)}function zw(t){return function(){this.removeAttribute(t)}}function Bw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function Ww(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function Yw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Hw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Vw(t,e){var n=Ka(t),i=n==="transform"?xw:X0;return this.attrTween(t,typeof e=="function"?(n.local?Hw:Yw)(n,i,Ys(this,"attr."+t,e)):e==null?(n.local?Bw:zw)(n):(n.local?Ww:qw)(n,i,e))}function Gw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Xw(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function jw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Xw(t,o)),n}return r._value=e,r}function Zw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Gw(t,o)),n}return r._value=e,r}function Kw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ka(t);return this.tween(n,(i.local?jw:Zw)(i,e))}function Qw(t,e){return function(){Ws(this,t).delay=+e.apply(this,arguments)}}function Jw(t,e){return e=+e,function(){Ws(this,t).delay=e}}function tv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qw:Jw)(e,t)):Ge(this.node(),e).delay}function ev(t,e){return function(){fn(this,t).duration=+e.apply(this,arguments)}}function nv(t,e){return e=+e,function(){fn(this,t).duration=e}}function iv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ev:nv)(e,t)):Ge(this.node(),e).duration}function rv(t,e){if(typeof e!="function")throw new Error;return function(){fn(this,t).ease=e}}function ov(t){var e=this._id;return arguments.length?this.each(rv(e,t)):Ge(this.node(),e).ease}function av(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;fn(this,t).ease=n}}function lv(t){if(typeof t!="function")throw new Error;return this.each(av(this._id,t))}function fv(t){typeof t!="function"&&(t=_0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new kn(i,this._parents,this._name,this._id)}function sv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var f=e[l],s=n[l],u=f.length,c=a[l]=new Array(u),h,p=0;p<u;++p)(h=f[p]||s[p])&&(c[p]=h);for(;l<i;++l)a[l]=e[l];return new kn(a,this._parents,this._name,this._id)}function uv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function cv(t,e,n){var i,r,o=uv(e)?Ws:fn;return function(){var a=o(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function hv(t,e){var n=this._id;return arguments.length<2?Ge(this.node(),n).on.on(t):this.each(cv(n,t,e))}function dv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function pv(){return this.on("end.remove",dv(this._id))}function mv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ls(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var l=i[a],f=l.length,s=o[a]=new Array(f),u,c,h=0;h<f;++h)(u=l[h])&&(c=t.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c,il(s[h],e,n,h,s,Ge(u,n)));return new kn(o,this._parents,e,n)}function gv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=b0(t));for(var i=this._groups,r=i.length,o=[],a=[],l=0;l<r;++l)for(var f=i[l],s=f.length,u,c=0;c<s;++c)if(u=f[c]){for(var h=t.call(u,u.__data__,c,f),p,d=Ge(u,n),m=0,g=h.length;m<g;++m)(p=h[m])&&il(p,e,n,m,h,d);o.push(h),a.push(u)}return new kn(o,a,e,n)}var bv=io.prototype.constructor;function _v(){return new bv(this._groups,this._parents)}function yv(t,e){var n,i,r;return function(){var o=Vi(this,t),a=(this.style.removeProperty(t),Vi(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function j0(t){return function(){this.style.removeProperty(t)}}function wv(t,e,n){var i,r=n+"",o;return function(){var a=Vi(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function vv(t,e,n){var i,r,o;return function(){var a=Vi(this,t),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(t),Vi(this,t))),a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l))}}function xv(t,e){var n,i,r,o="style."+e,a="end."+o,l;return function(){var f=fn(this,t),s=f.on,u=f.value[o]==null?l||(l=j0(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),f.on=i}}function kv(t,e,n){var i=(t+="")=="transform"?vw:X0;return e==null?this.styleTween(t,yv(t,i)).on("end.style."+t,j0(t)):typeof e=="function"?this.styleTween(t,vv(t,i,Ys(this,"style."+t,e))).each(xv(this._id,t)):this.styleTween(t,wv(t,i,e),n).on("end.style."+t,null)}function Mv(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Sv(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Mv(t,a,n)),i}return o._value=e,o}function Tv(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Sv(t,e,n??""))}function Cv(t){return function(){this.textContent=t}}function $v(t){return function(){var e=t(this);this.textContent=e??""}}function Av(t){return this.tween("text",typeof t=="function"?$v(Ys(this,"text",t)):Cv(t==null?"":t+""))}function Ev(t){return function(e){this.textContent=t.call(this,e)}}function Nv(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Ev(r)),e}return i._value=t,i}function Dv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nv(t))}function Fv(){for(var t=this._name,e=this._id,n=Z0(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)if(f=a[s]){var u=Ge(f,e);il(f,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new kn(i,this._parents,t,n)}function Lv(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var l={value:a},f={value:function(){--r===0&&o()}};n.each(function(){var s=fn(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),s.on=e}),r===0&&o()})}var Iv=0;function kn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function Z0(){return++Iv}var cn=io.prototype;kn.prototype={constructor:kn,select:mv,selectAll:gv,selectChild:cn.selectChild,selectChildren:cn.selectChildren,filter:fv,merge:sv,selection:_v,transition:Fv,call:cn.call,nodes:cn.nodes,node:cn.node,size:cn.size,empty:cn.empty,each:cn.each,on:hv,attr:Vw,attrTween:Kw,style:kv,styleTween:Tv,text:Av,textTween:Dv,remove:pv,tween:Uw,delay:tv,duration:iv,ease:ov,easeVarying:lv,end:Lv,[Symbol.iterator]:cn[Symbol.iterator]};function Rv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Pv={time:null,delay:0,duration:250,ease:Rv};function Ov(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Uv(t){var e,n;t instanceof kn?(e=t._id,t=t._name):(e=Z0(),(n=Pv).time=qs(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&il(f,t,e,s,a,n||Ov(f,e));return new kn(i,this._parents,t,e)}io.prototype.interrupt=Rw;io.prototype.transition=Uv;const Xf=Math.PI,jf=2*Xf,ii=1e-6,zv=jf-ii;function K0(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Bv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return K0;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class Q0{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?K0:Bv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,f=i-e,s=r-n,u=a-e,c=l-n,h=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ii)if(!(Math.abs(c*f-s*u)>ii)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,d=r-l,m=f*f+s*s,g=p*p+d*d,_=Math.sqrt(m),b=Math.sqrt(h),v=o*Math.tan((Xf-Math.acos((m+h-g)/(2*_*b)))/2),w=v/b,k=v/_;Math.abs(w-1)>ii&&this._append`L${e+w*u},${n+w*c}`,this._append`A${o},${o},0,0,${+(c*p>u*d)},${this._x1=e+k*f},${this._y1=n+k*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),f=i*Math.sin(r),s=e+l,u=n+f,c=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>ii||Math.abs(this._y1-u)>ii)&&this._append`L${s},${u}`,i&&(h<0&&(h=h%jf+jf),h>zv?this._append`A${i},${i},0,1,${c},${e-l},${n-f}A${i},${i},0,1,${c},${this._x1=s},${this._y1=u}`:h>ii&&this._append`A${i},${i},0,${+(h>=Xf)},${c},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function In(t=3){return new Q0(+t)}var uc={},Zl={},Kl=34,br=10,Ql=13;function J0(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function qv(t,e){var n=J0(t);return function(i,r){return e(n(i),r,t)}}function cc(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function he(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Wv(t){return t<0?"-"+he(-t,6):t>9999?"+"+he(t,6):he(t,4)}function Yv(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Wv(t.getUTCFullYear())+"-"+he(t.getUTCMonth()+1,2)+"-"+he(t.getUTCDate(),2)+(r?"T"+he(e,2)+":"+he(n,2)+":"+he(i,2)+"."+he(r,3)+"Z":i?"T"+he(e,2)+":"+he(n,2)+":"+he(i,2)+"Z":n||e?"T"+he(e,2)+":"+he(n,2)+"Z":"")}function Hv(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(c,h){var p,d,m=r(c,function(g,_){if(p)return p(g,_-1);d=g,p=h?qv(g,h):J0(g)});return m.columns=d||[],m}function r(c,h){var p=[],d=c.length,m=0,g=0,_,b=d<=0,v=!1;c.charCodeAt(d-1)===br&&--d,c.charCodeAt(d-1)===Ql&&--d;function w(){if(b)return Zl;if(v)return v=!1,uc;var x,S=m,T;if(c.charCodeAt(S)===Kl){for(;m++<d&&c.charCodeAt(m)!==Kl||c.charCodeAt(++m)===Kl;);return(x=m)>=d?b=!0:(T=c.charCodeAt(m++))===br?v=!0:T===Ql&&(v=!0,c.charCodeAt(m)===br&&++m),c.slice(S+1,x-1).replace(/""/g,'"')}for(;m<d;){if((T=c.charCodeAt(x=m++))===br)v=!0;else if(T===Ql)v=!0,c.charCodeAt(m)===br&&++m;else if(T!==n)continue;return c.slice(S,x)}return b=!0,c.slice(S,d)}for(;(_=w())!==Zl;){for(var k=[];_!==uc&&_!==Zl;)k.push(_),_=w();h&&(k=h(k,g++))==null||p.push(k)}return p}function o(c,h){return c.map(function(p){return h.map(function(d){return u(p[d])}).join(t)})}function a(c,h){return h==null&&(h=cc(c)),[h.map(u).join(t)].concat(o(c,h)).join(`
`)}function l(c,h){return h==null&&(h=cc(c)),o(c,h).join(`
`)}function f(c){return c.map(s).join(`
`)}function s(c){return c.map(u).join(t)}function u(c){return c==null?"":c instanceof Date?Yv(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:r,format:a,formatBody:l,formatRows:f,formatRow:s,formatValue:u}}var Vv=Hv(","),Gv=Vv.parse;function Xv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ya(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ji(t){return t=ya(Math.abs(t)),t?t[1]:NaN}function jv(t,e){return function(n,i){for(var r=n.length,o=[],a=0,l=t[0],f=0;r>0&&l>0&&(f+l+1>i&&(l=Math.max(1,i-f)),o.push(n.substring(r-=l,r+l)),!((f+=l+1)>i));)l=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Zv(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Kv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yr(t){if(!(e=Kv.exec(t)))throw new Error("invalid format: "+t);var e;return new Hs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yr.prototype=Hs.prototype;function Hs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Hs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qv(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var t1;function Jv(t,e){var n=ya(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(t1=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ya(t,Math.max(0,e+o-1))[0]}function hc(t,e){var n=ya(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const dc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Xv,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>hc(t*100,e),r:hc,s:Jv,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pc(t){return t}var mc=Array.prototype.map,gc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function t3(t){var e=t.grouping===void 0||t.thousands===void 0?pc:jv(mc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?pc:Zv(mc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function s(c){c=Yr(c);var h=c.fill,p=c.align,d=c.sign,m=c.symbol,g=c.zero,_=c.width,b=c.comma,v=c.precision,w=c.trim,k=c.type;k==="n"?(b=!0,k="g"):dc[k]||(v===void 0&&(v=12),w=!0,k="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=m==="$"?i:/[%p]/.test(k)?a:"",T=dc[k],A=/[defgprs%]/.test(k);v=v===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function F(C){var L=x,R=S,W,$,B;if(k==="c")R=T(C)+R,C="";else{C=+C;var z=C<0||1/C<0;if(C=isNaN(C)?f:T(Math.abs(C),v),w&&(C=Qv(C)),z&&+C==0&&d!=="+"&&(z=!1),L=(z?d==="("?d:l:d==="-"||d==="("?"":d)+L,R=(k==="s"?gc[8+t1/3]:"")+R+(z&&d==="("?")":""),A){for(W=-1,$=C.length;++W<$;)if(B=C.charCodeAt(W),48>B||B>57){R=(B===46?r+C.slice(W+1):C.slice(W))+R,C=C.slice(0,W);break}}}b&&!g&&(C=e(C,1/0));var Q=L.length+C.length+R.length,j=Q<_?new Array(_-Q+1).join(h):"";switch(b&&g&&(C=e(j+C,j.length?_-R.length:1/0),j=""),p){case"<":C=L+C+R+j;break;case"=":C=L+j+C+R;break;case"^":C=j.slice(0,Q=j.length>>1)+L+C+R+j.slice(Q);break;default:C=j+L+C+R;break}return o(C)}return F.toString=function(){return c+""},F}function u(c,h){var p=s((c=Yr(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(ji(h)/3)))*3,m=Math.pow(10,-d),g=gc[8+d/3];return function(_){return p(m*_)+g}}return{format:s,formatPrefix:u}}var Io,fr,e1;e3({thousands:",",grouping:[3],currency:["$",""]});function e3(t){return Io=t3(t),fr=Io.format,e1=Io.formatPrefix,Io}function n3(t){return Math.max(0,-ji(Math.abs(t)))}function i3(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ji(e)/3)))*3-ji(Math.abs(t)))}function r3(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ji(e)-ji(t))+1}var yt=1e-6,n1=1e-12,Mt=Math.PI,Lt=Mt/2,bc=Mt/4,ke=Mt*2,ae=180/Mt,Ft=Mt/180,Ct=Math.abs,sr=Math.atan,Mn=Math.atan2,xt=Math.cos,i1=Math.exp,wa=Math.log,Jl=Math.pow,_t=Math.sin,Ee=Math.sign||function(t){return t>0?1:t<0?-1:0},we=Math.sqrt,Vs=Math.tan;function r1(t){return t>1?0:t<-1?Mt:Math.acos(t)}function Le(t){return t>1?Lt:t<-1?-Lt:Math.asin(t)}function Ne(){}function va(t,e){t&&yc.hasOwnProperty(t.type)&&yc[t.type](t,e)}var _c={Feature:function(t,e){va(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)va(n[i].geometry,e)}},yc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Zf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Zf(n[i],e,0)},Polygon:function(t,e){wc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)wc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)va(n[i],e)}};function Zf(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function wc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Zf(t[n],e,1);e.polygonEnd()}function ri(t,e){t&&_c.hasOwnProperty(t.type)?_c[t.type](t,e):va(t,e)}function Kf(t){return[Mn(t[1],t[0]),Le(t[2])]}function Zi(t){var e=t[0],n=t[1],i=xt(n);return[i*xt(e),i*_t(e),_t(n)]}function Ro(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xa(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function tf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Po(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Qf(t){var e=we(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Jf(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function ts(t,e){return Ct(t)>Mt&&(t-=Math.round(t/ke)*ke),[t,e]}ts.invert=ts;function o1(t,e,n){return(t%=ke)?e||n?Jf(xc(t),kc(e,n)):xc(t):e||n?kc(e,n):ts}function vc(t){return function(e,n){return e+=t,Ct(e)>Mt&&(e-=Math.round(e/ke)*ke),[e,n]}}function xc(t){var e=vc(t);return e.invert=vc(-t),e}function kc(t,e){var n=xt(t),i=_t(t),r=xt(e),o=_t(e);function a(l,f){var s=xt(f),u=xt(l)*s,c=_t(l)*s,h=_t(f),p=h*n+u*i;return[Mn(c*r-p*o,u*n-h*i),Le(p*r+c*o)]}return a.invert=function(l,f){var s=xt(f),u=xt(l)*s,c=_t(l)*s,h=_t(f),p=h*r-c*o;return[Mn(c*r+h*o,u*n+p*i),Le(p*n-u*i)]},a}function o3(t){t=o1(t[0]*Ft,t[1]*Ft,t.length>2?t[2]*Ft:0);function e(n){return n=t(n[0]*Ft,n[1]*Ft),n[0]*=ae,n[1]*=ae,n}return e.invert=function(n){return n=t.invert(n[0]*Ft,n[1]*Ft),n[0]*=ae,n[1]*=ae,n},e}function a3(t,e,n,i,r,o){if(n){var a=xt(e),l=_t(e),f=i*n;r==null?(r=e+i*ke,o=e-f/2):(r=Mc(a,r),o=Mc(a,o),(i>0?r<o:r>o)&&(r+=i*ke));for(var s,u=r;i>0?u>o:u<o;u-=f)s=Kf([a,-l*xt(u),-l*_t(u)]),t.point(s[0],s[1])}}function Mc(t,e){e=Zi(e),e[0]-=t,Qf(e);var n=r1(-e[1]);return((-e[2]<0?-n:n)+ke-yt)%ke}function a1(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Ne,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ia(t,e){return Ct(t[0]-e[0])<yt&&Ct(t[1]-e[1])<yt}function Oo(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function l1(t,e,n,i,r){var o=[],a=[],l,f;if(t.forEach(function(d){if(!((m=d.length-1)<=0)){var m,g=d[0],_=d[m],b;if(ia(g,_)){if(!g[2]&&!_[2]){for(r.lineStart(),l=0;l<m;++l)r.point((g=d[l])[0],g[1]);r.lineEnd();return}_[0]+=2*yt}o.push(b=new Oo(g,d,null,!0)),a.push(b.o=new Oo(g,null,b,!1)),o.push(b=new Oo(_,d,null,!1)),a.push(b.o=new Oo(_,null,b,!0))}}),!!o.length){for(a.sort(e),Sc(o),Sc(a),l=0,f=a.length;l<f;++l)a[l].e=n=!n;for(var s=o[0],u,c;;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(l=0,f=u.length;l<f;++l)r.point((c=u[l])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(p)for(u=h.p.z,l=u.length-1;l>=0;--l)r.point((c=u[l])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);r.lineEnd()}}}function Sc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function ef(t){return Ct(t[0])<=Mt?t[0]:Ee(t[0])*((Ct(t[0])+Mt)%ke-Mt)}function l3(t,e){var n=ef(e),i=e[1],r=_t(i),o=[_t(n),-xt(n),0],a=0,l=0,f=new hi;r===1?i=Lt+yt:r===-1&&(i=-Lt-yt);for(var s=0,u=t.length;s<u;++s)if(h=(c=t[s]).length)for(var c,h,p=c[h-1],d=ef(p),m=p[1]/2+bc,g=_t(m),_=xt(m),b=0;b<h;++b,d=w,g=x,_=S,p=v){var v=c[b],w=ef(v),k=v[1]/2+bc,x=_t(k),S=xt(k),T=w-d,A=T>=0?1:-1,F=A*T,C=F>Mt,L=g*x;if(f.add(Mn(L*A*_t(F),_*S+L*xt(F))),a+=C?T+A*ke:T,C^d>=n^w>=n){var R=xa(Zi(p),Zi(v));Qf(R);var W=xa(o,R);Qf(W);var $=(C^T>=0?-1:1)*Le(W[2]);(i>$||i===$&&(R[0]||R[1]))&&(l+=C^T>=0?1:-1)}}return(a<-yt||a<yt&&f<-n1)^l&1}function f1(t,e,n,i){return function(r){var o=e(r),a=a1(),l=e(a),f=!1,s,u,c,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=_,h.lineStart=b,h.lineEnd=v,u=[],s=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,u=m0(u);var w=l3(s,i);u.length?(f||(r.polygonStart(),f=!0),l1(u,s3,w,n,r)):w&&(f||(r.polygonStart(),f=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(w,k){t(w,k)&&r.point(w,k)}function d(w,k){o.point(w,k)}function m(){h.point=d,o.lineStart()}function g(){h.point=p,o.lineEnd()}function _(w,k){c.push([w,k]),l.point(w,k)}function b(){l.lineStart(),c=[]}function v(){_(c[0][0],c[0][1]),l.lineEnd();var w=l.clean(),k=a.result(),x,S=k.length,T,A,F;if(c.pop(),s.push(c),c=null,!!S){if(w&1){if(A=k[0],(T=A.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),x=0;x<T;++x)r.point((F=A[x])[0],F[1]);r.lineEnd()}return}S>1&&w&2&&k.push(k.pop().concat(k.shift())),u.push(k.filter(f3))}}return h}}function f3(t){return t.length>1}function s3(t,e){return((t=t.x)[0]<0?t[1]-Lt-yt:Lt-t[1])-((e=e.x)[0]<0?e[1]-Lt-yt:Lt-e[1])}const Tc=f1(function(){return!0},u3,h3,[-Mt,-Lt]);function u3(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var l=o>0?Mt:-Mt,f=Ct(o-e);Ct(f-Mt)<yt?(t.point(e,n=(n+a)/2>0?Lt:-Lt),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),r=0):i!==l&&f>=Mt&&(Ct(e-i)<yt&&(e-=i*yt),Ct(o-l)<yt&&(o-=l*yt),n=c3(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),r=0),t.point(e=o,n=a),i=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function c3(t,e,n,i){var r,o,a=_t(t-n);return Ct(a)>yt?sr((_t(e)*(o=xt(i))*_t(n)-_t(i)*(r=xt(e))*_t(t))/(r*o*a)):(e+i)/2}function h3(t,e,n,i){var r;if(t==null)r=n*Lt,i.point(-Mt,r),i.point(0,r),i.point(Mt,r),i.point(Mt,0),i.point(Mt,-r),i.point(0,-r),i.point(-Mt,-r),i.point(-Mt,0),i.point(-Mt,r);else if(Ct(t[0]-e[0])>yt){var o=t[0]<e[0]?Mt:-Mt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function d3(t){var e=xt(t),n=6*Ft,i=e>0,r=Ct(e)>yt;function o(u,c,h,p){a3(p,t,n,h,u,c)}function a(u,c){return xt(u)*xt(c)>e}function l(u){var c,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(g,_){var b=[g,_],v,w=a(g,_),k=i?w?0:s(g,_):w?s(g+(g<0?Mt:-Mt),_):0;if(!c&&(d=p=w)&&u.lineStart(),w!==p&&(v=f(c,b),(!v||ia(c,v)||ia(b,v))&&(b[2]=1)),w!==p)m=0,w?(u.lineStart(),v=f(b,c),u.point(v[0],v[1])):(v=f(c,b),u.point(v[0],v[1],2),u.lineEnd()),c=v;else if(r&&c&&i^w){var x;!(k&h)&&(x=f(b,c,!0))&&(m=0,i?(u.lineStart(),u.point(x[0][0],x[0][1]),u.point(x[1][0],x[1][1]),u.lineEnd()):(u.point(x[1][0],x[1][1]),u.lineEnd(),u.lineStart(),u.point(x[0][0],x[0][1],3)))}w&&(!c||!ia(c,b))&&u.point(b[0],b[1]),c=b,p=w,h=k},lineEnd:function(){p&&u.lineEnd(),c=null},clean:function(){return m|(d&&p)<<1}}}function f(u,c,h){var p=Zi(u),d=Zi(c),m=[1,0,0],g=xa(p,d),_=Ro(g,g),b=g[0],v=_-b*b;if(!v)return!h&&u;var w=e*_/v,k=-e*b/v,x=xa(m,g),S=Po(m,w),T=Po(g,k);tf(S,T);var A=x,F=Ro(S,A),C=Ro(A,A),L=F*F-C*(Ro(S,S)-1);if(!(L<0)){var R=we(L),W=Po(A,(-F-R)/C);if(tf(W,S),W=Kf(W),!h)return W;var $=u[0],B=c[0],z=u[1],Q=c[1],j;B<$&&(j=$,$=B,B=j);var G=B-$,O=Ct(G-Mt)<yt,Y=O||G<yt;if(!O&&Q<z&&(j=z,z=Q,Q=j),Y?O?z+Q>0^W[1]<(Ct(W[0]-$)<yt?z:Q):z<=W[1]&&W[1]<=Q:G>Mt^($<=W[0]&&W[0]<=B)){var J=Po(A,(-F+R)/C);return tf(J,S),[W,Kf(J)]}}}function s(u,c){var h=i?t:Mt-t,p=0;return u<-h?p|=1:u>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return f1(a,l,o,i?[0,-t]:[-Mt,t-Mt])}function p3(t,e,n,i,r,o){var a=t[0],l=t[1],f=e[0],s=e[1],u=0,c=1,h=f-a,p=s-l,d;if(d=n-a,!(!h&&d>0)){if(d/=h,h<0){if(d<u)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>u&&(u=d)}if(d=r-a,!(!h&&d<0)){if(d/=h,h<0){if(d>c)return;d>u&&(u=d)}else if(h>0){if(d<u)return;d<c&&(c=d)}if(d=i-l,!(!p&&d>0)){if(d/=p,p<0){if(d<u)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>u&&(u=d)}if(d=o-l,!(!p&&d<0)){if(d/=p,p<0){if(d>c)return;d>u&&(u=d)}else if(p>0){if(d<u)return;d<c&&(c=d)}return u>0&&(t[0]=a+u*h,t[1]=l+u*p),c<1&&(e[0]=a+c*h,e[1]=l+c*p),!0}}}}}var Sr=1e9,Uo=-Sr;function s1(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,c,h){var p=0,d=0;if(s==null||(p=a(s,c))!==(d=a(u,c))||f(s,u)<0^c>0)do h.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+c+4)%4)!==d);else h.point(u[0],u[1])}function a(s,u){return Ct(s[0]-t)<yt?u>0?0:3:Ct(s[0]-n)<yt?u>0?2:1:Ct(s[1]-e)<yt?u>0?1:0:u>0?3:2}function l(s,u){return f(s.x,u.x)}function f(s,u){var c=a(s,1),h=a(u,1);return c!==h?c-h:c===0?u[1]-s[1]:c===1?s[0]-u[0]:c===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,c=a1(),h,p,d,m,g,_,b,v,w,k,x,S={point:T,lineStart:L,lineEnd:R,polygonStart:F,polygonEnd:C};function T($,B){r($,B)&&u.point($,B)}function A(){for(var $=0,B=0,z=p.length;B<z;++B)for(var Q=p[B],j=1,G=Q.length,O=Q[0],Y,J,lt=O[0],et=O[1];j<G;++j)Y=lt,J=et,O=Q[j],lt=O[0],et=O[1],J<=i?et>i&&(lt-Y)*(i-J)>(et-J)*(t-Y)&&++$:et<=i&&(lt-Y)*(i-J)<(et-J)*(t-Y)&&--$;return $}function F(){u=c,h=[],p=[],x=!0}function C(){var $=A(),B=x&&$,z=(h=m0(h)).length;(B||z)&&(s.polygonStart(),B&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),z&&l1(h,l,$,o,s),s.polygonEnd()),u=s,h=p=d=null}function L(){S.point=W,p&&p.push(d=[]),k=!0,w=!1,b=v=NaN}function R(){h&&(W(m,g),_&&w&&c.rejoin(),h.push(c.result())),S.point=T,w&&u.lineEnd()}function W($,B){var z=r($,B);if(p&&d.push([$,B]),k)m=$,g=B,_=z,k=!1,z&&(u.lineStart(),u.point($,B));else if(z&&w)u.point($,B);else{var Q=[b=Math.max(Uo,Math.min(Sr,b)),v=Math.max(Uo,Math.min(Sr,v))],j=[$=Math.max(Uo,Math.min(Sr,$)),B=Math.max(Uo,Math.min(Sr,B))];p3(Q,j,t,e,n,i)?(w||(u.lineStart(),u.point(Q[0],Q[1])),u.point(j[0],j[1]),z||u.lineEnd(),x=!1):z&&(u.lineStart(),u.point($,B),x=!1)}b=$,v=B,w=z}return S}}const es=t=>t;var nf=new hi,ns=new hi,u1,c1,is,rs,Ln={point:Ne,lineStart:Ne,lineEnd:Ne,polygonStart:function(){Ln.lineStart=m3,Ln.lineEnd=b3},polygonEnd:function(){Ln.lineStart=Ln.lineEnd=Ln.point=Ne,nf.add(Ct(ns)),ns=new hi},result:function(){var t=nf/2;return nf=new hi,t}};function m3(){Ln.point=g3}function g3(t,e){Ln.point=h1,u1=is=t,c1=rs=e}function h1(t,e){ns.add(rs*t-is*e),is=t,rs=e}function b3(){h1(u1,c1)}const Cc=Ln;var Ki=1/0,ka=Ki,Hr=-Ki,Ma=Hr,_3={point:y3,lineStart:Ne,lineEnd:Ne,polygonStart:Ne,polygonEnd:Ne,result:function(){var t=[[Ki,ka],[Hr,Ma]];return Hr=Ma=-(ka=Ki=1/0),t}};function y3(t,e){t<Ki&&(Ki=t),t>Hr&&(Hr=t),e<ka&&(ka=e),e>Ma&&(Ma=e)}const Sa=_3;var os=0,as=0,Tr=0,Ta=0,Ca=0,Li=0,ls=0,fs=0,Cr=0,d1,p1,Qe,Je,ze={point:_i,lineStart:$c,lineEnd:Ac,polygonStart:function(){ze.lineStart=x3,ze.lineEnd=k3},polygonEnd:function(){ze.point=_i,ze.lineStart=$c,ze.lineEnd=Ac},result:function(){var t=Cr?[ls/Cr,fs/Cr]:Li?[Ta/Li,Ca/Li]:Tr?[os/Tr,as/Tr]:[NaN,NaN];return os=as=Tr=Ta=Ca=Li=ls=fs=Cr=0,t}};function _i(t,e){os+=t,as+=e,++Tr}function $c(){ze.point=w3}function w3(t,e){ze.point=v3,_i(Qe=t,Je=e)}function v3(t,e){var n=t-Qe,i=e-Je,r=we(n*n+i*i);Ta+=r*(Qe+t)/2,Ca+=r*(Je+e)/2,Li+=r,_i(Qe=t,Je=e)}function Ac(){ze.point=_i}function x3(){ze.point=M3}function k3(){m1(d1,p1)}function M3(t,e){ze.point=m1,_i(d1=Qe=t,p1=Je=e)}function m1(t,e){var n=t-Qe,i=e-Je,r=we(n*n+i*i);Ta+=r*(Qe+t)/2,Ca+=r*(Je+e)/2,Li+=r,r=Je*t-Qe*e,ls+=r*(Qe+t),fs+=r*(Je+e),Cr+=r*3,_i(Qe=t,Je=e)}const Ec=ze;function g1(t){this._context=t}g1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ke);break}}},result:Ne};var ss=new hi,rf,b1,_1,$r,Ar,$a={point:Ne,lineStart:function(){$a.point=S3},lineEnd:function(){rf&&y1(b1,_1),$a.point=Ne},polygonStart:function(){rf=!0},polygonEnd:function(){rf=null},result:function(){var t=+ss;return ss=new hi,t}};function S3(t,e){$a.point=y1,b1=$r=t,_1=Ar=e}function y1(t,e){$r-=t,Ar-=e,ss.add(we($r*$r+Ar*Ar)),$r=t,Ar=e}const Nc=$a;let Dc,Aa,Fc,Lc;class Ic{constructor(e){this._append=e==null?w1:T3(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Fc||this._append!==Aa){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Fc=i,Aa=this._append,Lc=this._,this._=r}this._+=Lc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function w1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function T3(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return w1;if(e!==Dc){const n=10**e;Dc=e,Aa=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return Aa}function rl(t,e){let n=3,i=4.5,r,o;function a(l){return l&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),ri(l,r(o))),o.result()}return a.area=function(l){return ri(l,r(Cc)),Cc.result()},a.measure=function(l){return ri(l,r(Nc)),Nc.result()},a.bounds=function(l){return ri(l,r(Sa)),Sa.result()},a.centroid=function(l){return ri(l,r(Ec)),Ec.result()},a.projection=function(l){return arguments.length?(r=l==null?(t=null,es):(t=l).stream,a):t},a.context=function(l){return arguments.length?(o=l==null?(e=null,new Ic(n)):new g1(e=l),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(o.pointRadius(+l),+l),a):i},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const f=Math.floor(l);if(!(f>=0))throw new RangeError(`invalid digits: ${l}`);n=f}return e===null&&(o=new Ic(n)),a},a.projection(t).digits(n).context(e)}function us(t){return{stream:ol(t)}}function ol(t){return function(e){var n=new cs;for(var i in t)n[i]=t[i];return n.stream=e,n}}function cs(){}cs.prototype={constructor:cs,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Gs(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),ri(n,t.stream(Sa)),e(Sa.result()),i!=null&&t.clipExtent(i),t}function Xs(t,e,n){return Gs(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([l,f])},n)}function v1(t,e,n){return Xs(t,[[0,0],e],n)}function x1(t,e,n){return Gs(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];t.scale(150*o).translate([a,l])},n)}function k1(t,e,n){return Gs(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],l=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}var Rc=16,C3=xt(30*Ft);function Pc(t,e){return+e?A3(t,e):$3(t)}function $3(t){return ol({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function A3(t,e){function n(i,r,o,a,l,f,s,u,c,h,p,d,m,g){var _=s-i,b=u-r,v=_*_+b*b;if(v>4*e&&m--){var w=a+h,k=l+p,x=f+d,S=we(w*w+k*k+x*x),T=Le(x/=S),A=Ct(Ct(x)-1)<yt||Ct(o-c)<yt?(o+c)/2:Mn(k,w),F=t(A,T),C=F[0],L=F[1],R=C-i,W=L-r,$=b*R-_*W;($*$/v>e||Ct((_*R+b*W)/v-.5)>.3||a*h+l*p+f*d<C3)&&(n(i,r,o,a,l,f,C,L,A,w/=S,k/=S,x,m,g),g.point(C,L),n(C,L,A,w,k,x,s,u,c,h,p,d,m,g))}}return function(i){var r,o,a,l,f,s,u,c,h,p,d,m,g={point:_,lineStart:b,lineEnd:w,polygonStart:function(){i.polygonStart(),g.lineStart=k},polygonEnd:function(){i.polygonEnd(),g.lineStart=b}};function _(T,A){T=t(T,A),i.point(T[0],T[1])}function b(){c=NaN,g.point=v,i.lineStart()}function v(T,A){var F=Zi([T,A]),C=t(T,A);n(c,h,u,p,d,m,c=C[0],h=C[1],u=T,p=F[0],d=F[1],m=F[2],Rc,i),i.point(c,h)}function w(){g.point=_,i.lineEnd()}function k(){b(),g.point=x,g.lineEnd=S}function x(T,A){v(r=T,A),o=c,a=h,l=p,f=d,s=m,g.point=v}function S(){n(c,h,u,p,d,m,o,a,r,l,f,s,Rc,i),g.lineEnd=w,w()}return g}}var E3=ol({point:function(t,e){this.stream.point(t*Ft,e*Ft)}});function N3(t){return ol({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function D3(t,e,n,i,r){function o(a,l){return a*=i,l*=r,[e+t*a,n-t*l]}return o.invert=function(a,l){return[(a-e)/t*i,(n-l)/t*r]},o}function Oc(t,e,n,i,r,o){if(!o)return D3(t,e,n,i,r);var a=xt(o),l=_t(o),f=a*t,s=l*t,u=a/t,c=l/t,h=(l*n-a*e)/t,p=(l*e+a*n)/t;function d(m,g){return m*=i,g*=r,[f*m-s*g+e,n-s*m-f*g]}return d.invert=function(m,g){return[i*(u*m-c*g+h),r*(p-c*m-u*g)]},d}function Kn(t){return M1(function(){return t})()}function M1(t){var e,n=150,i=480,r=250,o=0,a=0,l=0,f=0,s=0,u,c=0,h=1,p=1,d=null,m=Tc,g=null,_,b,v,w=es,k=.5,x,S,T,A,F;function C($){return T($[0]*Ft,$[1]*Ft)}function L($){return $=T.invert($[0],$[1]),$&&[$[0]*ae,$[1]*ae]}C.stream=function($){return A&&F===$?A:A=E3(N3(u)(m(x(w(F=$)))))},C.preclip=function($){return arguments.length?(m=$,d=void 0,W()):m},C.postclip=function($){return arguments.length?(w=$,g=_=b=v=null,W()):w},C.clipAngle=function($){return arguments.length?(m=+$?d3(d=$*Ft):(d=null,Tc),W()):d*ae},C.clipExtent=function($){return arguments.length?(w=$==null?(g=_=b=v=null,es):s1(g=+$[0][0],_=+$[0][1],b=+$[1][0],v=+$[1][1]),W()):g==null?null:[[g,_],[b,v]]},C.scale=function($){return arguments.length?(n=+$,R()):n},C.translate=function($){return arguments.length?(i=+$[0],r=+$[1],R()):[i,r]},C.center=function($){return arguments.length?(o=$[0]%360*Ft,a=$[1]%360*Ft,R()):[o*ae,a*ae]},C.rotate=function($){return arguments.length?(l=$[0]%360*Ft,f=$[1]%360*Ft,s=$.length>2?$[2]%360*Ft:0,R()):[l*ae,f*ae,s*ae]},C.angle=function($){return arguments.length?(c=$%360*Ft,R()):c*ae},C.reflectX=function($){return arguments.length?(h=$?-1:1,R()):h<0},C.reflectY=function($){return arguments.length?(p=$?-1:1,R()):p<0},C.precision=function($){return arguments.length?(x=Pc(S,k=$*$),W()):we(k)},C.fitExtent=function($,B){return Xs(C,$,B)},C.fitSize=function($,B){return v1(C,$,B)},C.fitWidth=function($,B){return x1(C,$,B)},C.fitHeight=function($,B){return k1(C,$,B)};function R(){var $=Oc(n,0,0,h,p,c).apply(null,e(o,a)),B=Oc(n,i-$[0],r-$[1],h,p,c);return u=o1(l,f,s),S=Jf(e,B),T=Jf(u,S),x=Pc(S,k),W()}function W(){return A=F=null,C}return function(){return e=t.apply(this,arguments),C.invert=e.invert&&L,R()}}function js(t){var e=0,n=Mt/3,i=M1(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*Ft,n=o[1]*Ft):[e*ae,n*ae]},r}function F3(t){var e=xt(t);function n(i,r){return[i*e,_t(r)/e]}return n.invert=function(i,r){return[i/e,Le(r*e)]},n}function L3(t,e){var n=_t(t),i=(n+_t(e))/2;if(Ct(i)<yt)return F3(t);var r=1+n*(2*i-n),o=we(r)/i;function a(l,f){var s=we(r-2*i*_t(f))/i;return[s*_t(l*=i),o-s*xt(l)]}return a.invert=function(l,f){var s=o-f,u=Mn(l,Ct(s))*Ee(s);return s*i<0&&(u-=Mt*Ee(l)*Ee(s)),[u/i,Le((r-(l*l+s*s)*i*i)/(2*i))]},a}function Ea(){return js(L3).scale(155.424).center([0,33.6442])}function S1(){return Ea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function I3(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function R3(){var t,e,n=S1(),i,r=Ea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Ea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,s={point:function(h,p){f=[h,p]}};function u(h){var p=h[0],d=h[1];return f=null,i.point(p,d),f||(o.point(p,d),f)||(l.point(p,d),f)}u.invert=function(h){var p=n.scale(),d=n.translate(),m=(h[0]-d[0])/p,g=(h[1]-d[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?r:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=I3([n.stream(e=h),r.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),c()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),d=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(s),o=r.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+yt,m+.12*p+yt],[d-.214*p-yt,m+.234*p-yt]]).stream(s),l=a.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+yt,m+.166*p+yt],[d-.115*p-yt,m+.234*p-yt]]).stream(s),c()},u.fitExtent=function(h,p){return Xs(u,h,p)},u.fitSize=function(h,p){return v1(u,h,p)},u.fitWidth=function(h,p){return x1(u,h,p)},u.fitHeight=function(h,p){return k1(u,h,p)};function c(){return t=e=null,u}return u.scale(1070)}function T1(t){return function(e,n){var i=xt(e),r=xt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*_t(e),o*_t(n)]}}function ao(t){return function(e,n){var i=we(e*e+n*n),r=t(i),o=_t(r),a=xt(r);return[Mn(e*o,i*a),Le(i&&n*o/i)]}}var C1=T1(function(t){return we(2/(1+t))});C1.invert=ao(function(t){return 2*Le(t/2)});function P3(){return Kn(C1).scale(124.75).clipAngle(180-.001)}var $1=T1(function(t){return(t=r1(t))&&t/_t(t)});$1.invert=ao(function(t){return t});function O3(){return Kn($1).scale(79.4188).clipAngle(180-.001)}function al(t,e){return[t,wa(Vs((Lt+e)/2))]}al.invert=function(t,e){return[t,2*sr(i1(e))-Lt]};function U3(){return A1(al).scale(961/ke)}function A1(t){var e=Kn(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,l,f,s;e.scale=function(c){return arguments.length?(i(c),u()):i()},e.translate=function(c){return arguments.length?(r(c),u()):r()},e.center=function(c){return arguments.length?(n(c),u()):n()},e.clipExtent=function(c){return arguments.length?(c==null?a=l=f=s=null:(a=+c[0][0],l=+c[0][1],f=+c[1][0],s=+c[1][1]),u()):a==null?null:[[a,l],[f,s]]};function u(){var c=Mt*i(),h=e(o3(e.rotate()).invert([0,0]));return o(a==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===al?[[Math.max(h[0]-c,a),l],[Math.min(h[0]+c,f),s]]:[[a,Math.max(h[1]-c,l)],[f,Math.min(h[1]+c,s)]])}return u()}function zo(t){return Vs((Lt+t)/2)}function z3(t,e){var n=xt(t),i=t===e?_t(t):wa(n/xt(e))/wa(zo(e)/zo(t)),r=n*Jl(zo(t),i)/i;if(!i)return al;function o(a,l){r>0?l<-Lt+yt&&(l=-Lt+yt):l>Lt-yt&&(l=Lt-yt);var f=r/Jl(zo(l),i);return[f*_t(i*a),r-f*xt(i*a)]}return o.invert=function(a,l){var f=r-l,s=Ee(i)*we(a*a+f*f),u=Mn(a,Ct(f))*Ee(f);return f*i<0&&(u-=Mt*Ee(a)*Ee(f)),[u/i,2*sr(Jl(r/s,1/i))-Lt]},o}function B3(){return js(z3).scale(109.5).parallels([30,30])}function Na(t,e){return[t,e]}Na.invert=Na;function q3(){return Kn(Na).scale(152.63)}function W3(t,e){var n=xt(t),i=t===e?_t(t):(n-xt(e))/(e-t),r=n/i+t;if(Ct(i)<yt)return Na;function o(a,l){var f=r-l,s=i*a;return[f*_t(s),r-f*xt(s)]}return o.invert=function(a,l){var f=r-l,s=Mn(a,Ct(f))*Ee(f);return f*i<0&&(s-=Mt*Ee(a)*Ee(f)),[s/i,r-Ee(i)*we(a*a+f*f)]},o}function Y3(){return js(W3).scale(131.154).center([0,13.9389])}var Lr=1.340264,Ir=-.081106,Rr=893e-6,Pr=.003796,Da=we(3)/2,H3=12;function E1(t,e){var n=Le(Da*_t(e)),i=n*n,r=i*i*i;return[t*xt(n)/(Da*(Lr+3*Ir*i+r*(7*Rr+9*Pr*i))),n*(Lr+Ir*i+r*(Rr+Pr*i))]}E1.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,l,f;o<H3&&(l=n*(Lr+Ir*i+r*(Rr+Pr*i))-e,f=Lr+3*Ir*i+r*(7*Rr+9*Pr*i),n-=a=l/f,i=n*n,r=i*i*i,!(Ct(a)<n1));++o);return[Da*t*(Lr+3*Ir*i+r*(7*Rr+9*Pr*i))/xt(n),Le(_t(n)/Da)]};function V3(){return Kn(E1).scale(177.158)}function N1(t,e){var n=xt(e),i=xt(t)*n;return[n*_t(t)/i,_t(e)/i]}N1.invert=ao(sr);function G3(){return Kn(N1).scale(144.049).clipAngle(60)}function D1(t,e){return[xt(e)*_t(t),_t(e)]}D1.invert=ao(Le);function X3(){return Kn(D1).scale(249.5).clipAngle(90+yt)}function F1(t,e){var n=xt(e),i=1+xt(t)*n;return[n*_t(t)/i,_t(e)/i]}F1.invert=ao(function(t){return 2*sr(t)});function j3(){return Kn(F1).scale(250).clipAngle(142)}function L1(t,e){return[wa(Vs((Lt+e)/2)),-t]}L1.invert=function(t,e){return[-e,2*sr(i1(t))-Lt]};function Z3(){var t=A1(L1),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function sn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ll(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const hs=Symbol("implicit");function Zs(){var t=new di,e=[],n=[],i=hs;function r(o){let a=t.get(o);if(a===void 0){if(i!==hs)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new di;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Zs(e,n).unknown(i)},sn.apply(r,arguments),r}function fl(){var t=Zs().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,l=!1,f=0,s=0,u=.5;delete t.unknown;function c(){var h=e().length,p=r<i,d=p?r:i,m=p?i:r;o=(m-d)/Math.max(1,h-f+s*2),l&&(o=Math.floor(o)),d+=(m-d-o*(h-f))*u,a=o*(1-f),l&&(d=Math.round(d),a=Math.round(a));var g=Pf(h).map(function(_){return d+o*_});return n(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),c()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,c()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,l=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(l=!!h,c()):l},t.padding=function(h){return arguments.length?(f=Math.min(1,s=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(s=+h,c()):s},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),c()):u},t.copy=function(){return fl(e(),[i,r]).round(l).paddingInner(f).paddingOuter(s).align(u)},sn.apply(c(),arguments)}function I1(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return I1(e())},t}function K3(){return I1(fl.apply(null,arguments).paddingInner(1))}function Q3(t){return function(){return t}}function ds(t){return+t}var Uc=[0,1];function De(t){return t}function ps(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Q3(isNaN(e)?NaN:.5)}function J3(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function t6(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=ps(r,i),o=n(a,o)):(i=ps(i,r),o=n(o,a)),function(l){return o(i(l))}}function e6(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=ps(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(l){var f=Ga(t,l,1,i)-1;return o[f](r[f](l))}}function lo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function sl(){var t=Uc,e=Uc,n=oo,i,r,o,a=De,l,f,s;function u(){var h=Math.min(t.length,e.length);return a!==De&&(a=J3(t[0],t[h-1])),l=h>2?e6:t6,f=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=l(t.map(i),e,n)))(i(a(h)))}return c.invert=function(h){return a(r((s||(s=l(e,t.map(i),ie)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,ds),u()):t.slice()},c.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},c.rangeRound=function(h){return e=Array.from(h),n=zs,u()},c.clamp=function(h){return arguments.length?(a=h?!0:De,u()):a!==De},c.interpolate=function(h){return arguments.length?(n=h,u()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,p){return i=h,r=p,u()}}function R1(){return sl()(De,De)}function n6(t,e,n,i){var r=If(t,e,n),o;switch(i=Yr(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=i3(r,a))&&(i.precision=o),e1(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=r3(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=n3(r))&&(i.precision=o-(i.type==="%")*2);break}}return fr(i)}function fo(t){var e=t.domain;return t.ticks=function(n){var i=e();return zr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return n6(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],l=i[o],f,s,u=10;for(l<a&&(s=a,a=l,l=s,s=r,r=o,o=s);u-- >0;){if(s=ca(a,l,n),s===f)return i[r]=a,i[o]=l,e(i);if(s>0)a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s;else if(s<0)a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s;else break;f=s}return t},t}function Ks(){var t=R1();return t.copy=function(){return lo(t,Ks())},sn.apply(t,arguments),fo(t)}function P1(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,ds),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return P1(t).unknown(e)},t=arguments.length?Array.from(t,ds):[0,1],fo(n)}function O1(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function zc(t){return Math.log(t)}function Bc(t){return Math.exp(t)}function i6(t){return-Math.log(-t)}function r6(t){return-Math.exp(-t)}function o6(t){return isFinite(t)?+("1e"+t):t<0?0:t}function a6(t){return t===10?o6:t===Math.E?Math.exp:e=>Math.pow(t,e)}function l6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function qc(t){return(e,n)=>-t(-e,n)}function U1(t){const e=t(zc,Bc),n=e.domain;let i=10,r,o;function a(){return r=l6(i),o=a6(i),n()[0]<0?(r=qc(r),o=qc(o),t(i6,r6)):t(zc,Bc),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const f=n();let s=f[0],u=f[f.length-1];const c=u<s;c&&([s,u]=[u,s]);let h=r(s),p=r(u),d,m;const g=l==null?10:+l;let _=[];if(!(i%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(d=1;d<i;++d)if(m=h<0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}}else for(;h<=p;++h)for(d=i-1;d>=1;--d)if(m=h>0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}_.length*2<g&&(_=zr(s,u,g))}else _=zr(h,p,Math.min(p-h,g)).map(o);return c?_.reverse():_},e.tickFormat=(l,f)=>{if(l==null&&(l=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Yr(f)).precision==null&&(f.trim=!0),f=fr(f)),l===1/0)return f;const s=Math.max(1,i*l/e.ticks().length);return u=>{let c=u/o(Math.round(r(u)));return c*i<i-.5&&(c*=i),c<=s?f(u):""}},e.nice=()=>n(O1(n(),{floor:l=>o(Math.floor(r(l))),ceil:l=>o(Math.ceil(r(l)))})),e}function z1(){const t=U1(sl()).domain([1,10]);return t.copy=()=>lo(t,z1()).base(t.base()),sn.apply(t,arguments),t}function Wc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Yc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function B1(t){var e=1,n=t(Wc(e),Yc(e));return n.constant=function(i){return arguments.length?t(Wc(e=+i),Yc(e)):e},fo(n)}function q1(){var t=B1(sl());return t.copy=function(){return lo(t,q1()).constant(t.constant())},sn.apply(t,arguments)}function Hc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function f6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function s6(t){return t<0?-t*t:t*t}function W1(t){var e=t(De,De),n=1;function i(){return n===1?t(De,De):n===.5?t(f6,s6):t(Hc(n),Hc(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},fo(e)}function Y1(){var t=W1(sl());return t.copy=function(){return lo(t,Y1()).exponent(t.exponent())},sn.apply(t,arguments),t}function H1(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=Zb(t,a/l);return o}function o(a){return a==null||isNaN(a=+a)?i:e[Ga(n,a)]}return o.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(be),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return H1().domain(t).range(e).unknown(i)},sn.apply(o,arguments)}function V1(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[Ga(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return V1().domain(t).range(e).unknown(n)},sn.apply(r,arguments)}const of=new Date,af=new Date;function Vt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),l=r.ceil(o);return o-a<l-o?a:l},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,l)=>{const f=[];if(o=r.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return f;let s;do f.push(s=new Date(+o)),e(o,l),t(o);while(s<o&&o<a);return f},r.filter=o=>Vt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!o(a););else for(;--l>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(of.setTime(+o),af.setTime(+a),t(of),t(af),Math.floor(n(of,af))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Fa=Vt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Fa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Vt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Fa);Fa.range;const yn=1e3,Fe=yn*60,wn=Fe*60,Sn=wn*24,Qs=Sn*7,Vc=Sn*30,lf=Sn*365,Be=Vt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*yn)},(t,e)=>(e-t)/yn,t=>t.getUTCSeconds());Be.range;const so=Vt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yn)},(t,e)=>{t.setTime(+t+e*Fe)},(t,e)=>(e-t)/Fe,t=>t.getMinutes());so.range;const uo=Vt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Fe)},(t,e)=>(e-t)/Fe,t=>t.getUTCMinutes());uo.range;const co=Vt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yn-t.getMinutes()*Fe)},(t,e)=>{t.setTime(+t+e*wn)},(t,e)=>(e-t)/wn,t=>t.getHours());co.range;const ho=Vt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*wn)},(t,e)=>(e-t)/wn,t=>t.getUTCHours());ho.range;const xi=Vt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fe)/Sn,t=>t.getDate()-1);xi.range;const ul=Vt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sn,t=>t.getUTCDate()-1);ul.range;const cl=Vt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Sn,t=>Math.floor(t/Sn));cl.range;function ki(t){return Vt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Fe)/Qs)}const Qi=ki(0),Vr=ki(1),G1=ki(2),X1=ki(3),yi=ki(4),j1=ki(5),Z1=ki(6);Qi.range;Vr.range;G1.range;X1.range;yi.range;j1.range;Z1.range;function Mi(t){return Vt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Qs)}const Ji=Mi(0),Gr=Mi(1),K1=Mi(2),Q1=Mi(3),wi=Mi(4),J1=Mi(5),tp=Mi(6);Ji.range;Gr.range;K1.range;Q1.range;wi.range;J1.range;tp.range;const po=Vt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());po.range;const mo=Vt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());mo.range;const We=Vt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());We.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});We.range;const Ye=Vt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ye.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ye.range;function ep(t,e,n,i,r,o){const a=[[Be,1,yn],[Be,5,5*yn],[Be,15,15*yn],[Be,30,30*yn],[o,1,Fe],[o,5,5*Fe],[o,15,15*Fe],[o,30,30*Fe],[r,1,wn],[r,3,3*wn],[r,6,6*wn],[r,12,12*wn],[i,1,Sn],[i,2,2*Sn],[n,1,Qs],[e,1,Vc],[e,3,3*Vc],[t,1,lf]];function l(s,u,c){const h=u<s;h&&([s,u]=[u,s]);const p=c&&typeof c.range=="function"?c:f(s,u,c),d=p?p.range(s,+u+1):[];return h?d.reverse():d}function f(s,u,c){const h=Math.abs(u-s)/c,p=Va(([,,g])=>g).right(a,h);if(p===a.length)return t.every(If(s/lf,u/lf,c));if(p===0)return Fa.every(Math.max(If(s,u,c),1));const[d,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return d.every(m)}return[l,f]}const[u6,np]=ep(Ye,mo,Ji,cl,ho,uo),[c6,h6]=ep(We,po,Qi,xi,co,so);function ff(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function sf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _r(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function d6(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,l=t.months,f=t.shortMonths,s=yr(r),u=wr(r),c=yr(o),h=wr(o),p=yr(a),d=wr(a),m=yr(l),g=wr(l),_=yr(f),b=wr(f),v={a:z,A:Q,b:j,B:G,c:null,d:Qc,e:Qc,f:R6,g:V6,G:X6,H:F6,I:L6,j:I6,L:ip,m:P6,M:O6,p:O,q:Y,Q:eh,s:nh,S:U6,u:z6,U:B6,V:q6,w:W6,W:Y6,x:null,X:null,y:H6,Y:G6,Z:j6,"%":th},w={a:J,A:lt,b:et,B:Z,c:null,d:Jc,e:Jc,f:J6,g:s5,G:c5,H:Z6,I:K6,j:Q6,L:op,m:t5,M:e5,p:q,q:N,Q:eh,s:nh,S:n5,u:i5,U:r5,V:o5,w:a5,W:l5,x:null,X:null,y:f5,Y:u5,Z:h5,"%":th},k={a:F,A:C,b:L,B:R,c:W,d:Zc,e:Zc,f:A6,g:jc,G:Xc,H:Kc,I:Kc,j:S6,L:$6,m:M6,M:T6,p:A,q:k6,Q:N6,s:D6,S:C6,u:_6,U:y6,V:w6,w:b6,W:v6,x:$,X:B,y:jc,Y:Xc,Z:x6,"%":E6};v.x=x(n,v),v.X=x(i,v),v.c=x(e,v),w.x=x(n,w),w.X=x(i,w),w.c=x(e,w);function x(E,P){return function(tt){var U=[],dt=-1,nt=0,mt=E.length,ot,rt,Wt;for(tt instanceof Date||(tt=new Date(+tt));++dt<mt;)E.charCodeAt(dt)===37&&(U.push(E.slice(nt,dt)),(rt=Gc[ot=E.charAt(++dt)])!=null?ot=E.charAt(++dt):rt=ot==="e"?" ":"0",(Wt=P[ot])&&(ot=Wt(tt,rt)),U.push(ot),nt=dt+1);return U.push(E.slice(nt,dt)),U.join("")}}function S(E,P){return function(tt){var U=_r(1900,void 0,1),dt=T(U,E,tt+="",0),nt,mt;if(dt!=tt.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(P&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(nt=sf(_r(U.y,0,1)),mt=nt.getUTCDay(),nt=mt>4||mt===0?Gr.ceil(nt):Gr(nt),nt=ul.offset(nt,(U.V-1)*7),U.y=nt.getUTCFullYear(),U.m=nt.getUTCMonth(),U.d=nt.getUTCDate()+(U.w+6)%7):(nt=ff(_r(U.y,0,1)),mt=nt.getDay(),nt=mt>4||mt===0?Vr.ceil(nt):Vr(nt),nt=xi.offset(nt,(U.V-1)*7),U.y=nt.getFullYear(),U.m=nt.getMonth(),U.d=nt.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),mt="Z"in U?sf(_r(U.y,0,1)).getUTCDay():ff(_r(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(mt+5)%7:U.w+U.U*7-(mt+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,sf(U)):ff(U)}}function T(E,P,tt,U){for(var dt=0,nt=P.length,mt=tt.length,ot,rt;dt<nt;){if(U>=mt)return-1;if(ot=P.charCodeAt(dt++),ot===37){if(ot=P.charAt(dt++),rt=k[ot in Gc?P.charAt(dt++):ot],!rt||(U=rt(E,tt,U))<0)return-1}else if(ot!=tt.charCodeAt(U++))return-1}return U}function A(E,P,tt){var U=s.exec(P.slice(tt));return U?(E.p=u.get(U[0].toLowerCase()),tt+U[0].length):-1}function F(E,P,tt){var U=p.exec(P.slice(tt));return U?(E.w=d.get(U[0].toLowerCase()),tt+U[0].length):-1}function C(E,P,tt){var U=c.exec(P.slice(tt));return U?(E.w=h.get(U[0].toLowerCase()),tt+U[0].length):-1}function L(E,P,tt){var U=_.exec(P.slice(tt));return U?(E.m=b.get(U[0].toLowerCase()),tt+U[0].length):-1}function R(E,P,tt){var U=m.exec(P.slice(tt));return U?(E.m=g.get(U[0].toLowerCase()),tt+U[0].length):-1}function W(E,P,tt){return T(E,e,P,tt)}function $(E,P,tt){return T(E,n,P,tt)}function B(E,P,tt){return T(E,i,P,tt)}function z(E){return a[E.getDay()]}function Q(E){return o[E.getDay()]}function j(E){return f[E.getMonth()]}function G(E){return l[E.getMonth()]}function O(E){return r[+(E.getHours()>=12)]}function Y(E){return 1+~~(E.getMonth()/3)}function J(E){return a[E.getUTCDay()]}function lt(E){return o[E.getUTCDay()]}function et(E){return f[E.getUTCMonth()]}function Z(E){return l[E.getUTCMonth()]}function q(E){return r[+(E.getUTCHours()>=12)]}function N(E){return 1+~~(E.getUTCMonth()/3)}return{format:function(E){var P=x(E+="",v);return P.toString=function(){return E},P},parse:function(E){var P=S(E+="",!1);return P.toString=function(){return E},P},utcFormat:function(E){var P=x(E+="",w);return P.toString=function(){return E},P},utcParse:function(E){var P=S(E+="",!0);return P.toString=function(){return E},P}}}var Gc={"-":"",_:" ",0:"0"},ee=/^\s*\d+/,p6=/^%/,m6=/[\\^$*+?|[\]().{}]/g;function Tt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function g6(t){return t.replace(m6,"\\$&")}function yr(t){return new RegExp("^(?:"+t.map(g6).join("|")+")","i")}function wr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function b6(t,e,n){var i=ee.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function _6(t,e,n){var i=ee.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function y6(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function w6(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function v6(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Xc(t,e,n){var i=ee.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function jc(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function x6(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function k6(t,e,n){var i=ee.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function M6(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Zc(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function S6(t,e,n){var i=ee.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Kc(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function T6(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function C6(t,e,n){var i=ee.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function $6(t,e,n){var i=ee.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function A6(t,e,n){var i=ee.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function E6(t,e,n){var i=p6.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function N6(t,e,n){var i=ee.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function D6(t,e,n){var i=ee.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Qc(t,e){return Tt(t.getDate(),e,2)}function F6(t,e){return Tt(t.getHours(),e,2)}function L6(t,e){return Tt(t.getHours()%12||12,e,2)}function I6(t,e){return Tt(1+xi.count(We(t),t),e,3)}function ip(t,e){return Tt(t.getMilliseconds(),e,3)}function R6(t,e){return ip(t,e)+"000"}function P6(t,e){return Tt(t.getMonth()+1,e,2)}function O6(t,e){return Tt(t.getMinutes(),e,2)}function U6(t,e){return Tt(t.getSeconds(),e,2)}function z6(t){var e=t.getDay();return e===0?7:e}function B6(t,e){return Tt(Qi.count(We(t)-1,t),e,2)}function rp(t){var e=t.getDay();return e>=4||e===0?yi(t):yi.ceil(t)}function q6(t,e){return t=rp(t),Tt(yi.count(We(t),t)+(We(t).getDay()===4),e,2)}function W6(t){return t.getDay()}function Y6(t,e){return Tt(Vr.count(We(t)-1,t),e,2)}function H6(t,e){return Tt(t.getFullYear()%100,e,2)}function V6(t,e){return t=rp(t),Tt(t.getFullYear()%100,e,2)}function G6(t,e){return Tt(t.getFullYear()%1e4,e,4)}function X6(t,e){var n=t.getDay();return t=n>=4||n===0?yi(t):yi.ceil(t),Tt(t.getFullYear()%1e4,e,4)}function j6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Tt(e/60|0,"0",2)+Tt(e%60,"0",2)}function Jc(t,e){return Tt(t.getUTCDate(),e,2)}function Z6(t,e){return Tt(t.getUTCHours(),e,2)}function K6(t,e){return Tt(t.getUTCHours()%12||12,e,2)}function Q6(t,e){return Tt(1+ul.count(Ye(t),t),e,3)}function op(t,e){return Tt(t.getUTCMilliseconds(),e,3)}function J6(t,e){return op(t,e)+"000"}function t5(t,e){return Tt(t.getUTCMonth()+1,e,2)}function e5(t,e){return Tt(t.getUTCMinutes(),e,2)}function n5(t,e){return Tt(t.getUTCSeconds(),e,2)}function i5(t){var e=t.getUTCDay();return e===0?7:e}function r5(t,e){return Tt(Ji.count(Ye(t)-1,t),e,2)}function ap(t){var e=t.getUTCDay();return e>=4||e===0?wi(t):wi.ceil(t)}function o5(t,e){return t=ap(t),Tt(wi.count(Ye(t),t)+(Ye(t).getUTCDay()===4),e,2)}function a5(t){return t.getUTCDay()}function l5(t,e){return Tt(Gr.count(Ye(t)-1,t),e,2)}function f5(t,e){return Tt(t.getUTCFullYear()%100,e,2)}function s5(t,e){return t=ap(t),Tt(t.getUTCFullYear()%100,e,2)}function u5(t,e){return Tt(t.getUTCFullYear()%1e4,e,4)}function c5(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wi(t):wi.ceil(t),Tt(t.getUTCFullYear()%1e4,e,4)}function h5(){return"+0000"}function th(){return"%"}function eh(t){return+t}function nh(t){return Math.floor(+t/1e3)}var Ei,Js,go;d5({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function d5(t){return Ei=d6(t),Js=Ei.format,Ei.parse,go=Ei.utcFormat,Ei.utcParse,Ei}function p5(t){return new Date(t)}function m5(t){return t instanceof Date?+t:+new Date(+t)}function tu(t,e,n,i,r,o,a,l,f,s){var u=R1(),c=u.invert,h=u.domain,p=s(".%L"),d=s(":%S"),m=s("%I:%M"),g=s("%I %p"),_=s("%a %d"),b=s("%b %d"),v=s("%B"),w=s("%Y");function k(x){return(f(x)<x?p:l(x)<x?d:a(x)<x?m:o(x)<x?g:i(x)<x?r(x)<x?_:b:n(x)<x?v:w)(x)}return u.invert=function(x){return new Date(c(x))},u.domain=function(x){return arguments.length?h(Array.from(x,m5)):h().map(p5)},u.ticks=function(x){var S=h();return t(S[0],S[S.length-1],x??10)},u.tickFormat=function(x,S){return S==null?k:s(S)},u.nice=function(x){var S=h();return(!x||typeof x.range!="function")&&(x=e(S[0],S[S.length-1],x??10)),x?h(O1(S,x)):u},u.copy=function(){return lo(u,tu(t,e,n,i,r,o,a,l,f,s))},u}function g5(){return sn.apply(tu(c6,h6,We,po,Qi,xi,co,so,Be,Js).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function b5(){return sn.apply(tu(u6,np,Ye,mo,Ji,ul,ho,uo,Be,go).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function dl(){var t=0,e=.5,n=1,i=1,r,o,a,l,f,s=De,u,c=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(i*m<i*o?l:f),s(c?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(c=!!m,p):c},p.interpolator=function(m){return arguments.length?(s=m,p):s};function d(m){return function(g){var _,b,v;return arguments.length?([_,b,v]=g,s=el(m,[_,b,v]),p):[s(0),s(.5),s(1)]}}return p.range=d(oo),p.rangeRound=d(zs),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return u=m,r=m(t),o=m(e),a=m(n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p}}function lp(){var t=fo(dl()(De));return t.copy=function(){return hl(t,lp())},ll.apply(t,arguments)}function fp(){var t=U1(dl()).domain([.1,1,10]);return t.copy=function(){return hl(t,fp()).base(t.base())},ll.apply(t,arguments)}function sp(){var t=B1(dl());return t.copy=function(){return hl(t,sp()).constant(t.constant())},ll.apply(t,arguments)}function up(){var t=W1(dl());return t.copy=function(){return hl(t,up()).exponent(t.exponent())},ll.apply(t,arguments)}function wt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const _5=wt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),y5=wt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),w5=wt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),v5=wt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),x5=wt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),k5=wt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),M5=wt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),S5=wt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),T5=wt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),C5=wt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),$t=t=>cw(t[t.length-1]);var cp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(wt);const hp=$t(cp);var dp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(wt);const pp=$t(dp);var mp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(wt);const gp=$t(mp);var bp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(wt);const _p=$t(bp);var ms=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(wt);const La=$t(ms);var yp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(wt);const wp=$t(yp);var gs=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(wt);const Ia=$t(gs);var vp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(wt);const xp=$t(vp);var kp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(wt);const Mp=$t(kp);var Sp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(wt);const Tp=$t(Sp);var Cp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(wt);const $p=$t(Cp);var Ap=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(wt);const Ep=$t(Ap);var Np=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(wt);const Dp=$t(Np);var Fp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(wt);const Lp=$t(Fp);var Ip=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(wt);const Rp=$t(Ip);var Pp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(wt);const Op=$t(Pp);var Up=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(wt);const zp=$t(Up);var Bp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(wt);const qp=$t(Bp);var Wp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(wt);const Yp=$t(Wp);var Hp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(wt);const Vp=$t(Hp);var Gp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(wt);const Xp=$t(Gp);var jp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(wt);const Zp=$t(jp);var Kp=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(wt);const Qp=$t(Kp);var Jp=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(wt);const tm=$t(Jp);var em=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(wt);const nm=$t(em);var im=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(wt);const rm=$t(im);var om=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(wt);const am=$t(om);function lm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const fm=Bs(an(300,.5,0),an(-240,.5,1));var sm=Bs(an(-100,.75,.35),an(80,1.5,.8)),um=Bs(an(260,.75,.35),an(80,1.5,.8)),Bo=an();function cm(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Bo.h=360*t-100,Bo.s=1.5-1.5*e,Bo.l=.8-.9*e,Bo+""}var qo=Vn(),$5=Math.PI/3,A5=Math.PI*2/3;function hm(t){var e;return t=(.5-t)*Math.PI,qo.r=255*(e=Math.sin(t))*e,qo.g=255*(e=Math.sin(t+$5))*e,qo.b=255*(e=Math.sin(t+A5))*e,qo+""}function dm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function pl(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const pm=pl(wt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var mm=pl(wt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),gm=pl(wt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),bm=pl(wt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function jt(t){return function(){return t}}const _m=Math.cos,eu=Math.min,Ra=Math.sin,Gt=Math.sqrt,ih=1e-12,Pa=Math.PI,ml=2*Pa;function ym(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Q0(e)}function wm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function vm(t){this._context=t}vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function bo(t){return new vm(t)}function xm(t){return t[0]}function km(t){return t[1]}function Mm(t,e){var n=jt(!0),i=null,r=bo,o=null,a=ym(l);t=typeof t=="function"?t:t===void 0?xm:jt(t),e=typeof e=="function"?e:e===void 0?km:jt(e);function l(f){var s,u=(f=wm(f)).length,c,h=!1,p;for(i==null&&(o=r(p=a())),s=0;s<=u;++s)!(s<u&&n(c=f[s],s,f))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,f),+e(c,s,f));if(p)return o=null,p+""||null}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:jt(+f),l):t},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:jt(+f),l):e},l.defined=function(f){return arguments.length?(n=typeof f=="function"?f:jt(!!f),l):n},l.curve=function(f){return arguments.length?(r=f,i!=null&&(o=r(i)),l):r},l.context=function(f){return arguments.length?(f==null?i=o=null:o=r(i=f),l):i},l}function E5(t,e,n){var i=null,r=jt(!0),o=null,a=bo,l=null,f=ym(s);t=typeof t=="function"?t:t===void 0?xm:jt(+t),e=typeof e=="function"?e:jt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?km:jt(+n);function s(c){var h,p,d,m=(c=wm(c)).length,g,_=!1,b,v=new Array(m),w=new Array(m);for(o==null&&(l=a(b=f())),h=0;h<=m;++h){if(!(h<m&&r(g=c[h],h,c))===_)if(_=!_)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=h-1;d>=p;--d)l.point(v[d],w[d]);l.lineEnd(),l.areaEnd()}_&&(v[h]=+t(g,h,c),w[h]=+e(g,h,c),l.point(i?+i(g,h,c):v[h],n?+n(g,h,c):w[h]))}if(b)return l=null,b+""||null}function u(){return Mm().defined(r).curve(a).context(o)}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),i=null,s):t},s.x0=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),s):t},s.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:jt(+c),s):i},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),n=null,s):e},s.y0=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),s):e},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:jt(+c),s):n},s.lineX0=s.lineY0=function(){return u().x(t).y(e)},s.lineY1=function(){return u().x(t).y(n)},s.lineX1=function(){return u().x(i).y(e)},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:jt(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,o!=null&&(l=a(o)),s):a},s.context=function(c){return arguments.length?(c==null?o=l=null:l=a(o=c),s):o},s}class Sm{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function N5(t){return new Sm(t,!0)}function D5(t){return new Sm(t,!1)}const F5=Gt(3),Tm={draw(t,e){const n=Gt(e+eu(e/28,.75))*.59436,i=n/2,r=i*F5;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Xr={draw(t,e){const n=Gt(e/Pa);t.moveTo(n,0),t.arc(0,0,n,0,ml)}},Cm={draw(t,e){const n=Gt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},$m=Gt(1/3),L5=$m*2,Am={draw(t,e){const n=Gt(e/L5),i=n*$m;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Em={draw(t,e){const n=Gt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},Nm={draw(t,e){const n=Gt(e-eu(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Dm={draw(t,e){const n=Gt(e),i=-n/2;t.rect(i,i,n,n)}},Fm={draw(t,e){const n=Gt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},I5=.8908130915292852,Lm=Ra(Pa/10)/Ra(7*Pa/10),R5=Ra(ml/10)*Lm,P5=-_m(ml/10)*Lm,Im={draw(t,e){const n=Gt(e*I5),i=R5*n,r=P5*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=ml*o/5,l=_m(a),f=Ra(a);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*r,f*i+l*r)}t.closePath()}},uf=Gt(3),Rm={draw(t,e){const n=-Gt(e/(uf*3));t.moveTo(0,n*2),t.lineTo(-uf*n,-n),t.lineTo(uf*n,-n),t.closePath()}},O5=Gt(3),Pm={draw(t,e){const n=Gt(e)*.6824,i=n/2,r=n*O5/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},Ce=-.5,$e=Gt(3)/2,bs=1/Gt(12),U5=(bs/2+1)*3,Om={draw(t,e){const n=Gt(e/U5),i=n/2,r=n*bs,o=i,a=n*bs+n,l=-o,f=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(l,f),t.lineTo(Ce*i-$e*r,$e*i+Ce*r),t.lineTo(Ce*o-$e*a,$e*o+Ce*a),t.lineTo(Ce*l-$e*f,$e*l+Ce*f),t.lineTo(Ce*i+$e*r,Ce*r-$e*i),t.lineTo(Ce*o+$e*a,Ce*a-$e*o),t.lineTo(Ce*l+$e*f,Ce*f-$e*l),t.closePath()}},Um={draw(t,e){const n=Gt(e-eu(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},z5=[Xr,Cm,Am,Dm,Im,Rm,Om],B5=[Xr,Nm,Um,Pm,Tm,Fm,Em];function Gn(){}function Oa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gl(t){this._context=t}gl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function q5(t){return new gl(t)}function zm(t){this._context=t}zm.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Oa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function W5(t){return new zm(t)}function Bm(t){this._context=t}Bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Oa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Y5(t){return new Bm(t)}function qm(t,e){this._basis=new gl(t),this._beta=e}qm.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,l=-1,f;++l<=n;)f=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+f*o),this._beta*e[l]+(1-this._beta)*(r+f*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const H5=function t(e){function n(i){return e===1?new gl(i):new qm(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Ua(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function nu(t,e){this._context=t,this._k=(1-e)/6}nu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ua(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ua(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const V5=function t(e){function n(i){return new nu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function iu(t,e){this._context=t,this._k=(1-e)/6}iu.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ua(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const G5=function t(e){function n(i){return new iu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function ru(t,e){this._context=t,this._k=(1-e)/6}ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ua(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const X5=function t(e){function n(i){return new ru(i,e)}return n.tension=function(i){return t(+i)},n}(0);function ou(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>ih){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,r=(r*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>ih){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function Wm(t,e){this._context=t,this._alpha=e}Wm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ou(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const j5=function t(e){function n(i){return e?new Wm(i,e):new nu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Ym(t,e){this._context=t,this._alpha=e}Ym.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ou(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Z5=function t(e){function n(i){return e?new Ym(i,e):new iu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Hm(t,e){this._context=t,this._alpha=e}Hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ou(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const K5=function t(e){function n(i){return e?new Hm(i,e):new ru(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Vm(t){this._context=t}Vm.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Q5(t){return new Vm(t)}function rh(t){return t<0?-1:1}function oh(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(o*r+a*i)/(i+r);return(rh(o)+rh(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function ah(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cf(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,r+l*e,o-l,a-l*n,o,a)}function za(t){this._context=t}za.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cf(this,this._t0,ah(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cf(this,ah(this,n=oh(this,t,e)),n);break;default:cf(this,this._t0,n=oh(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Gm(t){this._context=new Xm(t)}(Gm.prototype=Object.create(za.prototype)).point=function(t,e){za.prototype.point.call(this,e,t)};function Xm(t){this._context=t}Xm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function J5(t){return new za(t)}function t4(t){return new Gm(t)}function jm(t){this._context=t}jm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=lh(t),r=lh(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function lh(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function e4(t){return new jm(t)}function bl(t,e){this._context=t,this._t=e}bl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function n4(t){return new bl(t,.5)}function i4(t){return new bl(t,0)}function r4(t){return new bl(t,1)}function Er(t,e,n){this.k=t,this.x=e,this.y=n}Er.prototype={constructor:Er,scale:function(t){return t===1?this:new Er(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Er(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Er.prototype;function Xn(t){return t!=null&&!Number.isNaN(t)}function He(t,e){return+Xn(e)-+Xn(t)||be(t,e)}function Ba(t,e){return+Xn(e)-+Xn(t)||eo(t,e)}function au(t){return t!=null&&`${t}`!=""}function Zm(t){return isFinite(t)?t:NaN}function _l(t){return t>0&&isFinite(t)?t:NaN}function lu(t){return t<0&&isFinite(t)?t:NaN}function o4(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${a4(t.getUTCFullYear())}-${bn(t.getUTCMonth()+1,2)}-${bn(t.getUTCDate(),2)}${n||i||r||o?`T${bn(n,2)}:${bn(i,2)}${r||o?`:${bn(r,2)}${o?`.${bn(o,3)}`:""}`:""}Z`:""}`}function a4(t){return t<0?`-${bn(-t,6)}`:t>9999?`+${bn(t,6)}`:bn(t,4)}function bn(t,e){return`${t}`.padStart(e,"0")}const l4=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Km(t,e){return l4.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Ii=1e3,Rn=Ii*60,Pn=Rn*60,ln=Pn*24,Ke=ln*7,ui=ln*30,Fn=ln*365,hf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ii],["5 seconds",5*Ii],["15 seconds",15*Ii],["30 seconds",30*Ii],["minute",Rn],["5 minutes",5*Rn],["15 minutes",15*Rn],["30 minutes",30*Rn],["hour",Pn],["3 hours",3*Pn],["6 hours",6*Pn],["12 hours",12*Pn],["day",ln],["2 days",2*ln],["week",Ke],["2 weeks",2*Ke],["month",ui],["3 months",3*ui],["6 months",6*ui],["year",Fn],["2 years",2*Fn],["5 years",5*Fn],["10 years",10*Fn],["20 years",20*Fn],["50 years",50*Fn],["100 years",100*Fn]],fu=new Map([["second",Ii],["minute",Rn],["hour",Pn],["day",ln],["monday",Ke],["tuesday",Ke],["wednesday",Ke],["thursday",Ke],["friday",Ke],["saturday",Ke],["sunday",Ke],["week",Ke],["month",ui],["year",Fn]]),Qm=new Map([["second",Be],["minute",so],["hour",co],["day",xi],["monday",Vr],["tuesday",G1],["wednesday",X1],["thursday",yi],["friday",j1],["saturday",Z1],["sunday",Qi],["week",Qi],["month",po],["year",We]]),su=new Map([["second",Be],["minute",uo],["hour",ho],["day",cl],["monday",Gr],["tuesday",K1],["wednesday",Q1],["thursday",wi],["friday",J1],["saturday",tp],["sunday",Ji],["week",Ji],["month",mo],["year",Ye]]),_o=Symbol("intervalDuration"),yl=Symbol("intervalType");for(const[t,e]of Qm)e[_o]=fu.get(t),e[yl]="time";for(const[t,e]of su)e[_o]=fu.get(t),e[yl]="utc";const Nr=[["year",Ye,"utc"],["month",mo,"utc"],["day",cl,"utc",6*ui],["hour",ho,"utc",3*ln],["minute",uo,"utc",6*Pn],["second",Be,"utc",30*Rn]],ra=[["year",We,"time"],["month",po,"time"],["day",xi,"time",6*ui],["hour",co,"time",3*ln],["minute",so,"time",6*Pn],["second",Be,"time",30*Rn]],f4=[Nr[0],ra[0],Nr[1],ra[1],Nr[2],ra[2],...Nr.slice(3)];function Jm(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=su.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function tg(t){return eg(Jm(t),"time")}function uu(t){return eg(Jm(t),"utc")}function eg([t,e],n){let i=(n==="time"?Qm:su).get(t);return e>1&&(i=i.every(e),i[_o]=fu.get(t)*e,i[yl]=n),i}function fh(t,e){if(!(e>1))return;const n=t[_o];if(!hf.some(([,r])=>r===n)||n%ln===0&&ln<n&&n<ui)return;const[i]=hf[Va(([,r])=>Math.log(r)).center(hf,Math.log(n*e))];return(t[yl]==="time"?tg:uu)(i)}function sh(t,e,n){const i=e==="time"?Js:go;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=s4(n);switch(t){case"millisecond":return Ni(i(".%L"),i(":%M:%S"),r);case"second":return Ni(i(":%S"),i("%-I:%M"),r);case"minute":return Ni(i("%-I:%M"),i("%p"),r);case"hour":return Ni(i("%-I %p"),i("%b %-d"),r);case"day":return Ni(i("%-d"),i("%b"),r);case"month":return Ni(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function s4(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function u4(t){return t==="time"?ra:t==="utc"?Nr:f4}function c4(t,e,n){const i=ye(t_(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return sh("millisecond","utc",n);for(const[r,o,a,l]of u4(t)){if(i>l||r==="hour"&&!i)break;if(e.every(f=>o.floor(f)>=f))return sh(r,a,n)}}function Ni(t,e,n){return(i,r,o)=>{const a=t(i,r),l=e(i,r),f=r-er(o);return r!==f&&o[f]!==void 0&&l===e(o[f],f)?a:n(a,l)}}const jr=Object.getPrototypeOf(Uint8Array),h4=Object.prototype.toString,ng=Symbol("reindex");function Qt(t,e,n){const i=typeof e;return i==="string"?uh(t,ig(e),n):i==="function"?uh(t,e,n):i==="number"||e instanceof Date||i==="boolean"?Ht(t,yo(e),n):typeof(e==null?void 0:e.transform)=="function"?ch(e.transform(t),n):d4(ch(e,n),t==null?void 0:t[ng])}function d4(t,e){return e?pu(t,e):t}function uh(t,e,n){return Ht(t,(n==null?void 0:n.prototype)instanceof jr?p4(e):e,n)}function ch(t,e){return e===void 0?Me(t):t instanceof e?t:e.prototype instanceof jr&&!(t instanceof jr)?e.from(t,hu):e.from(t)}function p4(t){return(e,n)=>hu(t(e,n))}const oa=[null],ig=t=>e=>e[t],wl={transform:Cn},oe={transform:t=>t},m4=()=>1,g4=()=>!0,le=t=>t==null?t:`${t}`,Nt=t=>t==null?t:+t,cu=t=>t?t[0]:void 0,_s=t=>t?t[1]:void 0,yo=t=>()=>t;function b4(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Yi(n,e,i)}function tn(t){return t instanceof jr?t:Ht(t,hu,Float64Array)}function hu(t){return t==null?NaN:Number(t)}function _4(t){return Ht(t,rg)}function rg(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?Km(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Tn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:kl(t)?[void 0,t]:[t,void 0]}function fe(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function og(t,e,n){if(t!=null)return Xe(t,e,n)}function Xe(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Me(t){return t==null||t instanceof Array||t instanceof jr?t:Array.from(t)}function Ht(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Zr(t,e=Array){return t instanceof e?t.slice():e.from(t)}function y4({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function ag({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function w4(t){return y4(t)||ag(t)||t.interval!==void 0}function Qn(t){return(t==null?void 0:t.toString)===h4}function ys(t){return Qn(t)&&(t.type!==void 0||t.domain!==void 0)}function vl(t){return Qn(t)&&typeof t.transform!="function"}function tr(t){return vl(t)&&t.value===void 0&&t.channel===void 0}function v4(t,e,n,i=oe){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function xl(t,e){return t===void 0&&e===void 0?[cu,_s]:[t,e]}function du({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Tn(e)),t===void 0&&([t]=Tn(n)),t}function Cn(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function pu(t,e){return Ht(e,n=>t[n],t.constructor)}function x4(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function li(t){return t!==null&&typeof t=="object"?t.valueOf():t}function k4(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function qa(t){let e;return[{transform:()=>e,label:Si(t)},n=>e=n]}function mn(t){return t==null?[t]:qa(t)}function Si(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function ws(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return ve(i)||ve(r)?Ht(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):Ht(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function lg(t,e){const n=fg(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Ht(t,n):t}function fg(t,e){const n=mu(t,e);return n&&(i=>Xn(i)?n.floor(i):i)}function mu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Pf(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Pf(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?tg:uu)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function ur(t,e){if(t=mu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function M4(t,e){if(t=ur(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function S4(t){return Ri(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Ri(t){return typeof(t==null?void 0:t.range)=="function"}function wo(t){return t===void 0||vl(t)?t:{value:t}}function T4(t){return t==null?null:{transform:e=>Qt(e,t,Float64Array),label:Si(t)}}function Jn(t){return t&&typeof t[Symbol.iterator]=="function"}function sg(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function hh(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function ve(t){for(const e of t)if(e!=null)return e instanceof Date}function C4(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&Km(e)}function $4(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function A4(t){for(const e of t)if(e!=null)return typeof e=="number"}function df(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const E4=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function kl(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||E4.has(t))}function N4(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function de(t){return t==null||Kr(t)}function Kr(t){return/^\s*none\s*$/i.test(t)}function D4(t){return/^\s*round\s*$/i.test(t)}function vs(t,e){return og(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Ml(t="middle"){return vs(t,"frameAnchor")}function er(t){if(t==null)return;const e=t[0],n=t[t.length-1];return eo(e,n)}function F4(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function L4(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function ug(t){return Jn(t)?L4(t):t}const en=Symbol("position"),$n=Symbol("color"),vo=Symbol("radius"),xo=Symbol("length"),ko=Symbol("opacity"),Sl=Symbol("symbol"),cg=Symbol("projection"),It=new Map([["x",en],["y",en],["fx",en],["fy",en],["r",vo],["color",$n],["opacity",ko],["symbol",Sl],["length",xo],["projection",cg]]);function I4(t){return t===en||t===cg}function R4(t){return t===en||t===vo||t===xo||t===ko}const P4=Math.sqrt(3),O4=2/P4,U4={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*O4,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},gu=new Map([["asterisk",Tm],["circle",Xr],["cross",Cm],["diamond",Am],["diamond2",Em],["hexagon",U4],["plus",Nm],["square",Dm],["square2",Fm],["star",Im],["times",Um],["triangle",Rm],["triangle2",Pm],["wye",Om]]);function bu(t){return t&&typeof t.draw=="function"}function z4(t){return bu(t)?!0:typeof t!="string"?!1:gu.has(t.toLowerCase())}function _u(t){if(t==null||bu(t))return t;const e=gu.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function B4(t){if(t==null||bu(t))return[void 0,t];if(typeof t=="string"){const e=gu.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Tl({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=hg(t)),e!=null&&!tr(e)&&(i=pf(i,yu(e))),n&&(i=pf(i,dg))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||tr(e))&&{sort:e},transform:pf(i,a)}}function nr({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=hg(t)),e!=null&&!tr(e)&&(i=mf(i,yu(e))),n&&(i=mf(i,dg))),{...r,...(e===null||tr(e))&&{sort:e},initializer:mf(i,o)}}function pf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,Me(n),i,r)}}function mf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,l,f,s,u,c;return{data:l=n,facets:f=i,channels:a}=t.call(this,n,i,r,...o),{data:u=l,facets:c=f,channels:s}=e.call(this,l,f,{...r,...a},...o),{data:u,facets:c,channels:{...a,...s}}}}function q4(t,e){return(t.initializer!=null?nr:Tl)(t,e)}function hg(t){return(e,n)=>{const i=Qt(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function dg(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function W4(t,{sort:e,...n}={}){return{...(vl(t)&&t.channel!==void 0?nr:q4)(n,yu(t)),sort:tr(e)?e:null}}function yu(t){return(typeof t=="function"&&t.length!==1?Y4:H4)(t)}function Y4(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function H4(t){let e,n;({channel:e,value:t,order:n}={...wo(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Ba:He),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=He;break;case"descending":n=Ba;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let l;if(e===void 0)l=Qt(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const f=(s,u)=>n(l[s],l[u]);return{data:r,facets:o.map(s=>s.slice().sort(f))}}}function Wo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function V4(t,e,n=pg){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",J4]),e.href!=null&&t.href===void 0&&i.push(["href",vu]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?G4(r):n(r,o,e))}function pg(t,e,n,i=mg){let r;Qn(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,l]=qa(o.label);let f;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),f=l([])},scope(s,u){o.scope(s,u)},reduce(s,u){f.push(o.reduce(s,u))}}}function G4(t){return{name:t,initialize(){},scope(){},reduce(){}}}function mg(t,e,n,i=wu){const r=k4(t,n),o=i(e,r);let a,l;return{label:Si(o===Wa?null:r,o.label),initialize(f){a=r===void 0?f:Qt(f,r),o.scope==="data"&&(l=o.reduceIndex(Cn(f),a))},scope(f,s){o.scope===f&&(l=o.reduceIndex(s,a))},reduce(f,s){return o.scope==null?o.reduceIndex(f,a,s):o.reduceIndex(f,a,l,s)}}}function dh(t,e){return e?Ur(ja(t,n=>e[n]),cu):[[,t]]}function wu(t,e,n=X4){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&Qn(t))return K4(t);if(typeof t=="function")return Q4(t);if(/^p\d{2}$/i.test(t))return gn(b4(t));switch(`${t}`.toLowerCase()){case"first":return vu;case"last":return t8;case"identity":return gg;case"count":return Wa;case"distinct":return e8;case"sum":return e==null?Wa:n8;case"proportion":return mh(e,"data");case"proportion-facet":return mh(e,"facet");case"deviation":return gn(no);case"min":return gn(xn);case"min-index":return gn(jb);case"max":return gn(ye);case"max-index":return gn(Xb);case"mean":return ph(Yn);case"median":return ph(Rf);case"variance":return gn(Wi);case"mode":return gn(Jb)}return n(t)}function X4(t){throw new Error(`invalid reduce: ${t}`)}function j4(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function Z4(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>He(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function K4(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function Q4(t){return{reduceIndex(e,n,i){return t(pu(n,e),i)}}}function gn(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function ph(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return ve(n)?new Date(i):i}}}const gg={reduceIndex(t,e){return pu(e,t)}},vu={reduceIndex(t,e){return e[t[0]]}},J4={reduceIndex(t,e){const i=Ur(Oi(t,o=>o.length,o=>e[o]),_s),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[`… ${o.length.toLocaleString("en-US")} more`,Hn(o,_s)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},t8={reduceIndex(t,e){return e[t[t.length-1]]}},Wa={label:"Frequency",reduceIndex(t){return t.length}},e8={label:"Distinct",reduceIndex(t,e){const n=new Xa;for(const i of t)n.add(e[i]);return n.size}},n8=gn(Hn);function mh(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>Hn(n,o=>i[o])/r}}function Qr(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=Si(i)},l){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),bg(l,{scale:e,type:n,value:Qt(t,i),label:a,filter:r,hint:o})}function i8(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Qr(e,i,n)]))}function r8(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:Ht(o,a)]}));return n.channels=t,n}function bg(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&df(i,kl)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&df(i,N4)?null:"opacity";break;case"symbol":n!==!0&&df(i,z4)?(e.scale=null,e.value=Ht(i,_u)):e.scale="symbol";break;default:e.scale=It.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!It.has(n))throw new Error(`unknown scale: ${n}`);return e}function o8(t,e,n,i,r){const{order:o,reverse:a,reduce:l=!0,limit:f}=r;for(const s in r){if(!It.has(s))continue;let{value:u,order:c=o,reverse:h=a,reduce:p=l,limit:d=f}=wo(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),c=c===void 0?m!==(u==="width"||u==="height")?yg:_g:f8(c),p==null||p===!1)continue;const g=s==="fx"||s==="fy"?l8(e,i[s]):a8(n,s);if(!g)throw new Error(`missing channel for scale: ${s}`);const _=g.value,[b=0,v=1/0]=Jn(d)?d:d<0?[d]:[0,d];if(u==null)g.domain=()=>{let w=Array.from(new Xa(_));return h&&(w=w.reverse()),(b!==0||v!==1/0)&&(w=w.slice(b,v)),w};else{const w=u==="data"?t:u==="height"?gh(n,"y1","y2"):u==="width"?gh(n,"x1","x2"):xs(n,u,u==="y"?"y2":u==="x"?"x2":void 0),k=wu(p===!0?"max":p,w);g.domain=()=>{let x=qb(Cn(_),S=>k.reduceIndex(S,w),S=>_[S]);return c&&x.sort(c),h&&x.reverse(),(b!==0||v!==1/0)&&(x=x.slice(b,v)),x.map(cu)}}}}function a8(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function l8(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const l of t[o])r[l]=a}return e}function gh(t,e,n){const i=xs(t,e),r=xs(t,n);return Ht(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function xs(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function f8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return _g;case"descending":return yg}throw new Error(`invalid order: ${t}`)}function _g([t,e],[n,i]){return He(e,i)||He(t,n)}function yg([t,e],[n,i]){return Ba(e,i)||He(t,n)}function bh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function s8(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const u8=s8(t=>new Intl.NumberFormat(t));function c8(t="en-US"){const e=u8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function h8(t){return o4(t,"Invalid Date")}function d8(t="en-US"){const e=c8(t);return n=>(n instanceof Date?h8:typeof n=="number"?e:le)(n)}const vi=d8();let ks=0,Ms;function p8(){const t=ks;return ks=0,Ms=void 0,t}function Un(t){t!==Ms&&(Ms=t,console.warn(t),++ks)}const me=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let m8=0;function _h(){return`plot-clip-${++m8}`}function g8(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:l,fillOpacity:f,stroke:s,strokeWidth:u,strokeOpacity:c,strokeLinejoin:h,strokeLinecap:p,strokeMiterlimit:d,strokeDasharray:m,strokeDashoffset:g,opacity:_,mixBlendMode:b,imageFilter:v,paintOrder:w,pointerEvents:k,shapeRendering:x,channels:S},{ariaLabel:T,fill:A="currentColor",fillOpacity:F,stroke:C="none",strokeOpacity:L,strokeWidth:R,strokeLinecap:W,strokeLinejoin:$,strokeMiterlimit:B,paintOrder:z}){A===null&&(l=null,f=null),C===null&&(s=null,c=null),de(A)?!de(C)&&(!de(l)||S!=null&&S.fill)&&(C="none"):de(C)&&(!de(s)||S!=null&&S.stroke)&&(A="none");const[Q,j]=Tn(l,A),[G,O]=fe(f,F),[Y,J]=Tn(s,C),[lt,et]=fe(c,L),[Z,q]=fe(_);Kr(J)||(u===void 0&&(u=R),p===void 0&&(p=W),h===void 0&&(h=$),d===void 0&&!D4(h)&&(d=B),!Kr(j)&&w===void 0&&(w=z));const[N,E]=fe(u);return A!==null&&(t.fill=ne(j,"currentColor"),t.fillOpacity=vr(O,1)),C!==null&&(t.stroke=ne(J,"none"),t.strokeWidth=vr(E,1),t.strokeOpacity=vr(et,1),t.strokeLinejoin=ne(h,"miter"),t.strokeLinecap=ne(p,"butt"),t.strokeMiterlimit=vr(d,4),t.strokeDasharray=ne(m,"none"),t.strokeDashoffset=ne(g,"0")),t.target=le(a),t.ariaLabel=le(T),t.ariaDescription=le(r),t.ariaHidden=le(o),t.opacity=vr(q,1),t.mixBlendMode=ne(b,"normal"),t.imageFilter=ne(v,"none"),t.paintOrder=ne(w,"normal"),t.pointerEvents=ne(k,"auto"),t.shapeRendering=ne(x,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:Q,scale:"auto",optional:!0},fillOpacity:{value:G,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:lt,scale:"auto",optional:!0},strokeWidth:{value:N,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function b8(t,e){e&&t.filter(n=>au(e[n])).append("title").call(y8,e)}function _8(t,e){e&&t.filter(([n])=>au(e[n])).append("title").call(w8,e)}function y8(t,e){e&&t.text(n=>vi(e[n]))}function w8(t,e){e&&t.text(([n])=>vi(e[n]))}function An(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&bt(t,"aria-label",h=>i[h]),o&&bt(t,"fill",h=>o[h]),a&&bt(t,"fill-opacity",h=>a[h]),l&&bt(t,"stroke",h=>l[h]),f&&bt(t,"stroke-opacity",h=>f[h]),s&&bt(t,"stroke-width",h=>s[h]),u&&bt(t,"opacity",h=>u[h]),c&&kg(t,h=>c[h],e),n||b8(t,r)}function wg(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&bt(t,"aria-label",([h])=>i[h]),o&&bt(t,"fill",([h])=>o[h]),a&&bt(t,"fill-opacity",([h])=>a[h]),l&&bt(t,"stroke",([h])=>l[h]),f&&bt(t,"stroke-opacity",([h])=>f[h]),s&&bt(t,"stroke-width",([h])=>s[h]),u&&bt(t,"opacity",([h])=>u[h]),c&&kg(t,([h])=>c[h],e),n||_8(t,r)}function v8({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:l,href:f},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,l,f].filter(u=>u!==void 0)}function x8(t,e,n){const i=ja(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Un("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*vg(t,e,n,i){const{z:r}=n,{z:o}=i,a=v8(i,n),l=[...e,...a];for(const f of o?x8(t,o,r):[t]){let s,u;t:for(const c of f){for(const h of l)if(!Xn(h[c])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(h=>li(h[c])),u=[c];continue}u.push(c);for(let h=0;h<a.length;++h)if(li(a[h][c])!==s[h]){yield u,s=a.map(d=>li(d[c])),u=[c];continue t}}u&&(yield u)}}function xg(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Xe(t,"clip",["frame","sphere"])),t}function k8(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:l,marginLeft:f,marginRight:s,marginTop:u,marginBottom:c}=n,h=_h();r=`url(#${h})`,t=qt("svg:g",i).call(p=>p.append("svg:clipPath").attr("id",h).append("rect").attr("x",f).attr("y",u).attr("width",a-s-f).attr("height",l-u-c)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const l=_h();r=`url(#${l})`,t.append("clipPath").attr("id",l).append("path").attr("d",rl(a)({type:"Sphere"}));break}}bt(t,"aria-label",e.ariaLabel),bt(t,"aria-description",e.ariaDescription),bt(t,"aria-hidden",e.ariaHidden),bt(t,"clip-path",r)}function Ie(t,e,n,i){k8(t,e,n,i),bt(t,"fill",e.fill),bt(t,"fill-opacity",e.fillOpacity),bt(t,"stroke",e.stroke),bt(t,"stroke-width",e.strokeWidth),bt(t,"stroke-opacity",e.strokeOpacity),bt(t,"stroke-linejoin",e.strokeLinejoin),bt(t,"stroke-linecap",e.strokeLinecap),bt(t,"stroke-miterlimit",e.strokeMiterlimit),bt(t,"stroke-dasharray",e.strokeDasharray),bt(t,"stroke-dashoffset",e.strokeDashoffset),bt(t,"shape-rendering",e.shapeRendering),bt(t,"filter",e.imageFilter),bt(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;bt(t,"pointer-events",r)}function Re(t,e){M8(t,"mix-blend-mode",e.mixBlendMode),bt(t,"opacity",e.opacity)}function kg(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Hi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Hi.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function bt(t,e,n){n!=null&&t.attr(e,n)}function M8(t,e,n){n!=null&&t.style(e,n)}function Te(t,e,{x:n,y:i},r=me,o=me){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function ne(t,e){if((t=le(t))!==e)return t}function vr(t,e){if((t=Nt(t))!==e)return t}const S8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function xu(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!S8.test(t))throw new Error(`invalid class name: ${t}`);return t}function ku(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Mo({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function Mu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:xg(n)}}function qt(t,{document:e}){return Fr(Qa(t).call(e.documentElement))}const Mg=Math.PI,hn=2*Mg,yh=.618;function T8({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,f,s="frame";if(Qn(t)){let k;if({type:t,domain:f,inset:k,insetTop:n=k!==void 0?k:n,insetRight:i=k!==void 0?k:i,insetBottom:r=k!==void 0?k:r,insetLeft:o=k!==void 0?k:o,clip:s=s,...l}=t,t==null)return}typeof t!="function"&&({type:t}=Sg(t));const{width:u,height:c,marginLeft:h,marginRight:p,marginTop:d,marginBottom:m}=a,g=u-h-p-o-i,_=c-d-m-n-r;if(t=t==null?void 0:t({width:g,height:_,clip:s,...l}),t==null)return;s=C8(s,h,d,u-p,c-m);let b=h+o,v=d+n,w;if(f!=null){const[[k,x],[S,T]]=rl(t).bounds(f),A=Math.min(g/(S-k),_/(T-x));A>0?(b-=(A*(k+S)-g)/2,v-=(A*(x+T)-_)/2,w=us({point(F,C){this.stream.point(F*A+b,C*A+v)}})):Un("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&v===0?Tg():us({point(k,x){this.stream.point(k+b,x+v)}})),{stream:k=>t.stream(w.stream(s(k)))}}function Sg(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Oe(R3,.7463,.4673);case"albers":return Yo(S1,.7463,.4673);case"azimuthal-equal-area":return Oe(P3,4,4);case"azimuthal-equidistant":return Oe(O3,hn,hn);case"conic-conformal":return Yo(B3,hn,hn);case"conic-equal-area":return Yo(Ea,6.1702,2.9781);case"conic-equidistant":return Yo(Y3,7.312,3.6282);case"equal-earth":return Oe(V3,5.4133,2.6347);case"equirectangular":return Oe(q3,hn,Mg);case"gnomonic":return Oe(G3,3.4641,3.4641);case"identity":return{type:Tg};case"reflect-y":return{type:$8};case"mercator":return Oe(U3,hn,hn);case"orthographic":return Oe(X3,2,2);case"stereographic":return Oe(j3,2,2);case"transverse-mercator":return Oe(Z3,hn,hn);default:throw new Error(`unknown projection type: ${t}`)}}function C8(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return s1(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function Oe(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:l})=>{var s,u,c;const f=t();return a!=null&&((s=f.precision)==null||s.call(f,a)),o!=null&&((u=f.rotate)==null||u.call(f,o)),typeof l=="number"&&((c=f.clipAngle)==null||c.call(f,l)),f.scale(Math.min(i/e,r/n)),f.translate([i/2,r/2]),f},aspectRatio:n/e}}function Yo(t,e,n){const{type:i,aspectRatio:r}=Oe(t,e,n);return{type:o=>{const{parallels:a,domain:l,width:f,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),l===void 0&&u.fitSize([f,s],{type:"Sphere"})),u},aspectRatio:r}}const Tg=yo({stream:t=>t}),$8=yo(us({point(t,e){this.stream.point(t,-e)}}));function A8(t,e,n,i){const r=n[t],o=n[e],a=r.length,l=n[t]=new Float64Array(a).fill(NaN),f=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(c,h){l[s]=c,f[s]=h}});for(s=0;s<a;++s)u.point(r[s],o[s])}function E8({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(Qn(t)&&(t=t.type),t!=null)}function N8(t){if(typeof(t==null?void 0:t.stream)=="function")return yh;if(Qn(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Sg(t);if(e)return e}return yh}}function D8(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)ri(a,o);return[i,r]}const F8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Cg=new Map([["accent",y5],["category10",_5],["dark2",w5],["observable10",F8],["paired",v5],["pastel1",x5],["pastel2",k5],["set1",M5],["set2",S5],["set3",T5],["tableau10",C5]]);function L8(t){return t!=null&&Cg.has(`${t}`.toLowerCase())}const wh=new Map([...Cg,["brbg",dn(cp,hp)],["prgn",dn(dp,pp)],["piyg",dn(mp,gp)],["puor",dn(bp,_p)],["rdbu",dn(ms,La)],["rdgy",dn(yp,wp)],["rdylbu",dn(gs,Ia)],["rdylgn",dn(vp,xp)],["spectral",dn(kp,Mp)],["burd",vh(ms,La)],["buylrd",vh(gs,Ia)],["blues",Xt(jp,Zp)],["greens",Xt(Kp,Qp)],["greys",Xt(Jp,tm)],["oranges",Xt(om,am)],["purples",Xt(em,nm)],["reds",Xt(im,rm)],["turbo",pn(dm)],["viridis",pn(pm)],["magma",pn(mm)],["inferno",pn(gm)],["plasma",pn(bm)],["cividis",pn(lm)],["cubehelix",pn(fm)],["warm",pn(sm)],["cool",pn(um)],["bugn",Xt(Sp,Tp)],["bupu",Xt(Cp,$p)],["gnbu",Xt(Ap,Ep)],["orrd",Xt(Np,Dp)],["pubu",Xt(Ip,Rp)],["pubugn",Xt(Fp,Lp)],["purd",Xt(Pp,Op)],["rdpu",Xt(Up,zp)],["ylgn",Xt(Wp,Yp)],["ylgnbu",Xt(Bp,qp)],["ylorbr",Xt(Hp,Vp)],["ylorrd",Xt(Gp,Xp)],["rainbow",xh(cm)],["sinebow",xh(hm)]]);function Xt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?qe(e,n):t[n])}function dn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?qe(e,n):t[n])}function vh(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?qe(i=>e(1-i),n):t[n].slice().reverse())}function pn(t){return({length:e})=>qe(t,Math.max(2,Math.floor(e)))}function xh(t){return({length:e})=>qe(t,Math.floor(e)+1).slice(0,-1)}function $g(t){const e=`${t}`.toLowerCase();if(!wh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return wh.get(e)}function Cl(t,e){const n=$g(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function I8(t,e="greys"){const n=new Set,[i,r]=Cl(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const kh=new Map([["brbg",hp],["prgn",pp],["piyg",gp],["puor",_p],["rdbu",La],["rdgy",wp],["rdylbu",Ia],["rdylgn",xp],["spectral",Mp],["burd",t=>La(1-t)],["buylrd",t=>Ia(1-t)],["blues",Zp],["greens",Qp],["greys",tm],["purples",nm],["reds",rm],["oranges",am],["turbo",dm],["viridis",pm],["magma",mm],["inferno",gm],["plasma",bm],["cividis",lm],["cubehelix",fm],["warm",sm],["cool",um],["bugn",Tp],["bupu",$p],["gnbu",Ep],["orrd",Dp],["pubugn",Lp],["pubu",Rp],["purd",Op],["rdpu",zp],["ylgnbu",qp],["ylgn",Yp],["ylorbr",Vp],["ylorrd",Xp],["rainbow",cm],["sinebow",hm]]);function Su(t){const e=`${t}`.toLowerCase();if(!kh.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return kh.get(e)}const R8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function P8(t){return t!=null&&R8.has(`${t}`.toLowerCase())}const Ag=t=>e=>t(1-e),gf=[0,1],Mh=new Map([["number",ie],["rgb",gi],["hsl",Mw],["hcl",Cw],["lab",Sw]]);function Eg(t){const e=`${t}`.toLowerCase();if(!Mh.has(e))throw new Error(`unknown interpolator: ${e}`);return Mh.get(e)}function So(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:l=Dg(t,n),unknown:f,round:s,scheme:u,interval:c,range:h=It.get(t)===vo?X8(n,l):It.get(t)===xo?j8(n,l):It.get(t)===ko?gf:void 0,interpolate:p=It.get(t)===$n?u==null&&h!==void 0?gi:Su(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?zs:ie,reverse:d}){if(c=ur(c,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof p!="function"&&(p=Eg(p)),d=!!d,h!==void 0){const m=(l=Me(l)).length,g=(h=Me(h)).length;if(m!==g){if(p.length===1)throw new Error("invalid piecewise interpolator");p=el(p,h),h=void 0}}if(p.length===1?(d&&(p=Ag(p),d=!1),h===void 0&&(h=Float64Array.from(l,(m,g)=>g/(l.length-1)),h.length===2&&(h=gf)),e.interpolate((h===gf?yo:Cu)(p))):e.interpolate(p),a){const[m,g]=Ae(l);(m>0||g<0)&&(l=Zr(l),er(l)!==Math.sign(m)?l[l.length-1]=0:l[0]=0)}return d&&(l=ha(l)),e.domain(l).unknown(f),r&&(e.nice(O8(r,i)),l=e.domain()),h!==void 0&&e.range(h),o&&e.clamp(o),{type:i,domain:l,range:h,scale:e,interpolate:p,interval:c}}function O8(t,e){return t===!0?void 0:typeof t=="number"?t:M4(t,e)}function U8(t,e,n){return So(t,Ks(),e,n)}function z8(t,e,n){return Ng(t,e,{...n,exponent:.5})}function Ng(t,e,{exponent:n=1,...i}){return So(t,Y1().exponent(n),e,{...i,type:"pow"})}function B8(t,e,{base:n=10,domain:i=Z8(e),...r}){return So(t,z1().base(n),e,{...r,domain:i})}function q8(t,e,{constant:n=1,...i}){return So(t,q1().constant(n),e,i)}function W8(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=K8(e),unknown:l,interpolate:f,reverse:s}){return n===void 0&&(n=f!==void 0?qe(f,r):It.get(t)===$n?Cl(o,r):void 0),a.length>0&&(a=H1(a,n===void 0?{length:r}:n).quantiles()),Tu(t,e,{domain:a,range:n,reverse:s,unknown:l})}function Y8(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Dg(t,e),unknown:a,interpolate:l,reverse:f}){const[s,u]=Ae(o);let c;return n===void 0?(c=zr(s,u,i),c[0]<=s&&c.splice(0,1),c[c.length-1]>=u&&c.pop(),i=c.length+1,n=l!==void 0?qe(l,i):It.get(t)===$n?Cl(r,i):void 0):(c=qe(ie(s,u),i+1).slice(1,-1),s instanceof Date&&(c=c.map(h=>new Date(h)))),er(Me(o))<0&&c.reverse(),Tu(t,e,{domain:c,range:n,reverse:f,unknown:a})}function Tu(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?qe(o,n.length+1):It.get(t)===$n?Cl(r,n.length+1):void 0,reverse:l}){n=Me(n);const f=er(n);if(!isNaN(f)&&!H8(n,f))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=ha(a)),{type:"threshold",scale:V1(f<0?ha(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function H8(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=eo(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function V8(t){return{type:"identity",scale:R4(It.get(t))?P1():e=>e}}function Jr(t,e=Zm){return t.length?[xn(t,({value:n})=>n===void 0?n:xn(n,e)),ye(t,({value:n})=>n===void 0?n:ye(n,e))]:[0,1]}function Dg(t,e){const n=It.get(t);return(n===vo||n===ko||n===xo?G8:Jr)(e)}function G8(t){return[0,t.length?ye(t,({value:e})=>e===void 0?e:ye(e,Zm)):1]}function X8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Yi(t,.5,({value:a})=>a===void 0?NaN:Yi(a,.25,_l)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ye(r);return o<1?r.map(a=>a*o):r}function j8(t,e){const n=Rf(t,({value:o})=>o===void 0?NaN:Rf(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ye(i);return r<1?i.map(o=>o*r):i}function Z8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Jr(t,_l);if(n<0)return Jr(t,lu)}return[1,10]}function K8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function Cu(t){return(e,n)=>i=>t(e+i*(n-e))}function $l(t,e,n,i,{type:r,nice:o,clamp:a,domain:l=Jr(i),unknown:f,pivot:s=0,scheme:u,range:c,symmetric:h=!0,interpolate:p=It.get(t)===$n?u==null&&c!==void 0?gi:Su(u!==void 0?u:"rdbu"):ie,reverse:d}){s=+s,l=Me(l);let[m,g]=l;if(l.length>2&&Un(`Warning: the diverging ${t} scale domain contains extra elements.`),eo(m,g)<0&&([m,g]=[g,m],d=!d),m=Math.min(m,s),g=Math.max(g,s),typeof p!="function"&&(p=Eg(p)),c!==void 0&&(p=p.length===1?Cu(p)(...c):el(p,c)),d&&(p=Ag(p)),h){const _=n.apply(s),b=_-n.apply(m),v=n.apply(g)-_;b<v?m=n.invert(_-v):b>v&&(g=n.invert(_+b))}return e.domain([m,s,g]).unknown(f).interpolator(p),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,g],pivot:s,interpolate:p,scale:e}}function Q8(t,e,n){return $l(t,lp(),n7,e,n)}function J8(t,e,n){return Fg(t,e,{...n,exponent:.5})}function Fg(t,e,{exponent:n=1,...i}){return $l(t,up().exponent(n=+n),o7(n),e,{...i,type:"diverging-pow"})}function t7(t,e,{base:n=10,pivot:i=1,domain:r=Jr(e,i<0?lu:_l),...o}){return $l(t,fp().base(n=+n),i7,e,{domain:r,pivot:i,...o})}function e7(t,e,{constant:n=1,...i}){return $l(t,sp().constant(n=+n),a7(n),e,i)}const n7={apply(t){return t},invert(t){return t}},i7={apply:Math.log,invert:Math.exp},r7={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function o7(t){return t===.5?r7:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function a7(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Lg(t,e,n,i){return So(t,e,n,i)}function l7(t,e,n){return Lg(t,g5(),e,n)}function f7(t,e,n){return Lg(t,b5(),e,n)}const To=Symbol("ordinal");function Ig(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:l,hint:f}){return r=ur(r,i),o===void 0&&(o=Pg(n,r,t)),(i==="categorical"||i===To)&&(i="ordinal"),l&&(o=ha(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:f,interval:r}}function s7(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:l,...f}){i=ur(i,n),r===void 0&&(r=Pg(e,i,t));let s;if(It.get(t)===Sl)s=h7(e),o=o===void 0?d7(s):Ht(o,_u);else if(It.get(t)===$n&&(o===void 0&&(n==="ordinal"||n===To)&&(o=I8(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const u=Su(a),c=o[0],h=o[1]-o[0];o=({length:p})=>qe(d=>u(c+h*d),p)}else o=$g(a);if(l===hs)throw new Error(`implicit unknown on ${t} scale is not supported`);return Ig(t,Zs().unknown(l),e,{...f,type:n,domain:r,range:o,hint:s})}function u7(t,e,{align:n=.5,padding:i=.5,...r}){return Rg(K3().align(n).padding(i),e,r,t)}function c7(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Rg(fl().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Rg(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=Ig(i,t,e,n),t.round=r,t}function Pg(t,e,n){const i=new Xa;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=Ae(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&It.get(n)===en)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Ur(i,He)}function Sh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function h7(t){return{fill:Sh(t,"fill"),stroke:Sh(t,"stroke")}}function d7(t){return de(t.fill)?B5:z5}function Ss(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:l,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,facet:{label:d=e}={},...m}={}){const g={};for(const[_,b]of t){const v=m[_],w=_7(_,b,{round:It.get(_)===en?l:void 0,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,...v});if(w){let{label:k=_==="fx"||_==="fy"?d:e,percent:x,transform:S,inset:T,insetTop:A=T!==void 0?T:_==="y"?i:0,insetRight:F=T!==void 0?T:_==="x"?r:0,insetBottom:C=T!==void 0?T:_==="y"?o:0,insetLeft:L=T!==void 0?T:_==="x"?a:0}=v||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");w.percent=!!x,w.label=k===void 0?m7(b,w):k,w.transform=S,_==="x"||_==="fx"?(w.insetLeft=+L,w.insetRight=+F):(_==="y"||_==="fy")&&(w.insetTop=+A,w.insetBottom=+C),g[_]=w}}return g}function Th(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:l,label:f}=r;e[i]=k7(r),n[i]=o,o.type=a,l!=null&&(o.interval=l),f!=null&&(o.label=f)}return n}function p7(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?$u(e):e;r&&Ch(r,a),o&&$h(o,a);const l=r||o?Og(t,e):e;n&&Ch(n,l),i&&$h(i,l)}function m7(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!Ti(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function g7(t){return Math.sign(er(t.domain()))*Math.sign(er(t.range()))}function $u(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:l,marginRight:f,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,f),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function Og({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=$u(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:l,height:e?e.scale.bandwidth()+i+o:f,facet:{width:l,height:f}}}function Ch(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,l=o+n,f=r-a-i;t.range=[l,Math.max(l,f)],Ti(t)||(t.range=zg(t)),t.scale.range(t.range)}Ug(t)}function $h(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,l=o+n,f=r-a-i;t.range=[Math.max(l,f),l],Ti(t)?t.range.reverse():t.range=zg(t),t.scale.range(t.range)}Ug(t)}function Ug(t){t.round===void 0&&w7(t)&&b7(t)<=30&&t.scale.round(!0)}function b7({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,l=Math.abs(i-n)/Math.max(1,a+o*2);return(l-Math.floor(l))*a}function zg(t){const e=t.scale.domain().length+Bg(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function _7(t,e=[],n={}){const i=y7(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Ti({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(ve)?Un(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Di(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Di(i)}".`):r.some(C4)?Un(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Di(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Di(i)}".`):r.some($4)&&Un(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Di(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Di(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Ho(e,n,tn);break;case"identity":switch(It.get(t)){case en:n=Ho(e,n,tn);break;case Sl:n=Ho(e,n,v7);break}break;case"utc":case"time":n=Ho(e,n,_4);break}switch(i){case"diverging":return Q8(t,e,n);case"diverging-sqrt":return J8(t,e,n);case"diverging-pow":return Fg(t,e,n);case"diverging-log":return t7(t,e,n);case"diverging-symlog":return e7(t,e,n);case"categorical":case"ordinal":case To:return s7(t,e,n);case"cyclical":case"sequential":case"linear":return U8(t,e,n);case"sqrt":return z8(t,e,n);case"threshold":return Tu(t,e,n);case"quantile":return W8(t,e,n);case"quantize":return Y8(t,e,n);case"pow":return Ng(t,e,n);case"log":return B8(t,e,n);case"symlog":return q8(t,e,n);case"utc":return f7(t,e,n);case"time":return l7(t,e,n);case"point":return u7(t,e,n);case"band":return c7(t,e,n);case"identity":return V8(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Di(t){return typeof t=="symbol"?t.description:t}function Ah(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Eh={toString:()=>"projection"};function y7(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:l}){if(n=Ah(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=Eh);for(const s of e){const u=Ah(s.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===Eh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const f=It.get(t);if(f===vo)return"sqrt";if(f===ko||f===xo)return"linear";if(f===Sl)return"ordinal";if((i||r||[]).length>2)return bf(f);if(i!==void 0){if(hh(i))return bf(f);if(ve(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(hh))return bf(f);if(s.some(ve))return"utc"}if(f===$n){if(a!=null||P8(o))return"diverging";if(L8(o))return"categorical"}return"linear"}function bf(t){switch(t){case en:return"point";case $n:return To;default:return"ordinal"}}function Ti({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===To}function Bg({type:t}){return t==="threshold"}function w7({type:t}){return t==="point"||t==="band"}function ir(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Ho(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function v7(t){return Ht(t,_u)}function x7(t){return e=>{if(!It.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function k7({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:l,pivot:f}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:Zr(n),...i!==void 0&&{range:Zr(i)},...a!==void 0&&{transform:a},...l&&{percent:l},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...f!==void 0&&{pivot:f,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function M7(t,e,n={}){let i=.5-me,r=.5+me,o=.5+me,a=.5-me;for(const{marginTop:m,marginRight:g,marginBottom:_,marginLeft:b}of e)m>i&&(i=m),g>r&&(r=g),_>o&&(o=_),b>a&&(a=b);let{margin:l,marginTop:f=l!==void 0?l:i,marginRight:s=l!==void 0?l:r,marginBottom:u=l!==void 0?l:o,marginLeft:c=l!==void 0?l:a}=n;f=+f,s=+s,u=+u,c=+c;let{width:h=640,height:p=S7(t,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,f-i+u-o)}=n;h=+h,p=+p;const d={width:h,height:p,marginTop:f,marginRight:s,marginBottom:u,marginLeft:c};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:f,marginRight:_=m!==void 0?m:s,marginBottom:b=m!==void 0?m:u,marginLeft:v=m!==void 0?m:c}=n.facet??{};g=+g,_=+_,b=+b,v=+v,d.facet={marginTop:g,marginRight:_,marginBottom:b,marginLeft:v}}return d}function S7({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:l,marginRightDefault:f,marginBottomDefault:s,marginLeftDefault:u}){const c=n?n.scale.domain().length:1,h=N8(r);if(h){const d=i?i.scale.domain().length:1,m=(1.1*c-.1)/(1.1*d-.1)*h,g=Math.max(.1,Math.min(10,m));return Math.round((a-u-f)*g+l+s)}const p=e?Ti(e)?e.scale.domain().length:Math.max(7,17/c):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const d=Nh("y",e)/(Nh("x",t)*o),m=i?i.scale.bandwidth():1,g=n?n.scale.bandwidth():1,_=m*(a-u-f)-t.insetLeft-t.insetRight;return(d*_+e.insetTop+e.insetBottom)/g+l+s}return!!(e||n)*Math.max(1,Math.min(60,p*c))*20+!!i*30+60}function Nh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const l=e.scale.exponent();r=f=>Math.pow(f,l);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=Ae(i);return Math.abs(r(a)-r(o))}function T7(t,e){const{fx:n,fy:i}=Ss(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?zb(r,o).map(([a,l],f)=>({x:a,y:l,i:f})):r?r.map((a,l)=>({x:a,i:l})):o?o.map((a,l)=>({y:a,i:l})):void 0}function C7(t,{x:e,y:n}){return e&&(e=Ts(e)),n&&(n=Ts(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Au(t,{fx:e,fy:n}){const i=Cn(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Oi(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Oi(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Oi(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function $7(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function A7(t){const e=[],n=new Uint32Array(Hn(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const E7=new Map([["top",_f],["right",vf],["bottom",yf],["left",wf],["top-left",Vo(_f,wf)],["top-right",Vo(_f,vf)],["bottom-left",Vo(yf,wf)],["bottom-right",Vo(yf,vf)],["top-empty",F7],["right-empty",R7],["bottom-empty",L7],["left-empty",I7],["empty",P7]]);function N7(t){if(t==null)return null;const e=E7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Dh=new WeakMap;function Ts(t){let e=Dh.get(t);return e||Dh.set(t,e=new di(Ht(t,(n,i)=>[n,i]))),e}function ti(t,e){return Ts(t).get(e)}function D7(t,e,n){return e=li(e),n=li(n),t.find(i=>Object.is(li(i.x),e)&&Object.is(li(i.y),n))}function Al(t,e,n){var i;return(i=D7(t,e,n))==null?void 0:i.empty}function _f(t,{y:e},{y:n}){return e?ti(e,n)===0:!0}function yf(t,{y:e},{y:n}){return e?ti(e,n)===e.length-1:!0}function wf(t,{x:e},{x:n}){return e?ti(e,n)===0:!0}function vf(t,{x:e},{x:n}){return e?ti(e,n)===e.length-1:!0}function F7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ti(e,i);if(o>0)return Al(t,n,e[o-1])}function L7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ti(e,i);if(o<e.length-1)return Al(t,n,e[o+1])}function I7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ti(e,n);if(o>0)return Al(t,e[o-1],i)}function R7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ti(e,n);if(o<e.length-1)return Al(t,e[o+1],i)}function P7(t,e,{empty:n}){return n}function Vo(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function xf(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class ue{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:l,fy:f,sort:s,dx:u=0,dy:c=0,margin:h=0,marginTop:p=h,marginRight:d=h,marginBottom:m=h,marginLeft:g=h,clip:_=r==null?void 0:r.clip,channels:b,tip:v,render:w}=i;if(this.data=e,this.sort=tr(s)?s:null,this.initializer=nr(i).initializer,this.transform=this.initializer?i.transform:Tl(i).transform,o===null||o===!1?this.facet=null:(this.facet=Xe(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===oa&&typeof l=="string"?[l]:l,this.fy=e===oa&&typeof f=="string"?[f]:f),this.facetAnchor=N7(a),n=ug(n),b!==void 0&&(n={...O7(b),...n}),r!==void 0&&(n={...g8(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([k,x])=>{if(vl(x.value)){const{value:S,label:T=x.label,scale:A=x.scale}=x.value;x={...x,label:T,scale:A,value:S}}if(e===oa&&typeof x.value=="string"){const{value:S}=x;x={...x,value:[S]}}return[k,x]}).filter(([k,{value:x,optional:S}])=>{if(x!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${k}`)})),this.dx=+u,this.dy=+c,this.marginTop=+p,this.marginRight=+d,this.marginBottom=+m,this.marginLeft=+g,this.clip=xg(_),this.tip=U7(v),this.facet==="super"){if(l||f)throw new Error("super-faceting cannot use fx or fy");for(const k in this.channels){const{scale:x}=n[k];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=Wg(w,this.render))}initialize(e,n,i){let r=Me(this.data);e===void 0&&r!=null&&(e=[Cn(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=Me(r)),e!==void 0&&(e.original=o);const a=i8(this.channels,r);return this.sort!=null&&o8(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=Xn}=n[r];if(o!==null){const a=i[r];e=e.filter(l=>o(a[l]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&A8(r,o,n,i.projection)}}scale(e,n,i){const r=r8(e,n);return i.projection&&this.project(e,r,i),r}}function qg(...t){return t.plot=ue.prototype.plot,t}function Wg(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,l){return t.call(this,n,i,r,o,a,(f,s,u,c,h)=>e.call(this,f,s,u,c,h,l))}}function O7(t){return Object.fromEntries(Object.entries(ug(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:wo(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function U7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Xe(t,"tip",["x","y","xy"]):t}function El(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:Qn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const Fh=new WeakMap;function Eu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:l,render:f,...s}={}){return a=+a,r!=null&&(n??(n=null),l={...l,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),l={...l,py:{value:o,scale:"y"}}),{x:n,y:i,channels:l,...s,render:Wg(function(u,c,h,p,d,m){d={...d,pointerSticky:!1};const g=d.ownerSVGElement,{data:_}=d.getMarkState(this);let b=Fh.get(g);b||Fh.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(J)-1;const{x:w,y:k,fx:x,fy:S}=c;let T=x?x(u.fx)-p.marginLeft:0,A=S?S(u.fy)-p.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),k!=null&&k.bandwidth&&(A+=k.bandwidth()/2);const F=u.fi!=null;let C;if(F){let q=b.facetStates;q||(b.facetStates=q=new Map),C=q.get(this),C||q.set(this,C=new Map)}const[L,R]=Mo(this,p),{px:W,py:$}=h,B=W?q=>W[q]:Yg(h,L),z=$?q=>$[q]:Hg(h,R);let Q,j,G,O;function Y(q,N){if(F)if(O&&(O=cancelAnimationFrame(O)),q==null)C.delete(u.fi);else{C.set(u.fi,N),O=requestAnimationFrame(()=>{O=null;for(const[E,P]of C)if(P<N||P===N&&E<u.fi){q=null;break}J(q)});return}J(q)}function J(q){if(Q===q&&G===b.sticky)return;Q=q,G=d.pointerSticky=b.sticky;const N=Q==null?[]:[Q];F&&(N.fx=u.fx,N.fy=u.fy,N.fi=u.fi);const E=m(N,c,h,p,d);if(j){if(F){const P=j.parentNode,tt=j.getAttribute("transform"),U=E.getAttribute("transform");tt?E.setAttribute("transform",tt):E.removeAttribute("transform"),U?P.setAttribute("transform",U):P.removeAttribute("transform"),E.removeAttribute("aria-label"),E.removeAttribute("aria-description"),E.removeAttribute("aria-hidden")}j.replaceWith(E)}return b.roots[v]=j=E,Q==null&&(C==null?void 0:C.size)>1||d.dispatchValue(Q==null?null:_[Q]),E}function lt(q){if(b.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[N,E]=Vy(q);N-=T,E-=A;const P=N<p.marginLeft||N>p.width-p.marginRight?1:t,tt=E<p.marginTop||E>p.height-p.marginBottom?1:e;let U=null,dt=a*a;for(const nt of u){const mt=P*(B(nt)-N),ot=tt*(z(nt)-E),rt=mt*mt+ot*ot;rt<=dt&&(U=nt,dt=rt)}if(U!=null&&(t!==1||e!==1)){const nt=B(U)-N,mt=z(U)-E;dt=nt*nt+mt*mt}Y(U,dt)}function et(q){q.pointerType==="mouse"&&Q!=null&&(b.sticky&&b.roots.some(N=>N==null?void 0:N.contains(q.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(N=>N(null))):(b.sticky=!0,J(Q)),q.stopImmediatePropagation()))}function Z(q){q.pointerType==="mouse"&&(b.sticky||Y(null))}return g.addEventListener("pointerenter",lt),g.addEventListener("pointermove",lt),g.addEventListener("pointerdown",et),g.addEventListener("pointerleave",Z),J(null)},f)}}function z7(t){return Eu(1,1,t)}function B7(t){return Eu(1,.01,t)}function Lh(t){return Eu(.01,1,t)}function Yg({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function Hg({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function Vg(t){return Ti(t)&&t.interval===void 0?void 0:"tabular-nums"}function q7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:l=0,marginBottom:f=16+i,marginLeft:s=0,style:u,ticks:c=(r-s-l)/64,tickFormat:h,fontVariant:p=Vg(t),round:d=!0,opacity:m,className:g}=e;const _=Mu(e);g=xu(g),m=fe(m)[1],h===null&&(h=()=>null);const b=qt("svg",_).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(L=>L.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(ku,u);let v=L=>L.selectAll(".tick line").attr("y1",a+f-o),w;const k=d?(L,R)=>L.rangeRound(R):(L,R)=>L.range(R),{type:x,domain:S,range:T,interpolate:A,scale:F,pivot:C}=t;if(A){const L=T===void 0?A:el(A.length===1?Cu(A):A,T);w=k(F.copy(),qe(ie(s,r-l),Math.min(S.length+(C!==void 0),T===void 0?1/0:T.length)));const R=256,W=_.document.createElement("canvas");W.width=R,W.height=1;const $=W.getContext("2d");for(let B=0,z=R-1;B<R;++B)$.fillStyle=L(B/z),$.fillRect(B,0,1,1);b.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-l).attr("height",o-a-f).attr("preserveAspectRatio","none").attr("xlink:href",W.toDataURL())}else if(x==="threshold"){const L=S,R=h===void 0?W=>W:typeof h=="string"?fr(h):h;w=k(Ks().domain([-1,T.length-1]),[s,r-l]),b.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",(W,$)=>w($-1)).attr("y",a).attr("width",(W,$)=>w($)-w($-1)).attr("height",o-a-f).attr("fill",W=>W),c=Ht(L,(W,$)=>$),h=W=>R(L[W],W)}else w=k(fl().domain(S),[s,r-l]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-f).attr("fill",F),v=()=>{};return b.append("g").attr("transform",`translate(0,${o-f})`).call(s_(w).ticks(Array.isArray(c)?null:c,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(c)?c:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ne(p,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const Gg=Math.PI/180;function Co(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=kf(n),t.markerMid=kf(i),t.markerEnd=kf(r)}function kf(t){if(t==null||t===!1)return null;if(t===!0)return Rh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Ih("auto");case"arrow-reverse":return Ih("auto-start-reverse");case"dot":return W7;case"circle":case"circle-fill":return Rh;case"circle-stroke":return Y7;case"tick":return Mf("auto");case"tick-x":return Mf(90);case"tick-y":return Mf(0)}throw new Error(`invalid marker: ${t}`)}function Ih(t){return(e,n)=>qt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function W7(t,e){return qt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Rh(t,e){return qt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Y7(t,e){return qt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Mf(t){return(e,n)=>qt("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let H7=0;function Nl(t,e,{stroke:n},i){return Xg(t,e,n&&(r=>n[r]),i)}function V7(t,e,{stroke:n},i){return Xg(t,e,n&&(([r])=>n[r]),i)}function Xg(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const l=new Map;function f(s){return function(u){const c=o(u);let h=l.get(s);h||l.set(s,h=new Map);let p=h.get(c);if(!p){const d=this.parentNode.insertBefore(s(c,a),this),m=`plot-marker-${++H7}`;d.setAttribute("id",m),h.set(c,p=`url(#${m})`)}return p}}e&&t.attr("marker-start",f(e)),n&&t.attr("marker-mid",f(n)),i&&t.attr("marker-end",f(i))}function Nu({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=Zg(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function jg({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=Zg(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function Zg(t,e,n){return t===void 0&&e===void 0&&n===void 0?me?[1,0]:[.5,.5]:[e,n]}function Kg(t,{interval:e}){return t={...wo(t)},t.interval=mu(t.interval===void 0?e:t.interval),t}function Qg(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:l,interval:f}=Kg(r,n);if(l==null||f==null&&!i)return n;const s=Si(r);if(f==null){let p;const d={transform:m=>p||(p=Qt(m,l)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?d:o,[`${t}2`]:a===void 0&&!(o===a&&i)?d:a}}let u,c;function h(p){return c!==void 0&&p===u?c:c=Ht(Qt(u=p,l),d=>f.floor(d))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:h,label:s}:o,[`${t}2`]:a===void 0?{transform:p=>h(p).map(d=>f.offset(d)),label:s}:a})}function Jg(t,e,n){const{[t]:i}=n,{value:r,interval:o}=Kg(i,n);return r==null||o==null?n:e({...n,[t]:{label:Si(i),transform:a=>{const l=Ht(Qt(a,r),s=>o.floor(s)),f=l.map(s=>o.offset(s));return l.map(ve(l)?(s,u)=>s==null||isNaN(s=+s)||(u=f[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=f[u],u==null)?NaN:(+s+ +u)/2)}}})}function G7(t={}){return Qg("x",Nu,t)}function t2(t={}){return Qg("y",jg,t)}function X7(t={}){return Jg("x",Nu,t)}function j7(t={}){return Jg("y",jg,t)}const e2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class Z7 extends ue{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:l=a,insetBottom:f=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},El(n,"x"),e2),this.insetTop=Nt(l),this.insetBottom=Nt(f),Co(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y1:s,y2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetTop:_,insetBottom:b}=this;return qt("svg:g",o).call(Ie,this,r,o).call(Te,this,{x:f&&a},me,0).call(v=>v.selectAll().data(e).enter().append("line").call(Re,this).attr("x1",f?w=>f[w]:(m+c-d)/2).attr("x2",f?w=>f[w]:(m+c-d)/2).attr("y1",s&&!ir(l)?w=>s[w]+_:p+_).attr("y2",u&&!ir(l)?l.bandwidth?w=>u[w]+l.bandwidth()-b:w=>u[w]-b:h-g-b).call(An,this,i).call(Nl,this,i,o)).node()}}class K7 extends ue{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:l=a,insetLeft:f=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},El(n,"y"),e2),this.insetRight=Nt(l),this.insetLeft=Nt(f),Co(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{y:f,x1:s,x2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetLeft:_,insetRight:b}=this;return qt("svg:g",o).call(Ie,this,r,o).call(Te,this,{y:f&&l},0,me).call(v=>v.selectAll().data(e).enter().append("line").call(Re,this).attr("x1",s&&!ir(a)?w=>s[w]+_:m+_).attr("x2",u&&!ir(a)?a.bandwidth?w=>u[w]+a.bandwidth()-b:w=>u[w]-b:c-d-b).attr("y1",f?w=>f[w]:(p+h-g)/2).attr("y2",f?w=>f[w]:(p+h-g)/2).call(An,this,i).call(Nl,this,i,o)).node()}}function Dl(t,e){let{x:n=oe,y:i,y1:r,y2:o,...a}=t2(e);return[r,o]=i2(i,r,o),new Z7(t,{...a,x:n,y1:r,y2:o})}function n2(t,e){let{y:n=oe,x:i,x1:r,x2:o,...a}=G7(e);return[r,o]=i2(i,r,o),new K7(t,{...a,y:n,x1:r,x2:o})}function i2(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Du(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const Q7={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},r2="­";class Fu extends ue{constructor(e,n={}){const{x:i,y:r,text:o=Jn(e)&&sg(e)?oe:wl,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:f=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:c,monospace:h,fontFamily:p=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:g,fontWeight:_,rotate:b}=n,[v,w]=fe(b,0),[k,x]=r9(d);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:k,optional:!0},rotate:{value:T4(v),optional:!0},text:{value:o,filter:au,optional:!0}},n,Q7),this.rotate=w,this.textAnchor=ne(l,"middle"),this.lineAnchor=Xe(f,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=o2(c),this.monospace=!!h,this.fontFamily=le(p),this.fontSize=x,this.fontStyle=le(m),this.fontVariant=le(g),this.fontWeight=le(_),this.frameAnchor=Ml(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=l2(this),this.clipLine=f2(this)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,rotate:u,text:c,title:h,fontSize:p}=i,{rotate:d}=this,[m,g]=Mo(this,r);return qt("svg:g",o).call(Ie,this,r,o).call(a2,this,c,r).call(Te,this,{x:f&&a,y:s&&l}).call(_=>_.selectAll().data(e).enter().append("text").call(Re,this).call(J7,this,c,h).attr("transform",Du`translate(${f?b=>f[b]:m},${s?b=>s[b]:g})${u?b=>` rotate(${u[b]})`:d?` rotate(${d})`:""}`).call(bt,"font-size",p&&(b=>p[b])).call(An,this,i)).node()}}function o2(t){return t==null?null:Xe(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function J7(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:l,clipLine:f}=e;t.each(function(s){const u=l(vi(n[s])??"").map(f),c=u.length,h=r==="top"?.71:r==="bottom"?1-c:(164-c*100)/200;if(c>1){let p=0;for(let d=0;d<c;++d){if(++p,!u[d])continue;const m=this.ownerDocument.createElementNS(Hi.svg,"tspan");m.setAttribute("x",0),d===p-1?m.setAttribute("y",`${(h+d)*o}em`):m.setAttribute("dy",`${p*o}em`),m.textContent=u[d],this.appendChild(m),p=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const p=this.ownerDocument.createElementNS(Hi.svg,"title");p.textContent=n[s],this.appendChild(p)}})}function Fl(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=xl(e,n)),new Fu(t,{...i,x:e,y:n})}function t9(t,{x:e=oe,...n}={}){return new Fu(t,j7({...n,x:e}))}function e9(t,{y:e=oe,...n}={}){return new Fu(t,X7({...n,y:e}))}function a2(t,e,n){bt(t,"text-anchor",e.textAnchor),bt(t,"font-family",e.fontFamily),bt(t,"font-size",e.fontSize),bt(t,"font-style",e.fontStyle),bt(t,"font-variant",e.fontVariant===void 0?n9(n):e.fontVariant),bt(t,"font-weight",e.fontWeight)}function n9(t){return t&&(A4(t)||ve(t))?"tabular-nums":void 0}const i9=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function r9(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),i9.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function o9(t,e,n){const i=[];let r,o=0;for(const[a,l,f]of a9(t)){if(r===void 0&&(r=a),o>r&&n(t,r,l)>e&&(i.push(t.slice(r,o)+(t[o-1]===r2?"-":"")),r=a),f){i.push(t.slice(r,l)),r=void 0;continue}o=l}return i}function*a9(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case r2:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Ph={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Lu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=cr(t,r))i+=Ph[t[r]]??(u2(t,r)?120:Ph.e);return i}function Iu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=cr(t,r))i+=u2(t,r)?126:63;return i}function l2({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?Iu:Lu,r=e*100;return o=>o9(o,r,i)}function f2({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?Iu:Lu,r=e*100;switch(n){case"clip-start":return o=>Uh(o,r,i,"");case"clip-end":return o=>Oh(o,r,i,"");case"ellipsis-start":return o=>Uh(o,r,i,Bi);case"ellipsis-middle":return o=>l9(o,r,i,Bi);case"ellipsis-end":return o=>Oh(o,r,i,Bi)}}const Bi="…";function rr(t,e,n,i){const r=[];let o=0;for(let a=0,l=0,f=t.length;a<f;a=l){l=cr(t,a);const s=n(t,a,l);if(o+s>e){for(o+=i;o>e&&a>0;)l=a,a=r.pop(),o-=n(t,a,l);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function Oh(t,e,n,i){t=t.trim();const r=n(i),[o]=rr(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function l9(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,l]=rr(t,e/2,n,o),[f]=rr(t,r-e/2-l+o,n,-o);return f<0?i:t.slice(0,a).trimEnd()+i+t.slice(cr(t,f)).trimStart()}function Uh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=rr(t,r-e+o,n,-o);return a<0?i:i+t.slice(cr(t,a)).trimStart()}const Cs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,zh=new RegExp("\\p{Extended_Pictographic}","uy");function cr(t,e){return e+=f9(t,e)?2:1,u9(t,e)&&(e=Cs.lastIndex),s9(t,e)?cr(t,e+1):e}function s2(t,e){return t.charCodeAt(e)<128}function f9(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function s9(t,e){return t.charCodeAt(e)===8205}function u9(t,e){return s2(t,e)?!1:(Cs.lastIndex=e,Cs.test(t))}function u2(t,e){return s2(t,e)?!1:(zh.lastIndex=e,zh.test(t))}const c9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},c2=3.5,h9=c2*5,h2={draw(t,e,n){const i=e*n/h9;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},d9={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},p9=new Map([["arrow",h2],["spike",d9]]);function m9(t){return t&&typeof t.draw=="function"}function g9(t){if(m9(t))return t;const e=p9.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class d2 extends ue{constructor(e,n={}){const{x:i,y:r,r:o=c2,length:a,rotate:l,shape:f=h2,anchor:s="middle",frameAnchor:u}=n,[c,h]=fe(a,12),[p,d]=fe(l,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,c9),this.r=+o,this.length=h,this.rotate=d,this.shape=g9(f),this.anchor=Xe(s,"anchor",["start","middle","end"]),this.frameAnchor=Ml(u)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,length:u,rotate:c}=i,{length:h,rotate:p,anchor:d,shape:m,r:g}=this,[_,b]=Mo(this,r);return qt("svg:g",o).call(Ie,this,r,o).call(Te,this,{x:f&&a,y:s&&l}).call(v=>v.selectAll().data(e).enter().append("path").call(Re,this).attr("transform",Du`translate(${f?w=>f[w]:_},${s?w=>s[w]:b})${c?w=>` rotate(${c[w]})`:p?` rotate(${p})`:""}${d==="start"?"":d==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const k=In();return m.draw(k,u[w],g),k}:(()=>{const w=In();return m.draw(w,h,g),w})()).call(An,this,i)).node()}}function b9(t,e={}){const{x:n=oe,...i}=e;return new d2(t,{...i,x:n})}function _9(t,e={}){const{y:n=oe,...i}=e;return new d2(t,{...i,y:n})}function ei(t,e){return arguments.length<2&&!Jn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Ll({anchor:t}={},e){return t===void 0?e[0]:Xe(t,"anchor",e)}function p2(t){return Ll(t,["left","right"])}function m2(t){return Ll(t,["right","left"])}function g2(t){return Ll(t,["bottom","top"])}function b2(t){return Ll(t,["top","bottom"])}function _2(){const[t,e]=ei(...arguments);return w2("y",p2(e),t,e)}function y9(){const[t,e]=ei(...arguments);return w2("fy",m2(e),t,e)}function y2(){const[t,e]=ei(...arguments);return v2("x",g2(e),t,e)}function w9(){const[t,e]=ei(...arguments);return v2("fx",b2(e),t,e)}function w2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="y"?6:0,tickPadding:m,tickRotate:g,x:_,margin:b,marginTop:v=b===void 0?20:b,marginRight:w=b===void 0?e==="right"?40:0:b,marginBottom:k=b===void 0?20:b,marginLeft:x=b===void 0?e==="left"?40:0:b,label:S,labelAnchor:T,labelArrow:A,labelOffset:F,...C}){return d=Nt(d),m=Nt(m),g=Nt(g),T!==void 0&&(T=Xe(T,"labelAnchor",["center","top","bottom"])),A=A2(A),qg(d&&!de(o)?v9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:g,x:_,...C}):null,de(f)?null:k9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:g,x:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...C}),!de(f)&&S!==null?Fl([],S2({fill:f,fillOpacity:s,...C},function(L,R,W,$,B){const z=$[t],{marginTop:Q,marginRight:j,marginBottom:G,marginLeft:O}=t==="y"&&B.inset||B,Y=T??(z.bandwidth?"center":"top"),J=F??(e==="right"?j:O)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${e}`,this.rotate=0),this.dy=Y==="top"?3-Q:Y==="bottom"?G-3:0,this.dx=e==="right"?J:-J,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[$2(t,z,{anchor:e,label:S,labelAnchor:Y,labelArrow:A})]}}}})):null)}function v2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="x"?6:0,tickPadding:m,tickRotate:g,y:_,margin:b,marginTop:v=b===void 0?e==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:k=b===void 0?e==="bottom"?30:0:b,marginLeft:x=b===void 0?20:b,label:S,labelAnchor:T,labelArrow:A,labelOffset:F,...C}){return d=Nt(d),m=Nt(m),g=Nt(g),T!==void 0&&(T=Xe(T,"labelAnchor",["center","left","right"])),A=A2(A),qg(d&&!de(o)?x9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:g,y:_,...C}):null,de(f)?null:M9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:g,y:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...C}),!de(f)&&S!==null?Fl([],S2({fill:f,fillOpacity:s,...C},function(L,R,W,$,B){const z=$[t],{marginTop:Q,marginRight:j,marginBottom:G,marginLeft:O}=t==="x"&&B.inset||B,Y=T??(z.bandwidth?"center":"right"),J=F??(e==="top"?Q:G)-3;return Y==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-J:J,this.dx=Y==="right"?j-3:Y==="left"?3-O:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[$2(t,z,{anchor:e,label:S,labelAnchor:Y,labelArrow:A})]}}}})):null)}function v9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetLeft:u=s,insetRight:c=s,dx:h=0,y:p=t==="y"?void 0:null,...d}){return hr(_9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:l,y:p,...d,dx:e==="left"?+h-me+ +u:+h+me-c,anchor:"start",length:f,shape:e==="left"?D9:F9})}function x9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetTop:u=s,insetBottom:c=s,dy:h=0,x:p=t==="x"?void 0:null,...d}){return hr(b9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:l,x:p,...d,dy:e==="bottom"?+h-me-c:+h+me+ +u,anchor:"start",length:f,shape:e==="bottom"?E9:N9})}function k9(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Gg):0),text:f,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:c,inset:h=0,insetLeft:p=h,insetRight:d=h,dx:m=0,y:g=t==="y"?void 0:null,..._}){return hr(e9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,y:g,..._,dx:e==="left"?+m-o-l+ +p:+m+ +o+ +l-d},function(b,v,w,k,x){c===void 0&&(this.fontVariant=C2(b)),f===void 0&&(x.text=T2(b,v,w,k,e))})}function M9(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Gg):0),text:f,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:c,inset:h=0,insetTop:p=h,insetBottom:d=h,dy:m=0,x:g=t==="x"?void 0:null,..._}){return hr(t9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f===void 0?null:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,x:g,..._,dy:e==="bottom"?+m+ +o+ +l-d:+m-o-l+ +p},function(b,v,w,k,x){c===void 0&&(this.fontVariant=C2(b)),f===void 0&&(x.text=T2(b,v,w,k,e))})}function S9(){const[t,e]=ei(...arguments);return x2("y",p2(e),t,e)}function T9(){const[t,e]=ei(...arguments);return x2("fy",m2(e),t,e)}function C9(){const[t,e]=ei(...arguments);return k2("x",g2(e),t,e)}function $9(){const[t,e]=ei(...arguments);return k2("fx",b2(e),t,e)}function x2(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...l}){return hr(n2,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...M2(l)})}function k2(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...l}){return hr(Dl,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...M2(l)})}function M2({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function S2({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u=!1},c){return[,t]=Tn(t),[,e]=fe(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u,initializer:c}}function hr(t,e,n,i,r,o,a){let l;function f(c,h,p,d,m,g){const _=c==null&&(e==="fx"||e==="fy"),{[e]:b}=d;if(!b)throw new Error(`missing scale: ${e}`);const v=b.domain();let{interval:w,ticks:k,tickFormat:x,tickSpacing:S=e==="x"?80:35}=o;if(typeof k=="string"&&E2(b)&&(w=k,k=void 0),k===void 0&&(k=ur(w,b.type)??A9(b,S)),c==null){if(Jn(k))c=Me(k);else if(Ri(k))c=Sf(k,...Ae(v));else if(b.interval){let A=b.interval;if(b.ticks){const[F,C]=Ae(v),L=(C-F)/A[_o];A=fh(A,L/k)??A,c=Sf(A,F,C)}else{c=v;const F=c.length;A=fh(A,F/k)??A,A!==b.interval&&(c=Sf(A,...Ae(c)))}if(A===b.interval){const F=Math.round(c.length/k);F>1&&(c=c.filter((C,L)=>L%F===0))}}else b.ticks?c=b.ticks(k):c=v;if(!b.ticks&&c.length&&c!==v){const A=new Xa(v);c=c.filter(F=>A.has(F)),c.length||Un(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?h=[Cn(c)]:l[e]={scale:e,value:oe}}a==null||a.call(this,b,c,k,x,l);const T=Object.fromEntries(Object.entries(l).map(([A,F])=>[A,{...F,value:Qt(c,F.value)}]));return _&&(h=g.filterFacets(c,T)),{data:c,facets:h,channels:T}}const s=nr(o).initializer,u=t(r,nr({...o,initializer:f},s));return r==null?(l=u.channels,u.channels={}):l={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function A9(t,e){const[n,i]=Ae(t.range());return(i-n)/e}function T2(t,e,n,i,r){return{value:Ru(t,e,n,i,r)}}function Ru(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&ve(e)?c4(t.type,e,r)??vi:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?vi:typeof i=="string"?(ve(t.domain())?go:fr)(i):yo(i)}function Sf(t,e,n){return t.range(e,t.offset(t.floor(n)))}const E9={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},N9={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},D9={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},F9={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function C2(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function $2(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&E2(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!o)return i;if(o===!0){const a=g7(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function A2(t="auto"){return de(t)?!1:typeof t=="boolean"?t:Xe(t,"labelArrow",["auto","up","right","down","left"])}function E2(t){return ve(t.domain())}function Bh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function L9(t,{opacity:e,...n}={}){if(!Ti(t)&&!Bg(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return N2(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",fe(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function I9(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:de(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...l}={},f){const[c,h]=Tn(e),[p,d]=Tn(i),m=Bh(f,c),g=Bh(f,p),_=a*a*Math.PI;return n=fe(n)[1],r=fe(r)[1],o=fe(o)[1],N2(t,l,(b,v,w,k)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",k).attr("fill",c==="color"?x=>m.scale(x):h).attr("fill-opacity",n).attr("stroke",p==="color"?x=>g.scale(x):d).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",x=>{const S=In();return t.scale(x).draw(S,_),S}))}function N2(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=Vg(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:f=a,marginLeft:s=0,className:u,style:c,width:h}=e;const p=Mu(e);u=xu(u),r=Ru(t.scale,t.domain,void 0,r);const d=qt("div",p).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,l,f).call(g=>g.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,l,f).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),d.call(g=>g.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",ne(o,"normal")).call(ku,c).node()}const $s=new Map([["symbol",I9],["color",F2],["opacity",P9]]);function R9(t,e,n={}){return(i,r)=>{if(!$s.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return $s.get(i)(t[i],D2(e,n[i],r),o=>t[o])}}function D2({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return F4(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function F2(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return L9(t,n);case"ramp":return q7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function P9({type:t,interpolate:e,...n},{legend:i=!0,color:r=Vn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return F2({type:t,...n,interpolate:O9(r)},{legend:i,...o})}function O9(t){const{r:e,g:n,b:i}=Vn(t)||Vn(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function U9(t,e,n){const i=[];for(const[r,o]of $s){const a=n[r];if(a!=null&&a.legend&&r in t){const l=o(t[r],D2(e,t[r],a),f=>t[f]);l!=null&&i.push(l)}}return i}const z9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},B9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class q9 extends ue{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:l=i,rx:f,ry:s}=e;super(oa,void 0,e,n==null?z9:B9),this.anchor=og(n,"anchor",["top","right","bottom","left"]),this.insetTop=Nt(r),this.insetRight=Nt(o),this.insetBottom=Nt(a),this.insetLeft=Nt(l),this.rx=Nt(f),this.ry=Nt(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:l,marginBottom:f,marginLeft:s,width:u,height:c}=r,{anchor:h,insetTop:p,insetRight:d,insetBottom:m,insetLeft:g,rx:_,ry:b}=this,v=s+g,w=u-l-d,k=a+p,x=c-f-m;return qt(h?"svg:line":"svg:rect",o).datum(0).call(Ie,this,r,o).call(Re,this).call(An,this,i).call(Te,this,{}).call(h==="left"?S=>S.attr("x1",v).attr("x2",v).attr("y1",k).attr("y2",x):h==="right"?S=>S.attr("x1",w).attr("x2",w).attr("y1",k).attr("y2",x):h==="top"?S=>S.attr("x1",v).attr("x2",w).attr("y1",k).attr("y2",k):h==="bottom"?S=>S.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):S=>S.attr("x",v).attr("y",k).attr("width",w-v).attr("height",x-k).attr("rx",_).attr("ry",b)).node()}}function W9(t){return new q9(t)}const Tf={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},Y9=new Set(["geometry","href","src","ariaLabel","scales"]);class H9 extends ue{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Jn(e)&&sg(e)&&(n={...n,title:oe});const{x:i,y:r,x1:o,x2:a,y1:l,y2:f,anchor:s,preferredAnchor:u="bottom",monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:d,fontVariant:m,fontWeight:g,lineHeight:_=1,lineWidth:b=20,frameAnchor:v,format:w,textAnchor:k="start",textOverflow:x,textPadding:S=8,title:T,pointerSize:A=12,pathFilter:F="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:l!=null&&f!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:f==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:f,scale:"y",optional:l==null},title:{value:T,optional:!0}},n,Tf),this.anchor=vs(s,"anchor"),this.preferredAnchor=vs(u,"preferredAnchor"),this.frameAnchor=Ml(v),this.textAnchor=ne(k,"middle"),this.textPadding=+S,this.pointerSize=+A,this.pathFilter=le(F),this.lineHeight=+_,this.lineWidth=+b,this.textOverflow=o2(x),this.monospace=!!c,this.fontFamily=le(h),this.fontSize=Nt(p),this.fontStyle=le(d),this.fontVariant=le(m),this.fontWeight=le(g);for(const C in Tf)C in this.channels&&(this[C]=Tf[C]);this.splitLines=l2(this),this.clipLine=f2(this),this.format={...w}}render(e,n,i,r,o){const a=this,{x:l,y:f,fx:s,fy:u}=n,{ownerSVGElement:c,document:h}=o,{anchor:p,monospace:d,lineHeight:m,lineWidth:g}=this,{textPadding:_,pointerSize:b,pathFilter:v}=this,{marginTop:w,marginLeft:k}=r,{x1:x,y1:S,x2:T,y2:A,x:F=x??T,y:C=S??A}=i,L=s?s(e.fx)-k:0,R=u?u(e.fy)-w:0,[W,$]=Mo(this,r),B=Yg(i,W),z=Hg(i,$),Q=d?Iu:Lu,j=Q(Bi);let G,O;"title"in i?(G=i.channels,O=K9):(G=Z9.call(this,i,n),O=Q9);const Y=qt("svg:g",o).call(Ie,this,r,o).call(a2,this).call(Te,this,{x:F&&l,y:C&&f}).call(et=>et.selectAll().data(e).enter().append("g").attr("transform",Z=>`translate(${Math.round(B(Z))},${Math.round(z(Z))})`).call(Re,this).call(Z=>Z.append("path").attr("filter",v)).call(Z=>Z.append("text").each(function(q){const N=Fr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const E=O.call(a,q,e,G,n,i);if(typeof E=="string")for(const P of a.splitLines(E))J(N,{value:a.clipLine(P)});else{const P=new Set;for(const tt of E){const{label:U=""}=tt;U&&P.has(U)||(P.add(U),J(N,tt))}}})));function J(et,{label:Z,value:q,color:N,opacity:E}){Z??(Z=""),q??(q="");const P=N!=null||E!=null;let tt,U=g*100;const[dt]=rr(Z,U,Q,j);if(dt>=0)Z=Z.slice(0,dt).trimEnd()+Bi,tt=q.trim(),q="";else{(Z||!q&&!P)&&(q=" "+q);const[mt]=rr(q,U-Q(Z),Q,j);mt>=0&&(tt=q.trim(),q=q.slice(0,mt).trimEnd()+Bi)}const nt=et.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");Z&&nt.append("tspan").attr("font-weight","bold").text(Z),q&&nt.append(()=>h.createTextNode(q)),P&&nt.append("tspan").text(" ■").attr("fill",N).attr("fill-opacity",E).style("user-select","none"),tt&&nt.append("title").text(tt)}function lt(){const{width:et,height:Z}=r.facet??r;Y.selectChildren().each(function(q){let{x:N,width:E,height:P}=this.getBBox();E=Math.round(E),P=Math.round(P);let tt=p;if(tt===void 0){const nt=B(q)+L,mt=z(q)+R,ot=nt+E+b+_*2<et,rt=nt-E-b-_*2>0,Wt=mt+P+b+_*2<Z,zt=mt-P-b-_*2>0;tt=ot&&rt?Wt&&zt?a.preferredAnchor:zt?"bottom":"top":Wt&&zt?ot?"left":"right":(ot||rt)&&(Wt||zt)?`${zt?"bottom":"top"}-${ot?"left":"right"}`:a.preferredAnchor}const U=this.firstChild,dt=this.lastChild;if(U.setAttribute("d",j9(tt,b,_,E,P)),N)for(const nt of dt.childNodes)nt.setAttribute("x",-N);dt.setAttribute("y",`${+G9(tt,dt.childNodes.length,m).toFixed(6)}em`),dt.setAttribute("transform",`translate(${X9(tt,b,_,E,P)})`)}),Y.attr("visibility",null)}return e.length&&(Y.attr("visibility","hidden"),c.isConnected?Promise.resolve().then(lt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(lt)),Y.node()}}function V9(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=xl(e,n)),new H9(t,{...i,x:e,y:n})}function G9(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function X9(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function j9(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function Z9({channels:t},e){var r,o;const n={};let i=this.format;i=qh(i,t,"x"),i=qh(i,t,"y"),this.format=i;for(const a in i){const l=i[a];if(!(l===null||l===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const f=bh(t,a);f&&(n[a]=f)}}for(const a in t){if(a in n||a in i||Y9.has(a))continue;const l=bh(t,a);l&&(n[a]=l)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const l=this.format[a];if(typeof l=="string"){const f=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(ve(f)?go:fr)(l)}else if(l===void 0||l===!0){const f=e[a];this.format[a]=f!=null&&f.bandwidth?Ru(f,f.domain()):vi}}return n}function qh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([l])=>l===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function K9(t,e,{title:n}){return vi(n.value[t],t)}function*Q9(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:Ya(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Yh(i,n,"x"),value:Wh(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Yh(i,n,"y"),value:Wh(this.format.y2,n.y1,a,t)};else{const l=a.value[t],f=a.scale;if(!Xn(l)&&f==null)continue;yield{label:Ya(i,n,o),value:this.format[o](l,t),color:f==="color"?r[o][t]:null,opacity:f==="opacity"?r[o][t]:null}}}}function Wh(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}–${t(n.value[i],i)}`}function Yh(t,e,n){const i=Ya(t,e,`${n}1`,n),r=Ya(t,e,`${n}2`,n);return i===r?i:`${i}–${r}`}function Ya(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function Pe(t={}){var j;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:l}=t,f=xu(t.className),s=t.marks===void 0?[]:Vh(t.marks);s.push(...ax(s));const u=rx(e,t),c=new Map;for(const G of s){const O=Gh(G,u,t);O&&c.set(G,O)}const h=new Map;u&&xr(h,[u],t),xr(h,c,t);const p=Vh(lx(s,h,t));for(const G of p){const O=Gh(G,u,t);O&&c.set(G,O)}s.unshift(...p);let d=T7(h,t);if(d!==void 0){const G=u?xf(d,u):void 0;for(const Y of s){if(Y.facet===null||Y.facet==="super")continue;const J=c.get(Y);J!==void 0&&(J.facetsIndex=Y.fx!=null||Y.fy!=null?xf(d,J):G)}const O=new Set;for(const{facetsIndex:Y}of c.values())Y==null||Y.forEach((J,lt)=>{(J==null?void 0:J.length)>0&&O.add(lt)});d.forEach(0<O.size&&O.size<d.length?(Y,J)=>Y.empty=!O.has(J):Y=>Y.empty=!1);for(const Y of s)if(Y.facet==="exclude"){const J=c.get(Y);J!==void 0&&(J.facetsIndex=A7(J.facetsIndex))}}for(const G of It.keys())ys(t[G])&&G!=="fx"&&G!=="fy"&&h.set(G,[]);const m=new Map;for(const G of s){if(m.has(G))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:O,channels:Y}=c.get(G)??{},{data:J,facets:lt,channels:et}=G.initialize(O,Y,t);Pu(et,t),m.set(G,{data:J,facets:lt,channels:et})}const g=Ss(xr(h,m,t),t),_=M7(g,s,t);p7(g,_);const b=Th(g),{fx:v,fy:w}=b,k=v||w?Og(g,_):_,x=v||w?px(b,_):_,S=Mu(t),T=S.document,A=Qa("svg").call(T.documentElement);let F=A;S.ownerSVGElement=A,S.className=f,S.projection=T8(t,k),S.filterFacets=(G,O)=>xf(d,{channels:O,groups:Au(G,O)}),S.getMarkState=G=>{const O=m.get(G),Y=c.get(G);return{...O,channels:{...O.channels,...Y==null?void 0:Y.channels}}},S.dispatchValue=G=>{F.value!==G&&(F.value=G,F.dispatchEvent(new Event("input",{bubbles:!0})))};const C=new Set;for(const[G,O]of m)if(G.initializer!=null){const Y=G.facet==="super"?x:k,J=G.initializer(O.data,O.facets,O.channels,b,Y,S);if(J.data!==void 0&&(O.data=J.data),J.facets!==void 0&&(O.facets=J.facets),J.channels!==void 0){const{fx:lt,fy:et,...Z}=J.channels;ix(Z),Object.assign(O.channels,Z);for(const q of Object.values(Z)){const{scale:N}=q;N!=null&&!I4(It.get(N))&&(L2(q,t),C.add(N))}(lt!=null||et!=null)&&c.set(G,!0)}}if(C.size){const G=new Map;xr(G,m,t,lt=>C.has(lt)),xr(h,m,t,lt=>C.has(lt));const O=dx(Ss(G,t),g),{scales:Y,...J}=Th(O);Object.assign(g,O),Object.assign(b,J),Object.assign(b.scales,Y)}let L,R;d!==void 0&&(L={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},d=C7(d,L),R=$7(v,w,_));for(const[G,O]of m)O.values=G.scale(O.channels,b,S);const{width:W,height:$}=_;Fr(A).attr("class",f).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",W).attr("height",$).attr("viewBox",`0 0 ${W} ${$}`).attr("aria-label",a).attr("aria-description",l).call(G=>G.append("style").text(`:where(.${f}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${f} text),
:where(.${f} tspan) {
  white-space: pre;
}`)).call(ku,n);for(const G of s){const{channels:O,values:Y,facets:J}=m.get(G);if(d===void 0||G.facet==="super"){let lt=null;if(J&&(lt=J[0],lt=G.filter(lt,O,Y),lt.length===0))continue;const et=G.render(lt,b,Y,x,S);if(et==null)continue;A.appendChild(et)}else{let lt;for(const et of d){if(!(((j=G.facetAnchor)==null?void 0:j.call(G,d,L,et))??!et.empty))continue;let Z=null;if(J){const N=c.has(G);if(Z=J[N?et.i:0],Z=G.filter(Z,O,Y),Z.length===0)continue;!N&&Z===J[0]&&(Z=x4(Z)),Z.fx=et.x,Z.fy=et.y,Z.fi=et.i}const q=G.render(Z,b,Y,k,S);if(q!=null){(lt??(lt=Fr(A).append("g"))).append(()=>q).datum(et);for(const N of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(N)&&(lt.attr(N,q.getAttribute(N)),q.removeAttribute(N))}}lt==null||lt.selectChildren().attr("transform",R)}}const B=U9(g,S,t),{figure:z=i!=null||r!=null||o!=null||B.length>0}=t;z&&(F=T.createElement("figure"),F.className=`${f}-figure`,F.style.maxWidth="initial",i!=null&&F.append(Hh(T,i,"h2")),r!=null&&F.append(Hh(T,r,"h3")),F.append(...B,A),o!=null&&F.append(J9(T,o))),F.scale=x7(b.scales),F.legend=R9(g,S,t);const Q=p8();return Q>0&&Fr(A).append("text").attr("x",W).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${Q.toLocaleString("en-US")} warning${Q===1?"":"s"}. Please check the console.`),F}function Hh(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function J9(t,e){const n=t.createElement("figcaption");return n.append(e),n}function tx({marks:t=[],...e}={}){return Pe({...e,marks:[...t,this]})}ue.prototype.plot=tx;function Vh(t){return t.flat(1/0).filter(e=>e!=null).map(ex)}function ex(t){return typeof t.render=="function"?t:new nx(t)}class nx extends ue{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Pu(t,e){for(const n in t)L2(t[n],e);return t}function L2(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:l=o?f=>f*100:fg(a,r)}=e[n]??{};l!=null&&(t.value=Ht(t.value,l),t.transform=!1)}function ix(t){for(const e in t)bg(e,t[e])}function xr(t,e,n,i=g4){var r,o;for(const{channels:a}of e.values())for(const l in a){const f=a[l],{scale:s}=f;if(s!=null&&i(s))if(s==="projection"){if(!E8(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,c=((o=n.y)==null?void 0:o.domain)===void 0;if(u||c){const[h,p]=D8(f);u&&Cf(t,"x",h),c&&Cf(t,"y",p)}}}else Cf(t,s,f)}return t}function Cf(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function rx(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=Me(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Qr(r,{value:n,scale:"fx"})),i!=null&&(o.fy=Qr(r,{value:i,scale:"fy"})),Pu(o,e);const a=Au(r,o);return{channels:o,groups:a,data:t.data}}function Gh(t,e,n){var f;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=Me(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=Qr(s,{value:i,scale:"fx"})),r!=null&&(u.fy=Qr(s,{value:r,scale:"fy"})),Pu(u,n),{channels:u,groups:Au(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:o,groups:a};l.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((f=Me(t.data))==null?void 0:f.length)===l.length&&Un(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function ox(t,e={}){return nr({...e,x:null,y:null},(n,i,r,o,a,l)=>l.getMarkState(t))}function ax(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?B7:/^y$/i.test(r)?Lh:z7,i=r(ox(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===Lh?"left":"bottom");const a=V9(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function lx(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:l={},axis:f,grid:s,facet:u={},facet:{axis:c=f,grid:h}=u,x:{axis:p=f,grid:d=p===null?null:s}=r,y:{axis:m=f,grid:g=m===null?null:s}=o,fx:{axis:_=c,grid:b=_===null?null:h}=a,fy:{axis:v=c,grid:w=v===null?null:h}=l}=n;(i||!ys(r)&&!Xh("x",t))&&(p=d=null),(i||!ys(o)&&!Xh("y",t))&&(m=g=null),e.has("fx")||(_=b=null),e.has("fy")||(v=w=null),p===void 0&&(p=!jo(t,"x")),m===void 0&&(m=!jo(t,"y")),_===void 0&&(_=!jo(t,"fx")),v===void 0&&(v=!jo(t,"fy")),p===!0&&(p="bottom"),m===!0&&(m="left"),_===!0&&(_=p==="top"||p===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const k=[];return Xo(k,w,T9,l),Go(k,v,y9,"right","left",u,l),Xo(k,b,$9,a),Go(k,_,w9,"top","bottom",u,a),Xo(k,g,S9,o),Go(k,m,_2,"left","right",n,o),Xo(k,d,C9,r),Go(k,p,y2,"bottom","top",n,r),k}function Go(t,e,n,i,r,o,a){if(!e)return;const l=fx(e);a=sx(l?i:e,o,a);const{line:f}=a;(n===_2||n===y2)&&f&&!Kr(f)&&t.push(W9(ux(a))),t.push(n(a)),l&&t.push(n({...a,anchor:r,label:null}))}function Xo(t,e,n,i){!e||Kr(e)||t.push(n(cx(e,i)))}function fx(t){return/^\s*both\s*$/i.test(t)}function sx(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h=e.label,labelAnchor:p,labelArrow:d=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h,labelAnchor:p,labelArrow:d,labelOffset:m}}function ux(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function cx(t,{stroke:e=kl(t)?t:void 0,ticks:n=hx(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function hx(t){switch(typeof t){case"number":return!0;case"string":return!kl(t)}return Jn(t)||typeof(t==null?void 0:t.range)=="function"}function jo(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Xh(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function dx(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function px({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=$u(n),s=t&&jh(t),u=e&&jh(e);return{marginTop:e?u[0]:i,marginRight:t?l-s[1]:r,marginBottom:e?f-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:f}}function jh(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const mx=new Map([["basis",q5],["basis-closed",W5],["basis-open",Y5],["bundle",H5],["bump-x",N5],["bump-y",D5],["cardinal",V5],["cardinal-closed",G5],["cardinal-open",X5],["catmull-rom",j5],["catmull-rom-closed",Z5],["catmull-rom-open",K5],["linear",bo],["linear-closed",Q5],["monotone-x",J5],["monotone-y",t4],["natural",e4],["step",n4],["step-after",r4],["step-before",i4]]);function I2(t=bo,e){if(typeof t=="function")return t;const n=mx.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function R2(t=or,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?or:I2(t,e)}function or(t){return bo(t)}function gx(t={y:"count"},e={}){[t,e]=yx(t,e);const{x:n,y:i}=e;return _x(wx(n,e,oe),null,null,i,t,Nu(e))}function bx(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=vu}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function P2(t={}){return bx(gx,"y",El(t,"x"))}function _x(t,e,n,i,{data:r=gg,filter:o=Wa,sort:a,reverse:l,...f}={},s={}){t=Zh(t),e=Zh(e),f=xx(f,s),r=z2(r,oe),a=a==null?void 0:O2("sort",a,s),o=o==null?void 0:U2("filter",o,s),n!=null&&Wo(f,"x","x1","x2")&&(n=null),i!=null&&Wo(f,"y","y1","y2")&&(i=null);const[u,c]=mn(t),[h,p]=mn(t),[d,m]=mn(e),[g,_]=mn(e),[b,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,k]=mn(b),{x,y:S,z:T,fill:A,stroke:F,x1:C,x2:L,y1:R,y2:W,domain:$,cumulative:B,thresholds:z,interval:Q,...j}=s,[G,O]=mn(T),[Y]=Tn(A),[J]=Tn(F),[lt,et]=mn(Y),[Z,q]=mn(J);return{..."z"in s&&{z:G||T},..."fill"in s&&{fill:lt||A},..."stroke"in s&&{stroke:Z||F},...Tl(j,(N,E,P)=>{const tt=lg(Qt(N,b),P==null?void 0:P[v]),U=Qt(N,T),dt=Qt(N,Y),nt=Qt(N,J),mt=j4(f,{z:U,fill:dt,stroke:nt}),ot=[],rt=[],Wt=tt&&k([]),zt=U&&O([]),vt=dt&&et([]),Ut=nt&&q([]),Et=t&&c([]),Bt=t&&p([]),st=e&&m([]),St=e&&_([]),Yt=Sx(t,e,N);let $o=0;for(const un of f)un.initialize(N);a&&a.initialize(N),o&&o.initialize(N);for(const un of E){const dr=[];for(const pt of f)pt.scope("facet",un);a&&a.scope("facet",un),o&&o.scope("facet",un);for(const[pt,je]of dh(un,mt))for(const[J2,Ao]of dh(je,tt))for(const[Ze,ni]of Yt(Ao))if(!(o&&!o.reduce(Ze,ni))){dr.push($o++),rt.push(r.reduceIndex(Ze,N,ni)),tt&&Wt.push(J2),U&&zt.push(mt===U?pt:U[(Ze.length>0?Ze:Ao)[0]]),dt&&vt.push(mt===dt?pt:dt[(Ze.length>0?Ze:Ao)[0]]),nt&&Ut.push(mt===nt?pt:nt[(Ze.length>0?Ze:Ao)[0]]),Et&&(Et.push(ni.x1),Bt.push(ni.x2)),st&&(st.push(ni.y1),St.push(ni.y2));for(const tb of f)tb.reduce(Ze,ni);a&&a.reduce(Ze)}ot.push(dr)}return Z4(ot,a,l),{data:rt,facets:ot}}),...!Wo(f,"x")&&(u?{x1:u,x2:h,x:ws(u,h)}:{x,x1:C,x2:L}),...!Wo(f,"y")&&(d?{y1:d,y2:g,y:ws(d,g)}:{y:S,y1:R,y2:W}),...w&&{[v]:w},...Object.fromEntries(f.map(({name:N,output:E})=>[N,E]))}}function yx({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function wx(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...wo(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=vx(t.thresholds,t.interval),t}function Zh(t){if(t==null)return;const{value:e,cumulative:n,domain:i=Ae,thresholds:r}=t,o=a=>{let l=Qt(a,e),f;if(ve(l)||Mx(r)){l=Ht(l,rg,Float64Array);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Ri(r)?r(l,u,c):r;typeof h=="number"&&(h=np(u,c,h)),Ri(h)&&(i===Ae&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c))),f=h}else{l=tn(l);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Ri(r)?r(l,u,c):r;if(typeof h=="number")if(i===Ae){let p=ca(u,c,h);if(isFinite(p))if(p>0){let d=Math.round(u/p),m=Math.round(c/p);d*p<=u||--d,m*p>c||++m;let g=m-d+1;h=new Float64Array(g);for(let _=0;_<g;++_)h[_]=(d+_)*p}else if(p<0){p=-p;let d=Math.round(u*p),m=Math.round(c*p);d/p<=u||--d,m/p>c||++m;let g=m-d+1;h=new Float64Array(g);for(let _=0;_<g;++_)h[_]=(d+_)/p}else h=[u];else h=[u]}else h=zr(u,c,h);else Ri(h)&&(i===Ae&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c)));f=h}const s=[];if(f.length===1)s.push([f[0],f[0]]);else for(let u=1;u<f.length;++u)s.push([f[u-1],f[u]]);return s.bin=(n<0?Cx:n>0?Tx:Ou)(s,f,l),s};return o.label=Si(e),o}function vx(t,e,n=Kh){if(t===void 0)return e===void 0?n:ur(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return Kb;case"scott":return p0;case"sturges":return Gb;case"auto":return Kh}return uu(t)}return t}function xx(t,e){return V4(t,e,O2)}function O2(t,e,n){return pg(t,e,n,U2)}function U2(t,e,n){return mg(t,e,n,z2)}function z2(t,e){return wu(t,e,kx)}function kx(t){switch(`${t}`.toLowerCase()){case"x":return $x;case"x1":return Ex;case"x2":return Nx;case"y":return Ax;case"y1":return Dx;case"y2":return Fx}throw new Error(`invalid bin reduce: ${t}`)}function Kh(t,e,n){return Math.min(200,p0(t,e,n))}function Mx(t){return S4(t)||Jn(t)&&ve(t)}function Sx(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries()){const u=r.bin(a[l]);for(const[c,[h,p]]of r.entries())yield[u[c],{data:n,x1:f,y1:h,x2:s,y2:p}]}}:i?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries())yield[a[l],{data:n,x1:f,x2:s}]}:function*(o){const a=r.bin(o);for(const[l,[f,s]]of r.entries())yield[a[l],{data:n,y1:f,y2:s}]}}function Ou(t,e,n){return e=tn(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[Ga(e,n[a])-1])==null||o.push(a);return r}}function Tx(t,e,n){const i=Ou(t,e,n);return r=>{const o=i(r);for(let a=1,l=o.length;a<l;++a){const f=o[a-1],s=o[a];for(const u of f)s.push(u)}return o}}function Cx(t,e,n){const i=Ou(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const l=o[a+1],f=o[a];for(const s of l)f.push(s)}return o}}function B2(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const $x={reduceIndex(t,e,{x1:n,x2:i}){return B2(n,i)}},Ax={reduceIndex(t,e,{y1:n,y2:i}){return B2(n,i)}},Ex={reduceIndex(t,e,{x1:n}){return n}},Nx={reduceIndex(t,e,{x2:n}){return n}},Dx={reduceIndex(t,e,{y1:n}){return n}},Fx={reduceIndex(t,e,{y2:n}){return n}};function q2(t={}){return ag(t)?t:{...t,y:oe}}function Lx(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const l of e)for(const f of l)i[f]&&++r,i[f]=1;if(r===0)return{data:t,facets:e};t=Zr(t);const o=t[ng]=new Uint32Array(n+r);e=e.map(l=>Zr(l,Uint32Array));let a=n;i.fill(0);for(const l of e)for(let f=0,s=l.length;f<s;++f){const u=l[f];i[u]?(l[f]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function Ix(t={},e={}){arguments.length===1&&([t,e]=Rx(t));const{x1:n,x:i=n,y:r,...o}=e,[a,l,f,s]=Ox(i,r,"x","y",t,o);return{...a,x1:n,x:l,y1:f,y2:s,y:ws(f,s)}}function W2({y:t,y1:e,y2:n,...i}={}){return i=El(i,"x"),e===void 0&&n===void 0?Ix({y:t,...i}):([e,n]=v4(t,e,n),{...i,y1:e,y2:n})}function Rx(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const Px={length:!0};function Ox(t,e=m4,n,i,{offset:r,order:o,reverse:a},l){if(e===null)throw new Error(`stack requires ${i}`);const f=du(l),[s,u]=mn(t),[c,h]=qa(e),[p,d]=qa(e);return c.hint=p.hint=Px,r=Ux(r),o=qx(o,r,i),[Tl(l,(m,g,_)=>{({data:m,facets:g}=Lx(m,g));const b=t==null?void 0:u(lg(Qt(m,t),_==null?void 0:_[n])),v=Qt(m,e,Float64Array),w=Qt(m,f),k=o&&o(m,b,v,w),x=m.length,S=h(new Float64Array(x)),T=d(new Float64Array(x)),A=[];for(const F of g){const C=b?Array.from(ja(F,L=>b[L]).values()):[F];if(k)for(const L of C)L.sort(k);for(const L of C){let R=0,W=0;a&&L.reverse();for(const $ of L){const B=v[$];B<0?R=T[$]=(S[$]=R)+B:B>0?W=T[$]=(S[$]=W)+B:T[$]=S[$]=W}}A.push(C)}return r&&r(A,S,T,w),{data:m,facets:g}}),s,c,p]}function Ux(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return zx;case"center":case"silhouette":return Bx;case"wiggle":return H2}throw new Error(`unknown offset: ${t}`)}}function Y2(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function zx(t,e,n){for(const i of t)for(const r of i){const[o,a]=Y2(r,n);for(const l of r){const f=1/(a-o||1);e[l]=f*(e[l]-o),n[l]=f*(n[l]-o)}}}function Bx(t,e,n){for(const i of t){for(const r of i){const[o,a]=Y2(r,n);for(const l of r){const f=(a+o)/2;e[l]-=f,n[l]-=f}}V2(i,e,n)}G2(t,e,n)}function H2(t,e,n,i){for(const r of t){const o=new di;let a=0;for(const l of r){let f=-1;const s=l.map(p=>Math.abs(n[p]-e[p])),u=l.map(p=>{f=i?i[p]:++f;const d=n[p]-e[p],m=o.has(f)?d-o.get(f):0;return o.set(f,d),m}),c=[0,...Bb(u)];for(const p of l)e[p]+=a,n[p]+=a;const h=Hn(s);h&&(a-=Hn(s,(p,d)=>(u[d]/2+c[d])*p)/h)}V2(r,e,n)}G2(t,e,n)}function V2(t,e,n){const i=xn(t,r=>xn(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function G2(t,e,n){const i=t.length;if(i===1)return;const r=t.map(l=>l.flat()),o=r.map(l=>(xn(l,f=>e[f])+ye(l,f=>n[f]))/2),a=xn(o);for(let l=0;l<i;l++){const f=a-o[l];for(const s of r[l])e[s]+=f,n[s]+=f}}function qx(t,e,n){if(t===void 0&&e===H2)return Qh(He);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Ba:He;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return Wx(r);case"z":return Yx(r);case"sum":return Hx(r);case"appearance":return Vx(r);case"inside-out":return Qh(r)}return Jh(ig(t))}if(typeof t=="function")return(t.length===1?Jh:Gx)(t);if(Array.isArray(t))return Xx(t);throw new Error(`invalid order: ${t}`)}}function Wx(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function Yx(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function Hx(t){return Il(t,(e,n,i,r)=>Fs(Cn(e),o=>Hn(o,a=>i[a]),o=>r[o]))}function Vx(t){return Il(t,(e,n,i,r)=>Fs(Cn(e),o=>n[d0(o,a=>i[a])],o=>r[o]))}function Qh(t){return Il(t,(e,n,i,r)=>{const o=Cn(e),a=Fs(o,c=>n[d0(c,h=>i[h])],c=>r[c]),l=Oi(o,c=>Hn(c,h=>i[h]),c=>r[c]),f=[],s=[];let u=0;for(const c of a)u<0?(u+=l.get(c),f.push(c)):(u-=l.get(c),s.push(c));return s.reverse().concat(f)})}function Jh(t){return e=>{const n=Qt(e,t);return(i,r)=>He(n[i],n[r])}}function Gx(t){return e=>(n,i)=>t(e[n],e[i])}function Xx(t){return Il(He,()=>t)}function Il(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new di(e(n,i,r,o).map((l,f)=>[l,f]));return(l,f)=>t(a.get(o[l]),a.get(o[f]))}}const jx={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Zx extends ue{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,z:l,curve:f,tension:s}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:du(n),optional:!0}},n,jx),this.z=l,this.curve=I2(f,s)}filter(e){return e}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i;return qt("svg:g",o).call(Ie,this,r,o).call(Te,this,n,0,0).call(u=>u.selectAll().data(vg(e,[a,l,f,s],this,i)).enter().append("path").call(Re,this).call(wg,this,i).attr("d",E5().curve(this.curve).defined(c=>c>=0).x0(c=>a[c]).y0(c=>l[c]).x1(c=>f[c]).y1(c=>s[c]))).node()}}function Kx(t,e){const{x:n=wl,...i}=P2(e);return new Zx(t,W2(q2({...i,x1:n,x2:void 0})))}const Qx={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Jx extends ue{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:l,tension:f}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,Qx),this.curve=R2(l,f),Co(this,n)}project(e,n,i){this.curve!==or&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i,{curve:u}=this;return qt("svg:g",o).call(Ie,this,r,o).call(Te,this,n).call(c=>c.selectAll().data(e).enter().append("path").call(Re,this).attr("d",u===or&&o.projection?tk(o.projection,a,l,f,s):h=>{const p=In(),d=u(p);return d.lineStart(),d.point(a[h],l[h]),d.point(f[h],s[h]),d.lineEnd(),p}).call(An,this,i).call(Nl,this,i,o)).node()}}function tk(t,e,n,i,r){const o=rl(t);return e=tn(e),n=tn(n),i=tn(i),r=tn(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Uu(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...l}={}){return[n,i]=td(e,n,i),[o,a]=td(r,o,a),new Jx(t,{...l,x1:n,x2:i,y1:o,y2:a})}function td(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class X2 extends ue{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:l=o,insetBottom:f=o,insetLeft:s=o,rx:u,ry:c}=i;this.insetTop=Nt(a),this.insetRight=Nt(l),this.insetBottom=Nt(f),this.insetLeft=Nt(s),this.rx=ne(u,"auto"),this.ry=ne(c,"auto")}render(e,n,i,r,o){const{rx:a,ry:l}=this;return qt("svg:g",o).call(Ie,this,r,o).call(this._transform,this,n).call(f=>f.selectAll().data(e).enter().append("rect").call(Re,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(bt,"rx",a).call(bt,"ry",l).call(An,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}}const ek={ariaLabel:"bar"};class nk extends X2{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,ek)}_transform(e,n,{y:i}){e.call(Te,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return ir(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:l,insetBottom:f}=this;return ir(e)?a-r-o-l-f:s=>Math.max(0,Math.abs(i[s]-n[s])-l-f)}}function ik(t,e={}){return w4(e)||(e={...e,x:wl,y2:oe}),new nk(t,W2(t2(q2(e))))}const rk={ariaLabel:"cell"};class ok extends X2{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,rk)}_transform(e,n){e.call(Te,n,{},0,0)}}function ak(t,{x:e,y:n,...i}={}){return[e,n]=xl(e,n),new ok(t,{...i,x:e,y:n})}const lk={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function fk(t){return t.sort===void 0&&t.reverse===void 0?W4({channel:"-r"},t):t}class sk extends ue{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:l=Xr,frameAnchor:f}=n,[s,u]=fe(a,0),[c,h]=B4(l),[p,d]=fe(o,c==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:_l,optional:!0},rotate:{value:s,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},fk(n),lk),this.r=d,this.rotate=u,this.symbol=h,this.frameAnchor=Ml(f);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:_,stroke:b}=m;g.hint={fill:_?_.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,r:u,rotate:c,symbol:h}=i,{r:p,rotate:d,symbol:m}=this,[g,_]=Mo(this,r),b=m===Xr,v=u?void 0:p*p*Math.PI;return lu(p)&&(e=[]),qt("svg:g",o).call(Ie,this,r,o).call(Te,this,{x:f&&a,y:s&&l}).call(w=>w.selectAll().data(e).enter().append(b?"circle":"path").call(Re,this).call(b?k=>{k.attr("cx",f?x=>f[x]:g).attr("cy",s?x=>s[x]:_).attr("r",u?x=>u[x]:p)}:k=>{k.attr("transform",Du`translate(${f?x=>f[x]:g},${s?x=>s[x]:_})${c?x=>` rotate(${c[x]})`:d?` rotate(${d})`:""}`).attr("d",u&&h?x=>{const S=In();return h[x].draw(S,u[x]*u[x]*Math.PI),S}:u?x=>{const S=In();return m.draw(S,u[x]*u[x]*Math.PI),S}:h?x=>{const S=In();return h[x].draw(S,v),S}:(()=>{const x=In();return m.draw(x,v),x})())}).call(An,this,i)).node()}}function to(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=xl(e,n)),new sk(t,{...i,x:e,y:n})}const uk={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ck extends ue{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:l}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:du(n),optional:!0}},n,uk),this.z=o,this.curve=R2(a,l),Co(this,n)}filter(e){return e}project(e,n,i){this.curve!==or&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:l}=i,{curve:f}=this;return qt("svg:g",o).call(Ie,this,r,o).call(Te,this,n).call(s=>s.selectAll().data(vg(e,[a,l],this,i)).enter().append("path").call(Re,this).call(wg,this,i).call(V7,this,i,o).attr("d",f===or&&o.projection?hk(o.projection,a,l):Mm().curve(f).defined(u=>u>=0).x(u=>a[u]).y(u=>l[u]))).node()}}function hk(t,e,n){const i=rl(t);return e=tn(e),n=tn(n),r=>{let o=[];const a=[o];for(const l of r)l===-1?(o=[],a.push(o)):o.push([e[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function dk(t,{x:e=wl,y:n=oe,...i}={}){return new ck(t,P2({...i,x:e,y:n}))}const pk={ariaLabel:"tick",fill:null,stroke:"currentColor"};class mk extends ue{constructor(e,n,i){super(e,n,i,pk),Co(this,i)}render(e,n,i,r,o){return qt("svg:g",o).call(Ie,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Re,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(An,this,i).call(Nl,this,i,o)).node()}}class gk extends mk{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Nt(a),this.insetBottom=Nt(l)}_transform(e,n,{x:i}){e.call(Te,n,{x:i},me,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function Rl(t,{x:e=oe,...n}={}){return new gk(t,{...n,x:e})}function bk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:kt,o:kt,d(o){o&&V(e),t[4](null)}}}function _k(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Ve(()=>{const f=Pe({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Rl(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(f)});function l(f){se[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class zn extends Ot{constructor(e){super(),Pt(this,e,_k,bk,Rt,{pattern:3,width:0,height:1})}}function yk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:kt,o:kt,d(o){o&&V(e),t[4](null)}}}function wk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Ve(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=Pe({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[ik(f,{x:(u,c)=>c+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){se[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Bn extends Ot{constructor(e){super(),Pt(this,e,wk,yk,Rt,{pattern:3,width:0,height:1})}}function vk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:kt,o:kt,d(o){o&&V(e),t[4](null)}}}function xk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Ve(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=Pe({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[ak(f,{x:(u,c)=>c+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){se[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class qn extends Ot{constructor(e){super(),Pt(this,e,xk,vk,Rt,{pattern:3,width:0,height:1})}}function kk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:kt,o:kt,d(o){o&&V(e),t[7](null)}}}function Mk(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{width:a=800}=e,{height:l=50}=e,f,s=null,u;const c=async m=>{o?n(6,s=o):(n(6,s=await As(m)),console.log(`Loaded ${m}, sr= ${s.sampleRate}`)),u=s.sampleRate};let h=null;const p=(m,g)=>{g&&(h=Es(g,m,.5))};Ve(()=>{if(n(2,f.textContent="",f),!h)return;const m=Pe({width:a,height:l,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[dk(h,{x:(g,_)=>_/u,y:g=>g})]});f.appendChild(m)});function d(m){se[m?"unshift":"push"](()=>{f=m,n(2,f)})}return t.$$set=m=>{"pattern"in m&&n(3,i=m.pattern),"audioFile"in m&&n(4,r=m.audioFile),"cachedAudio"in m&&n(5,o=m.cachedAudio),"width"in m&&n(0,a=m.width),"height"in m&&n(1,l=m.height)},t.$$.update=()=>{t.$$.dirty&16&&c(r),t.$$.dirty&72&&p(i,s)},[a,l,f,i,r,o,s,d]}class Wn extends Ot{constructor(e){super(),Pt(this,e,Mk,kk,Rt,{pattern:3,audioFile:4,cachedAudio:5,width:0,height:1})}}function Sk(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){X(l,e,f),y(e,n),t[7](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:kt,i:kt,o:kt,d(l){l&&V(e),t[7](null),o=!1,a()}}}function Tk(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{currentTrialNumber:a=-1}=e,l=null;const f=async d=>{o?n(6,l=o):(n(6,l=await As(d)),console.log(`Loaded ${d}, sr= ${l.sampleRate}`))};let s=null,u;const c=(d,m)=>{m&&u&&(s=Es(m,d),a0(s,m.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};Ha(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function p(d){se[d?"unshift":"push"](()=>{u=d,n(0,u)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"cachedAudio"in d&&n(4,o=d.cachedAudio),"currentTrialNumber"in d&&n(5,a=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&32&&a>-1&&window.setTimeout(h,200),t.$$.dirty&68&&c(i,l)},[u,h,i,r,o,a,l,p]}class ar extends Ot{constructor(e){super(),Pt(this,e,Tk,Sk,Rt,{pattern:2,audioFile:3,cachedAudio:4,currentTrialNumber:5})}}function ed(t,e,n){const i=t.slice();return i[8]=e[n],i}function nd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=at(n),e.__value=t[8],ft(e,e.__value)},m(r,o){X(r,e,o),y(e,i)},p:kt,d(r){r&&V(e)}}}function Ck(t){let e,n,i,r,o,a,l,f=(aa*1e3).toFixed(0)+"",s,u,c,h,p,d,m,g,_=t[0].toFixed(1)+"",b,v,w=(t[2]*1e3).toFixed(1)+"",k,x,S,T,A,F,C,L,R,W,$,B,z,Q,j,G,O,Y,J,lt,et=Zt(t[5]),Z=[];for(let q=0;q<et.length;q+=1)Z[q]=nd(ed(t,et,q));return R=new ar({props:{pattern:t[1],audioFile:t[3]}}),$=new Wn({props:{pattern:t[1],audioFile:t[3],width:Zo,height:Ko}}),z=new zn({props:{pattern:t[1],width:Zo,height:Ko}}),j=new Bn({props:{pattern:t[1],width:Zo,height:Ko}}),O=new qn({props:{pattern:t[1],width:Zo,height:Ko}}),{c(){e=M("main"),n=M("h2"),n.textContent="Playground",i=D(),r=M("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=D(),a=M("div"),l=at("inter-onset interval (IOI): "),s=at(f),u=at(" milliseconds ("),c=at(t[4]),h=at(` bpm)
    `),p=M("label"),d=at(`deviation as percent of IOI
      `),m=M("input"),g=D(),b=at(_),v=at(`
      (`),k=at(w),x=at(" milliseconds)"),S=D(),T=M("label"),A=at(`instrument sample:
      `),F=M("select");for(let q=0;q<Z.length;q+=1)Z[q].c();C=D(),L=M("div"),ht(R.$$.fragment),W=D(),ht($.$$.fragment),B=D(),ht(z.$$.fragment),Q=D(),ht(j.$$.fragment),G=D(),ht(O.$$.fragment),I(m,"type","range"),I(m,"min","-20"),I(m,"max","20"),I(m,"step","1"),I(p,"class","svelte-1sot113"),t[3]===void 0&&on(()=>t[7].call(F)),I(T,"class","svelte-1sot113"),I(L,"class","stimuli svelte-1sot113")},m(q,N){X(q,e,N),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,s),y(a,u),y(a,c),y(a,h),y(a,p),y(p,d),y(p,m),ft(m,t[0]),y(p,g),y(p,b),y(p,v),y(p,k),y(p,x),y(a,S),y(a,T),y(T,A),y(T,F);for(let E=0;E<Z.length;E+=1)Z[E]&&Z[E].m(F,null);pe(F,t[3],!0),y(e,C),y(e,L),ut(R,L,null),y(L,W),ut($,L,null),y(L,B),ut(z,L,null),y(L,Q),ut(j,L,null),y(L,G),ut(O,L,null),Y=!0,J||(lt=[gt(m,"change",t[6]),gt(m,"input",t[6]),gt(F,"change",t[7])],J=!0)},p(q,[N]){if((!Y||N&16)&&Dt(c,q[4]),N&1&&ft(m,q[0]),(!Y||N&1)&&_!==(_=q[0].toFixed(1)+"")&&Dt(b,_),(!Y||N&4)&&w!==(w=(q[2]*1e3).toFixed(1)+"")&&Dt(k,w),N&32){et=Zt(q[5]);let nt;for(nt=0;nt<et.length;nt+=1){const mt=ed(q,et,nt);Z[nt]?Z[nt].p(mt,N):(Z[nt]=nd(mt),Z[nt].c(),Z[nt].m(F,null))}for(;nt<Z.length;nt+=1)Z[nt].d(1);Z.length=et.length}N&40&&pe(F,q[3]);const E={};N&2&&(E.pattern=q[1]),N&8&&(E.audioFile=q[3]),R.$set(E);const P={};N&2&&(P.pattern=q[1]),N&8&&(P.audioFile=q[3]),$.$set(P);const tt={};N&2&&(tt.pattern=q[1]),z.$set(tt);const U={};N&2&&(U.pattern=q[1]),j.$set(U);const dt={};N&2&&(dt.pattern=q[1]),O.$set(dt)},i(q){Y||(H(R.$$.fragment,q),H($.$$.fragment,q),H(z.$$.fragment,q),H(j.$$.fragment,q),H(O.$$.fragment,q),Y=!0)},o(q){K(R.$$.fragment,q),K($.$$.fragment,q),K(z.$$.fragment,q),K(j.$$.fragment,q),K(O.$$.fragment,q),Y=!1},d(q){q&&V(e),vn(Z,q),ct(R),ct($),ct(z),ct(j),ct(O),J=!1,Se(lt)}}}let Zo=600,Ko=100,aa=.5,$k=6,Ak=3,Ek=!0,Nk=0;function Dk(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],l=5,f=[];function s(){l=_e(this.value),n(0,l)}function u(){a=ci(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=l/100*aa),t.$$.dirty&6&&(n(1,f=qi($k,aa,Ak,r,Ek,Nk)),console.log("generated pattern",f))},n(4,i=1/aa*60),[l,f,r,a,i,o,s,u]}class Fk extends Ot{constructor(e){super(),Pt(this,e,Dk,Ck,Rt,{})}}var j2={exports:{}};(function(t,e){(function(n,i){i()})(pr,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,c){var h=new XMLHttpRequest;h.open("GET",s),h.responseType="blob",h.onload=function(){f(h.response,u,c)},h.onerror=function(){console.error("could not download file")},h.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof pr=="object"&&pr.global===pr?pr:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(s,u,c){var h=a.URL||a.webkitURL,p=document.createElement("a");u=u||s.name||"download",p.download=u,p.rel="noopener",typeof s=="string"?(p.href=s,p.origin===location.origin?o(p):r(p.href)?i(s,u,c):o(p,p.target="_blank")):(p.href=h.createObjectURL(s),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,c){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,c),u);else if(r(s))i(s,u,c);else{var h=document.createElement("a");h.href=s,h.target="_blank",setTimeout(function(){o(h)})}}:function(s,u,c,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,c);var p=s.type==="application/octet-stream",d=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||l)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(s)}else{var _=a.URL||a.webkitURL,b=_.createObjectURL(s);h?h.location=b:location.href=b,h=null,setTimeout(function(){_.revokeObjectURL(b)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(j2);var Lk=j2.exports;const Z2=o0(Lk);function At(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}At.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};At.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};At.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};At.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=K2(0,t.length-1);return this.activate(t[e]),this};At.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=K2(0,t.length-1);this.activate(t[e])};At.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};At.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};At.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};At.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};At.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};At.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};At.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};At.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};At.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};At.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};At.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};At.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};At.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};At.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};At.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};At.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const zu=function(){};zu.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};zu.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};At.prototype.checkErr=new zu;function K2(t,e){return Math.floor(Math.random()*(e-t+1))+t}function id(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,A,F,C,L,R,W,$,B,z,Q,j,G,O,Y,J,lt,et,Z,q;return{c(){e=M("div"),n=M("label"),i=at(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=at(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",g=M("option"),g.textContent="55-60",_=D(),b=M("label"),v=at(`Gender:
        `),w=M("input"),k=D(),x=M("label"),S=at(`Highest finished education (select the best fitting one):
        `),T=M("select"),A=M("option"),A.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",W=D(),$=M("label"),B=at(`Which music instruments do you play?
        `),z=M("input"),Q=D(),j=M("label"),G=at(`For how many years do you roughly play it/them?
        `),O=M("input"),Y=D(),J=M("label"),lt=at(`How many years of experience do you have with visualization?
        `),et=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",ft(s,s.__value),u.__value="25-29",ft(u,u.__value),c.__value="30-34",ft(c,c.__value),h.__value="35-39",ft(h,h.__value),p.__value="40-44",ft(p,p.__value),d.__value="45-49",ft(d,d.__value),m.__value="50-54",ft(m,m.__value),g.__value="55-60",ft(g,g.__value),t[6]===void 0&&on(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(b,"class","svelte-u6a8gr"),A.__value="none",ft(A,A.__value),F.__value="highs",ft(F,F.__value),C.__value="bachelor",ft(C,C.__value),L.__value="master",ft(L,L.__value),R.__value="phd",ft(R,R.__value),t[8]===void 0&&on(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I($,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(j,"class","svelte-u6a8gr"),I(et,"type","number"),I(et,"min","0"),I(et,"step","1"),I(J,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,E){X(N,e,E),y(e,n),y(n,i),y(n,r),ft(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,g),pe(f,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),ft(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,A),y(T,F),y(T,C),y(T,L),y(T,R),pe(T,t[8],!0),y(e,W),y(e,$),y($,B),y($,z),ft(z,t[9]),y(e,Q),y(e,j),y(j,G),y(j,O),ft(O,t[10]),y(e,Y),y(e,J),y(J,lt),y(J,et),ft(et,t[11]),Z||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(et,"input",t[28])],Z=!0)},p(N,E){E[0]&32&&r.value!==N[5]&&ft(r,N[5]),E[0]&64&&pe(f,N[6]),E[0]&128&&w.value!==N[7]&&ft(w,N[7]),E[0]&256&&pe(T,N[8]),E[0]&512&&z.value!==N[9]&&ft(z,N[9]),E[0]&1024&&_e(O.value)!==N[10]&&ft(O,N[10]),E[0]&2048&&_e(et.value)!==N[11]&&ft(et,N[11])},d(N){N&&V(e),Z=!1,Se(q)}}}function rd(t){let e,n,i,r,o=t[14]&&od(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=jn()},m(a,l){X(a,e,l),X(a,n,l),o&&o.m(a,l),X(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=od(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Jt(),K(o,1,1,()=>{o=null}),te())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function od(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,g,_,b,v;const w=[Rk,Ik],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(g=x(t))&&(_=k[g]=w[g](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=at("Test number "),a=at(o),l=at(" / "),s=at(f),u=D(),c=M("p"),h=at("Trial number "),d=at(p),m=D(),_&&_.c(),b=jn()},m(S,T){X(S,e,T),X(S,n,T),X(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),X(S,u,T),X(S,c,T),y(c,h),y(c,d),X(S,m,T),~g&&k[g].m(S,T),X(S,b,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Dt(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Dt(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Dt(d,p);let A=g;g=x(S),g===A?~g&&k[g].p(S,T):(_&&(Jt(),K(k[A],1,1,()=>{k[A]=null}),te()),~g?(_=k[g],_?_.p(S,T):(_=k[g]=w[g](S),_.c()),H(_,1),_.m(b.parentNode,b)):_=null)},i(S){v||(H(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(b)),~g&&k[g].d(S)}}}function Ik(t){let e,n,i,r;const o=[zk,Uk,Ok,Pk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=jn()},m(f,s){~e&&a[e].m(f,s),X(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Jt(),K(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function Rk(t){let e,n,i,r;return e=new ar({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),X(o,n,a),X(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ct(e,o)}}}function Pk(t){let e,n;return e=new qn({props:{pattern:t[0],width:Pl,height:Ol}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Ok(t){let e,n;return e=new Bn({props:{pattern:t[0],width:Pl,height:Ol}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Uk(t){let e,n;return e=new zn({props:{pattern:t[0],width:Pl,height:Ol}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function zk(t){let e,n;return e=new Wn({props:{pattern:t[0],audioFile:t[1],width:Pl,height:Ol}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function ad(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Any final feedback?
        `),r=M("textarea")},m(l,f){X(l,e,f),y(e,n),y(n,i),y(n,r),ft(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&ft(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function ld(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){X(l,e,f),X(l,n,f),X(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:kt,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function fd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){X(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:kt,d(r){r&&V(e),n=!1,i()}}}function Bk(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&id(t),u=t[3]==="tests"&&rd(t),c=t[3]==="feedback"&&ad(t),h=t[3]==="done"&&ld(t),p=!t[15]&&t[3]!=="done"&&fd(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){X(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=id(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&H(u,1)):(u=rd(d),u.c(),H(u,1),u.m(e,o)):u&&(Jt(),K(u,1,1,()=>{u=null}),te()),d[3]==="feedback"?c?c.p(d,m):(c=ad(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=ld(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=fd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(H(u),f=!0)},o(d){K(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let sd=.5;const $f=20;let qk=6,Wk=!0,Yk=0,Pl=600,Ol=100;function Hk(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},k=[],x,S,T=!1,A=!1,F=!1,C="tick",L=$f,R=3,W=[],$=[],B=0;const z=[];Ha(()=>{document.querySelector("html").addEventListener("keyup",et)});const Q=()=>{S=new At({ratio:{firstVal:$f,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,$f],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function j(){l==="start"?(n(2,a=Ns(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),G()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function G(){Q(),n(13,b=0),v=0,x=0,n(14,T=!0),$=[],k=[],s=new Date,O()}function O(){console.log("Starting trial "+b),w={},n(15,A=!0),Y()}function Y(){let rt=Math.round(S.getLast("ratio"));rt=Math.random()<.5?rt:-rt,w.deviation=rt,n(20,L=rt),console.log("generated pattern",W),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function J(ot){if(!A)return;n(15,A=!1),w.decisionChoice=ot,w.errorCode=0;const rt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(rt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,b++,b),S.reversalLimitReached("ratio")?lt():O()}function lt(){n(14,T=!1),Z(),$=[],B=S.getFinalVal("ratio");for(let rt=0;rt<k.length;rt++)$[rt]=k[rt].deviation;console.log($);const ot=new Date;z.push({encoding:C,audioFile:o,final:B,data:$,score:x,testNumber:f,trialCount:b+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ot-s)/1e3}),n(4,f++,f)}function et(ot){switch(console.log(ot.key),ot.key){case"ArrowLeft":J(0);break;case"ArrowRight":J(1);break;case"PageDown":!A&&l!=="done"&&j()}}function Z(){`${x}`,b+1,`${(x/(b+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ot={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ot);const rt=JSON.stringify(ot,void 0,2),Wt=new Blob([rt],{type:"text/plain;charset=utf-8"});Z2(Wt,"results.json")}function N(){u=this.value,n(5,u)}function E(){c=ci(this),n(6,c)}function P(){h=this.value,n(7,h)}function tt(){p=ci(this),n(8,p)}function U(){d=this.value,n(9,d)}function dt(){m=_e(this.value),n(10,m)}function nt(){g=_e(this.value),n(11,g)}function mt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*sd),t.$$.dirty[0]&2097153&&(n(0,W=qi(qk,sd,R,i,Wk,Yk)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,p,d,m,g,_,b,T,A,F,C,j,q,L,i,N,E,P,tt,U,dt,nt,mt]}class Vk extends Ot{constructor(e){super(),Pt(this,e,Hk,Bk,Rt,{},null,[-1,-1])}}function ud(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,A,F,C,L,R,W,$,B,z,Q,j,G,O,Y,J,lt,et,Z,q;return{c(){e=M("div"),n=M("label"),i=at(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=at(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",g=M("option"),g.textContent="55-60",_=D(),b=M("label"),v=at(`Gender:
        `),w=M("input"),k=D(),x=M("label"),S=at(`Highest finished education (select the best fitting one):
        `),T=M("select"),A=M("option"),A.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",W=D(),$=M("label"),B=at(`Which music instruments do you play?
        `),z=M("input"),Q=D(),j=M("label"),G=at(`For how many years do you roughly play it/them?
        `),O=M("input"),Y=D(),J=M("label"),lt=at(`How many years of experience do you have with visualization?
        `),et=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",ft(s,s.__value),u.__value="25-29",ft(u,u.__value),c.__value="30-34",ft(c,c.__value),h.__value="35-39",ft(h,h.__value),p.__value="40-44",ft(p,p.__value),d.__value="45-49",ft(d,d.__value),m.__value="50-54",ft(m,m.__value),g.__value="55-60",ft(g,g.__value),t[6]===void 0&&on(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(b,"class","svelte-u6a8gr"),A.__value="none",ft(A,A.__value),F.__value="highs",ft(F,F.__value),C.__value="bachelor",ft(C,C.__value),L.__value="master",ft(L,L.__value),R.__value="phd",ft(R,R.__value),t[8]===void 0&&on(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I($,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(j,"class","svelte-u6a8gr"),I(et,"type","number"),I(et,"min","0"),I(et,"step","1"),I(J,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,E){X(N,e,E),y(e,n),y(n,i),y(n,r),ft(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,g),pe(f,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),ft(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,A),y(T,F),y(T,C),y(T,L),y(T,R),pe(T,t[8],!0),y(e,W),y(e,$),y($,B),y($,z),ft(z,t[9]),y(e,Q),y(e,j),y(j,G),y(j,O),ft(O,t[10]),y(e,Y),y(e,J),y(J,lt),y(J,et),ft(et,t[11]),Z||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(et,"input",t[28])],Z=!0)},p(N,E){E[0]&32&&r.value!==N[5]&&ft(r,N[5]),E[0]&64&&pe(f,N[6]),E[0]&128&&w.value!==N[7]&&ft(w,N[7]),E[0]&256&&pe(T,N[8]),E[0]&512&&z.value!==N[9]&&ft(z,N[9]),E[0]&1024&&_e(O.value)!==N[10]&&ft(O,N[10]),E[0]&2048&&_e(et.value)!==N[11]&&ft(et,N[11])},d(N){N&&V(e),Z=!1,Se(q)}}}function cd(t){let e,n,i,r,o=t[14]&&hd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=jn()},m(a,l){X(a,e,l),X(a,n,l),o&&o.m(a,l),X(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=hd(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Jt(),K(o,1,1,()=>{o=null}),te())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function hd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,g,_,b,v;const w=[Xk,Gk],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(g=x(t))&&(_=k[g]=w[g](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=at("Test number "),a=at(o),l=at(" / "),s=at(f),u=D(),c=M("p"),h=at("Trial number "),d=at(p),m=D(),_&&_.c(),b=jn()},m(S,T){X(S,e,T),X(S,n,T),X(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),X(S,u,T),X(S,c,T),y(c,h),y(c,d),X(S,m,T),~g&&k[g].m(S,T),X(S,b,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Dt(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Dt(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Dt(d,p);let A=g;g=x(S),g===A?~g&&k[g].p(S,T):(_&&(Jt(),K(k[A],1,1,()=>{k[A]=null}),te()),~g?(_=k[g],_?_.p(S,T):(_=k[g]=w[g](S),_.c()),H(_,1),_.m(b.parentNode,b)):_=null)},i(S){v||(H(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(b)),~g&&k[g].d(S)}}}function Gk(t){let e,n,i,r;const o=[Qk,Kk,Zk,jk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=jn()},m(f,s){~e&&a[e].m(f,s),X(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Jt(),K(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function Xk(t){let e,n,i,r;return e=new ar({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),X(o,n,a),X(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ct(e,o)}}}function jk(t){let e,n;return e=new qn({props:{pattern:t[0],width:Ul,height:zl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Zk(t){let e,n;return e=new Bn({props:{pattern:t[0],width:Ul,height:zl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Kk(t){let e,n;return e=new zn({props:{pattern:t[0],width:Ul,height:zl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Qk(t){let e,n;return e=new Wn({props:{pattern:t[0],audioFile:t[1],width:Ul,height:zl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function dd(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Any final feedback?
        `),r=M("textarea")},m(l,f){X(l,e,f),y(e,n),y(n,i),y(n,r),ft(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&ft(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function pd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){X(l,e,f),X(l,n,f),X(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:kt,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function md(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){X(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:kt,d(r){r&&V(e),n=!1,i()}}}function Jk(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&ud(t),u=t[3]==="tests"&&cd(t),c=t[3]==="feedback"&&dd(t),h=t[3]==="done"&&pd(t),p=!t[15]&&t[3]!=="done"&&md(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study (Within-Participant Variance)",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){X(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=ud(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&H(u,1)):(u=cd(d),u.c(),H(u,1),u.m(e,o)):u&&(Jt(),K(u,1,1,()=>{u=null}),te()),d[3]==="feedback"?c?c.p(d,m):(c=dd(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=pd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=md(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(H(u),f=!0)},o(d){K(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let gd=.5;const Af=20;let tM=6,eM=!0,nM=0,Ul=600,zl=100;function iM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},k=[],x,S,T=!1,A=!1,F=!1,C="tick",L=Af,R=3,W=[],$=[],B=0;const z=[];Ha(()=>{document.querySelector("html").addEventListener("keyup",et)});const Q=()=>{S=new At({ratio:{firstVal:Af,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Af],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function j(){l==="start"?(n(2,a=Ns(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),G()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function G(){Q(),n(13,b=0),v=0,x=0,n(14,T=!0),$=[],k=[],s=new Date,O()}function O(){console.log("Starting trial "+b),w={},n(15,A=!0),Y()}function Y(){let rt=Math.round(S.getLast("ratio"));rt=Math.random()<.5?rt:-rt,w.deviation=rt,n(20,L=rt),console.log("generated pattern",W),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function J(ot){if(!A)return;n(15,A=!1),w.decisionChoice=ot,w.errorCode=0;const rt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(rt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,b++,b),S.reversalLimitReached("ratio")?lt():O()}function lt(){n(14,T=!1),Z(),$=[],B=S.getFinalVal("ratio");for(let rt=0;rt<k.length;rt++)$[rt]=k[rt].deviation;console.log($);const ot=new Date;z.push({encoding:C,audioFile:o,final:B,data:$,score:x,testNumber:f,trialCount:b+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ot-s)/1e3}),n(4,f++,f)}function et(ot){switch(console.log(ot.key),ot.key){case"ArrowLeft":J(0);break;case"ArrowRight":J(1);break;case"PageDown":!A&&l!=="done"&&j()}}function Z(){`${x}`,b+1,`${(x/(b+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ot={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ot);const rt=JSON.stringify(ot,void 0,2),Wt=new Blob([rt],{type:"text/plain;charset=utf-8"});Z2(Wt,"results.json")}function N(){u=this.value,n(5,u)}function E(){c=ci(this),n(6,c)}function P(){h=this.value,n(7,h)}function tt(){p=ci(this),n(8,p)}function U(){d=this.value,n(9,d)}function dt(){m=_e(this.value),n(10,m)}function nt(){g=_e(this.value),n(11,g)}function mt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*gd),t.$$.dirty[0]&2097153&&(n(0,W=qi(tM,gd,R,i,eM,nM)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,p,d,m,g,_,b,T,A,F,C,j,q,L,i,N,E,P,tt,U,dt,nt,mt]}class rM extends Ot{constructor(e){super(),Pt(this,e,iM,Jk,Rt,{},null,[-1,-1])}}function oM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:kt,o:kt,d(r){r&&V(e),t[6](null)}}}function aM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=100}=e,f;Ve(()=>{const u=Pe({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Rl(i,{x:c=>c}),Fl(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${h+1}`})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){se[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class Q2 extends Ot{constructor(e){super(),Pt(this,e,aM,oM,Rt,{data:3,domain:4,title:5,width:0,height:1})}}function lM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:kt,o:kt,d(r){r&&V(e),t[5](null)}}}function fM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;Ve(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.finals)})),u=Pe({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[to(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Uu(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Dl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Yn(s),d=1.96*(no(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){se[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Bu extends Ot{constructor(e){super(),Pt(this,e,fM,lM,Rt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function sM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:kt,o:kt,d(r){r&&V(e),t[5](null)}}}function uM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;Ve(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.trialCounts)})),u=Pe({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[to(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Uu(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Dl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Yn(s),d=1.96*(no(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){se[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class qu extends Ot{constructor(e){super(),Pt(this,e,uM,sM,Rt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function bd(t,e,n){const i=t.slice();return i[8]=e[n],i}function _d(t,e,n){const i=t.slice();return i[11]=e[n],i}function yd(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new Q2({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=M("b"),i=at(n),r=D(),ht(o.$$.fragment)},m(l,f){X(l,e,f),y(e,i),X(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&4)&&n!==(n=l[11].encoding+"")&&Dt(i,n);const s={};f&4&&(s.data=l[11].finals),f&4&&(s.title=l[11].encoding),f&2&&(s.domain=[0,l[1]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function wd(t){let e,n,i,r=t[8].demographics.partID+"",o,a,l,f,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=M("div"),n=M("b"),i=at("P"),o=at(r),a=at(":"),l=D(),f=new ob(!1),u=D(),f.a=u,ge(e,"text-align","left")},m(c,h){X(c,e,h),y(e,n),y(n,i),y(n,o),y(n,a),y(e,l),f.m(s,e),y(e,u)},p(c,h){h&1&&r!==(r=c[8].demographics.partID+"")&&Dt(o,r),h&1&&s!==(s=c[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&f.p(s)},d(c){c&&V(e)}}}function cM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,A,F,C;c=new Bu({props:{stimuli:t[2]}}),g=new qu({props:{stimuli:t[2]}});let L=Zt(t[2]),R=[];for(let z=0;z<L.length;z+=1)R[z]=yd(_d(t,L,z));const W=z=>K(R[z],1,1,()=>{R[z]=null});let $=Zt(t[0]),B=[];for(let z=0;z<$.length;z+=1)B[z]=wd(bd(t,$,z));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values",u=D(),ht(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts",m=D(),ht(g.$$.fragment),_=D(),b=M("div"),v=M("h3"),v.textContent="Final Values for Each Stimulus and All Participants",w=D();for(let z=0;z<R.length;z+=1)R[z].c();k=D(),x=M("div"),S=M("h3"),S.textContent="Feedback",T=D();for(let z=0;z<B.length;z+=1)B[z].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(z,Q){X(z,e,Q),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w);for(let j=0;j<R.length;j+=1)R[j]&&R[j].m(b,null);y(e,k),y(e,x),y(x,S),y(x,T);for(let j=0;j<B.length;j+=1)B[j]&&B[j].m(x,null);A=!0,F||(C=gt(a,"input",t[3]),F=!0)},p(z,[Q]){const j={};Q&4&&(j.stimuli=z[2]),c.$set(j);const G={};if(Q&4&&(G.stimuli=z[2]),g.$set(G),Q&6){L=Zt(z[2]);let O;for(O=0;O<L.length;O+=1){const Y=_d(z,L,O);R[O]?(R[O].p(Y,Q),H(R[O],1)):(R[O]=yd(Y),R[O].c(),H(R[O],1),R[O].m(b,null))}for(Jt(),O=L.length;O<R.length;O+=1)W(O);te()}if(Q&1){$=Zt(z[0]);let O;for(O=0;O<$.length;O+=1){const Y=bd(z,$,O);B[O]?B[O].p(Y,Q):(B[O]=wd(Y),B[O].c(),B[O].m(x,null))}for(;O<B.length;O+=1)B[O].d(1);B.length=$.length}},i(z){if(!A){H(c.$$.fragment,z),H(g.$$.fragment,z);for(let Q=0;Q<L.length;Q+=1)H(R[Q]);A=!0}},o(z){K(c.$$.fragment,z),K(g.$$.fragment,z),R=R.filter(Boolean);for(let Q=0;Q<R.length;Q+=1)K(R[Q]);A=!1},d(z){z&&V(e),ct(c),ct(g),vn(R,z),vn(B,z),F=!1,C()}}}function hM(t,e,n){let i,r,o,a=[];const l=async u=>{const c=[],h=[];for(const p of u.target.files){const d=await p.text();c.push(JSON.parse(d)),h.push(p.name)}n(0,a=c),console.log(a)},f=u=>{if(u.lenght===0)return[];const c=[];for(const h of u)for(const p of h.tests){let d=p.encoding;(p.encoding==="audio"||p.encoding==="waveform")&&(d=`${p.encoding} + ${p.audioFile.startsWith("./Fluid")?"piano":"drums"}`),c.push({...h.demographics,...p,date:h.date,testType:d})}return console.log(c),c},s=u=>{if(u.length===0)return[];const c=On(u,h=>h.testType).map(([h,p])=>{const d=p.map(m=>m.final);return{encoding:h,finals:d,finalMean:Yn(d),finalVar:Wi(d),trialCounts:p.map(m=>m.trialCount)}});return console.log(c),c};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=f(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ye(i.map(u=>Math.abs(u.final))))},[a,o,r,l,i]}class dM extends Ot{constructor(e){super(),Pt(this,e,hM,cM,Rt,{})}}function pM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:kt,o:kt,d(r){r&&V(e),t[6](null)}}}function mM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=300}=e,f;Ve(()=>{console.log(o),console.log(i);const u=Pe({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Rl(i,{x:c=>c,strokeWidth:.5}),Fl(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${Math.floor(h/3)+1}-${h%3+1}`,fill:"black",stroke:"white"})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){se[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class gM extends Ot{constructor(e){super(),Pt(this,e,mM,pM,Rt,{data:3,domain:4,title:5,width:0,height:1})}}function bM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:kt,o:kt,d(r){r&&V(e),t[5](null)}}}function _M(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;Ve(()=>{const s=i.map(c=>({partID:c.partID,...l(c.finals)}));console.log(i,s);const u=Pe({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.partID)},marks:[to(s,{x:c=>c.mean,y:c=>c.partID,symbol:"diamond"}),to(i,{x:c=>c.mean,y:c=>c.partID}),Uu(s,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),Dl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Yn(s),d=1.96*(no(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){se[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"partis"in s&&n(3,i=s.partis),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Qo extends Ot{constructor(e){super(),Pt(this,e,_M,bM,Rt,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function vd(t,e,n){const i=t.slice();return i[13]=e[n],i}function xd(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new gM({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=M("b"),i=at(n),r=D(),ht(o.$$.fragment)},m(l,f){X(l,e,f),y(e,i),X(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&32)&&n!==(n=l[13].encoding+"")&&Dt(i,n);const s={};f&32&&(s.data=l[13].finals),f&32&&(s.title=l[13].encoding),f&16&&(s.domain=[0,l[4]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function yM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,A,F,C,L,R,W,$,B,z,Q,j,G,O,Y,J,lt;c=new Bu({props:{stimuli:t[5]}}),g=new qu({props:{stimuli:t[5]}}),k=new Qo({props:{partis:t[3]}}),A=new Qo({props:{partis:t[2]}}),R=new Qo({props:{partis:t[0]}}),z=new Qo({props:{partis:t[1]}});let et=Zt(t[5]),Z=[];for(let N=0;N<et.length;N+=1)Z[N]=xd(vd(t,et,N));const q=N=>K(Z[N],1,1,()=>{Z[N]=null});return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis (Within-Participant Variance)",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values per Stimulus",u=D(),ht(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts per Stimulus",m=D(),ht(g.$$.fragment),_=D(),b=M("div"),v=M("h3"),v.textContent="Mean and CI of Final Values per Participant",w=D(),ht(k.$$.fragment),x=D(),S=M("h4"),S.textContent="Only Audio",T=D(),ht(A.$$.fragment),F=D(),C=M("h4"),C.textContent="Only Color",L=D(),ht(R.$$.fragment),W=D(),$=M("h4"),$.textContent="Only Waveform",B=D(),ht(z.$$.fragment),Q=D(),j=M("div"),G=M("h3"),G.textContent="Final Values for Each Stimulus and All Participants",O=D();for(let N=0;N<Z.length;N+=1)Z[N].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(N,E){X(N,e,E),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w),ut(k,b,null),y(b,x),y(b,S),y(b,T),ut(A,b,null),y(b,F),y(b,C),y(b,L),ut(R,b,null),y(b,W),y(b,$),y(b,B),ut(z,b,null),y(e,Q),y(e,j),y(j,G),y(j,O);for(let P=0;P<Z.length;P+=1)Z[P]&&Z[P].m(j,null);Y=!0,J||(lt=gt(a,"input",t[6]),J=!0)},p(N,[E]){const P={};E&32&&(P.stimuli=N[5]),c.$set(P);const tt={};E&32&&(tt.stimuli=N[5]),g.$set(tt);const U={};E&8&&(U.partis=N[3]),k.$set(U);const dt={};E&4&&(dt.partis=N[2]),A.$set(dt);const nt={};E&1&&(nt.partis=N[0]),R.$set(nt);const mt={};if(E&2&&(mt.partis=N[1]),z.$set(mt),E&48){et=Zt(N[5]);let ot;for(ot=0;ot<et.length;ot+=1){const rt=vd(N,et,ot);Z[ot]?(Z[ot].p(rt,E),H(Z[ot],1)):(Z[ot]=xd(rt),Z[ot].c(),H(Z[ot],1),Z[ot].m(j,null))}for(Jt(),ot=et.length;ot<Z.length;ot+=1)q(ot);te()}},i(N){if(!Y){H(c.$$.fragment,N),H(g.$$.fragment,N),H(k.$$.fragment,N),H(A.$$.fragment,N),H(R.$$.fragment,N),H(z.$$.fragment,N);for(let E=0;E<et.length;E+=1)H(Z[E]);Y=!0}},o(N){K(c.$$.fragment,N),K(g.$$.fragment,N),K(k.$$.fragment,N),K(A.$$.fragment,N),K(R.$$.fragment,N),K(z.$$.fragment,N),Z=Z.filter(Boolean);for(let E=0;E<Z.length;E+=1)K(Z[E]);Y=!1},d(N){N&&V(e),ct(c),ct(g),ct(k),ct(A),ct(R),ct(z),vn(Z,N),J=!1,lt()}}}function wM(t,e,n){let i,r,o,a,l,f,s,u=[];const c=async m=>{const g=[],_=[];for(const b of m.target.files){const v=await b.text();g.push(JSON.parse(v)),_.push(b.name)}n(7,u=g),console.log(u)},h=m=>{if(m.lenght===0)return[];const g=[];for(const _ of m)for(const b of _.tests){let v=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(v=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({..._.demographics,...b,date:_.date,testType:v})}return console.log(g),g},p=m=>{if(m.length===0)return[];const g=On(m,_=>_.testType).map(([_,b])=>{const v=b.map(w=>w.final);return{encoding:_,finals:v,finalMean:Yn(v),finalVar:Wi(v),trialCounts:b.map(w=>w.trialCount)}});return console.log(g),g},d=(m,g)=>{if(m.length===0)return[];g&&(m=m.filter(b=>b.testType===g));const _=On(m,b=>b.partID).map(([b,v])=>{const w=v.map(k=>k.final);return{partID:b,finals:w,finalMean:Yn(w),finalVar:Wi(w),trialCounts:v.map(k=>k.trialCount)}});return console.log(_),_};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=h(u)),t.$$.dirty&256&&n(5,r=p(i)),t.$$.dirty&256&&n(4,o=ye(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=d(i)),t.$$.dirty&256&&n(2,l=d(i,"audio + piano")),t.$$.dirty&256&&n(1,f=d(i,"waveform + piano")),t.$$.dirty&256&&n(0,s=d(i,"color"))},[s,f,l,a,o,r,c,u,i]}class vM extends Ot{constructor(e){super(),Pt(this,e,wM,yM,Rt,{})}}function kd(t,e){return t==null?e:typeof t=="function"?t:n=>n[t]}function xM(t,e,n,i,r,o){const a=new Float64Array(o),l=(o-1)/(r-i);for(let f=0;f<t.length;++f){const s=t[f],u=e(s,f,t),c=n(s,f,t);if(!(Number.isFinite(u)&&Number.isFinite(c)))continue;const h=(u-i)*l,p=Math.floor(h),d=p+1;0<=p&&d<o?(a[p]+=(d-h)*c,a[d]+=(h-p)*c):p===-1?a[d]+=(h-p)*c:d===o&&(a[p]+=(d-h)*c)}return a}function Md(t,e=!1){const n=new Float64Array(5),i=new Float64Array(4);kM(n,i,t);const r=Float64Array.of(0,i[1]-n[1]*i[0],i[2]-n[2]*i[0],i[3]-n[3]*i[0],-n[4]*i[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(i[0]+i[1]+i[2]+i[3])/o,l=(r[1]+r[2]+r[3]+r[4])/o;return{sigma:t,negative:e,a:n,b_causal:i,b_anticausal:r,sum_causal:a,sum_anticausal:l}}function kM(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),l=.6318/n,f=1.997/n,s=Float64Array.of(-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l),-a*Math.cos(f),a*Math.sin(f),-a*Math.cos(-f),a*Math.sin(-f)),u=n*2.5066282746310007,c=Float64Array.of(r[0],r[1],0,0,0,0,0,0),h=Float64Array.of(1,0,s[0],s[1],0,0,0,0,0,0);let p,d;for(d=2;d<8;d+=2){for(c[d]=s[d]*c[d-2]-s[d+1]*c[d-1],c[d+1]=s[d]*c[d-1]+s[d+1]*c[d-2],p=d-2;p>0;p-=2)c[p]+=s[d]*c[p-2]-s[d+1]*c[p-1],c[p+1]+=s[d]*c[p-1]+s[d+1]*c[p-2];for(p=0;p<=d;p+=2)c[p]+=r[d]*h[p]-r[d+1]*h[p+1],c[p+1]+=r[d]*h[p+1]+r[d+1]*h[p];for(h[d+2]=s[d]*h[d]-s[d+1]*h[d+1],h[d+3]=s[d]*h[d+1]+s[d+1]*h[d],p=d;p>0;p-=2)h[p]+=s[d]*h[p-2]-s[d+1]*h[p-1],h[p+1]+=s[d]*h[p-1]+s[d+1]*h[p-2]}for(d=0;d<4;++d)p=d<<1,e[d]=c[p]/u,t[d+1]=h[p+2]}function MM(t,e,n,i=1,r=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),l=r,f=SM){const s=i*2,u=i*3,c=i*4,h=i*n;let p,d;for(f(r,e,n,i,t.b_causal,3,t.a,4,t.sum_causal,a,t.sigma),d=4,p=c;d<n;++d,p+=i)r[d]=t.b_causal[0]*e[p]+t.b_causal[1]*e[p-i]+t.b_causal[2]*e[p-s]+t.b_causal[3]*e[p-u]-t.a[1]*r[d-1]-t.a[2]*r[d-2]-t.a[3]*r[d-3]-t.a[4]*r[d-4];for(f(o,e,n,-i,t.b_anticausal,4,t.a,4,t.sum_anticausal,a,t.sigma),d=4,p=h-i*5;d<n;++d,p-=i)o[d]=t.b_anticausal[1]*e[p+i]+t.b_anticausal[2]*e[p+s]+t.b_anticausal[3]*e[p+u]+t.b_anticausal[4]*e[p+c]-t.a[1]*o[d-1]-t.a[2]*o[d-2]-t.a[3]*o[d-3]-t.a[4]*o[d-4];if(t.negative)for(d=0,p=0;d<n;++d,p+=i)l[p]=r[d]+o[n-d-1];else for(d=0,p=0;d<n;++d,p+=i)l[p]=Math.max(0,r[d]+o[n-d-1]);return l}function SM(t,e,n,i,r,o,a,l,f,s){const u=Math.abs(i)*n,c=i<0?u+i:0;let h,p,d;for(p=0;p<l;++p)for(s[p]=p<=o?r[p]:0,d=1;d<=l&&d<=p;++d)s[p]-=a[d]*s[p-d];for(d=0;d<l;++d)for(t[d]=0,p=1;p<=d;++p)h=c+i*p,h>=0&&h<u&&(t[d]+=s[d-p]*e[h]);const m=e[c];if(m>0)for(d=0;d<l;++d)t[d]+=s[d]*m}function TM(t,e,n=0){const i=t.length;let r,o;for(let a=0;a<i;++a){const l=e(t[a],a,t);l!=null&&(r===void 0?l>=l&&(r=o=l):(l<r&&(r=l),l>o&&(o=l)))}return[r-n,o+n]}function CM(t,e){const n=t.map(e).filter(s=>s!=null&&s>=s);n.sort((s,u)=>s-u);const i=$M(n),r=Sd(n,.25),o=Sd(n,.75),a=n.length,l=(o-r)/1.34;return 1.06*(Math.min(i,l)||i||Math.abs(r)||1)*Math.pow(a,-.2)}function $M(t){const e=t.length;let n=0,i,r=0,o=0;for(let a=0;a<e;++a){const l=t[a];i=l-r,r+=i/++n,o+=i*(l-r)}return n>1?Math.sqrt(o/(n-1)):NaN}function Sd(t,e){const n=t.length;if(!n)return NaN;if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];const i=(n-1)*e,r=Math.floor(i),o=t[r];return o+(t[r+1]-o)*(i-r)}function AM(t,e={}){const{adjust:n=1,pad:i=3,bins:r=512}=e,o=kd(e.x,_=>_),a=kd(e.weight,()=>1/t.length);let l=e.bandwidth??n*CM(t,o);const[f,s]=e.extent??TM(t,o,i*l),u=xM(t,o,a,f,s,r),c=(s-f)/(r-1),h=u.some(_=>_<0);let p=Md(l/c,h),d;function*m(_="x",b="y"){const v=g.grid(),w=1/c;for(let k=0;k<r;++k)yield{[_]:f+k*c,[b]:v[k]*w}}const g={[Symbol.iterator]:m,points:m,grid:()=>d||(d=MM(p,u,r)),extent:()=>[f,s],bandwidth(_){return arguments.length?(_!==l&&(l=_,d=null,p=Md(l/c,h)),g):l}};return g}function EM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){X(o,e,a),y(e,n),t[10](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:kt,o:kt,d(o){o&&V(e),t[10](null)}}}function NM(t,e,n){let i,{values:r}=e,{title:o=""}=e,{xLabel:a="some value"}=e,{xDomain:l=void 0}=e,{width:f=1e3}=e,{height:s=100}=e,{bandwidth:u=.25}=e,{bins:c=256}=e,{pad:h=4}=e,p;Ve(()=>{const m=[...i.bandwidth(u)];n(2,p.textContent="",p);const g=Pe({width:f,height:s,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:l},y:{label:"density",type:"linear"},marks:[Kx(m,{x:"x",y:"y",fill:"#ccc"}),Rl(r,{x:_=>_,strokeWidth:.5}),n2([0])]});p.appendChild(g)});function d(m){se[m?"unshift":"push"](()=>{p=m,n(2,p)})}return t.$$set=m=>{"values"in m&&n(3,r=m.values),"title"in m&&n(4,o=m.title),"xLabel"in m&&n(5,a=m.xLabel),"xDomain"in m&&n(6,l=m.xDomain),"width"in m&&n(0,f=m.width),"height"in m&&n(1,s=m.height),"bandwidth"in m&&n(7,u=m.bandwidth),"bins"in m&&n(8,c=m.bins),"pad"in m&&n(9,h=m.pad)},t.$$.update=()=>{t.$$.dirty&904&&(i=AM(r,{bandwidth:u,pad:h,bins:c}))},[f,s,p,r,o,a,l,u,c,h,d]}class DM extends Ot{constructor(e){super(),Pt(this,e,NM,EM,Rt,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function FM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){X(o,e,a),y(e,n),t[12](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:kt,o:kt,d(o){o&&V(e),t[12](null)}}}function LM(t,e,n){let{title:i=""}=e,{data:r}=e,{x:o="x"}=e,{y:a="y"}=e,{xLabel:l=null}=e,{yLabel:f=null}=e,{xDomain:s=void 0}=e,{yDomain:u=void 0}=e,{grid:c=!1}=e,{width:h=300}=e,{height:p=300}=e,d;Ve(()=>{console.log(r,o,a),n(2,d.textContent="",d);const g=Pe({width:h,height:p,title:i,style:{background:"none"},x:{label:l||(typeof o=="string"?o:"x"),domain:s},y:{label:f||(typeof a=="string"?a:"y"),domain:u},marks:[to(r,{x:o,y:a})]});d.appendChild(g)});function m(g){se[g?"unshift":"push"](()=>{d=g,n(2,d)})}return t.$$set=g=>{"title"in g&&n(3,i=g.title),"data"in g&&n(4,r=g.data),"x"in g&&n(5,o=g.x),"y"in g&&n(6,a=g.y),"xLabel"in g&&n(7,l=g.xLabel),"yLabel"in g&&n(8,f=g.yLabel),"xDomain"in g&&n(9,s=g.xDomain),"yDomain"in g&&n(10,u=g.yDomain),"grid"in g&&n(11,c=g.grid),"width"in g&&n(0,h=g.width),"height"in g&&n(1,p=g.height)},[h,p,d,i,r,o,a,l,f,s,u,c,m]}class Td extends Ot{constructor(e){super(),Pt(this,e,LM,FM,Rt,{title:3,data:4,x:5,y:6,xLabel:7,yLabel:8,xDomain:9,yDomain:10,grid:11,width:0,height:1})}}function Cd(t,e,n){const i=t.slice();return i[12]=e[n],i}function $d(t,e,n){const i=t.slice();return i[15]=e[n],i}function Ad(t,e,n){const i=t.slice();return i[18]=e[n],i}function Ed(t,e,n){const i=t.slice();return i[21]=e[n],i}function Nd(t){let e,n;return e=new DM({props:{title:`Density of final values for ${t[21][0]}`,values:t[21][1].map(Rd),xLabel:"final values",xDomain:[-1,20]}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=`Density of final values for ${i[21][0]}`),r&2&&(o.values=i[21][1].map(Rd)),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Dd(t){let e,n=t[18].encoding+"",i,r,o,a;return o=new Q2({props:{data:t[18].finals,title:t[18].encoding,domain:[0,t[3]]}}),{c(){e=M("b"),i=at(n),r=D(),ht(o.$$.fragment)},m(l,f){X(l,e,f),y(e,i),X(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&16)&&n!==(n=l[18].encoding+"")&&Dt(i,n);const s={};f&16&&(s.data=l[18].finals),f&16&&(s.title=l[18].encoding),f&8&&(s.domain=[0,l[3]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function Fd(t){let e,n=t[15]+"",i;return{c(){e=M("p"),i=at(n)},m(r,o){X(r,e,o),y(e,i)},p(r,o){o&1&&n!==(n=r[15]+"")&&Dt(i,n)},d(r){r&&V(e)}}}function Ld(t){let e,n,i,r=t[12].demographics.internalPID+"",o,a,l=t[12].demographics.partID+"",f,s,u,c,h=Zt(t[12].demographics.partFeedback.split(`
`)),p=[];for(let d=0;d<h.length;d+=1)p[d]=Fd($d(t,h,d));return{c(){e=M("div"),n=M("b"),i=at("P"),o=at(r),a=D(),f=at(l),s=at(":"),u=D();for(let d=0;d<p.length;d+=1)p[d].c();c=D(),ge(e,"text-align","left")},m(d,m){X(d,e,m),y(e,n),y(n,i),y(n,o),y(n,a),y(n,f),y(n,s),y(e,u);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(e,null);y(e,c)},p(d,m){if(m&1&&r!==(r=d[12].demographics.internalPID+"")&&Dt(o,r),m&1&&l!==(l=d[12].demographics.partID+"")&&Dt(f,l),m&1){h=Zt(d[12].demographics.partFeedback.split(`
`));let g;for(g=0;g<h.length;g+=1){const _=$d(d,h,g);p[g]?p[g].p(_,m):(p[g]=Fd(_),p[g].c(),p[g].m(e,c))}for(;g<p.length;g+=1)p[g].d(1);p.length=h.length}},d(d){d&&V(e),vn(p,d)}}}function IM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g=t[0].length+"",_,b,v=t[1].length+"",w,k,x=t[5].length+"",S,T,A,F,C,L,R,W,$,B,z,Q,j,G,O,Y,J,lt,et,Z,q,N,E,P,tt,U,dt,nt,mt,ot=Zt(On(t[1],Id)),rt=[];for(let st=0;st<ot.length;st+=1)rt[st]=Nd(Ed(t,ot,st));const Wt=st=>K(rt[st],1,1,()=>{rt[st]=null});L=new Td({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",xDomain:[0,20],yDomain:[0,20],data:t[0].map(t[8])}}),W=new Td({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",xDomain:[0,20],yDomain:[0,20],data:t[0].map(Pd)}}),j=new Bu({props:{stimuli:t[4]}}),lt=new qu({props:{stimuli:t[4]}});let zt=Zt(t[4]),vt=[];for(let st=0;st<zt.length;st+=1)vt[st]=Dd(Ad(t,zt,st));const Ut=st=>K(vt[st],1,1,()=>{vt[st]=null});let Et=Zt(t[0]),Bt=[];for(let st=0;st<Et.length;st+=1)Bt[st]=Ld(Cd(t,Et,st));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("label"),l=at(`Prolifc demographics CSV
    `),f=M("input"),s=D(),u=M("label"),c=at(`Results JSONs
    `),h=M("input"),d=D(),m=M("div"),_=at(g),b=at(` participants completed -
    `),w=at(v),k=at(` tests -
    `),S=at(x),T=at(" filtered tests"),A=D(),F=M("div");for(let st=0;st<rt.length;st+=1)rt[st].c();C=D(),ht(L.$$.fragment),R=D(),ht(W.$$.fragment),$=D(),B=M("div"),z=M("h3"),z.textContent="Mean and CI of Final Values",Q=D(),ht(j.$$.fragment),G=D(),O=M("div"),Y=M("h3"),Y.textContent="Mean and CI of Trial Counts",J=D(),ht(lt.$$.fragment),et=D(),Z=M("div"),q=M("h3"),q.textContent="Final Values for Each Stimulus and All Participants",N=D();for(let st=0;st<vt.length;st+=1)vt[st].c();E=D(),P=M("div"),tt=M("h3"),tt.textContent="Feedback",U=D();for(let st=0;st<Bt.length;st+=1)Bt[st].c();I(f,"type","file"),I(f,"accept",".csv"),I(h,"type","file"),I(h,"accept",".json"),h.multiple=!0,h.disabled=p=t[2]===null},m(st,St){X(st,e,St),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,f),y(e,s),y(e,u),y(u,c),y(u,h),y(e,d),y(e,m),y(m,_),y(m,b),y(m,w),y(m,k),y(m,S),y(m,T),y(e,A),y(e,F);for(let Yt=0;Yt<rt.length;Yt+=1)rt[Yt]&&rt[Yt].m(F,null);y(e,C),ut(L,e,null),y(e,R),ut(W,e,null),y(e,$),y(e,B),y(B,z),y(B,Q),ut(j,B,null),y(e,G),y(e,O),y(O,Y),y(O,J),ut(lt,O,null),y(e,et),y(e,Z),y(Z,q),y(Z,N);for(let Yt=0;Yt<vt.length;Yt+=1)vt[Yt]&&vt[Yt].m(Z,null);y(e,E),y(e,P),y(P,tt),y(P,U);for(let Yt=0;Yt<Bt.length;Yt+=1)Bt[Yt]&&Bt[Yt].m(P,null);dt=!0,nt||(mt=[gt(f,"input",t[6]),gt(h,"input",t[7])],nt=!0)},p(st,[St]){if((!dt||St&4&&p!==(p=st[2]===null))&&(h.disabled=p),(!dt||St&1)&&g!==(g=st[0].length+"")&&Dt(_,g),(!dt||St&2)&&v!==(v=st[1].length+"")&&Dt(w,v),(!dt||St&32)&&x!==(x=st[5].length+"")&&Dt(S,x),St&2){ot=Zt(On(st[1],Id));let pt;for(pt=0;pt<ot.length;pt+=1){const je=Ed(st,ot,pt);rt[pt]?(rt[pt].p(je,St),H(rt[pt],1)):(rt[pt]=Nd(je),rt[pt].c(),H(rt[pt],1),rt[pt].m(F,null))}for(Jt(),pt=ot.length;pt<rt.length;pt+=1)Wt(pt);te()}const Yt={};St&1&&(Yt.data=st[0].map(st[8])),L.$set(Yt);const $o={};St&1&&($o.data=st[0].map(Pd)),W.$set($o);const un={};St&16&&(un.stimuli=st[4]),j.$set(un);const dr={};if(St&16&&(dr.stimuli=st[4]),lt.$set(dr),St&24){zt=Zt(st[4]);let pt;for(pt=0;pt<zt.length;pt+=1){const je=Ad(st,zt,pt);vt[pt]?(vt[pt].p(je,St),H(vt[pt],1)):(vt[pt]=Dd(je),vt[pt].c(),H(vt[pt],1),vt[pt].m(Z,null))}for(Jt(),pt=zt.length;pt<vt.length;pt+=1)Ut(pt);te()}if(St&1){Et=Zt(st[0]);let pt;for(pt=0;pt<Et.length;pt+=1){const je=Cd(st,Et,pt);Bt[pt]?Bt[pt].p(je,St):(Bt[pt]=Ld(je),Bt[pt].c(),Bt[pt].m(P,null))}for(;pt<Bt.length;pt+=1)Bt[pt].d(1);Bt.length=Et.length}},i(st){if(!dt){for(let St=0;St<ot.length;St+=1)H(rt[St]);H(L.$$.fragment,st),H(W.$$.fragment,st),H(j.$$.fragment,st),H(lt.$$.fragment,st);for(let St=0;St<zt.length;St+=1)H(vt[St]);dt=!0}},o(st){rt=rt.filter(Boolean);for(let St=0;St<rt.length;St+=1)K(rt[St]);K(L.$$.fragment,st),K(W.$$.fragment,st),K(j.$$.fragment,st),K(lt.$$.fragment,st),vt=vt.filter(Boolean);for(let St=0;St<vt.length;St+=1)K(vt[St]);dt=!1},d(st){st&&V(e),vn(rt,st),ct(L),ct(W),ct(j),ct(lt),vn(vt,st),vn(Bt,st),nt=!1,Se(mt)}}}let RM=20;const Id=t=>t.testType,Rd=t=>t.final,Pd=t=>({...t.demographics,finalAudio:t.tests.filter(e=>e.encoding.startsWith("audio"))[0].final,finalColor:t.tests.filter(e=>e.encoding.startsWith("color"))[0].final,finalWaveform:t.tests.filter(e=>e.encoding.startsWith("waveform"))[0].final});function PM(t,e,n){let i,r,o,a,l=[],f=null;const s=async m=>{const _=await m.target.files[0].text(),b=Gv(_);n(2,f=b)},u=async m=>{const g=[];for(const b of m.target.files){const v=await b.text();g.push(JSON.parse(v))}console.log(g.map(b=>`${b.demographics.partID} ${b.studyStep}`));const _=On(g,b=>b.demographics.partID);console.log(`${_.length} participants`,_),n(0,l=g.filter(b=>b.studyStep==="feedback").map((b,v)=>({...b,demographics:{...b.demographics,internalPID:v+1},prolificDemogr:f.filter(w=>w["Participant id"]===b.demographics.partID)[0]}))),console.log("participants",l)},c=m=>{if(m.lenght===0)return[];const g=[];for(const _ of m)for(const b of _.tests){let v=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(v=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({..._.demographics,countryBirth:_.prolificDemogr["Country of birth"],countryResidence:_.prolificDemogr["Country of residence"],prolificApprovals:_.prolificDemogr["Total approvals"],...b,date:_.date,testType:v})}return console.log("tests",g),g},h=(m,g)=>m.filter(_=>_.final<g),p=m=>{if(m.length===0)return[];const g=On(m,_=>_.testType).map(([_,b])=>{const v=b.map(w=>w.final);return{encoding:_,testType:_,finals:v,finalMean:Yn(v),finalVar:Wi(v),trialCounts:b.map(w=>w.trialCount)}});return console.log(g),g},d=m=>(console.log(m.tests),{...m.demographics,finalAudio:m.tests.filter(g=>g.encoding.startsWith("audio"))[0].final,finalColor:m.tests.filter(g=>g.encoding.startsWith("color"))[0].final,finalWaveform:m.tests.filter(g=>g.encoding.startsWith("waveform"))[0].final});return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=c(l)),t.$$.dirty&2&&n(5,r=h(i,RM)),t.$$.dirty&2&&n(4,o=p(i)),t.$$.dirty&2&&n(3,a=ye(i.map(m=>Math.abs(m.final)))),t.$$.dirty&2&&console.log("tests by enc",On(i,m=>m.testType))},[l,i,f,a,o,r,s,u,d]}class OM extends Ot{constructor(e){super(),Pt(this,e,PM,IM,Rt,{})}}function Od(t,e,n){const i=t.slice();return i[8]=e[n],i}function Ud(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=at(n),e.__value=t[8],ft(e,e.__value)},m(r,o){X(r,e,o),y(e,i)},p:kt,d(r){r&&V(e)}}}function UM(t){let e,n,i,r,o,a,l,f,s=(t[1]*1e3).toFixed(1)+"",u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,A,F,C,L,R,W,$,B,z,Q,j,G,O,Y,J,lt,et,Z,q,N=Zt(t[5]),E=[];for(let P=0;P<N.length;P+=1)E[P]=Ud(Od(t,N,P));return x=new ar({props:{pattern:t[3],audioFile:t[2]}}),T=new ar({props:{pattern:t[4],audioFile:t[2]}}),F=new Wn({props:{pattern:t[3],audioFile:t[2],width:Nn,height:Dn}}),L=new Wn({props:{pattern:t[4],audioFile:t[2],width:Nn,height:Dn}}),W=new zn({props:{pattern:t[3],width:Nn,height:Dn}}),B=new zn({props:{pattern:t[4],width:Nn,height:Dn}}),Q=new Bn({props:{pattern:t[3],width:Nn,height:Dn}}),G=new Bn({props:{pattern:t[4],width:Nn,height:Dn}}),Y=new qn({props:{pattern:t[3],width:Nn,height:Dn}}),lt=new qn({props:{pattern:t[4],width:Nn,height:Dn}}),{c(){e=M("main"),n=M("h2"),n.textContent="Examples",i=D(),r=M("div"),o=M("label"),a=at(`deviation
      `),l=M("input"),f=at(`
      (`),u=at(s),c=at(" milliseconds)"),h=D(),p=M("label"),d=at(`instrument sample:
      `),m=M("select");for(let P=0;P<E.length;P+=1)E[P].c();g=D(),_=M("div"),b=M("h2"),b.textContent="early fourth note",v=D(),w=M("h2"),w.textContent="late fourth note",k=D(),ht(x.$$.fragment),S=D(),ht(T.$$.fragment),A=D(),ht(F.$$.fragment),C=D(),ht(L.$$.fragment),R=D(),ht(W.$$.fragment),$=D(),ht(B.$$.fragment),z=D(),ht(Q.$$.fragment),j=D(),ht(G.$$.fragment),O=D(),ht(Y.$$.fragment),J=D(),ht(lt.$$.fragment),I(l,"type","range"),I(l,"min","0"),I(l,"max","20"),I(l,"step","1"),I(o,"class","svelte-1kjj0oz"),t[2]===void 0&&on(()=>t[7].call(m)),I(p,"class","svelte-1kjj0oz"),I(_,"class","stimuli svelte-1kjj0oz")},m(P,tt){X(P,e,tt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),ft(l,t[0]),y(o,f),y(o,u),y(o,c),y(r,h),y(r,p),y(p,d),y(p,m);for(let U=0;U<E.length;U+=1)E[U]&&E[U].m(m,null);pe(m,t[2],!0),y(e,g),y(e,_),y(_,b),y(_,v),y(_,w),y(_,k),ut(x,_,null),y(_,S),ut(T,_,null),y(_,A),ut(F,_,null),y(_,C),ut(L,_,null),y(_,R),ut(W,_,null),y(_,$),ut(B,_,null),y(_,z),ut(Q,_,null),y(_,j),ut(G,_,null),y(_,O),ut(Y,_,null),y(_,J),ut(lt,_,null),et=!0,Z||(q=[gt(l,"change",t[6]),gt(l,"input",t[6]),gt(m,"change",t[7])],Z=!0)},p(P,[tt]){if(tt&1&&ft(l,P[0]),(!et||tt&2)&&s!==(s=(P[1]*1e3).toFixed(1)+"")&&Dt(u,s),tt&32){N=Zt(P[5]);let Et;for(Et=0;Et<N.length;Et+=1){const Bt=Od(P,N,Et);E[Et]?E[Et].p(Bt,tt):(E[Et]=Ud(Bt),E[Et].c(),E[Et].m(m,null))}for(;Et<E.length;Et+=1)E[Et].d(1);E.length=N.length}tt&36&&pe(m,P[2]);const U={};tt&8&&(U.pattern=P[3]),tt&4&&(U.audioFile=P[2]),x.$set(U);const dt={};tt&16&&(dt.pattern=P[4]),tt&4&&(dt.audioFile=P[2]),T.$set(dt);const nt={};tt&8&&(nt.pattern=P[3]),tt&4&&(nt.audioFile=P[2]),F.$set(nt);const mt={};tt&16&&(mt.pattern=P[4]),tt&4&&(mt.audioFile=P[2]),L.$set(mt);const ot={};tt&8&&(ot.pattern=P[3]),W.$set(ot);const rt={};tt&16&&(rt.pattern=P[4]),B.$set(rt);const Wt={};tt&8&&(Wt.pattern=P[3]),Q.$set(Wt);const zt={};tt&16&&(zt.pattern=P[4]),G.$set(zt);const vt={};tt&8&&(vt.pattern=P[3]),Y.$set(vt);const Ut={};tt&16&&(Ut.pattern=P[4]),lt.$set(Ut)},i(P){et||(H(x.$$.fragment,P),H(T.$$.fragment,P),H(F.$$.fragment,P),H(L.$$.fragment,P),H(W.$$.fragment,P),H(B.$$.fragment,P),H(Q.$$.fragment,P),H(G.$$.fragment,P),H(Y.$$.fragment,P),H(lt.$$.fragment,P),et=!0)},o(P){K(x.$$.fragment,P),K(T.$$.fragment,P),K(F.$$.fragment,P),K(L.$$.fragment,P),K(W.$$.fragment,P),K(B.$$.fragment,P),K(Q.$$.fragment,P),K(G.$$.fragment,P),K(Y.$$.fragment,P),K(lt.$$.fragment,P),et=!1},d(P){P&&V(e),vn(E,P),ct(x),ct(T),ct(F),ct(L),ct(W),ct(B),ct(Q),ct(G),ct(Y),ct(lt),Z=!1,Se(q)}}}let Nn=600,Dn=100,Ef=.5,zd=6,Bd=3,qd=!0,Wd=0;function zM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,l=[],f=[];function s(){a=_e(this.value),n(0,a)}function u(){o=ci(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*Ef),t.$$.dirty&2&&n(3,l=qi(zd,Ef,Bd,-i,qd,Wd)),t.$$.dirty&2&&n(4,f=qi(zd,Ef,Bd,i,qd,Wd))},[a,i,o,l,f,r,s,u]}class BM extends Ot{constructor(e){super(),Pt(this,e,zM,UM,Rt,{})}}function la(t,e){return new URLSearchParams(t.location.search).get(e)}function qM(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio",n.controls=!1},m(l,f){X(l,e,f),y(e,n),t[4](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:kt,i:kt,o:kt,d(l){l&&V(e),t[4](null),o=!1,a()}}}function WM(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,o=null,a;const l=(u,c)=>{c&&a&&(o=Es(c,u),a0(o,c.sampleRate,a))},f=()=>{a&&(a.pause(),n(0,a.currentTime=0,a),a.play())};function s(u){se[u?"unshift":"push"](()=>{a=u,n(0,a)})}return t.$$set=u=>{"pattern"in u&&n(2,i=u.pattern),"cachedAudio"in u&&n(3,r=u.cachedAudio)},t.$$.update=()=>{t.$$.dirty&12&&l(i,r)},[a,f,i,r,s]}class YM extends Ot{constructor(e){super(),Pt(this,e,WM,qM,Rt,{pattern:2,cachedAudio:3})}}function Yd(t){let e;return{c(){e=M("div"),e.innerHTML=`<p>In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p>By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p>If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CSHH1IPL"><button>I do not consent and will not participate</button></a>`},m(n,i){X(n,e,i)},d(n){n&&V(e)}}}function Hd(t){let e,n,i,r,o,a,l,f,s;return r=new YM({props:{pattern:[.5,1,1.5],cachedAudio:t[3]}}),{c(){e=M("div"),n=M("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,i=D(),ht(r.$$.fragment),o=D(),a=M("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=D(),f=M("a"),f.innerHTML="<button>I cannot hear the audio and will not participate in this study</button>",I(f,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(u,c){X(u,e,c),y(e,n),y(e,i),ut(r,e,null),y(e,o),y(e,a),y(e,l),y(e,f),s=!0},p(u,c){const h={};c[0]&8&&(h.cachedAudio=u[3]),r.$set(h)},i(u){s||(H(r.$$.fragment,u),s=!0)},o(u){K(r.$$.fragment,u),s=!1},d(u){u&&V(e),ct(r)}}}function Vd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b;return{c(){e=M("div"),n=M("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",i=D(),r=M("p"),o=M("button"),o.textContent="+",a=D(),l=M("button"),l.textContent="-",f=D(),s=Df("svg"),u=Df("rect"),m=D(),g=M("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,I(u,"width",c=t[0]*.52),I(u,"height",h=t[17]*2),I(u,"fill","#ccc"),I(u,"rx","8"),I(s,"width",p=t[0]*.52+"px"),I(s,"height",d=t[17]*2+"px")},m(v,w){X(v,e,w),y(e,n),y(e,i),y(e,r),y(r,o),y(r,a),y(r,l),y(e,f),y(e,s),y(s,u),y(e,m),y(e,g),_||(b=[gt(o,"click",t[23]),gt(l,"click",t[24])],_=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&I(u,"width",c),w[0]&131072&&h!==(h=v[17]*2)&&I(u,"height",h),w[0]&1&&p!==(p=v[0]*.52+"px")&&I(s,"width",p),w[0]&131072&&d!==(d=v[17]*2+"px")&&I(s,"height",d)},d(v){v&&V(e),_=!1,Se(b)}}}function Gd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,A,F,C;return{c(){e=M("div"),n=M("label"),i=M("span"),i.textContent="Highest finished education (select the best fitting one):",r=D(),o=M("select"),a=M("option"),a.textContent="none",l=M("option"),l.textContent="high school",f=M("option"),f.textContent="bachelor",s=M("option"),s.textContent="master",u=M("option"),u.textContent="phd",c=D(),h=M("label"),p=M("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,d=D(),m=M("input"),g=D(),_=M("label"),b=M("span"),b.textContent="For how many years do you roughly play it/them?",v=D(),w=M("input"),k=D(),x=M("label"),S=M("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,T=D(),A=M("input"),a.__value="none",ft(a,a.__value),l.__value="highs",ft(l,l.__value),f.__value="bachelor",ft(f,f.__value),s.__value="master",ft(s,s.__value),u.__value="phd",ft(u,u.__value),t[7]===void 0&&on(()=>t[25].call(o)),I(n,"class","svelte-1u8tzxr"),I(m,"type","text"),I(m,"placeholder","free text"),I(h,"class","svelte-1u8tzxr"),I(w,"type","number"),I(w,"min","0"),I(w,"step","1"),I(_,"class","svelte-1u8tzxr"),I(A,"type","number"),I(A,"min","0"),I(A,"step","1"),I(x,"class","svelte-1u8tzxr"),I(e,"class","demo-form svelte-1u8tzxr")},m(L,R){X(L,e,R),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,l),y(o,f),y(o,s),y(o,u),pe(o,t[7],!0),y(e,c),y(e,h),y(h,p),y(h,d),y(h,m),ft(m,t[8]),y(e,g),y(e,_),y(_,b),y(_,v),y(_,w),ft(w,t[9]),y(e,k),y(e,x),y(x,S),y(x,T),y(x,A),ft(A,t[10]),F||(C=[gt(o,"change",t[25]),gt(m,"input",t[26]),gt(w,"input",t[27]),gt(A,"input",t[28])],F=!0)},p(L,R){R[0]&128&&pe(o,L[7]),R[0]&256&&m.value!==L[8]&&ft(m,L[8]),R[0]&512&&_e(w.value)!==L[9]&&ft(w,L[9]),R[0]&1024&&_e(A.value)!==L[10]&&ft(A,L[10])},d(L){L&&V(e),F=!1,Se(C)}}}function Xd(t){let e,n,i,r,o=t[13]&&jd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=D(),o&&o.c(),i=jn()},m(a,l){X(a,e,l),X(a,n,l),o&&o.m(a,l),X(a,i,l),r=!0},p(a,l){a[13]?o?(o.p(a,l),l[0]&8192&&H(o,1)):(o=jd(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Jt(),K(o,1,1,()=>{o=null}),te())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function jd(t){let e,n,i=t[6]+1+"",r,o,a=t[4].length+"",l,f,s=t[12]+1+"",u,c,h,p,d,m;const g=[VM,HM],_=[];function b(v,w){return v[16]==="audio"?0:v[15]===!1?1:-1}return~(h=b(t))&&(p=_[h]=g[h](t)),{c(){e=M("p"),n=at("Test number "),r=at(i),o=at(" / "),l=at(a),f=at(", trial number "),u=at(s),c=D(),p&&p.c(),d=jn()},m(v,w){X(v,e,w),y(e,n),y(e,r),y(e,o),y(e,l),y(e,f),y(e,u),X(v,c,w),~h&&_[h].m(v,w),X(v,d,w),m=!0},p(v,w){(!m||w[0]&64)&&i!==(i=v[6]+1+"")&&Dt(r,i),(!m||w[0]&16)&&a!==(a=v[4].length+"")&&Dt(l,a),(!m||w[0]&4096)&&s!==(s=v[12]+1+"")&&Dt(u,s);let k=h;h=b(v),h===k?~h&&_[h].p(v,w):(p&&(Jt(),K(_[k],1,1,()=>{_[k]=null}),te()),~h?(p=_[h],p?p.p(v,w):(p=_[h]=g[h](v),p.c()),H(p,1),p.m(d.parentNode,d)):p=null)},i(v){m||(H(p),m=!0)},o(v){K(p),m=!1},d(v){v&&(V(e),V(c),V(d)),~h&&_[h].d(v)}}}function HM(t){let e,n,i,r,o;const a=[ZM,jM,XM,GM],l=[];function f(s,u){return s[16]==="waveform"?0:s[16]==="tick"?1:s[16]==="bar"?2:s[16]==="color"?3:-1}return~(e=f(t))&&(n=l[e]=a[e](t)),{c(){n&&n.c(),i=D(),r=M("p"),r.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
          <b>right for late</b>.`},m(s,u){~e&&l[e].m(s,u),X(s,i,u),X(s,r,u),o=!0},p(s,u){let c=e;e=f(s),e===c?~e&&l[e].p(s,u):(n&&(Jt(),K(l[c],1,1,()=>{l[c]=null}),te()),~e?(n=l[e],n?n.p(s,u):(n=l[e]=a[e](s),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(s){o||(H(n),o=!0)},o(s){K(n),o=!1},d(s){s&&(V(i),V(r)),~e&&l[e].d(s)}}}function VM(t){let e,n,i,r;return i=new ar({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],audioFile:t[2],cachedAudio:t[3],currentTrialNumber:t[12]}}),{c(){e=M("div"),e.innerHTML=`Listen to the audio, the forth note comes either too soon or too late.
          Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=D(),ht(i.$$.fragment)},m(o,a){X(o,e,a),X(o,n,a),ut(i,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.pattern=[...o[1].slice(0,o[1].length-1),o[1].at(-1)+Math.random()*1e-4]),a[0]&4&&(l.audioFile=o[2]),a[0]&8&&(l.cachedAudio=o[3]),a[0]&4096&&(l.currentTrialNumber=o[12]),i.$set(l)},i(o){r||(H(i.$$.fragment,o),r=!0)},o(o){K(i.$$.fragment,o),r=!1},d(o){o&&(V(e),V(n)),ct(i,o)}}}function GM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new qn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new qn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new qn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function XM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Bn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Bn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Bn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The bar chart shows the size of the gaps between notes in the bars'
            height (example: the bar at 2 shows the gap between the first and
            second note). Look at the third bar, it is either lower (early) or
            higher (late) than the others.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function jM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new zn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new zn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new zn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`Look at the peaks, the gap between the third and forth tick is
            either smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function ZM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Wn({props:{pattern:t[18],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),a=new Wn({props:{pattern:t[19],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),h=new Wn({props:{pattern:t[1],audioFile:t[2],cachedAudio:t[3],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the peaks, the gap between the third and forth peaks is either
            smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&4&&(g.audioFile=d[2]),m[0]&8&&(g.cachedAudio=d[3]),m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&4&&(_.audioFile=d[2]),m[0]&8&&(_.cachedAudio=d[3]),m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&4&&(b.audioFile=d[2]),m[0]&8&&(b.cachedAudio=d[3]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function Zd(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Do you have any final feedback/comments?
        `),r=M("textarea")},m(l,f){X(l,e,f),y(e,n),y(n,i),y(n,r),ft(r,t[11]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&2048&&ft(r,l[11])},d(l){l&&V(e),o=!1,a()}}}function Kd(t){let e,n,i;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("a"),i.textContent="click here to get your compensation",I(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){X(r,e,o),X(r,n,o),X(r,i,o)},d(r){r&&(V(e),V(n),V(i))}}}function Qd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step",I(e,"class","next-btn svelte-1u8tzxr")},m(r,o){X(r,e,o),n||(i=gt(e,"click",t[20]),n=!0)},p:kt,d(r){r&&V(e),n=!1,i()}}}function KM(t){let e,n,i,r,o,a,l,f,s,u=t[5]==="consent"&&Yd(),c=t[5]==="start1"&&Hd(t),h=t[5]==="start2"&&Vd(t),p=t[5]==="demo"&&Gd(t),d=t[5]==="tests"&&Xd(t),m=t[5]==="feedback"&&Zd(t),g=t[5]==="done"&&Kd(),_=!t[14]&&t[5]!=="done"&&Qd(t);return{c(){e=M("main"),u&&u.c(),n=D(),c&&c.c(),i=D(),h&&h.c(),r=D(),p&&p.c(),o=D(),d&&d.c(),a=D(),m&&m.c(),l=D(),g&&g.c(),f=D(),_&&_.c(),I(e,"class","svelte-1u8tzxr")},m(b,v){X(b,e,v),u&&u.m(e,null),y(e,n),c&&c.m(e,null),y(e,i),h&&h.m(e,null),y(e,r),p&&p.m(e,null),y(e,o),d&&d.m(e,null),y(e,a),m&&m.m(e,null),y(e,l),g&&g.m(e,null),y(e,f),_&&_.m(e,null),s=!0},p(b,v){b[5]==="consent"?u||(u=Yd(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),b[5]==="start1"?c?(c.p(b,v),v[0]&32&&H(c,1)):(c=Hd(b),c.c(),H(c,1),c.m(e,i)):c&&(Jt(),K(c,1,1,()=>{c=null}),te()),b[5]==="start2"?h?h.p(b,v):(h=Vd(b),h.c(),h.m(e,r)):h&&(h.d(1),h=null),b[5]==="demo"?p?p.p(b,v):(p=Gd(b),p.c(),p.m(e,o)):p&&(p.d(1),p=null),b[5]==="tests"?d?(d.p(b,v),v[0]&32&&H(d,1)):(d=Xd(b),d.c(),H(d,1),d.m(e,a)):d&&(Jt(),K(d,1,1,()=>{d=null}),te()),b[5]==="feedback"?m?m.p(b,v):(m=Zd(b),m.c(),m.m(e,l)):m&&(m.d(1),m=null),b[5]==="done"?g||(g=Kd(),g.c(),g.m(e,f)):g&&(g.d(1),g=null),!b[14]&&b[5]!=="done"?_?_.p(b,v):(_=Qd(b),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i(b){s||(H(c),H(d),s=!0)},o(b){K(c),K(d),s=!1},d(b){b&&V(e),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d(),d&&d.d(),m&&m.d(),g&&g.d(),_&&_.d()}}}const QM="/store";let Jd=.5;const Nf=20;let JM=6,tS=!0,eS=0;function nS(t,e,n){let i,r,o=la(window,"PROLIFIC_PID"),a=la(window,"STUDY_ID"),l=la(window,"SESSION_ID");const f=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let s=f[0],u;As(s).then(vt=>n(3,u=vt));let c=[{stimulus:"audio",audioFile:f[0]},{stimulus:"waveform",audioFile:f[0]},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],p=[0,.5,1,1.6,2.1,2.6];let d="consent",m=0,g,_="",b="",v=0,w=0,k="",x=0,S,T={},A=[],F,C,L=!1,R=!1,W=!1,$="tick",B=Nf,z=3,Q=600,j=[],G=[],O=0;const Y=[];Ha(()=>{document.querySelector("html").addEventListener("keyup",P)});const J=()=>{C=new At({ratio:{firstVal:Nf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Nf],direction:-1,reversalLimit:5,verbosity:0}}),C.init()};function lt(){d==="consent"?n(5,d="start1"):d==="start1"?n(5,d="start2"):d==="start2"?(n(4,c=Ns(c)),n(5,d="demo")):d==="demo"?_==""||b==""?alert("please fill the form first"):(n(5,d="tests"),n(6,m=0)):d==="tests"?(U(),m<c.length?(n(16,$=c[m].stimulus),n(2,s=c[m].audioFile),et()):n(5,d="feedback")):d==="feedback"&&(U(),n(5,d="done"))}function et(){J(),n(12,x=0),S=0,F=0,n(13,L=!0),G=[],A=[],g=new Date,Z()}function Z(){console.log("Starting trial "+x),T={},n(14,R=!0),q()}function q(){let Ut=Math.round(C.getLast("ratio"));Ut=Math.random()<.5?Ut:-Ut,T.deviation=Ut,n(21,B=Ut),T.startTime=new Date,n(15,W=!0),window.setTimeout(()=>{n(15,W=!1)},1e3)}function N(vt){if(!R)return;n(14,R=!1),T.decisionChoice=vt,T.errorCode=0,T.timeTaken=(new Date-T.startTime)/1e3;const Ut=F;(T.decisionChoice==0&&T.deviation<0||T.decisionChoice==1&&T.deviation>0)&&T.errorCode==0&&F++,T.errorCode==0&&(C.next(Ut!=F),A[A.length]=T),T.errorCode==0&&S++,n(12,x++,x),C.reversalLimitReached("ratio")?E():Z()}function E(){n(13,L=!1),tt(),G=[],O=C.getFinalVal("ratio");for(let Ut=0;Ut<A.length;Ut++)G[Ut]=A[Ut].deviation;console.log(G);const vt=new Date;Y.push({encoding:$,audioFile:s,final:O,data:G,score:F,testNumber:m,trialCount:x+1,trials:A,validTrialCount:S+1,testTimeSeconds:(vt-g)/1e3}),n(6,m++,m)}function P(vt){if(!W)switch(vt.key){case"ArrowLeft":R&&N(0);break;case"ArrowRight":R&&N(1);break;case"PageDown":!R&&d!=="done"&&lt()}}function tt(){`${F}`,x+1,`${(F/(x+1)*100).toFixed(1)}${C.getFinalVal("ratio")}`}function U(){const vt={studyStep:d,demographics:{partID:o,studyID:a,sessionID:l,partEduation:_,partMusicInstr:b,partMusicInstrYears:v,partVisExperienceYears:w,partFeedback:k,visWidth:Q},date:new Date().toISOString(),tests:Y};console.log("saving data",vt);const Ut=JSON.stringify(vt,void 0,2);fetch(QM,{method:"POST",headers:{"Content-Type":"application/json"},body:Ut}).then(Et=>{console.log("Data saved:",Et)})}const dt=()=>n(0,Q*=1.05),nt=()=>n(0,Q*=.95);function mt(){_=ci(this),n(7,_)}function ot(){b=this.value,n(8,b)}function rt(){v=_e(this.value),n(9,v)}function Wt(){w=_e(this.value),n(10,w)}function zt(){k=this.value,n(11,k)}return t.$$.update=()=>{t.$$.dirty[0]&2097152&&n(22,i=B/100*Jd),t.$$.dirty[0]&1&&n(17,r=Q/6),t.$$.dirty[0]&4194306&&(n(1,j=qi(JM,Jd,z,i,tS,eS)),console.log("generated pattern",j))},[Q,j,s,u,c,d,m,_,b,v,w,k,x,L,R,W,$,r,h,p,lt,B,i,dt,nt,mt,ot,rt,Wt,zt]}class iS extends Ot{constructor(e){super(),Pt(this,e,nS,KM,Rt,{},null,[-1,-1])}}function t0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b;return{c(){e=M("div"),n=M("button"),n.textContent="Playground",i=D(),r=M("button"),r.textContent="Examples",o=D(),a=M("button"),a.textContent="Study",l=D(),f=M("button"),f.textContent="Analysis",s=D(),u=M("button"),u.textContent="Study (variance)",c=D(),h=M("button"),h.textContent="Analysis (variance)",p=D(),d=M("button"),d.textContent="Study (Prolific)",m=D(),g=M("button"),g.textContent="Analysis (Prolific)"},m(v,w){X(v,e,w),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(e,s),y(e,u),y(e,c),y(e,h),y(e,p),y(e,d),y(e,m),y(e,g),_||(b=[gt(n,"click",t[1]),gt(r,"click",t[2]),gt(a,"click",t[3]),gt(f,"click",t[4]),gt(u,"click",t[5]),gt(h,"click",t[6]),gt(d,"click",t[7]),gt(g,"click",t[8])],_=!0)},p:kt,d(v){v&&V(e),_=!1,Se(b)}}}function rS(t){let e,n;return e=new OM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function oS(t){let e,n;return e=new iS({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function aS(t){let e,n;return e=new vM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function lS(t){let e,n;return e=new rM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function fS(t){let e,n;return e=new dM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function sS(t){let e,n;return e=new Vk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function uS(t){let e,n;return e=new BM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function cS(t){let e,n;return e=new Fk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function hS(t){let e,n,i,r,o,a,l,f=t[0]!=="study_prolific"&&t0(t);const s=[cS,uS,sS,fS,lS,aS,oS,rS],u=[];function c(h,p){return h[0]==="playground"?0:h[0]==="examples"?1:h[0]==="study"?2:h[0]==="analysis"?3:h[0]==="study_variance"?4:h[0]==="analysis_variance"?5:h[0]==="study_prolific"?6:h[0]==="analysis_prolific"?7:-1}return~(o=c(t))&&(a=u[o]=s[o](t)),{c(){e=M("main"),n=M("h1"),n.textContent="Rhythm Error Sensitivity Study",i=D(),f&&f.c(),r=D(),a&&a.c()},m(h,p){X(h,e,p),y(e,n),y(e,i),f&&f.m(e,null),y(e,r),~o&&u[o].m(e,null),l=!0},p(h,[p]){h[0]!=="study_prolific"?f?f.p(h,p):(f=t0(h),f.c(),f.m(e,r)):f&&(f.d(1),f=null);let d=o;o=c(h),o!==d&&(a&&(Jt(),K(u[d],1,1,()=>{u[d]=null}),te()),~o?(a=u[o],a||(a=u[o]=s[o](h),a.c()),H(a,1),a.m(e,null)):a=null)},i(h){l||(H(a),l=!0)},o(h){K(a),l=!1},d(h){h&&V(e),f&&f.d(),~o&&u[o].d()}}}function dS(t,e,n){let i=la(window,"p")??"study_prolific";return i="analysis_prolific",[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific"),()=>n(0,i="analysis_prolific")]}class pS extends Ot{constructor(e){super(),Pt(this,e,dS,hS,Rt,{})}}new pS({target:document.getElementById("app")});export{o0 as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-onklNlKE.js","assets/utilities-TnhnCcua.js","assets/index-TlZAmOeR.js","assets/index-SKz-Ovmx.js","assets/index-PAfX_8Je.js","assets/index-9vZZth91.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-z6PQ6VuF.js","assets/index-B4DrZ9KT.js","assets/browser-DykRqnuC.js","assets/index-CzszhRRy.js","assets/index-CB2KLPh_.js","assets/index-Dc0wCZ04.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var sb=Object.defineProperty;var ub=(t,e,n)=>e in t?sb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Pn=(t,e,n)=>(ub(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function _t(){}function c0(t){return t()}function Zu(){return Object.create(null)}function $e(t){t.forEach(c0)}function h0(t){return typeof t=="function"}function Pt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function cb(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function Z(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function Ge(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function S(t){return document.createElement(t)}function Of(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ot(t){return document.createTextNode(t)}function D(){return ot(" ")}function Jn(){return ot("")}function gt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function I(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function xe(t){return t===""?null:+t}function hb(t){return Array.from(t.childNodes)}function Lt(t,e){e=""+e,t.data!==e&&(t.data=e)}function st(t,e){t.value=e??""}function we(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function _e(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function pi(t){const e=t.querySelector(":checked");return e&&e.__value}class db{constructor(e=!1){Pn(this,"is_svg",!1);Pn(this,"e");Pn(this,"n");Pn(this,"t");Pn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Of(n.nodeName):this.e=S(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)Z(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(G)}}let zr;function Lr(t){zr=t}function d0(){if(!zr)throw new Error("Function called outside component initialization");return zr}function mi(t){d0().$$.on_mount.push(t)}function We(t){d0().$$.after_update.push(t)}const Pi=[],re=[];let Bi=[];const Ku=[],pb=Promise.resolve();let Uf=!1;function mb(){Uf||(Uf=!0,pb.then(p0))}function hn(t){Bi.push(t)}const Xl=new Set;let Ni=0;function p0(){if(Ni!==0)return;const t=zr;do{try{for(;Ni<Pi.length;){const e=Pi[Ni];Ni++,Lr(e),gb(e.$$)}}catch(e){throw Pi.length=0,Ni=0,e}for(Lr(null),Pi.length=0,Ni=0;re.length;)re.pop()();for(let e=0;e<Bi.length;e+=1){const n=Bi[e];Xl.has(n)||(Xl.add(n),n())}Bi.length=0}while(Pi.length);for(;Ku.length;)Ku.pop()();Uf=!1,Xl.clear(),Lr(t)}function gb(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(hn)}}function bb(t){const e=[],n=[];Bi.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Bi=e}const oa=new Set;let fi;function Ht(){fi={r:0,c:[],p:fi}}function Vt(){fi.r||$e(fi.c),fi=fi.p}function H(t,e){t&&t.i&&(oa.delete(t),t.i(e))}function K(t,e,n,i){if(t&&t.o){if(oa.has(t))return;oa.add(t),fi.c.push(()=>{oa.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function zt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ht(t){t&&t.c()}function ut(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),hn(()=>{const o=t.$$.on_mount.map(c0).filter(h0);t.$$.on_destroy?t.$$.on_destroy.push(...o):$e(o),t.$$.on_mount=[]}),r.forEach(hn)}function ct(t,e){const n=t.$$;n.fragment!==null&&(bb(n.after_update),$e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function _b(t,e){t.$$.dirty[0]===-1&&(Pi.push(t),mb(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ot(t,e,n,i,r,o,a=null,l=[-1]){const f=zr;Lr(t);const s=t.$$={fragment:null,ctx:[],props:o,update:_t,not_equal:r,bound:Zu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Zu(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(c,h,...d)=>{const p=d.length?d[0]:h;return s.ctx&&r(s.ctx[c],s.ctx[c]=p)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](p),u&&_b(t,c)),h}):[],s.update(),u=!0,$e(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const c=hb(e.target);s.fragment&&s.fragment.l(c),c.forEach(G)}else s.fragment&&s.fragment.c();e.intro&&H(t.$$.fragment),ut(t,e.target,e.anchor),p0()}Lr(f)}class Ut{constructor(){Pn(this,"$$");Pn(this,"$$set")}$destroy(){ct(this,1),this.$destroy=_t}$on(e,n){if(!h0(n))return _t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!cb(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const yb="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(yb);const wb="modulepreload",vb=function(t){return"/rhythm-vis/"+t},Ju={},Di=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=vb(a),a in Ju)return;Ju[a]=!0;const l=a.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(!!i)for(let c=o.length-1;c>=0;c--){const h=o[c];if(h.href===a&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":wb,l||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),l)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function xb(t){if(t){if(t=new Uint8Array(t.buffer||t),Mb(t))return"wav";if(kb(t))return"mp3";if(Tb(t))return"flac";if(Cb(t))return"m4a";if(Ab(t))return"opus";if(Sb(t))return"oga";if(Eb(t))return"qoa"}}function kb(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function Mb(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function Sb(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function Tb(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function Cb(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function Ab(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function Eb(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let $b=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const Nb=globalThis.AudioBuffer||$b;async function Db(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=xb(t);if(!e)throw Error("Cannot detect audio format");if(!me[e])throw Error("Missing decoder for "+e+" format");return me[e](t)}const me={async oga(t){let{decoder:e}=me.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await Di(()=>import("./index-z6PQ6VuF.js"),__vite__mapDeps([0,1,2]));await(me.oga.decoder=e=new n).ready}return t&&Fi(await e.decodeFile(t))},async mp3(t){let{decoder:e}=me.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await Di(()=>import("./index-CzszhRRy.js"),__vite__mapDeps([3,2]));await(me.mp3.decoder=e=new n).ready}return t&&Fi(await e.decode(t))},async flac(t){let{decoder:e}=me.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await Di(()=>import("./index-CB2KLPh_.js"),__vite__mapDeps([4,1,2]));await(me.flac.decoder=e=new n).ready}return t&&Fi(await e.decode(t))},async opus(t){let{decoder:e}=me.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await Di(()=>import("./index-Dc0wCZ04.js"),__vite__mapDeps([5,1,2]));await(me.opus.decoder=e=new n).ready}return t&&Fi(await e.decodeFile(t))},async wav(t){let{decode:e}=me.wav;if(!e){let n=await Di(()=>import("./index-B7egxeQ7.js").then(i=>i.i),__vite__mapDeps([]));e=me.wav.decode=n.default.decode}return t&&Fi(await e(t))},async qoa(t){let{decode:e}=me.qoa;return e||(me.qoa.decode=e=(await Di(()=>import("./index-D5fO5X93.js"),__vite__mapDeps([]))).decode),t&&Fi(await e(t))}};function Fi({channelData:t,sampleRate:e}){let n=new Nb({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fb=Lb;function Lb(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=Rb(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Ib(a,r,i,n,o)}function Ib(t,e,n,i,r){var o=r/8,a=i*o,l=new ArrayBuffer(44+t.length*o),f=new DataView(l);return Ro(f,0,"RIFF"),f.setUint32(4,36+t.length*o,!0),Ro(f,8,"WAVE"),Ro(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,e,!0),f.setUint16(22,i,!0),f.setUint32(24,n,!0),f.setUint32(28,n*a,!0),f.setUint16(32,a,!0),f.setUint16(34,r,!0),Ro(f,36,"data"),f.setUint32(40,t.length*o,!0),e===1?Ob(f,44,t):Pb(f,44,t),l}function Rb(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function Pb(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function Ob(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function Ro(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const Ub=m0(Fb);function Vi(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let l=0;l<t;++l){let f;r?f=l>=n?i:0:f=l===n?i:0,a.push(l*e+o+f)}return a}async function Rs(t){const n=await(await fetch(t)).arrayBuffer();return await Db(n)}function Ka(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const l=Math.round(a*t.sampleRate);let f=1;for(let s=0;s<r.length;++s)f=Math.max(0,f-2/40100),o[l+s]=r[s]*f}return o}function Ps(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([Ub(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function Os(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function ve(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ja(t){let e,n,i;t.length!==2?(e=ve,n=(l,f)=>ve(t(l),f),i=(l,f)=>t(l)-f):(e=t===ve||t===lo?t:zb,n=t,i=t);function r(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<0?s=c+1:u=c}while(s<u)}return s}function o(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<=0?s=c+1:u=c}while(s<u)}return s}function a(l,f,s=0,u=l.length){const c=r(l,f,s,u-1);return c>s&&i(l[c-1],f)>-i(l[c],f)?c-1:c}return{left:r,center:a,right:o}}function zb(){return 0}function g0(t){return t===null?NaN:+t}function*Bb(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const qb=Ja(ve),Qa=qb.right;Ja(g0).center;function Us(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function Wb(t){return t.length|0}function Yb(t){return!(t>0)}function Hb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Vb(t){return e=>t(...e)}function Gb(...t){const e=typeof t[t.length-1]=="function"&&Vb(t.pop());t=t.map(Hb);const n=t.map(Wb),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(Yb))return o;for(;;){o.push(r.map((l,f)=>t[f][l]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function Xb(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Gi(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,o+=i*(l-r))}if(n>1)return o/(n-1)}function fo(t,e){const n=Gi(t,e);return n&&Math.sqrt(n)}function Pe(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class gi{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,l=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);l&&(n[i++]=l),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class bi extends Map{constructor(e,n=y0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(zf(this,e))}has(e){return super.has(zf(this,e))}set(e,n){return super.set(b0(this,e),n)}delete(e){return super.delete(_0(this,e))}}class tl extends Set{constructor(e,n=y0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(zf(this,e))}add(e){return super.add(b0(this,e))}delete(e){return super.delete(_0(this,e))}}function zf({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function b0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function _0({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function y0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function pa(t){return t}function el(t,...e){return nl(t,pa,pa,e)}function ln(t,...e){return nl(t,Array.from,pa,e)}function qi(t,e,...n){return nl(t,pa,e,n)}function jb(t,e,...n){return nl(t,Array.from,e,n)}function nl(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const l=new bi,f=i[a++];let s=-1;for(const u of o){const c=f(u,++s,o),h=l.get(c);h?h.push(u):l.set(c,[u])}for(const[u,c]of l)l.set(u,r(c,a));return e(l)}(t,0)}function Zb(t,e){return Array.from(e,n=>t[n])}function Br(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const l=ma(a[r],a[o]);if(l)return l}})):(n=t.map(n),i.sort((r,o)=>ma(n[r],n[o]))),Zb(t,i)}return t.sort(w0(n))}function w0(t=ve){if(t===ve)return ma;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function ma(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function zs(t,e,n){return(e.length!==2?Br(qi(t,e,n),([i,r],[o,a])=>ve(r,a)||ve(i,o)):Br(el(t,n),([i,r],[o,a])=>e(r,a)||ve(i,o))).map(([i])=>i)}const Kb=Math.sqrt(50),Jb=Math.sqrt(10),Qb=Math.sqrt(2);function ga(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Kb?10:o>=Jb?5:o>=Qb?2:1;let l,f,s;return r<0?(s=Math.pow(10,-r)/a,l=Math.round(t*s),f=Math.round(e*s),l/s<t&&++l,f/s>e&&--f,s=-s):(s=Math.pow(10,r)*a,l=Math.round(t/s),f=Math.round(e/s),l*s<t&&++l,f*s>e&&--f),f<l&&.5<=n&&n<2?ga(t,e,n*2):[l,f,s]}function qr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?ga(e,t,n):ga(t,e,n);if(!(o>=r))return[];const l=o-r+1,f=new Array(l);if(i)if(a<0)for(let s=0;s<l;++s)f[s]=(o-s)/-a;else for(let s=0;s<l;++s)f[s]=(o-s)*a;else if(a<0)for(let s=0;s<l;++s)f[s]=(r+s)/-a;else for(let s=0;s<l;++s)f[s]=(r+s)*a;return f}function ba(t,e,n){return e=+e,t=+t,n=+n,ga(t,e,n)[2]}function Bf(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?ba(e,t,n):ba(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function t_(t){return Math.max(1,Math.ceil(Math.log(Us(t))/Math.LN2)+1)}function ke(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function e_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function An(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function n_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function v0(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?ma:w0(r);i>n;){if(i-n>600){const f=i-n+1,s=e-n+1,u=Math.log(f),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(f-c)/f)*(s-f/2<0?-1:1),d=Math.max(n,Math.floor(e-s*c/f+h)),p=Math.min(i,Math.floor(e+(f-s)*c/f+h));v0(t,e,d,p,r)}const o=t[e];let a=n,l=i;for(br(t,n,e),r(t[i],o)>0&&br(t,n,i);a<l;){for(br(t,a,l),++a,--l;r(t[a],o)<0;)++a;for(;r(t[l],o)>0;)--l}r(t[n],o)===0?br(t,n,l):(++l,br(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function br(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function x0(t,e=ve){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?ve(a,r)>0:ve(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Xi(t,e,n){if(t=Float64Array.from(Bb(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return An(t);if(e>=1)return ke(t);var i,r=(i-1)*e,o=Math.floor(r),a=ke(v0(t,o).subarray(0,o+1)),l=An(t.subarray(o+1));return a+(l-a)*(r-o)}}function i_(t,e,n=g0){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return a+(l-a)*(r-o)}}function r_(t,e,n){const i=Us(t),r=Xi(t,.75)-Xi(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function k0(t,e,n){const i=Us(t),r=fo(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function Gn(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function qf(t,e){return Xi(t,.5,e)}function*o_(t){for(const e of t)yield*e}function M0(t){return Array.from(o_(t))}function a_(t,e){const n=new bi;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function l_(t,e=f_){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function f_(t,e){return[t,e]}function Wf(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Xn(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function _a(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function s_(t){return t}var jl=1,Zl=2,Yf=3,Po=4,Qu=1e-6;function u_(t){return"translate("+t+",0)"}function c_(t){return"translate(0,"+t+")"}function h_(t){return e=>+t(e)}function d_(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function p_(){return!this.__axis}function m_(t,e){var n=[],i=null,r=null,o=6,a=6,l=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===jl||t===Po?-1:1,u=t===Po||t===Zl?"x":"y",c=t===jl||t===Yf?u_:c_;function h(d){var p=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):s_),b=Math.max(o,0)+l,_=e.range(),g=+_[0]+f,v=+_[_.length-1]+f,w=(e.bandwidth?d_:h_)(e.copy(),f),x=d.selection?d.selection():d,k=x.selectAll(".domain").data([null]),M=x.selectAll(".tick").data(p,e).order(),T=M.exit(),C=M.enter().append("g").attr("class","tick"),L=M.select("line"),A=M.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(C),L=L.merge(C.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),A=A.merge(C.append("text").attr("fill","currentColor").attr(u,s*b).attr("dy",t===jl?"0em":t===Yf?"0.71em":"0.32em")),d!==x&&(k=k.transition(d),M=M.transition(d),L=L.transition(d),A=A.transition(d),T=T.transition(d).attr("opacity",Qu).attr("transform",function(F){return isFinite(F=w(F))?c(F+f):this.getAttribute("transform")}),C.attr("opacity",Qu).attr("transform",function(F){var P=this.parentNode.__axis;return c((P&&isFinite(P=P(F))?P:w(F))+f)})),T.remove(),k.attr("d",t===Po||t===Zl?a?"M"+s*a+","+g+"H"+f+"V"+v+"H"+s*a:"M"+f+","+g+"V"+v:a?"M"+g+","+s*a+"V"+f+"H"+v+"V"+s*a:"M"+g+","+f+"H"+v),M.attr("opacity",1).attr("transform",function(F){return c(w(F)+f)}),L.attr(u+"2",s*o),A.attr(u,s*b).text(m),x.filter(p_).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Zl?"start":t===Po?"end":"middle"),x.each(function(){this.__axis=w})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(o=a=+d,h):o},h.tickSizeInner=function(d){return arguments.length?(o=+d,h):o},h.tickSizeOuter=function(d){return arguments.length?(a=+d,h):a},h.tickPadding=function(d){return arguments.length?(l=+d,h):l},h.offset=function(d){return arguments.length?(f=+d,h):f},h}function g_(t){return m_(Yf,t)}var b_={value:()=>{}};function S0(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new aa(n)}function aa(t){this._=t}function __(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}aa.prototype=S0.prototype={constructor:aa,on:function(t,e){var n=this._,i=__(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=y_(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=tc(n[r],t.name,e);else if(e==null)for(r in n)n[r]=tc(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new aa(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function y_(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function tc(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=b_,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Hf="http://www.w3.org/1999/xhtml";const ji={svg:"http://www.w3.org/2000/svg",xhtml:Hf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function il(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ji.hasOwnProperty(e)?{space:ji[e],local:t}:t}function w_(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Hf&&e.documentElement.namespaceURI===Hf?e.createElement(t):e.createElementNS(n,t)}}function v_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rl(t){var e=il(t);return(e.local?v_:w_)(e)}function x_(){}function Bs(t){return t==null?x_:function(){return this.querySelector(t)}}function k_(t){typeof t!="function"&&(t=Bs(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=new Array(a),f,s,u=0;u<a;++u)(f=o[u])&&(s=t.call(f,f.__data__,u,o))&&("__data__"in f&&(s.__data__=f.__data__),l[u]=s);return new Ce(i,this._parents)}function M_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function S_(){return[]}function T0(t){return t==null?S_:function(){return this.querySelectorAll(t)}}function T_(t){return function(){return M_(t.apply(this,arguments))}}function C_(t){typeof t=="function"?t=T_(t):t=T0(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&(i.push(t.call(f,f.__data__,s,a)),r.push(f));return new Ce(i,r)}function C0(t){return function(){return this.matches(t)}}function A0(t){return function(e){return e.matches(t)}}var A_=Array.prototype.find;function E_(t){return function(){return A_.call(this.children,t)}}function $_(){return this.firstElementChild}function N_(t){return this.select(t==null?$_:E_(typeof t=="function"?t:A0(t)))}var D_=Array.prototype.filter;function F_(){return Array.from(this.children)}function L_(t){return function(){return D_.call(this.children,t)}}function I_(t){return this.selectAll(t==null?F_:L_(typeof t=="function"?t:A0(t)))}function R_(t){typeof t!="function"&&(t=C0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new Ce(i,this._parents)}function E0(t){return new Array(t.length)}function P_(){return new Ce(this._enter||this._groups.map(E0),this._parents)}function ya(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ya.prototype={constructor:ya,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function O_(t){return function(){return t}}function U_(t,e,n,i,r,o){for(var a=0,l,f=e.length,s=o.length;a<s;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):n[a]=new ya(t,o[a]);for(;a<f;++a)(l=e[a])&&(r[a]=l)}function z_(t,e,n,i,r,o,a){var l,f,s=new Map,u=e.length,c=o.length,h=new Array(u),d;for(l=0;l<u;++l)(f=e[l])&&(h[l]=d=a.call(f,f.__data__,l,e)+"",s.has(d)?r[l]=f:s.set(d,f));for(l=0;l<c;++l)d=a.call(t,o[l],l,o)+"",(f=s.get(d))?(i[l]=f,f.__data__=o[l],s.delete(d)):n[l]=new ya(t,o[l]);for(l=0;l<u;++l)(f=e[l])&&s.get(h[l])===f&&(r[l]=f)}function B_(t){return t.__data__}function q_(t,e){if(!arguments.length)return Array.from(this,B_);var n=e?z_:U_,i=this._parents,r=this._groups;typeof t!="function"&&(t=O_(t));for(var o=r.length,a=new Array(o),l=new Array(o),f=new Array(o),s=0;s<o;++s){var u=i[s],c=r[s],h=c.length,d=W_(t.call(u,u&&u.__data__,s,i)),p=d.length,m=l[s]=new Array(p),b=a[s]=new Array(p),_=f[s]=new Array(h);n(u,c,m,b,_,d,e);for(var g=0,v=0,w,x;g<p;++g)if(w=m[g]){for(g>=v&&(v=g+1);!(x=b[v])&&++v<p;);w._next=x||null}}return a=new Ce(a,i),a._enter=l,a._exit=f,a}function W_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Y_(){return new Ce(this._exit||this._groups.map(E0),this._parents)}function H_(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function V_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),l=new Array(r),f=0;f<a;++f)for(var s=n[f],u=i[f],c=s.length,h=l[f]=new Array(c),d,p=0;p<c;++p)(d=s[p]||u[p])&&(h[p]=d);for(;f<r;++f)l[f]=n[f];return new Ce(l,this._parents)}function G_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function X_(t){t||(t=j_);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],l=a.length,f=r[o]=new Array(l),s,u=0;u<l;++u)(s=a[u])&&(f[u]=s);f.sort(e)}return new Ce(r,this._parents).order()}function j_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Z_(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function K_(){return Array.from(this)}function J_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function Q_(){let t=0;for(const e of this)++t;return t}function ty(){return!this.node()}function ey(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,l;o<a;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function ny(t){return function(){this.removeAttribute(t)}}function iy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ry(t,e){return function(){this.setAttribute(t,e)}}function oy(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function ay(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ly(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function fy(t,e){var n=il(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?iy:ny:typeof e=="function"?n.local?ly:ay:n.local?oy:ry)(n,e))}function $0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function sy(t){return function(){this.style.removeProperty(t)}}function uy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function cy(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function hy(t,e,n){return arguments.length>1?this.each((e==null?sy:typeof e=="function"?cy:uy)(t,e,n??"")):Zi(this.node(),t)}function Zi(t,e){return t.style.getPropertyValue(e)||$0(t).getComputedStyle(t,null).getPropertyValue(e)}function dy(t){return function(){delete this[t]}}function py(t,e){return function(){this[t]=e}}function my(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function gy(t,e){return arguments.length>1?this.each((e==null?dy:typeof e=="function"?my:py)(t,e)):this.node()[t]}function N0(t){return t.trim().split(/^|\s+/)}function qs(t){return t.classList||new D0(t)}function D0(t){this._node=t,this._names=N0(t.getAttribute("class")||"")}D0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function F0(t,e){for(var n=qs(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function L0(t,e){for(var n=qs(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function by(t){return function(){F0(this,t)}}function _y(t){return function(){L0(this,t)}}function yy(t,e){return function(){(e.apply(this,arguments)?F0:L0)(this,t)}}function wy(t,e){var n=N0(t+"");if(arguments.length<2){for(var i=qs(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?yy:e?by:_y)(n,e))}function vy(){this.textContent=""}function xy(t){return function(){this.textContent=t}}function ky(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function My(t){return arguments.length?this.each(t==null?vy:(typeof t=="function"?ky:xy)(t)):this.node().textContent}function Sy(){this.innerHTML=""}function Ty(t){return function(){this.innerHTML=t}}function Cy(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Ay(t){return arguments.length?this.each(t==null?Sy:(typeof t=="function"?Cy:Ty)(t)):this.node().innerHTML}function Ey(){this.nextSibling&&this.parentNode.appendChild(this)}function $y(){return this.each(Ey)}function Ny(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dy(){return this.each(Ny)}function Fy(t){var e=typeof t=="function"?t:rl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ly(){return null}function Iy(t,e){var n=typeof t=="function"?t:rl(t),i=e==null?Ly:typeof e=="function"?e:Bs(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ry(){var t=this.parentNode;t&&t.removeChild(this)}function Py(){return this.each(Ry)}function Oy(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Uy(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function zy(t){return this.select(t?Uy:Oy)}function By(t){return arguments.length?this.property("__data__",t):this.node().__data__}function qy(t){return function(e){t.call(this,e,this.__data__)}}function Wy(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Yy(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Hy(t,e,n){return function(){var i=this.__on,r,o=qy(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Vy(t,e,n){var i=Wy(t+""),r,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,s=l.length,u;f<s;++f)for(r=0,u=l[f];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(l=e?Hy:Yy,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function I0(t,e,n){var i=$0(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Gy(t,e){return function(){return I0(this,t,e)}}function Xy(t,e){return function(){return I0(this,t,e.apply(this,arguments))}}function jy(t,e){return this.each((typeof e=="function"?Xy:Gy)(t,e))}function*Zy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var R0=[null];function Ce(t,e){this._groups=t,this._parents=e}function so(){return new Ce([[document.documentElement]],R0)}function Ky(){return this}Ce.prototype=so.prototype={constructor:Ce,select:k_,selectAll:C_,selectChild:N_,selectChildren:I_,filter:R_,data:q_,enter:P_,exit:Y_,join:H_,merge:V_,selection:Ky,order:G_,sort:X_,call:Z_,nodes:K_,node:J_,size:Q_,empty:ty,each:ey,attr:fy,style:hy,property:gy,classed:wy,text:My,html:Ay,raise:$y,lower:Dy,append:Fy,insert:Iy,remove:Py,clone:zy,datum:By,on:Vy,dispatch:jy,[Symbol.iterator]:Zy};function Ir(t){return typeof t=="string"?new Ce([[document.querySelector(t)]],[document.documentElement]):new Ce([[t]],R0)}function Jy(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qy(t,e){if(t=Jy(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function ur(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function uo(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Qn(){}var _i=.7,Ki=1/_i,Wi="\\s*([+-]?\\d+)\\s*",Wr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tw=/^#([0-9a-f]{3,8})$/,ew=new RegExp(`^rgb\\(${Wi},${Wi},${Wi}\\)$`),nw=new RegExp(`^rgb\\(${un},${un},${un}\\)$`),iw=new RegExp(`^rgba\\(${Wi},${Wi},${Wi},${Wr}\\)$`),rw=new RegExp(`^rgba\\(${un},${un},${un},${Wr}\\)$`),ow=new RegExp(`^hsl\\(${Wr},${un},${un}\\)$`),aw=new RegExp(`^hsla\\(${Wr},${un},${un},${Wr}\\)$`),ec={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ur(Qn,yi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nc,formatHex:nc,formatHex8:lw,formatHsl:fw,formatRgb:ic,toString:ic});function nc(){return this.rgb().formatHex()}function lw(){return this.rgb().formatHex8()}function fw(){return P0(this).formatHsl()}function ic(){return this.rgb().formatRgb()}function yi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=tw.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rc(e):n===3?new Jt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Oo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Oo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ew.exec(t))?new Jt(e[1],e[2],e[3],1):(e=nw.exec(t))?new Jt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=iw.exec(t))?Oo(e[1],e[2],e[3],e[4]):(e=rw.exec(t))?Oo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ow.exec(t))?lc(e[1],e[2]/100,e[3]/100,1):(e=aw.exec(t))?lc(e[1],e[2]/100,e[3]/100,e[4]):ec.hasOwnProperty(t)?rc(ec[t]):t==="transparent"?new Jt(NaN,NaN,NaN,0):null}function rc(t){return new Jt(t>>16&255,t>>8&255,t&255,1)}function Oo(t,e,n,i){return i<=0&&(t=e=n=NaN),new Jt(t,e,n,i)}function Ws(t){return t instanceof Qn||(t=yi(t)),t?(t=t.rgb(),new Jt(t.r,t.g,t.b,t.opacity)):new Jt}function jn(t,e,n,i){return arguments.length===1?Ws(t):new Jt(t,e,n,i??1)}function Jt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ur(Jt,jn,uo(Qn,{brighter(t){return t=t==null?Ki:Math.pow(Ki,t),new Jt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_i:Math.pow(_i,t),new Jt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Jt(ci(this.r),ci(this.g),ci(this.b),wa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oc,formatHex:oc,formatHex8:sw,formatRgb:ac,toString:ac}));function oc(){return`#${si(this.r)}${si(this.g)}${si(this.b)}`}function sw(){return`#${si(this.r)}${si(this.g)}${si(this.b)}${si((isNaN(this.opacity)?1:this.opacity)*255)}`}function ac(){const t=wa(this.opacity);return`${t===1?"rgb(":"rgba("}${ci(this.r)}, ${ci(this.g)}, ${ci(this.b)}${t===1?")":`, ${t})`}`}function wa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ci(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function si(t){return t=ci(t),(t<16?"0":"")+t.toString(16)}function lc(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Xe(t,e,n,i)}function P0(t){if(t instanceof Xe)return new Xe(t.h,t.s,t.l,t.opacity);if(t instanceof Qn||(t=yi(t)),!t)return new Xe;if(t instanceof Xe)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,l=o-r,f=(o+r)/2;return l?(e===o?a=(n-i)/l+(n<i)*6:n===o?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?o+r:2-o-r,a*=60):l=f>0&&f<1?0:a,new Xe(a,l,f,t.opacity)}function Vf(t,e,n,i){return arguments.length===1?P0(t):new Xe(t,e,n,i??1)}function Xe(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ur(Xe,Vf,uo(Qn,{brighter(t){return t=t==null?Ki:Math.pow(Ki,t),new Xe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_i:Math.pow(_i,t),new Xe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Jt(Kl(t>=240?t-240:t+120,r,i),Kl(t,r,i),Kl(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Xe(fc(this.h),Uo(this.s),Uo(this.l),wa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=wa(this.opacity);return`${t===1?"hsl(":"hsla("}${fc(this.h)}, ${Uo(this.s)*100}%, ${Uo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fc(t){return t=(t||0)%360,t<0?t+360:t}function Uo(t){return Math.max(0,Math.min(1,t||0))}function Kl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const O0=Math.PI/180,U0=180/Math.PI,va=18,z0=.96422,B0=1,q0=.82521,W0=4/29,Yi=6/29,Y0=3*Yi*Yi,uw=Yi*Yi*Yi;function H0(t){if(t instanceof cn)return new cn(t.l,t.a,t.b,t.opacity);if(t instanceof Sn)return V0(t);t instanceof Jt||(t=Ws(t));var e=ef(t.r),n=ef(t.g),i=ef(t.b),r=Jl((.2225045*e+.7168786*n+.0606169*i)/B0),o,a;return e===n&&n===i?o=a=r:(o=Jl((.4360747*e+.3850649*n+.1430804*i)/z0),a=Jl((.0139322*e+.0971045*n+.7141733*i)/q0)),new cn(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Gf(t,e,n,i){return arguments.length===1?H0(t):new cn(t,e,n,i??1)}function cn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}ur(cn,Gf,uo(Qn,{brighter(t){return new cn(this.l+va*(t??1),this.a,this.b,this.opacity)},darker(t){return new cn(this.l-va*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=z0*Ql(e),t=B0*Ql(t),n=q0*Ql(n),new Jt(tf(3.1338561*e-1.6168667*t-.4906146*n),tf(-.9787684*e+1.9161415*t+.033454*n),tf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Jl(t){return t>uw?Math.pow(t,1/3):t/Y0+W0}function Ql(t){return t>Yi?t*t*t:Y0*(t-W0)}function tf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ef(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function cw(t){if(t instanceof Sn)return new Sn(t.h,t.c,t.l,t.opacity);if(t instanceof cn||(t=H0(t)),t.a===0&&t.b===0)return new Sn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*U0;return new Sn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Xf(t,e,n,i){return arguments.length===1?cw(t):new Sn(t,e,n,i??1)}function Sn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function V0(t){if(isNaN(t.h))return new cn(t.l,0,0,t.opacity);var e=t.h*O0;return new cn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ur(Sn,Xf,uo(Qn,{brighter(t){return new Sn(this.h,this.c,this.l+va*(t??1),this.opacity)},darker(t){return new Sn(this.h,this.c,this.l-va*(t??1),this.opacity)},rgb(){return V0(this).rgb()}}));var G0=-.14861,Ys=1.78277,Hs=-.29227,ol=-.90649,Yr=1.97294,sc=Yr*ol,uc=Yr*Ys,cc=Ys*Hs-ol*G0;function hw(t){if(t instanceof hi)return new hi(t.h,t.s,t.l,t.opacity);t instanceof Jt||(t=Ws(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(cc*i+sc*e-uc*n)/(cc+sc-uc),o=i-r,a=(Yr*(n-r)-Hs*o)/ol,l=Math.sqrt(a*a+o*o)/(Yr*r*(1-r)),f=l?Math.atan2(a,o)*U0-120:NaN;return new hi(f<0?f+360:f,l,r,t.opacity)}function dn(t,e,n,i){return arguments.length===1?hw(t):new hi(t,e,n,i??1)}function hi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ur(hi,dn,uo(Qn,{brighter(t){return t=t==null?Ki:Math.pow(Ki,t),new hi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_i:Math.pow(_i,t),new hi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*O0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Jt(255*(e+n*(G0*i+Ys*r)),255*(e+n*(Hs*i+ol*r)),255*(e+n*(Yr*i)),this.opacity)}}));function dw(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function pw(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return dw((n-i/e)*e,a,r,o,l)}}const al=t=>()=>t;function X0(t,e){return function(n){return t+n*e}}function mw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Vs(t,e){var n=e-t;return n?X0(t,n>180||n<-180?n-360*Math.round(n/360):n):al(isNaN(t)?e:t)}function gw(t){return(t=+t)==1?ae:function(e,n){return n-e?mw(e,n,t):al(isNaN(e)?n:e)}}function ae(t,e){var n=e-t;return n?X0(t,n):al(isNaN(t)?e:t)}const wi=function t(e){var n=gw(e);function i(r,o){var a=n((r=jn(r)).r,(o=jn(o)).r),l=n(r.g,o.g),f=n(r.b,o.b),s=ae(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=l(u),r.b=f(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function bw(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=jn(e[a]),i[a]=l.r||0,r[a]=l.g||0,o[a]=l.b||0;return i=t(i),r=t(r),o=t(o),l.opacity=1,function(f){return l.r=i(f),l.g=r(f),l.b=o(f),l+""}}}var _w=bw(pw);function yw(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function ww(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function vw(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=co(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=r[a](l);return o}}function xw(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function oe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function kw(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=co(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var jf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nf=new RegExp(jf.source,"g");function Mw(t){return function(){return t}}function Sw(t){return function(e){return t(e)+""}}function j0(t,e){var n=jf.lastIndex=nf.lastIndex=0,i,r,o,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=jf.exec(t))&&(r=nf.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:oe(i,r)})),n=nf.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?f[0]?Sw(f[0].x):Mw(e):(e=f.length,function(s){for(var u=0,c;u<e;++u)l[(c=f[u]).i]=c.x(s);return l.join("")})}function co(t,e){var n=typeof e,i;return e==null||n==="boolean"?al(e):(n==="number"?oe:n==="string"?(i=yi(e))?(e=i,wi):j0:e instanceof yi?wi:e instanceof Date?xw:ww(e)?yw:Array.isArray(e)?vw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?kw:oe)(t,e)}function Gs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var hc=180/Math.PI,Zf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Z0(t,e,n,i,r,o){var a,l,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),t*i<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*hc,skewX:Math.atan(f)*hc,scaleX:a,scaleY:l}}var zo;function Tw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Zf:Z0(e.a,e.b,e.c,e.d,e.e,e.f)}function Cw(t){return t==null||(zo||(zo=document.createElementNS("http://www.w3.org/2000/svg","g")),zo.setAttribute("transform",t),!(t=zo.transform.baseVal.consolidate()))?Zf:(t=t.matrix,Z0(t.a,t.b,t.c,t.d,t.e,t.f))}function K0(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,c,h,d,p){if(s!==c||u!==h){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:oe(s,c)},{i:m-2,x:oe(u,h)})}else(c||h)&&d.push("translate("+c+e+h+n)}function a(s,u,c,h){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),h.push({i:c.push(r(c)+"rotate(",null,i)-2,x:oe(s,u)})):u&&c.push(r(c)+"rotate("+u+i)}function l(s,u,c,h){s!==u?h.push({i:c.push(r(c)+"skewX(",null,i)-2,x:oe(s,u)}):u&&c.push(r(c)+"skewX("+u+i)}function f(s,u,c,h,d,p){if(s!==c||u!==h){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:oe(s,c)},{i:m-2,x:oe(u,h)})}else(c!==1||h!==1)&&d.push(r(d)+"scale("+c+","+h+")")}return function(s,u){var c=[],h=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,c,h),a(s.rotate,u.rotate,c,h),l(s.skewX,u.skewX,c,h),f(s.scaleX,s.scaleY,u.scaleX,u.scaleY,c,h),s=u=null,function(d){for(var p=-1,m=h.length,b;++p<m;)c[(b=h[p]).i]=b.x(d);return c.join("")}}}var Aw=K0(Tw,"px, ","px)","deg)"),Ew=K0(Cw,", ",")",")");function $w(t){return function(e,n){var i=t((e=Vf(e)).h,(n=Vf(n)).h),r=ae(e.s,n.s),o=ae(e.l,n.l),a=ae(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Nw=$w(Vs);function Dw(t,e){var n=ae((t=Gf(t)).l,(e=Gf(e)).l),i=ae(t.a,e.a),r=ae(t.b,e.b),o=ae(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function Fw(t){return function(e,n){var i=t((e=Xf(e)).h,(n=Xf(n)).h),r=ae(e.c,n.c),o=ae(e.l,n.l),a=ae(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Lw=Fw(Vs);function J0(t){return function e(n){n=+n;function i(r,o){var a=t((r=dn(r)).h,(o=dn(o)).h),l=ae(r.s,o.s),f=ae(r.l,o.l),s=ae(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=l(u),r.l=f(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}J0(Vs);var Xs=J0(ae);function ll(t,e){e===void 0&&(e=t,t=co);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[l](a-l)}}function Ze(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Ji=0,Sr=0,_r=0,Q0=1e3,xa,Tr,ka=0,vi=0,fl=0,Hr=typeof performance=="object"&&performance.now?performance:Date,t1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function js(){return vi||(t1(Iw),vi=Hr.now()+fl)}function Iw(){vi=0}function Ma(){this._call=this._time=this._next=null}Ma.prototype=e1.prototype={constructor:Ma,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?js():+n)+(e==null?0:+e),!this._next&&Tr!==this&&(Tr?Tr._next=this:xa=this,Tr=this),this._call=t,this._time=n,Kf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Kf())}};function e1(t,e,n){var i=new Ma;return i.restart(t,e,n),i}function Rw(){js(),++Ji;for(var t=xa,e;t;)(e=vi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ji}function dc(){vi=(ka=Hr.now())+fl,Ji=Sr=0;try{Rw()}finally{Ji=0,Ow(),vi=0}}function Pw(){var t=Hr.now(),e=t-ka;e>Q0&&(fl-=e,ka=t)}function Ow(){for(var t,e=xa,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:xa=n);Tr=t,Kf(i)}function Kf(t){if(!Ji){Sr&&(Sr=clearTimeout(Sr));var e=t-vi;e>24?(t<1/0&&(Sr=setTimeout(dc,t-Hr.now()-fl)),_r&&(_r=clearInterval(_r))):(_r||(ka=Hr.now(),_r=setInterval(Pw,Q0)),Ji=1,t1(dc))}}function pc(t,e,n){var i=new Ma;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Uw=S0("start","end","cancel","interrupt"),zw=[],n1=0,mc=1,Jf=2,la=3,gc=4,Qf=5,fa=6;function sl(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Bw(t,n,{name:e,index:i,group:r,on:Uw,tween:zw,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:n1})}function Zs(t,e){var n=tn(t,e);if(n.state>n1)throw new Error("too late; already scheduled");return n}function mn(t,e){var n=tn(t,e);if(n.state>la)throw new Error("too late; already running");return n}function tn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Bw(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=e1(o,0,n.time);function o(s){n.state=mc,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,c,h,d;if(n.state!==mc)return f();for(u in i)if(d=i[u],d.name===n.name){if(d.state===la)return pc(a);d.state===gc?(d.state=fa,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=fa,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(pc(function(){n.state===la&&(n.state=gc,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=Jf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Jf){for(n.state=la,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function l(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(f),n.state=Qf,1),c=-1,h=r.length;++c<h;)r[c].call(t,u);n.state===Qf&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=fa,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function qw(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>Jf&&i.state<Qf,i.state=fa,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function Ww(t){return this.each(function(){qw(this,t)})}function Yw(t,e){var n,i;return function(){var r=mn(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Hw(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=mn(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},f=0,s=r.length;f<s;++f)if(r[f].name===e){r[f]=l;break}f===s&&r.push(l)}o.tween=r}}function Vw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=tn(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Yw:Hw)(n,t,e))}function Ks(t,e,n){var i=t._id;return t.each(function(){var r=mn(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return tn(r,i).value[e]}}function i1(t,e){var n;return(typeof e=="number"?oe:e instanceof yi?wi:(n=yi(e))?(e=n,wi):j0)(t,e)}function Gw(t){return function(){this.removeAttribute(t)}}function Xw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function jw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function Zw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function Kw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Jw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Qw(t,e){var n=il(t),i=n==="transform"?Ew:i1;return this.attrTween(t,typeof e=="function"?(n.local?Jw:Kw)(n,i,Ks(this,"attr."+t,e)):e==null?(n.local?Xw:Gw)(n):(n.local?Zw:jw)(n,i,e))}function tv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ev(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function nv(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&ev(t,o)),n}return r._value=e,r}function iv(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&tv(t,o)),n}return r._value=e,r}function rv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=il(t);return this.tween(n,(i.local?nv:iv)(i,e))}function ov(t,e){return function(){Zs(this,t).delay=+e.apply(this,arguments)}}function av(t,e){return e=+e,function(){Zs(this,t).delay=e}}function lv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ov:av)(e,t)):tn(this.node(),e).delay}function fv(t,e){return function(){mn(this,t).duration=+e.apply(this,arguments)}}function sv(t,e){return e=+e,function(){mn(this,t).duration=e}}function uv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?fv:sv)(e,t)):tn(this.node(),e).duration}function cv(t,e){if(typeof e!="function")throw new Error;return function(){mn(this,t).ease=e}}function hv(t){var e=this._id;return arguments.length?this.each(cv(e,t)):tn(this.node(),e).ease}function dv(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;mn(this,t).ease=n}}function pv(t){if(typeof t!="function")throw new Error;return this.each(dv(this._id,t))}function mv(t){typeof t!="function"&&(t=C0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new En(i,this._parents,this._name,this._id)}function gv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var f=e[l],s=n[l],u=f.length,c=a[l]=new Array(u),h,d=0;d<u;++d)(h=f[d]||s[d])&&(c[d]=h);for(;l<i;++l)a[l]=e[l];return new En(a,this._parents,this._name,this._id)}function bv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function _v(t,e,n){var i,r,o=bv(e)?Zs:mn;return function(){var a=o(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function yv(t,e){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(t):this.each(_v(n,t,e))}function wv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function vv(){return this.on("end.remove",wv(this._id))}function xv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bs(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var l=i[a],f=l.length,s=o[a]=new Array(f),u,c,h=0;h<f;++h)(u=l[h])&&(c=t.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c,sl(s[h],e,n,h,s,tn(u,n)));return new En(o,this._parents,e,n)}function kv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=T0(t));for(var i=this._groups,r=i.length,o=[],a=[],l=0;l<r;++l)for(var f=i[l],s=f.length,u,c=0;c<s;++c)if(u=f[c]){for(var h=t.call(u,u.__data__,c,f),d,p=tn(u,n),m=0,b=h.length;m<b;++m)(d=h[m])&&sl(d,e,n,m,h,p);o.push(h),a.push(u)}return new En(o,a,e,n)}var Mv=so.prototype.constructor;function Sv(){return new Mv(this._groups,this._parents)}function Tv(t,e){var n,i,r;return function(){var o=Zi(this,t),a=(this.style.removeProperty(t),Zi(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function r1(t){return function(){this.style.removeProperty(t)}}function Cv(t,e,n){var i,r=n+"",o;return function(){var a=Zi(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function Av(t,e,n){var i,r,o;return function(){var a=Zi(this,t),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(t),Zi(this,t))),a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l))}}function Ev(t,e){var n,i,r,o="style."+e,a="end."+o,l;return function(){var f=mn(this,t),s=f.on,u=f.value[o]==null?l||(l=r1(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),f.on=i}}function $v(t,e,n){var i=(t+="")=="transform"?Aw:i1;return e==null?this.styleTween(t,Tv(t,i)).on("end.style."+t,r1(t)):typeof e=="function"?this.styleTween(t,Av(t,i,Ks(this,"style."+t,e))).each(Ev(this._id,t)):this.styleTween(t,Cv(t,i,e),n).on("end.style."+t,null)}function Nv(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Dv(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Nv(t,a,n)),i}return o._value=e,o}function Fv(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Dv(t,e,n??""))}function Lv(t){return function(){this.textContent=t}}function Iv(t){return function(){var e=t(this);this.textContent=e??""}}function Rv(t){return this.tween("text",typeof t=="function"?Iv(Ks(this,"text",t)):Lv(t==null?"":t+""))}function Pv(t){return function(e){this.textContent=t.call(this,e)}}function Ov(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Pv(r)),e}return i._value=t,i}function Uv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Ov(t))}function zv(){for(var t=this._name,e=this._id,n=o1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)if(f=a[s]){var u=tn(f,e);sl(f,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new En(i,this._parents,t,n)}function Bv(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var l={value:a},f={value:function(){--r===0&&o()}};n.each(function(){var s=mn(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),s.on=e}),r===0&&o()})}var qv=0;function En(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function o1(){return++qv}var bn=so.prototype;En.prototype={constructor:En,select:xv,selectAll:kv,selectChild:bn.selectChild,selectChildren:bn.selectChildren,filter:mv,merge:gv,selection:Sv,transition:zv,call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:yv,attr:Qw,attrTween:rv,style:$v,styleTween:Fv,text:Rv,textTween:Uv,remove:vv,tween:Vw,delay:lv,duration:uv,ease:hv,easeVarying:pv,end:Bv,[Symbol.iterator]:bn[Symbol.iterator]};function Wv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Yv={time:null,delay:0,duration:250,ease:Wv};function Hv(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Vv(t){var e,n;t instanceof En?(e=t._id,t=t._name):(e=o1(),(n=Yv).time=js(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&sl(f,t,e,s,a,n||Hv(f,e));return new En(i,this._parents,t,e)}so.prototype.interrupt=Ww;so.prototype.transition=Vv;const ts=Math.PI,es=2*ts,ai=1e-6,Gv=es-ai;function a1(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Xv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return a1;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class l1{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?a1:Xv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,f=i-e,s=r-n,u=a-e,c=l-n,h=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ai)if(!(Math.abs(c*f-s*u)>ai)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=i-a,p=r-l,m=f*f+s*s,b=d*d+p*p,_=Math.sqrt(m),g=Math.sqrt(h),v=o*Math.tan((ts-Math.acos((m+h-b)/(2*_*g)))/2),w=v/g,x=v/_;Math.abs(w-1)>ai&&this._append`L${e+w*u},${n+w*c}`,this._append`A${o},${o},0,0,${+(c*d>u*p)},${this._x1=e+x*f},${this._y1=n+x*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),f=i*Math.sin(r),s=e+l,u=n+f,c=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>ai||Math.abs(this._y1-u)>ai)&&this._append`L${s},${u}`,i&&(h<0&&(h=h%es+es),h>Gv?this._append`A${i},${i},0,1,${c},${e-l},${n-f}A${i},${i},0,1,${c},${this._x1=s},${this._y1=u}`:h>ai&&this._append`A${i},${i},0,${+(h>=ts)},${c},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Bn(t=3){return new l1(+t)}var bc={},rf={},of=34,yr=10,af=13;function f1(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function jv(t,e){var n=f1(t);return function(i,r){return e(n(i),r,t)}}function _c(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function ge(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Zv(t){return t<0?"-"+ge(-t,6):t>9999?"+"+ge(t,6):ge(t,4)}function Kv(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Zv(t.getUTCFullYear())+"-"+ge(t.getUTCMonth()+1,2)+"-"+ge(t.getUTCDate(),2)+(r?"T"+ge(e,2)+":"+ge(n,2)+":"+ge(i,2)+"."+ge(r,3)+"Z":i?"T"+ge(e,2)+":"+ge(n,2)+":"+ge(i,2)+"Z":n||e?"T"+ge(e,2)+":"+ge(n,2)+"Z":"")}function Jv(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(c,h){var d,p,m=r(c,function(b,_){if(d)return d(b,_-1);p=b,d=h?jv(b,h):f1(b)});return m.columns=p||[],m}function r(c,h){var d=[],p=c.length,m=0,b=0,_,g=p<=0,v=!1;c.charCodeAt(p-1)===yr&&--p,c.charCodeAt(p-1)===af&&--p;function w(){if(g)return rf;if(v)return v=!1,bc;var k,M=m,T;if(c.charCodeAt(M)===of){for(;m++<p&&c.charCodeAt(m)!==of||c.charCodeAt(++m)===of;);return(k=m)>=p?g=!0:(T=c.charCodeAt(m++))===yr?v=!0:T===af&&(v=!0,c.charCodeAt(m)===yr&&++m),c.slice(M+1,k-1).replace(/""/g,'"')}for(;m<p;){if((T=c.charCodeAt(k=m++))===yr)v=!0;else if(T===af)v=!0,c.charCodeAt(m)===yr&&++m;else if(T!==n)continue;return c.slice(M,k)}return g=!0,c.slice(M,p)}for(;(_=w())!==rf;){for(var x=[];_!==bc&&_!==rf;)x.push(_),_=w();h&&(x=h(x,b++))==null||d.push(x)}return d}function o(c,h){return c.map(function(d){return h.map(function(p){return u(d[p])}).join(t)})}function a(c,h){return h==null&&(h=_c(c)),[h.map(u).join(t)].concat(o(c,h)).join(`
`)}function l(c,h){return h==null&&(h=_c(c)),o(c,h).join(`
`)}function f(c){return c.map(s).join(`
`)}function s(c){return c.map(u).join(t)}function u(c){return c==null?"":c instanceof Date?Kv(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:r,format:a,formatBody:l,formatRows:f,formatRow:s,formatValue:u}}var Qv=Jv(","),t3=Qv.parse;function e3(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Sa(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Qi(t){return t=Sa(Math.abs(t)),t?t[1]:NaN}function n3(t,e){return function(n,i){for(var r=n.length,o=[],a=0,l=t[0],f=0;r>0&&l>0&&(f+l+1>i&&(l=Math.max(1,i-f)),o.push(n.substring(r-=l,r+l)),!((f+=l+1)>i));)l=t[a=(a+1)%t.length];return o.reverse().join(e)}}function i3(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var r3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vr(t){if(!(e=r3.exec(t)))throw new Error("invalid format: "+t);var e;return new Js({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vr.prototype=Js.prototype;function Js(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Js.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function o3(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var s1;function a3(t,e){var n=Sa(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(s1=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Sa(t,Math.max(0,e+o-1))[0]}function yc(t,e){var n=Sa(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const wc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:e3,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yc(t*100,e),r:yc,s:a3,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vc(t){return t}var xc=Array.prototype.map,kc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function l3(t){var e=t.grouping===void 0||t.thousands===void 0?vc:n3(xc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?vc:i3(xc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function s(c){c=Vr(c);var h=c.fill,d=c.align,p=c.sign,m=c.symbol,b=c.zero,_=c.width,g=c.comma,v=c.precision,w=c.trim,x=c.type;x==="n"?(g=!0,x="g"):wc[x]||(v===void 0&&(v=12),w=!0,x="g"),(b||h==="0"&&d==="=")&&(b=!0,h="0",d="=");var k=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",M=m==="$"?i:/[%p]/.test(x)?a:"",T=wc[x],C=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function L(A){var F=k,P=M,W,E,B;if(x==="c")P=T(A)+P,A="";else{A=+A;var z=A<0||1/A<0;if(A=isNaN(A)?f:T(Math.abs(A),v),w&&(A=o3(A)),z&&+A==0&&p!=="+"&&(z=!1),F=(z?p==="("?p:l:p==="-"||p==="("?"":p)+F,P=(x==="s"?kc[8+s1/3]:"")+P+(z&&p==="("?")":""),C){for(W=-1,E=A.length;++W<E;)if(B=A.charCodeAt(W),48>B||B>57){P=(B===46?r+A.slice(W+1):A.slice(W))+P,A=A.slice(0,W);break}}}g&&!b&&(A=e(A,1/0));var J=F.length+A.length+P.length,X=J<_?new Array(_-J+1).join(h):"";switch(g&&b&&(A=e(X+A,X.length?_-P.length:1/0),X=""),d){case"<":A=F+A+P+X;break;case"=":A=F+X+A+P;break;case"^":A=X.slice(0,J=X.length>>1)+F+A+P+X.slice(J);break;default:A=X+F+A+P;break}return o(A)}return L.toString=function(){return c+""},L}function u(c,h){var d=s((c=Vr(c),c.type="f",c)),p=Math.max(-8,Math.min(8,Math.floor(Qi(h)/3)))*3,m=Math.pow(10,-p),b=kc[8+p/3];return function(_){return d(m*_)+b}}return{format:s,formatPrefix:u}}var Bo,cr,u1;f3({thousands:",",grouping:[3],currency:["$",""]});function f3(t){return Bo=l3(t),cr=Bo.format,u1=Bo.formatPrefix,Bo}function s3(t){return Math.max(0,-Qi(Math.abs(t)))}function u3(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qi(e)/3)))*3-Qi(Math.abs(t)))}function c3(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qi(e)-Qi(t))+1}var xt=1e-6,c1=1e-12,St=Math.PI,qt=St/2,Mc=St/4,Ae=St*2,fe=180/St,Bt=St/180,Et=Math.abs,hr=Math.atan,$n=Math.atan2,Mt=Math.cos,h1=Math.exp,Ta=Math.log,lf=Math.pow,vt=Math.sin,Oe=Math.sign||function(t){return t>0?1:t<0?-1:0},Me=Math.sqrt,Qs=Math.tan;function d1(t){return t>1?0:t<-1?St:Math.acos(t)}function qe(t){return t>1?qt:t<-1?-qt:Math.asin(t)}function Ue(){}function Ca(t,e){t&&Tc.hasOwnProperty(t.type)&&Tc[t.type](t,e)}var Sc={Feature:function(t,e){Ca(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Ca(n[i].geometry,e)}},Tc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){ns(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)ns(n[i],e,0)},Polygon:function(t,e){Cc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Cc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Ca(n[i],e)}};function ns(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function Cc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)ns(t[n],e,1);e.polygonEnd()}function li(t,e){t&&Sc.hasOwnProperty(t.type)?Sc[t.type](t,e):Ca(t,e)}function is(t){return[$n(t[1],t[0]),qe(t[2])]}function tr(t){var e=t[0],n=t[1],i=Mt(n);return[i*Mt(e),i*vt(e),vt(n)]}function qo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Aa(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ff(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Wo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function rs(t){var e=Me(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function os(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function as(t,e){return Et(t)>St&&(t-=Math.round(t/Ae)*Ae),[t,e]}as.invert=as;function p1(t,e,n){return(t%=Ae)?e||n?os(Ec(t),$c(e,n)):Ec(t):e||n?$c(e,n):as}function Ac(t){return function(e,n){return e+=t,Et(e)>St&&(e-=Math.round(e/Ae)*Ae),[e,n]}}function Ec(t){var e=Ac(t);return e.invert=Ac(-t),e}function $c(t,e){var n=Mt(t),i=vt(t),r=Mt(e),o=vt(e);function a(l,f){var s=Mt(f),u=Mt(l)*s,c=vt(l)*s,h=vt(f),d=h*n+u*i;return[$n(c*r-d*o,u*n-h*i),qe(d*r+c*o)]}return a.invert=function(l,f){var s=Mt(f),u=Mt(l)*s,c=vt(l)*s,h=vt(f),d=h*r-c*o;return[$n(c*r+h*o,u*n+d*i),qe(d*n-u*i)]},a}function h3(t){t=p1(t[0]*Bt,t[1]*Bt,t.length>2?t[2]*Bt:0);function e(n){return n=t(n[0]*Bt,n[1]*Bt),n[0]*=fe,n[1]*=fe,n}return e.invert=function(n){return n=t.invert(n[0]*Bt,n[1]*Bt),n[0]*=fe,n[1]*=fe,n},e}function d3(t,e,n,i,r,o){if(n){var a=Mt(e),l=vt(e),f=i*n;r==null?(r=e+i*Ae,o=e-f/2):(r=Nc(a,r),o=Nc(a,o),(i>0?r<o:r>o)&&(r+=i*Ae));for(var s,u=r;i>0?u>o:u<o;u-=f)s=is([a,-l*Mt(u),-l*vt(u)]),t.point(s[0],s[1])}}function Nc(t,e){e=tr(e),e[0]-=t,rs(e);var n=d1(-e[1]);return((-e[2]<0?-n:n)+Ae-xt)%Ae}function m1(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Ue,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function sa(t,e){return Et(t[0]-e[0])<xt&&Et(t[1]-e[1])<xt}function Yo(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function g1(t,e,n,i,r){var o=[],a=[],l,f;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,b=p[0],_=p[m],g;if(sa(b,_)){if(!b[2]&&!_[2]){for(r.lineStart(),l=0;l<m;++l)r.point((b=p[l])[0],b[1]);r.lineEnd();return}_[0]+=2*xt}o.push(g=new Yo(b,p,null,!0)),a.push(g.o=new Yo(b,null,g,!1)),o.push(g=new Yo(_,p,null,!1)),a.push(g.o=new Yo(_,null,g,!0))}}),!!o.length){for(a.sort(e),Dc(o),Dc(a),l=0,f=a.length;l<f;++l)a[l].e=n=!n;for(var s=o[0],u,c;;){for(var h=s,d=!0;h.v;)if((h=h.n)===s)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(l=0,f=u.length;l<f;++l)r.point((c=u[l])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(u=h.p.z,l=u.length-1;l>=0;--l)r.point((c=u[l])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);r.lineEnd()}}}function Dc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function sf(t){return Et(t[0])<=St?t[0]:Oe(t[0])*((Et(t[0])+St)%Ae-St)}function p3(t,e){var n=sf(e),i=e[1],r=vt(i),o=[vt(n),-Mt(n),0],a=0,l=0,f=new gi;r===1?i=qt+xt:r===-1&&(i=-qt-xt);for(var s=0,u=t.length;s<u;++s)if(h=(c=t[s]).length)for(var c,h,d=c[h-1],p=sf(d),m=d[1]/2+Mc,b=vt(m),_=Mt(m),g=0;g<h;++g,p=w,b=k,_=M,d=v){var v=c[g],w=sf(v),x=v[1]/2+Mc,k=vt(x),M=Mt(x),T=w-p,C=T>=0?1:-1,L=C*T,A=L>St,F=b*k;if(f.add($n(F*C*vt(L),_*M+F*Mt(L))),a+=A?T+C*Ae:T,A^p>=n^w>=n){var P=Aa(tr(d),tr(v));rs(P);var W=Aa(o,P);rs(W);var E=(A^T>=0?-1:1)*qe(W[2]);(i>E||i===E&&(P[0]||P[1]))&&(l+=A^T>=0?1:-1)}}return(a<-xt||a<xt&&f<-c1)^l&1}function b1(t,e,n,i){return function(r){var o=e(r),a=m1(),l=e(a),f=!1,s,u,c,h={point:d,lineStart:m,lineEnd:b,polygonStart:function(){h.point=_,h.lineStart=g,h.lineEnd=v,u=[],s=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=b,u=M0(u);var w=p3(s,i);u.length?(f||(r.polygonStart(),f=!0),g1(u,g3,w,n,r)):w&&(f||(r.polygonStart(),f=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(w,x){t(w,x)&&r.point(w,x)}function p(w,x){o.point(w,x)}function m(){h.point=p,o.lineStart()}function b(){h.point=d,o.lineEnd()}function _(w,x){c.push([w,x]),l.point(w,x)}function g(){l.lineStart(),c=[]}function v(){_(c[0][0],c[0][1]),l.lineEnd();var w=l.clean(),x=a.result(),k,M=x.length,T,C,L;if(c.pop(),s.push(c),c=null,!!M){if(w&1){if(C=x[0],(T=C.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),k=0;k<T;++k)r.point((L=C[k])[0],L[1]);r.lineEnd()}return}M>1&&w&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(m3))}}return h}}function m3(t){return t.length>1}function g3(t,e){return((t=t.x)[0]<0?t[1]-qt-xt:qt-t[1])-((e=e.x)[0]<0?e[1]-qt-xt:qt-e[1])}const Fc=b1(function(){return!0},b3,y3,[-St,-qt]);function b3(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var l=o>0?St:-St,f=Et(o-e);Et(f-St)<xt?(t.point(e,n=(n+a)/2>0?qt:-qt),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),r=0):i!==l&&f>=St&&(Et(e-i)<xt&&(e-=i*xt),Et(o-l)<xt&&(o-=l*xt),n=_3(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),r=0),t.point(e=o,n=a),i=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function _3(t,e,n,i){var r,o,a=vt(t-n);return Et(a)>xt?hr((vt(e)*(o=Mt(i))*vt(n)-vt(i)*(r=Mt(e))*vt(t))/(r*o*a)):(e+i)/2}function y3(t,e,n,i){var r;if(t==null)r=n*qt,i.point(-St,r),i.point(0,r),i.point(St,r),i.point(St,0),i.point(St,-r),i.point(0,-r),i.point(-St,-r),i.point(-St,0),i.point(-St,r);else if(Et(t[0]-e[0])>xt){var o=t[0]<e[0]?St:-St;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function w3(t){var e=Mt(t),n=6*Bt,i=e>0,r=Et(e)>xt;function o(u,c,h,d){d3(d,t,n,h,u,c)}function a(u,c){return Mt(u)*Mt(c)>e}function l(u){var c,h,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(b,_){var g=[b,_],v,w=a(b,_),x=i?w?0:s(b,_):w?s(b+(b<0?St:-St),_):0;if(!c&&(p=d=w)&&u.lineStart(),w!==d&&(v=f(c,g),(!v||sa(c,v)||sa(g,v))&&(g[2]=1)),w!==d)m=0,w?(u.lineStart(),v=f(g,c),u.point(v[0],v[1])):(v=f(c,g),u.point(v[0],v[1],2),u.lineEnd()),c=v;else if(r&&c&&i^w){var k;!(x&h)&&(k=f(g,c,!0))&&(m=0,i?(u.lineStart(),u.point(k[0][0],k[0][1]),u.point(k[1][0],k[1][1]),u.lineEnd()):(u.point(k[1][0],k[1][1]),u.lineEnd(),u.lineStart(),u.point(k[0][0],k[0][1],3)))}w&&(!c||!sa(c,g))&&u.point(g[0],g[1]),c=g,d=w,h=x},lineEnd:function(){d&&u.lineEnd(),c=null},clean:function(){return m|(p&&d)<<1}}}function f(u,c,h){var d=tr(u),p=tr(c),m=[1,0,0],b=Aa(d,p),_=qo(b,b),g=b[0],v=_-g*g;if(!v)return!h&&u;var w=e*_/v,x=-e*g/v,k=Aa(m,b),M=Wo(m,w),T=Wo(b,x);ff(M,T);var C=k,L=qo(M,C),A=qo(C,C),F=L*L-A*(qo(M,M)-1);if(!(F<0)){var P=Me(F),W=Wo(C,(-L-P)/A);if(ff(W,M),W=is(W),!h)return W;var E=u[0],B=c[0],z=u[1],J=c[1],X;B<E&&(X=E,E=B,B=X);var j=B-E,O=Et(j-St)<xt,Y=O||j<xt;if(!O&&J<z&&(X=z,z=J,J=X),Y?O?z+J>0^W[1]<(Et(W[0]-E)<xt?z:J):z<=W[1]&&W[1]<=J:j>St^(E<=W[0]&&W[0]<=B)){var Q=Wo(C,(-L+P)/A);return ff(Q,M),[W,is(Q)]}}}function s(u,c){var h=i?t:St-t,d=0;return u<-h?d|=1:u>h&&(d|=2),c<-h?d|=4:c>h&&(d|=8),d}return b1(a,l,o,i?[0,-t]:[-St,t-St])}function v3(t,e,n,i,r,o){var a=t[0],l=t[1],f=e[0],s=e[1],u=0,c=1,h=f-a,d=s-l,p;if(p=n-a,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<c&&(c=p)}else if(h>0){if(p>c)return;p>u&&(u=p)}if(p=r-a,!(!h&&p<0)){if(p/=h,h<0){if(p>c)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<c&&(c=p)}if(p=i-l,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<c&&(c=p)}else if(d>0){if(p>c)return;p>u&&(u=p)}if(p=o-l,!(!d&&p<0)){if(p/=d,d<0){if(p>c)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<c&&(c=p)}return u>0&&(t[0]=a+u*h,t[1]=l+u*d),c<1&&(e[0]=a+c*h,e[1]=l+c*d),!0}}}}}var Cr=1e9,Ho=-Cr;function _1(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,c,h){var d=0,p=0;if(s==null||(d=a(s,c))!==(p=a(u,c))||f(s,u)<0^c>0)do h.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+c+4)%4)!==p);else h.point(u[0],u[1])}function a(s,u){return Et(s[0]-t)<xt?u>0?0:3:Et(s[0]-n)<xt?u>0?2:1:Et(s[1]-e)<xt?u>0?1:0:u>0?3:2}function l(s,u){return f(s.x,u.x)}function f(s,u){var c=a(s,1),h=a(u,1);return c!==h?c-h:c===0?u[1]-s[1]:c===1?s[0]-u[0]:c===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,c=m1(),h,d,p,m,b,_,g,v,w,x,k,M={point:T,lineStart:F,lineEnd:P,polygonStart:L,polygonEnd:A};function T(E,B){r(E,B)&&u.point(E,B)}function C(){for(var E=0,B=0,z=d.length;B<z;++B)for(var J=d[B],X=1,j=J.length,O=J[0],Y,Q,at=O[0],nt=O[1];X<j;++X)Y=at,Q=nt,O=J[X],at=O[0],nt=O[1],Q<=i?nt>i&&(at-Y)*(i-Q)>(nt-Q)*(t-Y)&&++E:nt<=i&&(at-Y)*(i-Q)<(nt-Q)*(t-Y)&&--E;return E}function L(){u=c,h=[],d=[],k=!0}function A(){var E=C(),B=k&&E,z=(h=M0(h)).length;(B||z)&&(s.polygonStart(),B&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),z&&g1(h,l,E,o,s),s.polygonEnd()),u=s,h=d=p=null}function F(){M.point=W,d&&d.push(p=[]),x=!0,w=!1,g=v=NaN}function P(){h&&(W(m,b),_&&w&&c.rejoin(),h.push(c.result())),M.point=T,w&&u.lineEnd()}function W(E,B){var z=r(E,B);if(d&&p.push([E,B]),x)m=E,b=B,_=z,x=!1,z&&(u.lineStart(),u.point(E,B));else if(z&&w)u.point(E,B);else{var J=[g=Math.max(Ho,Math.min(Cr,g)),v=Math.max(Ho,Math.min(Cr,v))],X=[E=Math.max(Ho,Math.min(Cr,E)),B=Math.max(Ho,Math.min(Cr,B))];v3(J,X,t,e,n,i)?(w||(u.lineStart(),u.point(J[0],J[1])),u.point(X[0],X[1]),z||u.lineEnd(),k=!1):z&&(u.lineStart(),u.point(E,B),k=!1)}g=E,v=B,w=z}return M}}const ls=t=>t;var uf=new gi,fs=new gi,y1,w1,ss,us,Mn={point:Ue,lineStart:Ue,lineEnd:Ue,polygonStart:function(){Mn.lineStart=x3,Mn.lineEnd=M3},polygonEnd:function(){Mn.lineStart=Mn.lineEnd=Mn.point=Ue,uf.add(Et(fs)),fs=new gi},result:function(){var t=uf/2;return uf=new gi,t}};function x3(){Mn.point=k3}function k3(t,e){Mn.point=v1,y1=ss=t,w1=us=e}function v1(t,e){fs.add(us*t-ss*e),ss=t,us=e}function M3(){v1(y1,w1)}var er=1/0,Ea=er,Gr=-er,$a=Gr,Na={point:S3,lineStart:Ue,lineEnd:Ue,polygonStart:Ue,polygonEnd:Ue,result:function(){var t=[[er,Ea],[Gr,$a]];return Gr=$a=-(Ea=er=1/0),t}};function S3(t,e){t<er&&(er=t),t>Gr&&(Gr=t),e<Ea&&(Ea=e),e>$a&&($a=e)}var cs=0,hs=0,Ar=0,Da=0,Fa=0,Oi=0,ds=0,ps=0,Er=0,x1,k1,on,an,Re={point:xi,lineStart:Lc,lineEnd:Ic,polygonStart:function(){Re.lineStart=A3,Re.lineEnd=E3},polygonEnd:function(){Re.point=xi,Re.lineStart=Lc,Re.lineEnd=Ic},result:function(){var t=Er?[ds/Er,ps/Er]:Oi?[Da/Oi,Fa/Oi]:Ar?[cs/Ar,hs/Ar]:[NaN,NaN];return cs=hs=Ar=Da=Fa=Oi=ds=ps=Er=0,t}};function xi(t,e){cs+=t,hs+=e,++Ar}function Lc(){Re.point=T3}function T3(t,e){Re.point=C3,xi(on=t,an=e)}function C3(t,e){var n=t-on,i=e-an,r=Me(n*n+i*i);Da+=r*(on+t)/2,Fa+=r*(an+e)/2,Oi+=r,xi(on=t,an=e)}function Ic(){Re.point=xi}function A3(){Re.point=$3}function E3(){M1(x1,k1)}function $3(t,e){Re.point=M1,xi(x1=on=t,k1=an=e)}function M1(t,e){var n=t-on,i=e-an,r=Me(n*n+i*i);Da+=r*(on+t)/2,Fa+=r*(an+e)/2,Oi+=r,r=an*t-on*e,ds+=r*(on+t),ps+=r*(an+e),Er+=r*3,xi(on=t,an=e)}function S1(t){this._context=t}S1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ae);break}}},result:Ue};var ms=new gi,cf,T1,C1,$r,Nr,Xr={point:Ue,lineStart:function(){Xr.point=N3},lineEnd:function(){cf&&A1(T1,C1),Xr.point=Ue},polygonStart:function(){cf=!0},polygonEnd:function(){cf=null},result:function(){var t=+ms;return ms=new gi,t}};function N3(t,e){Xr.point=A1,T1=$r=t,C1=Nr=e}function A1(t,e){$r-=t,Nr-=e,ms.add(Me($r*$r+Nr*Nr)),$r=t,Nr=e}let Rc,La,Pc,Oc;class Uc{constructor(e){this._append=e==null?E1:D3(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Pc||this._append!==La){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Pc=i,La=this._append,Oc=this._,this._=r}this._+=Oc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function E1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function D3(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return E1;if(e!==Rc){const n=10**e;Rc=e,La=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return La}function ul(t,e){let n=3,i=4.5,r,o;function a(l){return l&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),li(l,r(o))),o.result()}return a.area=function(l){return li(l,r(Mn)),Mn.result()},a.measure=function(l){return li(l,r(Xr)),Xr.result()},a.bounds=function(l){return li(l,r(Na)),Na.result()},a.centroid=function(l){return li(l,r(Re)),Re.result()},a.projection=function(l){return arguments.length?(r=l==null?(t=null,ls):(t=l).stream,a):t},a.context=function(l){return arguments.length?(o=l==null?(e=null,new Uc(n)):new S1(e=l),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(o.pointRadius(+l),+l),a):i},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const f=Math.floor(l);if(!(f>=0))throw new RangeError(`invalid digits: ${l}`);n=f}return e===null&&(o=new Uc(n)),a},a.projection(t).digits(n).context(e)}function gs(t){return{stream:cl(t)}}function cl(t){return function(e){var n=new bs;for(var i in t)n[i]=t[i];return n.stream=e,n}}function bs(){}bs.prototype={constructor:bs,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tu(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),li(n,t.stream(Na)),e(Na.result()),i!=null&&t.clipExtent(i),t}function eu(t,e,n){return tu(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([l,f])},n)}function $1(t,e,n){return eu(t,[[0,0],e],n)}function N1(t,e,n){return tu(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];t.scale(150*o).translate([a,l])},n)}function D1(t,e,n){return tu(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],l=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}var zc=16,F3=Mt(30*Bt);function Bc(t,e){return+e?I3(t,e):L3(t)}function L3(t){return cl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function I3(t,e){function n(i,r,o,a,l,f,s,u,c,h,d,p,m,b){var _=s-i,g=u-r,v=_*_+g*g;if(v>4*e&&m--){var w=a+h,x=l+d,k=f+p,M=Me(w*w+x*x+k*k),T=qe(k/=M),C=Et(Et(k)-1)<xt||Et(o-c)<xt?(o+c)/2:$n(x,w),L=t(C,T),A=L[0],F=L[1],P=A-i,W=F-r,E=g*P-_*W;(E*E/v>e||Et((_*P+g*W)/v-.5)>.3||a*h+l*d+f*p<F3)&&(n(i,r,o,a,l,f,A,F,C,w/=M,x/=M,k,m,b),b.point(A,F),n(A,F,C,w,x,k,s,u,c,h,d,p,m,b))}}return function(i){var r,o,a,l,f,s,u,c,h,d,p,m,b={point:_,lineStart:g,lineEnd:w,polygonStart:function(){i.polygonStart(),b.lineStart=x},polygonEnd:function(){i.polygonEnd(),b.lineStart=g}};function _(T,C){T=t(T,C),i.point(T[0],T[1])}function g(){c=NaN,b.point=v,i.lineStart()}function v(T,C){var L=tr([T,C]),A=t(T,C);n(c,h,u,d,p,m,c=A[0],h=A[1],u=T,d=L[0],p=L[1],m=L[2],zc,i),i.point(c,h)}function w(){b.point=_,i.lineEnd()}function x(){g(),b.point=k,b.lineEnd=M}function k(T,C){v(r=T,C),o=c,a=h,l=d,f=p,s=m,b.point=v}function M(){n(c,h,u,d,p,m,o,a,r,l,f,s,zc,i),b.lineEnd=w,w()}return b}}var R3=cl({point:function(t,e){this.stream.point(t*Bt,e*Bt)}});function P3(t){return cl({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function O3(t,e,n,i,r){function o(a,l){return a*=i,l*=r,[e+t*a,n-t*l]}return o.invert=function(a,l){return[(a-e)/t*i,(n-l)/t*r]},o}function qc(t,e,n,i,r,o){if(!o)return O3(t,e,n,i,r);var a=Mt(o),l=vt(o),f=a*t,s=l*t,u=a/t,c=l/t,h=(l*n-a*e)/t,d=(l*e+a*n)/t;function p(m,b){return m*=i,b*=r,[f*m-s*b+e,n-s*m-f*b]}return p.invert=function(m,b){return[i*(u*m-c*b+h),r*(d-c*m-u*b)]},p}function ti(t){return F1(function(){return t})()}function F1(t){var e,n=150,i=480,r=250,o=0,a=0,l=0,f=0,s=0,u,c=0,h=1,d=1,p=null,m=Fc,b=null,_,g,v,w=ls,x=.5,k,M,T,C,L;function A(E){return T(E[0]*Bt,E[1]*Bt)}function F(E){return E=T.invert(E[0],E[1]),E&&[E[0]*fe,E[1]*fe]}A.stream=function(E){return C&&L===E?C:C=R3(P3(u)(m(k(w(L=E)))))},A.preclip=function(E){return arguments.length?(m=E,p=void 0,W()):m},A.postclip=function(E){return arguments.length?(w=E,b=_=g=v=null,W()):w},A.clipAngle=function(E){return arguments.length?(m=+E?w3(p=E*Bt):(p=null,Fc),W()):p*fe},A.clipExtent=function(E){return arguments.length?(w=E==null?(b=_=g=v=null,ls):_1(b=+E[0][0],_=+E[0][1],g=+E[1][0],v=+E[1][1]),W()):b==null?null:[[b,_],[g,v]]},A.scale=function(E){return arguments.length?(n=+E,P()):n},A.translate=function(E){return arguments.length?(i=+E[0],r=+E[1],P()):[i,r]},A.center=function(E){return arguments.length?(o=E[0]%360*Bt,a=E[1]%360*Bt,P()):[o*fe,a*fe]},A.rotate=function(E){return arguments.length?(l=E[0]%360*Bt,f=E[1]%360*Bt,s=E.length>2?E[2]%360*Bt:0,P()):[l*fe,f*fe,s*fe]},A.angle=function(E){return arguments.length?(c=E%360*Bt,P()):c*fe},A.reflectX=function(E){return arguments.length?(h=E?-1:1,P()):h<0},A.reflectY=function(E){return arguments.length?(d=E?-1:1,P()):d<0},A.precision=function(E){return arguments.length?(k=Bc(M,x=E*E),W()):Me(x)},A.fitExtent=function(E,B){return eu(A,E,B)},A.fitSize=function(E,B){return $1(A,E,B)},A.fitWidth=function(E,B){return N1(A,E,B)},A.fitHeight=function(E,B){return D1(A,E,B)};function P(){var E=qc(n,0,0,h,d,c).apply(null,e(o,a)),B=qc(n,i-E[0],r-E[1],h,d,c);return u=p1(l,f,s),M=os(e,B),T=os(u,M),k=Bc(M,x),W()}function W(){return C=L=null,A}return function(){return e=t.apply(this,arguments),A.invert=e.invert&&F,P()}}function nu(t){var e=0,n=St/3,i=F1(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*Bt,n=o[1]*Bt):[e*fe,n*fe]},r}function U3(t){var e=Mt(t);function n(i,r){return[i*e,vt(r)/e]}return n.invert=function(i,r){return[i/e,qe(r*e)]},n}function z3(t,e){var n=vt(t),i=(n+vt(e))/2;if(Et(i)<xt)return U3(t);var r=1+n*(2*i-n),o=Me(r)/i;function a(l,f){var s=Me(r-2*i*vt(f))/i;return[s*vt(l*=i),o-s*Mt(l)]}return a.invert=function(l,f){var s=o-f,u=$n(l,Et(s))*Oe(s);return s*i<0&&(u-=St*Oe(l)*Oe(s)),[u/i,qe((r-(l*l+s*s)*i*i)/(2*i))]},a}function Ia(){return nu(z3).scale(155.424).center([0,33.6442])}function L1(){return Ia().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function B3(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function q3(){var t,e,n=L1(),i,r=Ia().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Ia().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,s={point:function(h,d){f=[h,d]}};function u(h){var d=h[0],p=h[1];return f=null,i.point(d,p),f||(o.point(d,p),f)||(l.point(d,p),f)}u.invert=function(h){var d=n.scale(),p=n.translate(),m=(h[0]-p[0])/d,b=(h[1]-p[1])/d;return(b>=.12&&b<.234&&m>=-.425&&m<-.214?r:b>=.166&&b<.234&&m>=-.214&&m<-.115?a:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=B3([n.stream(e=h),r.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),c()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(s),o=r.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+xt,m+.12*d+xt],[p-.214*d-xt,m+.234*d-xt]]).stream(s),l=a.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+xt,m+.166*d+xt],[p-.115*d-xt,m+.234*d-xt]]).stream(s),c()},u.fitExtent=function(h,d){return eu(u,h,d)},u.fitSize=function(h,d){return $1(u,h,d)},u.fitWidth=function(h,d){return N1(u,h,d)},u.fitHeight=function(h,d){return D1(u,h,d)};function c(){return t=e=null,u}return u.scale(1070)}function I1(t){return function(e,n){var i=Mt(e),r=Mt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*vt(e),o*vt(n)]}}function ho(t){return function(e,n){var i=Me(e*e+n*n),r=t(i),o=vt(r),a=Mt(r);return[$n(e*o,i*a),qe(i&&n*o/i)]}}var R1=I1(function(t){return Me(2/(1+t))});R1.invert=ho(function(t){return 2*qe(t/2)});function W3(){return ti(R1).scale(124.75).clipAngle(180-.001)}var P1=I1(function(t){return(t=d1(t))&&t/vt(t)});P1.invert=ho(function(t){return t});function Y3(){return ti(P1).scale(79.4188).clipAngle(180-.001)}function hl(t,e){return[t,Ta(Qs((qt+e)/2))]}hl.invert=function(t,e){return[t,2*hr(h1(e))-qt]};function H3(){return O1(hl).scale(961/Ae)}function O1(t){var e=ti(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,l,f,s;e.scale=function(c){return arguments.length?(i(c),u()):i()},e.translate=function(c){return arguments.length?(r(c),u()):r()},e.center=function(c){return arguments.length?(n(c),u()):n()},e.clipExtent=function(c){return arguments.length?(c==null?a=l=f=s=null:(a=+c[0][0],l=+c[0][1],f=+c[1][0],s=+c[1][1]),u()):a==null?null:[[a,l],[f,s]]};function u(){var c=St*i(),h=e(h3(e.rotate()).invert([0,0]));return o(a==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===hl?[[Math.max(h[0]-c,a),l],[Math.min(h[0]+c,f),s]]:[[a,Math.max(h[1]-c,l)],[f,Math.min(h[1]+c,s)]])}return u()}function Vo(t){return Qs((qt+t)/2)}function V3(t,e){var n=Mt(t),i=t===e?vt(t):Ta(n/Mt(e))/Ta(Vo(e)/Vo(t)),r=n*lf(Vo(t),i)/i;if(!i)return hl;function o(a,l){r>0?l<-qt+xt&&(l=-qt+xt):l>qt-xt&&(l=qt-xt);var f=r/lf(Vo(l),i);return[f*vt(i*a),r-f*Mt(i*a)]}return o.invert=function(a,l){var f=r-l,s=Oe(i)*Me(a*a+f*f),u=$n(a,Et(f))*Oe(f);return f*i<0&&(u-=St*Oe(a)*Oe(f)),[u/i,2*hr(lf(r/s,1/i))-qt]},o}function G3(){return nu(V3).scale(109.5).parallels([30,30])}function Ra(t,e){return[t,e]}Ra.invert=Ra;function X3(){return ti(Ra).scale(152.63)}function j3(t,e){var n=Mt(t),i=t===e?vt(t):(n-Mt(e))/(e-t),r=n/i+t;if(Et(i)<xt)return Ra;function o(a,l){var f=r-l,s=i*a;return[f*vt(s),r-f*Mt(s)]}return o.invert=function(a,l){var f=r-l,s=$n(a,Et(f))*Oe(f);return f*i<0&&(s-=St*Oe(a)*Oe(f)),[s/i,r-Oe(i)*Me(a*a+f*f)]},o}function Z3(){return nu(j3).scale(131.154).center([0,13.9389])}var Rr=1.340264,Pr=-.081106,Or=893e-6,Ur=.003796,Pa=Me(3)/2,K3=12;function U1(t,e){var n=qe(Pa*vt(e)),i=n*n,r=i*i*i;return[t*Mt(n)/(Pa*(Rr+3*Pr*i+r*(7*Or+9*Ur*i))),n*(Rr+Pr*i+r*(Or+Ur*i))]}U1.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,l,f;o<K3&&(l=n*(Rr+Pr*i+r*(Or+Ur*i))-e,f=Rr+3*Pr*i+r*(7*Or+9*Ur*i),n-=a=l/f,i=n*n,r=i*i*i,!(Et(a)<c1));++o);return[Pa*t*(Rr+3*Pr*i+r*(7*Or+9*Ur*i))/Mt(n),qe(vt(n)/Pa)]};function J3(){return ti(U1).scale(177.158)}function z1(t,e){var n=Mt(e),i=Mt(t)*n;return[n*vt(t)/i,vt(e)/i]}z1.invert=ho(hr);function Q3(){return ti(z1).scale(144.049).clipAngle(60)}function B1(t,e){return[Mt(e)*vt(t),vt(e)]}B1.invert=ho(qe);function t6(){return ti(B1).scale(249.5).clipAngle(90+xt)}function q1(t,e){var n=Mt(e),i=1+Mt(t)*n;return[n*vt(t)/i,vt(e)/i]}q1.invert=ho(function(t){return 2*hr(t)});function e6(){return ti(q1).scale(250).clipAngle(142)}function W1(t,e){return[Ta(Qs((qt+e)/2)),-t]}W1.invert=function(t,e){return[-e,2*hr(h1(t))-qt]};function n6(){var t=O1(W1),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function gn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function dl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const _s=Symbol("implicit");function iu(){var t=new bi,e=[],n=[],i=_s;function r(o){let a=t.get(o);if(a===void 0){if(i!==_s)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new bi;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return iu(e,n).unknown(i)},gn.apply(r,arguments),r}function pl(){var t=iu().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,l=!1,f=0,s=0,u=.5;delete t.unknown;function c(){var h=e().length,d=r<i,p=d?r:i,m=d?i:r;o=(m-p)/Math.max(1,h-f+s*2),l&&(o=Math.floor(o)),p+=(m-p-o*(h-f))*u,a=o*(1-f),l&&(p=Math.round(p),a=Math.round(a));var b=Wf(h).map(function(_){return p+o*_});return n(d?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),c()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,c()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,l=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(l=!!h,c()):l},t.padding=function(h){return arguments.length?(f=Math.min(1,s=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(s=+h,c()):s},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),c()):u},t.copy=function(){return pl(e(),[i,r]).round(l).paddingInner(f).paddingOuter(s).align(u)},gn.apply(c(),arguments)}function Y1(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Y1(e())},t}function i6(){return Y1(pl.apply(null,arguments).paddingInner(1))}function r6(t){return function(){return t}}function ys(t){return+t}var Wc=[0,1];function ze(t){return t}function ws(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:r6(isNaN(e)?NaN:.5)}function o6(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function a6(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=ws(r,i),o=n(a,o)):(i=ws(i,r),o=n(o,a)),function(l){return o(i(l))}}function l6(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=ws(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(l){var f=Qa(t,l,1,i)-1;return o[f](r[f](l))}}function po(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ml(){var t=Wc,e=Wc,n=co,i,r,o,a=ze,l,f,s;function u(){var h=Math.min(t.length,e.length);return a!==ze&&(a=o6(t[0],t[h-1])),l=h>2?l6:a6,f=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=l(t.map(i),e,n)))(i(a(h)))}return c.invert=function(h){return a(r((s||(s=l(e,t.map(i),oe)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,ys),u()):t.slice()},c.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},c.rangeRound=function(h){return e=Array.from(h),n=Gs,u()},c.clamp=function(h){return arguments.length?(a=h?!0:ze,u()):a!==ze},c.interpolate=function(h){return arguments.length?(n=h,u()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,d){return i=h,r=d,u()}}function H1(){return ml()(ze,ze)}function f6(t,e,n,i){var r=Bf(t,e,n),o;switch(i=Vr(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=u3(r,a))&&(i.precision=o),u1(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=c3(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=s3(r))&&(i.precision=o-(i.type==="%")*2);break}}return cr(i)}function mo(t){var e=t.domain;return t.ticks=function(n){var i=e();return qr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return f6(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],l=i[o],f,s,u=10;for(l<a&&(s=a,a=l,l=s,s=r,r=o,o=s);u-- >0;){if(s=ba(a,l,n),s===f)return i[r]=a,i[o]=l,e(i);if(s>0)a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s;else if(s<0)a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s;else break;f=s}return t},t}function ru(){var t=H1();return t.copy=function(){return po(t,ru())},gn.apply(t,arguments),mo(t)}function V1(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,ys),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return V1(t).unknown(e)},t=arguments.length?Array.from(t,ys):[0,1],mo(n)}function G1(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function Yc(t){return Math.log(t)}function Hc(t){return Math.exp(t)}function s6(t){return-Math.log(-t)}function u6(t){return-Math.exp(-t)}function c6(t){return isFinite(t)?+("1e"+t):t<0?0:t}function h6(t){return t===10?c6:t===Math.E?Math.exp:e=>Math.pow(t,e)}function d6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Vc(t){return(e,n)=>-t(-e,n)}function X1(t){const e=t(Yc,Hc),n=e.domain;let i=10,r,o;function a(){return r=d6(i),o=h6(i),n()[0]<0?(r=Vc(r),o=Vc(o),t(s6,u6)):t(Yc,Hc),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const f=n();let s=f[0],u=f[f.length-1];const c=u<s;c&&([s,u]=[u,s]);let h=r(s),d=r(u),p,m;const b=l==null?10:+l;let _=[];if(!(i%1)&&d-h<b){if(h=Math.floor(h),d=Math.ceil(d),s>0){for(;h<=d;++h)for(p=1;p<i;++p)if(m=h<0?p/o(-h):p*o(h),!(m<s)){if(m>u)break;_.push(m)}}else for(;h<=d;++h)for(p=i-1;p>=1;--p)if(m=h>0?p/o(-h):p*o(h),!(m<s)){if(m>u)break;_.push(m)}_.length*2<b&&(_=qr(s,u,b))}else _=qr(h,d,Math.min(d-h,b)).map(o);return c?_.reverse():_},e.tickFormat=(l,f)=>{if(l==null&&(l=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Vr(f)).precision==null&&(f.trim=!0),f=cr(f)),l===1/0)return f;const s=Math.max(1,i*l/e.ticks().length);return u=>{let c=u/o(Math.round(r(u)));return c*i<i-.5&&(c*=i),c<=s?f(u):""}},e.nice=()=>n(G1(n(),{floor:l=>o(Math.floor(r(l))),ceil:l=>o(Math.ceil(r(l)))})),e}function j1(){const t=X1(ml()).domain([1,10]);return t.copy=()=>po(t,j1()).base(t.base()),gn.apply(t,arguments),t}function Gc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Xc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Z1(t){var e=1,n=t(Gc(e),Xc(e));return n.constant=function(i){return arguments.length?t(Gc(e=+i),Xc(e)):e},mo(n)}function K1(){var t=Z1(ml());return t.copy=function(){return po(t,K1()).constant(t.constant())},gn.apply(t,arguments)}function jc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function p6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function m6(t){return t<0?-t*t:t*t}function J1(t){var e=t(ze,ze),n=1;function i(){return n===1?t(ze,ze):n===.5?t(p6,m6):t(jc(n),jc(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},mo(e)}function Q1(){var t=J1(ml());return t.copy=function(){return po(t,Q1()).exponent(t.exponent())},gn.apply(t,arguments),t}function tp(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=i_(t,a/l);return o}function o(a){return a==null||isNaN(a=+a)?i:e[Qa(n,a)]}return o.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ve),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return tp().domain(t).range(e).unknown(i)},gn.apply(o,arguments)}function ep(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[Qa(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return ep().domain(t).range(e).unknown(n)},gn.apply(r,arguments)}const hf=new Date,df=new Date;function Xt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),l=r.ceil(o);return o-a<l-o?a:l},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,l)=>{const f=[];if(o=r.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return f;let s;do f.push(s=new Date(+o)),e(o,l),t(o);while(s<o&&o<a);return f},r.filter=o=>Xt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!o(a););else for(;--l>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(hf.setTime(+o),df.setTime(+a),t(hf),t(df),Math.floor(n(hf,df))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Oa=Xt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Oa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Xt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Oa);Oa.range;const Tn=1e3,Be=Tn*60,Cn=Be*60,Nn=Cn*24,ou=Nn*7,Zc=Nn*30,pf=Nn*365,je=Xt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Tn)},(t,e)=>(e-t)/Tn,t=>t.getUTCSeconds());je.range;const go=Xt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Tn)},(t,e)=>{t.setTime(+t+e*Be)},(t,e)=>(e-t)/Be,t=>t.getMinutes());go.range;const bo=Xt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Be)},(t,e)=>(e-t)/Be,t=>t.getUTCMinutes());bo.range;const _o=Xt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Tn-t.getMinutes()*Be)},(t,e)=>{t.setTime(+t+e*Cn)},(t,e)=>(e-t)/Cn,t=>t.getHours());_o.range;const yo=Xt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Cn)},(t,e)=>(e-t)/Cn,t=>t.getUTCHours());yo.range;const Ti=Xt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Be)/Nn,t=>t.getDate()-1);Ti.range;const gl=Xt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nn,t=>t.getUTCDate()-1);gl.range;const bl=Xt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nn,t=>Math.floor(t/Nn));bl.range;function Ci(t){return Xt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Be)/ou)}const nr=Ci(0),jr=Ci(1),np=Ci(2),ip=Ci(3),ki=Ci(4),rp=Ci(5),op=Ci(6);nr.range;jr.range;np.range;ip.range;ki.range;rp.range;op.range;function Ai(t){return Xt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ou)}const ir=Ai(0),Zr=Ai(1),ap=Ai(2),lp=Ai(3),Mi=Ai(4),fp=Ai(5),sp=Ai(6);ir.range;Zr.range;ap.range;lp.range;Mi.range;fp.range;sp.range;const wo=Xt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());wo.range;const vo=Xt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());vo.range;const Ke=Xt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ke.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ke.range;const Je=Xt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Je.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Xt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Je.range;function up(t,e,n,i,r,o){const a=[[je,1,Tn],[je,5,5*Tn],[je,15,15*Tn],[je,30,30*Tn],[o,1,Be],[o,5,5*Be],[o,15,15*Be],[o,30,30*Be],[r,1,Cn],[r,3,3*Cn],[r,6,6*Cn],[r,12,12*Cn],[i,1,Nn],[i,2,2*Nn],[n,1,ou],[e,1,Zc],[e,3,3*Zc],[t,1,pf]];function l(s,u,c){const h=u<s;h&&([s,u]=[u,s]);const d=c&&typeof c.range=="function"?c:f(s,u,c),p=d?d.range(s,+u+1):[];return h?p.reverse():p}function f(s,u,c){const h=Math.abs(u-s)/c,d=Ja(([,,b])=>b).right(a,h);if(d===a.length)return t.every(Bf(s/pf,u/pf,c));if(d===0)return Oa.every(Math.max(Bf(s,u,c),1));const[p,m]=a[h/a[d-1][2]<a[d][2]/h?d-1:d];return p.every(m)}return[l,f]}const[g6,cp]=up(Je,vo,ir,bl,yo,bo),[b6,_6]=up(Ke,wo,nr,Ti,_o,go);function mf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function y6(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,l=t.months,f=t.shortMonths,s=vr(r),u=xr(r),c=vr(o),h=xr(o),d=vr(a),p=xr(a),m=vr(l),b=xr(l),_=vr(f),g=xr(f),v={a:z,A:J,b:X,B:j,c:null,d:nh,e:nh,f:q6,g:J6,G:t4,H:U6,I:z6,j:B6,L:hp,m:W6,M:Y6,p:O,q:Y,Q:oh,s:ah,S:H6,u:V6,U:G6,V:X6,w:j6,W:Z6,x:null,X:null,y:K6,Y:Q6,Z:e4,"%":rh},w={a:Q,A:at,b:nt,B:V,c:null,d:ih,e:ih,f:o4,g:m4,G:b4,H:n4,I:i4,j:r4,L:pp,m:a4,M:l4,p:q,q:N,Q:oh,s:ah,S:f4,u:s4,U:u4,V:c4,w:h4,W:d4,x:null,X:null,y:p4,Y:g4,Z:_4,"%":rh},x={a:L,A,b:F,B:P,c:W,d:th,e:th,f:I6,g:Qc,G:Jc,H:eh,I:eh,j:N6,L:L6,m:$6,M:D6,p:C,q:E6,Q:P6,s:O6,S:F6,u:M6,U:S6,V:T6,w:k6,W:C6,x:E,X:B,y:Qc,Y:Jc,Z:A6,"%":R6};v.x=k(n,v),v.X=k(i,v),v.c=k(e,v),w.x=k(n,w),w.X=k(i,w),w.c=k(e,w);function k($,R){return function(tt){var U=[],mt=-1,rt=0,pt=$.length,ft,dt,Tt;for(tt instanceof Date||(tt=new Date(+tt));++mt<pt;)$.charCodeAt(mt)===37&&(U.push($.slice(rt,mt)),(dt=Kc[ft=$.charAt(++mt)])!=null?ft=$.charAt(++mt):dt=ft==="e"?" ":"0",(Tt=R[ft])&&(ft=Tt(tt,dt)),U.push(ft),rt=mt+1);return U.push($.slice(rt,mt)),U.join("")}}function M($,R){return function(tt){var U=wr(1900,void 0,1),mt=T(U,$,tt+="",0),rt,pt;if(mt!=tt.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(R&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(rt=gf(wr(U.y,0,1)),pt=rt.getUTCDay(),rt=pt>4||pt===0?Zr.ceil(rt):Zr(rt),rt=gl.offset(rt,(U.V-1)*7),U.y=rt.getUTCFullYear(),U.m=rt.getUTCMonth(),U.d=rt.getUTCDate()+(U.w+6)%7):(rt=mf(wr(U.y,0,1)),pt=rt.getDay(),rt=pt>4||pt===0?jr.ceil(rt):jr(rt),rt=Ti.offset(rt,(U.V-1)*7),U.y=rt.getFullYear(),U.m=rt.getMonth(),U.d=rt.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),pt="Z"in U?gf(wr(U.y,0,1)).getUTCDay():mf(wr(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(pt+5)%7:U.w+U.U*7-(pt+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,gf(U)):mf(U)}}function T($,R,tt,U){for(var mt=0,rt=R.length,pt=tt.length,ft,dt;mt<rt;){if(U>=pt)return-1;if(ft=R.charCodeAt(mt++),ft===37){if(ft=R.charAt(mt++),dt=x[ft in Kc?R.charAt(mt++):ft],!dt||(U=dt($,tt,U))<0)return-1}else if(ft!=tt.charCodeAt(U++))return-1}return U}function C($,R,tt){var U=s.exec(R.slice(tt));return U?($.p=u.get(U[0].toLowerCase()),tt+U[0].length):-1}function L($,R,tt){var U=d.exec(R.slice(tt));return U?($.w=p.get(U[0].toLowerCase()),tt+U[0].length):-1}function A($,R,tt){var U=c.exec(R.slice(tt));return U?($.w=h.get(U[0].toLowerCase()),tt+U[0].length):-1}function F($,R,tt){var U=_.exec(R.slice(tt));return U?($.m=g.get(U[0].toLowerCase()),tt+U[0].length):-1}function P($,R,tt){var U=m.exec(R.slice(tt));return U?($.m=b.get(U[0].toLowerCase()),tt+U[0].length):-1}function W($,R,tt){return T($,e,R,tt)}function E($,R,tt){return T($,n,R,tt)}function B($,R,tt){return T($,i,R,tt)}function z($){return a[$.getDay()]}function J($){return o[$.getDay()]}function X($){return f[$.getMonth()]}function j($){return l[$.getMonth()]}function O($){return r[+($.getHours()>=12)]}function Y($){return 1+~~($.getMonth()/3)}function Q($){return a[$.getUTCDay()]}function at($){return o[$.getUTCDay()]}function nt($){return f[$.getUTCMonth()]}function V($){return l[$.getUTCMonth()]}function q($){return r[+($.getUTCHours()>=12)]}function N($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var R=k($+="",v);return R.toString=function(){return $},R},parse:function($){var R=M($+="",!1);return R.toString=function(){return $},R},utcFormat:function($){var R=k($+="",w);return R.toString=function(){return $},R},utcParse:function($){var R=M($+="",!0);return R.toString=function(){return $},R}}}var Kc={"-":"",_:" ",0:"0"},te=/^\s*\d+/,w6=/^%/,v6=/[\\^$*+?|[\]().{}]/g;function At(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function x6(t){return t.replace(v6,"\\$&")}function vr(t){return new RegExp("^(?:"+t.map(x6).join("|")+")","i")}function xr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function k6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function M6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function S6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function T6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function C6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Jc(t,e,n){var i=te.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Qc(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function A6(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function E6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function $6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function th(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function N6(t,e,n){var i=te.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function eh(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function D6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function F6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function L6(t,e,n){var i=te.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function I6(t,e,n){var i=te.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function R6(t,e,n){var i=w6.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function P6(t,e,n){var i=te.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function O6(t,e,n){var i=te.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function nh(t,e){return At(t.getDate(),e,2)}function U6(t,e){return At(t.getHours(),e,2)}function z6(t,e){return At(t.getHours()%12||12,e,2)}function B6(t,e){return At(1+Ti.count(Ke(t),t),e,3)}function hp(t,e){return At(t.getMilliseconds(),e,3)}function q6(t,e){return hp(t,e)+"000"}function W6(t,e){return At(t.getMonth()+1,e,2)}function Y6(t,e){return At(t.getMinutes(),e,2)}function H6(t,e){return At(t.getSeconds(),e,2)}function V6(t){var e=t.getDay();return e===0?7:e}function G6(t,e){return At(nr.count(Ke(t)-1,t),e,2)}function dp(t){var e=t.getDay();return e>=4||e===0?ki(t):ki.ceil(t)}function X6(t,e){return t=dp(t),At(ki.count(Ke(t),t)+(Ke(t).getDay()===4),e,2)}function j6(t){return t.getDay()}function Z6(t,e){return At(jr.count(Ke(t)-1,t),e,2)}function K6(t,e){return At(t.getFullYear()%100,e,2)}function J6(t,e){return t=dp(t),At(t.getFullYear()%100,e,2)}function Q6(t,e){return At(t.getFullYear()%1e4,e,4)}function t4(t,e){var n=t.getDay();return t=n>=4||n===0?ki(t):ki.ceil(t),At(t.getFullYear()%1e4,e,4)}function e4(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+At(e/60|0,"0",2)+At(e%60,"0",2)}function ih(t,e){return At(t.getUTCDate(),e,2)}function n4(t,e){return At(t.getUTCHours(),e,2)}function i4(t,e){return At(t.getUTCHours()%12||12,e,2)}function r4(t,e){return At(1+gl.count(Je(t),t),e,3)}function pp(t,e){return At(t.getUTCMilliseconds(),e,3)}function o4(t,e){return pp(t,e)+"000"}function a4(t,e){return At(t.getUTCMonth()+1,e,2)}function l4(t,e){return At(t.getUTCMinutes(),e,2)}function f4(t,e){return At(t.getUTCSeconds(),e,2)}function s4(t){var e=t.getUTCDay();return e===0?7:e}function u4(t,e){return At(ir.count(Je(t)-1,t),e,2)}function mp(t){var e=t.getUTCDay();return e>=4||e===0?Mi(t):Mi.ceil(t)}function c4(t,e){return t=mp(t),At(Mi.count(Je(t),t)+(Je(t).getUTCDay()===4),e,2)}function h4(t){return t.getUTCDay()}function d4(t,e){return At(Zr.count(Je(t)-1,t),e,2)}function p4(t,e){return At(t.getUTCFullYear()%100,e,2)}function m4(t,e){return t=mp(t),At(t.getUTCFullYear()%100,e,2)}function g4(t,e){return At(t.getUTCFullYear()%1e4,e,4)}function b4(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Mi(t):Mi.ceil(t),At(t.getUTCFullYear()%1e4,e,4)}function _4(){return"+0000"}function rh(){return"%"}function oh(t){return+t}function ah(t){return Math.floor(+t/1e3)}var Li,au,xo;y4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function y4(t){return Li=y6(t),au=Li.format,Li.parse,xo=Li.utcFormat,Li.utcParse,Li}function w4(t){return new Date(t)}function v4(t){return t instanceof Date?+t:+new Date(+t)}function lu(t,e,n,i,r,o,a,l,f,s){var u=H1(),c=u.invert,h=u.domain,d=s(".%L"),p=s(":%S"),m=s("%I:%M"),b=s("%I %p"),_=s("%a %d"),g=s("%b %d"),v=s("%B"),w=s("%Y");function x(k){return(f(k)<k?d:l(k)<k?p:a(k)<k?m:o(k)<k?b:i(k)<k?r(k)<k?_:g:n(k)<k?v:w)(k)}return u.invert=function(k){return new Date(c(k))},u.domain=function(k){return arguments.length?h(Array.from(k,v4)):h().map(w4)},u.ticks=function(k){var M=h();return t(M[0],M[M.length-1],k??10)},u.tickFormat=function(k,M){return M==null?x:s(M)},u.nice=function(k){var M=h();return(!k||typeof k.range!="function")&&(k=e(M[0],M[M.length-1],k??10)),k?h(G1(M,k)):u},u.copy=function(){return po(u,lu(t,e,n,i,r,o,a,l,f,s))},u}function x4(){return gn.apply(lu(b6,_6,Ke,wo,nr,Ti,_o,go,je,au).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function k4(){return gn.apply(lu(g6,cp,Je,vo,ir,gl,yo,bo,je,xo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _l(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function yl(){var t=0,e=.5,n=1,i=1,r,o,a,l,f,s=ze,u,c=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(i*m<i*o?l:f),s(c?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(c=!!m,d):c},d.interpolator=function(m){return arguments.length?(s=m,d):s};function p(m){return function(b){var _,g,v;return arguments.length?([_,g,v]=b,s=ll(m,[_,g,v]),d):[s(0),s(.5),s(1)]}}return d.range=p(co),d.rangeRound=p(Gs),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return u=m,r=m(t),o=m(e),a=m(n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,d}}function gp(){var t=mo(yl()(ze));return t.copy=function(){return _l(t,gp())},dl.apply(t,arguments)}function bp(){var t=X1(yl()).domain([.1,1,10]);return t.copy=function(){return _l(t,bp()).base(t.base())},dl.apply(t,arguments)}function _p(){var t=Z1(yl());return t.copy=function(){return _l(t,_p()).constant(t.constant())},dl.apply(t,arguments)}function yp(){var t=J1(yl());return t.copy=function(){return _l(t,yp()).exponent(t.exponent())},dl.apply(t,arguments)}function kt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const M4=kt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),S4=kt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),T4=kt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),C4=kt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),A4=kt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),E4=kt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),$4=kt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),N4=kt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),D4=kt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),F4=kt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Nt=t=>_w(t[t.length-1]);var wp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(kt);const vp=Nt(wp);var xp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(kt);const kp=Nt(xp);var Mp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(kt);const Sp=Nt(Mp);var Tp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(kt);const Cp=Nt(Tp);var vs=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(kt);const Ua=Nt(vs);var Ap=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(kt);const Ep=Nt(Ap);var xs=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(kt);const za=Nt(xs);var $p=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(kt);const Np=Nt($p);var Dp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(kt);const Fp=Nt(Dp);var Lp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(kt);const Ip=Nt(Lp);var Rp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(kt);const Pp=Nt(Rp);var Op=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(kt);const Up=Nt(Op);var zp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(kt);const Bp=Nt(zp);var qp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(kt);const Wp=Nt(qp);var Yp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(kt);const Hp=Nt(Yp);var Vp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(kt);const Gp=Nt(Vp);var Xp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(kt);const jp=Nt(Xp);var Zp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(kt);const Kp=Nt(Zp);var Jp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(kt);const Qp=Nt(Jp);var tm=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(kt);const em=Nt(tm);var nm=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(kt);const im=Nt(nm);var rm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(kt);const om=Nt(rm);var am=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(kt);const lm=Nt(am);var fm=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(kt);const sm=Nt(fm);var um=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(kt);const cm=Nt(um);var hm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(kt);const dm=Nt(hm);var pm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(kt);const mm=Nt(pm);function gm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const bm=Xs(dn(300,.5,0),dn(-240,.5,1));var _m=Xs(dn(-100,.75,.35),dn(80,1.5,.8)),ym=Xs(dn(260,.75,.35),dn(80,1.5,.8)),Go=dn();function wm(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Go.h=360*t-100,Go.s=1.5-1.5*e,Go.l=.8-.9*e,Go+""}var Xo=jn(),L4=Math.PI/3,I4=Math.PI*2/3;function vm(t){var e;return t=(.5-t)*Math.PI,Xo.r=255*(e=Math.sin(t))*e,Xo.g=255*(e=Math.sin(t+L4))*e,Xo.b=255*(e=Math.sin(t+I4))*e,Xo+""}function xm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function wl(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const km=wl(kt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Mm=wl(kt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Sm=wl(kt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Tm=wl(kt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Kt(t){return function(){return t}}const Cm=Math.cos,fu=Math.min,Ba=Math.sin,jt=Math.sqrt,lh=1e-12,qa=Math.PI,vl=2*qa;function Am(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new l1(e)}function Em(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function $m(t){this._context=t}$m.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ko(t){return new $m(t)}function Nm(t){return t[0]}function Dm(t){return t[1]}function Fm(t,e){var n=Kt(!0),i=null,r=ko,o=null,a=Am(l);t=typeof t=="function"?t:t===void 0?Nm:Kt(t),e=typeof e=="function"?e:e===void 0?Dm:Kt(e);function l(f){var s,u=(f=Em(f)).length,c,h=!1,d;for(i==null&&(o=r(d=a())),s=0;s<=u;++s)!(s<u&&n(c=f[s],s,f))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,f),+e(c,s,f));if(d)return o=null,d+""||null}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Kt(+f),l):t},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Kt(+f),l):e},l.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Kt(!!f),l):n},l.curve=function(f){return arguments.length?(r=f,i!=null&&(o=r(i)),l):r},l.context=function(f){return arguments.length?(f==null?i=o=null:o=r(i=f),l):i},l}function R4(t,e,n){var i=null,r=Kt(!0),o=null,a=ko,l=null,f=Am(s);t=typeof t=="function"?t:t===void 0?Nm:Kt(+t),e=typeof e=="function"?e:Kt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Dm:Kt(+n);function s(c){var h,d,p,m=(c=Em(c)).length,b,_=!1,g,v=new Array(m),w=new Array(m);for(o==null&&(l=a(g=f())),h=0;h<=m;++h){if(!(h<m&&r(b=c[h],h,c))===_)if(_=!_)d=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=h-1;p>=d;--p)l.point(v[p],w[p]);l.lineEnd(),l.areaEnd()}_&&(v[h]=+t(b,h,c),w[h]=+e(b,h,c),l.point(i?+i(b,h,c):v[h],n?+n(b,h,c):w[h]))}if(g)return l=null,g+""||null}function u(){return Fm().defined(r).curve(a).context(o)}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Kt(+c),i=null,s):t},s.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Kt(+c),s):t},s.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Kt(+c),s):i},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Kt(+c),n=null,s):e},s.y0=function(c){return arguments.length?(e=typeof c=="function"?c:Kt(+c),s):e},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Kt(+c),s):n},s.lineX0=s.lineY0=function(){return u().x(t).y(e)},s.lineY1=function(){return u().x(t).y(n)},s.lineX1=function(){return u().x(i).y(e)},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Kt(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,o!=null&&(l=a(o)),s):a},s.context=function(c){return arguments.length?(c==null?o=l=null:l=a(o=c),s):o},s}class Lm{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function P4(t){return new Lm(t,!0)}function O4(t){return new Lm(t,!1)}const U4=jt(3),Im={draw(t,e){const n=jt(e+fu(e/28,.75))*.59436,i=n/2,r=i*U4;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Kr={draw(t,e){const n=jt(e/qa);t.moveTo(n,0),t.arc(0,0,n,0,vl)}},Rm={draw(t,e){const n=jt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Pm=jt(1/3),z4=Pm*2,Om={draw(t,e){const n=jt(e/z4),i=n*Pm;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Um={draw(t,e){const n=jt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},zm={draw(t,e){const n=jt(e-fu(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Bm={draw(t,e){const n=jt(e),i=-n/2;t.rect(i,i,n,n)}},qm={draw(t,e){const n=jt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},B4=.8908130915292852,Wm=Ba(qa/10)/Ba(7*qa/10),q4=Ba(vl/10)*Wm,W4=-Cm(vl/10)*Wm,Ym={draw(t,e){const n=jt(e*B4),i=q4*n,r=W4*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=vl*o/5,l=Cm(a),f=Ba(a);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*r,f*i+l*r)}t.closePath()}},bf=jt(3),Hm={draw(t,e){const n=-jt(e/(bf*3));t.moveTo(0,n*2),t.lineTo(-bf*n,-n),t.lineTo(bf*n,-n),t.closePath()}},Y4=jt(3),Vm={draw(t,e){const n=jt(e)*.6824,i=n/2,r=n*Y4/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},Le=-.5,Ie=jt(3)/2,ks=1/jt(12),H4=(ks/2+1)*3,Gm={draw(t,e){const n=jt(e/H4),i=n/2,r=n*ks,o=i,a=n*ks+n,l=-o,f=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(l,f),t.lineTo(Le*i-Ie*r,Ie*i+Le*r),t.lineTo(Le*o-Ie*a,Ie*o+Le*a),t.lineTo(Le*l-Ie*f,Ie*l+Le*f),t.lineTo(Le*i+Ie*r,Le*r-Ie*i),t.lineTo(Le*o+Ie*a,Le*a-Ie*o),t.lineTo(Le*l+Ie*f,Le*f-Ie*l),t.closePath()}},Xm={draw(t,e){const n=jt(e-fu(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},V4=[Kr,Rm,Om,Bm,Ym,Hm,Gm],G4=[Kr,zm,Xm,Vm,Im,qm,Um];function Zn(){}function Wa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function xl(t){this._context=t}xl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function X4(t){return new xl(t)}function jm(t){this._context=t}jm.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Wa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function j4(t){return new jm(t)}function Zm(t){this._context=t}Zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Wa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Z4(t){return new Zm(t)}function Km(t,e){this._basis=new xl(t),this._beta=e}Km.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,l=-1,f;++l<=n;)f=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+f*o),this._beta*e[l]+(1-this._beta)*(r+f*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const K4=function t(e){function n(i){return e===1?new xl(i):new Km(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Ya(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function su(t,e){this._context=t,this._k=(1-e)/6}su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ya(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const J4=function t(e){function n(i){return new su(i,e)}return n.tension=function(i){return t(+i)},n}(0);function uu(t,e){this._context=t,this._k=(1-e)/6}uu.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Q4=function t(e){function n(i){return new uu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function cu(t,e){this._context=t,this._k=(1-e)/6}cu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const t5=function t(e){function n(i){return new cu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function hu(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>lh){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,r=(r*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>lh){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function Jm(t,e){this._context=t,this._alpha=e}Jm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:hu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const e5=function t(e){function n(i){return e?new Jm(i,e):new su(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Qm(t,e){this._context=t,this._alpha=e}Qm.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:hu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const n5=function t(e){function n(i){return e?new Qm(i,e):new uu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function tg(t,e){this._context=t,this._alpha=e}tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const i5=function t(e){function n(i){return e?new tg(i,e):new cu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function eg(t){this._context=t}eg.prototype={areaStart:Zn,areaEnd:Zn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function r5(t){return new eg(t)}function fh(t){return t<0?-1:1}function sh(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(o*r+a*i)/(i+r);return(fh(o)+fh(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function uh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _f(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,r+l*e,o-l,a-l*n,o,a)}function Ha(t){this._context=t}Ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_f(this,this._t0,uh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_f(this,uh(this,n=sh(this,t,e)),n);break;default:_f(this,this._t0,n=sh(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function ng(t){this._context=new ig(t)}(ng.prototype=Object.create(Ha.prototype)).point=function(t,e){Ha.prototype.point.call(this,e,t)};function ig(t){this._context=t}ig.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function o5(t){return new Ha(t)}function a5(t){return new ng(t)}function rg(t){this._context=t}rg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=ch(t),r=ch(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ch(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function l5(t){return new rg(t)}function kl(t,e){this._context=t,this._t=e}kl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function f5(t){return new kl(t,.5)}function s5(t){return new kl(t,0)}function u5(t){return new kl(t,1)}function Dr(t,e,n){this.k=t,this.x=e,this.y=n}Dr.prototype={constructor:Dr,scale:function(t){return t===1?this:new Dr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Dr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dr.prototype;function Kn(t){return t!=null&&!Number.isNaN(t)}function Qe(t,e){return+Kn(e)-+Kn(t)||ve(t,e)}function Va(t,e){return+Kn(e)-+Kn(t)||lo(t,e)}function du(t){return t!=null&&`${t}`!=""}function og(t){return isFinite(t)?t:NaN}function Ml(t){return t>0&&isFinite(t)?t:NaN}function pu(t){return t<0&&isFinite(t)?t:NaN}function c5(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${h5(t.getUTCFullYear())}-${kn(t.getUTCMonth()+1,2)}-${kn(t.getUTCDate(),2)}${n||i||r||o?`T${kn(n,2)}:${kn(i,2)}${r||o?`:${kn(r,2)}${o?`.${kn(o,3)}`:""}`:""}Z`:""}`}function h5(t){return t<0?`-${kn(-t,6)}`:t>9999?`+${kn(t,6)}`:kn(t,4)}function kn(t,e){return`${t}`.padStart(e,"0")}const d5=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ag(t,e){return d5.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Ui=1e3,qn=Ui*60,Wn=qn*60,pn=Wn*24,rn=pn*7,di=pn*30,zn=pn*365,yf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ui],["5 seconds",5*Ui],["15 seconds",15*Ui],["30 seconds",30*Ui],["minute",qn],["5 minutes",5*qn],["15 minutes",15*qn],["30 minutes",30*qn],["hour",Wn],["3 hours",3*Wn],["6 hours",6*Wn],["12 hours",12*Wn],["day",pn],["2 days",2*pn],["week",rn],["2 weeks",2*rn],["month",di],["3 months",3*di],["6 months",6*di],["year",zn],["2 years",2*zn],["5 years",5*zn],["10 years",10*zn],["20 years",20*zn],["50 years",50*zn],["100 years",100*zn]],mu=new Map([["second",Ui],["minute",qn],["hour",Wn],["day",pn],["monday",rn],["tuesday",rn],["wednesday",rn],["thursday",rn],["friday",rn],["saturday",rn],["sunday",rn],["week",rn],["month",di],["year",zn]]),lg=new Map([["second",je],["minute",go],["hour",_o],["day",Ti],["monday",jr],["tuesday",np],["wednesday",ip],["thursday",ki],["friday",rp],["saturday",op],["sunday",nr],["week",nr],["month",wo],["year",Ke]]),gu=new Map([["second",je],["minute",bo],["hour",yo],["day",bl],["monday",Zr],["tuesday",ap],["wednesday",lp],["thursday",Mi],["friday",fp],["saturday",sp],["sunday",ir],["week",ir],["month",vo],["year",Je]]),Mo=Symbol("intervalDuration"),Sl=Symbol("intervalType");for(const[t,e]of lg)e[Mo]=mu.get(t),e[Sl]="time";for(const[t,e]of gu)e[Mo]=mu.get(t),e[Sl]="utc";const Fr=[["year",Je,"utc"],["month",vo,"utc"],["day",bl,"utc",6*di],["hour",yo,"utc",3*pn],["minute",bo,"utc",6*Wn],["second",je,"utc",30*qn]],ua=[["year",Ke,"time"],["month",wo,"time"],["day",Ti,"time",6*di],["hour",_o,"time",3*pn],["minute",go,"time",6*Wn],["second",je,"time",30*qn]],p5=[Fr[0],ua[0],Fr[1],ua[1],Fr[2],ua[2],...Fr.slice(3)];function fg(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=gu.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function sg(t){return ug(fg(t),"time")}function bu(t){return ug(fg(t),"utc")}function ug([t,e],n){let i=(n==="time"?lg:gu).get(t);return e>1&&(i=i.every(e),i[Mo]=mu.get(t)*e,i[Sl]=n),i}function hh(t,e){if(!(e>1))return;const n=t[Mo];if(!yf.some(([,r])=>r===n)||n%pn===0&&pn<n&&n<di)return;const[i]=yf[Ja(([,r])=>Math.log(r)).center(yf,Math.log(n*e))];return(t[Sl]==="time"?sg:bu)(i)}function dh(t,e,n){const i=e==="time"?au:xo;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=m5(n);switch(t){case"millisecond":return Ii(i(".%L"),i(":%M:%S"),r);case"second":return Ii(i(":%S"),i("%-I:%M"),r);case"minute":return Ii(i("%-I:%M"),i("%p"),r);case"hour":return Ii(i("%-I %p"),i("%b %-d"),r);case"day":return Ii(i("%-d"),i("%b"),r);case"month":return Ii(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function m5(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function g5(t){return t==="time"?ua:t==="utc"?Fr:p5}function b5(t,e,n){const i=ke(l_(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return dh("millisecond","utc",n);for(const[r,o,a,l]of g5(t)){if(i>l||r==="hour"&&!i)break;if(e.every(f=>o.floor(f)>=f))return dh(r,a,n)}}function Ii(t,e,n){return(i,r,o)=>{const a=t(i,r),l=e(i,r),f=r-or(o);return r!==f&&o[f]!==void 0&&l===e(o[f],f)?a:n(a,l)}}const Jr=Object.getPrototypeOf(Uint8Array),_5=Object.prototype.toString,cg=Symbol("reindex");function Qt(t,e,n){const i=typeof e;return i==="string"?ph(t,hg(e),n):i==="function"?ph(t,e,n):i==="number"||e instanceof Date||i==="boolean"?Gt(t,So(e),n):typeof(e==null?void 0:e.transform)=="function"?mh(e.transform(t),n):y5(mh(e,n),t==null?void 0:t[cg])}function y5(t,e){return e?vu(t,e):t}function ph(t,e,n){return Gt(t,(n==null?void 0:n.prototype)instanceof Jr?w5(e):e,n)}function mh(t,e){return e===void 0?Ee(t):t instanceof e?t:e.prototype instanceof Jr&&!(t instanceof Jr)?e.from(t,yu):e.from(t)}function w5(t){return(e,n)=>yu(t(e,n))}const ca=[null],hg=t=>e=>e[t],Tl={transform:Fn},le={transform:t=>t},v5=()=>1,x5=()=>!0,se=t=>t==null?t:`${t}`,Rt=t=>t==null?t:+t,_u=t=>t?t[0]:void 0,Ms=t=>t?t[1]:void 0,So=t=>()=>t;function k5(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Xi(n,e,i)}function fn(t){return t instanceof Jr?t:Gt(t,yu,Float64Array)}function yu(t){return t==null?NaN:Number(t)}function M5(t){return Gt(t,dg)}function dg(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?ag(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Dn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Al(t)?[void 0,t]:[t,void 0]}function ue(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function pg(t,e,n){if(t!=null)return en(t,e,n)}function en(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Ee(t){return t==null||t instanceof Array||t instanceof Jr?t:Array.from(t)}function Gt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Qr(t,e=Array){return t instanceof e?t.slice():e.from(t)}function S5({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function mg({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function T5(t){return S5(t)||mg(t)||t.interval!==void 0}function ei(t){return(t==null?void 0:t.toString)===_5}function Ss(t){return ei(t)&&(t.type!==void 0||t.domain!==void 0)}function Cl(t){return ei(t)&&typeof t.transform!="function"}function rr(t){return Cl(t)&&t.value===void 0&&t.channel===void 0}function C5(t,e,n,i=le){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function To(t,e){return t===void 0&&e===void 0?[_u,Ms]:[t,e]}function wu({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Dn(e)),t===void 0&&([t]=Dn(n)),t}function Fn(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function vu(t,e){return Gt(e,n=>t[n],t.constructor)}function A5(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function ui(t){return t!==null&&typeof t=="object"?t.valueOf():t}function E5(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Ga(t){let e;return[{transform:()=>e,label:Ei(t)},n=>e=n]}function vn(t){return t==null?[t]:Ga(t)}function Ei(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function Ts(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return Se(i)||Se(r)?Gt(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):Gt(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function gg(t,e){const n=bg(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Gt(t,n):t}function bg(t,e){const n=xu(t,e);return n&&(i=>Kn(i)?n.floor(i):i)}function xu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Wf(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Wf(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?sg:bu)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function dr(t,e){if(t=xu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function $5(t,e){if(t=dr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function N5(t){return zi(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function zi(t){return typeof(t==null?void 0:t.range)=="function"}function Co(t){return t===void 0||Cl(t)?t:{value:t}}function D5(t){return t==null?null:{transform:e=>Qt(e,t,Float64Array),label:Ei(t)}}function ni(t){return t&&typeof t[Symbol.iterator]=="function"}function _g(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function gh(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Se(t){for(const e of t)if(e!=null)return e instanceof Date}function F5(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&ag(e)}function L5(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function I5(t){for(const e of t)if(e!=null)return typeof e=="number"}function wf(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const R5=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Al(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||R5.has(t))}function P5(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function be(t){return t==null||to(t)}function to(t){return/^\s*none\s*$/i.test(t)}function O5(t){return/^\s*round\s*$/i.test(t)}function Cs(t,e){return pg(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function El(t="middle"){return Cs(t,"frameAnchor")}function or(t){if(t==null)return;const e=t[0],n=t[t.length-1];return lo(e,n)}function U5(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function z5(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function yg(t){return ni(t)?z5(t):t}const sn=Symbol("position"),Ln=Symbol("color"),Ao=Symbol("radius"),Eo=Symbol("length"),$o=Symbol("opacity"),$l=Symbol("symbol"),wg=Symbol("projection"),Wt=new Map([["x",sn],["y",sn],["fx",sn],["fy",sn],["r",Ao],["color",Ln],["opacity",$o],["symbol",$l],["length",Eo],["projection",wg]]);function B5(t){return t===sn||t===wg}function q5(t){return t===sn||t===Ao||t===Eo||t===$o}const W5=Math.sqrt(3),Y5=2/W5,H5={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*Y5,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},ku=new Map([["asterisk",Im],["circle",Kr],["cross",Rm],["diamond",Om],["diamond2",Um],["hexagon",H5],["plus",zm],["square",Bm],["square2",qm],["star",Ym],["times",Xm],["triangle",Hm],["triangle2",Vm],["wye",Gm]]);function Mu(t){return t&&typeof t.draw=="function"}function V5(t){return Mu(t)?!0:typeof t!="string"?!1:ku.has(t.toLowerCase())}function Su(t){if(t==null||Mu(t))return t;const e=ku.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function G5(t){if(t==null||Mu(t))return[void 0,t];if(typeof t=="string"){const e=ku.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Nl({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=vg(t)),e!=null&&!rr(e)&&(i=vf(i,Tu(e))),n&&(i=vf(i,xg))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||rr(e))&&{sort:e},transform:vf(i,a)}}function ar({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=vg(t)),e!=null&&!rr(e)&&(i=xf(i,Tu(e))),n&&(i=xf(i,xg))),{...r,...(e===null||rr(e))&&{sort:e},initializer:xf(i,o)}}function vf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,Ee(n),i,r)}}function xf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,l,f,s,u,c;return{data:l=n,facets:f=i,channels:a}=t.call(this,n,i,r,...o),{data:u=l,facets:c=f,channels:s}=e.call(this,l,f,{...r,...a},...o),{data:u,facets:c,channels:{...a,...s}}}}function X5(t,e){return(t.initializer!=null?ar:Nl)(t,e)}function vg(t){return(e,n)=>{const i=Qt(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function xg(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function j5(t,{sort:e,...n}={}){return{...(Cl(t)&&t.channel!==void 0?ar:X5)(n,Tu(t)),sort:rr(e)?e:null}}function Tu(t){return(typeof t=="function"&&t.length!==1?Z5:K5)(t)}function Z5(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function K5(t){let e,n;({channel:e,value:t,order:n}={...Co(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Va:Qe),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Qe;break;case"descending":n=Va;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let l;if(e===void 0)l=Qt(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const f=(s,u)=>n(l[s],l[u]);return{data:r,facets:o.map(s=>s.slice().sort(f))}}}function jo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function J5(t,e,n=kg){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",o8]),e.href!=null&&t.href===void 0&&i.push(["href",Au]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?Q5(r):n(r,o,e))}function kg(t,e,n,i=Mg){let r;ei(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,l]=Ga(o.label);let f;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),f=l([])},scope(s,u){o.scope(s,u)},reduce(s,u){f.push(o.reduce(s,u))}}}function Q5(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Mg(t,e,n,i=Cu){const r=E5(t,n),o=i(e,r);let a,l;return{label:Ei(o===Xa?null:r,o.label),initialize(f){a=r===void 0?f:Qt(f,r),o.scope==="data"&&(l=o.reduceIndex(Fn(f),a))},scope(f,s){o.scope===f&&(l=o.reduceIndex(s,a))},reduce(f,s){return o.scope==null?o.reduceIndex(f,a,s):o.reduceIndex(f,a,l,s)}}}function bh(t,e){return e?Br(el(t,n=>e[n]),_u):[[,t]]}function Cu(t,e,n=t8){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ei(t))return i8(t);if(typeof t=="function")return r8(t);if(/^p\d{2}$/i.test(t))return xn(k5(t));switch(`${t}`.toLowerCase()){case"first":return Au;case"last":return a8;case"identity":return Sg;case"count":return Xa;case"distinct":return l8;case"sum":return e==null?Xa:f8;case"proportion":return yh(e,"data");case"proportion-facet":return yh(e,"facet");case"deviation":return xn(fo);case"min":return xn(An);case"min-index":return xn(n_);case"max":return xn(ke);case"max-index":return xn(e_);case"mean":return _h(Gn);case"median":return _h(qf);case"variance":return xn(Gi);case"mode":return xn(a_)}return n(t)}function t8(t){throw new Error(`invalid reduce: ${t}`)}function e8(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function n8(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>Qe(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function i8(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function r8(t){return{reduceIndex(e,n,i){return t(vu(n,e),i)}}}function xn(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function _h(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return Se(n)?new Date(i):i}}}const Sg={reduceIndex(t,e){return vu(e,t)}},Au={reduceIndex(t,e){return e[t[0]]}},o8={reduceIndex(t,e){const i=Br(qi(t,o=>o.length,o=>e[o]),Ms),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[`… ${o.length.toLocaleString("en-US")} more`,Xn(o,Ms)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},a8={reduceIndex(t,e){return e[t[t.length-1]]}},Xa={label:"Frequency",reduceIndex(t){return t.length}},l8={label:"Distinct",reduceIndex(t,e){const n=new tl;for(const i of t)n.add(e[i]);return n.size}},f8=xn(Xn);function yh(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>Xn(n,o=>i[o])/r}}function eo(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=Ei(i)},l){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),Tg(l,{scale:e,type:n,value:Qt(t,i),label:a,filter:r,hint:o})}function s8(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,eo(e,i,n)]))}function u8(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:Gt(o,a)]}));return n.channels=t,n}function Tg(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&wf(i,Al)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&wf(i,P5)?null:"opacity";break;case"symbol":n!==!0&&wf(i,V5)?(e.scale=null,e.value=Gt(i,Su)):e.scale="symbol";break;default:e.scale=Wt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Wt.has(n))throw new Error(`unknown scale: ${n}`);return e}function c8(t,e,n,i,r){const{order:o,reverse:a,reduce:l=!0,limit:f}=r;for(const s in r){if(!Wt.has(s))continue;let{value:u,order:c=o,reverse:h=a,reduce:d=l,limit:p=f}=Co(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),c=c===void 0?m!==(u==="width"||u==="height")?Ag:Cg:p8(c),d==null||d===!1)continue;const b=s==="fx"||s==="fy"?d8(e,i[s]):h8(n,s);if(!b)throw new Error(`missing channel for scale: ${s}`);const _=b.value,[g=0,v=1/0]=ni(p)?p:p<0?[p]:[0,p];if(u==null)b.domain=()=>{let w=Array.from(new tl(_));return h&&(w=w.reverse()),(g!==0||v!==1/0)&&(w=w.slice(g,v)),w};else{const w=u==="data"?t:u==="height"?wh(n,"y1","y2"):u==="width"?wh(n,"x1","x2"):As(n,u,u==="y"?"y2":u==="x"?"x2":void 0),x=Cu(d===!0?"max":d,w);b.domain=()=>{let k=jb(Fn(_),M=>x.reduceIndex(M,w),M=>_[M]);return c&&k.sort(c),h&&k.reverse(),(g!==0||v!==1/0)&&(k=k.slice(g,v)),k.map(_u)}}}}function h8(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function d8(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const l of t[o])r[l]=a}return e}function wh(t,e,n){const i=As(t,e),r=As(t,n);return Gt(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function As(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function p8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Cg;case"descending":return Ag}throw new Error(`invalid order: ${t}`)}function Cg([t,e],[n,i]){return Qe(e,i)||Qe(t,n)}function Ag([t,e],[n,i]){return Va(e,i)||Qe(t,n)}function vh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function m8(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const g8=m8(t=>new Intl.NumberFormat(t));function b8(t="en-US"){const e=g8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function _8(t){return c5(t,"Invalid Date")}function y8(t="en-US"){const e=b8(t);return n=>(n instanceof Date?_8:typeof n=="number"?e:se)(n)}const Si=y8();let Es=0,$s;function w8(){const t=Es;return Es=0,$s=void 0,t}function Yn(t){t!==$s&&($s=t,console.warn(t),++Es)}const ye=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let v8=0;function xh(){return`plot-clip-${++v8}`}function x8(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:l,fillOpacity:f,stroke:s,strokeWidth:u,strokeOpacity:c,strokeLinejoin:h,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:b,opacity:_,mixBlendMode:g,imageFilter:v,paintOrder:w,pointerEvents:x,shapeRendering:k,channels:M},{ariaLabel:T,fill:C="currentColor",fillOpacity:L,stroke:A="none",strokeOpacity:F,strokeWidth:P,strokeLinecap:W,strokeLinejoin:E,strokeMiterlimit:B,paintOrder:z}){C===null&&(l=null,f=null),A===null&&(s=null,c=null),be(C)?!be(A)&&(!be(l)||M!=null&&M.fill)&&(A="none"):be(A)&&(!be(s)||M!=null&&M.stroke)&&(C="none");const[J,X]=Dn(l,C),[j,O]=ue(f,L),[Y,Q]=Dn(s,A),[at,nt]=ue(c,F),[V,q]=ue(_);to(Q)||(u===void 0&&(u=P),d===void 0&&(d=W),h===void 0&&(h=E),p===void 0&&!O5(h)&&(p=B),!to(X)&&w===void 0&&(w=z));const[N,$]=ue(u);return C!==null&&(t.fill=ie(X,"currentColor"),t.fillOpacity=kr(O,1)),A!==null&&(t.stroke=ie(Q,"none"),t.strokeWidth=kr($,1),t.strokeOpacity=kr(nt,1),t.strokeLinejoin=ie(h,"miter"),t.strokeLinecap=ie(d,"butt"),t.strokeMiterlimit=kr(p,4),t.strokeDasharray=ie(m,"none"),t.strokeDashoffset=ie(b,"0")),t.target=se(a),t.ariaLabel=se(T),t.ariaDescription=se(r),t.ariaHidden=se(o),t.opacity=kr(q,1),t.mixBlendMode=ie(g,"normal"),t.imageFilter=ie(v,"none"),t.paintOrder=ie(w,"normal"),t.pointerEvents=ie(x,"auto"),t.shapeRendering=ie(k,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:J,scale:"auto",optional:!0},fillOpacity:{value:j,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:at,scale:"auto",optional:!0},strokeWidth:{value:N,optional:!0},opacity:{value:V,scale:"auto",optional:!0}}}function k8(t,e){e&&t.filter(n=>du(e[n])).append("title").call(S8,e)}function M8(t,e){e&&t.filter(([n])=>du(e[n])).append("title").call(T8,e)}function S8(t,e){e&&t.text(n=>Si(e[n]))}function T8(t,e){e&&t.text(([n])=>Si(e[n]))}function In(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&wt(t,"aria-label",h=>i[h]),o&&wt(t,"fill",h=>o[h]),a&&wt(t,"fill-opacity",h=>a[h]),l&&wt(t,"stroke",h=>l[h]),f&&wt(t,"stroke-opacity",h=>f[h]),s&&wt(t,"stroke-width",h=>s[h]),u&&wt(t,"opacity",h=>u[h]),c&&Dg(t,h=>c[h],e),n||k8(t,r)}function Eg(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&wt(t,"aria-label",([h])=>i[h]),o&&wt(t,"fill",([h])=>o[h]),a&&wt(t,"fill-opacity",([h])=>a[h]),l&&wt(t,"stroke",([h])=>l[h]),f&&wt(t,"stroke-opacity",([h])=>f[h]),s&&wt(t,"stroke-width",([h])=>s[h]),u&&wt(t,"opacity",([h])=>u[h]),c&&Dg(t,([h])=>c[h],e),n||M8(t,r)}function C8({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:l,href:f},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,l,f].filter(u=>u!==void 0)}function A8(t,e,n){const i=el(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Yn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*$g(t,e,n,i){const{z:r}=n,{z:o}=i,a=C8(i,n),l=[...e,...a];for(const f of o?A8(t,o,r):[t]){let s,u;t:for(const c of f){for(const h of l)if(!Kn(h[c])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(h=>ui(h[c])),u=[c];continue}u.push(c);for(let h=0;h<a.length;++h)if(ui(a[h][c])!==s[h]){yield u,s=a.map(p=>ui(p[c])),u=[c];continue t}}u&&(yield u)}}function Ng(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=en(t,"clip",["frame","sphere"])),t}function E8(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:l,marginLeft:f,marginRight:s,marginTop:u,marginBottom:c}=n,h=xh();r=`url(#${h})`,t=Yt("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",h).append("rect").attr("x",f).attr("y",u).attr("width",a-s-f).attr("height",l-u-c)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const l=xh();r=`url(#${l})`,t.append("clipPath").attr("id",l).append("path").attr("d",ul(a)({type:"Sphere"}));break}}wt(t,"aria-label",e.ariaLabel),wt(t,"aria-description",e.ariaDescription),wt(t,"aria-hidden",e.ariaHidden),wt(t,"clip-path",r)}function Ye(t,e,n,i){E8(t,e,n,i),wt(t,"fill",e.fill),wt(t,"fill-opacity",e.fillOpacity),wt(t,"stroke",e.stroke),wt(t,"stroke-width",e.strokeWidth),wt(t,"stroke-opacity",e.strokeOpacity),wt(t,"stroke-linejoin",e.strokeLinejoin),wt(t,"stroke-linecap",e.strokeLinecap),wt(t,"stroke-miterlimit",e.strokeMiterlimit),wt(t,"stroke-dasharray",e.strokeDasharray),wt(t,"stroke-dashoffset",e.strokeDashoffset),wt(t,"shape-rendering",e.shapeRendering),wt(t,"filter",e.imageFilter),wt(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;wt(t,"pointer-events",r)}function He(t,e){$8(t,"mix-blend-mode",e.mixBlendMode),wt(t,"opacity",e.opacity)}function Dg(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(ji.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(ji.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function wt(t,e,n){n!=null&&t.attr(e,n)}function $8(t,e,n){n!=null&&t.style(e,n)}function Ne(t,e,{x:n,y:i},r=ye,o=ye){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function ie(t,e){if((t=se(t))!==e)return t}function kr(t,e){if((t=Rt(t))!==e)return t}const N8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Eu(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!N8.test(t))throw new Error(`invalid class name: ${t}`);return t}function $u(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function No({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function Nu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Ng(n)}}function Yt(t,{document:e}){return Ir(rl(t).call(e.documentElement))}const Fg=Math.PI,_n=2*Fg,kh=.618;function D8({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,f,s="frame";if(ei(t)){let x;if({type:t,domain:f,inset:x,insetTop:n=x!==void 0?x:n,insetRight:i=x!==void 0?x:i,insetBottom:r=x!==void 0?x:r,insetLeft:o=x!==void 0?x:o,clip:s=s,...l}=t,t==null)return}typeof t!="function"&&({type:t}=Lg(t));const{width:u,height:c,marginLeft:h,marginRight:d,marginTop:p,marginBottom:m}=a,b=u-h-d-o-i,_=c-p-m-n-r;if(t=t==null?void 0:t({width:b,height:_,clip:s,...l}),t==null)return;s=F8(s,h,p,u-d,c-m);let g=h+o,v=p+n,w;if(f!=null){const[[x,k],[M,T]]=ul(t).bounds(f),C=Math.min(b/(M-x),_/(T-k));C>0?(g-=(C*(x+M)-b)/2,v-=(C*(k+T)-_)/2,w=gs({point(L,A){this.stream.point(L*C+g,A*C+v)}})):Yn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=g===0&&v===0?Ig():gs({point(x,k){this.stream.point(x+g,k+v)}})),{stream:x=>t.stream(w.stream(s(x)))}}function Lg(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Ve(q3,.7463,.4673);case"albers":return Zo(L1,.7463,.4673);case"azimuthal-equal-area":return Ve(W3,4,4);case"azimuthal-equidistant":return Ve(Y3,_n,_n);case"conic-conformal":return Zo(G3,_n,_n);case"conic-equal-area":return Zo(Ia,6.1702,2.9781);case"conic-equidistant":return Zo(Z3,7.312,3.6282);case"equal-earth":return Ve(J3,5.4133,2.6347);case"equirectangular":return Ve(X3,_n,Fg);case"gnomonic":return Ve(Q3,3.4641,3.4641);case"identity":return{type:Ig};case"reflect-y":return{type:L8};case"mercator":return Ve(H3,_n,_n);case"orthographic":return Ve(t6,2,2);case"stereographic":return Ve(e6,2,2);case"transverse-mercator":return Ve(n6,_n,_n);default:throw new Error(`unknown projection type: ${t}`)}}function F8(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return _1(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function Ve(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:l})=>{var s,u,c;const f=t();return a!=null&&((s=f.precision)==null||s.call(f,a)),o!=null&&((u=f.rotate)==null||u.call(f,o)),typeof l=="number"&&((c=f.clipAngle)==null||c.call(f,l)),f.scale(Math.min(i/e,r/n)),f.translate([i/2,r/2]),f},aspectRatio:n/e}}function Zo(t,e,n){const{type:i,aspectRatio:r}=Ve(t,e,n);return{type:o=>{const{parallels:a,domain:l,width:f,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),l===void 0&&u.fitSize([f,s],{type:"Sphere"})),u},aspectRatio:r}}const Ig=So({stream:t=>t}),L8=So(gs({point(t,e){this.stream.point(t,-e)}}));function I8(t,e,n,i){const r=n[t],o=n[e],a=r.length,l=n[t]=new Float64Array(a).fill(NaN),f=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(c,h){l[s]=c,f[s]=h}});for(s=0;s<a;++s)u.point(r[s],o[s])}function R8({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(ei(t)&&(t=t.type),t!=null)}function P8(t){if(typeof(t==null?void 0:t.stream)=="function")return kh;if(ei(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Lg(t);if(e)return e}return kh}}function O8(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)li(a,o);return[i,r]}const U8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Rg=new Map([["accent",S4],["category10",M4],["dark2",T4],["observable10",U8],["paired",C4],["pastel1",A4],["pastel2",E4],["set1",$4],["set2",N4],["set3",D4],["tableau10",F4]]);function z8(t){return t!=null&&Rg.has(`${t}`.toLowerCase())}const Mh=new Map([...Rg,["brbg",yn(wp,vp)],["prgn",yn(xp,kp)],["piyg",yn(Mp,Sp)],["puor",yn(Tp,Cp)],["rdbu",yn(vs,Ua)],["rdgy",yn(Ap,Ep)],["rdylbu",yn(xs,za)],["rdylgn",yn($p,Np)],["spectral",yn(Dp,Fp)],["burd",Sh(vs,Ua)],["buylrd",Sh(xs,za)],["blues",Zt(rm,om)],["greens",Zt(am,lm)],["greys",Zt(fm,sm)],["oranges",Zt(pm,mm)],["purples",Zt(um,cm)],["reds",Zt(hm,dm)],["turbo",wn(xm)],["viridis",wn(km)],["magma",wn(Mm)],["inferno",wn(Sm)],["plasma",wn(Tm)],["cividis",wn(gm)],["cubehelix",wn(bm)],["warm",wn(_m)],["cool",wn(ym)],["bugn",Zt(Lp,Ip)],["bupu",Zt(Rp,Pp)],["gnbu",Zt(Op,Up)],["orrd",Zt(zp,Bp)],["pubu",Zt(Yp,Hp)],["pubugn",Zt(qp,Wp)],["purd",Zt(Vp,Gp)],["rdpu",Zt(Xp,jp)],["ylgn",Zt(Jp,Qp)],["ylgnbu",Zt(Zp,Kp)],["ylorbr",Zt(tm,em)],["ylorrd",Zt(nm,im)],["rainbow",Th(wm)],["sinebow",Th(vm)]]);function Zt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ze(e,n):t[n])}function yn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ze(e,n):t[n])}function Sh(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ze(i=>e(1-i),n):t[n].slice().reverse())}function wn(t){return({length:e})=>Ze(t,Math.max(2,Math.floor(e)))}function Th(t){return({length:e})=>Ze(t,Math.floor(e)+1).slice(0,-1)}function Pg(t){const e=`${t}`.toLowerCase();if(!Mh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Mh.get(e)}function Dl(t,e){const n=Pg(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function B8(t,e="greys"){const n=new Set,[i,r]=Dl(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const Ch=new Map([["brbg",vp],["prgn",kp],["piyg",Sp],["puor",Cp],["rdbu",Ua],["rdgy",Ep],["rdylbu",za],["rdylgn",Np],["spectral",Fp],["burd",t=>Ua(1-t)],["buylrd",t=>za(1-t)],["blues",om],["greens",lm],["greys",sm],["purples",cm],["reds",dm],["oranges",mm],["turbo",xm],["viridis",km],["magma",Mm],["inferno",Sm],["plasma",Tm],["cividis",gm],["cubehelix",bm],["warm",_m],["cool",ym],["bugn",Ip],["bupu",Pp],["gnbu",Up],["orrd",Bp],["pubugn",Wp],["pubu",Hp],["purd",Gp],["rdpu",jp],["ylgnbu",Kp],["ylgn",Qp],["ylorbr",em],["ylorrd",im],["rainbow",wm],["sinebow",vm]]);function Du(t){const e=`${t}`.toLowerCase();if(!Ch.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Ch.get(e)}const q8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function W8(t){return t!=null&&q8.has(`${t}`.toLowerCase())}const Og=t=>e=>t(1-e),kf=[0,1],Ah=new Map([["number",oe],["rgb",wi],["hsl",Nw],["hcl",Lw],["lab",Dw]]);function Ug(t){const e=`${t}`.toLowerCase();if(!Ah.has(e))throw new Error(`unknown interpolator: ${e}`);return Ah.get(e)}function Do(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:l=Bg(t,n),unknown:f,round:s,scheme:u,interval:c,range:h=Wt.get(t)===Ao?t7(n,l):Wt.get(t)===Eo?e7(n,l):Wt.get(t)===$o?kf:void 0,interpolate:d=Wt.get(t)===Ln?u==null&&h!==void 0?wi:Du(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?Gs:oe,reverse:p}){if(c=dr(c,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=Ug(d)),p=!!p,h!==void 0){const m=(l=Ee(l)).length,b=(h=Ee(h)).length;if(m!==b){if(d.length===1)throw new Error("invalid piecewise interpolator");d=ll(d,h),h=void 0}}if(d.length===1?(p&&(d=Og(d),p=!1),h===void 0&&(h=Float64Array.from(l,(m,b)=>b/(l.length-1)),h.length===2&&(h=kf)),e.interpolate((h===kf?So:Lu)(d))):e.interpolate(d),a){const[m,b]=Pe(l);(m>0||b<0)&&(l=Qr(l),or(l)!==Math.sign(m)?l[l.length-1]=0:l[0]=0)}return p&&(l=_a(l)),e.domain(l).unknown(f),r&&(e.nice(Y8(r,i)),l=e.domain()),h!==void 0&&e.range(h),o&&e.clamp(o),{type:i,domain:l,range:h,scale:e,interpolate:d,interval:c}}function Y8(t,e){return t===!0?void 0:typeof t=="number"?t:$5(t,e)}function H8(t,e,n){return Do(t,ru(),e,n)}function V8(t,e,n){return zg(t,e,{...n,exponent:.5})}function zg(t,e,{exponent:n=1,...i}){return Do(t,Q1().exponent(n),e,{...i,type:"pow"})}function G8(t,e,{base:n=10,domain:i=n7(e),...r}){return Do(t,j1().base(n),e,{...r,domain:i})}function X8(t,e,{constant:n=1,...i}){return Do(t,K1().constant(n),e,i)}function j8(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=i7(e),unknown:l,interpolate:f,reverse:s}){return n===void 0&&(n=f!==void 0?Ze(f,r):Wt.get(t)===Ln?Dl(o,r):void 0),a.length>0&&(a=tp(a,n===void 0?{length:r}:n).quantiles()),Fu(t,e,{domain:a,range:n,reverse:s,unknown:l})}function Z8(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Bg(t,e),unknown:a,interpolate:l,reverse:f}){const[s,u]=Pe(o);let c;return n===void 0?(c=qr(s,u,i),c[0]<=s&&c.splice(0,1),c[c.length-1]>=u&&c.pop(),i=c.length+1,n=l!==void 0?Ze(l,i):Wt.get(t)===Ln?Dl(r,i):void 0):(c=Ze(oe(s,u),i+1).slice(1,-1),s instanceof Date&&(c=c.map(h=>new Date(h)))),or(Ee(o))<0&&c.reverse(),Fu(t,e,{domain:c,range:n,reverse:f,unknown:a})}function Fu(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?Ze(o,n.length+1):Wt.get(t)===Ln?Dl(r,n.length+1):void 0,reverse:l}){n=Ee(n);const f=or(n);if(!isNaN(f)&&!K8(n,f))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=_a(a)),{type:"threshold",scale:ep(f<0?_a(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function K8(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=lo(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function J8(t){return{type:"identity",scale:q5(Wt.get(t))?V1():e=>e}}function no(t,e=og){return t.length?[An(t,({value:n})=>n===void 0?n:An(n,e)),ke(t,({value:n})=>n===void 0?n:ke(n,e))]:[0,1]}function Bg(t,e){const n=Wt.get(t);return(n===Ao||n===$o||n===Eo?Q8:no)(e)}function Q8(t){return[0,t.length?ke(t,({value:e})=>e===void 0?e:ke(e,og)):1]}function t7(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Xi(t,.5,({value:a})=>a===void 0?NaN:Xi(a,.25,Ml)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ke(r);return o<1?r.map(a=>a*o):r}function e7(t,e){const n=qf(t,({value:o})=>o===void 0?NaN:qf(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ke(i);return r<1?i.map(o=>o*r):i}function n7(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return no(t,Ml);if(n<0)return no(t,pu)}return[1,10]}function i7(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function Lu(t){return(e,n)=>i=>t(e+i*(n-e))}function Fl(t,e,n,i,{type:r,nice:o,clamp:a,domain:l=no(i),unknown:f,pivot:s=0,scheme:u,range:c,symmetric:h=!0,interpolate:d=Wt.get(t)===Ln?u==null&&c!==void 0?wi:Du(u!==void 0?u:"rdbu"):oe,reverse:p}){s=+s,l=Ee(l);let[m,b]=l;if(l.length>2&&Yn(`Warning: the diverging ${t} scale domain contains extra elements.`),lo(m,b)<0&&([m,b]=[b,m],p=!p),m=Math.min(m,s),b=Math.max(b,s),typeof d!="function"&&(d=Ug(d)),c!==void 0&&(d=d.length===1?Lu(d)(...c):ll(d,c)),p&&(d=Og(d)),h){const _=n.apply(s),g=_-n.apply(m),v=n.apply(b)-_;g<v?m=n.invert(_-v):g>v&&(b=n.invert(_+g))}return e.domain([m,s,b]).unknown(f).interpolator(d),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,b],pivot:s,interpolate:d,scale:e}}function r7(t,e,n){return Fl(t,gp(),f7,e,n)}function o7(t,e,n){return qg(t,e,{...n,exponent:.5})}function qg(t,e,{exponent:n=1,...i}){return Fl(t,yp().exponent(n=+n),c7(n),e,{...i,type:"diverging-pow"})}function a7(t,e,{base:n=10,pivot:i=1,domain:r=no(e,i<0?pu:Ml),...o}){return Fl(t,bp().base(n=+n),s7,e,{domain:r,pivot:i,...o})}function l7(t,e,{constant:n=1,...i}){return Fl(t,_p().constant(n=+n),h7(n),e,i)}const f7={apply(t){return t},invert(t){return t}},s7={apply:Math.log,invert:Math.exp},u7={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function c7(t){return t===.5?u7:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function h7(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Wg(t,e,n,i){return Do(t,e,n,i)}function d7(t,e,n){return Wg(t,x4(),e,n)}function p7(t,e,n){return Wg(t,k4(),e,n)}const Fo=Symbol("ordinal");function Yg(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:l,hint:f}){return r=dr(r,i),o===void 0&&(o=Vg(n,r,t)),(i==="categorical"||i===Fo)&&(i="ordinal"),l&&(o=_a(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:f,interval:r}}function m7(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:l,...f}){i=dr(i,n),r===void 0&&(r=Vg(e,i,t));let s;if(Wt.get(t)===$l)s=_7(e),o=o===void 0?y7(s):Gt(o,Su);else if(Wt.get(t)===Ln&&(o===void 0&&(n==="ordinal"||n===Fo)&&(o=B8(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const u=Du(a),c=o[0],h=o[1]-o[0];o=({length:d})=>Ze(p=>u(c+h*p),d)}else o=Pg(a);if(l===_s)throw new Error(`implicit unknown on ${t} scale is not supported`);return Yg(t,iu().unknown(l),e,{...f,type:n,domain:r,range:o,hint:s})}function g7(t,e,{align:n=.5,padding:i=.5,...r}){return Hg(i6().align(n).padding(i),e,r,t)}function b7(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Hg(pl().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Hg(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=Yg(i,t,e,n),t.round=r,t}function Vg(t,e,n){const i=new tl;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=Pe(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&Wt.get(n)===sn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Br(i,Qe)}function Eh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function _7(t){return{fill:Eh(t,"fill"),stroke:Eh(t,"stroke")}}function y7(t){return be(t.fill)?G4:V4}function Ns(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:l,nice:f,clamp:s,zero:u,align:c,padding:h,projection:d,facet:{label:p=e}={},...m}={}){const b={};for(const[_,g]of t){const v=m[_],w=M7(_,g,{round:Wt.get(_)===sn?l:void 0,nice:f,clamp:s,zero:u,align:c,padding:h,projection:d,...v});if(w){let{label:x=_==="fx"||_==="fy"?p:e,percent:k,transform:M,inset:T,insetTop:C=T!==void 0?T:_==="y"?i:0,insetRight:L=T!==void 0?T:_==="x"?r:0,insetBottom:A=T!==void 0?T:_==="y"?o:0,insetLeft:F=T!==void 0?T:_==="x"?a:0}=v||{};if(M==null)M=void 0;else if(typeof M!="function")throw new Error("invalid scale transform; not a function");w.percent=!!k,w.label=x===void 0?v7(g,w):x,w.transform=M,_==="x"||_==="fx"?(w.insetLeft=+F,w.insetRight=+L):(_==="y"||_==="fy")&&(w.insetTop=+C,w.insetBottom=+A),b[_]=w}}return b}function $h(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:l,label:f}=r;e[i]=E7(r),n[i]=o,o.type=a,l!=null&&(o.interval=l),f!=null&&(o.label=f)}return n}function w7(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?Iu(e):e;r&&Nh(r,a),o&&Dh(o,a);const l=r||o?Gg(t,e):e;n&&Nh(n,l),i&&Dh(i,l)}function v7(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!$i(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function x7(t){return Math.sign(or(t.domain()))*Math.sign(or(t.range()))}function Iu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:l,marginRight:f,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,f),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function Gg({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Iu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:l,height:e?e.scale.bandwidth()+i+o:f,facet:{width:l,height:f}}}function Nh(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,l=o+n,f=r-a-i;t.range=[l,Math.max(l,f)],$i(t)||(t.range=jg(t)),t.scale.range(t.range)}Xg(t)}function Dh(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,l=o+n,f=r-a-i;t.range=[Math.max(l,f),l],$i(t)?t.range.reverse():t.range=jg(t),t.scale.range(t.range)}Xg(t)}function Xg(t){t.round===void 0&&T7(t)&&k7(t)<=30&&t.scale.round(!0)}function k7({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,l=Math.abs(i-n)/Math.max(1,a+o*2);return(l-Math.floor(l))*a}function jg(t){const e=t.scale.domain().length+Zg(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function M7(t,e=[],n={}){const i=S7(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&$i({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(Se)?Yn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Ri(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Ri(i)}".`):r.some(F5)?Yn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Ri(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Ri(i)}".`):r.some(L5)&&Yn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Ri(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Ri(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Ko(e,n,fn);break;case"identity":switch(Wt.get(t)){case sn:n=Ko(e,n,fn);break;case $l:n=Ko(e,n,C7);break}break;case"utc":case"time":n=Ko(e,n,M5);break}switch(i){case"diverging":return r7(t,e,n);case"diverging-sqrt":return o7(t,e,n);case"diverging-pow":return qg(t,e,n);case"diverging-log":return a7(t,e,n);case"diverging-symlog":return l7(t,e,n);case"categorical":case"ordinal":case Fo:return m7(t,e,n);case"cyclical":case"sequential":case"linear":return H8(t,e,n);case"sqrt":return V8(t,e,n);case"threshold":return Fu(t,e,n);case"quantile":return j8(t,e,n);case"quantize":return Z8(t,e,n);case"pow":return zg(t,e,n);case"log":return G8(t,e,n);case"symlog":return X8(t,e,n);case"utc":return p7(t,e,n);case"time":return d7(t,e,n);case"point":return g7(t,e,n);case"band":return b7(t,e,n);case"identity":return J8(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Ri(t){return typeof t=="symbol"?t.description:t}function Fh(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Lh={toString:()=>"projection"};function S7(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:l}){if(n=Fh(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=Lh);for(const s of e){const u=Fh(s.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===Lh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const f=Wt.get(t);if(f===Ao)return"sqrt";if(f===$o||f===Eo)return"linear";if(f===$l)return"ordinal";if((i||r||[]).length>2)return Mf(f);if(i!==void 0){if(gh(i))return Mf(f);if(Se(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(gh))return Mf(f);if(s.some(Se))return"utc"}if(f===Ln){if(a!=null||W8(o))return"diverging";if(z8(o))return"categorical"}return"linear"}function Mf(t){switch(t){case sn:return"point";case Ln:return Fo;default:return"ordinal"}}function $i({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Fo}function Zg({type:t}){return t==="threshold"}function T7({type:t}){return t==="point"||t==="band"}function lr(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Ko(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function C7(t){return Gt(t,Su)}function A7(t){return e=>{if(!Wt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function E7({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:l,pivot:f}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:Qr(n),...i!==void 0&&{range:Qr(i)},...a!==void 0&&{transform:a},...l&&{percent:l},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...f!==void 0&&{pivot:f,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function $7(t,e,n={}){let i=.5-ye,r=.5+ye,o=.5+ye,a=.5-ye;for(const{marginTop:m,marginRight:b,marginBottom:_,marginLeft:g}of e)m>i&&(i=m),b>r&&(r=b),_>o&&(o=_),g>a&&(a=g);let{margin:l,marginTop:f=l!==void 0?l:i,marginRight:s=l!==void 0?l:r,marginBottom:u=l!==void 0?l:o,marginLeft:c=l!==void 0?l:a}=n;f=+f,s=+s,u=+u,c=+c;let{width:h=640,height:d=N7(t,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,f-i+u-o)}=n;h=+h,d=+d;const p={width:h,height:d,marginTop:f,marginRight:s,marginBottom:u,marginLeft:c};if(t.fx||t.fy){let{margin:m,marginTop:b=m!==void 0?m:f,marginRight:_=m!==void 0?m:s,marginBottom:g=m!==void 0?m:u,marginLeft:v=m!==void 0?m:c}=n.facet??{};b=+b,_=+_,g=+g,v=+v,p.facet={marginTop:b,marginRight:_,marginBottom:g,marginLeft:v}}return p}function N7({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:l,marginRightDefault:f,marginBottomDefault:s,marginLeftDefault:u}){const c=n?n.scale.domain().length:1,h=P8(r);if(h){const p=i?i.scale.domain().length:1,m=(1.1*c-.1)/(1.1*p-.1)*h,b=Math.max(.1,Math.min(10,m));return Math.round((a-u-f)*b+l+s)}const d=e?$i(e)?e.scale.domain().length:Math.max(7,17/c):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=Ih("y",e)/(Ih("x",t)*o),m=i?i.scale.bandwidth():1,b=n?n.scale.bandwidth():1,_=m*(a-u-f)-t.insetLeft-t.insetRight;return(p*_+e.insetTop+e.insetBottom)/b+l+s}return!!(e||n)*Math.max(1,Math.min(60,d*c))*20+!!i*30+60}function Ih(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const l=e.scale.exponent();r=f=>Math.pow(f,l);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=Pe(i);return Math.abs(r(a)-r(o))}function D7(t,e){const{fx:n,fy:i}=Ns(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?Gb(r,o).map(([a,l],f)=>({x:a,y:l,i:f})):r?r.map((a,l)=>({x:a,i:l})):o?o.map((a,l)=>({y:a,i:l})):void 0}function F7(t,{x:e,y:n}){return e&&(e=Ds(e)),n&&(n=Ds(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Ru(t,{fx:e,fy:n}){const i=Fn(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?qi(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?qi(i,a=>(a.fx=r[a[0]],a),a=>r[a]):qi(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function L7(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function I7(t){const e=[],n=new Uint32Array(Xn(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const R7=new Map([["top",Sf],["right",Af],["bottom",Tf],["left",Cf],["top-left",Jo(Sf,Cf)],["top-right",Jo(Sf,Af)],["bottom-left",Jo(Tf,Cf)],["bottom-right",Jo(Tf,Af)],["top-empty",U7],["right-empty",q7],["bottom-empty",z7],["left-empty",B7],["empty",W7]]);function P7(t){if(t==null)return null;const e=R7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Rh=new WeakMap;function Ds(t){let e=Rh.get(t);return e||Rh.set(t,e=new bi(Gt(t,(n,i)=>[n,i]))),e}function ii(t,e){return Ds(t).get(e)}function O7(t,e,n){return e=ui(e),n=ui(n),t.find(i=>Object.is(ui(i.x),e)&&Object.is(ui(i.y),n))}function Ll(t,e,n){var i;return(i=O7(t,e,n))==null?void 0:i.empty}function Sf(t,{y:e},{y:n}){return e?ii(e,n)===0:!0}function Tf(t,{y:e},{y:n}){return e?ii(e,n)===e.length-1:!0}function Cf(t,{x:e},{x:n}){return e?ii(e,n)===0:!0}function Af(t,{x:e},{x:n}){return e?ii(e,n)===e.length-1:!0}function U7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ii(e,i);if(o>0)return Ll(t,n,e[o-1])}function z7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ii(e,i);if(o<e.length-1)return Ll(t,n,e[o+1])}function B7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ii(e,n);if(o>0)return Ll(t,e[o-1],i)}function q7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ii(e,n);if(o<e.length-1)return Ll(t,e[o+1],i)}function W7(t,e,{empty:n}){return n}function Jo(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Ef(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class ce{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:l,fy:f,sort:s,dx:u=0,dy:c=0,margin:h=0,marginTop:d=h,marginRight:p=h,marginBottom:m=h,marginLeft:b=h,clip:_=r==null?void 0:r.clip,channels:g,tip:v,render:w}=i;if(this.data=e,this.sort=rr(s)?s:null,this.initializer=ar(i).initializer,this.transform=this.initializer?i.transform:Nl(i).transform,o===null||o===!1?this.facet=null:(this.facet=en(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===ca&&typeof l=="string"?[l]:l,this.fy=e===ca&&typeof f=="string"?[f]:f),this.facetAnchor=P7(a),n=yg(n),g!==void 0&&(n={...Y7(g),...n}),r!==void 0&&(n={...x8(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,k])=>{if(Cl(k.value)){const{value:M,label:T=k.label,scale:C=k.scale}=k.value;k={...k,label:T,scale:C,value:M}}if(e===ca&&typeof k.value=="string"){const{value:M}=k;k={...k,value:[M]}}return[x,k]}).filter(([x,{value:k,optional:M}])=>{if(k!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+c,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+b,this.clip=Ng(_),this.tip=H7(v),this.facet==="super"){if(l||f)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:k}=n[x];if(!(k!=="x"&&k!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=Jg(w,this.render))}initialize(e,n,i){let r=Ee(this.data);e===void 0&&r!=null&&(e=[Fn(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=Ee(r)),e!==void 0&&(e.original=o);const a=s8(this.channels,r);return this.sort!=null&&c8(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=Kn}=n[r];if(o!==null){const a=i[r];e=e.filter(l=>o(a[l]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&I8(r,o,n,i.projection)}}scale(e,n,i){const r=u8(e,n);return i.projection&&this.project(e,r,i),r}}function Kg(...t){return t.plot=ce.prototype.plot,t}function Jg(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,l){return t.call(this,n,i,r,o,a,(f,s,u,c,h)=>e.call(this,f,s,u,c,h,l))}}function Y7(t){return Object.fromEntries(Object.entries(yg(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Co(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function H7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?en(t,"tip",["x","y","xy"]):t}function Il(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:ei(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const Ph=new WeakMap;function Pu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:l,render:f,...s}={}){return a=+a,r!=null&&(n??(n=null),l={...l,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),l={...l,py:{value:o,scale:"y"}}),{x:n,y:i,channels:l,...s,render:Jg(function(u,c,h,d,p,m){p={...p,pointerSticky:!1};const b=p.ownerSVGElement,{data:_}=p.getMarkState(this);let g=Ph.get(b);g||Ph.set(b,g={sticky:!1,roots:[],renders:[]});let v=g.renders.push(Q)-1;const{x:w,y:x,fx:k,fy:M}=c;let T=k?k(u.fx)-d.marginLeft:0,C=M?M(u.fy)-d.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),x!=null&&x.bandwidth&&(C+=x.bandwidth()/2);const L=u.fi!=null;let A;if(L){let q=g.facetStates;q||(g.facetStates=q=new Map),A=q.get(this),A||q.set(this,A=new Map)}const[F,P]=No(this,d),{px:W,py:E}=h,B=W?q=>W[q]:t2(h,F),z=E?q=>E[q]:e2(h,P);let J,X,j,O;function Y(q,N){if(L)if(O&&(O=cancelAnimationFrame(O)),q==null)A.delete(u.fi);else{A.set(u.fi,N),O=requestAnimationFrame(()=>{O=null;for(const[$,R]of A)if(R<N||R===N&&$<u.fi){q=null;break}Q(q)});return}Q(q)}function Q(q){if(J===q&&j===g.sticky)return;J=q,j=p.pointerSticky=g.sticky;const N=J==null?[]:[J];L&&(N.fx=u.fx,N.fy=u.fy,N.fi=u.fi);const $=m(N,c,h,d,p);if(X){if(L){const R=X.parentNode,tt=X.getAttribute("transform"),U=$.getAttribute("transform");tt?$.setAttribute("transform",tt):$.removeAttribute("transform"),U?R.setAttribute("transform",U):R.removeAttribute("transform"),$.removeAttribute("aria-label"),$.removeAttribute("aria-description"),$.removeAttribute("aria-hidden")}X.replaceWith($)}return g.roots[v]=X=$,J==null&&(A==null?void 0:A.size)>1||p.dispatchValue(J==null?null:_[J]),$}function at(q){if(g.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[N,$]=Qy(q);N-=T,$-=C;const R=N<d.marginLeft||N>d.width-d.marginRight?1:t,tt=$<d.marginTop||$>d.height-d.marginBottom?1:e;let U=null,mt=a*a;for(const rt of u){const pt=R*(B(rt)-N),ft=tt*(z(rt)-$),dt=pt*pt+ft*ft;dt<=mt&&(U=rt,mt=dt)}if(U!=null&&(t!==1||e!==1)){const rt=B(U)-N,pt=z(U)-$;mt=rt*rt+pt*pt}Y(U,mt)}function nt(q){q.pointerType==="mouse"&&J!=null&&(g.sticky&&g.roots.some(N=>N==null?void 0:N.contains(q.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(N=>N(null))):(g.sticky=!0,Q(J)),q.stopImmediatePropagation()))}function V(q){q.pointerType==="mouse"&&(g.sticky||Y(null))}return b.addEventListener("pointerenter",at),b.addEventListener("pointermove",at),b.addEventListener("pointerdown",nt),b.addEventListener("pointerleave",V),Q(null)},f)}}function Qg(t){return Pu(1,1,t)}function V7(t){return Pu(1,.01,t)}function Oh(t){return Pu(.01,1,t)}function t2({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function e2({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function n2(t){return $i(t)&&t.interval===void 0?void 0:"tabular-nums"}function G7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:l=0,marginBottom:f=16+i,marginLeft:s=0,style:u,ticks:c=(r-s-l)/64,tickFormat:h,fontVariant:d=n2(t),round:p=!0,opacity:m,className:b}=e;const _=Nu(e);b=Eu(b),m=ue(m)[1],h===null&&(h=()=>null);const g=Yt("svg",_).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(F=>F.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call($u,u);let v=F=>F.selectAll(".tick line").attr("y1",a+f-o),w;const x=p?(F,P)=>F.rangeRound(P):(F,P)=>F.range(P),{type:k,domain:M,range:T,interpolate:C,scale:L,pivot:A}=t;if(C){const F=T===void 0?C:ll(C.length===1?Lu(C):C,T);w=x(L.copy(),Ze(oe(s,r-l),Math.min(M.length+(A!==void 0),T===void 0?1/0:T.length)));const P=256,W=_.document.createElement("canvas");W.width=P,W.height=1;const E=W.getContext("2d");for(let B=0,z=P-1;B<P;++B)E.fillStyle=F(B/z),E.fillRect(B,0,1,1);g.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-l).attr("height",o-a-f).attr("preserveAspectRatio","none").attr("xlink:href",W.toDataURL())}else if(k==="threshold"){const F=M,P=h===void 0?W=>W:typeof h=="string"?cr(h):h;w=x(ru().domain([-1,T.length-1]),[s,r-l]),g.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",(W,E)=>w(E-1)).attr("y",a).attr("width",(W,E)=>w(E)-w(E-1)).attr("height",o-a-f).attr("fill",W=>W),c=Gt(F,(W,E)=>E),h=W=>P(F[W],W)}else w=x(pl().domain(M),[s,r-l]),g.append("g").attr("fill-opacity",m).selectAll().data(M).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-f).attr("fill",L),v=()=>{};return g.append("g").attr("transform",`translate(0,${o-f})`).call(g_(w).ticks(Array.isArray(c)?null:c,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(c)?c:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ie(d,"normal")).call(v).call(F=>F.select(".domain").remove()),n!==void 0&&g.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),g.node()}const i2=Math.PI/180;function Lo(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=$f(n),t.markerMid=$f(i),t.markerEnd=$f(r)}function $f(t){if(t==null||t===!1)return null;if(t===!0)return zh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Uh("auto");case"arrow-reverse":return Uh("auto-start-reverse");case"dot":return X7;case"circle":case"circle-fill":return zh;case"circle-stroke":return j7;case"tick":return Nf("auto");case"tick-x":return Nf(90);case"tick-y":return Nf(0)}throw new Error(`invalid marker: ${t}`)}function Uh(t){return(e,n)=>Yt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function X7(t,e){return Yt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function zh(t,e){return Yt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function j7(t,e){return Yt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Nf(t){return(e,n)=>Yt("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let Z7=0;function Rl(t,e,{stroke:n},i){return r2(t,e,n&&(r=>n[r]),i)}function K7(t,e,{stroke:n},i){return r2(t,e,n&&(([r])=>n[r]),i)}function r2(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const l=new Map;function f(s){return function(u){const c=o(u);let h=l.get(s);h||l.set(s,h=new Map);let d=h.get(c);if(!d){const p=this.parentNode.insertBefore(s(c,a),this),m=`plot-marker-${++Z7}`;p.setAttribute("id",m),h.set(c,d=`url(#${m})`)}return d}}e&&t.attr("marker-start",f(e)),n&&t.attr("marker-mid",f(n)),i&&t.attr("marker-end",f(i))}function Ou({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=a2(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function o2({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=a2(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function a2(t,e,n){return t===void 0&&e===void 0&&n===void 0?ye?[1,0]:[.5,.5]:[e,n]}function l2(t,{interval:e}){return t={...Co(t)},t.interval=xu(t.interval===void 0?e:t.interval),t}function f2(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:l,interval:f}=l2(r,n);if(l==null||f==null&&!i)return n;const s=Ei(r);if(f==null){let d;const p={transform:m=>d||(d=Qt(m,l)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0&&!(o===a&&i)?p:a}}let u,c;function h(d){return c!==void 0&&d===u?c:c=Gt(Qt(u=d,l),p=>f.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:h,label:s}:o,[`${t}2`]:a===void 0?{transform:d=>h(d).map(p=>f.offset(p)),label:s}:a})}function s2(t,e,n){const{[t]:i}=n,{value:r,interval:o}=l2(i,n);return r==null||o==null?n:e({...n,[t]:{label:Ei(i),transform:a=>{const l=Gt(Qt(a,r),s=>o.floor(s)),f=l.map(s=>o.offset(s));return l.map(Se(l)?(s,u)=>s==null||isNaN(s=+s)||(u=f[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=f[u],u==null)?NaN:(+s+ +u)/2)}}})}function J7(t={}){return f2("x",Ou,t)}function u2(t={}){return f2("y",o2,t)}function Q7(t={}){return s2("x",Ou,t)}function t9(t={}){return s2("y",o2,t)}const c2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class e9 extends ce{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:l=a,insetBottom:f=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Il(n,"x"),c2),this.insetTop=Rt(l),this.insetBottom=Rt(f),Lo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y1:s,y2:u}=i,{width:c,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:b}=r,{insetTop:_,insetBottom:g}=this;return Yt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{x:f&&a},ye,0).call(v=>v.selectAll().data(e).enter().append("line").call(He,this).attr("x1",f?w=>f[w]:(m+c-p)/2).attr("x2",f?w=>f[w]:(m+c-p)/2).attr("y1",s&&!lr(l)?w=>s[w]+_:d+_).attr("y2",u&&!lr(l)?l.bandwidth?w=>u[w]+l.bandwidth()-g:w=>u[w]-g:h-b-g).call(In,this,i).call(Rl,this,i,o)).node()}}class n9 extends ce{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:l=a,insetLeft:f=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},Il(n,"y"),c2),this.insetRight=Rt(l),this.insetLeft=Rt(f),Lo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{y:f,x1:s,x2:u}=i,{width:c,height:h,marginTop:d,marginRight:p,marginLeft:m,marginBottom:b}=r,{insetLeft:_,insetRight:g}=this;return Yt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{y:f&&l},0,ye).call(v=>v.selectAll().data(e).enter().append("line").call(He,this).attr("x1",s&&!lr(a)?w=>s[w]+_:m+_).attr("x2",u&&!lr(a)?a.bandwidth?w=>u[w]+a.bandwidth()-g:w=>u[w]-g:c-p-g).attr("y1",f?w=>f[w]:(d+h-b)/2).attr("y2",f?w=>f[w]:(d+h-b)/2).call(In,this,i).call(Rl,this,i,o)).node()}}function Pl(t,e){let{x:n=le,y:i,y1:r,y2:o,...a}=u2(e);return[r,o]=h2(i,r,o),new e9(t,{...a,x:n,y1:r,y2:o})}function Uu(t,e){let{y:n=le,x:i,x1:r,x2:o,...a}=J7(e);return[r,o]=h2(i,r,o),new n9(t,{...a,y:n,x1:r,x2:o})}function h2(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function zu(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const i9={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},d2="­";class Bu extends ce{constructor(e,n={}){const{x:i,y:r,text:o=ni(e)&&_g(e)?le:Tl,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:f=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:c,monospace:h,fontFamily:d=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:b,fontWeight:_,rotate:g}=n,[v,w]=ue(g,0),[x,k]=s9(p);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:D5(v),optional:!0},text:{value:o,filter:du,optional:!0}},n,i9),this.rotate=w,this.textAnchor=ie(l,"middle"),this.lineAnchor=en(f,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=p2(c),this.monospace=!!h,this.fontFamily=se(d),this.fontSize=k,this.fontStyle=se(m),this.fontVariant=se(b),this.fontWeight=se(_),this.frameAnchor=El(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=g2(this),this.clipLine=b2(this)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,rotate:u,text:c,title:h,fontSize:d}=i,{rotate:p}=this,[m,b]=No(this,r);return Yt("svg:g",o).call(Ye,this,r,o).call(m2,this,c,r).call(Ne,this,{x:f&&a,y:s&&l}).call(_=>_.selectAll().data(e).enter().append("text").call(He,this).call(r9,this,c,h).attr("transform",zu`translate(${f?g=>f[g]:m},${s?g=>s[g]:b})${u?g=>` rotate(${u[g]})`:p?` rotate(${p})`:""}`).call(wt,"font-size",d&&(g=>d[g])).call(In,this,i)).node()}}function p2(t){return t==null?null:en(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function r9(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:l,clipLine:f}=e;t.each(function(s){const u=l(Si(n[s])??"").map(f),c=u.length,h=r==="top"?.71:r==="bottom"?1-c:(164-c*100)/200;if(c>1){let d=0;for(let p=0;p<c;++p){if(++d,!u[p])continue;const m=this.ownerDocument.createElementNS(ji.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(h+p)*o}em`):m.setAttribute("dy",`${d*o}em`),m.textContent=u[p],this.appendChild(m),d=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const d=this.ownerDocument.createElementNS(ji.svg,"title");d.textContent=n[s],this.appendChild(d)}})}function Ol(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=To(e,n)),new Bu(t,{...i,x:e,y:n})}function o9(t,{x:e=le,...n}={}){return new Bu(t,t9({...n,x:e}))}function a9(t,{y:e=le,...n}={}){return new Bu(t,Q7({...n,y:e}))}function m2(t,e,n){wt(t,"text-anchor",e.textAnchor),wt(t,"font-family",e.fontFamily),wt(t,"font-size",e.fontSize),wt(t,"font-style",e.fontStyle),wt(t,"font-variant",e.fontVariant===void 0?l9(n):e.fontVariant),wt(t,"font-weight",e.fontWeight)}function l9(t){return t&&(I5(t)||Se(t))?"tabular-nums":void 0}const f9=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function s9(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),f9.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function u9(t,e,n){const i=[];let r,o=0;for(const[a,l,f]of c9(t)){if(r===void 0&&(r=a),o>r&&n(t,r,l)>e&&(i.push(t.slice(r,o)+(t[o-1]===d2?"-":"")),r=a),f){i.push(t.slice(r,l)),r=void 0;continue}o=l}return i}function*c9(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case d2:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Bh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function qu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=pr(t,r))i+=Bh[t[r]]??(y2(t,r)?120:Bh.e);return i}function Wu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=pr(t,r))i+=y2(t,r)?126:63;return i}function g2({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?Wu:qu,r=e*100;return o=>u9(o,r,i)}function b2({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?Wu:qu,r=e*100;switch(n){case"clip-start":return o=>Wh(o,r,i,"");case"clip-end":return o=>qh(o,r,i,"");case"ellipsis-start":return o=>Wh(o,r,i,Hi);case"ellipsis-middle":return o=>h9(o,r,i,Hi);case"ellipsis-end":return o=>qh(o,r,i,Hi)}}const Hi="…";function fr(t,e,n,i){const r=[];let o=0;for(let a=0,l=0,f=t.length;a<f;a=l){l=pr(t,a);const s=n(t,a,l);if(o+s>e){for(o+=i;o>e&&a>0;)l=a,a=r.pop(),o-=n(t,a,l);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function qh(t,e,n,i){t=t.trim();const r=n(i),[o]=fr(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function h9(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,l]=fr(t,e/2,n,o),[f]=fr(t,r-e/2-l+o,n,-o);return f<0?i:t.slice(0,a).trimEnd()+i+t.slice(pr(t,f)).trimStart()}function Wh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=fr(t,r-e+o,n,-o);return a<0?i:i+t.slice(pr(t,a)).trimStart()}const Fs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Yh=new RegExp("\\p{Extended_Pictographic}","uy");function pr(t,e){return e+=d9(t,e)?2:1,m9(t,e)&&(e=Fs.lastIndex),p9(t,e)?pr(t,e+1):e}function _2(t,e){return t.charCodeAt(e)<128}function d9(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function p9(t,e){return t.charCodeAt(e)===8205}function m9(t,e){return _2(t,e)?!1:(Fs.lastIndex=e,Fs.test(t))}function y2(t,e){return _2(t,e)?!1:(Yh.lastIndex=e,Yh.test(t))}const g9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},w2=3.5,b9=w2*5,v2={draw(t,e,n){const i=e*n/b9;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},_9={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},y9=new Map([["arrow",v2],["spike",_9]]);function w9(t){return t&&typeof t.draw=="function"}function v9(t){if(w9(t))return t;const e=y9.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class x2 extends ce{constructor(e,n={}){const{x:i,y:r,r:o=w2,length:a,rotate:l,shape:f=v2,anchor:s="middle",frameAnchor:u}=n,[c,h]=ue(a,12),[d,p]=ue(l,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,g9),this.r=+o,this.length=h,this.rotate=p,this.shape=v9(f),this.anchor=en(s,"anchor",["start","middle","end"]),this.frameAnchor=El(u)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,length:u,rotate:c}=i,{length:h,rotate:d,anchor:p,shape:m,r:b}=this,[_,g]=No(this,r);return Yt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{x:f&&a,y:s&&l}).call(v=>v.selectAll().data(e).enter().append("path").call(He,this).attr("transform",zu`translate(${f?w=>f[w]:_},${s?w=>s[w]:g})${c?w=>` rotate(${c[w]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const x=Bn();return m.draw(x,u[w],b),x}:(()=>{const w=Bn();return m.draw(w,h,b),w})()).call(In,this,i)).node()}}function x9(t,e={}){const{x:n=le,...i}=e;return new x2(t,{...i,x:n})}function k9(t,e={}){const{y:n=le,...i}=e;return new x2(t,{...i,y:n})}function ri(t,e){return arguments.length<2&&!ni(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Ul({anchor:t}={},e){return t===void 0?e[0]:en(t,"anchor",e)}function k2(t){return Ul(t,["left","right"])}function M2(t){return Ul(t,["right","left"])}function S2(t){return Ul(t,["bottom","top"])}function T2(t){return Ul(t,["top","bottom"])}function C2(){const[t,e]=ri(...arguments);return E2("y",k2(e),t,e)}function M9(){const[t,e]=ri(...arguments);return E2("fy",M2(e),t,e)}function A2(){const[t,e]=ri(...arguments);return $2("x",S2(e),t,e)}function S9(){const[t,e]=ri(...arguments);return $2("fx",T2(e),t,e)}function E2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:b,x:_,margin:g,marginTop:v=g===void 0?20:g,marginRight:w=g===void 0?e==="right"?40:0:g,marginBottom:x=g===void 0?20:g,marginLeft:k=g===void 0?e==="left"?40:0:g,label:M,labelAnchor:T,labelArrow:C,labelOffset:L,...A}){return p=Rt(p),m=Rt(m),b=Rt(b),T!==void 0&&(T=en(T,"labelAnchor",["center","top","bottom"])),C=O2(C),Kg(p&&!be(o)?T9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:p,tickPadding:m,tickRotate:b,x:_,...A}):null,be(f)?null:A9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:b,x:_,marginTop:v,marginRight:w,marginBottom:x,marginLeft:k,...A}),!be(f)&&M!==null?Ol([],L2({fill:f,fillOpacity:s,...A},function(F,P,W,E,B){const z=E[t],{marginTop:J,marginRight:X,marginBottom:j,marginLeft:O}=t==="y"&&B.inset||B,Y=T??(z.bandwidth?"center":"top"),Q=L??(e==="right"?X:O)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${e}`,this.rotate=0),this.dy=Y==="top"?3-J:Y==="bottom"?j-3:0,this.dx=e==="right"?Q:-Q,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[P2(t,z,{anchor:e,label:M,labelAnchor:Y,labelArrow:C})]}}}})):null)}function $2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:b,y:_,margin:g,marginTop:v=g===void 0?e==="top"?30:0:g,marginRight:w=g===void 0?20:g,marginBottom:x=g===void 0?e==="bottom"?30:0:g,marginLeft:k=g===void 0?20:g,label:M,labelAnchor:T,labelArrow:C,labelOffset:L,...A}){return p=Rt(p),m=Rt(m),b=Rt(b),T!==void 0&&(T=en(T,"labelAnchor",["center","left","right"])),C=O2(C),Kg(p&&!be(o)?C9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:p,tickPadding:m,tickRotate:b,y:_,...A}):null,be(f)?null:E9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:b,y:_,marginTop:v,marginRight:w,marginBottom:x,marginLeft:k,...A}),!be(f)&&M!==null?Ol([],L2({fill:f,fillOpacity:s,...A},function(F,P,W,E,B){const z=E[t],{marginTop:J,marginRight:X,marginBottom:j,marginLeft:O}=t==="x"&&B.inset||B,Y=T??(z.bandwidth?"center":"right"),Q=L??(e==="top"?J:j)-3;return Y==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-Q:Q,this.dx=Y==="right"?X-3:Y==="left"?3-O:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[P2(t,z,{anchor:e,label:M,labelAnchor:Y,labelArrow:C})]}}}})):null)}function T9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetLeft:u=s,insetRight:c=s,dx:h=0,y:d=t==="y"?void 0:null,...p}){return mr(k9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:l,y:d,...p,dx:e==="left"?+h-ye+ +u:+h+ye-c,anchor:"start",length:f,shape:e==="left"?P9:O9})}function C9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetTop:u=s,insetBottom:c=s,dy:h=0,x:d=t==="x"?void 0:null,...p}){return mr(x9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:l,x:d,...p,dy:e==="bottom"?+h-ye-c:+h+ye+ +u,anchor:"start",length:f,shape:e==="bottom"?I9:R9})}function A9(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*i2):0),text:f,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:c,inset:h=0,insetLeft:d=h,insetRight:p=h,dx:m=0,y:b=t==="y"?void 0:null,..._}){return mr(a9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,y:b,..._,dx:e==="left"?+m-o-l+ +d:+m+ +o+ +l-p},function(g,v,w,x,k){c===void 0&&(this.fontVariant=R2(g)),f===void 0&&(k.text=I2(g,v,w,x,e))})}function E9(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*i2):0),text:f,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:c,inset:h=0,insetTop:d=h,insetBottom:p=h,dy:m=0,x:b=t==="x"?void 0:null,..._}){return mr(o9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f===void 0?null:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,x:b,..._,dy:e==="bottom"?+m+ +o+ +l-p:+m-o-l+ +d},function(g,v,w,x,k){c===void 0&&(this.fontVariant=R2(g)),f===void 0&&(k.text=I2(g,v,w,x,e))})}function $9(){const[t,e]=ri(...arguments);return N2("y",k2(e),t,e)}function N9(){const[t,e]=ri(...arguments);return N2("fy",M2(e),t,e)}function D9(){const[t,e]=ri(...arguments);return D2("x",S2(e),t,e)}function F9(){const[t,e]=ri(...arguments);return D2("fx",T2(e),t,e)}function N2(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...l}){return mr(Uu,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...F2(l)})}function D2(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...l}){return mr(Pl,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...F2(l)})}function F2({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function L2({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u=!1},c){return[,t]=Dn(t),[,e]=ue(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u,initializer:c}}function mr(t,e,n,i,r,o,a){let l;function f(c,h,d,p,m,b){const _=c==null&&(e==="fx"||e==="fy"),{[e]:g}=p;if(!g)throw new Error(`missing scale: ${e}`);const v=g.domain();let{interval:w,ticks:x,tickFormat:k,tickSpacing:M=e==="x"?80:35}=o;if(typeof x=="string"&&U2(g)&&(w=x,x=void 0),x===void 0&&(x=dr(w,g.type)??L9(g,M)),c==null){if(ni(x))c=Ee(x);else if(zi(x))c=Df(x,...Pe(v));else if(g.interval){let C=g.interval;if(g.ticks){const[L,A]=Pe(v),F=(A-L)/C[Mo];C=hh(C,F/x)??C,c=Df(C,L,A)}else{c=v;const L=c.length;C=hh(C,L/x)??C,C!==g.interval&&(c=Df(C,...Pe(c)))}if(C===g.interval){const L=Math.round(c.length/x);L>1&&(c=c.filter((A,F)=>F%L===0))}}else g.ticks?c=g.ticks(x):c=v;if(!g.ticks&&c.length&&c!==v){const C=new tl(v);c=c.filter(L=>C.has(L)),c.length||Yn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?h=[Fn(c)]:l[e]={scale:e,value:le}}a==null||a.call(this,g,c,x,k,l);const T=Object.fromEntries(Object.entries(l).map(([C,L])=>[C,{...L,value:Qt(c,L.value)}]));return _&&(h=b.filterFacets(c,T)),{data:c,facets:h,channels:T}}const s=ar(o).initializer,u=t(r,ar({...o,initializer:f},s));return r==null?(l=u.channels,u.channels={}):l={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function L9(t,e){const[n,i]=Pe(t.range());return(i-n)/e}function I2(t,e,n,i,r){return{value:Yu(t,e,n,i,r)}}function Yu(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&Se(e)?b5(t.type,e,r)??Si:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?Si:typeof i=="string"?(Se(t.domain())?xo:cr)(i):So(i)}function Df(t,e,n){return t.range(e,t.offset(t.floor(n)))}const I9={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},R9={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},P9={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},O9={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function R2(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function P2(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&U2(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!o)return i;if(o===!0){const a=x7(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function O2(t="auto"){return be(t)?!1:typeof t=="boolean"?t:en(t,"labelArrow",["auto","up","right","down","left"])}function U2(t){return Se(t.domain())}function Hh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function U9(t,{opacity:e,...n}={}){if(!$i(t)&&!Zg(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return z2(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",ue(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function z9(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:be(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...l}={},f){const[c,h]=Dn(e),[d,p]=Dn(i),m=Hh(f,c),b=Hh(f,d),_=a*a*Math.PI;return n=ue(n)[1],r=ue(r)[1],o=ue(o)[1],z2(t,l,(g,v,w,x)=>g.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",x).attr("fill",c==="color"?k=>m.scale(k):h).attr("fill-opacity",n).attr("stroke",d==="color"?k=>b.scale(k):p).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",k=>{const M=Bn();return t.scale(k).draw(M,_),M}))}function z2(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=n2(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:f=a,marginLeft:s=0,className:u,style:c,width:h}=e;const d=Nu(e);u=Eu(u),r=Yu(t.scale,t.domain,void 0,r);const p=Yt("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,l,f).call(b=>b.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,l,f).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),p.call(b=>b.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",ie(o,"normal")).call($u,c).node()}const Ls=new Map([["symbol",z9],["color",q2],["opacity",q9]]);function B9(t,e,n={}){return(i,r)=>{if(!Ls.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return Ls.get(i)(t[i],B2(e,n[i],r),o=>t[o])}}function B2({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return U5(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function q2(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return U9(t,n);case"ramp":return G7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function q9({type:t,interpolate:e,...n},{legend:i=!0,color:r=jn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return q2({type:t,...n,interpolate:W9(r)},{legend:i,...o})}function W9(t){const{r:e,g:n,b:i}=jn(t)||jn(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function Y9(t,e,n){const i=[];for(const[r,o]of Ls){const a=n[r];if(a!=null&&a.legend&&r in t){const l=o(t[r],B2(e,t[r],a),f=>t[f]);l!=null&&i.push(l)}}return i}const H9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},V9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class G9 extends ce{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:l=i,rx:f,ry:s}=e;super(ca,void 0,e,n==null?H9:V9),this.anchor=pg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Rt(r),this.insetRight=Rt(o),this.insetBottom=Rt(a),this.insetLeft=Rt(l),this.rx=Rt(f),this.ry=Rt(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:l,marginBottom:f,marginLeft:s,width:u,height:c}=r,{anchor:h,insetTop:d,insetRight:p,insetBottom:m,insetLeft:b,rx:_,ry:g}=this,v=s+b,w=u-l-p,x=a+d,k=c-f-m;return Yt(h?"svg:line":"svg:rect",o).datum(0).call(Ye,this,r,o).call(He,this).call(In,this,i).call(Ne,this,{}).call(h==="left"?M=>M.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",k):h==="right"?M=>M.attr("x1",w).attr("x2",w).attr("y1",x).attr("y2",k):h==="top"?M=>M.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):h==="bottom"?M=>M.attr("x1",v).attr("x2",w).attr("y1",k).attr("y2",k):M=>M.attr("x",v).attr("y",x).attr("width",w-v).attr("height",k-x).attr("rx",_).attr("ry",g)).node()}}function X9(t){return new G9(t)}const Ff={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},j9=new Set(["geometry","href","src","ariaLabel","scales"]);class Z9 extends ce{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ni(e)&&_g(e)&&(n={...n,title:le});const{x:i,y:r,x1:o,x2:a,y1:l,y2:f,anchor:s,preferredAnchor:u="bottom",monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:b,lineHeight:_=1,lineWidth:g=20,frameAnchor:v,format:w,textAnchor:x="start",textOverflow:k,textPadding:M=8,title:T,pointerSize:C=12,pathFilter:L="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:l!=null&&f!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:f==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:f,scale:"y",optional:l==null},title:{value:T,optional:!0}},n,Ff),this.anchor=Cs(s,"anchor"),this.preferredAnchor=Cs(u,"preferredAnchor"),this.frameAnchor=El(v),this.textAnchor=ie(x,"middle"),this.textPadding=+M,this.pointerSize=+C,this.pathFilter=se(L),this.lineHeight=+_,this.lineWidth=+g,this.textOverflow=p2(k),this.monospace=!!c,this.fontFamily=se(h),this.fontSize=Rt(d),this.fontStyle=se(p),this.fontVariant=se(m),this.fontWeight=se(b);for(const A in Ff)A in this.channels&&(this[A]=Ff[A]);this.splitLines=g2(this),this.clipLine=b2(this),this.format={...w}}render(e,n,i,r,o){const a=this,{x:l,y:f,fx:s,fy:u}=n,{ownerSVGElement:c,document:h}=o,{anchor:d,monospace:p,lineHeight:m,lineWidth:b}=this,{textPadding:_,pointerSize:g,pathFilter:v}=this,{marginTop:w,marginLeft:x}=r,{x1:k,y1:M,x2:T,y2:C,x:L=k??T,y:A=M??C}=i,F=s?s(e.fx)-x:0,P=u?u(e.fy)-w:0,[W,E]=No(this,r),B=t2(i,W),z=e2(i,E),J=p?Wu:qu,X=J(Hi);let j,O;"title"in i?(j=i.channels,O=ex):(j=tx.call(this,i,n),O=nx);const Y=Yt("svg:g",o).call(Ye,this,r,o).call(m2,this).call(Ne,this,{x:L&&l,y:A&&f}).call(nt=>nt.selectAll().data(e).enter().append("g").attr("transform",V=>`translate(${Math.round(B(V))},${Math.round(z(V))})`).call(He,this).call(V=>V.append("path").attr("filter",v)).call(V=>V.append("text").each(function(q){const N=Ir(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const $=O.call(a,q,e,j,n,i);if(typeof $=="string")for(const R of a.splitLines($))Q(N,{value:a.clipLine(R)});else{const R=new Set;for(const tt of $){const{label:U=""}=tt;U&&R.has(U)||(R.add(U),Q(N,tt))}}})));function Q(nt,{label:V,value:q,color:N,opacity:$}){V??(V=""),q??(q="");const R=N!=null||$!=null;let tt,U=b*100;const[mt]=fr(V,U,J,X);if(mt>=0)V=V.slice(0,mt).trimEnd()+Hi,tt=q.trim(),q="";else{(V||!q&&!R)&&(q=" "+q);const[pt]=fr(q,U-J(V),J,X);pt>=0&&(tt=q.trim(),q=q.slice(0,pt).trimEnd()+Hi)}const rt=nt.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");V&&rt.append("tspan").attr("font-weight","bold").text(V),q&&rt.append(()=>h.createTextNode(q)),R&&rt.append("tspan").text(" ■").attr("fill",N).attr("fill-opacity",$).style("user-select","none"),tt&&rt.append("title").text(tt)}function at(){const{width:nt,height:V}=r.facet??r;Y.selectChildren().each(function(q){let{x:N,width:$,height:R}=this.getBBox();$=Math.round($),R=Math.round(R);let tt=d;if(tt===void 0){const rt=B(q)+F,pt=z(q)+P,ft=rt+$+g+_*2<nt,dt=rt-$-g-_*2>0,Tt=pt+R+g+_*2<V,yt=pt-R-g-_*2>0;tt=ft&&dt?Tt&&yt?a.preferredAnchor:yt?"bottom":"top":Tt&&yt?ft?"left":"right":(ft||dt)&&(Tt||yt)?`${yt?"bottom":"top"}-${ft?"left":"right"}`:a.preferredAnchor}const U=this.firstChild,mt=this.lastChild;if(U.setAttribute("d",Q9(tt,g,_,$,R)),N)for(const rt of mt.childNodes)rt.setAttribute("x",-N);mt.setAttribute("y",`${+K9(tt,mt.childNodes.length,m).toFixed(6)}em`),mt.setAttribute("transform",`translate(${J9(tt,g,_,$,R)})`)}),Y.attr("visibility",null)}return e.length&&(Y.attr("visibility","hidden"),c.isConnected?Promise.resolve().then(at):typeof requestAnimationFrame<"u"&&requestAnimationFrame(at)),Y.node()}}function W2(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=To(e,n)),new Z9(t,{...i,x:e,y:n})}function K9(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function J9(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function Q9(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function tx({channels:t},e){var r,o;const n={};let i=this.format;i=Vh(i,t,"x"),i=Vh(i,t,"y"),this.format=i;for(const a in i){const l=i[a];if(!(l===null||l===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const f=vh(t,a);f&&(n[a]=f)}}for(const a in t){if(a in n||a in i||j9.has(a))continue;const l=vh(t,a);l&&(n[a]=l)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const l=this.format[a];if(typeof l=="string"){const f=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(Se(f)?xo:cr)(l)}else if(l===void 0||l===!0){const f=e[a];this.format[a]=f!=null&&f.bandwidth?Yu(f,f.domain()):Si}}return n}function Vh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([l])=>l===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function ex(t,e,{title:n}){return Si(n.value[t],t)}function*nx(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:ja(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Xh(i,n,"x"),value:Gh(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Xh(i,n,"y"),value:Gh(this.format.y2,n.y1,a,t)};else{const l=a.value[t],f=a.scale;if(!Kn(l)&&f==null)continue;yield{label:ja(i,n,o),value:this.format[o](l,t),color:f==="color"?r[o][t]:null,opacity:f==="opacity"?r[o][t]:null}}}}function Gh(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}–${t(n.value[i],i)}`}function Xh(t,e,n){const i=ja(t,e,`${n}1`,n),r=ja(t,e,`${n}2`,n);return i===r?i:`${i}–${r}`}function ja(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function De(t={}){var X;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:l}=t,f=Eu(t.className),s=t.marks===void 0?[]:Zh(t.marks);s.push(...ux(s));const u=fx(e,t),c=new Map;for(const j of s){const O=Kh(j,u,t);O&&c.set(j,O)}const h=new Map;u&&Mr(h,[u],t),Mr(h,c,t);const d=Zh(cx(s,h,t));for(const j of d){const O=Kh(j,u,t);O&&c.set(j,O)}s.unshift(...d);let p=D7(h,t);if(p!==void 0){const j=u?Ef(p,u):void 0;for(const Y of s){if(Y.facet===null||Y.facet==="super")continue;const Q=c.get(Y);Q!==void 0&&(Q.facetsIndex=Y.fx!=null||Y.fy!=null?Ef(p,Q):j)}const O=new Set;for(const{facetsIndex:Y}of c.values())Y==null||Y.forEach((Q,at)=>{(Q==null?void 0:Q.length)>0&&O.add(at)});p.forEach(0<O.size&&O.size<p.length?(Y,Q)=>Y.empty=!O.has(Q):Y=>Y.empty=!1);for(const Y of s)if(Y.facet==="exclude"){const Q=c.get(Y);Q!==void 0&&(Q.facetsIndex=I7(Q.facetsIndex))}}for(const j of Wt.keys())Ss(t[j])&&j!=="fx"&&j!=="fy"&&h.set(j,[]);const m=new Map;for(const j of s){if(m.has(j))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:O,channels:Y}=c.get(j)??{},{data:Q,facets:at,channels:nt}=j.initialize(O,Y,t);Hu(nt,t),m.set(j,{data:Q,facets:at,channels:nt})}const b=Ns(Mr(h,m,t),t),_=$7(b,s,t);w7(b,_);const g=$h(b),{fx:v,fy:w}=g,x=v||w?Gg(b,_):_,k=v||w?_x(g,_):_,M=Nu(t),T=M.document,C=rl("svg").call(T.documentElement);let L=C;M.ownerSVGElement=C,M.className=f,M.projection=D8(t,x),M.filterFacets=(j,O)=>Ef(p,{channels:O,groups:Ru(j,O)}),M.getMarkState=j=>{const O=m.get(j),Y=c.get(j);return{...O,channels:{...O.channels,...Y==null?void 0:Y.channels}}},M.dispatchValue=j=>{L.value!==j&&(L.value=j,L.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[j,O]of m)if(j.initializer!=null){const Y=j.facet==="super"?k:x,Q=j.initializer(O.data,O.facets,O.channels,g,Y,M);if(Q.data!==void 0&&(O.data=Q.data),Q.facets!==void 0&&(O.facets=Q.facets),Q.channels!==void 0){const{fx:at,fy:nt,...V}=Q.channels;lx(V),Object.assign(O.channels,V);for(const q of Object.values(V)){const{scale:N}=q;N!=null&&!B5(Wt.get(N))&&(Y2(q,t),A.add(N))}(at!=null||nt!=null)&&c.set(j,!0)}}if(A.size){const j=new Map;Mr(j,m,t,at=>A.has(at)),Mr(h,m,t,at=>A.has(at));const O=bx(Ns(j,t),b),{scales:Y,...Q}=$h(O);Object.assign(b,O),Object.assign(g,Q),Object.assign(g.scales,Y)}let F,P;p!==void 0&&(F={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},p=F7(p,F),P=L7(v,w,_));for(const[j,O]of m)O.values=j.scale(O.channels,g,M);const{width:W,height:E}=_;Ir(C).attr("class",f).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",W).attr("height",E).attr("viewBox",`0 0 ${W} ${E}`).attr("aria-label",a).attr("aria-description",l).call(j=>j.append("style").text(`:where(.${f}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${f} text),
:where(.${f} tspan) {
  white-space: pre;
}`)).call($u,n);for(const j of s){const{channels:O,values:Y,facets:Q}=m.get(j);if(p===void 0||j.facet==="super"){let at=null;if(Q&&(at=Q[0],at=j.filter(at,O,Y),at.length===0))continue;const nt=j.render(at,g,Y,k,M);if(nt==null)continue;C.appendChild(nt)}else{let at;for(const nt of p){if(!(((X=j.facetAnchor)==null?void 0:X.call(j,p,F,nt))??!nt.empty))continue;let V=null;if(Q){const N=c.has(j);if(V=Q[N?nt.i:0],V=j.filter(V,O,Y),V.length===0)continue;!N&&V===Q[0]&&(V=A5(V)),V.fx=nt.x,V.fy=nt.y,V.fi=nt.i}const q=j.render(V,g,Y,x,M);if(q!=null){(at??(at=Ir(C).append("g"))).append(()=>q).datum(nt);for(const N of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(N)&&(at.attr(N,q.getAttribute(N)),q.removeAttribute(N))}}at==null||at.selectChildren().attr("transform",P)}}const B=Y9(b,M,t),{figure:z=i!=null||r!=null||o!=null||B.length>0}=t;z&&(L=T.createElement("figure"),L.className=`${f}-figure`,L.style.maxWidth="initial",i!=null&&L.append(jh(T,i,"h2")),r!=null&&L.append(jh(T,r,"h3")),L.append(...B,C),o!=null&&L.append(ix(T,o))),L.scale=A7(g.scales),L.legend=B9(b,M,t);const J=w8();return J>0&&Ir(C).append("text").attr("x",W).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${J.toLocaleString("en-US")} warning${J===1?"":"s"}. Please check the console.`),L}function jh(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function ix(t,e){const n=t.createElement("figcaption");return n.append(e),n}function rx({marks:t=[],...e}={}){return De({...e,marks:[...t,this]})}ce.prototype.plot=rx;function Zh(t){return t.flat(1/0).filter(e=>e!=null).map(ox)}function ox(t){return typeof t.render=="function"?t:new ax(t)}class ax extends ce{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Hu(t,e){for(const n in t)Y2(t[n],e);return t}function Y2(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:l=o?f=>f*100:bg(a,r)}=e[n]??{};l!=null&&(t.value=Gt(t.value,l),t.transform=!1)}function lx(t){for(const e in t)Tg(e,t[e])}function Mr(t,e,n,i=x5){var r,o;for(const{channels:a}of e.values())for(const l in a){const f=a[l],{scale:s}=f;if(s!=null&&i(s))if(s==="projection"){if(!R8(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,c=((o=n.y)==null?void 0:o.domain)===void 0;if(u||c){const[h,d]=O8(f);u&&Lf(t,"x",h),c&&Lf(t,"y",d)}}}else Lf(t,s,f)}return t}function Lf(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function fx(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=Ee(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=eo(r,{value:n,scale:"fx"})),i!=null&&(o.fy=eo(r,{value:i,scale:"fy"})),Hu(o,e);const a=Ru(r,o);return{channels:o,groups:a,data:t.data}}function Kh(t,e,n){var f;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=Ee(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=eo(s,{value:i,scale:"fx"})),r!=null&&(u.fy=eo(s,{value:r,scale:"fy"})),Hu(u,n),{channels:u,groups:Ru(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:o,groups:a};l.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((f=Ee(t.data))==null?void 0:f.length)===l.length&&Yn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function sx(t,e={}){return ar({...e,x:null,y:null},(n,i,r,o,a,l)=>l.getMarkState(t))}function ux(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?V7:/^y$/i.test(r)?Oh:Qg,i=r(sx(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===Oh?"left":"bottom");const a=W2(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function cx(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:l={},axis:f,grid:s,facet:u={},facet:{axis:c=f,grid:h}=u,x:{axis:d=f,grid:p=d===null?null:s}=r,y:{axis:m=f,grid:b=m===null?null:s}=o,fx:{axis:_=c,grid:g=_===null?null:h}=a,fy:{axis:v=c,grid:w=v===null?null:h}=l}=n;(i||!Ss(r)&&!Jh("x",t))&&(d=p=null),(i||!Ss(o)&&!Jh("y",t))&&(m=b=null),e.has("fx")||(_=g=null),e.has("fy")||(v=w=null),d===void 0&&(d=!ea(t,"x")),m===void 0&&(m=!ea(t,"y")),_===void 0&&(_=!ea(t,"fx")),v===void 0&&(v=!ea(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),_===!0&&(_=d==="top"||d===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const x=[];return ta(x,w,N9,l),Qo(x,v,M9,"right","left",u,l),ta(x,g,F9,a),Qo(x,_,S9,"top","bottom",u,a),ta(x,b,$9,o),Qo(x,m,C2,"left","right",n,o),ta(x,p,D9,r),Qo(x,d,A2,"bottom","top",n,r),x}function Qo(t,e,n,i,r,o,a){if(!e)return;const l=hx(e);a=dx(l?i:e,o,a);const{line:f}=a;(n===C2||n===A2)&&f&&!to(f)&&t.push(X9(px(a))),t.push(n(a)),l&&t.push(n({...a,anchor:r,label:null}))}function ta(t,e,n,i){!e||to(e)||t.push(n(mx(e,i)))}function hx(t){return/^\s*both\s*$/i.test(t)}function dx(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h,labelAnchor:d,labelArrow:p,labelOffset:m}}function px(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function mx(t,{stroke:e=Al(t)?t:void 0,ticks:n=gx(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function gx(t){switch(typeof t){case"number":return!0;case"string":return!Al(t)}return ni(t)||typeof(t==null?void 0:t.range)=="function"}function ea(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Jh(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function bx(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function _x({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Iu(n),s=t&&Qh(t),u=e&&Qh(e);return{marginTop:e?u[0]:i,marginRight:t?l-s[1]:r,marginBottom:e?f-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:f}}function Qh(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const yx=new Map([["basis",X4],["basis-closed",j4],["basis-open",Z4],["bundle",K4],["bump-x",P4],["bump-y",O4],["cardinal",J4],["cardinal-closed",Q4],["cardinal-open",t5],["catmull-rom",e5],["catmull-rom-closed",n5],["catmull-rom-open",i5],["linear",ko],["linear-closed",r5],["monotone-x",o5],["monotone-y",a5],["natural",l5],["step",f5],["step-after",u5],["step-before",s5]]);function H2(t=ko,e){if(typeof t=="function")return t;const n=yx.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function V2(t=sr,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?sr:H2(t,e)}function sr(t){return ko(t)}function wx(t={y:"count"},e={}){[t,e]=kx(t,e);const{x:n,y:i}=e;return xx(Mx(n,e,le),null,null,i,t,Ou(e))}function vx(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=Au}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function G2(t={}){return vx(wx,"y",Il(t,"x"))}function xx(t,e,n,i,{data:r=Sg,filter:o=Xa,sort:a,reverse:l,...f}={},s={}){t=td(t),e=td(e),f=Tx(f,s),r=Z2(r,le),a=a==null?void 0:X2("sort",a,s),o=o==null?void 0:j2("filter",o,s),n!=null&&jo(f,"x","x1","x2")&&(n=null),i!=null&&jo(f,"y","y1","y2")&&(i=null);const[u,c]=vn(t),[h,d]=vn(t),[p,m]=vn(e),[b,_]=vn(e),[g,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,x]=vn(g),{x:k,y:M,z:T,fill:C,stroke:L,x1:A,x2:F,y1:P,y2:W,domain:E,cumulative:B,thresholds:z,interval:J,...X}=s,[j,O]=vn(T),[Y]=Dn(C),[Q]=Dn(L),[at,nt]=vn(Y),[V,q]=vn(Q);return{..."z"in s&&{z:j||T},..."fill"in s&&{fill:at||C},..."stroke"in s&&{stroke:V||L},...Nl(X,(N,$,R)=>{const tt=gg(Qt(N,g),R==null?void 0:R[v]),U=Qt(N,T),mt=Qt(N,Y),rt=Qt(N,Q),pt=e8(f,{z:U,fill:mt,stroke:rt}),ft=[],dt=[],Tt=tt&&x([]),yt=U&&O([]),he=mt&&nt([]),$t=rt&&q([]),ee=t&&c([]),Fe=t&&d([]),Dt=e&&m([]),Gl=e&&_([]),Rn=Ex(t,e,N);let ne=0;for(const de of f)de.initialize(N);a&&a.initialize(N),o&&o.initialize(N);for(const de of $){const Ft=[];for(const oi of f)oi.scope("facet",de);a&&a.scope("facet",de),o&&o.scope("facet",de);for(const[oi,et]of bh(de,pt))for(const[bt,Ct]of bh(et,tt))for(const[Te,nn]of Rn(Ct))if(!(o&&!o.reduce(Te,nn))){Ft.push(ne++),dt.push(r.reduceIndex(Te,N,nn)),tt&&Tt.push(bt),U&&yt.push(pt===U?oi:U[(Te.length>0?Te:Ct)[0]]),mt&&he.push(pt===mt?oi:mt[(Te.length>0?Te:Ct)[0]]),rt&&$t.push(pt===rt?oi:rt[(Te.length>0?Te:Ct)[0]]),ee&&(ee.push(nn.x1),Fe.push(nn.x2)),Dt&&(Dt.push(nn.y1),Gl.push(nn.y2));for(const Io of f)Io.reduce(Te,nn);a&&a.reduce(Te)}ft.push(Ft)}return n8(ft,a,l),{data:dt,facets:ft}}),...!jo(f,"x")&&(u?{x1:u,x2:h,x:Ts(u,h)}:{x:k,x1:A,x2:F}),...!jo(f,"y")&&(p?{y1:p,y2:b,y:Ts(p,b)}:{y:M,y1:P,y2:W}),...w&&{[v]:w},...Object.fromEntries(f.map(({name:N,output:$})=>[N,$]))}}function kx({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function Mx(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...Co(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=Sx(t.thresholds,t.interval),t}function td(t){if(t==null)return;const{value:e,cumulative:n,domain:i=Pe,thresholds:r}=t,o=a=>{let l=Qt(a,e),f;if(Se(l)||Ax(r)){l=Gt(l,dg,Float64Array);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!zi(r)?r(l,u,c):r;typeof h=="number"&&(h=cp(u,c,h)),zi(h)&&(i===Pe&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c))),f=h}else{l=fn(l);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!zi(r)?r(l,u,c):r;if(typeof h=="number")if(i===Pe){let d=ba(u,c,h);if(isFinite(d))if(d>0){let p=Math.round(u/d),m=Math.round(c/d);p*d<=u||--p,m*d>c||++m;let b=m-p+1;h=new Float64Array(b);for(let _=0;_<b;++_)h[_]=(p+_)*d}else if(d<0){d=-d;let p=Math.round(u*d),m=Math.round(c*d);p/d<=u||--p,m/d>c||++m;let b=m-p+1;h=new Float64Array(b);for(let _=0;_<b;++_)h[_]=(p+_)/d}else h=[u];else h=[u]}else h=qr(u,c,h);else zi(h)&&(i===Pe&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c)));f=h}const s=[];if(f.length===1)s.push([f[0],f[0]]);else for(let u=1;u<f.length;++u)s.push([f[u-1],f[u]]);return s.bin=(n<0?Nx:n>0?$x:Vu)(s,f,l),s};return o.label=Ei(e),o}function Sx(t,e,n=ed){if(t===void 0)return e===void 0?n:dr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return r_;case"scott":return k0;case"sturges":return t_;case"auto":return ed}return bu(t)}return t}function Tx(t,e){return J5(t,e,X2)}function X2(t,e,n){return kg(t,e,n,j2)}function j2(t,e,n){return Mg(t,e,n,Z2)}function Z2(t,e){return Cu(t,e,Cx)}function Cx(t){switch(`${t}`.toLowerCase()){case"x":return Dx;case"x1":return Lx;case"x2":return Ix;case"y":return Fx;case"y1":return Rx;case"y2":return Px}throw new Error(`invalid bin reduce: ${t}`)}function ed(t,e,n){return Math.min(200,k0(t,e,n))}function Ax(t){return N5(t)||ni(t)&&Se(t)}function Ex(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries()){const u=r.bin(a[l]);for(const[c,[h,d]]of r.entries())yield[u[c],{data:n,x1:f,y1:h,x2:s,y2:d}]}}:i?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries())yield[a[l],{data:n,x1:f,x2:s}]}:function*(o){const a=r.bin(o);for(const[l,[f,s]]of r.entries())yield[a[l],{data:n,y1:f,y2:s}]}}function Vu(t,e,n){return e=fn(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[Qa(e,n[a])-1])==null||o.push(a);return r}}function $x(t,e,n){const i=Vu(t,e,n);return r=>{const o=i(r);for(let a=1,l=o.length;a<l;++a){const f=o[a-1],s=o[a];for(const u of f)s.push(u)}return o}}function Nx(t,e,n){const i=Vu(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const l=o[a+1],f=o[a];for(const s of l)f.push(s)}return o}}function K2(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const Dx={reduceIndex(t,e,{x1:n,x2:i}){return K2(n,i)}},Fx={reduceIndex(t,e,{y1:n,y2:i}){return K2(n,i)}},Lx={reduceIndex(t,e,{x1:n}){return n}},Ix={reduceIndex(t,e,{x2:n}){return n}},Rx={reduceIndex(t,e,{y1:n}){return n}},Px={reduceIndex(t,e,{y2:n}){return n}};function J2(t={}){return mg(t)?t:{...t,y:le}}function Ox(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const l of e)for(const f of l)i[f]&&++r,i[f]=1;if(r===0)return{data:t,facets:e};t=Qr(t);const o=t[cg]=new Uint32Array(n+r);e=e.map(l=>Qr(l,Uint32Array));let a=n;i.fill(0);for(const l of e)for(let f=0,s=l.length;f<s;++f){const u=l[f];i[u]?(l[f]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function Ux(t={},e={}){arguments.length===1&&([t,e]=zx(t));const{x1:n,x:i=n,y:r,...o}=e,[a,l,f,s]=qx(i,r,"x","y",t,o);return{...a,x1:n,x:l,y1:f,y2:s,y:Ts(f,s)}}function Q2({y:t,y1:e,y2:n,...i}={}){return i=Il(i,"x"),e===void 0&&n===void 0?Ux({y:t,...i}):([e,n]=C5(t,e,n),{...i,y1:e,y2:n})}function zx(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const Bx={length:!0};function qx(t,e=v5,n,i,{offset:r,order:o,reverse:a},l){if(e===null)throw new Error(`stack requires ${i}`);const f=wu(l),[s,u]=vn(t),[c,h]=Ga(e),[d,p]=Ga(e);return c.hint=d.hint=Bx,r=Wx(r),o=Vx(o,r,i),[Nl(l,(m,b,_)=>{({data:m,facets:b}=Ox(m,b));const g=t==null?void 0:u(gg(Qt(m,t),_==null?void 0:_[n])),v=Qt(m,e,Float64Array),w=Qt(m,f),x=o&&o(m,g,v,w),k=m.length,M=h(new Float64Array(k)),T=p(new Float64Array(k)),C=[];for(const L of b){const A=g?Array.from(el(L,F=>g[F]).values()):[L];if(x)for(const F of A)F.sort(x);for(const F of A){let P=0,W=0;a&&F.reverse();for(const E of F){const B=v[E];B<0?P=T[E]=(M[E]=P)+B:B>0?W=T[E]=(M[E]=W)+B:T[E]=M[E]=W}}C.push(A)}return r&&r(C,M,T,w),{data:m,facets:b}}),s,c,d]}function Wx(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return Yx;case"center":case"silhouette":return Hx;case"wiggle":return eb}throw new Error(`unknown offset: ${t}`)}}function tb(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function Yx(t,e,n){for(const i of t)for(const r of i){const[o,a]=tb(r,n);for(const l of r){const f=1/(a-o||1);e[l]=f*(e[l]-o),n[l]=f*(n[l]-o)}}}function Hx(t,e,n){for(const i of t){for(const r of i){const[o,a]=tb(r,n);for(const l of r){const f=(a+o)/2;e[l]-=f,n[l]-=f}}nb(i,e,n)}ib(t,e,n)}function eb(t,e,n,i){for(const r of t){const o=new bi;let a=0;for(const l of r){let f=-1;const s=l.map(d=>Math.abs(n[d]-e[d])),u=l.map(d=>{f=i?i[d]:++f;const p=n[d]-e[d],m=o.has(f)?p-o.get(f):0;return o.set(f,p),m}),c=[0,...Xb(u)];for(const d of l)e[d]+=a,n[d]+=a;const h=Xn(s);h&&(a-=Xn(s,(d,p)=>(u[p]/2+c[p])*d)/h)}nb(r,e,n)}ib(t,e,n)}function nb(t,e,n){const i=An(t,r=>An(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function ib(t,e,n){const i=t.length;if(i===1)return;const r=t.map(l=>l.flat()),o=r.map(l=>(An(l,f=>e[f])+ke(l,f=>n[f]))/2),a=An(o);for(let l=0;l<i;l++){const f=a-o[l];for(const s of r[l])e[s]+=f,n[s]+=f}}function Vx(t,e,n){if(t===void 0&&e===eb)return nd(Qe);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Va:Qe;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return Gx(r);case"z":return Xx(r);case"sum":return jx(r);case"appearance":return Zx(r);case"inside-out":return nd(r)}return id(hg(t))}if(typeof t=="function")return(t.length===1?id:Kx)(t);if(Array.isArray(t))return Jx(t);throw new Error(`invalid order: ${t}`)}}function Gx(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function Xx(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function jx(t){return zl(t,(e,n,i,r)=>zs(Fn(e),o=>Xn(o,a=>i[a]),o=>r[o]))}function Zx(t){return zl(t,(e,n,i,r)=>zs(Fn(e),o=>n[x0(o,a=>i[a])],o=>r[o]))}function nd(t){return zl(t,(e,n,i,r)=>{const o=Fn(e),a=zs(o,c=>n[x0(c,h=>i[h])],c=>r[c]),l=qi(o,c=>Xn(c,h=>i[h]),c=>r[c]),f=[],s=[];let u=0;for(const c of a)u<0?(u+=l.get(c),f.push(c)):(u-=l.get(c),s.push(c));return s.reverse().concat(f)})}function id(t){return e=>{const n=Qt(e,t);return(i,r)=>Qe(n[i],n[r])}}function Kx(t){return e=>(n,i)=>t(e[n],e[i])}function Jx(t){return zl(Qe,()=>t)}function zl(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new bi(e(n,i,r,o).map((l,f)=>[l,f]));return(l,f)=>t(a.get(o[l]),a.get(o[f]))}}const Qx={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class tk extends ce{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,z:l,curve:f,tension:s}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:wu(n),optional:!0}},n,Qx),this.z=l,this.curve=H2(f,s)}filter(e){return e}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i;return Yt("svg:g",o).call(Ye,this,r,o).call(Ne,this,n,0,0).call(u=>u.selectAll().data($g(e,[a,l,f,s],this,i)).enter().append("path").call(He,this).call(Eg,this,i).attr("d",R4().curve(this.curve).defined(c=>c>=0).x0(c=>a[c]).y0(c=>l[c]).x1(c=>f[c]).y1(c=>s[c]))).node()}}function ek(t,e){const{x:n=Tl,...i}=G2(e);return new tk(t,Q2(J2({...i,x1:n,x2:void 0})))}const nk={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class ik extends ce{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:l,tension:f}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,nk),this.curve=V2(l,f),Lo(this,n)}project(e,n,i){this.curve!==sr&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i,{curve:u}=this;return Yt("svg:g",o).call(Ye,this,r,o).call(Ne,this,n).call(c=>c.selectAll().data(e).enter().append("path").call(He,this).attr("d",u===sr&&o.projection?rk(o.projection,a,l,f,s):h=>{const d=Bn(),p=u(d);return p.lineStart(),p.point(a[h],l[h]),p.point(f[h],s[h]),p.lineEnd(),d}).call(In,this,i).call(Rl,this,i,o)).node()}}function rk(t,e,n,i,r){const o=ul(t);return e=fn(e),n=fn(n),i=fn(i),r=fn(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Bl(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...l}={}){return[n,i]=rd(e,n,i),[o,a]=rd(r,o,a),new ik(t,{...l,x1:n,x2:i,y1:o,y2:a})}function rd(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class rb extends ce{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:l=o,insetBottom:f=o,insetLeft:s=o,rx:u,ry:c}=i;this.insetTop=Rt(a),this.insetRight=Rt(l),this.insetBottom=Rt(f),this.insetLeft=Rt(s),this.rx=ie(u,"auto"),this.ry=ie(c,"auto")}render(e,n,i,r,o){const{rx:a,ry:l}=this;return Yt("svg:g",o).call(Ye,this,r,o).call(this._transform,this,n).call(f=>f.selectAll().data(e).enter().append("rect").call(He,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(wt,"rx",a).call(wt,"ry",l).call(In,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}}const ok={ariaLabel:"bar"};class ak extends rb{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,ok)}_transform(e,n,{y:i}){e.call(Ne,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return lr(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:l,insetBottom:f}=this;return lr(e)?a-r-o-l-f:s=>Math.max(0,Math.abs(i[s]-n[s])-l-f)}}function lk(t,e={}){return T5(e)||(e={...e,x:Tl,y2:le}),new ak(t,Q2(u2(J2(e))))}const fk={ariaLabel:"cell"};class sk extends rb{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,fk)}_transform(e,n){e.call(Ne,n,{},0,0)}}function uk(t,{x:e,y:n,...i}={}){return[e,n]=To(e,n),new sk(t,{...i,x:e,y:n})}const ck={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function hk(t){return t.sort===void 0&&t.reverse===void 0?j5({channel:"-r"},t):t}class dk extends ce{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:l=Kr,frameAnchor:f}=n,[s,u]=ue(a,0),[c,h]=G5(l),[d,p]=ue(o,c==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:Ml,optional:!0},rotate:{value:s,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},hk(n),ck),this.r=p,this.rotate=u,this.symbol=h,this.frameAnchor=El(f);const{channels:m}=this,{symbol:b}=m;if(b){const{fill:_,stroke:g}=m;b.hint={fill:_?_.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:g?g.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,r:u,rotate:c,symbol:h}=i,{r:d,rotate:p,symbol:m}=this,[b,_]=No(this,r),g=m===Kr,v=u?void 0:d*d*Math.PI;return pu(d)&&(e=[]),Yt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{x:f&&a,y:s&&l}).call(w=>w.selectAll().data(e).enter().append(g?"circle":"path").call(He,this).call(g?x=>{x.attr("cx",f?k=>f[k]:b).attr("cy",s?k=>s[k]:_).attr("r",u?k=>u[k]:d)}:x=>{x.attr("transform",zu`translate(${f?k=>f[k]:b},${s?k=>s[k]:_})${c?k=>` rotate(${c[k]})`:p?` rotate(${p})`:""}`).attr("d",u&&h?k=>{const M=Bn();return h[k].draw(M,u[k]*u[k]*Math.PI),M}:u?k=>{const M=Bn();return m.draw(M,u[k]*u[k]*Math.PI),M}:h?k=>{const M=Bn();return h[k].draw(M,v),M}:(()=>{const k=Bn();return m.draw(k,v),k})())}).call(In,this,i)).node()}}function io(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=To(e,n)),new dk(t,{...i,x:e,y:n})}const pk={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ob extends ce{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:l}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:wu(n),optional:!0}},n,pk),this.z=o,this.curve=V2(a,l),Lo(this,n)}filter(e){return e}project(e,n,i){this.curve!==sr&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:l}=i,{curve:f}=this;return Yt("svg:g",o).call(Ye,this,r,o).call(Ne,this,n).call(s=>s.selectAll().data($g(e,[a,l],this,i)).enter().append("path").call(He,this).call(Eg,this,i).call(K7,this,i,o).attr("d",f===sr&&o.projection?mk(o.projection,a,l):Fm().curve(f).defined(u=>u>=0).x(u=>a[u]).y(u=>l[u]))).node()}}function mk(t,e,n){const i=ul(t);return e=fn(e),n=fn(n),r=>{let o=[];const a=[o];for(const l of r)l===-1?(o=[],a.push(o)):o.push([e[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function gk(t,{x:e,y:n,...i}={}){return[e,n]=To(e,n),new ob(t,{...i,x:e,y:n})}function bk(t,{x:e=Tl,y:n=le,...i}={}){return new ob(t,G2({...i,x:e,y:n}))}const _k={ariaLabel:"tick",fill:null,stroke:"currentColor"};class yk extends ce{constructor(e,n,i){super(e,n,i,_k),Lo(this,i)}render(e,n,i,r,o){return Yt("svg:g",o).call(Ye,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(He,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(In,this,i).call(Rl,this,i,o)).node()}}class wk extends yk{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Rt(a),this.insetBottom=Rt(l)}_transform(e,n,{x:i}){e.call(Ne,n,{x:i},ye,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function ql(t,{x:e=le,...n}={}){return new wk(t,{...n,x:e})}function vk(t){let e,n,i,r;return{c(){e=S("main"),n=S("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){Z(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&G(e),t[4](null)}}}function xk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;We(()=>{const f=De({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[ql(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(f)});function l(f){re[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class ro extends Ut{constructor(e){super(),Ot(this,e,xk,vk,Pt,{pattern:3,width:0,height:1})}}function kk(t){let e,n,i,r;return{c(){e=S("main"),n=S("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){Z(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&G(e),t[4](null)}}}function Mk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;We(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=De({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[lk(f,{x:(u,c)=>c+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){re[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class oo extends Ut{constructor(e){super(),Ot(this,e,Mk,kk,Pt,{pattern:3,width:0,height:1})}}function Sk(t){let e,n,i,r;return{c(){e=S("main"),n=S("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){Z(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&G(e),t[4](null)}}}function Tk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;We(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=De({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[uk(f,{x:(u,c)=>c+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){re[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Hn extends Ut{constructor(e){super(),Ot(this,e,Tk,Sk,Pt,{pattern:3,width:0,height:1})}}function Ck(t){let e,n,i,r;return{c(){e=S("main"),n=S("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){Z(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&G(e),t[7](null)}}}function Ak(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{width:a=800}=e,{height:l=50}=e,f,s=null,u;const c=async m=>{o?n(6,s=o):(n(6,s=await Rs(m)),console.log(`Loaded ${m}, sr= ${s.sampleRate}`)),u=s.sampleRate};let h=null;const d=(m,b)=>{b&&(h=Ka(b,m,.5))};We(()=>{if(n(2,f.textContent="",f),!h)return;const m=De({width:a,height:l,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[bk(h,{x:(b,_)=>_/u,y:b=>b})]});f.appendChild(m)});function p(m){re[m?"unshift":"push"](()=>{f=m,n(2,f)})}return t.$$set=m=>{"pattern"in m&&n(3,i=m.pattern),"audioFile"in m&&n(4,r=m.audioFile),"cachedAudio"in m&&n(5,o=m.cachedAudio),"width"in m&&n(0,a=m.width),"height"in m&&n(1,l=m.height)},t.$$.update=()=>{t.$$.dirty&16&&c(r),t.$$.dirty&72&&d(i,s)},[a,l,f,i,r,o,s,p]}class Vn extends Ut{constructor(e){super(),Ot(this,e,Ak,Ck,Pt,{pattern:3,audioFile:4,cachedAudio:5,width:0,height:1})}}function Ek(t){let e,n,i,r,o,a;return{c(){e=S("main"),n=S("audio"),i=D(),r=S("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){Z(l,e,f),y(e,n),t[7](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&G(e),t[7](null),o=!1,a()}}}function $k(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{currentTrialNumber:a=-1}=e,l=null;const f=async p=>{o?(n(6,l=o),console.log("used cached audio")):(n(6,l=await Rs(p)),console.log(`loaded ${p}, sr= ${l.sampleRate}`))};let s=null,u;const c=(p,m)=>{m&&u&&(s=Ka(m,p),Ps(s,m.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};mi(()=>{document.querySelector("html").addEventListener("keyup",p=>{p.key==="p"&&h()})});function d(p){re[p?"unshift":"push"](()=>{u=p,n(0,u)})}return t.$$set=p=>{"pattern"in p&&n(2,i=p.pattern),"audioFile"in p&&n(3,r=p.audioFile),"cachedAudio"in p&&n(4,o=p.cachedAudio),"currentTrialNumber"in p&&n(5,a=p.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&32&&a>-1&&window.setTimeout(h,200),t.$$.dirty&68&&c(i,l)},[u,h,i,r,o,a,l,d]}class ao extends Ut{constructor(e){super(),Ot(this,e,$k,Ek,Pt,{pattern:2,audioFile:3,cachedAudio:4,currentTrialNumber:5})}}function od(t,e,n){const i=t.slice();return i[8]=e[n],i}function ad(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=S("option"),i=ot(n),e.__value=t[8],st(e,e.__value)},m(r,o){Z(r,e,o),y(e,i)},p:_t,d(r){r&&G(e)}}}function Nk(t){let e,n,i,r,o,a,l,f=(ha*1e3).toFixed(0)+"",s,u,c,h,d,p,m,b,_=t[0].toFixed(1)+"",g,v,w=(t[2]*1e3).toFixed(1)+"",x,k,M,T,C,L,A,F,P,W,E,B,z,J,X,j,O,Y,Q,at,nt=zt(t[5]),V=[];for(let q=0;q<nt.length;q+=1)V[q]=ad(od(t,nt,q));return P=new ao({props:{pattern:t[1],audioFile:t[3]}}),E=new Vn({props:{pattern:t[1],audioFile:t[3],width:na,height:ia}}),z=new ro({props:{pattern:t[1],width:na,height:ia}}),X=new oo({props:{pattern:t[1],width:na,height:ia}}),O=new Hn({props:{pattern:t[1],width:na,height:ia}}),{c(){e=S("main"),n=S("h2"),n.textContent="Playground",i=D(),r=S("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=D(),a=S("div"),l=ot("inter-onset interval (IOI): "),s=ot(f),u=ot(" milliseconds ("),c=ot(t[4]),h=ot(` bpm)
    `),d=S("label"),p=ot(`deviation as percent of IOI
      `),m=S("input"),b=D(),g=ot(_),v=ot(`
      (`),x=ot(w),k=ot(" milliseconds)"),M=D(),T=S("label"),C=ot(`instrument sample:
      `),L=S("select");for(let q=0;q<V.length;q+=1)V[q].c();A=D(),F=S("div"),ht(P.$$.fragment),W=D(),ht(E.$$.fragment),B=D(),ht(z.$$.fragment),J=D(),ht(X.$$.fragment),j=D(),ht(O.$$.fragment),I(m,"type","range"),I(m,"min","-20"),I(m,"max","20"),I(m,"step","1"),I(d,"class","svelte-1sot113"),t[3]===void 0&&hn(()=>t[7].call(L)),I(T,"class","svelte-1sot113"),I(F,"class","stimuli svelte-1sot113")},m(q,N){Z(q,e,N),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,s),y(a,u),y(a,c),y(a,h),y(a,d),y(d,p),y(d,m),st(m,t[0]),y(d,b),y(d,g),y(d,v),y(d,x),y(d,k),y(a,M),y(a,T),y(T,C),y(T,L);for(let $=0;$<V.length;$+=1)V[$]&&V[$].m(L,null);_e(L,t[3],!0),y(e,A),y(e,F),ut(P,F,null),y(F,W),ut(E,F,null),y(F,B),ut(z,F,null),y(F,J),ut(X,F,null),y(F,j),ut(O,F,null),Y=!0,Q||(at=[gt(m,"change",t[6]),gt(m,"input",t[6]),gt(L,"change",t[7])],Q=!0)},p(q,[N]){if((!Y||N&16)&&Lt(c,q[4]),N&1&&st(m,q[0]),(!Y||N&1)&&_!==(_=q[0].toFixed(1)+"")&&Lt(g,_),(!Y||N&4)&&w!==(w=(q[2]*1e3).toFixed(1)+"")&&Lt(x,w),N&32){nt=zt(q[5]);let rt;for(rt=0;rt<nt.length;rt+=1){const pt=od(q,nt,rt);V[rt]?V[rt].p(pt,N):(V[rt]=ad(pt),V[rt].c(),V[rt].m(L,null))}for(;rt<V.length;rt+=1)V[rt].d(1);V.length=nt.length}N&40&&_e(L,q[3]);const $={};N&2&&($.pattern=q[1]),N&8&&($.audioFile=q[3]),P.$set($);const R={};N&2&&(R.pattern=q[1]),N&8&&(R.audioFile=q[3]),E.$set(R);const tt={};N&2&&(tt.pattern=q[1]),z.$set(tt);const U={};N&2&&(U.pattern=q[1]),X.$set(U);const mt={};N&2&&(mt.pattern=q[1]),O.$set(mt)},i(q){Y||(H(P.$$.fragment,q),H(E.$$.fragment,q),H(z.$$.fragment,q),H(X.$$.fragment,q),H(O.$$.fragment,q),Y=!0)},o(q){K(P.$$.fragment,q),K(E.$$.fragment,q),K(z.$$.fragment,q),K(X.$$.fragment,q),K(O.$$.fragment,q),Y=!1},d(q){q&&G(e),Ge(V,q),ct(P),ct(E),ct(z),ct(X),ct(O),Q=!1,$e(at)}}}let na=600,ia=100,ha=.5,Dk=6,Fk=3,Lk=!0,Ik=0;function Rk(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],l=5,f=[];function s(){l=xe(this.value),n(0,l)}function u(){a=pi(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=l/100*ha),t.$$.dirty&6&&(n(1,f=Vi(Dk,ha,Fk,r,Lk,Ik)),console.log("generated pattern",f))},n(4,i=1/ha*60),[l,f,r,a,i,o,s,u]}class Pk extends Ut{constructor(e){super(),Ot(this,e,Rk,Nk,Pt,{})}}var ab={exports:{}};(function(t,e){(function(n,i){i()})(gr,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,c){var h=new XMLHttpRequest;h.open("GET",s),h.responseType="blob",h.onload=function(){f(h.response,u,c)},h.onerror=function(){console.error("could not download file")},h.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof gr=="object"&&gr.global===gr?gr:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(s,u,c){var h=a.URL||a.webkitURL,d=document.createElement("a");u=u||s.name||"download",d.download=u,d.rel="noopener",typeof s=="string"?(d.href=s,d.origin===location.origin?o(d):r(d.href)?i(s,u,c):o(d,d.target="_blank")):(d.href=h.createObjectURL(s),setTimeout(function(){h.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,c){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,c),u);else if(r(s))i(s,u,c);else{var h=document.createElement("a");h.href=s,h.target="_blank",setTimeout(function(){o(h)})}}:function(s,u,c,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,c);var d=s.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&p||l)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var v=b.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},b.readAsDataURL(s)}else{var _=a.URL||a.webkitURL,g=_.createObjectURL(s);h?h.location=g:location.href=g,h=null,setTimeout(function(){_.revokeObjectURL(g)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(ab);var Ok=ab.exports;const Za=m0(Ok);function It(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}It.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};It.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};It.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};It.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=lb(0,t.length-1);return this.activate(t[e]),this};It.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=lb(0,t.length-1);this.activate(t[e])};It.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};It.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};It.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};It.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};It.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};It.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};It.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};It.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};It.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};It.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};It.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};It.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};It.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};It.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};It.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};It.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const Gu=function(){};Gu.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};Gu.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};It.prototype.checkErr=new Gu;function lb(t,e){return Math.floor(Math.random()*(e-t+1))+t}function ld(t){let e,n,i,r,o,a,l,f,s,u,c,h,d,p,m,b,_,g,v,w,x,k,M,T,C,L,A,F,P,W,E,B,z,J,X,j,O,Y,Q,at,nt,V,q;return{c(){e=S("div"),n=S("label"),i=ot(`ID:
        `),r=S("input"),o=D(),a=S("label"),l=ot(`Age:
        `),f=S("select"),s=S("option"),s.textContent="20-24",u=S("option"),u.textContent="25-29",c=S("option"),c.textContent="30-34",h=S("option"),h.textContent="35-39",d=S("option"),d.textContent="40-44",p=S("option"),p.textContent="45-49",m=S("option"),m.textContent="50-54",b=S("option"),b.textContent="55-60",_=D(),g=S("label"),v=ot(`Gender:
        `),w=S("input"),x=D(),k=S("label"),M=ot(`Highest finished education (select the best fitting one):
        `),T=S("select"),C=S("option"),C.textContent="none",L=S("option"),L.textContent="high school",A=S("option"),A.textContent="bachelor",F=S("option"),F.textContent="master",P=S("option"),P.textContent="phd",W=D(),E=S("label"),B=ot(`Which music instruments do you play?
        `),z=S("input"),J=D(),X=S("label"),j=ot(`For how many years do you roughly play it/them?
        `),O=S("input"),Y=D(),Q=S("label"),at=ot(`How many years of experience do you have with visualization?
        `),nt=S("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",st(s,s.__value),u.__value="25-29",st(u,u.__value),c.__value="30-34",st(c,c.__value),h.__value="35-39",st(h,h.__value),d.__value="40-44",st(d,d.__value),p.__value="45-49",st(p,p.__value),m.__value="50-54",st(m,m.__value),b.__value="55-60",st(b,b.__value),t[6]===void 0&&hn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(g,"class","svelte-u6a8gr"),C.__value="none",st(C,C.__value),L.__value="highs",st(L,L.__value),A.__value="bachelor",st(A,A.__value),F.__value="master",st(F,F.__value),P.__value="phd",st(P,P.__value),t[8]===void 0&&hn(()=>t[25].call(T)),I(k,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(E,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(X,"class","svelte-u6a8gr"),I(nt,"type","number"),I(nt,"min","0"),I(nt,"step","1"),I(Q,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,$){Z(N,e,$),y(e,n),y(n,i),y(n,r),st(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,d),y(f,p),y(f,m),y(f,b),_e(f,t[6],!0),y(e,_),y(e,g),y(g,v),y(g,w),st(w,t[7]),y(e,x),y(e,k),y(k,M),y(k,T),y(T,C),y(T,L),y(T,A),y(T,F),y(T,P),_e(T,t[8],!0),y(e,W),y(e,E),y(E,B),y(E,z),st(z,t[9]),y(e,J),y(e,X),y(X,j),y(X,O),st(O,t[10]),y(e,Y),y(e,Q),y(Q,at),y(Q,nt),st(nt,t[11]),V||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(nt,"input",t[28])],V=!0)},p(N,$){$[0]&32&&r.value!==N[5]&&st(r,N[5]),$[0]&64&&_e(f,N[6]),$[0]&128&&w.value!==N[7]&&st(w,N[7]),$[0]&256&&_e(T,N[8]),$[0]&512&&z.value!==N[9]&&st(z,N[9]),$[0]&1024&&xe(O.value)!==N[10]&&st(O,N[10]),$[0]&2048&&xe(nt.value)!==N[11]&&st(nt,N[11])},d(N){N&&G(e),V=!1,$e(q)}}}function fd(t){let e,n,i,r,o=t[14]&&sd(t);return{c(){e=S("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=Jn()},m(a,l){Z(a,e,l),Z(a,n,l),o&&o.m(a,l),Z(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=sd(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Ht(),K(o,1,1,()=>{o=null}),Vt())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(G(e),G(n),G(i)),o&&o.d(a)}}}function sd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,d=t[13]+1+"",p,m,b,_,g,v;const w=[zk,Uk],x=[];function k(M,T){return M[17]==="audio"?0:M[16]===!1?1:-1}return~(b=k(t))&&(_=x[b]=w[b](t)),{c(){e=S("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=S("p"),r=ot("Test number "),a=ot(o),l=ot(" / "),s=ot(f),u=D(),c=S("p"),h=ot("Trial number "),p=ot(d),m=D(),_&&_.c(),g=Jn()},m(M,T){Z(M,e,T),Z(M,n,T),Z(M,i,T),y(i,r),y(i,a),y(i,l),y(i,s),Z(M,u,T),Z(M,c,T),y(c,h),y(c,p),Z(M,m,T),~b&&x[b].m(M,T),Z(M,g,T),v=!0},p(M,T){(!v||T[0]&16)&&o!==(o=M[4]+1+"")&&Lt(a,o),(!v||T[0]&4)&&f!==(f=M[2].length+"")&&Lt(s,f),(!v||T[0]&8192)&&d!==(d=M[13]+1+"")&&Lt(p,d);let C=b;b=k(M),b===C?~b&&x[b].p(M,T):(_&&(Ht(),K(x[C],1,1,()=>{x[C]=null}),Vt()),~b?(_=x[b],_?_.p(M,T):(_=x[b]=w[b](M),_.c()),H(_,1),_.m(g.parentNode,g)):_=null)},i(M){v||(H(_),v=!0)},o(M){K(_),v=!1},d(M){M&&(G(e),G(n),G(i),G(u),G(c),G(m),G(g)),~b&&x[b].d(M)}}}function Uk(t){let e,n,i,r;const o=[Yk,Wk,qk,Bk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Jn()},m(f,s){~e&&a[e].m(f,s),Z(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Ht(),K(a[u],1,1,()=>{a[u]=null}),Vt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&G(i),~e&&a[e].d(f)}}}function zk(t){let e,n,i,r;return e=new ao({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=S("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),Z(o,n,a),Z(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(G(n),G(i)),ct(e,o)}}}function Bk(t){let e,n;return e=new Hn({props:{pattern:t[0],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function qk(t){let e,n;return e=new oo({props:{pattern:t[0],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Wk(t){let e,n;return e=new ro({props:{pattern:t[0],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Yk(t){let e,n;return e=new Vn({props:{pattern:t[0],audioFile:t[1],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function ud(t){let e,n,i,r,o,a;return{c(){e=S("div"),n=S("label"),i=ot(`Any final feedback?
        `),r=S("textarea")},m(l,f){Z(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&st(r,l[12])},d(l){l&&G(e),o=!1,a()}}}function cd(t){let e,n,i,r,o,a;return{c(){e=S("div"),e.textContent="Thanks for participating!",n=D(),i=S("div"),r=S("button"),r.textContent="Download results"},m(l,f){Z(l,e,f),Z(l,n,f),Z(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:_t,d(l){l&&(G(e),G(n),G(i)),o=!1,a()}}}function hd(t){let e,n,i;return{c(){e=S("button"),e.textContent="next step (PageDown)"},m(r,o){Z(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:_t,d(r){r&&G(e),n=!1,i()}}}function Hk(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&ld(t),u=t[3]==="tests"&&fd(t),c=t[3]==="feedback"&&ud(t),h=t[3]==="done"&&cd(t),d=!t[15]&&t[3]!=="done"&&hd(t);return{c(){e=S("main"),n=S("h2"),n.textContent="Study",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),d&&d.c(),I(e,"class","svelte-u6a8gr")},m(p,m){Z(p,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),d&&d.m(e,null),f=!0},p(p,m){p[3]==="demo"?s?s.p(p,m):(s=ld(p),s.c(),s.m(e,r)):s&&(s.d(1),s=null),p[3]==="tests"?u?(u.p(p,m),m[0]&8&&H(u,1)):(u=fd(p),u.c(),H(u,1),u.m(e,o)):u&&(Ht(),K(u,1,1,()=>{u=null}),Vt()),p[3]==="feedback"?c?c.p(p,m):(c=ud(p),c.c(),c.m(e,a)):c&&(c.d(1),c=null),p[3]==="done"?h?h.p(p,m):(h=cd(p),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!p[15]&&p[3]!=="done"?d?d.p(p,m):(d=hd(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){f||(H(u),f=!0)},o(p){K(u),f=!1},d(p){p&&G(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),d&&d.d()}}}let dd=.5;const If=20;let Vk=6,Gk=!0,Xk=0,Wl=600,Yl=100;function jk(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",d="master",p="",m=0,b=0,_="",g=0,v,w={},x=[],k,M,T=!1,C=!1,L=!1,A="tick",F=If,P=3,W=[],E=[],B=0;const z=[];mi(()=>{document.querySelector("html").addEventListener("keyup",nt)});const J=()=>{M=new It({ratio:{firstVal:If,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,If],direction:-1,reversalLimit:5,verbosity:1}}),M.init()};function X(){l==="start"?(n(2,a=Os(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,A=a[f].stimulus),n(1,o=a[f].audioFile),j()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function j(){J(),n(13,g=0),v=0,k=0,n(14,T=!0),E=[],x=[],s=new Date,O()}function O(){console.log("Starting trial "+g),w={},n(15,C=!0),Y()}function Y(){let dt=Math.round(M.getLast("ratio"));dt=Math.random()<.5?dt:-dt,w.deviation=dt,n(20,F=dt),console.log("generated pattern",W),n(16,L=!0),window.setTimeout(()=>{n(16,L=!1)},1e3)}function Q(ft){if(!C)return;n(15,C=!1),w.decisionChoice=ft,w.errorCode=0;const dt=k;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&k++,w.errorCode==0&&(M.next(dt!=k),x[x.length]=w),w.errorCode==0&&v++,n(13,g++,g),M.reversalLimitReached("ratio")?at():O()}function at(){n(14,T=!1),V(),E=[],B=M.getFinalVal("ratio");for(let dt=0;dt<x.length;dt++)E[dt]=x[dt].deviation;console.log(E);const ft=new Date;z.push({encoding:A,audioFile:o,final:B,data:E,score:k,testNumber:f,trialCount:g+1,trials:x,validTrialCount:v+1,testTimeSeconds:(ft-s)/1e3}),n(4,f++,f)}function nt(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":Q(0);break;case"ArrowRight":Q(1);break;case"PageDown":!C&&l!=="done"&&X()}}function V(){`${k}`,g+1,`${(k/(g+1)*100).toFixed(1)}${M.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:c,partGender:h,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:b,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ft);const dt=JSON.stringify(ft,void 0,2),Tt=new Blob([dt],{type:"text/plain;charset=utf-8"});Za(Tt,"results.json")}function N(){u=this.value,n(5,u)}function $(){c=pi(this),n(6,c)}function R(){h=this.value,n(7,h)}function tt(){d=pi(this),n(8,d)}function U(){p=this.value,n(9,p)}function mt(){m=xe(this.value),n(10,m)}function rt(){b=xe(this.value),n(11,b)}function pt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=F/100*dd),t.$$.dirty[0]&2097153&&(n(0,W=Vi(Vk,dd,P,i,Gk,Xk)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,d,p,m,b,_,g,T,C,L,A,X,q,F,i,N,$,R,tt,U,mt,rt,pt]}class Zk extends Ut{constructor(e){super(),Ot(this,e,jk,Hk,Pt,{},null,[-1,-1])}}function pd(t){let e,n,i,r,o,a,l,f,s,u,c,h,d,p,m,b,_,g,v,w,x,k,M,T,C,L,A,F,P,W,E,B,z,J,X,j,O,Y,Q,at,nt,V,q;return{c(){e=S("div"),n=S("label"),i=ot(`ID:
        `),r=S("input"),o=D(),a=S("label"),l=ot(`Age:
        `),f=S("select"),s=S("option"),s.textContent="20-24",u=S("option"),u.textContent="25-29",c=S("option"),c.textContent="30-34",h=S("option"),h.textContent="35-39",d=S("option"),d.textContent="40-44",p=S("option"),p.textContent="45-49",m=S("option"),m.textContent="50-54",b=S("option"),b.textContent="55-60",_=D(),g=S("label"),v=ot(`Gender:
        `),w=S("input"),x=D(),k=S("label"),M=ot(`Highest finished education (select the best fitting one):
        `),T=S("select"),C=S("option"),C.textContent="none",L=S("option"),L.textContent="high school",A=S("option"),A.textContent="bachelor",F=S("option"),F.textContent="master",P=S("option"),P.textContent="phd",W=D(),E=S("label"),B=ot(`Which music instruments do you play?
        `),z=S("input"),J=D(),X=S("label"),j=ot(`For how many years do you roughly play it/them?
        `),O=S("input"),Y=D(),Q=S("label"),at=ot(`How many years of experience do you have with visualization?
        `),nt=S("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",st(s,s.__value),u.__value="25-29",st(u,u.__value),c.__value="30-34",st(c,c.__value),h.__value="35-39",st(h,h.__value),d.__value="40-44",st(d,d.__value),p.__value="45-49",st(p,p.__value),m.__value="50-54",st(m,m.__value),b.__value="55-60",st(b,b.__value),t[6]===void 0&&hn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(g,"class","svelte-u6a8gr"),C.__value="none",st(C,C.__value),L.__value="highs",st(L,L.__value),A.__value="bachelor",st(A,A.__value),F.__value="master",st(F,F.__value),P.__value="phd",st(P,P.__value),t[8]===void 0&&hn(()=>t[25].call(T)),I(k,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(E,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(X,"class","svelte-u6a8gr"),I(nt,"type","number"),I(nt,"min","0"),I(nt,"step","1"),I(Q,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,$){Z(N,e,$),y(e,n),y(n,i),y(n,r),st(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,d),y(f,p),y(f,m),y(f,b),_e(f,t[6],!0),y(e,_),y(e,g),y(g,v),y(g,w),st(w,t[7]),y(e,x),y(e,k),y(k,M),y(k,T),y(T,C),y(T,L),y(T,A),y(T,F),y(T,P),_e(T,t[8],!0),y(e,W),y(e,E),y(E,B),y(E,z),st(z,t[9]),y(e,J),y(e,X),y(X,j),y(X,O),st(O,t[10]),y(e,Y),y(e,Q),y(Q,at),y(Q,nt),st(nt,t[11]),V||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(nt,"input",t[28])],V=!0)},p(N,$){$[0]&32&&r.value!==N[5]&&st(r,N[5]),$[0]&64&&_e(f,N[6]),$[0]&128&&w.value!==N[7]&&st(w,N[7]),$[0]&256&&_e(T,N[8]),$[0]&512&&z.value!==N[9]&&st(z,N[9]),$[0]&1024&&xe(O.value)!==N[10]&&st(O,N[10]),$[0]&2048&&xe(nt.value)!==N[11]&&st(nt,N[11])},d(N){N&&G(e),V=!1,$e(q)}}}function md(t){let e,n,i,r,o=t[14]&&gd(t);return{c(){e=S("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=Jn()},m(a,l){Z(a,e,l),Z(a,n,l),o&&o.m(a,l),Z(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=gd(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Ht(),K(o,1,1,()=>{o=null}),Vt())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(G(e),G(n),G(i)),o&&o.d(a)}}}function gd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,d=t[13]+1+"",p,m,b,_,g,v;const w=[Jk,Kk],x=[];function k(M,T){return M[17]==="audio"?0:M[16]===!1?1:-1}return~(b=k(t))&&(_=x[b]=w[b](t)),{c(){e=S("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=S("p"),r=ot("Test number "),a=ot(o),l=ot(" / "),s=ot(f),u=D(),c=S("p"),h=ot("Trial number "),p=ot(d),m=D(),_&&_.c(),g=Jn()},m(M,T){Z(M,e,T),Z(M,n,T),Z(M,i,T),y(i,r),y(i,a),y(i,l),y(i,s),Z(M,u,T),Z(M,c,T),y(c,h),y(c,p),Z(M,m,T),~b&&x[b].m(M,T),Z(M,g,T),v=!0},p(M,T){(!v||T[0]&16)&&o!==(o=M[4]+1+"")&&Lt(a,o),(!v||T[0]&4)&&f!==(f=M[2].length+"")&&Lt(s,f),(!v||T[0]&8192)&&d!==(d=M[13]+1+"")&&Lt(p,d);let C=b;b=k(M),b===C?~b&&x[b].p(M,T):(_&&(Ht(),K(x[C],1,1,()=>{x[C]=null}),Vt()),~b?(_=x[b],_?_.p(M,T):(_=x[b]=w[b](M),_.c()),H(_,1),_.m(g.parentNode,g)):_=null)},i(M){v||(H(_),v=!0)},o(M){K(_),v=!1},d(M){M&&(G(e),G(n),G(i),G(u),G(c),G(m),G(g)),~b&&x[b].d(M)}}}function Kk(t){let e,n,i,r;const o=[nM,eM,tM,Qk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Jn()},m(f,s){~e&&a[e].m(f,s),Z(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Ht(),K(a[u],1,1,()=>{a[u]=null}),Vt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&G(i),~e&&a[e].d(f)}}}function Jk(t){let e,n,i,r;return e=new ao({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=S("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),Z(o,n,a),Z(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(G(n),G(i)),ct(e,o)}}}function Qk(t){let e,n;return e=new Hn({props:{pattern:t[0],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function tM(t){let e,n;return e=new oo({props:{pattern:t[0],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function eM(t){let e,n;return e=new ro({props:{pattern:t[0],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function nM(t){let e,n;return e=new Vn({props:{pattern:t[0],audioFile:t[1],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function bd(t){let e,n,i,r,o,a;return{c(){e=S("div"),n=S("label"),i=ot(`Any final feedback?
        `),r=S("textarea")},m(l,f){Z(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&st(r,l[12])},d(l){l&&G(e),o=!1,a()}}}function _d(t){let e,n,i,r,o,a;return{c(){e=S("div"),e.textContent="Thanks for participating!",n=D(),i=S("div"),r=S("button"),r.textContent="Download results"},m(l,f){Z(l,e,f),Z(l,n,f),Z(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:_t,d(l){l&&(G(e),G(n),G(i)),o=!1,a()}}}function yd(t){let e,n,i;return{c(){e=S("button"),e.textContent="next step (PageDown)"},m(r,o){Z(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:_t,d(r){r&&G(e),n=!1,i()}}}function iM(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&pd(t),u=t[3]==="tests"&&md(t),c=t[3]==="feedback"&&bd(t),h=t[3]==="done"&&_d(t),d=!t[15]&&t[3]!=="done"&&yd(t);return{c(){e=S("main"),n=S("h2"),n.textContent="Study (Within-Participant Variance)",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),d&&d.c(),I(e,"class","svelte-u6a8gr")},m(p,m){Z(p,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),d&&d.m(e,null),f=!0},p(p,m){p[3]==="demo"?s?s.p(p,m):(s=pd(p),s.c(),s.m(e,r)):s&&(s.d(1),s=null),p[3]==="tests"?u?(u.p(p,m),m[0]&8&&H(u,1)):(u=md(p),u.c(),H(u,1),u.m(e,o)):u&&(Ht(),K(u,1,1,()=>{u=null}),Vt()),p[3]==="feedback"?c?c.p(p,m):(c=bd(p),c.c(),c.m(e,a)):c&&(c.d(1),c=null),p[3]==="done"?h?h.p(p,m):(h=_d(p),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!p[15]&&p[3]!=="done"?d?d.p(p,m):(d=yd(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){f||(H(u),f=!0)},o(p){K(u),f=!1},d(p){p&&G(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),d&&d.d()}}}let wd=.5;const Rf=20;let rM=6,oM=!0,aM=0,Hl=600,Vl=100;function lM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",d="master",p="",m=0,b=0,_="",g=0,v,w={},x=[],k,M,T=!1,C=!1,L=!1,A="tick",F=Rf,P=3,W=[],E=[],B=0;const z=[];mi(()=>{document.querySelector("html").addEventListener("keyup",nt)});const J=()=>{M=new It({ratio:{firstVal:Rf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Rf],direction:-1,reversalLimit:5,verbosity:1}}),M.init()};function X(){l==="start"?(n(2,a=Os(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,A=a[f].stimulus),n(1,o=a[f].audioFile),j()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function j(){J(),n(13,g=0),v=0,k=0,n(14,T=!0),E=[],x=[],s=new Date,O()}function O(){console.log("Starting trial "+g),w={},n(15,C=!0),Y()}function Y(){let dt=Math.round(M.getLast("ratio"));dt=Math.random()<.5?dt:-dt,w.deviation=dt,n(20,F=dt),console.log("generated pattern",W),n(16,L=!0),window.setTimeout(()=>{n(16,L=!1)},1e3)}function Q(ft){if(!C)return;n(15,C=!1),w.decisionChoice=ft,w.errorCode=0;const dt=k;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&k++,w.errorCode==0&&(M.next(dt!=k),x[x.length]=w),w.errorCode==0&&v++,n(13,g++,g),M.reversalLimitReached("ratio")?at():O()}function at(){n(14,T=!1),V(),E=[],B=M.getFinalVal("ratio");for(let dt=0;dt<x.length;dt++)E[dt]=x[dt].deviation;console.log(E);const ft=new Date;z.push({encoding:A,audioFile:o,final:B,data:E,score:k,testNumber:f,trialCount:g+1,trials:x,validTrialCount:v+1,testTimeSeconds:(ft-s)/1e3}),n(4,f++,f)}function nt(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":Q(0);break;case"ArrowRight":Q(1);break;case"PageDown":!C&&l!=="done"&&X()}}function V(){`${k}`,g+1,`${(k/(g+1)*100).toFixed(1)}${M.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:c,partGender:h,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:b,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ft);const dt=JSON.stringify(ft,void 0,2),Tt=new Blob([dt],{type:"text/plain;charset=utf-8"});Za(Tt,"results.json")}function N(){u=this.value,n(5,u)}function $(){c=pi(this),n(6,c)}function R(){h=this.value,n(7,h)}function tt(){d=pi(this),n(8,d)}function U(){p=this.value,n(9,p)}function mt(){m=xe(this.value),n(10,m)}function rt(){b=xe(this.value),n(11,b)}function pt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=F/100*wd),t.$$.dirty[0]&2097153&&(n(0,W=Vi(rM,wd,P,i,oM,aM)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,d,p,m,b,_,g,T,C,L,A,X,q,F,i,N,$,R,tt,U,mt,rt,pt]}class fM extends Ut{constructor(e){super(),Ot(this,e,lM,iM,Pt,{},null,[-1,-1])}}function sM(t){let e,n,i;return{c(){e=S("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&G(e),t[6](null)}}}function uM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=100}=e,f;We(()=>{const u=De({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[ql(i,{x:c=>c}),Ol(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${h+1}`})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){re[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class fb extends Ut{constructor(e){super(),Ot(this,e,uM,sM,Pt,{data:3,domain:4,title:5,width:0,height:1})}}function cM(t){let e,n,i;return{c(){e=S("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&G(e),t[5](null)}}}function hM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;We(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.finals)})),u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[io(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Bl(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Pl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Gn(s),p=1.96*(fo(s)/Math.sqrt(u)),m=c-p,b=c+p;return{mean:c,low:m,high:b}}function f(s){re[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Xu extends Ut{constructor(e){super(),Ot(this,e,hM,cM,Pt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function dM(t){let e,n,i;return{c(){e=S("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&G(e),t[5](null)}}}function pM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;We(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.trialCounts)})),u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[io(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Bl(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Pl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Gn(s),p=1.96*(fo(s)/Math.sqrt(u)),m=c-p,b=c+p;return{mean:c,low:m,high:b}}function f(s){re[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class ju extends Ut{constructor(e){super(),Ot(this,e,pM,dM,Pt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function vd(t,e,n){const i=t.slice();return i[8]=e[n],i}function xd(t,e,n){const i=t.slice();return i[11]=e[n],i}function kd(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new fb({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=S("b"),i=ot(n),r=D(),ht(o.$$.fragment)},m(l,f){Z(l,e,f),y(e,i),Z(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&4)&&n!==(n=l[11].encoding+"")&&Lt(i,n);const s={};f&4&&(s.data=l[11].finals),f&4&&(s.title=l[11].encoding),f&2&&(s.domain=[0,l[1]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(G(e),G(r)),ct(o,l)}}}function Md(t){let e,n,i,r=t[8].demographics.partID+"",o,a,l,f,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=S("div"),n=S("b"),i=ot("P"),o=ot(r),a=ot(":"),l=D(),f=new db(!1),u=D(),f.a=u,we(e,"text-align","left")},m(c,h){Z(c,e,h),y(e,n),y(n,i),y(n,o),y(n,a),y(e,l),f.m(s,e),y(e,u)},p(c,h){h&1&&r!==(r=c[8].demographics.partID+"")&&Lt(o,r),h&1&&s!==(s=c[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&f.p(s)},d(c){c&&G(e)}}}function mM(t){let e,n,i,r,o,a,l,f,s,u,c,h,d,p,m,b,_,g,v,w,x,k,M,T,C,L,A;c=new Xu({props:{stimuli:t[2]}}),b=new ju({props:{stimuli:t[2]}});let F=zt(t[2]),P=[];for(let z=0;z<F.length;z+=1)P[z]=kd(xd(t,F,z));const W=z=>K(P[z],1,1,()=>{P[z]=null});let E=zt(t[0]),B=[];for(let z=0;z<E.length;z+=1)B[z]=Md(vd(t,E,z));return{c(){e=S("main"),n=S("h2"),n.textContent="Analysis",i=D(),r=S("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=S("input"),l=D(),f=S("div"),s=S("h3"),s.textContent="Mean and CI of Final Values",u=D(),ht(c.$$.fragment),h=D(),d=S("div"),p=S("h3"),p.textContent="Mean and CI of Trial Counts",m=D(),ht(b.$$.fragment),_=D(),g=S("div"),v=S("h3"),v.textContent="Final Values for Each Stimulus and All Participants",w=D();for(let z=0;z<P.length;z+=1)P[z].c();x=D(),k=S("div"),M=S("h3"),M.textContent="Feedback",T=D();for(let z=0;z<B.length;z+=1)B[z].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(z,J){Z(z,e,J),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,d),y(d,p),y(d,m),ut(b,d,null),y(e,_),y(e,g),y(g,v),y(g,w);for(let X=0;X<P.length;X+=1)P[X]&&P[X].m(g,null);y(e,x),y(e,k),y(k,M),y(k,T);for(let X=0;X<B.length;X+=1)B[X]&&B[X].m(k,null);C=!0,L||(A=gt(a,"input",t[3]),L=!0)},p(z,[J]){const X={};J&4&&(X.stimuli=z[2]),c.$set(X);const j={};if(J&4&&(j.stimuli=z[2]),b.$set(j),J&6){F=zt(z[2]);let O;for(O=0;O<F.length;O+=1){const Y=xd(z,F,O);P[O]?(P[O].p(Y,J),H(P[O],1)):(P[O]=kd(Y),P[O].c(),H(P[O],1),P[O].m(g,null))}for(Ht(),O=F.length;O<P.length;O+=1)W(O);Vt()}if(J&1){E=zt(z[0]);let O;for(O=0;O<E.length;O+=1){const Y=vd(z,E,O);B[O]?B[O].p(Y,J):(B[O]=Md(Y),B[O].c(),B[O].m(k,null))}for(;O<B.length;O+=1)B[O].d(1);B.length=E.length}},i(z){if(!C){H(c.$$.fragment,z),H(b.$$.fragment,z);for(let J=0;J<F.length;J+=1)H(P[J]);C=!0}},o(z){K(c.$$.fragment,z),K(b.$$.fragment,z),P=P.filter(Boolean);for(let J=0;J<P.length;J+=1)K(P[J]);C=!1},d(z){z&&G(e),ct(c),ct(b),Ge(P,z),Ge(B,z),L=!1,A()}}}function gM(t,e,n){let i,r,o,a=[];const l=async u=>{const c=[],h=[];for(const d of u.target.files){const p=await d.text();c.push(JSON.parse(p)),h.push(d.name)}n(0,a=c),console.log(a)},f=u=>{if(u.lenght===0)return[];const c=[];for(const h of u)for(const d of h.tests){let p=d.encoding;(d.encoding==="audio"||d.encoding==="waveform")&&(p=`${d.encoding} + ${d.audioFile.startsWith("./Fluid")?"piano":"drums"}`),c.push({...h.demographics,...d,date:h.date,testType:p})}return console.log(c),c},s=u=>{if(u.length===0)return[];const c=ln(u,h=>h.testType).map(([h,d])=>{const p=d.map(m=>m.final);return{encoding:h,finals:p,finalMean:Gn(p),finalVar:Gi(p),trialCounts:d.map(m=>m.trialCount)}});return console.log(c),c};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=f(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ke(i.map(u=>Math.abs(u.final))))},[a,o,r,l,i]}class bM extends Ut{constructor(e){super(),Ot(this,e,gM,mM,Pt,{})}}function _M(t){let e,n,i;return{c(){e=S("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&G(e),t[6](null)}}}function yM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=300}=e,f;We(()=>{console.log(o),console.log(i);const u=De({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[ql(i,{x:c=>c,strokeWidth:.5}),Ol(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${Math.floor(h/3)+1}-${h%3+1}`,fill:"black",stroke:"white"})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){re[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class wM extends Ut{constructor(e){super(),Ot(this,e,yM,_M,Pt,{data:3,domain:4,title:5,width:0,height:1})}}function vM(t){let e,n,i;return{c(){e=S("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){Z(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&G(e),t[5](null)}}}function xM(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;We(()=>{const s=i.map(c=>({partID:c.partID,...l(c.finals)}));console.log(i,s);const u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.partID)},marks:[io(s,{x:c=>c.mean,y:c=>c.partID,symbol:"diamond"}),io(i,{x:c=>c.mean,y:c=>c.partID}),Bl(s,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),Pl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Gn(s),p=1.96*(fo(s)/Math.sqrt(u)),m=c-p,b=c+p;return{mean:c,low:m,high:b}}function f(s){re[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"partis"in s&&n(3,i=s.partis),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class ra extends Ut{constructor(e){super(),Ot(this,e,xM,vM,Pt,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Sd(t,e,n){const i=t.slice();return i[13]=e[n],i}function Td(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new wM({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=S("b"),i=ot(n),r=D(),ht(o.$$.fragment)},m(l,f){Z(l,e,f),y(e,i),Z(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&32)&&n!==(n=l[13].encoding+"")&&Lt(i,n);const s={};f&32&&(s.data=l[13].finals),f&32&&(s.title=l[13].encoding),f&16&&(s.domain=[0,l[4]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(G(e),G(r)),ct(o,l)}}}function kM(t){let e,n,i,r,o,a,l,f,s,u,c,h,d,p,m,b,_,g,v,w,x,k,M,T,C,L,A,F,P,W,E,B,z,J,X,j,O,Y,Q,at;c=new Xu({props:{stimuli:t[5]}}),b=new ju({props:{stimuli:t[5]}}),x=new ra({props:{partis:t[3]}}),C=new ra({props:{partis:t[2]}}),P=new ra({props:{partis:t[0]}}),z=new ra({props:{partis:t[1]}});let nt=zt(t[5]),V=[];for(let N=0;N<nt.length;N+=1)V[N]=Td(Sd(t,nt,N));const q=N=>K(V[N],1,1,()=>{V[N]=null});return{c(){e=S("main"),n=S("h2"),n.textContent="Analysis (Within-Participant Variance)",i=D(),r=S("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=S("input"),l=D(),f=S("div"),s=S("h3"),s.textContent="Mean and CI of Final Values per Stimulus",u=D(),ht(c.$$.fragment),h=D(),d=S("div"),p=S("h3"),p.textContent="Mean and CI of Trial Counts per Stimulus",m=D(),ht(b.$$.fragment),_=D(),g=S("div"),v=S("h3"),v.textContent="Mean and CI of Final Values per Participant",w=D(),ht(x.$$.fragment),k=D(),M=S("h4"),M.textContent="Only Audio",T=D(),ht(C.$$.fragment),L=D(),A=S("h4"),A.textContent="Only Color",F=D(),ht(P.$$.fragment),W=D(),E=S("h4"),E.textContent="Only Waveform",B=D(),ht(z.$$.fragment),J=D(),X=S("div"),j=S("h3"),j.textContent="Final Values for Each Stimulus and All Participants",O=D();for(let N=0;N<V.length;N+=1)V[N].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(N,$){Z(N,e,$),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,d),y(d,p),y(d,m),ut(b,d,null),y(e,_),y(e,g),y(g,v),y(g,w),ut(x,g,null),y(g,k),y(g,M),y(g,T),ut(C,g,null),y(g,L),y(g,A),y(g,F),ut(P,g,null),y(g,W),y(g,E),y(g,B),ut(z,g,null),y(e,J),y(e,X),y(X,j),y(X,O);for(let R=0;R<V.length;R+=1)V[R]&&V[R].m(X,null);Y=!0,Q||(at=gt(a,"input",t[6]),Q=!0)},p(N,[$]){const R={};$&32&&(R.stimuli=N[5]),c.$set(R);const tt={};$&32&&(tt.stimuli=N[5]),b.$set(tt);const U={};$&8&&(U.partis=N[3]),x.$set(U);const mt={};$&4&&(mt.partis=N[2]),C.$set(mt);const rt={};$&1&&(rt.partis=N[0]),P.$set(rt);const pt={};if($&2&&(pt.partis=N[1]),z.$set(pt),$&48){nt=zt(N[5]);let ft;for(ft=0;ft<nt.length;ft+=1){const dt=Sd(N,nt,ft);V[ft]?(V[ft].p(dt,$),H(V[ft],1)):(V[ft]=Td(dt),V[ft].c(),H(V[ft],1),V[ft].m(X,null))}for(Ht(),ft=nt.length;ft<V.length;ft+=1)q(ft);Vt()}},i(N){if(!Y){H(c.$$.fragment,N),H(b.$$.fragment,N),H(x.$$.fragment,N),H(C.$$.fragment,N),H(P.$$.fragment,N),H(z.$$.fragment,N);for(let $=0;$<nt.length;$+=1)H(V[$]);Y=!0}},o(N){K(c.$$.fragment,N),K(b.$$.fragment,N),K(x.$$.fragment,N),K(C.$$.fragment,N),K(P.$$.fragment,N),K(z.$$.fragment,N),V=V.filter(Boolean);for(let $=0;$<V.length;$+=1)K(V[$]);Y=!1},d(N){N&&G(e),ct(c),ct(b),ct(x),ct(C),ct(P),ct(z),Ge(V,N),Q=!1,at()}}}function MM(t,e,n){let i,r,o,a,l,f,s,u=[];const c=async m=>{const b=[],_=[];for(const g of m.target.files){const v=await g.text();b.push(JSON.parse(v)),_.push(g.name)}n(7,u=b),console.log(u)},h=m=>{if(m.lenght===0)return[];const b=[];for(const _ of m)for(const g of _.tests){let v=g.encoding;(g.encoding==="audio"||g.encoding==="waveform")&&(v=`${g.encoding} + ${g.audioFile.startsWith("./Fluid")?"piano":"drums"}`),b.push({..._.demographics,...g,date:_.date,testType:v})}return console.log(b),b},d=m=>{if(m.length===0)return[];const b=ln(m,_=>_.testType).map(([_,g])=>{const v=g.map(w=>w.final);return{encoding:_,finals:v,finalMean:Gn(v),finalVar:Gi(v),trialCounts:g.map(w=>w.trialCount)}});return console.log(b),b},p=(m,b)=>{if(m.length===0)return[];b&&(m=m.filter(g=>g.testType===b));const _=ln(m,g=>g.partID).map(([g,v])=>{const w=v.map(x=>x.final);return{partID:g,finals:w,finalMean:Gn(w),finalVar:Gi(w),trialCounts:v.map(x=>x.trialCount)}});return console.log(_),_};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=h(u)),t.$$.dirty&256&&n(5,r=d(i)),t.$$.dirty&256&&n(4,o=ke(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=p(i)),t.$$.dirty&256&&n(2,l=p(i,"audio + piano")),t.$$.dirty&256&&n(1,f=p(i,"waveform + piano")),t.$$.dirty&256&&n(0,s=p(i,"color"))},[s,f,l,a,o,r,c,u,i]}class SM extends Ut{constructor(e){super(),Ot(this,e,MM,kM,Pt,{})}}function TM(t){let e,n,i,r;return{c(){e=S("main"),n=S("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){Z(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&G(e),t[7](null)}}}function CM(t,e,n){let{title:i=void 0}=e,{width:r=600}=e,{height:o=200}=e,{data:a}=e,{x:l="x"}=e,{y:f="y"}=e,s;We(()=>{n(2,s.textContent="",s);const c=De({title:i,width:r,height:o,x:{domain:[0,70]},marks:[gk(a,{x:l,y:f,stroke:"#ccc"}),Uu([0])]});s.appendChild(c)});function u(c){re[c?"unshift":"push"](()=>{s=c,n(2,s)})}return t.$$set=c=>{"title"in c&&n(3,i=c.title),"width"in c&&n(0,r=c.width),"height"in c&&n(1,o=c.height),"data"in c&&n(4,a=c.data),"x"in c&&n(5,l=c.x),"y"in c&&n(6,f=c.y)},[r,o,s,i,a,l,f,u]}class AM extends Ut{constructor(e){super(),Ot(this,e,CM,TM,Pt,{title:3,width:0,height:1,data:4,x:5,y:6})}}function Cd(t,e){return t==null?e:typeof t=="function"?t:n=>n[t]}function EM(t,e,n,i,r,o){const a=new Float64Array(o),l=(o-1)/(r-i);for(let f=0;f<t.length;++f){const s=t[f],u=e(s,f,t),c=n(s,f,t);if(!(Number.isFinite(u)&&Number.isFinite(c)))continue;const h=(u-i)*l,d=Math.floor(h),p=d+1;0<=d&&p<o?(a[d]+=(p-h)*c,a[p]+=(h-d)*c):d===-1?a[p]+=(h-d)*c:p===o&&(a[d]+=(p-h)*c)}return a}function Ad(t,e=!1){const n=new Float64Array(5),i=new Float64Array(4);$M(n,i,t);const r=Float64Array.of(0,i[1]-n[1]*i[0],i[2]-n[2]*i[0],i[3]-n[3]*i[0],-n[4]*i[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(i[0]+i[1]+i[2]+i[3])/o,l=(r[1]+r[2]+r[3]+r[4])/o;return{sigma:t,negative:e,a:n,b_causal:i,b_anticausal:r,sum_causal:a,sum_anticausal:l}}function $M(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),l=.6318/n,f=1.997/n,s=Float64Array.of(-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l),-a*Math.cos(f),a*Math.sin(f),-a*Math.cos(-f),a*Math.sin(-f)),u=n*2.5066282746310007,c=Float64Array.of(r[0],r[1],0,0,0,0,0,0),h=Float64Array.of(1,0,s[0],s[1],0,0,0,0,0,0);let d,p;for(p=2;p<8;p+=2){for(c[p]=s[p]*c[p-2]-s[p+1]*c[p-1],c[p+1]=s[p]*c[p-1]+s[p+1]*c[p-2],d=p-2;d>0;d-=2)c[d]+=s[p]*c[d-2]-s[p+1]*c[d-1],c[d+1]+=s[p]*c[d-1]+s[p+1]*c[d-2];for(d=0;d<=p;d+=2)c[d]+=r[p]*h[d]-r[p+1]*h[d+1],c[d+1]+=r[p]*h[d+1]+r[p+1]*h[d];for(h[p+2]=s[p]*h[p]-s[p+1]*h[p+1],h[p+3]=s[p]*h[p+1]+s[p+1]*h[p],d=p;d>0;d-=2)h[d]+=s[p]*h[d-2]-s[p+1]*h[d-1],h[d+1]+=s[p]*h[d-1]+s[p+1]*h[d-2]}for(p=0;p<4;++p)d=p<<1,e[p]=c[d]/u,t[p+1]=h[d+2]}function NM(t,e,n,i=1,r=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),l=r,f=DM){const s=i*2,u=i*3,c=i*4,h=i*n;let d,p;for(f(r,e,n,i,t.b_causal,3,t.a,4,t.sum_causal,a,t.sigma),p=4,d=c;p<n;++p,d+=i)r[p]=t.b_causal[0]*e[d]+t.b_causal[1]*e[d-i]+t.b_causal[2]*e[d-s]+t.b_causal[3]*e[d-u]-t.a[1]*r[p-1]-t.a[2]*r[p-2]-t.a[3]*r[p-3]-t.a[4]*r[p-4];for(f(o,e,n,-i,t.b_anticausal,4,t.a,4,t.sum_anticausal,a,t.sigma),p=4,d=h-i*5;p<n;++p,d-=i)o[p]=t.b_anticausal[1]*e[d+i]+t.b_anticausal[2]*e[d+s]+t.b_anticausal[3]*e[d+u]+t.b_anticausal[4]*e[d+c]-t.a[1]*o[p-1]-t.a[2]*o[p-2]-t.a[3]*o[p-3]-t.a[4]*o[p-4];if(t.negative)for(p=0,d=0;p<n;++p,d+=i)l[d]=r[p]+o[n-p-1];else for(p=0,d=0;p<n;++p,d+=i)l[d]=Math.max(0,r[p]+o[n-p-1]);return l}function DM(t,e,n,i,r,o,a,l,f,s){const u=Math.abs(i)*n,c=i<0?u+i:0;let h,d,p;for(d=0;d<l;++d)for(s[d]=d<=o?r[d]:0,p=1;p<=l&&p<=d;++p)s[d]-=a[p]*s[d-p];for(p=0;p<l;++p)for(t[p]=0,d=1;d<=p;++d)h=c+i*d,h>=0&&h<u&&(t[p]+=s[p-d]*e[h]);const m=e[c];if(m>0)for(p=0;p<l;++p)t[p]+=s[p]*m}function FM(t,e,n=0){const i=t.length;let r,o;for(let a=0;a<i;++a){const l=e(t[a],a,t);l!=null&&(r===void 0?l>=l&&(r=o=l):(l<r&&(r=l),l>o&&(o=l)))}return[r-n,o+n]}function LM(t,e){const n=t.map(e).filter(s=>s!=null&&s>=s);n.sort((s,u)=>s-u);const i=IM(n),r=Ed(n,.25),o=Ed(n,.75),a=n.length,l=(o-r)/1.34;return 1.06*(Math.min(i,l)||i||Math.abs(r)||1)*Math.pow(a,-.2)}function IM(t){const e=t.length;let n=0,i,r=0,o=0;for(let a=0;a<e;++a){const l=t[a];i=l-r,r+=i/++n,o+=i*(l-r)}return n>1?Math.sqrt(o/(n-1)):NaN}function Ed(t,e){const n=t.length;if(!n)return NaN;if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];const i=(n-1)*e,r=Math.floor(i),o=t[r];return o+(t[r+1]-o)*(i-r)}function RM(t,e={}){const{adjust:n=1,pad:i=3,bins:r=512}=e,o=Cd(e.x,_=>_),a=Cd(e.weight,()=>1/t.length);let l=e.bandwidth??n*LM(t,o);const[f,s]=e.extent??FM(t,o,i*l),u=EM(t,o,a,f,s,r),c=(s-f)/(r-1),h=u.some(_=>_<0);let d=Ad(l/c,h),p;function*m(_="x",g="y"){const v=b.grid(),w=1/c;for(let x=0;x<r;++x)yield{[_]:f+x*c,[g]:v[x]*w}}const b={[Symbol.iterator]:m,points:m,grid:()=>p||(p=NM(d,u,r)),extent:()=>[f,s],bandwidth(_){return arguments.length?(_!==l&&(l=_,p=null,d=Ad(l/c,h)),b):l}};return b}function PM(t){let e,n,i,r;return{c(){e=S("main"),n=S("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){Z(o,e,a),y(e,n),t[10](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&G(e),t[10](null)}}}function OM(t,e,n){let i,{values:r}=e,{title:o=""}=e,{xLabel:a="some value"}=e,{xDomain:l=void 0}=e,{width:f=1e3}=e,{height:s=100}=e,{bandwidth:u=.25}=e,{bins:c=256}=e,{pad:h=4}=e,d;We(()=>{const m=[...i.bandwidth(u)];n(2,d.textContent="",d);const b=De({width:f,height:s,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:l},y:{label:"density",type:"linear"},marks:[ek(m,{x:"x",y:"y",fill:"#ccc"}),ql(r,{x:_=>_,strokeWidth:.5}),Uu([0])]});d.appendChild(b)});function p(m){re[m?"unshift":"push"](()=>{d=m,n(2,d)})}return t.$$set=m=>{"values"in m&&n(3,r=m.values),"title"in m&&n(4,o=m.title),"xLabel"in m&&n(5,a=m.xLabel),"xDomain"in m&&n(6,l=m.xDomain),"width"in m&&n(0,f=m.width),"height"in m&&n(1,s=m.height),"bandwidth"in m&&n(7,u=m.bandwidth),"bins"in m&&n(8,c=m.bins),"pad"in m&&n(9,h=m.pad)},t.$$.update=()=>{t.$$.dirty&904&&(i=RM(r,{bandwidth:u,pad:h,bins:c}))},[f,s,d,r,o,a,l,u,c,h,p]}class UM extends Ut{constructor(e){super(),Ot(this,e,OM,PM,Pt,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function zM(t){let e,n,i,r;return{c(){e=S("main"),n=S("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){Z(o,e,a),y(e,n),t[13](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&G(e),t[13](null)}}}function BM(t,e,n){let{title:i=""}=e,{data:r}=e,{x:o="x"}=e,{y:a="y"}=e,{tipTitle:l=null}=e,{xLabel:f=null}=e,{yLabel:s=null}=e,{xDomain:u=void 0}=e,{yDomain:c=void 0}=e,{grid:h=!1}=e,{width:d=300}=e,{height:p=300}=e,m;We(()=>{console.log(r,o,a),n(2,m.textContent="",m);const _=De({width:d,height:p,title:i,grid:h,style:{background:"none"},x:{label:f||(typeof o=="string"?o:"x"),domain:u},y:{label:s||(typeof a=="string"?a:"y"),domain:c},marks:[io(r,{x:o,y:a}),W2(r,Qg({x:o,y:a,title:l})),Bl({length:1},{x1:u[0],x2:u[1],y1:c[0],y2:c[1],stroke:"#ccc"})]});m.appendChild(_)});function b(_){re[_?"unshift":"push"](()=>{m=_,n(2,m)})}return t.$$set=_=>{"title"in _&&n(3,i=_.title),"data"in _&&n(4,r=_.data),"x"in _&&n(5,o=_.x),"y"in _&&n(6,a=_.y),"tipTitle"in _&&n(7,l=_.tipTitle),"xLabel"in _&&n(8,f=_.xLabel),"yLabel"in _&&n(9,s=_.yLabel),"xDomain"in _&&n(10,u=_.xDomain),"yDomain"in _&&n(11,c=_.yDomain),"grid"in _&&n(12,h=_.grid),"width"in _&&n(0,d=_.width),"height"in _&&n(1,p=_.height)},[d,p,m,i,r,o,a,l,f,s,u,c,h,b]}class $d extends Ut{constructor(e){super(),Ot(this,e,BM,zM,Pt,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function Nd(t,e,n){const i=t.slice();return i[12]=e[n],i}function Dd(t,e,n){const i=t.slice();return i[15]=e[n],i}function Fd(t,e,n){const i=t.slice();return i[18]=e[n],i}function Ld(t,e,n){const i=t.slice();return i[21]=e[n],i}function Id(t,e,n){const i=t.slice();return i[24]=e[n],i}function Rd(t,e,n){const i=t.slice();return i[27]=e[n][0],i[28]=e[n][1],i}function Pd(t){let e,n=t[27]+"",i,r,o=t[28].length+"",a,l;return{c(){e=S("p"),i=ot(n),r=ot(": "),a=ot(o),l=ot(" times")},m(f,s){Z(f,e,s),y(e,i),y(e,r),y(e,a),y(e,l)},p(f,s){s&1&&n!==(n=f[27]+"")&&Lt(i,n),s&1&&o!==(o=f[28].length+"")&&Lt(a,o)},d(f){f&&G(e)}}}function Od(t){let e,n;return e=new UM({props:{title:`Density of final values for ${t[24][0]}`,values:t[24][1].map(Vd),xLabel:"final values",xDomain:[-1,20],bandwidth:YM}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=`Density of final values for ${i[24][0]}`),r&2&&(o.values=i[24][1].map(Vd)),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Ud(t){let e,n=t[21].encoding+"",i,r,o,a;return o=new fb({props:{data:t[21].finals,title:t[21].encoding,domain:[0,t[2]]}}),{c(){e=S("b"),i=ot(n),r=D(),ht(o.$$.fragment)},m(l,f){Z(l,e,f),y(e,i),Z(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&8)&&n!==(n=l[21].encoding+"")&&Lt(i,n);const s={};f&8&&(s.data=l[21].finals),f&8&&(s.title=l[21].encoding),f&4&&(s.domain=[0,l[2]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(G(e),G(r)),ct(o,l)}}}function zd(t){let e,n=t[18]+"",i;return{c(){e=S("p"),i=ot(n)},m(r,o){Z(r,e,o),y(e,i)},p(r,o){o&1&&n!==(n=r[18]+"")&&Lt(i,n)},d(r){r&&G(e)}}}function Bd(t){let e,n,i,r=t[15].demographics.internalPID+"",o,a,l=t[15].demographics.partID+"",f,s,u,c=zt(t[15].demographics.partFeedback.split(`
`)),h=[];for(let d=0;d<c.length;d+=1)h[d]=zd(Fd(t,c,d));return{c(){e=S("div"),n=S("b"),i=ot("P"),o=ot(r),a=D(),f=ot(l),s=ot(`:
        `);for(let d=0;d<h.length;d+=1)h[d].c();u=D(),we(e,"text-align","left")},m(d,p){Z(d,e,p),y(e,n),y(n,i),y(n,o),y(e,a),y(e,f),y(e,s);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(e,null);y(e,u)},p(d,p){if(p&1&&r!==(r=d[15].demographics.internalPID+"")&&Lt(o,r),p&1&&l!==(l=d[15].demographics.partID+"")&&Lt(f,l),p&1){c=zt(d[15].demographics.partFeedback.split(`
`));let m;for(m=0;m<c.length;m+=1){const b=Fd(d,c,m);h[m]?h[m].p(b,p):(h[m]=zd(b),h[m].c(),h[m].m(e,u))}for(;m<h.length;m+=1)h[m].d(1);h.length=c.length}},d(d){d&&G(e),Ge(h,d)}}}function qd(t){let e,n;return e=new AM({props:{title:t[12].encoding,width:WM,height:150,data:t[12].data,x:VM,y:t[7]}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=i[12].encoding),r&2&&(o.data=i[12].data),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function qM(t){let e,n,i,r,o,a,l,f,s,u,c,h=t[0].length+"",d,p,m=t[1].length+"",b,_,g=t[4].length+"",v,w,x,k,M,T,C,L,A,F,P,W,E,B,z,J,X,j,O,Y,Q,at,nt,V,q,N,$,R,tt,U,mt,rt,pt,ft,dt,Tt=zt(ln(t[0],Wd).sort(Yd)),yt=[];for(let et=0;et<Tt.length;et+=1)yt[et]=Pd(Rd(t,Tt,et));let he=zt(ln(t[1],Hd)),$t=[];for(let et=0;et<he.length;et+=1)$t[et]=Od(Id(t,he,et));const ee=et=>K($t[et],1,1,()=>{$t[et]=null});F=new $d({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),W=new $d({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),X=new Xu({props:{stimuli:t[3]}}),at=new ju({props:{stimuli:t[3]}});let Fe=zt(t[3]),Dt=[];for(let et=0;et<Fe.length;et+=1)Dt[et]=Ud(Ld(t,Fe,et));const Gl=et=>K(Dt[et],1,1,()=>{Dt[et]=null});let Rn=zt(t[0].filter(Gd)),ne=[];for(let et=0;et<Rn.length;et+=1)ne[et]=Bd(Dd(t,Rn,et));let de=zt(t[1]),Ft=[];for(let et=0;et<de.length;et+=1)Ft[et]=qd(Nd(t,de,et));const oi=et=>K(Ft[et],1,1,()=>{Ft[et]=null});return{c(){e=S("main"),n=S("h2"),n.textContent="Analysis",i=D(),r=S("div"),o=S("label"),a=ot(`Results JSONs and Prolific demographics CSV
      `),l=S("input"),f=D(),s=S("button"),s.textContent="export JSON",u=D(),c=S("div"),d=ot(h),p=ot(` participants completed -
    `),b=ot(m),_=ot(` tests -
    `),v=ot(g),w=ot(" filtered tests"),x=D(),k=S("div"),M=S("h3"),M.textContent="Encoding order",T=D();for(let et=0;et<yt.length;et+=1)yt[et].c();C=D(),L=S("div");for(let et=0;et<$t.length;et+=1)$t[et].c();A=D(),ht(F.$$.fragment),P=D(),ht(W.$$.fragment),E=D(),B=S("div"),z=S("h3"),z.textContent="Mean and CI of Final Values",J=D(),ht(X.$$.fragment),j=D(),O=S("div"),Y=S("h3"),Y.textContent="Mean and CI of Trial Counts",Q=D(),ht(at.$$.fragment),nt=D(),V=S("div"),q=S("h3"),q.textContent="Final Values for Each Stimulus and All Participants",N=D();for(let et=0;et<Dt.length;et+=1)Dt[et].c();$=D(),R=S("div"),tt=S("h3"),tt.textContent="Feedback",U=D();for(let et=0;et<ne.length;et+=1)ne[et].c();mt=D(),rt=S("div");for(let et=0;et<Ft.length;et+=1)Ft[et].c();I(l,"type","file"),I(l,"accept",".json,.csv"),l.multiple=!0},m(et,bt){Z(et,e,bt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),y(r,f),y(r,s),y(e,u),y(e,c),y(c,d),y(c,p),y(c,b),y(c,_),y(c,v),y(c,w),y(e,x),y(e,k),y(k,M),y(k,T);for(let Ct=0;Ct<yt.length;Ct+=1)yt[Ct]&&yt[Ct].m(k,null);y(e,C),y(e,L);for(let Ct=0;Ct<$t.length;Ct+=1)$t[Ct]&&$t[Ct].m(L,null);y(e,A),ut(F,e,null),y(e,P),ut(W,e,null),y(e,E),y(e,B),y(B,z),y(B,J),ut(X,B,null),y(e,j),y(e,O),y(O,Y),y(O,Q),ut(at,O,null),y(e,nt),y(e,V),y(V,q),y(V,N);for(let Ct=0;Ct<Dt.length;Ct+=1)Dt[Ct]&&Dt[Ct].m(V,null);y(e,$),y(e,R),y(R,tt),y(R,U);for(let Ct=0;Ct<ne.length;Ct+=1)ne[Ct]&&ne[Ct].m(R,null);y(e,mt),y(e,rt);for(let Ct=0;Ct<Ft.length;Ct+=1)Ft[Ct]&&Ft[Ct].m(rt,null);pt=!0,ft||(dt=[gt(l,"input",t[5]),gt(s,"click",t[6])],ft=!0)},p(et,[bt]){if((!pt||bt&1)&&h!==(h=et[0].length+"")&&Lt(d,h),(!pt||bt&2)&&m!==(m=et[1].length+"")&&Lt(b,m),(!pt||bt&16)&&g!==(g=et[4].length+"")&&Lt(v,g),bt&1){Tt=zt(ln(et[0],Wd).sort(Yd));let lt;for(lt=0;lt<Tt.length;lt+=1){const pe=Rd(et,Tt,lt);yt[lt]?yt[lt].p(pe,bt):(yt[lt]=Pd(pe),yt[lt].c(),yt[lt].m(k,null))}for(;lt<yt.length;lt+=1)yt[lt].d(1);yt.length=Tt.length}if(bt&2){he=zt(ln(et[1],Hd));let lt;for(lt=0;lt<he.length;lt+=1){const pe=Id(et,he,lt);$t[lt]?($t[lt].p(pe,bt),H($t[lt],1)):($t[lt]=Od(pe),$t[lt].c(),H($t[lt],1),$t[lt].m(L,null))}for(Ht(),lt=he.length;lt<$t.length;lt+=1)ee(lt);Vt()}const Ct={};bt&1&&(Ct.data=et[0]),F.$set(Ct);const Te={};bt&1&&(Te.data=et[0]),W.$set(Te);const nn={};bt&8&&(nn.stimuli=et[3]),X.$set(nn);const Io={};if(bt&8&&(Io.stimuli=et[3]),at.$set(Io),bt&12){Fe=zt(et[3]);let lt;for(lt=0;lt<Fe.length;lt+=1){const pe=Ld(et,Fe,lt);Dt[lt]?(Dt[lt].p(pe,bt),H(Dt[lt],1)):(Dt[lt]=Ud(pe),Dt[lt].c(),H(Dt[lt],1),Dt[lt].m(V,null))}for(Ht(),lt=Fe.length;lt<Dt.length;lt+=1)Gl(lt);Vt()}if(bt&1){Rn=zt(et[0].filter(Gd));let lt;for(lt=0;lt<Rn.length;lt+=1){const pe=Dd(et,Rn,lt);ne[lt]?ne[lt].p(pe,bt):(ne[lt]=Bd(pe),ne[lt].c(),ne[lt].m(R,null))}for(;lt<ne.length;lt+=1)ne[lt].d(1);ne.length=Rn.length}if(bt&2){de=zt(et[1]);let lt;for(lt=0;lt<de.length;lt+=1){const pe=Nd(et,de,lt);Ft[lt]?(Ft[lt].p(pe,bt),H(Ft[lt],1)):(Ft[lt]=qd(pe),Ft[lt].c(),H(Ft[lt],1),Ft[lt].m(rt,null))}for(Ht(),lt=de.length;lt<Ft.length;lt+=1)oi(lt);Vt()}},i(et){if(!pt){for(let bt=0;bt<he.length;bt+=1)H($t[bt]);H(F.$$.fragment,et),H(W.$$.fragment,et),H(X.$$.fragment,et),H(at.$$.fragment,et);for(let bt=0;bt<Fe.length;bt+=1)H(Dt[bt]);for(let bt=0;bt<de.length;bt+=1)H(Ft[bt]);pt=!0}},o(et){$t=$t.filter(Boolean);for(let bt=0;bt<$t.length;bt+=1)K($t[bt]);K(F.$$.fragment,et),K(W.$$.fragment,et),K(X.$$.fragment,et),K(at.$$.fragment,et),Dt=Dt.filter(Boolean);for(let bt=0;bt<Dt.length;bt+=1)K(Dt[bt]);Ft=Ft.filter(Boolean);for(let bt=0;bt<Ft.length;bt+=1)K(Ft[bt]);pt=!1},d(et){et&&G(e),Ge(yt,et),Ge($t,et),ct(F),ct(W),ct(X),ct(at),Ge(Dt,et),Ge(ne,et),Ge(Ft,et),ft=!1,$e(dt)}}}const WM=800;let YM=1,HM=20;const Wd=t=>t.encodingOrder,Yd=(t,e)=>t[1].lenght-e[1].length,Hd=t=>t.testType,Vd=t=>t.final,Gd=t=>t.demographics.partFeedback.trim().length>0,VM=(t,e)=>e;function GM(t,e,n){let i,r,o,a,l=[],f=null;const s=async m=>{const b=[];for(const g of m.target.files)if(g.name.endsWith(".csv")){const v=await g.text();f=t3(v),console.log("p demo",f)}else{const v=await g.text();b.push(JSON.parse(v))}const _=ln(b,g=>g.demographics.partID);console.log(`${_.length} participants`,_),n(0,l=b.filter(g=>g.studyStep==="feedback").map((g,v)=>({...g,demographics:{...g.demographics,internalPID:v+1},prolificDemogr:f.filter(w=>w["Participant id"]===g.demographics.partID)[0],finalAudio:g.tests.filter(w=>w.encoding.startsWith("audio"))[0].final,finalColor:g.tests.filter(w=>w.encoding.startsWith("color"))[0].final,finalWaveform:g.tests.filter(w=>w.encoding.startsWith("waveform"))[0].final,encodingOrder:g.tests.map(w=>w.encoding).join(", ")}))),console.log("participants",l)},u=m=>{if(m.lenght===0)return[];const b=(g,v=5)=>{const w=Math.floor(g/v)*v;return`${w}-${w+v-1}`},_=[];for(const g of m)for(const[v,w]of g.tests.entries()){let x=w.encoding;(w.encoding==="audio"||w.encoding==="waveform")&&(x=`${w.encoding} + ${w.audioFile.startsWith("./Fluid")?"piano":"drums"}`),_.push({...g.demographics,partAge:g.demographics.partAge?g.demographics.partAge:b(g.prolificDemogr.Age),partSex:g.demographics.partGender?g.demographics.partGender:g.prolificDemogr.Sex,countryBirth:g.prolificDemogr["Country of birth"],countryResidence:g.prolificDemogr["Country of residence"],prolificApprovals:g.prolificDemogr["Total approvals"],...w,date:g.date,testType:x,testOrder:v})}return console.log("tests",_),_},c=(m,b)=>m.filter(_=>_.final<b),h=m=>m.length===0?[]:ln(m,_=>_.testType).map(([_,g])=>{const v=g.map(w=>w.final);return{encoding:_,testType:_,finals:v,finalMean:Gn(v),finalVar:Gi(v),trialCounts:g.map(w=>w.trialCount)}}),d=()=>{const m=JSON.stringify(l,void 0,2),b=new Blob([m],{type:"text/plain;charset=utf-8"});Za(b,"participants.json");const _=JSON.stringify(i,void 0,2),g=new Blob([_],{type:"text/plain;charset=utf-8"});Za(g,"tests.json")},p=m=>Math.abs(m);return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=u(l)),t.$$.dirty&2&&n(4,r=c(i,HM)),t.$$.dirty&2&&n(3,o=h(i)),t.$$.dirty&2&&n(2,a=ke(i.map(m=>Math.abs(m.final)))),t.$$.dirty&2&&console.log("tests by enc",ln(i,m=>m.testType))},[l,i,a,o,r,s,d,p]}class XM extends Ut{constructor(e){super(),Ot(this,e,GM,qM,Pt,{})}}function Xd(t,e,n){const i=t.slice();return i[8]=e[n],i}function jd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=S("option"),i=ot(n),e.__value=t[8],st(e,e.__value)},m(r,o){Z(r,e,o),y(e,i)},p:_t,d(r){r&&G(e)}}}function jM(t){let e,n,i,r,o,a,l,f,s=(t[1]*1e3).toFixed(1)+"",u,c,h,d,p,m,b,_,g,v,w,x,k,M,T,C,L,A,F,P,W,E,B,z,J,X,j,O,Y,Q,at,nt,V,q,N=zt(t[5]),$=[];for(let R=0;R<N.length;R+=1)$[R]=jd(Xd(t,N,R));return k=new ao({props:{pattern:t[3],audioFile:t[2]}}),T=new ao({props:{pattern:t[4],audioFile:t[2]}}),L=new Vn({props:{pattern:t[3],audioFile:t[2],width:On,height:Un}}),F=new Vn({props:{pattern:t[4],audioFile:t[2],width:On,height:Un}}),W=new ro({props:{pattern:t[3],width:On,height:Un}}),B=new ro({props:{pattern:t[4],width:On,height:Un}}),J=new oo({props:{pattern:t[3],width:On,height:Un}}),j=new oo({props:{pattern:t[4],width:On,height:Un}}),Y=new Hn({props:{pattern:t[3],width:On,height:Un}}),at=new Hn({props:{pattern:t[4],width:On,height:Un}}),{c(){e=S("main"),n=S("h2"),n.textContent="Examples",i=D(),r=S("div"),o=S("label"),a=ot(`deviation
      `),l=S("input"),f=ot(`
      (`),u=ot(s),c=ot(" milliseconds)"),h=D(),d=S("label"),p=ot(`instrument sample:
      `),m=S("select");for(let R=0;R<$.length;R+=1)$[R].c();b=D(),_=S("div"),g=S("h2"),g.textContent="early fourth note",v=D(),w=S("h2"),w.textContent="late fourth note",x=D(),ht(k.$$.fragment),M=D(),ht(T.$$.fragment),C=D(),ht(L.$$.fragment),A=D(),ht(F.$$.fragment),P=D(),ht(W.$$.fragment),E=D(),ht(B.$$.fragment),z=D(),ht(J.$$.fragment),X=D(),ht(j.$$.fragment),O=D(),ht(Y.$$.fragment),Q=D(),ht(at.$$.fragment),I(l,"type","range"),I(l,"min","0"),I(l,"max","20"),I(l,"step","1"),I(o,"class","svelte-1kjj0oz"),t[2]===void 0&&hn(()=>t[7].call(m)),I(d,"class","svelte-1kjj0oz"),I(_,"class","stimuli svelte-1kjj0oz")},m(R,tt){Z(R,e,tt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),st(l,t[0]),y(o,f),y(o,u),y(o,c),y(r,h),y(r,d),y(d,p),y(d,m);for(let U=0;U<$.length;U+=1)$[U]&&$[U].m(m,null);_e(m,t[2],!0),y(e,b),y(e,_),y(_,g),y(_,v),y(_,w),y(_,x),ut(k,_,null),y(_,M),ut(T,_,null),y(_,C),ut(L,_,null),y(_,A),ut(F,_,null),y(_,P),ut(W,_,null),y(_,E),ut(B,_,null),y(_,z),ut(J,_,null),y(_,X),ut(j,_,null),y(_,O),ut(Y,_,null),y(_,Q),ut(at,_,null),nt=!0,V||(q=[gt(l,"change",t[6]),gt(l,"input",t[6]),gt(m,"change",t[7])],V=!0)},p(R,[tt]){if(tt&1&&st(l,R[0]),(!nt||tt&2)&&s!==(s=(R[1]*1e3).toFixed(1)+"")&&Lt(u,s),tt&32){N=zt(R[5]);let ee;for(ee=0;ee<N.length;ee+=1){const Fe=Xd(R,N,ee);$[ee]?$[ee].p(Fe,tt):($[ee]=jd(Fe),$[ee].c(),$[ee].m(m,null))}for(;ee<$.length;ee+=1)$[ee].d(1);$.length=N.length}tt&36&&_e(m,R[2]);const U={};tt&8&&(U.pattern=R[3]),tt&4&&(U.audioFile=R[2]),k.$set(U);const mt={};tt&16&&(mt.pattern=R[4]),tt&4&&(mt.audioFile=R[2]),T.$set(mt);const rt={};tt&8&&(rt.pattern=R[3]),tt&4&&(rt.audioFile=R[2]),L.$set(rt);const pt={};tt&16&&(pt.pattern=R[4]),tt&4&&(pt.audioFile=R[2]),F.$set(pt);const ft={};tt&8&&(ft.pattern=R[3]),W.$set(ft);const dt={};tt&16&&(dt.pattern=R[4]),B.$set(dt);const Tt={};tt&8&&(Tt.pattern=R[3]),J.$set(Tt);const yt={};tt&16&&(yt.pattern=R[4]),j.$set(yt);const he={};tt&8&&(he.pattern=R[3]),Y.$set(he);const $t={};tt&16&&($t.pattern=R[4]),at.$set($t)},i(R){nt||(H(k.$$.fragment,R),H(T.$$.fragment,R),H(L.$$.fragment,R),H(F.$$.fragment,R),H(W.$$.fragment,R),H(B.$$.fragment,R),H(J.$$.fragment,R),H(j.$$.fragment,R),H(Y.$$.fragment,R),H(at.$$.fragment,R),nt=!0)},o(R){K(k.$$.fragment,R),K(T.$$.fragment,R),K(L.$$.fragment,R),K(F.$$.fragment,R),K(W.$$.fragment,R),K(B.$$.fragment,R),K(J.$$.fragment,R),K(j.$$.fragment,R),K(Y.$$.fragment,R),K(at.$$.fragment,R),nt=!1},d(R){R&&G(e),Ge($,R),ct(k),ct(T),ct(L),ct(F),ct(W),ct(B),ct(J),ct(j),ct(Y),ct(at),V=!1,$e(q)}}}let On=600,Un=100,Pf=.5,Zd=6,Kd=3,Jd=!0,Qd=0;function ZM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,l=[],f=[];function s(){a=xe(this.value),n(0,a)}function u(){o=pi(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*Pf),t.$$.dirty&2&&n(3,l=Vi(Zd,Pf,Kd,-i,Jd,Qd)),t.$$.dirty&2&&n(4,f=Vi(Zd,Pf,Kd,i,Jd,Qd))},[a,i,o,l,f,r,s,u]}class KM extends Ut{constructor(e){super(),Ot(this,e,ZM,jM,Pt,{})}}function JM(t){let e,n,i,r,o,a;return{c(){e=S("main"),n=S("audio"),i=D(),r=S("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){Z(l,e,f),y(e,n),t[5](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&G(e),t[5](null),o=!1,a()}}}function QM(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,{currentTrialNumber:o=-1}=e,a=null,l;const f=()=>{r&&l&&(a=Ka(r,i),Ps(a,r.sampleRate,l))};mi(f);const s=()=>{l&&(n(0,l.currentTime=0,l),l.play())};mi(()=>{document.querySelector("html").addEventListener("keyup",c=>{c.key==="p"&&s()})});function u(c){re[c?"unshift":"push"](()=>{l=c,n(0,l)})}return t.$$set=c=>{"pattern"in c&&n(2,i=c.pattern),"cachedAudio"in c&&n(3,r=c.cachedAudio),"currentTrialNumber"in c&&n(4,o=c.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&16&&o>-1&&(f(),window.setTimeout(s,200))},[l,s,i,r,o,u]}class tS extends Ut{constructor(e){super(),Ot(this,e,QM,JM,Pt,{pattern:2,cachedAudio:3,currentTrialNumber:4})}}function da(t,e){return new URLSearchParams(t.location.search).get(e)}function eS(t){let e,n,i,r,o,a;return{c(){e=S("main"),n=S("audio"),i=D(),r=S("button"),r.textContent="play audio",n.controls=!1},m(l,f){Z(l,e,f),y(e,n),t[4](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&G(e),t[4](null),o=!1,a()}}}function nS(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,o=null,a;const l=(u,c)=>{c&&a&&(o=Ka(c,u),Ps(o,c.sampleRate,a))};mi(()=>l(i,r));const f=async()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(u){re[u?"unshift":"push"](()=>{a=u,n(0,a)})}return t.$$set=u=>{"pattern"in u&&n(2,i=u.pattern),"cachedAudio"in u&&n(3,r=u.cachedAudio)},[a,f,i,r,s]}class Is extends Ut{constructor(e){super(),Ot(this,e,nS,eS,Pt,{pattern:2,cachedAudio:3})}}function t0(t){let e;return{c(){e=S("div"),e.innerHTML=`<p>In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p>For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p>By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p>If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,i){Z(n,e,i)},d(n){n&&G(e)}}}function e0(t){let e,n,i,r,o,a,l,f,s;return r=new Is({props:{pattern:[.1,.6,1.1],cachedAudio:t[2]}}),{c(){e=S("div"),n=S("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,i=D(),ht(r.$$.fragment),o=D(),a=S("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=D(),f=S("a"),f.innerHTML="<button>I cannot hear the audio and will not participate in this study</button>",I(f,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(u,c){Z(u,e,c),y(e,n),y(e,i),ut(r,e,null),y(e,o),y(e,a),y(e,l),y(e,f),s=!0},p(u,c){const h={};c[0]&4&&(h.cachedAudio=u[2]),r.$set(h)},i(u){s||(H(r.$$.fragment,u),s=!0)},o(u){K(r.$$.fragment,u),s=!1},d(u){u&&G(e),ct(r)}}}function n0(t){let e,n,i,r,o,a,l,f,s,u,c,h,d,p,m,b,_,g;return{c(){e=S("div"),n=S("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",i=D(),r=S("p"),o=S("button"),o.textContent="+",a=D(),l=S("button"),l.textContent="-",f=D(),s=Of("svg"),u=Of("rect"),m=D(),b=S("p"),b.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,I(u,"width",c=t[0]*.52),I(u,"height",h=t[17]*2),I(u,"fill","#ccc"),I(u,"rx","8"),I(s,"width",d=t[0]*.52+"px"),I(s,"height",p=t[17]*2+"px")},m(v,w){Z(v,e,w),y(e,n),y(e,i),y(e,r),y(r,o),y(r,a),y(r,l),y(e,f),y(e,s),y(s,u),y(e,m),y(e,b),_||(g=[gt(o,"click",t[21]),gt(l,"click",t[22])],_=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&I(u,"width",c),w[0]&131072&&h!==(h=v[17]*2)&&I(u,"height",h),w[0]&1&&d!==(d=v[0]*.52+"px")&&I(s,"width",d),w[0]&131072&&p!==(p=v[17]*2+"px")&&I(s,"height",p)},d(v){v&&G(e),_=!1,$e(g)}}}function i0(t){let e,n,i,r,o,a,l,f,s,u,c,h,d,p,m,b,_,g,v,w,x,k,M,T,C,L,A;return{c(){e=S("div"),n=S("label"),i=S("span"),i.textContent="Highest finished education (select the best fitting one):",r=D(),o=S("select"),a=S("option"),a.textContent="none",l=S("option"),l.textContent="high school",f=S("option"),f.textContent="bachelor",s=S("option"),s.textContent="master",u=S("option"),u.textContent="phd",c=D(),h=S("label"),d=S("span"),d.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,p=D(),m=S("input"),b=D(),_=S("label"),g=S("span"),g.textContent="For how many years do you roughly play it/them?",v=D(),w=S("input"),x=D(),k=S("label"),M=S("span"),M.textContent=`How many years of experience do you have with information
          visualization?`,T=D(),C=S("input"),a.__value="none",st(a,a.__value),l.__value="highs",st(l,l.__value),f.__value="bachelor",st(f,f.__value),s.__value="master",st(s,s.__value),u.__value="phd",st(u,u.__value),t[6]===void 0&&hn(()=>t[23].call(o)),I(n,"class","svelte-1u8tzxr"),I(m,"type","text"),I(m,"placeholder","free text"),I(h,"class","svelte-1u8tzxr"),I(w,"type","number"),I(w,"min","0"),I(w,"step","1"),I(_,"class","svelte-1u8tzxr"),I(C,"type","number"),I(C,"min","0"),I(C,"step","1"),I(k,"class","svelte-1u8tzxr"),I(e,"class","demo-form svelte-1u8tzxr")},m(F,P){Z(F,e,P),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,l),y(o,f),y(o,s),y(o,u),_e(o,t[6],!0),y(e,c),y(e,h),y(h,d),y(h,p),y(h,m),st(m,t[7]),y(e,b),y(e,_),y(_,g),y(_,v),y(_,w),st(w,t[8]),y(e,x),y(e,k),y(k,M),y(k,T),y(k,C),st(C,t[9]),L||(A=[gt(o,"change",t[23]),gt(m,"input",t[24]),gt(w,"input",t[25]),gt(C,"input",t[26])],L=!0)},p(F,P){P[0]&64&&_e(o,F[6]),P[0]&128&&m.value!==F[7]&&st(m,F[7]),P[0]&256&&xe(w.value)!==F[8]&&st(w,F[8]),P[0]&512&&xe(C.value)!==F[9]&&st(C,F[9])},d(F){F&&G(e),L=!1,$e(A)}}}function r0(t){let e,n,i,r,o=t[12]&&o0(t);return{c(){e=S("p"),e.innerHTML=`You will be presented with a sequence of six drum notes which should have
      equal distances in time. The <b>fourth note</b> is
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller and more difficult for you. You always have to
      answer &quot;early&quot; or &quot;late&quot;.`,n=D(),o&&o.c(),i=Jn()},m(a,l){Z(a,e,l),Z(a,n,l),o&&o.m(a,l),Z(a,i,l),r=!0},p(a,l){a[12]?o?(o.p(a,l),l[0]&4096&&H(o,1)):(o=o0(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Ht(),K(o,1,1,()=>{o=null}),Vt())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(G(e),G(n),G(i)),o&&o.d(a)}}}function o0(t){let e,n,i=t[5]+1+"",r,o,a=t[3].length+"",l,f,s=t[11]+1+"",u,c,h,d,p,m,b;const _=[rS,iS],g=[];function v(w,x){return w[15]==="audio"?0:w[14]===!1?1:-1}return~(h=v(t))&&(d=g[h]=_[h](t)),{c(){e=S("p"),n=ot("Test number "),r=ot(i),o=ot(" / "),l=ot(a),f=ot(", trial number "),u=ot(s),c=D(),d&&d.c(),p=D(),m=S("p"),m.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`},m(w,x){Z(w,e,x),y(e,n),y(e,r),y(e,o),y(e,l),y(e,f),y(e,u),Z(w,c,x),~h&&g[h].m(w,x),Z(w,p,x),Z(w,m,x),b=!0},p(w,x){(!b||x[0]&32)&&i!==(i=w[5]+1+"")&&Lt(r,i),(!b||x[0]&8)&&a!==(a=w[3].length+"")&&Lt(l,a),(!b||x[0]&2048)&&s!==(s=w[11]+1+"")&&Lt(u,s);let k=h;h=v(w),h===k?~h&&g[h].p(w,x):(d&&(Ht(),K(g[k],1,1,()=>{g[k]=null}),Vt()),~h?(d=g[h],d?d.p(w,x):(d=g[h]=_[h](w),d.c()),H(d,1),d.m(p.parentNode,p)):d=null)},i(w){b||(H(d),b=!0)},o(w){K(d),b=!1},d(w){w&&(G(e),G(c),G(p),G(m)),~h&&g[h].d(w)}}}function iS(t){let e,n,i,r;const o=[aS,oS],a=[];function l(f,s){return f[15]==="waveform"?0:f[15]==="color"?1:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Jn()},m(f,s){~e&&a[e].m(f,s),Z(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Ht(),K(a[u],1,1,()=>{a[u]=null}),Vt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&G(i),~e&&a[e].d(f)}}}function rS(t){let e,n,i,r,o,a,l,f,s,u,c,h,d;return r=new Is({props:{pattern:t[18],cachedAudio:t[2]}}),a=new Is({props:{pattern:t[19],cachedAudio:t[2]}}),h=new tS({props:{pattern:[...t[16].slice(0,t[16].length-1),t[16].at(-1)+Math.random()*1e-4],cachedAudio:t[2],currentTrialNumber:t[11]}}),{c(){e=S("div"),e.innerHTML=`Listen to the audio, the forth note comes either too soon or too late.
          Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=D(),i=S("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=S("div"),f.textContent="Example for early",s=D(),u=S("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(p,m){Z(p,e,m),Z(p,n,m),Z(p,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),Z(p,c,m),ut(h,p,m),d=!0},p(p,m){const b={};m[0]&4&&(b.cachedAudio=p[2]),r.$set(b);const _={};m[0]&4&&(_.cachedAudio=p[2]),a.$set(_);const g={};m[0]&65536&&(g.pattern=[...p[16].slice(0,p[16].length-1),p[16].at(-1)+Math.random()*1e-4]),m[0]&4&&(g.cachedAudio=p[2]),m[0]&2048&&(g.currentTrialNumber=p[11]),h.$set(g)},i(p){d||(H(r.$$.fragment,p),H(a.$$.fragment,p),H(h.$$.fragment,p),d=!0)},o(p){K(r.$$.fragment,p),K(a.$$.fragment,p),K(h.$$.fragment,p),d=!1},d(p){p&&(G(e),G(n),G(i),G(c)),ct(r),ct(a),ct(h,p)}}}function oS(t){let e,n,i,r,o,a,l,f,s,u,c,h,d;return r=new Hn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Hn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Hn({props:{pattern:t[16],width:t[0],height:t[17]}}),{c(){e=S("div"),e.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=D(),i=S("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=S("div"),f.textContent="Example for early",s=D(),u=S("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(p,m){Z(p,e,m),Z(p,n,m),Z(p,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),Z(p,c,m),ut(h,p,m),d=!0},p(p,m){const b={};m[0]&1&&(b.width=p[0]/2),m[0]&131072&&(b.height=p[17]/2),r.$set(b);const _={};m[0]&1&&(_.width=p[0]/2),m[0]&131072&&(_.height=p[17]/2),a.$set(_);const g={};m[0]&65536&&(g.pattern=p[16]),m[0]&1&&(g.width=p[0]),m[0]&131072&&(g.height=p[17]),h.$set(g)},i(p){d||(H(r.$$.fragment,p),H(a.$$.fragment,p),H(h.$$.fragment,p),d=!0)},o(p){K(r.$$.fragment,p),K(a.$$.fragment,p),K(h.$$.fragment,p),d=!1},d(p){p&&(G(e),G(n),G(i),G(c)),ct(r),ct(a),ct(h,p)}}}function aS(t){let e,n,i,r,o,a,l,f,s,u,c,h,d;return r=new Vn({props:{pattern:t[18],audioFile:t[1],cachedAudio:t[2],width:t[0]/2,height:t[17]/2}}),a=new Vn({props:{pattern:t[19],audioFile:t[1],cachedAudio:t[2],width:t[0]/2,height:t[17]/2}}),h=new Vn({props:{pattern:t[16],audioFile:t[1],cachedAudio:t[2],width:t[0],height:t[17]}}),{c(){e=S("div"),e.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the gaps between peaks.`,n=D(),i=S("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=S("div"),f.textContent="Example for early",s=D(),u=S("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(p,m){Z(p,e,m),Z(p,n,m),Z(p,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),Z(p,c,m),ut(h,p,m),d=!0},p(p,m){const b={};m[0]&2&&(b.audioFile=p[1]),m[0]&4&&(b.cachedAudio=p[2]),m[0]&1&&(b.width=p[0]/2),m[0]&131072&&(b.height=p[17]/2),r.$set(b);const _={};m[0]&2&&(_.audioFile=p[1]),m[0]&4&&(_.cachedAudio=p[2]),m[0]&1&&(_.width=p[0]/2),m[0]&131072&&(_.height=p[17]/2),a.$set(_);const g={};m[0]&65536&&(g.pattern=p[16]),m[0]&2&&(g.audioFile=p[1]),m[0]&4&&(g.cachedAudio=p[2]),m[0]&1&&(g.width=p[0]),m[0]&131072&&(g.height=p[17]),h.$set(g)},i(p){d||(H(r.$$.fragment,p),H(a.$$.fragment,p),H(h.$$.fragment,p),d=!0)},o(p){K(r.$$.fragment,p),K(a.$$.fragment,p),K(h.$$.fragment,p),d=!1},d(p){p&&(G(e),G(n),G(i),G(c)),ct(r),ct(a),ct(h,p)}}}function a0(t){let e,n,i,r,o,a;return{c(){e=S("div"),n=S("label"),i=ot(`Do you have any final feedback/comments?
        `),r=S("textarea")},m(l,f){Z(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[10]),o||(a=gt(r,"input",t[27]),o=!0)},p(l,f){f[0]&1024&&st(r,l[10])},d(l){l&&G(e),o=!1,a()}}}function l0(t){let e,n,i;return{c(){e=S("div"),e.textContent="Thanks for participating!",n=D(),i=S("a"),i.textContent="click here to get your compensation",I(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){Z(r,e,o),Z(r,n,o),Z(r,i,o)},d(r){r&&(G(e),G(n),G(i))}}}function f0(t){let e,n,i;return{c(){e=S("button"),e.textContent="next step",I(e,"class","next-btn svelte-1u8tzxr")},m(r,o){Z(r,e,o),n||(i=gt(e,"click",t[20]),n=!0)},p:_t,d(r){r&&G(e),n=!1,i()}}}function lS(t){let e,n,i,r,o,a,l,f,s,u=t[4]==="consent"&&t0(),c=t[4]==="start1"&&e0(t),h=t[4]==="start2"&&n0(t),d=t[4]==="demo"&&i0(t),p=t[4]==="tests"&&r0(t),m=t[4]==="feedback"&&a0(t),b=t[4]==="done"&&l0(),_=!t[13]&&t[4]!=="done"&&f0(t);return{c(){e=S("main"),u&&u.c(),n=D(),c&&c.c(),i=D(),h&&h.c(),r=D(),d&&d.c(),o=D(),p&&p.c(),a=D(),m&&m.c(),l=D(),b&&b.c(),f=D(),_&&_.c(),I(e,"class","svelte-1u8tzxr")},m(g,v){Z(g,e,v),u&&u.m(e,null),y(e,n),c&&c.m(e,null),y(e,i),h&&h.m(e,null),y(e,r),d&&d.m(e,null),y(e,o),p&&p.m(e,null),y(e,a),m&&m.m(e,null),y(e,l),b&&b.m(e,null),y(e,f),_&&_.m(e,null),s=!0},p(g,v){g[4]==="consent"?u||(u=t0(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),g[4]==="start1"?c?(c.p(g,v),v[0]&16&&H(c,1)):(c=e0(g),c.c(),H(c,1),c.m(e,i)):c&&(Ht(),K(c,1,1,()=>{c=null}),Vt()),g[4]==="start2"?h?h.p(g,v):(h=n0(g),h.c(),h.m(e,r)):h&&(h.d(1),h=null),g[4]==="demo"?d?d.p(g,v):(d=i0(g),d.c(),d.m(e,o)):d&&(d.d(1),d=null),g[4]==="tests"?p?(p.p(g,v),v[0]&16&&H(p,1)):(p=r0(g),p.c(),H(p,1),p.m(e,a)):p&&(Ht(),K(p,1,1,()=>{p=null}),Vt()),g[4]==="feedback"?m?m.p(g,v):(m=a0(g),m.c(),m.m(e,l)):m&&(m.d(1),m=null),g[4]==="done"?b||(b=l0(),b.c(),b.m(e,f)):b&&(b.d(1),b=null),!g[13]&&g[4]!=="done"?_?_.p(g,v):(_=f0(g),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i(g){s||(H(c),H(p),s=!0)},o(g){K(c),K(p),s=!1},d(g){g&&G(e),u&&u.d(),c&&c.d(),h&&h.d(),d&&d.d(),p&&p.d(),m&&m.d(),b&&b.d(),_&&_.d()}}}const fS="/store";let sS=.5;const s0=.1;let uS=6,cS=!0,hS=0;function dS(t,e,n){let i,r=da(window,"PROLIFIC_PID"),o=da(window,"STUDY_ID"),a=da(window,"SESSION_ID"),f=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3","./snare2.mp3"][2],s;Rs(f).then(Tt=>{n(2,s=Tt),console.log("Audio fetched",Tt)});let u=[{stimulus:"color"},{stimulus:"audio",audioFile:f},{stimulus:"waveform",audioFile:f}];const c=[0,.5,1,1.4,1.9,2.4],h=[0,.5,1,1.6,2.1,2.6];let d="consent",p=0,m,b="",_="",g=0,v=0,w="",x=0,k,M={},T=[],C,L,A=!1,F=!1,P=!1,W="tick",E=3,B=600,z=[],J=[],X=0;const j=[];mi(()=>{document.querySelector("html").addEventListener("keyup",N)});const O=()=>{L=new It({ratio:{firstVal:s0,operation:"multiply",down:2,up:1,stepSizeDown:1.25,stepSizeUp:1.25,limits:[0,s0],direction:-1,reversalLimit:6,verbosity:1}}),L.init()};function Y(){d==="consent"?n(4,d="start1"):d==="start1"?n(4,d="start2"):d==="start2"?(n(3,u=Os(u)),n(4,d="demo")):d==="demo"?b==""||_==""?alert("please fill the form first"):(n(4,d="tests"),n(5,p=0)):d==="tests"?p<u.length?(n(15,W=u[p].stimulus),n(1,f=u[p].audioFile),Q()):n(4,d="feedback"):d==="feedback"&&(R(),n(4,d="done"))}function Q(){O(),n(11,x=0),k=0,C=0,n(12,A=!0),J=[],T=[],m=new Date,at()}function at(){console.log("Starting trial "+x),M={},n(13,F=!0),nt()}function nt(){let yt=L.getLast("ratio");yt=Math.random()<.5?yt:-yt,M.deviation=yt,M.startTime=new Date,console.log({deviation:yt}),n(16,z=Vi(uS,sS,E,yt,cS,hS)),n(14,P=!0),window.setTimeout(()=>{n(14,P=!1)},1e3)}function V(Tt){if(!F)return;n(13,F=!1),M.decisionChoice=Tt,M.errorCode=0,M.timeTaken=(new Date-M.startTime)/1e3;const yt=C;(M.decisionChoice==0&&M.deviation<0||M.decisionChoice==1&&M.deviation>0)&&M.errorCode==0&&C++,M.errorCode==0&&(L.next(yt!=C),T[T.length]=M),M.errorCode==0&&k++,n(11,x++,x),L.reversalLimitReached("ratio")?q():at()}function q(){n(12,A=!1),n(13,F=!1),$(),J=[],X=L.getFinalVal("ratio");for(let yt=0;yt<T.length;yt++)J[yt]=T[yt].deviation;console.log(J);const Tt=new Date;j.push({encoding:W,audioFile:f,final:X,data:J,score:C,testNumber:p,trialCount:x+1,trials:T,validTrialCount:k+1,testTimeSeconds:(Tt-m)/1e3}),n(5,p++,p)}function N(Tt){if(!P)switch(Tt.key){case"ArrowLeft":F&&V(0);break;case"ArrowRight":F&&V(1);break;case"PageDown":!F&&d!=="done"&&Y()}}function $(){`${C}`,x+1,`${(C/(x+1)*100).toFixed(1)}${L.getFinalVal("ratio")}`}function R(){const Tt={studyStep:d,demographics:{partID:r,studyID:o,sessionID:a,partEduation:b,partMusicInstr:_,partMusicInstrYears:g,partVisExperienceYears:v,partFeedback:w,visWidth:B},date:new Date().toISOString(),tests:j};console.log("saving data",Tt);const yt=JSON.stringify(Tt,void 0,2);fetch(fS,{method:"POST",headers:{"Content-Type":"application/json"},body:yt}).then(he=>{console.log("Data saved:",he)})}const tt=()=>n(0,B*=1.05),U=()=>n(0,B*=.95);function mt(){b=pi(this),n(6,b)}function rt(){_=this.value,n(7,_)}function pt(){g=xe(this.value),n(8,g)}function ft(){v=xe(this.value),n(9,v)}function dt(){w=this.value,n(10,w)}return t.$$.update=()=>{t.$$.dirty[0]&1&&n(17,i=B/6)},[B,f,s,u,d,p,b,_,g,v,w,x,A,F,P,W,z,i,c,h,Y,tt,U,mt,rt,pt,ft,dt]}class pS extends Ut{constructor(e){super(),Ot(this,e,dS,lS,Pt,{},null,[-1,-1])}}function u0(t){let e,n,i,r,o,a,l,f,s,u,c,h,d,p,m,b,_,g;return{c(){e=S("div"),n=S("button"),n.textContent="Playground",i=D(),r=S("button"),r.textContent="Examples",o=D(),a=S("button"),a.textContent="Study",l=D(),f=S("button"),f.textContent="Analysis",s=D(),u=S("button"),u.textContent="Study (variance)",c=D(),h=S("button"),h.textContent="Analysis (variance)",d=D(),p=S("button"),p.textContent="Study (Prolific)",m=D(),b=S("button"),b.textContent="Analysis (Prolific)"},m(v,w){Z(v,e,w),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(e,s),y(e,u),y(e,c),y(e,h),y(e,d),y(e,p),y(e,m),y(e,b),_||(g=[gt(n,"click",t[1]),gt(r,"click",t[2]),gt(a,"click",t[3]),gt(f,"click",t[4]),gt(u,"click",t[5]),gt(h,"click",t[6]),gt(p,"click",t[7]),gt(b,"click",t[8])],_=!0)},p:_t,d(v){v&&G(e),_=!1,$e(g)}}}function mS(t){let e,n;return e=new XM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function gS(t){let e,n;return e=new pS({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function bS(t){let e,n;return e=new SM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function _S(t){let e,n;return e=new fM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function yS(t){let e,n;return e=new bM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function wS(t){let e,n;return e=new Zk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function vS(t){let e,n;return e=new KM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function xS(t){let e,n;return e=new Pk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function kS(t){let e,n,i,r,o,a,l,f=t[0]!=="study_prolific"&&u0(t);const s=[xS,vS,wS,yS,_S,bS,gS,mS],u=[];function c(h,d){return h[0]==="playground"?0:h[0]==="examples"?1:h[0]==="study"?2:h[0]==="analysis"?3:h[0]==="study_variance"?4:h[0]==="analysis_variance"?5:h[0]==="study_prolific"?6:h[0]==="analysis_prolific"?7:-1}return~(o=c(t))&&(a=u[o]=s[o](t)),{c(){e=S("main"),n=S("h1"),n.textContent="Rhythm Error Sensitivity Study",i=D(),f&&f.c(),r=D(),a&&a.c()},m(h,d){Z(h,e,d),y(e,n),y(e,i),f&&f.m(e,null),y(e,r),~o&&u[o].m(e,null),l=!0},p(h,[d]){h[0]!=="study_prolific"?f?f.p(h,d):(f=u0(h),f.c(),f.m(e,r)):f&&(f.d(1),f=null);let p=o;o=c(h),o!==p&&(a&&(Ht(),K(u[p],1,1,()=>{u[p]=null}),Vt()),~o?(a=u[o],a||(a=u[o]=s[o](h),a.c()),H(a,1),a.m(e,null)):a=null)},i(h){l||(H(a),l=!0)},o(h){K(a),l=!1},d(h){h&&G(e),f&&f.d(),~o&&u[o].d()}}}function MS(t,e,n){let i=da(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific"),()=>n(0,i="analysis_prolific")]}class SS extends Ut{constructor(e){super(),Ot(this,e,MS,kS,Pt,{})}}new SS({target:document.getElementById("app")});export{m0 as g};

var tb=Object.defineProperty;var eb=(t,e,n)=>e in t?tb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var An=(t,e,n)=>(eb(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function wt(){}function Qd(t){return t()}function Bu(){return Object.create(null)}function ke(t){t.forEach(Qd)}function Jd(t){return typeof t=="function"}function Lt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function nb(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function yn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function $f(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function at(t){return document.createTextNode(t)}function D(){return at(" ")}function Vn(){return at("")}function gt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function I(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function be(t){return t===""?null:+t}function ib(t){return Array.from(t.childNodes)}function Ft(t,e){e=""+e,t.data!==e&&(t.data=e)}function ft(t,e){t.value=e??""}function me(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function de(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ui(t){const e=t.querySelector(":checked");return e&&e.__value}class rb{constructor(e=!1){An(this,"is_svg",!1);An(this,"e");An(this,"n");An(this,"t");An(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=$f(n.nodeName):this.e=M(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)G(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(V)}}let Pr;function Nr(t){Pr=t}function t0(){if(!Pr)throw new Error("Function called outside component initialization");return Pr}function ci(t){t0().$$.on_mount.push(t)}function Ye(t){t0().$$.after_update.push(t)}const Li=[],oe=[];let Oi=[];const qu=[],ob=Promise.resolve();let Af=!1;function ab(){Af||(Af=!0,ob.then(e0))}function rn(t){Oi.push(t)}const Ol=new Set;let $i=0;function e0(){if($i!==0)return;const t=Pr;do{try{for(;$i<Li.length;){const e=Li[$i];$i++,Nr(e),lb(e.$$)}}catch(e){throw Li.length=0,$i=0,e}for(Nr(null),Li.length=0,$i=0;oe.length;)oe.pop()();for(let e=0;e<Oi.length;e+=1){const n=Oi[e];Ol.has(n)||(Ol.add(n),n())}Oi.length=0}while(Li.length);for(;qu.length;)qu.pop()();Af=!1,Ol.clear(),Nr(t)}function lb(t){if(t.fragment!==null){t.update(),ke(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rn)}}function fb(t){const e=[],n=[];Oi.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Oi=e}const Ko=new Set;let ni;function Qt(){ni={r:0,c:[],p:ni}}function Jt(){ni.r||ke(ni.c),ni=ni.p}function H(t,e){t&&t.i&&(Ko.delete(t),t.i(e))}function K(t,e,n,i){if(t&&t.o){if(Ko.has(t))return;Ko.add(t),ni.c.push(()=>{Ko.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function jt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ht(t){t&&t.c()}function ut(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),rn(()=>{const o=t.$$.on_mount.map(Qd).filter(Jd);t.$$.on_destroy?t.$$.on_destroy.push(...o):ke(o),t.$$.on_mount=[]}),r.forEach(rn)}function ct(t,e){const n=t.$$;n.fragment!==null&&(fb(n.after_update),ke(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function sb(t,e){t.$$.dirty[0]===-1&&(Li.push(t),ab(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function It(t,e,n,i,r,o,a=null,l=[-1]){const f=Pr;Nr(t);const s=t.$$={fragment:null,ctx:[],props:o,update:wt,not_equal:r,bound:Bu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Bu(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(c,h,...p)=>{const d=p.length?p[0]:h;return s.ctx&&r(s.ctx[c],s.ctx[c]=d)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](d),u&&sb(t,c)),h}):[],s.update(),u=!0,ke(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const c=ib(e.target);s.fragment&&s.fragment.l(c),c.forEach(V)}else s.fragment&&s.fragment.c();e.intro&&H(t.$$.fragment),ut(t,e.target,e.anchor),e0()}Nr(f)}class Rt{constructor(){An(this,"$$");An(this,"$$set")}$destroy(){ct(this,1),this.$destroy=wt}$on(e,n){if(!Jd(n))return wt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!nb(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ub="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ub);const cb="modulepreload",hb=function(t){return"/rhythm-vis/"+t},Wu={},Ai=function(e,n,i){if(!n||n.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=hb(o),o in Wu)return;Wu[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let u=r.length-1;u>=0;u--){const c=r[u];if(c.href===o&&(!a||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const s=document.createElement("link");if(s.rel=a?"stylesheet":cb,a||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),a)return new Promise((u,c)=>{s.addEventListener("load",u),s.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function db(t){if(t){if(t=new Uint8Array(t.buffer||t),mb(t))return"wav";if(pb(t))return"mp3";if(bb(t))return"flac";if(_b(t))return"m4a";if(yb(t))return"opus";if(gb(t))return"oga";if(wb(t))return"qoa"}}function pb(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function mb(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function gb(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function bb(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function _b(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function yb(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function wb(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let vb=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const xb=globalThis.AudioBuffer||vb;async function kb(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=db(t);if(!e)throw Error("Cannot detect audio format");if(!Fn[e])throw Error("Missing decoder for "+e+" format");return Fn[e](t)}const Fn={async oga(t){let{OggVorbisDecoder:e}=await Ai(()=>import("./index-b4f3ee98.js"),["assets/index-b4f3ee98.js","assets/utilities-97385585.js","assets/index-0047a0ad.js"]);const n=new e;return await n.ready,(Fn.oga=async i=>i&&Ei(await n.decodeFile(i)))(t)},async mp3(t){const{MPEGDecoder:e}=await Ai(()=>import("./index-e54ba360.js"),["assets/index-e54ba360.js","assets/utilities-97385585.js"]),n=new e;return await n.ready,(Fn.mp3=i=>i&&Ei(n.decode(i)))(t)},async flac(t){const{FLACDecoder:e}=await Ai(()=>import("./index-4371bf45.js"),["assets/index-4371bf45.js","assets/utilities-97385585.js","assets/index-0047a0ad.js"]),n=new e;return await n.ready,(Fn.mp3=async i=>i&&Ei(await n.decode(i)))(t)},async opus(t){const{OggOpusDecoder:e}=await Ai(()=>import("./index-08d389cc.js"),["assets/index-08d389cc.js","assets/utilities-97385585.js","assets/index-0047a0ad.js"]),n=new e;return await n.ready,(Fn.opus=async i=>i&&Ei(await n.decodeFile(i)))(t)},async wav(t){let e=await Ai(()=>import("./index-ded90100.js").then(i=>i.i),[]),{decode:n}=e.default;return(Fn.wav=i=>i&&Ei(n(i)))(t)},async qoa(t){let{decode:e}=await Ai(()=>import("./index-334570fa.js"),[]);return(Fn.qoa=n=>n&&Ei(e(n)))(t)}};function Ei({channelData:t,sampleRate:e}){let n=new xb({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mb=Sb;function Sb(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=Cb(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Tb(a,r,i,n,o)}function Tb(t,e,n,i,r){var o=r/8,a=i*o,l=new ArrayBuffer(44+t.length*o),f=new DataView(l);return $o(f,0,"RIFF"),f.setUint32(4,36+t.length*o,!0),$o(f,8,"WAVE"),$o(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,e,!0),f.setUint16(22,i,!0),f.setUint32(24,n,!0),f.setUint32(28,n*a,!0),f.setUint16(32,a,!0),f.setUint16(34,r,!0),$o(f,36,"data"),f.setUint32(40,t.length*o,!0),e===1?Ab(f,44,t):$b(f,44,t),l}function Cb(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function $b(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function Ab(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function $o(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const Eb=n0(Mb);function Wi(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let l=0;l<t;++l){let f;r?f=l>=n?i:0:f=l===n?i:0,a.push(l*e+o+f)}return a}async function Ss(t){const n=await(await fetch(t)).arrayBuffer();return await kb(n)}function Ba(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const l=Math.round(a*t.sampleRate);let f=1;for(let s=0;s<r.length;++s)f=Math.max(0,f-2/40100),o[l+s]=r[s]*f}return o}function Ts(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([Eb(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function Cs(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function ge(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function no(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qa(t){let e,n,i;t.length!==2?(e=ge,n=(l,f)=>ge(t(l),f),i=(l,f)=>t(l)-f):(e=t===ge||t===no?t:Nb,n=t,i=t);function r(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<0?s=c+1:u=c}while(s<u)}return s}function o(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<=0?s=c+1:u=c}while(s<u)}return s}function a(l,f,s=0,u=l.length){const c=r(l,f,s,u-1);return c>s&&i(l[c-1],f)>-i(l[c],f)?c-1:c}return{left:r,center:a,right:o}}function Nb(){return 0}function i0(t){return t===null?NaN:+t}function*Db(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const Fb=qa(ge),Lb=Fb.right;qa(i0).center;const Wa=Lb;function $s(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function Ib(t){return t.length|0}function Rb(t){return!(t>0)}function Pb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Ob(t){return e=>t(...e)}function Ub(...t){const e=typeof t[t.length-1]=="function"&&Ob(t.pop());t=t.map(Pb);const n=t.map(Ib),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(Rb))return o;for(;;){o.push(r.map((l,f)=>t[f][l]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function zb(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function r0(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,o+=i*(l-r))}if(n>1)return o/(n-1)}function o0(t,e){const n=r0(t,e);return n&&Math.sqrt(n)}function Ce(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class hi{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,l=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);l&&(n[i++]=l),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}let di=class extends Map{constructor(e,n=f0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Ef(this,e))}has(e){return super.has(Ef(this,e))}set(e,n){return super.set(a0(this,e),n)}delete(e){return super.delete(l0(this,e))}};class Ya extends Set{constructor(e,n=f0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(Ef(this,e))}add(e){return super.add(a0(this,e))}delete(e){return super.delete(l0(this,e))}}function Ef({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function a0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function l0({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function f0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Nf(t){return t}function Ha(t,...e){return As(t,Nf,Nf,e)}function Ui(t,e,...n){return As(t,Nf,e,n)}function Bb(t,e,...n){return As(t,Array.from,e,n)}function As(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const l=new di,f=i[a++];let s=-1;for(const u of o){const c=f(u,++s,o),h=l.get(c);h?h.push(u):l.set(c,[u])}for(const[u,c]of l)l.set(u,r(c,a));return e(l)}(t,0)}function qb(t,e){return Array.from(e,n=>t[n])}function Or(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const l=oa(a[r],a[o]);if(l)return l}})):(n=t.map(n),i.sort((r,o)=>oa(n[r],n[o]))),qb(t,i)}return t.sort(s0(n))}function s0(t=ge){if(t===ge)return oa;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function oa(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Es(t,e,n){return(e.length!==2?Or(Ui(t,e,n),([i,r],[o,a])=>ge(r,a)||ge(i,o)):Or(Ha(t,n),([i,r],[o,a])=>e(r,a)||ge(i,o))).map(([i])=>i)}const Wb=Math.sqrt(50),Yb=Math.sqrt(10),Hb=Math.sqrt(2);function aa(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Wb?10:o>=Yb?5:o>=Hb?2:1;let l,f,s;return r<0?(s=Math.pow(10,-r)/a,l=Math.round(t*s),f=Math.round(e*s),l/s<t&&++l,f/s>e&&--f,s=-s):(s=Math.pow(10,r)*a,l=Math.round(t/s),f=Math.round(e/s),l*s<t&&++l,f*s>e&&--f),f<l&&.5<=n&&n<2?aa(t,e,n*2):[l,f,s]}function Ur(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?aa(e,t,n):aa(t,e,n);if(!(o>=r))return[];const l=o-r+1,f=new Array(l);if(i)if(a<0)for(let s=0;s<l;++s)f[s]=(o-s)/-a;else for(let s=0;s<l;++s)f[s]=(o-s)*a;else if(a<0)for(let s=0;s<l;++s)f[s]=(r+s)/-a;else for(let s=0;s<l;++s)f[s]=(r+s)*a;return f}function la(t,e,n){return e=+e,t=+t,n=+n,aa(t,e,n)[2]}function Df(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?la(e,t,n):la(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Vb(t){return Math.max(1,Math.ceil(Math.log($s(t))/Math.LN2)+1)}function Ue(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Gb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function wn(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function Xb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function u0(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?oa:s0(r);i>n;){if(i-n>600){const f=i-n+1,s=e-n+1,u=Math.log(f),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(f-c)/f)*(s-f/2<0?-1:1),p=Math.max(n,Math.floor(e-s*c/f+h)),d=Math.min(i,Math.floor(e+(f-s)*c/f+h));u0(t,e,p,d,r)}const o=t[e];let a=n,l=i;for(pr(t,n,e),r(t[i],o)>0&&pr(t,n,i);a<l;){for(pr(t,a,l),++a,--l;r(t[a],o)<0;)++a;for(;r(t[l],o)>0;)--l}r(t[n],o)===0?pr(t,n,l):(++l,pr(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function pr(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function c0(t,e=ge){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?ge(a,r)>0:ge(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Yi(t,e,n){if(t=Float64Array.from(Db(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return wn(t);if(e>=1)return Ue(t);var i,r=(i-1)*e,o=Math.floor(r),a=Ue(u0(t,o).subarray(0,o+1)),l=wn(t.subarray(o+1));return a+(l-a)*(r-o)}}function jb(t,e,n=i0){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return a+(l-a)*(r-o)}}function Zb(t,e,n){const i=$s(t),r=Yi(t,.75)-Yi(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function h0(t,e,n){const i=$s(t),r=o0(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function Kb(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function Ff(t,e){return Yi(t,.5,e)}function*Qb(t){for(const e of t)yield*e}function d0(t){return Array.from(Qb(t))}function Jb(t,e){const n=new di;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function t_(t,e=e_){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function e_(t,e){return[t,e]}function Lf(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function qn(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function fa(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function n_(t){return t}var Ul=1,zl=2,If=3,Ao=4,Yu=1e-6;function i_(t){return"translate("+t+",0)"}function r_(t){return"translate(0,"+t+")"}function o_(t){return e=>+t(e)}function a_(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function l_(){return!this.__axis}function f_(t,e){var n=[],i=null,r=null,o=6,a=6,l=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Ul||t===Ao?-1:1,u=t===Ao||t===zl?"x":"y",c=t===Ul||t===If?i_:r_;function h(p){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):n_),g=Math.max(o,0)+l,_=e.range(),b=+_[0]+f,v=+_[_.length-1]+f,w=(e.bandwidth?a_:o_)(e.copy(),f),k=p.selection?p.selection():p,x=k.selectAll(".domain").data([null]),S=k.selectAll(".tick").data(d,e).order(),T=S.exit(),$=S.enter().append("g").attr("class","tick"),F=S.select("line"),A=S.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge($),F=F.merge($.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),A=A.merge($.append("text").attr("fill","currentColor").attr(u,s*g).attr("dy",t===Ul?"0em":t===If?"0.71em":"0.32em")),p!==k&&(x=x.transition(p),S=S.transition(p),F=F.transition(p),A=A.transition(p),T=T.transition(p).attr("opacity",Yu).attr("transform",function(L){return isFinite(L=w(L))?c(L+f):this.getAttribute("transform")}),$.attr("opacity",Yu).attr("transform",function(L){var R=this.parentNode.__axis;return c((R&&isFinite(R=R(L))?R:w(L))+f)})),T.remove(),x.attr("d",t===Ao||t===zl?a?"M"+s*a+","+b+"H"+f+"V"+v+"H"+s*a:"M"+f+","+b+"V"+v:a?"M"+b+","+s*a+"V"+f+"H"+v+"V"+s*a:"M"+b+","+f+"H"+v),S.attr("opacity",1).attr("transform",function(L){return c(w(L)+f)}),F.attr(u+"2",s*o),A.attr(u,s*g).text(m),k.filter(l_).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===zl?"start":t===Ao?"end":"middle"),k.each(function(){this.__axis=w})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),h):i&&i.slice()},h.tickFormat=function(p){return arguments.length?(r=p,h):r},h.tickSize=function(p){return arguments.length?(o=a=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(l=+p,h):l},h.offset=function(p){return arguments.length?(f=+p,h):f},h}function s_(t){return f_(If,t)}var u_={value:()=>{}};function p0(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Qo(n)}function Qo(t){this._=t}function c_(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Qo.prototype=p0.prototype={constructor:Qo,on:function(t,e){var n=this._,i=c_(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=h_(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=Hu(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Hu(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Qo(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function h_(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Hu(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=u_,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Rf="http://www.w3.org/1999/xhtml";const Hi={svg:"http://www.w3.org/2000/svg",xhtml:Rf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Va(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Hi.hasOwnProperty(e)?{space:Hi[e],local:t}:t}function d_(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Rf&&e.documentElement.namespaceURI===Rf?e.createElement(t):e.createElementNS(n,t)}}function p_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ga(t){var e=Va(t);return(e.local?p_:d_)(e)}function m_(){}function Ns(t){return t==null?m_:function(){return this.querySelector(t)}}function g_(t){typeof t!="function"&&(t=Ns(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=new Array(a),f,s,u=0;u<a;++u)(f=o[u])&&(s=t.call(f,f.__data__,u,o))&&("__data__"in f&&(s.__data__=f.__data__),l[u]=s);return new we(i,this._parents)}function b_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function __(){return[]}function m0(t){return t==null?__:function(){return this.querySelectorAll(t)}}function y_(t){return function(){return b_(t.apply(this,arguments))}}function w_(t){typeof t=="function"?t=y_(t):t=m0(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&(i.push(t.call(f,f.__data__,s,a)),r.push(f));return new we(i,r)}function g0(t){return function(){return this.matches(t)}}function b0(t){return function(e){return e.matches(t)}}var v_=Array.prototype.find;function x_(t){return function(){return v_.call(this.children,t)}}function k_(){return this.firstElementChild}function M_(t){return this.select(t==null?k_:x_(typeof t=="function"?t:b0(t)))}var S_=Array.prototype.filter;function T_(){return Array.from(this.children)}function C_(t){return function(){return S_.call(this.children,t)}}function $_(t){return this.selectAll(t==null?T_:C_(typeof t=="function"?t:b0(t)))}function A_(t){typeof t!="function"&&(t=g0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new we(i,this._parents)}function _0(t){return new Array(t.length)}function E_(){return new we(this._enter||this._groups.map(_0),this._parents)}function sa(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}sa.prototype={constructor:sa,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function N_(t){return function(){return t}}function D_(t,e,n,i,r,o){for(var a=0,l,f=e.length,s=o.length;a<s;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):n[a]=new sa(t,o[a]);for(;a<f;++a)(l=e[a])&&(r[a]=l)}function F_(t,e,n,i,r,o,a){var l,f,s=new Map,u=e.length,c=o.length,h=new Array(u),p;for(l=0;l<u;++l)(f=e[l])&&(h[l]=p=a.call(f,f.__data__,l,e)+"",s.has(p)?r[l]=f:s.set(p,f));for(l=0;l<c;++l)p=a.call(t,o[l],l,o)+"",(f=s.get(p))?(i[l]=f,f.__data__=o[l],s.delete(p)):n[l]=new sa(t,o[l]);for(l=0;l<u;++l)(f=e[l])&&s.get(h[l])===f&&(r[l]=f)}function L_(t){return t.__data__}function I_(t,e){if(!arguments.length)return Array.from(this,L_);var n=e?F_:D_,i=this._parents,r=this._groups;typeof t!="function"&&(t=N_(t));for(var o=r.length,a=new Array(o),l=new Array(o),f=new Array(o),s=0;s<o;++s){var u=i[s],c=r[s],h=c.length,p=R_(t.call(u,u&&u.__data__,s,i)),d=p.length,m=l[s]=new Array(d),g=a[s]=new Array(d),_=f[s]=new Array(h);n(u,c,m,g,_,p,e);for(var b=0,v=0,w,k;b<d;++b)if(w=m[b]){for(b>=v&&(v=b+1);!(k=g[v])&&++v<d;);w._next=k||null}}return a=new we(a,i),a._enter=l,a._exit=f,a}function R_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function P_(){return new we(this._exit||this._groups.map(_0),this._parents)}function O_(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function U_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),l=new Array(r),f=0;f<a;++f)for(var s=n[f],u=i[f],c=s.length,h=l[f]=new Array(c),p,d=0;d<c;++d)(p=s[d]||u[d])&&(h[d]=p);for(;f<r;++f)l[f]=n[f];return new we(l,this._parents)}function z_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function B_(t){t||(t=q_);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],l=a.length,f=r[o]=new Array(l),s,u=0;u<l;++u)(s=a[u])&&(f[u]=s);f.sort(e)}return new we(r,this._parents).order()}function q_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function W_(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Y_(){return Array.from(this)}function H_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function V_(){let t=0;for(const e of this)++t;return t}function G_(){return!this.node()}function X_(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,l;o<a;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function j_(t){return function(){this.removeAttribute(t)}}function Z_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function K_(t,e){return function(){this.setAttribute(t,e)}}function Q_(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function J_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ty(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ey(t,e){var n=Va(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Z_:j_:typeof e=="function"?n.local?ty:J_:n.local?Q_:K_)(n,e))}function y0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ny(t){return function(){this.style.removeProperty(t)}}function iy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ry(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function oy(t,e,n){return arguments.length>1?this.each((e==null?ny:typeof e=="function"?ry:iy)(t,e,n??"")):Vi(this.node(),t)}function Vi(t,e){return t.style.getPropertyValue(e)||y0(t).getComputedStyle(t,null).getPropertyValue(e)}function ay(t){return function(){delete this[t]}}function ly(t,e){return function(){this[t]=e}}function fy(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function sy(t,e){return arguments.length>1?this.each((e==null?ay:typeof e=="function"?fy:ly)(t,e)):this.node()[t]}function w0(t){return t.trim().split(/^|\s+/)}function Ds(t){return t.classList||new v0(t)}function v0(t){this._node=t,this._names=w0(t.getAttribute("class")||"")}v0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function x0(t,e){for(var n=Ds(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function k0(t,e){for(var n=Ds(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function uy(t){return function(){x0(this,t)}}function cy(t){return function(){k0(this,t)}}function hy(t,e){return function(){(e.apply(this,arguments)?x0:k0)(this,t)}}function dy(t,e){var n=w0(t+"");if(arguments.length<2){for(var i=Ds(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?hy:e?uy:cy)(n,e))}function py(){this.textContent=""}function my(t){return function(){this.textContent=t}}function gy(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function by(t){return arguments.length?this.each(t==null?py:(typeof t=="function"?gy:my)(t)):this.node().textContent}function _y(){this.innerHTML=""}function yy(t){return function(){this.innerHTML=t}}function wy(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function vy(t){return arguments.length?this.each(t==null?_y:(typeof t=="function"?wy:yy)(t)):this.node().innerHTML}function xy(){this.nextSibling&&this.parentNode.appendChild(this)}function ky(){return this.each(xy)}function My(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sy(){return this.each(My)}function Ty(t){var e=typeof t=="function"?t:Ga(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Cy(){return null}function $y(t,e){var n=typeof t=="function"?t:Ga(t),i=e==null?Cy:typeof e=="function"?e:Ns(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Ay(){var t=this.parentNode;t&&t.removeChild(this)}function Ey(){return this.each(Ay)}function Ny(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Dy(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Fy(t){return this.select(t?Dy:Ny)}function Ly(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Iy(t){return function(e){t.call(this,e,this.__data__)}}function Ry(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Py(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Oy(t,e,n){return function(){var i=this.__on,r,o=Iy(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Uy(t,e,n){var i=Ry(t+""),r,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,s=l.length,u;f<s;++f)for(r=0,u=l[f];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(l=e?Oy:Py,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function M0(t,e,n){var i=y0(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function zy(t,e){return function(){return M0(this,t,e)}}function By(t,e){return function(){return M0(this,t,e.apply(this,arguments))}}function qy(t,e){return this.each((typeof e=="function"?By:zy)(t,e))}function*Wy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var S0=[null];function we(t,e){this._groups=t,this._parents=e}function io(){return new we([[document.documentElement]],S0)}function Yy(){return this}we.prototype=io.prototype={constructor:we,select:g_,selectAll:w_,selectChild:M_,selectChildren:$_,filter:A_,data:I_,enter:E_,exit:P_,join:O_,merge:U_,selection:Yy,order:z_,sort:B_,call:W_,nodes:Y_,node:H_,size:V_,empty:G_,each:X_,attr:ey,style:oy,property:sy,classed:dy,text:by,html:vy,raise:ky,lower:Sy,append:Ty,insert:$y,remove:Ey,clone:Fy,datum:Ly,on:Uy,dispatch:qy,[Symbol.iterator]:Wy};function Dr(t){return typeof t=="string"?new we([[document.querySelector(t)]],[document.documentElement]):new we([[t]],S0)}function Hy(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Vy(t,e){if(t=Hy(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function ar(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ro(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Gn(){}var pi=.7,Gi=1/pi,zi="\\s*([+-]?\\d+)\\s*",zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",en="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gy=/^#([0-9a-f]{3,8})$/,Xy=new RegExp(`^rgb\\(${zi},${zi},${zi}\\)$`),jy=new RegExp(`^rgb\\(${en},${en},${en}\\)$`),Zy=new RegExp(`^rgba\\(${zi},${zi},${zi},${zr}\\)$`),Ky=new RegExp(`^rgba\\(${en},${en},${en},${zr}\\)$`),Qy=new RegExp(`^hsl\\(${zr},${en},${en}\\)$`),Jy=new RegExp(`^hsla\\(${zr},${en},${en},${zr}\\)$`),Vu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ar(Gn,mi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Gu,formatHex:Gu,formatHex8:tw,formatHsl:ew,formatRgb:Xu,toString:Xu});function Gu(){return this.rgb().formatHex()}function tw(){return this.rgb().formatHex8()}function ew(){return T0(this).formatHsl()}function Xu(){return this.rgb().formatRgb()}function mi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Gy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ju(e):n===3?new Zt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Eo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Eo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Xy.exec(t))?new Zt(e[1],e[2],e[3],1):(e=jy.exec(t))?new Zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zy.exec(t))?Eo(e[1],e[2],e[3],e[4]):(e=Ky.exec(t))?Eo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Qy.exec(t))?Qu(e[1],e[2]/100,e[3]/100,1):(e=Jy.exec(t))?Qu(e[1],e[2]/100,e[3]/100,e[4]):Vu.hasOwnProperty(t)?ju(Vu[t]):t==="transparent"?new Zt(NaN,NaN,NaN,0):null}function ju(t){return new Zt(t>>16&255,t>>8&255,t&255,1)}function Eo(t,e,n,i){return i<=0&&(t=e=n=NaN),new Zt(t,e,n,i)}function Fs(t){return t instanceof Gn||(t=mi(t)),t?(t=t.rgb(),new Zt(t.r,t.g,t.b,t.opacity)):new Zt}function Wn(t,e,n,i){return arguments.length===1?Fs(t):new Zt(t,e,n,i??1)}function Zt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}ar(Zt,Wn,ro(Gn,{brighter(t){return t=t==null?Gi:Math.pow(Gi,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zt(li(this.r),li(this.g),li(this.b),ua(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zu,formatHex:Zu,formatHex8:nw,formatRgb:Ku,toString:Ku}));function Zu(){return`#${ii(this.r)}${ii(this.g)}${ii(this.b)}`}function nw(){return`#${ii(this.r)}${ii(this.g)}${ii(this.b)}${ii((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ku(){const t=ua(this.opacity);return`${t===1?"rgb(":"rgba("}${li(this.r)}, ${li(this.g)}, ${li(this.b)}${t===1?")":`, ${t})`}`}function ua(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function li(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ii(t){return t=li(t),(t<16?"0":"")+t.toString(16)}function Qu(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pe(t,e,n,i)}function T0(t){if(t instanceof Pe)return new Pe(t.h,t.s,t.l,t.opacity);if(t instanceof Gn||(t=mi(t)),!t)return new Pe;if(t instanceof Pe)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,l=o-r,f=(o+r)/2;return l?(e===o?a=(n-i)/l+(n<i)*6:n===o?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?o+r:2-o-r,a*=60):l=f>0&&f<1?0:a,new Pe(a,l,f,t.opacity)}function Pf(t,e,n,i){return arguments.length===1?T0(t):new Pe(t,e,n,i??1)}function Pe(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ar(Pe,Pf,ro(Gn,{brighter(t){return t=t==null?Gi:Math.pow(Gi,t),new Pe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new Pe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Zt(Bl(t>=240?t-240:t+120,r,i),Bl(t,r,i),Bl(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Pe(Ju(this.h),No(this.s),No(this.l),ua(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ua(this.opacity);return`${t===1?"hsl(":"hsla("}${Ju(this.h)}, ${No(this.s)*100}%, ${No(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ju(t){return t=(t||0)%360,t<0?t+360:t}function No(t){return Math.max(0,Math.min(1,t||0))}function Bl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const C0=Math.PI/180,$0=180/Math.PI,ca=18,A0=.96422,E0=1,N0=.82521,D0=4/29,Bi=6/29,F0=3*Bi*Bi,iw=Bi*Bi*Bi;function L0(t){if(t instanceof nn)return new nn(t.l,t.a,t.b,t.opacity);if(t instanceof gn)return I0(t);t instanceof Zt||(t=Fs(t));var e=Hl(t.r),n=Hl(t.g),i=Hl(t.b),r=ql((.2225045*e+.7168786*n+.0606169*i)/E0),o,a;return e===n&&n===i?o=a=r:(o=ql((.4360747*e+.3850649*n+.1430804*i)/A0),a=ql((.0139322*e+.0971045*n+.7141733*i)/N0)),new nn(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Of(t,e,n,i){return arguments.length===1?L0(t):new nn(t,e,n,i??1)}function nn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}ar(nn,Of,ro(Gn,{brighter(t){return new nn(this.l+ca*(t??1),this.a,this.b,this.opacity)},darker(t){return new nn(this.l-ca*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=A0*Wl(e),t=E0*Wl(t),n=N0*Wl(n),new Zt(Yl(3.1338561*e-1.6168667*t-.4906146*n),Yl(-.9787684*e+1.9161415*t+.033454*n),Yl(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function ql(t){return t>iw?Math.pow(t,1/3):t/F0+D0}function Wl(t){return t>Bi?t*t*t:F0*(t-D0)}function Yl(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Hl(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function rw(t){if(t instanceof gn)return new gn(t.h,t.c,t.l,t.opacity);if(t instanceof nn||(t=L0(t)),t.a===0&&t.b===0)return new gn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*$0;return new gn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Uf(t,e,n,i){return arguments.length===1?rw(t):new gn(t,e,n,i??1)}function gn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function I0(t){if(isNaN(t.h))return new nn(t.l,0,0,t.opacity);var e=t.h*C0;return new nn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ar(gn,Uf,ro(Gn,{brighter(t){return new gn(this.h,this.c,this.l+ca*(t??1),this.opacity)},darker(t){return new gn(this.h,this.c,this.l-ca*(t??1),this.opacity)},rgb(){return I0(this).rgb()}}));var R0=-.14861,Ls=1.78277,Is=-.29227,Xa=-.90649,Br=1.97294,tc=Br*Xa,ec=Br*Ls,nc=Ls*Is-Xa*R0;function ow(t){if(t instanceof fi)return new fi(t.h,t.s,t.l,t.opacity);t instanceof Zt||(t=Fs(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(nc*i+tc*e-ec*n)/(nc+tc-ec),o=i-r,a=(Br*(n-r)-Is*o)/Xa,l=Math.sqrt(a*a+o*o)/(Br*r*(1-r)),f=l?Math.atan2(a,o)*$0-120:NaN;return new fi(f<0?f+360:f,l,r,t.opacity)}function on(t,e,n,i){return arguments.length===1?ow(t):new fi(t,e,n,i??1)}function fi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}ar(fi,on,ro(Gn,{brighter(t){return t=t==null?Gi:Math.pow(Gi,t),new fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?pi:Math.pow(pi,t),new fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*C0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Zt(255*(e+n*(R0*i+Ls*r)),255*(e+n*(Is*i+Xa*r)),255*(e+n*(Br*i)),this.opacity)}}));function aw(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function lw(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return aw((n-i/e)*e,a,r,o,l)}}const ja=t=>()=>t;function P0(t,e){return function(n){return t+n*e}}function fw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Rs(t,e){var n=e-t;return n?P0(t,n>180||n<-180?n-360*Math.round(n/360):n):ja(isNaN(t)?e:t)}function sw(t){return(t=+t)==1?re:function(e,n){return n-e?fw(e,n,t):ja(isNaN(e)?n:e)}}function re(t,e){var n=e-t;return n?P0(t,n):ja(isNaN(t)?e:t)}const gi=function t(e){var n=sw(e);function i(r,o){var a=n((r=Wn(r)).r,(o=Wn(o)).r),l=n(r.g,o.g),f=n(r.b,o.b),s=re(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=l(u),r.b=f(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function uw(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=Wn(e[a]),i[a]=l.r||0,r[a]=l.g||0,o[a]=l.b||0;return i=t(i),r=t(r),o=t(o),l.opacity=1,function(f){return l.r=i(f),l.g=r(f),l.b=o(f),l+""}}}var cw=uw(lw);function hw(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function dw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function pw(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=oo(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=r[a](l);return o}}function mw(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ie(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function gw(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=oo(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var zf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vl=new RegExp(zf.source,"g");function bw(t){return function(){return t}}function _w(t){return function(e){return t(e)+""}}function O0(t,e){var n=zf.lastIndex=Vl.lastIndex=0,i,r,o,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=zf.exec(t))&&(r=Vl.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:ie(i,r)})),n=Vl.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?f[0]?_w(f[0].x):bw(e):(e=f.length,function(s){for(var u=0,c;u<e;++u)l[(c=f[u]).i]=c.x(s);return l.join("")})}function oo(t,e){var n=typeof e,i;return e==null||n==="boolean"?ja(e):(n==="number"?ie:n==="string"?(i=mi(e))?(e=i,gi):O0:e instanceof mi?gi:e instanceof Date?mw:dw(e)?hw:Array.isArray(e)?pw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?gw:ie)(t,e)}function Ps(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ic=180/Math.PI,Bf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U0(t,e,n,i,r,o){var a,l,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),t*i<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*ic,skewX:Math.atan(f)*ic,scaleX:a,scaleY:l}}var Do;function yw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Bf:U0(e.a,e.b,e.c,e.d,e.e,e.f)}function ww(t){return t==null||(Do||(Do=document.createElementNS("http://www.w3.org/2000/svg","g")),Do.setAttribute("transform",t),!(t=Do.transform.baseVal.consolidate()))?Bf:(t=t.matrix,U0(t.a,t.b,t.c,t.d,t.e,t.f))}function z0(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push("translate(",null,e,null,n);d.push({i:m-4,x:ie(s,c)},{i:m-2,x:ie(u,h)})}else(c||h)&&p.push("translate("+c+e+h+n)}function a(s,u,c,h){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),h.push({i:c.push(r(c)+"rotate(",null,i)-2,x:ie(s,u)})):u&&c.push(r(c)+"rotate("+u+i)}function l(s,u,c,h){s!==u?h.push({i:c.push(r(c)+"skewX(",null,i)-2,x:ie(s,u)}):u&&c.push(r(c)+"skewX("+u+i)}function f(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push(r(p)+"scale(",null,",",null,")");d.push({i:m-4,x:ie(s,c)},{i:m-2,x:ie(u,h)})}else(c!==1||h!==1)&&p.push(r(p)+"scale("+c+","+h+")")}return function(s,u){var c=[],h=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,c,h),a(s.rotate,u.rotate,c,h),l(s.skewX,u.skewX,c,h),f(s.scaleX,s.scaleY,u.scaleX,u.scaleY,c,h),s=u=null,function(p){for(var d=-1,m=h.length,g;++d<m;)c[(g=h[d]).i]=g.x(p);return c.join("")}}}var vw=z0(yw,"px, ","px)","deg)"),xw=z0(ww,", ",")",")");function kw(t){return function(e,n){var i=t((e=Pf(e)).h,(n=Pf(n)).h),r=re(e.s,n.s),o=re(e.l,n.l),a=re(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Mw=kw(Rs);function Sw(t,e){var n=re((t=Of(t)).l,(e=Of(e)).l),i=re(t.a,e.a),r=re(t.b,e.b),o=re(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function Tw(t){return function(e,n){var i=t((e=Uf(e)).h,(n=Uf(n)).h),r=re(e.c,n.c),o=re(e.l,n.l),a=re(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Cw=Tw(Rs);function B0(t){return function e(n){n=+n;function i(r,o){var a=t((r=on(r)).h,(o=on(o)).h),l=re(r.s,o.s),f=re(r.l,o.l),s=re(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=l(u),r.l=f(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}B0(Rs);var Os=B0(re);function Za(t,e){e===void 0&&(e=t,t=oo);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[l](a-l)}}function ze(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Xi=0,xr=0,mr=0,q0=1e3,ha,kr,da=0,bi=0,Ka=0,qr=typeof performance=="object"&&performance.now?performance:Date,W0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Us(){return bi||(W0($w),bi=qr.now()+Ka)}function $w(){bi=0}function pa(){this._call=this._time=this._next=null}pa.prototype=Y0.prototype={constructor:pa,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Us():+n)+(e==null?0:+e),!this._next&&kr!==this&&(kr?kr._next=this:ha=this,kr=this),this._call=t,this._time=n,qf()},stop:function(){this._call&&(this._call=null,this._time=1/0,qf())}};function Y0(t,e,n){var i=new pa;return i.restart(t,e,n),i}function Aw(){Us(),++Xi;for(var t=ha,e;t;)(e=bi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xi}function rc(){bi=(da=qr.now())+Ka,Xi=xr=0;try{Aw()}finally{Xi=0,Nw(),bi=0}}function Ew(){var t=qr.now(),e=t-da;e>q0&&(Ka-=e,da=t)}function Nw(){for(var t,e=ha,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ha=n);kr=t,qf(i)}function qf(t){if(!Xi){xr&&(xr=clearTimeout(xr));var e=t-bi;e>24?(t<1/0&&(xr=setTimeout(rc,t-qr.now()-Ka)),mr&&(mr=clearInterval(mr))):(mr||(da=qr.now(),mr=setInterval(Ew,q0)),Xi=1,W0(rc))}}function oc(t,e,n){var i=new pa;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Dw=p0("start","end","cancel","interrupt"),Fw=[],H0=0,ac=1,Wf=2,Jo=3,lc=4,Yf=5,ta=6;function Qa(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Lw(t,n,{name:e,index:i,group:r,on:Dw,tween:Fw,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:H0})}function zs(t,e){var n=He(t,e);if(n.state>H0)throw new Error("too late; already scheduled");return n}function an(t,e){var n=He(t,e);if(n.state>Jo)throw new Error("too late; already running");return n}function He(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Lw(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=Y0(o,0,n.time);function o(s){n.state=ac,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,c,h,p;if(n.state!==ac)return f();for(u in i)if(p=i[u],p.name===n.name){if(p.state===Jo)return oc(a);p.state===lc?(p.state=ta,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[u]):+u<e&&(p.state=ta,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[u])}if(oc(function(){n.state===Jo&&(n.state=lc,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=Wf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wf){for(n.state=Jo,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=p);r.length=c+1}}function l(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(f),n.state=Yf,1),c=-1,h=r.length;++c<h;)r[c].call(t,u);n.state===Yf&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=ta,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function Iw(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>Wf&&i.state<Yf,i.state=ta,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function Rw(t){return this.each(function(){Iw(this,t)})}function Pw(t,e){var n,i;return function(){var r=an(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Ow(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=an(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},f=0,s=r.length;f<s;++f)if(r[f].name===e){r[f]=l;break}f===s&&r.push(l)}o.tween=r}}function Uw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=He(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Pw:Ow)(n,t,e))}function Bs(t,e,n){var i=t._id;return t.each(function(){var r=an(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return He(r,i).value[e]}}function V0(t,e){var n;return(typeof e=="number"?ie:e instanceof mi?gi:(n=mi(e))?(e=n,gi):O0)(t,e)}function zw(t){return function(){this.removeAttribute(t)}}function Bw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function qw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function Ww(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function Yw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Hw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Vw(t,e){var n=Va(t),i=n==="transform"?xw:V0;return this.attrTween(t,typeof e=="function"?(n.local?Hw:Yw)(n,i,Bs(this,"attr."+t,e)):e==null?(n.local?Bw:zw)(n):(n.local?Ww:qw)(n,i,e))}function Gw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Xw(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function jw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Xw(t,o)),n}return r._value=e,r}function Zw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Gw(t,o)),n}return r._value=e,r}function Kw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Va(t);return this.tween(n,(i.local?jw:Zw)(i,e))}function Qw(t,e){return function(){zs(this,t).delay=+e.apply(this,arguments)}}function Jw(t,e){return e=+e,function(){zs(this,t).delay=e}}function tv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Qw:Jw)(e,t)):He(this.node(),e).delay}function ev(t,e){return function(){an(this,t).duration=+e.apply(this,arguments)}}function nv(t,e){return e=+e,function(){an(this,t).duration=e}}function iv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ev:nv)(e,t)):He(this.node(),e).duration}function rv(t,e){if(typeof e!="function")throw new Error;return function(){an(this,t).ease=e}}function ov(t){var e=this._id;return arguments.length?this.each(rv(e,t)):He(this.node(),e).ease}function av(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;an(this,t).ease=n}}function lv(t){if(typeof t!="function")throw new Error;return this.each(av(this._id,t))}function fv(t){typeof t!="function"&&(t=g0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new vn(i,this._parents,this._name,this._id)}function sv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var f=e[l],s=n[l],u=f.length,c=a[l]=new Array(u),h,p=0;p<u;++p)(h=f[p]||s[p])&&(c[p]=h);for(;l<i;++l)a[l]=e[l];return new vn(a,this._parents,this._name,this._id)}function uv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function cv(t,e,n){var i,r,o=uv(e)?zs:an;return function(){var a=o(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function hv(t,e){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(t):this.each(cv(n,t,e))}function dv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function pv(){return this.on("end.remove",dv(this._id))}function mv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ns(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var l=i[a],f=l.length,s=o[a]=new Array(f),u,c,h=0;h<f;++h)(u=l[h])&&(c=t.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c,Qa(s[h],e,n,h,s,He(u,n)));return new vn(o,this._parents,e,n)}function gv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=m0(t));for(var i=this._groups,r=i.length,o=[],a=[],l=0;l<r;++l)for(var f=i[l],s=f.length,u,c=0;c<s;++c)if(u=f[c]){for(var h=t.call(u,u.__data__,c,f),p,d=He(u,n),m=0,g=h.length;m<g;++m)(p=h[m])&&Qa(p,e,n,m,h,d);o.push(h),a.push(u)}return new vn(o,a,e,n)}var bv=io.prototype.constructor;function _v(){return new bv(this._groups,this._parents)}function yv(t,e){var n,i,r;return function(){var o=Vi(this,t),a=(this.style.removeProperty(t),Vi(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function G0(t){return function(){this.style.removeProperty(t)}}function wv(t,e,n){var i,r=n+"",o;return function(){var a=Vi(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function vv(t,e,n){var i,r,o;return function(){var a=Vi(this,t),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(t),Vi(this,t))),a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l))}}function xv(t,e){var n,i,r,o="style."+e,a="end."+o,l;return function(){var f=an(this,t),s=f.on,u=f.value[o]==null?l||(l=G0(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),f.on=i}}function kv(t,e,n){var i=(t+="")=="transform"?vw:V0;return e==null?this.styleTween(t,yv(t,i)).on("end.style."+t,G0(t)):typeof e=="function"?this.styleTween(t,vv(t,i,Bs(this,"style."+t,e))).each(xv(this._id,t)):this.styleTween(t,wv(t,i,e),n).on("end.style."+t,null)}function Mv(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Sv(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Mv(t,a,n)),i}return o._value=e,o}function Tv(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Sv(t,e,n??""))}function Cv(t){return function(){this.textContent=t}}function $v(t){return function(){var e=t(this);this.textContent=e??""}}function Av(t){return this.tween("text",typeof t=="function"?$v(Bs(this,"text",t)):Cv(t==null?"":t+""))}function Ev(t){return function(e){this.textContent=t.call(this,e)}}function Nv(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Ev(r)),e}return i._value=t,i}function Dv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Nv(t))}function Fv(){for(var t=this._name,e=this._id,n=X0(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)if(f=a[s]){var u=He(f,e);Qa(f,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new vn(i,this._parents,t,n)}function Lv(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var l={value:a},f={value:function(){--r===0&&o()}};n.each(function(){var s=an(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),s.on=e}),r===0&&o()})}var Iv=0;function vn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function X0(){return++Iv}var sn=io.prototype;vn.prototype={constructor:vn,select:mv,selectAll:gv,selectChild:sn.selectChild,selectChildren:sn.selectChildren,filter:fv,merge:sv,selection:_v,transition:Fv,call:sn.call,nodes:sn.nodes,node:sn.node,size:sn.size,empty:sn.empty,each:sn.each,on:hv,attr:Vw,attrTween:Kw,style:kv,styleTween:Tv,text:Av,textTween:Dv,remove:pv,tween:Uw,delay:tv,duration:iv,ease:ov,easeVarying:lv,end:Lv,[Symbol.iterator]:sn[Symbol.iterator]};function Rv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Pv={time:null,delay:0,duration:250,ease:Rv};function Ov(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Uv(t){var e,n;t instanceof vn?(e=t._id,t=t._name):(e=X0(),(n=Pv).time=Us(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&Qa(f,t,e,s,a,n||Ov(f,e));return new vn(i,this._parents,t,e)}io.prototype.interrupt=Rw;io.prototype.transition=Uv;const Hf=Math.PI,Vf=2*Hf,ti=1e-6,zv=Vf-ti;function j0(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Bv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return j0;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class Z0{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?j0:Bv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,f=i-e,s=r-n,u=a-e,c=l-n,h=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ti)if(!(Math.abs(c*f-s*u)>ti)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,d=r-l,m=f*f+s*s,g=p*p+d*d,_=Math.sqrt(m),b=Math.sqrt(h),v=o*Math.tan((Hf-Math.acos((m+h-g)/(2*_*b)))/2),w=v/b,k=v/_;Math.abs(w-1)>ti&&this._append`L${e+w*u},${n+w*c}`,this._append`A${o},${o},0,0,${+(c*p>u*d)},${this._x1=e+k*f},${this._y1=n+k*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),f=i*Math.sin(r),s=e+l,u=n+f,c=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>ti||Math.abs(this._y1-u)>ti)&&this._append`L${s},${u}`,i&&(h<0&&(h=h%Vf+Vf),h>zv?this._append`A${i},${i},0,1,${c},${e-l},${n-f}A${i},${i},0,1,${c},${this._x1=s},${this._y1=u}`:h>ti&&this._append`A${i},${i},0,${+(h>=Hf)},${c},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function In(t=3){return new Z0(+t)}function qv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ma(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ji(t){return t=ma(Math.abs(t)),t?t[1]:NaN}function Wv(t,e){return function(n,i){for(var r=n.length,o=[],a=0,l=t[0],f=0;r>0&&l>0&&(f+l+1>i&&(l=Math.max(1,i-f)),o.push(n.substring(r-=l,r+l)),!((f+=l+1)>i));)l=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Yv(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Hv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Wr(t){if(!(e=Hv.exec(t)))throw new Error("invalid format: "+t);var e;return new qs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Wr.prototype=qs.prototype;function qs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}qs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vv(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var K0;function Gv(t,e){var n=ma(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(K0=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ma(t,Math.max(0,e+o-1))[0]}function fc(t,e){var n=ma(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const sc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:qv,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>fc(t*100,e),r:fc,s:Gv,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function uc(t){return t}var cc=Array.prototype.map,hc=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Xv(t){var e=t.grouping===void 0||t.thousands===void 0?uc:Wv(cc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?uc:Yv(cc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function s(c){c=Wr(c);var h=c.fill,p=c.align,d=c.sign,m=c.symbol,g=c.zero,_=c.width,b=c.comma,v=c.precision,w=c.trim,k=c.type;k==="n"?(b=!0,k="g"):sc[k]||(v===void 0&&(v=12),w=!0,k="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=m==="$"?i:/[%p]/.test(k)?a:"",T=sc[k],$=/[defgprs%]/.test(k);v=v===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function F(A){var L=x,R=S,W,C,B;if(k==="c")R=T(A)+R,A="";else{A=+A;var z=A<0||1/A<0;if(A=isNaN(A)?f:T(Math.abs(A),v),w&&(A=Vv(A)),z&&+A==0&&d!=="+"&&(z=!1),L=(z?d==="("?d:l:d==="-"||d==="("?"":d)+L,R=(k==="s"?hc[8+K0/3]:"")+R+(z&&d==="("?")":""),$){for(W=-1,C=A.length;++W<C;)if(B=A.charCodeAt(W),48>B||B>57){R=(B===46?r+A.slice(W+1):A.slice(W))+R,A=A.slice(0,W);break}}}b&&!g&&(A=e(A,1/0));var Q=L.length+A.length+R.length,j=Q<_?new Array(_-Q+1).join(h):"";switch(b&&g&&(A=e(j+A,j.length?_-R.length:1/0),j=""),p){case"<":A=L+A+R+j;break;case"=":A=L+j+A+R;break;case"^":A=j.slice(0,Q=j.length>>1)+L+A+R+j.slice(Q);break;default:A=j+L+A+R;break}return o(A)}return F.toString=function(){return c+""},F}function u(c,h){var p=s((c=Wr(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(ji(h)/3)))*3,m=Math.pow(10,-d),g=hc[8+d/3];return function(_){return p(m*_)+g}}return{format:s,formatPrefix:u}}var Fo,lr,Q0;jv({thousands:",",grouping:[3],currency:["$",""]});function jv(t){return Fo=Xv(t),lr=Fo.format,Q0=Fo.formatPrefix,Fo}function Zv(t){return Math.max(0,-ji(Math.abs(t)))}function Kv(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ji(e)/3)))*3-ji(Math.abs(t)))}function Qv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ji(e)-ji(t))+1}var vt=1e-6,J0=1e-12,Mt=Math.PI,Ot=Mt/2,dc=Mt/4,ve=Mt*2,le=180/Mt,Pt=Mt/180,Ct=Math.abs,fr=Math.atan,xn=Math.atan2,kt=Math.cos,t1=Math.exp,ga=Math.log,Gl=Math.pow,yt=Math.sin,$e=Math.sign||function(t){return t>0?1:t<0?-1:0},_e=Math.sqrt,Ws=Math.tan;function e1(t){return t>1?0:t<-1?Mt:Math.acos(t)}function De(t){return t>1?Ot:t<-1?-Ot:Math.asin(t)}function Ae(){}function ba(t,e){t&&mc.hasOwnProperty(t.type)&&mc[t.type](t,e)}var pc={Feature:function(t,e){ba(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ba(n[i].geometry,e)}},mc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Gf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Gf(n[i],e,0)},Polygon:function(t,e){gc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)gc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ba(n[i],e)}};function Gf(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function gc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Gf(t[n],e,1);e.polygonEnd()}function ei(t,e){t&&pc.hasOwnProperty(t.type)?pc[t.type](t,e):ba(t,e)}function Xf(t){return[xn(t[1],t[0]),De(t[2])]}function Zi(t){var e=t[0],n=t[1],i=kt(n);return[i*kt(e),i*yt(e),yt(n)]}function Lo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function _a(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Xl(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Io(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function jf(t){var e=_e(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Zf(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function Kf(t,e){return Ct(t)>Mt&&(t-=Math.round(t/ve)*ve),[t,e]}Kf.invert=Kf;function n1(t,e,n){return(t%=ve)?e||n?Zf(_c(t),yc(e,n)):_c(t):e||n?yc(e,n):Kf}function bc(t){return function(e,n){return e+=t,Ct(e)>Mt&&(e-=Math.round(e/ve)*ve),[e,n]}}function _c(t){var e=bc(t);return e.invert=bc(-t),e}function yc(t,e){var n=kt(t),i=yt(t),r=kt(e),o=yt(e);function a(l,f){var s=kt(f),u=kt(l)*s,c=yt(l)*s,h=yt(f),p=h*n+u*i;return[xn(c*r-p*o,u*n-h*i),De(p*r+c*o)]}return a.invert=function(l,f){var s=kt(f),u=kt(l)*s,c=yt(l)*s,h=yt(f),p=h*r-c*o;return[xn(c*r+h*o,u*n+p*i),De(p*n-u*i)]},a}function Jv(t){t=n1(t[0]*Pt,t[1]*Pt,t.length>2?t[2]*Pt:0);function e(n){return n=t(n[0]*Pt,n[1]*Pt),n[0]*=le,n[1]*=le,n}return e.invert=function(n){return n=t.invert(n[0]*Pt,n[1]*Pt),n[0]*=le,n[1]*=le,n},e}function t3(t,e,n,i,r,o){if(n){var a=kt(e),l=yt(e),f=i*n;r==null?(r=e+i*ve,o=e-f/2):(r=wc(a,r),o=wc(a,o),(i>0?r<o:r>o)&&(r+=i*ve));for(var s,u=r;i>0?u>o:u<o;u-=f)s=Xf([a,-l*kt(u),-l*yt(u)]),t.point(s[0],s[1])}}function wc(t,e){e=Zi(e),e[0]-=t,jf(e);var n=e1(-e[1]);return((-e[2]<0?-n:n)+ve-vt)%ve}function i1(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Ae,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ea(t,e){return Ct(t[0]-e[0])<vt&&Ct(t[1]-e[1])<vt}function Ro(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function r1(t,e,n,i,r){var o=[],a=[],l,f;if(t.forEach(function(d){if(!((m=d.length-1)<=0)){var m,g=d[0],_=d[m],b;if(ea(g,_)){if(!g[2]&&!_[2]){for(r.lineStart(),l=0;l<m;++l)r.point((g=d[l])[0],g[1]);r.lineEnd();return}_[0]+=2*vt}o.push(b=new Ro(g,d,null,!0)),a.push(b.o=new Ro(g,null,b,!1)),o.push(b=new Ro(_,d,null,!1)),a.push(b.o=new Ro(_,null,b,!0))}}),!!o.length){for(a.sort(e),vc(o),vc(a),l=0,f=a.length;l<f;++l)a[l].e=n=!n;for(var s=o[0],u,c;;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(l=0,f=u.length;l<f;++l)r.point((c=u[l])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(p)for(u=h.p.z,l=u.length-1;l>=0;--l)r.point((c=u[l])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);r.lineEnd()}}}function vc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function jl(t){return Ct(t[0])<=Mt?t[0]:$e(t[0])*((Ct(t[0])+Mt)%ve-Mt)}function e3(t,e){var n=jl(e),i=e[1],r=yt(i),o=[yt(n),-kt(n),0],a=0,l=0,f=new hi;r===1?i=Ot+vt:r===-1&&(i=-Ot-vt);for(var s=0,u=t.length;s<u;++s)if(h=(c=t[s]).length)for(var c,h,p=c[h-1],d=jl(p),m=p[1]/2+dc,g=yt(m),_=kt(m),b=0;b<h;++b,d=w,g=x,_=S,p=v){var v=c[b],w=jl(v),k=v[1]/2+dc,x=yt(k),S=kt(k),T=w-d,$=T>=0?1:-1,F=$*T,A=F>Mt,L=g*x;if(f.add(xn(L*$*yt(F),_*S+L*kt(F))),a+=A?T+$*ve:T,A^d>=n^w>=n){var R=_a(Zi(p),Zi(v));jf(R);var W=_a(o,R);jf(W);var C=(A^T>=0?-1:1)*De(W[2]);(i>C||i===C&&(R[0]||R[1]))&&(l+=A^T>=0?1:-1)}}return(a<-vt||a<vt&&f<-J0)^l&1}function o1(t,e,n,i){return function(r){var o=e(r),a=i1(),l=e(a),f=!1,s,u,c,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=_,h.lineStart=b,h.lineEnd=v,u=[],s=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,u=d0(u);var w=e3(s,i);u.length?(f||(r.polygonStart(),f=!0),r1(u,i3,w,n,r)):w&&(f||(r.polygonStart(),f=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(w,k){t(w,k)&&r.point(w,k)}function d(w,k){o.point(w,k)}function m(){h.point=d,o.lineStart()}function g(){h.point=p,o.lineEnd()}function _(w,k){c.push([w,k]),l.point(w,k)}function b(){l.lineStart(),c=[]}function v(){_(c[0][0],c[0][1]),l.lineEnd();var w=l.clean(),k=a.result(),x,S=k.length,T,$,F;if(c.pop(),s.push(c),c=null,!!S){if(w&1){if($=k[0],(T=$.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),x=0;x<T;++x)r.point((F=$[x])[0],F[1]);r.lineEnd()}return}S>1&&w&2&&k.push(k.pop().concat(k.shift())),u.push(k.filter(n3))}}return h}}function n3(t){return t.length>1}function i3(t,e){return((t=t.x)[0]<0?t[1]-Ot-vt:Ot-t[1])-((e=e.x)[0]<0?e[1]-Ot-vt:Ot-e[1])}const xc=o1(function(){return!0},r3,a3,[-Mt,-Ot]);function r3(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var l=o>0?Mt:-Mt,f=Ct(o-e);Ct(f-Mt)<vt?(t.point(e,n=(n+a)/2>0?Ot:-Ot),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),r=0):i!==l&&f>=Mt&&(Ct(e-i)<vt&&(e-=i*vt),Ct(o-l)<vt&&(o-=l*vt),n=o3(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),r=0),t.point(e=o,n=a),i=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function o3(t,e,n,i){var r,o,a=yt(t-n);return Ct(a)>vt?fr((yt(e)*(o=kt(i))*yt(n)-yt(i)*(r=kt(e))*yt(t))/(r*o*a)):(e+i)/2}function a3(t,e,n,i){var r;if(t==null)r=n*Ot,i.point(-Mt,r),i.point(0,r),i.point(Mt,r),i.point(Mt,0),i.point(Mt,-r),i.point(0,-r),i.point(-Mt,-r),i.point(-Mt,0),i.point(-Mt,r);else if(Ct(t[0]-e[0])>vt){var o=t[0]<e[0]?Mt:-Mt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function l3(t){var e=kt(t),n=6*Pt,i=e>0,r=Ct(e)>vt;function o(u,c,h,p){t3(p,t,n,h,u,c)}function a(u,c){return kt(u)*kt(c)>e}function l(u){var c,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(g,_){var b=[g,_],v,w=a(g,_),k=i?w?0:s(g,_):w?s(g+(g<0?Mt:-Mt),_):0;if(!c&&(d=p=w)&&u.lineStart(),w!==p&&(v=f(c,b),(!v||ea(c,v)||ea(b,v))&&(b[2]=1)),w!==p)m=0,w?(u.lineStart(),v=f(b,c),u.point(v[0],v[1])):(v=f(c,b),u.point(v[0],v[1],2),u.lineEnd()),c=v;else if(r&&c&&i^w){var x;!(k&h)&&(x=f(b,c,!0))&&(m=0,i?(u.lineStart(),u.point(x[0][0],x[0][1]),u.point(x[1][0],x[1][1]),u.lineEnd()):(u.point(x[1][0],x[1][1]),u.lineEnd(),u.lineStart(),u.point(x[0][0],x[0][1],3)))}w&&(!c||!ea(c,b))&&u.point(b[0],b[1]),c=b,p=w,h=k},lineEnd:function(){p&&u.lineEnd(),c=null},clean:function(){return m|(d&&p)<<1}}}function f(u,c,h){var p=Zi(u),d=Zi(c),m=[1,0,0],g=_a(p,d),_=Lo(g,g),b=g[0],v=_-b*b;if(!v)return!h&&u;var w=e*_/v,k=-e*b/v,x=_a(m,g),S=Io(m,w),T=Io(g,k);Xl(S,T);var $=x,F=Lo(S,$),A=Lo($,$),L=F*F-A*(Lo(S,S)-1);if(!(L<0)){var R=_e(L),W=Io($,(-F-R)/A);if(Xl(W,S),W=Xf(W),!h)return W;var C=u[0],B=c[0],z=u[1],Q=c[1],j;B<C&&(j=C,C=B,B=j);var X=B-C,O=Ct(X-Mt)<vt,Y=O||X<vt;if(!O&&Q<z&&(j=z,z=Q,Q=j),Y?O?z+Q>0^W[1]<(Ct(W[0]-C)<vt?z:Q):z<=W[1]&&W[1]<=Q:X>Mt^(C<=W[0]&&W[0]<=B)){var J=Io($,(-F+R)/A);return Xl(J,S),[W,Xf(J)]}}}function s(u,c){var h=i?t:Mt-t,p=0;return u<-h?p|=1:u>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return o1(a,l,o,i?[0,-t]:[-Mt,t-Mt])}function f3(t,e,n,i,r,o){var a=t[0],l=t[1],f=e[0],s=e[1],u=0,c=1,h=f-a,p=s-l,d;if(d=n-a,!(!h&&d>0)){if(d/=h,h<0){if(d<u)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>u&&(u=d)}if(d=r-a,!(!h&&d<0)){if(d/=h,h<0){if(d>c)return;d>u&&(u=d)}else if(h>0){if(d<u)return;d<c&&(c=d)}if(d=i-l,!(!p&&d>0)){if(d/=p,p<0){if(d<u)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>u&&(u=d)}if(d=o-l,!(!p&&d<0)){if(d/=p,p<0){if(d>c)return;d>u&&(u=d)}else if(p>0){if(d<u)return;d<c&&(c=d)}return u>0&&(t[0]=a+u*h,t[1]=l+u*p),c<1&&(e[0]=a+c*h,e[1]=l+c*p),!0}}}}}var Mr=1e9,Po=-Mr;function a1(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,c,h){var p=0,d=0;if(s==null||(p=a(s,c))!==(d=a(u,c))||f(s,u)<0^c>0)do h.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+c+4)%4)!==d);else h.point(u[0],u[1])}function a(s,u){return Ct(s[0]-t)<vt?u>0?0:3:Ct(s[0]-n)<vt?u>0?2:1:Ct(s[1]-e)<vt?u>0?1:0:u>0?3:2}function l(s,u){return f(s.x,u.x)}function f(s,u){var c=a(s,1),h=a(u,1);return c!==h?c-h:c===0?u[1]-s[1]:c===1?s[0]-u[0]:c===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,c=i1(),h,p,d,m,g,_,b,v,w,k,x,S={point:T,lineStart:L,lineEnd:R,polygonStart:F,polygonEnd:A};function T(C,B){r(C,B)&&u.point(C,B)}function $(){for(var C=0,B=0,z=p.length;B<z;++B)for(var Q=p[B],j=1,X=Q.length,O=Q[0],Y,J,lt=O[0],et=O[1];j<X;++j)Y=lt,J=et,O=Q[j],lt=O[0],et=O[1],J<=i?et>i&&(lt-Y)*(i-J)>(et-J)*(t-Y)&&++C:et<=i&&(lt-Y)*(i-J)<(et-J)*(t-Y)&&--C;return C}function F(){u=c,h=[],p=[],x=!0}function A(){var C=$(),B=x&&C,z=(h=d0(h)).length;(B||z)&&(s.polygonStart(),B&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),z&&r1(h,l,C,o,s),s.polygonEnd()),u=s,h=p=d=null}function L(){S.point=W,p&&p.push(d=[]),k=!0,w=!1,b=v=NaN}function R(){h&&(W(m,g),_&&w&&c.rejoin(),h.push(c.result())),S.point=T,w&&u.lineEnd()}function W(C,B){var z=r(C,B);if(p&&d.push([C,B]),k)m=C,g=B,_=z,k=!1,z&&(u.lineStart(),u.point(C,B));else if(z&&w)u.point(C,B);else{var Q=[b=Math.max(Po,Math.min(Mr,b)),v=Math.max(Po,Math.min(Mr,v))],j=[C=Math.max(Po,Math.min(Mr,C)),B=Math.max(Po,Math.min(Mr,B))];f3(Q,j,t,e,n,i)?(w||(u.lineStart(),u.point(Q[0],Q[1])),u.point(j[0],j[1]),z||u.lineEnd(),x=!1):z&&(u.lineStart(),u.point(C,B),x=!1)}b=C,v=B,w=z}return S}}const Qf=t=>t;var Zl=new hi,Jf=new hi,l1,f1,ts,es,Ln={point:Ae,lineStart:Ae,lineEnd:Ae,polygonStart:function(){Ln.lineStart=s3,Ln.lineEnd=c3},polygonEnd:function(){Ln.lineStart=Ln.lineEnd=Ln.point=Ae,Zl.add(Ct(Jf)),Jf=new hi},result:function(){var t=Zl/2;return Zl=new hi,t}};function s3(){Ln.point=u3}function u3(t,e){Ln.point=s1,l1=ts=t,f1=es=e}function s1(t,e){Jf.add(es*t-ts*e),ts=t,es=e}function c3(){s1(l1,f1)}const kc=Ln;var Ki=1/0,ya=Ki,Yr=-Ki,wa=Yr,h3={point:d3,lineStart:Ae,lineEnd:Ae,polygonStart:Ae,polygonEnd:Ae,result:function(){var t=[[Ki,ya],[Yr,wa]];return Yr=wa=-(ya=Ki=1/0),t}};function d3(t,e){t<Ki&&(Ki=t),t>Yr&&(Yr=t),e<ya&&(ya=e),e>wa&&(wa=e)}const va=h3;var ns=0,is=0,Sr=0,xa=0,ka=0,Ii=0,rs=0,os=0,Tr=0,u1,c1,Ze,Ke,Oe={point:_i,lineStart:Mc,lineEnd:Sc,polygonStart:function(){Oe.lineStart=g3,Oe.lineEnd=b3},polygonEnd:function(){Oe.point=_i,Oe.lineStart=Mc,Oe.lineEnd=Sc},result:function(){var t=Tr?[rs/Tr,os/Tr]:Ii?[xa/Ii,ka/Ii]:Sr?[ns/Sr,is/Sr]:[NaN,NaN];return ns=is=Sr=xa=ka=Ii=rs=os=Tr=0,t}};function _i(t,e){ns+=t,is+=e,++Sr}function Mc(){Oe.point=p3}function p3(t,e){Oe.point=m3,_i(Ze=t,Ke=e)}function m3(t,e){var n=t-Ze,i=e-Ke,r=_e(n*n+i*i);xa+=r*(Ze+t)/2,ka+=r*(Ke+e)/2,Ii+=r,_i(Ze=t,Ke=e)}function Sc(){Oe.point=_i}function g3(){Oe.point=_3}function b3(){h1(u1,c1)}function _3(t,e){Oe.point=h1,_i(u1=Ze=t,c1=Ke=e)}function h1(t,e){var n=t-Ze,i=e-Ke,r=_e(n*n+i*i);xa+=r*(Ze+t)/2,ka+=r*(Ke+e)/2,Ii+=r,r=Ke*t-Ze*e,rs+=r*(Ze+t),os+=r*(Ke+e),Tr+=r*3,_i(Ze=t,Ke=e)}const Tc=Oe;function d1(t){this._context=t}d1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,ve);break}}},result:Ae};var as=new hi,Kl,p1,m1,Cr,$r,Ma={point:Ae,lineStart:function(){Ma.point=y3},lineEnd:function(){Kl&&g1(p1,m1),Ma.point=Ae},polygonStart:function(){Kl=!0},polygonEnd:function(){Kl=null},result:function(){var t=+as;return as=new hi,t}};function y3(t,e){Ma.point=g1,p1=Cr=t,m1=$r=e}function g1(t,e){Cr-=t,$r-=e,as.add(_e(Cr*Cr+$r*$r)),Cr=t,$r=e}const Cc=Ma;let $c,Sa,Ac,Ec;class Nc{constructor(e){this._append=e==null?b1:w3(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Ac||this._append!==Sa){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Ac=i,Sa=this._append,Ec=this._,this._=r}this._+=Ec;break}}}result(){const e=this._;return this._="",e.length?e:null}}function b1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function w3(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return b1;if(e!==$c){const n=10**e;$c=e,Sa=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return Sa}function Ja(t,e){let n=3,i=4.5,r,o;function a(l){return l&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),ei(l,r(o))),o.result()}return a.area=function(l){return ei(l,r(kc)),kc.result()},a.measure=function(l){return ei(l,r(Cc)),Cc.result()},a.bounds=function(l){return ei(l,r(va)),va.result()},a.centroid=function(l){return ei(l,r(Tc)),Tc.result()},a.projection=function(l){return arguments.length?(r=l==null?(t=null,Qf):(t=l).stream,a):t},a.context=function(l){return arguments.length?(o=l==null?(e=null,new Nc(n)):new d1(e=l),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(o.pointRadius(+l),+l),a):i},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const f=Math.floor(l);if(!(f>=0))throw new RangeError(`invalid digits: ${l}`);n=f}return e===null&&(o=new Nc(n)),a},a.projection(t).digits(n).context(e)}function ls(t){return{stream:tl(t)}}function tl(t){return function(e){var n=new fs;for(var i in t)n[i]=t[i];return n.stream=e,n}}function fs(){}fs.prototype={constructor:fs,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ys(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),ei(n,t.stream(va)),e(va.result()),i!=null&&t.clipExtent(i),t}function Hs(t,e,n){return Ys(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([l,f])},n)}function _1(t,e,n){return Hs(t,[[0,0],e],n)}function y1(t,e,n){return Ys(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];t.scale(150*o).translate([a,l])},n)}function w1(t,e,n){return Ys(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],l=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}var Dc=16,v3=kt(30*Pt);function Fc(t,e){return+e?k3(t,e):x3(t)}function x3(t){return tl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function k3(t,e){function n(i,r,o,a,l,f,s,u,c,h,p,d,m,g){var _=s-i,b=u-r,v=_*_+b*b;if(v>4*e&&m--){var w=a+h,k=l+p,x=f+d,S=_e(w*w+k*k+x*x),T=De(x/=S),$=Ct(Ct(x)-1)<vt||Ct(o-c)<vt?(o+c)/2:xn(k,w),F=t($,T),A=F[0],L=F[1],R=A-i,W=L-r,C=b*R-_*W;(C*C/v>e||Ct((_*R+b*W)/v-.5)>.3||a*h+l*p+f*d<v3)&&(n(i,r,o,a,l,f,A,L,$,w/=S,k/=S,x,m,g),g.point(A,L),n(A,L,$,w,k,x,s,u,c,h,p,d,m,g))}}return function(i){var r,o,a,l,f,s,u,c,h,p,d,m,g={point:_,lineStart:b,lineEnd:w,polygonStart:function(){i.polygonStart(),g.lineStart=k},polygonEnd:function(){i.polygonEnd(),g.lineStart=b}};function _(T,$){T=t(T,$),i.point(T[0],T[1])}function b(){c=NaN,g.point=v,i.lineStart()}function v(T,$){var F=Zi([T,$]),A=t(T,$);n(c,h,u,p,d,m,c=A[0],h=A[1],u=T,p=F[0],d=F[1],m=F[2],Dc,i),i.point(c,h)}function w(){g.point=_,i.lineEnd()}function k(){b(),g.point=x,g.lineEnd=S}function x(T,$){v(r=T,$),o=c,a=h,l=p,f=d,s=m,g.point=v}function S(){n(c,h,u,p,d,m,o,a,r,l,f,s,Dc,i),g.lineEnd=w,w()}return g}}var M3=tl({point:function(t,e){this.stream.point(t*Pt,e*Pt)}});function S3(t){return tl({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function T3(t,e,n,i,r){function o(a,l){return a*=i,l*=r,[e+t*a,n-t*l]}return o.invert=function(a,l){return[(a-e)/t*i,(n-l)/t*r]},o}function Lc(t,e,n,i,r,o){if(!o)return T3(t,e,n,i,r);var a=kt(o),l=yt(o),f=a*t,s=l*t,u=a/t,c=l/t,h=(l*n-a*e)/t,p=(l*e+a*n)/t;function d(m,g){return m*=i,g*=r,[f*m-s*g+e,n-s*m-f*g]}return d.invert=function(m,g){return[i*(u*m-c*g+h),r*(p-c*m-u*g)]},d}function Xn(t){return v1(function(){return t})()}function v1(t){var e,n=150,i=480,r=250,o=0,a=0,l=0,f=0,s=0,u,c=0,h=1,p=1,d=null,m=xc,g=null,_,b,v,w=Qf,k=.5,x,S,T,$,F;function A(C){return T(C[0]*Pt,C[1]*Pt)}function L(C){return C=T.invert(C[0],C[1]),C&&[C[0]*le,C[1]*le]}A.stream=function(C){return $&&F===C?$:$=M3(S3(u)(m(x(w(F=C)))))},A.preclip=function(C){return arguments.length?(m=C,d=void 0,W()):m},A.postclip=function(C){return arguments.length?(w=C,g=_=b=v=null,W()):w},A.clipAngle=function(C){return arguments.length?(m=+C?l3(d=C*Pt):(d=null,xc),W()):d*le},A.clipExtent=function(C){return arguments.length?(w=C==null?(g=_=b=v=null,Qf):a1(g=+C[0][0],_=+C[0][1],b=+C[1][0],v=+C[1][1]),W()):g==null?null:[[g,_],[b,v]]},A.scale=function(C){return arguments.length?(n=+C,R()):n},A.translate=function(C){return arguments.length?(i=+C[0],r=+C[1],R()):[i,r]},A.center=function(C){return arguments.length?(o=C[0]%360*Pt,a=C[1]%360*Pt,R()):[o*le,a*le]},A.rotate=function(C){return arguments.length?(l=C[0]%360*Pt,f=C[1]%360*Pt,s=C.length>2?C[2]%360*Pt:0,R()):[l*le,f*le,s*le]},A.angle=function(C){return arguments.length?(c=C%360*Pt,R()):c*le},A.reflectX=function(C){return arguments.length?(h=C?-1:1,R()):h<0},A.reflectY=function(C){return arguments.length?(p=C?-1:1,R()):p<0},A.precision=function(C){return arguments.length?(x=Fc(S,k=C*C),W()):_e(k)},A.fitExtent=function(C,B){return Hs(A,C,B)},A.fitSize=function(C,B){return _1(A,C,B)},A.fitWidth=function(C,B){return y1(A,C,B)},A.fitHeight=function(C,B){return w1(A,C,B)};function R(){var C=Lc(n,0,0,h,p,c).apply(null,e(o,a)),B=Lc(n,i-C[0],r-C[1],h,p,c);return u=n1(l,f,s),S=Zf(e,B),T=Zf(u,S),x=Fc(S,k),W()}function W(){return $=F=null,A}return function(){return e=t.apply(this,arguments),A.invert=e.invert&&L,R()}}function Vs(t){var e=0,n=Mt/3,i=v1(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*Pt,n=o[1]*Pt):[e*le,n*le]},r}function C3(t){var e=kt(t);function n(i,r){return[i*e,yt(r)/e]}return n.invert=function(i,r){return[i/e,De(r*e)]},n}function $3(t,e){var n=yt(t),i=(n+yt(e))/2;if(Ct(i)<vt)return C3(t);var r=1+n*(2*i-n),o=_e(r)/i;function a(l,f){var s=_e(r-2*i*yt(f))/i;return[s*yt(l*=i),o-s*kt(l)]}return a.invert=function(l,f){var s=o-f,u=xn(l,Ct(s))*$e(s);return s*i<0&&(u-=Mt*$e(l)*$e(s)),[u/i,De((r-(l*l+s*s)*i*i)/(2*i))]},a}function Ta(){return Vs($3).scale(155.424).center([0,33.6442])}function x1(){return Ta().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function A3(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function E3(){var t,e,n=x1(),i,r=Ta().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Ta().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,s={point:function(h,p){f=[h,p]}};function u(h){var p=h[0],d=h[1];return f=null,i.point(p,d),f||(o.point(p,d),f)||(l.point(p,d),f)}u.invert=function(h){var p=n.scale(),d=n.translate(),m=(h[0]-d[0])/p,g=(h[1]-d[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?r:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=A3([n.stream(e=h),r.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),c()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),d=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(s),o=r.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+vt,m+.12*p+vt],[d-.214*p-vt,m+.234*p-vt]]).stream(s),l=a.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+vt,m+.166*p+vt],[d-.115*p-vt,m+.234*p-vt]]).stream(s),c()},u.fitExtent=function(h,p){return Hs(u,h,p)},u.fitSize=function(h,p){return _1(u,h,p)},u.fitWidth=function(h,p){return y1(u,h,p)},u.fitHeight=function(h,p){return w1(u,h,p)};function c(){return t=e=null,u}return u.scale(1070)}function k1(t){return function(e,n){var i=kt(e),r=kt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*yt(e),o*yt(n)]}}function ao(t){return function(e,n){var i=_e(e*e+n*n),r=t(i),o=yt(r),a=kt(r);return[xn(e*o,i*a),De(i&&n*o/i)]}}var M1=k1(function(t){return _e(2/(1+t))});M1.invert=ao(function(t){return 2*De(t/2)});function N3(){return Xn(M1).scale(124.75).clipAngle(180-.001)}var S1=k1(function(t){return(t=e1(t))&&t/yt(t)});S1.invert=ao(function(t){return t});function D3(){return Xn(S1).scale(79.4188).clipAngle(180-.001)}function el(t,e){return[t,ga(Ws((Ot+e)/2))]}el.invert=function(t,e){return[t,2*fr(t1(e))-Ot]};function F3(){return T1(el).scale(961/ve)}function T1(t){var e=Xn(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,l,f,s;e.scale=function(c){return arguments.length?(i(c),u()):i()},e.translate=function(c){return arguments.length?(r(c),u()):r()},e.center=function(c){return arguments.length?(n(c),u()):n()},e.clipExtent=function(c){return arguments.length?(c==null?a=l=f=s=null:(a=+c[0][0],l=+c[0][1],f=+c[1][0],s=+c[1][1]),u()):a==null?null:[[a,l],[f,s]]};function u(){var c=Mt*i(),h=e(Jv(e.rotate()).invert([0,0]));return o(a==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===el?[[Math.max(h[0]-c,a),l],[Math.min(h[0]+c,f),s]]:[[a,Math.max(h[1]-c,l)],[f,Math.min(h[1]+c,s)]])}return u()}function Oo(t){return Ws((Ot+t)/2)}function L3(t,e){var n=kt(t),i=t===e?yt(t):ga(n/kt(e))/ga(Oo(e)/Oo(t)),r=n*Gl(Oo(t),i)/i;if(!i)return el;function o(a,l){r>0?l<-Ot+vt&&(l=-Ot+vt):l>Ot-vt&&(l=Ot-vt);var f=r/Gl(Oo(l),i);return[f*yt(i*a),r-f*kt(i*a)]}return o.invert=function(a,l){var f=r-l,s=$e(i)*_e(a*a+f*f),u=xn(a,Ct(f))*$e(f);return f*i<0&&(u-=Mt*$e(a)*$e(f)),[u/i,2*fr(Gl(r/s,1/i))-Ot]},o}function I3(){return Vs(L3).scale(109.5).parallels([30,30])}function Ca(t,e){return[t,e]}Ca.invert=Ca;function R3(){return Xn(Ca).scale(152.63)}function P3(t,e){var n=kt(t),i=t===e?yt(t):(n-kt(e))/(e-t),r=n/i+t;if(Ct(i)<vt)return Ca;function o(a,l){var f=r-l,s=i*a;return[f*yt(s),r-f*kt(s)]}return o.invert=function(a,l){var f=r-l,s=xn(a,Ct(f))*$e(f);return f*i<0&&(s-=Mt*$e(a)*$e(f)),[s/i,r-$e(i)*_e(a*a+f*f)]},o}function O3(){return Vs(P3).scale(131.154).center([0,13.9389])}var Fr=1.340264,Lr=-.081106,Ir=893e-6,Rr=.003796,$a=_e(3)/2,U3=12;function C1(t,e){var n=De($a*yt(e)),i=n*n,r=i*i*i;return[t*kt(n)/($a*(Fr+3*Lr*i+r*(7*Ir+9*Rr*i))),n*(Fr+Lr*i+r*(Ir+Rr*i))]}C1.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,l,f;o<U3&&(l=n*(Fr+Lr*i+r*(Ir+Rr*i))-e,f=Fr+3*Lr*i+r*(7*Ir+9*Rr*i),n-=a=l/f,i=n*n,r=i*i*i,!(Ct(a)<J0));++o);return[$a*t*(Fr+3*Lr*i+r*(7*Ir+9*Rr*i))/kt(n),De(yt(n)/$a)]};function z3(){return Xn(C1).scale(177.158)}function $1(t,e){var n=kt(e),i=kt(t)*n;return[n*yt(t)/i,yt(e)/i]}$1.invert=ao(fr);function B3(){return Xn($1).scale(144.049).clipAngle(60)}function A1(t,e){return[kt(e)*yt(t),yt(e)]}A1.invert=ao(De);function q3(){return Xn(A1).scale(249.5).clipAngle(90+vt)}function E1(t,e){var n=kt(e),i=1+kt(t)*n;return[n*yt(t)/i,yt(e)/i]}E1.invert=ao(function(t){return 2*fr(t)});function W3(){return Xn(E1).scale(250).clipAngle(142)}function N1(t,e){return[ga(Ws((Ot+e)/2)),-t]}N1.invert=function(t,e){return[-e,2*fr(t1(t))-Ot]};function Y3(){var t=T1(N1),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function ln(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function nl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ss=Symbol("implicit");function Gs(){var t=new di,e=[],n=[],i=ss;function r(o){let a=t.get(o);if(a===void 0){if(i!==ss)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new di;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Gs(e,n).unknown(i)},ln.apply(r,arguments),r}function il(){var t=Gs().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,l=!1,f=0,s=0,u=.5;delete t.unknown;function c(){var h=e().length,p=r<i,d=p?r:i,m=p?i:r;o=(m-d)/Math.max(1,h-f+s*2),l&&(o=Math.floor(o)),d+=(m-d-o*(h-f))*u,a=o*(1-f),l&&(d=Math.round(d),a=Math.round(a));var g=Lf(h).map(function(_){return d+o*_});return n(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),c()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,c()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,l=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(l=!!h,c()):l},t.padding=function(h){return arguments.length?(f=Math.min(1,s=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(s=+h,c()):s},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),c()):u},t.copy=function(){return il(e(),[i,r]).round(l).paddingInner(f).paddingOuter(s).align(u)},ln.apply(c(),arguments)}function D1(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return D1(e())},t}function H3(){return D1(il.apply(null,arguments).paddingInner(1))}function V3(t){return function(){return t}}function us(t){return+t}var Ic=[0,1];function Ee(t){return t}function cs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:V3(isNaN(e)?NaN:.5)}function G3(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function X3(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=cs(r,i),o=n(a,o)):(i=cs(i,r),o=n(o,a)),function(l){return o(i(l))}}function j3(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=cs(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(l){var f=Wa(t,l,1,i)-1;return o[f](r[f](l))}}function lo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rl(){var t=Ic,e=Ic,n=oo,i,r,o,a=Ee,l,f,s;function u(){var h=Math.min(t.length,e.length);return a!==Ee&&(a=G3(t[0],t[h-1])),l=h>2?j3:X3,f=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=l(t.map(i),e,n)))(i(a(h)))}return c.invert=function(h){return a(r((s||(s=l(e,t.map(i),ie)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,us),u()):t.slice()},c.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},c.rangeRound=function(h){return e=Array.from(h),n=Ps,u()},c.clamp=function(h){return arguments.length?(a=h?!0:Ee,u()):a!==Ee},c.interpolate=function(h){return arguments.length?(n=h,u()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,p){return i=h,r=p,u()}}function F1(){return rl()(Ee,Ee)}function Z3(t,e,n,i){var r=Df(t,e,n),o;switch(i=Wr(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=Kv(r,a))&&(i.precision=o),Q0(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=Qv(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=Zv(r))&&(i.precision=o-(i.type==="%")*2);break}}return lr(i)}function fo(t){var e=t.domain;return t.ticks=function(n){var i=e();return Ur(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return Z3(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],l=i[o],f,s,u=10;for(l<a&&(s=a,a=l,l=s,s=r,r=o,o=s);u-- >0;){if(s=la(a,l,n),s===f)return i[r]=a,i[o]=l,e(i);if(s>0)a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s;else if(s<0)a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s;else break;f=s}return t},t}function Xs(){var t=F1();return t.copy=function(){return lo(t,Xs())},ln.apply(t,arguments),fo(t)}function L1(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,us),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return L1(t).unknown(e)},t=arguments.length?Array.from(t,us):[0,1],fo(n)}function I1(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function Rc(t){return Math.log(t)}function Pc(t){return Math.exp(t)}function K3(t){return-Math.log(-t)}function Q3(t){return-Math.exp(-t)}function J3(t){return isFinite(t)?+("1e"+t):t<0?0:t}function t6(t){return t===10?J3:t===Math.E?Math.exp:e=>Math.pow(t,e)}function e6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Oc(t){return(e,n)=>-t(-e,n)}function R1(t){const e=t(Rc,Pc),n=e.domain;let i=10,r,o;function a(){return r=e6(i),o=t6(i),n()[0]<0?(r=Oc(r),o=Oc(o),t(K3,Q3)):t(Rc,Pc),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const f=n();let s=f[0],u=f[f.length-1];const c=u<s;c&&([s,u]=[u,s]);let h=r(s),p=r(u),d,m;const g=l==null?10:+l;let _=[];if(!(i%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(d=1;d<i;++d)if(m=h<0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}}else for(;h<=p;++h)for(d=i-1;d>=1;--d)if(m=h>0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}_.length*2<g&&(_=Ur(s,u,g))}else _=Ur(h,p,Math.min(p-h,g)).map(o);return c?_.reverse():_},e.tickFormat=(l,f)=>{if(l==null&&(l=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Wr(f)).precision==null&&(f.trim=!0),f=lr(f)),l===1/0)return f;const s=Math.max(1,i*l/e.ticks().length);return u=>{let c=u/o(Math.round(r(u)));return c*i<i-.5&&(c*=i),c<=s?f(u):""}},e.nice=()=>n(I1(n(),{floor:l=>o(Math.floor(r(l))),ceil:l=>o(Math.ceil(r(l)))})),e}function P1(){const t=R1(rl()).domain([1,10]);return t.copy=()=>lo(t,P1()).base(t.base()),ln.apply(t,arguments),t}function Uc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function zc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function O1(t){var e=1,n=t(Uc(e),zc(e));return n.constant=function(i){return arguments.length?t(Uc(e=+i),zc(e)):e},fo(n)}function U1(){var t=O1(rl());return t.copy=function(){return lo(t,U1()).constant(t.constant())},ln.apply(t,arguments)}function Bc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function n6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function i6(t){return t<0?-t*t:t*t}function z1(t){var e=t(Ee,Ee),n=1;function i(){return n===1?t(Ee,Ee):n===.5?t(n6,i6):t(Bc(n),Bc(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},fo(e)}function B1(){var t=z1(rl());return t.copy=function(){return lo(t,B1()).exponent(t.exponent())},ln.apply(t,arguments),t}function q1(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=jb(t,a/l);return o}function o(a){return a==null||isNaN(a=+a)?i:e[Wa(n,a)]}return o.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ge),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return q1().domain(t).range(e).unknown(i)},ln.apply(o,arguments)}function W1(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[Wa(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return W1().domain(t).range(e).unknown(n)},ln.apply(r,arguments)}const Ql=new Date,Jl=new Date;function Wt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),l=r.ceil(o);return o-a<l-o?a:l},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,l)=>{const f=[];if(o=r.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return f;let s;do f.push(s=new Date(+o)),e(o,l),t(o);while(s<o&&o<a);return f},r.filter=o=>Wt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!o(a););else for(;--l>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(Ql.setTime(+o),Jl.setTime(+a),t(Ql),t(Jl),Math.floor(n(Ql,Jl))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Aa=Wt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Aa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Aa);Aa.range;const bn=1e3,Ne=bn*60,_n=Ne*60,kn=_n*24,js=kn*7,qc=kn*30,tf=kn*365,Qe=Wt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*bn)},(t,e)=>(e-t)/bn,t=>t.getUTCSeconds());Qe.range;const ol=Wt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bn)},(t,e)=>{t.setTime(+t+e*Ne)},(t,e)=>(e-t)/Ne,t=>t.getMinutes());ol.range;const so=Wt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ne)},(t,e)=>(e-t)/Ne,t=>t.getUTCMinutes());so.range;const al=Wt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bn-t.getMinutes()*Ne)},(t,e)=>{t.setTime(+t+e*_n)},(t,e)=>(e-t)/_n,t=>t.getHours());al.range;const uo=Wt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*_n)},(t,e)=>(e-t)/_n,t=>t.getUTCHours());uo.range;const ki=Wt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ne)/kn,t=>t.getDate()-1);ki.range;const ll=Wt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kn,t=>t.getUTCDate()-1);ll.range;const fl=Wt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/kn,t=>Math.floor(t/kn));fl.range;function Mi(t){return Wt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ne)/js)}const Qi=Mi(0),Hr=Mi(1),Y1=Mi(2),H1=Mi(3),yi=Mi(4),V1=Mi(5),G1=Mi(6);Qi.range;Hr.range;Y1.range;H1.range;yi.range;V1.range;G1.range;function Si(t){return Wt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/js)}const Ji=Si(0),Vr=Si(1),X1=Si(2),j1=Si(3),wi=Si(4),Z1=Si(5),K1=Si(6);Ji.range;Vr.range;X1.range;j1.range;wi.range;Z1.range;K1.range;const co=Wt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());co.range;const ho=Wt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ho.range;const Be=Wt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Be.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Be.range;const qe=Wt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());qe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});qe.range;function Q1(t,e,n,i,r,o){const a=[[Qe,1,bn],[Qe,5,5*bn],[Qe,15,15*bn],[Qe,30,30*bn],[o,1,Ne],[o,5,5*Ne],[o,15,15*Ne],[o,30,30*Ne],[r,1,_n],[r,3,3*_n],[r,6,6*_n],[r,12,12*_n],[i,1,kn],[i,2,2*kn],[n,1,js],[e,1,qc],[e,3,3*qc],[t,1,tf]];function l(s,u,c){const h=u<s;h&&([s,u]=[u,s]);const p=c&&typeof c.range=="function"?c:f(s,u,c),d=p?p.range(s,+u+1):[];return h?d.reverse():d}function f(s,u,c){const h=Math.abs(u-s)/c,p=qa(([,,g])=>g).right(a,h);if(p===a.length)return t.every(Df(s/tf,u/tf,c));if(p===0)return Aa.every(Math.max(Df(s,u,c),1));const[d,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return d.every(m)}return[l,f]}const[r6,J1]=Q1(qe,ho,Ji,fl,uo,so),[o6,a6]=Q1(Be,co,Qi,ki,al,ol);function ef(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function gr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function l6(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,l=t.months,f=t.shortMonths,s=br(r),u=_r(r),c=br(o),h=_r(o),p=br(a),d=_r(a),m=br(l),g=_r(l),_=br(f),b=_r(f),v={a:z,A:Q,b:j,B:X,c:null,d:Xc,e:Xc,f:E6,g:z6,G:q6,H:C6,I:$6,j:A6,L:tp,m:N6,M:D6,p:O,q:Y,Q:Kc,s:Qc,S:F6,u:L6,U:I6,V:R6,w:P6,W:O6,x:null,X:null,y:U6,Y:B6,Z:W6,"%":Zc},w={a:J,A:lt,b:et,B:Z,c:null,d:jc,e:jc,f:G6,g:i5,G:o5,H:Y6,I:H6,j:V6,L:np,m:X6,M:j6,p:q,q:N,Q:Kc,s:Qc,S:Z6,u:K6,U:Q6,V:J6,w:t5,W:e5,x:null,X:null,y:n5,Y:r5,Z:a5,"%":Zc},k={a:F,A,b:L,B:R,c:W,d:Vc,e:Vc,f:k6,g:Hc,G:Yc,H:Gc,I:Gc,j:y6,L:x6,m:_6,M:w6,p:$,q:b6,Q:S6,s:T6,S:v6,u:h6,U:d6,V:p6,w:c6,W:m6,x:C,X:B,y:Hc,Y:Yc,Z:g6,"%":M6};v.x=x(n,v),v.X=x(i,v),v.c=x(e,v),w.x=x(n,w),w.X=x(i,w),w.c=x(e,w);function x(E,P){return function(tt){var U=[],dt=-1,nt=0,mt=E.length,ot,rt,Vt;for(tt instanceof Date||(tt=new Date(+tt));++dt<mt;)E.charCodeAt(dt)===37&&(U.push(E.slice(nt,dt)),(rt=Wc[ot=E.charAt(++dt)])!=null?ot=E.charAt(++dt):rt=ot==="e"?" ":"0",(Vt=P[ot])&&(ot=Vt(tt,rt)),U.push(ot),nt=dt+1);return U.push(E.slice(nt,dt)),U.join("")}}function S(E,P){return function(tt){var U=gr(1900,void 0,1),dt=T(U,E,tt+="",0),nt,mt;if(dt!=tt.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(P&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(nt=nf(gr(U.y,0,1)),mt=nt.getUTCDay(),nt=mt>4||mt===0?Vr.ceil(nt):Vr(nt),nt=ll.offset(nt,(U.V-1)*7),U.y=nt.getUTCFullYear(),U.m=nt.getUTCMonth(),U.d=nt.getUTCDate()+(U.w+6)%7):(nt=ef(gr(U.y,0,1)),mt=nt.getDay(),nt=mt>4||mt===0?Hr.ceil(nt):Hr(nt),nt=ki.offset(nt,(U.V-1)*7),U.y=nt.getFullYear(),U.m=nt.getMonth(),U.d=nt.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),mt="Z"in U?nf(gr(U.y,0,1)).getUTCDay():ef(gr(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(mt+5)%7:U.w+U.U*7-(mt+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,nf(U)):ef(U)}}function T(E,P,tt,U){for(var dt=0,nt=P.length,mt=tt.length,ot,rt;dt<nt;){if(U>=mt)return-1;if(ot=P.charCodeAt(dt++),ot===37){if(ot=P.charAt(dt++),rt=k[ot in Wc?P.charAt(dt++):ot],!rt||(U=rt(E,tt,U))<0)return-1}else if(ot!=tt.charCodeAt(U++))return-1}return U}function $(E,P,tt){var U=s.exec(P.slice(tt));return U?(E.p=u.get(U[0].toLowerCase()),tt+U[0].length):-1}function F(E,P,tt){var U=p.exec(P.slice(tt));return U?(E.w=d.get(U[0].toLowerCase()),tt+U[0].length):-1}function A(E,P,tt){var U=c.exec(P.slice(tt));return U?(E.w=h.get(U[0].toLowerCase()),tt+U[0].length):-1}function L(E,P,tt){var U=_.exec(P.slice(tt));return U?(E.m=b.get(U[0].toLowerCase()),tt+U[0].length):-1}function R(E,P,tt){var U=m.exec(P.slice(tt));return U?(E.m=g.get(U[0].toLowerCase()),tt+U[0].length):-1}function W(E,P,tt){return T(E,e,P,tt)}function C(E,P,tt){return T(E,n,P,tt)}function B(E,P,tt){return T(E,i,P,tt)}function z(E){return a[E.getDay()]}function Q(E){return o[E.getDay()]}function j(E){return f[E.getMonth()]}function X(E){return l[E.getMonth()]}function O(E){return r[+(E.getHours()>=12)]}function Y(E){return 1+~~(E.getMonth()/3)}function J(E){return a[E.getUTCDay()]}function lt(E){return o[E.getUTCDay()]}function et(E){return f[E.getUTCMonth()]}function Z(E){return l[E.getUTCMonth()]}function q(E){return r[+(E.getUTCHours()>=12)]}function N(E){return 1+~~(E.getUTCMonth()/3)}return{format:function(E){var P=x(E+="",v);return P.toString=function(){return E},P},parse:function(E){var P=S(E+="",!1);return P.toString=function(){return E},P},utcFormat:function(E){var P=x(E+="",w);return P.toString=function(){return E},P},utcParse:function(E){var P=S(E+="",!0);return P.toString=function(){return E},P}}}var Wc={"-":"",_:" ",0:"0"},te=/^\s*\d+/,f6=/^%/,s6=/[\\^$*+?|[\]().{}]/g;function Tt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function u6(t){return t.replace(s6,"\\$&")}function br(t){return new RegExp("^(?:"+t.map(u6).join("|")+")","i")}function _r(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function c6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function h6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function d6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function p6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function m6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Yc(t,e,n){var i=te.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Hc(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function g6(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function b6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function _6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Vc(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function y6(t,e,n){var i=te.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Gc(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function w6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function v6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function x6(t,e,n){var i=te.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function k6(t,e,n){var i=te.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function M6(t,e,n){var i=f6.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function S6(t,e,n){var i=te.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function T6(t,e,n){var i=te.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Xc(t,e){return Tt(t.getDate(),e,2)}function C6(t,e){return Tt(t.getHours(),e,2)}function $6(t,e){return Tt(t.getHours()%12||12,e,2)}function A6(t,e){return Tt(1+ki.count(Be(t),t),e,3)}function tp(t,e){return Tt(t.getMilliseconds(),e,3)}function E6(t,e){return tp(t,e)+"000"}function N6(t,e){return Tt(t.getMonth()+1,e,2)}function D6(t,e){return Tt(t.getMinutes(),e,2)}function F6(t,e){return Tt(t.getSeconds(),e,2)}function L6(t){var e=t.getDay();return e===0?7:e}function I6(t,e){return Tt(Qi.count(Be(t)-1,t),e,2)}function ep(t){var e=t.getDay();return e>=4||e===0?yi(t):yi.ceil(t)}function R6(t,e){return t=ep(t),Tt(yi.count(Be(t),t)+(Be(t).getDay()===4),e,2)}function P6(t){return t.getDay()}function O6(t,e){return Tt(Hr.count(Be(t)-1,t),e,2)}function U6(t,e){return Tt(t.getFullYear()%100,e,2)}function z6(t,e){return t=ep(t),Tt(t.getFullYear()%100,e,2)}function B6(t,e){return Tt(t.getFullYear()%1e4,e,4)}function q6(t,e){var n=t.getDay();return t=n>=4||n===0?yi(t):yi.ceil(t),Tt(t.getFullYear()%1e4,e,4)}function W6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Tt(e/60|0,"0",2)+Tt(e%60,"0",2)}function jc(t,e){return Tt(t.getUTCDate(),e,2)}function Y6(t,e){return Tt(t.getUTCHours(),e,2)}function H6(t,e){return Tt(t.getUTCHours()%12||12,e,2)}function V6(t,e){return Tt(1+ll.count(qe(t),t),e,3)}function np(t,e){return Tt(t.getUTCMilliseconds(),e,3)}function G6(t,e){return np(t,e)+"000"}function X6(t,e){return Tt(t.getUTCMonth()+1,e,2)}function j6(t,e){return Tt(t.getUTCMinutes(),e,2)}function Z6(t,e){return Tt(t.getUTCSeconds(),e,2)}function K6(t){var e=t.getUTCDay();return e===0?7:e}function Q6(t,e){return Tt(Ji.count(qe(t)-1,t),e,2)}function ip(t){var e=t.getUTCDay();return e>=4||e===0?wi(t):wi.ceil(t)}function J6(t,e){return t=ip(t),Tt(wi.count(qe(t),t)+(qe(t).getUTCDay()===4),e,2)}function t5(t){return t.getUTCDay()}function e5(t,e){return Tt(Vr.count(qe(t)-1,t),e,2)}function n5(t,e){return Tt(t.getUTCFullYear()%100,e,2)}function i5(t,e){return t=ip(t),Tt(t.getUTCFullYear()%100,e,2)}function r5(t,e){return Tt(t.getUTCFullYear()%1e4,e,4)}function o5(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wi(t):wi.ceil(t),Tt(t.getUTCFullYear()%1e4,e,4)}function a5(){return"+0000"}function Zc(){return"%"}function Kc(t){return+t}function Qc(t){return Math.floor(+t/1e3)}var Ni,Zs,po;l5({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function l5(t){return Ni=l6(t),Zs=Ni.format,Ni.parse,po=Ni.utcFormat,Ni.utcParse,Ni}function f5(t){return new Date(t)}function s5(t){return t instanceof Date?+t:+new Date(+t)}function Ks(t,e,n,i,r,o,a,l,f,s){var u=F1(),c=u.invert,h=u.domain,p=s(".%L"),d=s(":%S"),m=s("%I:%M"),g=s("%I %p"),_=s("%a %d"),b=s("%b %d"),v=s("%B"),w=s("%Y");function k(x){return(f(x)<x?p:l(x)<x?d:a(x)<x?m:o(x)<x?g:i(x)<x?r(x)<x?_:b:n(x)<x?v:w)(x)}return u.invert=function(x){return new Date(c(x))},u.domain=function(x){return arguments.length?h(Array.from(x,s5)):h().map(f5)},u.ticks=function(x){var S=h();return t(S[0],S[S.length-1],x??10)},u.tickFormat=function(x,S){return S==null?k:s(S)},u.nice=function(x){var S=h();return(!x||typeof x.range!="function")&&(x=e(S[0],S[S.length-1],x??10)),x?h(I1(S,x)):u},u.copy=function(){return lo(u,Ks(t,e,n,i,r,o,a,l,f,s))},u}function u5(){return ln.apply(Ks(o6,a6,Be,co,Qi,ki,al,ol,Qe,Zs).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function c5(){return ln.apply(Ks(r6,J1,qe,ho,Ji,ll,uo,so,Qe,po).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ul(){var t=0,e=.5,n=1,i=1,r,o,a,l,f,s=Ee,u,c=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(i*m<i*o?l:f),s(c?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(c=!!m,p):c},p.interpolator=function(m){return arguments.length?(s=m,p):s};function d(m){return function(g){var _,b,v;return arguments.length?([_,b,v]=g,s=Za(m,[_,b,v]),p):[s(0),s(.5),s(1)]}}return p.range=d(oo),p.rangeRound=d(Ps),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return u=m,r=m(t),o=m(e),a=m(n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p}}function rp(){var t=fo(ul()(Ee));return t.copy=function(){return sl(t,rp())},nl.apply(t,arguments)}function op(){var t=R1(ul()).domain([.1,1,10]);return t.copy=function(){return sl(t,op()).base(t.base())},nl.apply(t,arguments)}function ap(){var t=O1(ul());return t.copy=function(){return sl(t,ap()).constant(t.constant())},nl.apply(t,arguments)}function lp(){var t=z1(ul());return t.copy=function(){return sl(t,lp()).exponent(t.exponent())},nl.apply(t,arguments)}function xt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const h5=xt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),d5=xt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),p5=xt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),m5=xt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),g5=xt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),b5=xt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),_5=xt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),y5=xt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),w5=xt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),v5=xt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),$t=t=>cw(t[t.length-1]);var fp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(xt);const sp=$t(fp);var up=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(xt);const cp=$t(up);var hp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(xt);const dp=$t(hp);var pp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(xt);const mp=$t(pp);var hs=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(xt);const Ea=$t(hs);var gp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(xt);const bp=$t(gp);var ds=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(xt);const Na=$t(ds);var _p=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(xt);const yp=$t(_p);var wp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(xt);const vp=$t(wp);var xp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(xt);const kp=$t(xp);var Mp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(xt);const Sp=$t(Mp);var Tp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(xt);const Cp=$t(Tp);var $p=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(xt);const Ap=$t($p);var Ep=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(xt);const Np=$t(Ep);var Dp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(xt);const Fp=$t(Dp);var Lp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(xt);const Ip=$t(Lp);var Rp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(xt);const Pp=$t(Rp);var Op=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(xt);const Up=$t(Op);var zp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(xt);const Bp=$t(zp);var qp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(xt);const Wp=$t(qp);var Yp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(xt);const Hp=$t(Yp);var Vp=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(xt);const Gp=$t(Vp);var Xp=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(xt);const jp=$t(Xp);var Zp=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(xt);const Kp=$t(Zp);var Qp=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(xt);const Jp=$t(Qp);var tm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(xt);const em=$t(tm);var nm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(xt);const im=$t(nm);function rm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const om=Os(on(300,.5,0),on(-240,.5,1));var am=Os(on(-100,.75,.35),on(80,1.5,.8)),lm=Os(on(260,.75,.35),on(80,1.5,.8)),Uo=on();function fm(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Uo.h=360*t-100,Uo.s=1.5-1.5*e,Uo.l=.8-.9*e,Uo+""}var zo=Wn(),x5=Math.PI/3,k5=Math.PI*2/3;function sm(t){var e;return t=(.5-t)*Math.PI,zo.r=255*(e=Math.sin(t))*e,zo.g=255*(e=Math.sin(t+x5))*e,zo.b=255*(e=Math.sin(t+k5))*e,zo+""}function um(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function cl(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const cm=cl(xt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var hm=cl(xt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),dm=cl(xt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),pm=cl(xt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Xt(t){return function(){return t}}const mm=Math.cos,Qs=Math.min,Da=Math.sin,Yt=Math.sqrt,Jc=1e-12,Fa=Math.PI,hl=2*Fa;function gm(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Z0(e)}function bm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _m(t){this._context=t}_m.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function mo(t){return new _m(t)}function ym(t){return t[0]}function wm(t){return t[1]}function vm(t,e){var n=Xt(!0),i=null,r=mo,o=null,a=gm(l);t=typeof t=="function"?t:t===void 0?ym:Xt(t),e=typeof e=="function"?e:e===void 0?wm:Xt(e);function l(f){var s,u=(f=bm(f)).length,c,h=!1,p;for(i==null&&(o=r(p=a())),s=0;s<=u;++s)!(s<u&&n(c=f[s],s,f))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,f),+e(c,s,f));if(p)return o=null,p+""||null}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Xt(+f),l):t},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Xt(+f),l):e},l.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Xt(!!f),l):n},l.curve=function(f){return arguments.length?(r=f,i!=null&&(o=r(i)),l):r},l.context=function(f){return arguments.length?(f==null?i=o=null:o=r(i=f),l):i},l}function M5(t,e,n){var i=null,r=Xt(!0),o=null,a=mo,l=null,f=gm(s);t=typeof t=="function"?t:t===void 0?ym:Xt(+t),e=typeof e=="function"?e:Xt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?wm:Xt(+n);function s(c){var h,p,d,m=(c=bm(c)).length,g,_=!1,b,v=new Array(m),w=new Array(m);for(o==null&&(l=a(b=f())),h=0;h<=m;++h){if(!(h<m&&r(g=c[h],h,c))===_)if(_=!_)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=h-1;d>=p;--d)l.point(v[d],w[d]);l.lineEnd(),l.areaEnd()}_&&(v[h]=+t(g,h,c),w[h]=+e(g,h,c),l.point(i?+i(g,h,c):v[h],n?+n(g,h,c):w[h]))}if(b)return l=null,b+""||null}function u(){return vm().defined(r).curve(a).context(o)}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Xt(+c),i=null,s):t},s.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Xt(+c),s):t},s.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Xt(+c),s):i},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Xt(+c),n=null,s):e},s.y0=function(c){return arguments.length?(e=typeof c=="function"?c:Xt(+c),s):e},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Xt(+c),s):n},s.lineX0=s.lineY0=function(){return u().x(t).y(e)},s.lineY1=function(){return u().x(t).y(n)},s.lineX1=function(){return u().x(i).y(e)},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Xt(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,o!=null&&(l=a(o)),s):a},s.context=function(c){return arguments.length?(c==null?o=l=null:l=a(o=c),s):o},s}class xm{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function S5(t){return new xm(t,!0)}function T5(t){return new xm(t,!1)}const C5=Yt(3),km={draw(t,e){const n=Yt(e+Qs(e/28,.75))*.59436,i=n/2,r=i*C5;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Gr={draw(t,e){const n=Yt(e/Fa);t.moveTo(n,0),t.arc(0,0,n,0,hl)}},Mm={draw(t,e){const n=Yt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Sm=Yt(1/3),$5=Sm*2,Tm={draw(t,e){const n=Yt(e/$5),i=n*Sm;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Cm={draw(t,e){const n=Yt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},$m={draw(t,e){const n=Yt(e-Qs(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Am={draw(t,e){const n=Yt(e),i=-n/2;t.rect(i,i,n,n)}},Em={draw(t,e){const n=Yt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},A5=.8908130915292852,Nm=Da(Fa/10)/Da(7*Fa/10),E5=Da(hl/10)*Nm,N5=-mm(hl/10)*Nm,Dm={draw(t,e){const n=Yt(e*A5),i=E5*n,r=N5*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=hl*o/5,l=mm(a),f=Da(a);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*r,f*i+l*r)}t.closePath()}},rf=Yt(3),Fm={draw(t,e){const n=-Yt(e/(rf*3));t.moveTo(0,n*2),t.lineTo(-rf*n,-n),t.lineTo(rf*n,-n),t.closePath()}},D5=Yt(3),Lm={draw(t,e){const n=Yt(e)*.6824,i=n/2,r=n*D5/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},Se=-.5,Te=Yt(3)/2,ps=1/Yt(12),F5=(ps/2+1)*3,Im={draw(t,e){const n=Yt(e/F5),i=n/2,r=n*ps,o=i,a=n*ps+n,l=-o,f=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(l,f),t.lineTo(Se*i-Te*r,Te*i+Se*r),t.lineTo(Se*o-Te*a,Te*o+Se*a),t.lineTo(Se*l-Te*f,Te*l+Se*f),t.lineTo(Se*i+Te*r,Se*r-Te*i),t.lineTo(Se*o+Te*a,Se*a-Te*o),t.lineTo(Se*l+Te*f,Se*f-Te*l),t.closePath()}},Rm={draw(t,e){const n=Yt(e-Qs(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},L5=[Gr,Mm,Tm,Am,Dm,Fm,Im],I5=[Gr,$m,Rm,Lm,km,Em,Cm];function Yn(){}function La(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function dl(t){this._context=t}dl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:La(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:La(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function R5(t){return new dl(t)}function Pm(t){this._context=t}Pm.prototype={areaStart:Yn,areaEnd:Yn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:La(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function P5(t){return new Pm(t)}function Om(t){this._context=t}Om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:La(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function O5(t){return new Om(t)}function Um(t,e){this._basis=new dl(t),this._beta=e}Um.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,l=-1,f;++l<=n;)f=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+f*o),this._beta*e[l]+(1-this._beta)*(r+f*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const U5=function t(e){function n(i){return e===1?new dl(i):new Um(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Ia(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Js(t,e){this._context=t,this._k=(1-e)/6}Js.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ia(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ia(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const z5=function t(e){function n(i){return new Js(i,e)}return n.tension=function(i){return t(+i)},n}(0);function tu(t,e){this._context=t,this._k=(1-e)/6}tu.prototype={areaStart:Yn,areaEnd:Yn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ia(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const B5=function t(e){function n(i){return new tu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function eu(t,e){this._context=t,this._k=(1-e)/6}eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ia(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const q5=function t(e){function n(i){return new eu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function nu(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Jc){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,r=(r*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>Jc){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function zm(t,e){this._context=t,this._alpha=e}zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:nu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const W5=function t(e){function n(i){return e?new zm(i,e):new Js(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Bm(t,e){this._context=t,this._alpha=e}Bm.prototype={areaStart:Yn,areaEnd:Yn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:nu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Y5=function t(e){function n(i){return e?new Bm(i,e):new tu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function qm(t,e){this._context=t,this._alpha=e}qm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const H5=function t(e){function n(i){return e?new qm(i,e):new eu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Wm(t){this._context=t}Wm.prototype={areaStart:Yn,areaEnd:Yn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function V5(t){return new Wm(t)}function th(t){return t<0?-1:1}function eh(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(o*r+a*i)/(i+r);return(th(o)+th(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function nh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function of(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,r+l*e,o-l,a-l*n,o,a)}function Ra(t){this._context=t}Ra.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:of(this,this._t0,nh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,of(this,nh(this,n=eh(this,t,e)),n);break;default:of(this,this._t0,n=eh(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Ym(t){this._context=new Hm(t)}(Ym.prototype=Object.create(Ra.prototype)).point=function(t,e){Ra.prototype.point.call(this,e,t)};function Hm(t){this._context=t}Hm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function G5(t){return new Ra(t)}function X5(t){return new Ym(t)}function Vm(t){this._context=t}Vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=ih(t),r=ih(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ih(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function j5(t){return new Vm(t)}function pl(t,e){this._context=t,this._t=e}pl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Z5(t){return new pl(t,.5)}function K5(t){return new pl(t,0)}function Q5(t){return new pl(t,1)}function Ar(t,e,n){this.k=t,this.x=e,this.y=n}Ar.prototype={constructor:Ar,scale:function(t){return t===1?this:new Ar(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ar(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ar.prototype;function Hn(t){return t!=null&&!Number.isNaN(t)}function We(t,e){return+Hn(e)-+Hn(t)||ge(t,e)}function Pa(t,e){return+Hn(e)-+Hn(t)||no(t,e)}function iu(t){return t!=null&&`${t}`!=""}function Gm(t){return isFinite(t)?t:NaN}function ml(t){return t>0&&isFinite(t)?t:NaN}function ru(t){return t<0&&isFinite(t)?t:NaN}function J5(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${t4(t.getUTCFullYear())}-${mn(t.getUTCMonth()+1,2)}-${mn(t.getUTCDate(),2)}${n||i||r||o?`T${mn(n,2)}:${mn(i,2)}${r||o?`:${mn(r,2)}${o?`.${mn(o,3)}`:""}`:""}Z`:""}`}function t4(t){return t<0?`-${mn(-t,6)}`:t>9999?`+${mn(t,6)}`:mn(t,4)}function mn(t,e){return`${t}`.padStart(e,"0")}const e4=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function Xm(t,e){return e4.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Ri=1e3,ri=Ri*60,oi=ri*60,Mn=oi*24,je=Mn*7,si=Mn*30,Dn=Mn*365,af=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ri],["5 seconds",5*Ri],["15 seconds",15*Ri],["30 seconds",30*Ri],["minute",ri],["5 minutes",5*ri],["15 minutes",15*ri],["30 minutes",30*ri],["hour",oi],["3 hours",3*oi],["6 hours",6*oi],["12 hours",12*oi],["day",Mn],["2 days",2*Mn],["week",je],["2 weeks",2*je],["month",si],["3 months",3*si],["6 months",6*si],["year",Dn],["2 years",2*Dn],["5 years",5*Dn],["10 years",10*Dn],["20 years",20*Dn],["50 years",50*Dn],["100 years",100*Dn]],ou=new Map([["second",Ri],["minute",ri],["hour",oi],["day",Mn],["monday",je],["tuesday",je],["wednesday",je],["thursday",je],["friday",je],["saturday",je],["sunday",je],["week",je],["month",si],["year",Dn]]),jm=new Map([["second",Qe],["minute",ol],["hour",al],["day",ki],["monday",Hr],["tuesday",Y1],["wednesday",H1],["thursday",yi],["friday",V1],["saturday",G1],["sunday",Qi],["week",Qi],["month",co],["year",Be]]),Zm=new Map([["second",Qe],["minute",so],["hour",uo],["day",fl],["monday",Vr],["tuesday",X1],["wednesday",j1],["thursday",wi],["friday",Z1],["saturday",K1],["sunday",Ji],["week",Ji],["month",ho],["year",qe]]),go=Symbol("intervalDuration"),gl=Symbol("intervalType");for(const[t,e]of jm)e[go]=ou.get(t),e[gl]="time";for(const[t,e]of Zm)e[go]=ou.get(t),e[gl]="utc";const n4=[["year",qe,"utc"],["year",Be,"time"],["month",ho,"utc"],["month",co,"time"],["day",fl,"utc",6*si],["day",ki,"time",6*si],["hour",uo,"utc",3*Mn],["minute",so,"utc",6*oi],["second",Qe,"utc",30*ri]];function Km(t,e,n){let i=`${t}`.toLowerCase();i.endsWith("s")&&(i=i.slice(0,-1));let r=1;const o=/^(?:(\d+)\s+)/.exec(i);switch(o&&(i=i.slice(o[0].length),r=+o[1]),i){case"quarter":i="month",r*=3;break;case"half":i="month",r*=6;break}let a=e.get(i);if(!a)throw new Error(`unknown interval: ${t}`);if(r>1){if(!a.every)throw new Error(`non-periodic interval: ${i}`);a=a.every(r),a[go]=ou.get(i)*r,a[gl]=n}return a}function Qm(t){return Km(t,jm,"time")}function au(t){return Km(t,Zm,"utc")}function rh(t,e){if(!(e>1))return;const n=t[go];if(!af.some(([,r])=>r===n)||n%Mn===0&&Mn<n&&n<si)return;const[i]=af[qa(([,r])=>Math.log(r)).center(af,Math.log(n*e))];return(t[gl]==="time"?Qm:au)(i)}function oh(t,e,n){const i=e==="time"?Zs:po;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=i4(n);switch(t){case"millisecond":return Di(i(".%L"),i(":%M:%S"),r);case"second":return Di(i(":%S"),i("%-I:%M"),r);case"minute":return Di(i("%-I:%M"),i("%p"),r);case"hour":return Di(i("%-I %p"),i("%b %-d"),r);case"day":return Di(i("%-d"),i("%b"),r);case"month":return Di(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function i4(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function r4(t,e){const n=Ue(t_(t,(i,r)=>Math.abs(r-i)));if(n<1e3)return oh("millisecond","utc",e);for(const[i,r,o,a]of n4){if(n>a||i==="hour"&&!n)break;if(t.every(l=>r.floor(l)>=l))return oh(i,o,e)}}function Di(t,e,n){return(i,r,o)=>{const a=t(i,r),l=e(i,r),f=r-er(o);return r!==f&&o[f]!==void 0&&l===e(o[f],f)?a:n(a,l)}}const Xr=Object.getPrototypeOf(Uint8Array),o4=Object.prototype.toString,Jm=Symbol("reindex");function Kt(t,e,n){const i=typeof e;return i==="string"?ah(t,tg(e),n):i==="function"?ah(t,e,n):i==="number"||e instanceof Date||i==="boolean"?qt(t,bo(e),n):typeof(e==null?void 0:e.transform)=="function"?lh(e.transform(t),n):a4(lh(e,n),t==null?void 0:t[Jm])}function a4(t,e){return e?uu(t,e):t}function ah(t,e,n){return qt(t,(n==null?void 0:n.prototype)instanceof Xr?l4(e):e,n)}function lh(t,e){return e===void 0?xe(t):t instanceof e?t:e.prototype instanceof Xr&&!(t instanceof Xr)?e.from(t,fu):e.from(t)}function l4(t){return(e,n)=>fu(t(e,n))}const na=[null],tg=t=>e=>e[t],bl={transform:Tn},ae={transform:t=>t},f4=()=>1,s4=()=>!0,fe=t=>t==null?t:`${t}`,Nt=t=>t==null?t:+t,lu=t=>t?t[0]:void 0,ms=t=>t?t[1]:void 0,bo=t=>()=>t;function u4(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Yi(n,e,i)}function Je(t){return t instanceof Xr?t:qt(t,fu,Float64Array)}function fu(t){return t==null?NaN:Number(t)}function c4(t){return qt(t,eg)}function eg(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?Xm(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Sn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:wl(t)?[void 0,t]:[t,void 0]}function se(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function ng(t,e,n){if(t!=null)return Ve(t,e,n)}function Ve(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function xe(t){return t==null||t instanceof Array||t instanceof Xr?t:Array.from(t)}function qt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function jr(t,e=Array){return t instanceof e?t.slice():e.from(t)}function h4({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function ig({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function d4(t){return h4(t)||ig(t)||t.interval!==void 0}function jn(t){return(t==null?void 0:t.toString)===o4}function gs(t){return jn(t)&&(t.type!==void 0||t.domain!==void 0)}function _l(t){return jn(t)&&typeof t.transform!="function"}function tr(t){return _l(t)&&t.value===void 0&&t.channel===void 0}function p4(t,e,n,i=ae){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function yl(t,e){return t===void 0&&e===void 0?[lu,ms]:[t,e]}function su({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Sn(e)),t===void 0&&([t]=Sn(n)),t}function Tn(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function uu(t,e){return qt(e,n=>t[n],t.constructor)}function m4(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function ai(t){return t!==null&&typeof t=="object"?t.valueOf():t}function g4(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Oa(t){let e;return[{transform:()=>e,label:Ti(t)},n=>e=n]}function dn(t){return t==null?[t]:Oa(t)}function Ti(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function bs(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return ye(i)||ye(r)?qt(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):qt(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function rg(t,e){const n=og(e==null?void 0:e.interval,e==null?void 0:e.type);return n?qt(t,n):t}function og(t,e){const n=cu(t,e);return n&&(i=>Hn(i)?n.floor(i):i)}function cu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Lf(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Lf(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?Qm:au)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function sr(t,e){if(t=cu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function b4(t,e){if(t=sr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function _4(t){return Pi(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Pi(t){return typeof(t==null?void 0:t.range)=="function"}function _o(t){return t===void 0||_l(t)?t:{value:t}}function y4(t){return t==null?null:{transform:e=>Kt(e,t,Float64Array),label:Ti(t)}}function Zn(t){return t&&typeof t[Symbol.iterator]=="function"}function ag(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function fh(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function ye(t){for(const e of t)if(e!=null)return e instanceof Date}function w4(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&Xm(e)}function v4(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function x4(t){for(const e of t)if(e!=null)return typeof e=="number"}function lf(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const k4=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function wl(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||k4.has(t))}function M4(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function he(t){return t==null||Zr(t)}function Zr(t){return/^\s*none\s*$/i.test(t)}function S4(t){return/^\s*round\s*$/i.test(t)}function lg(t,e){return ng(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function vl(t="middle"){return lg(t,"frameAnchor")}function er(t){if(t==null)return;const e=t[0],n=t[t.length-1];return no(e,n)}function T4(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function C4(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function fg(t){return Zn(t)?C4(t):t}const tn=Symbol("position"),Cn=Symbol("color"),yo=Symbol("radius"),wo=Symbol("length"),vo=Symbol("opacity"),xl=Symbol("symbol"),sg=Symbol("projection"),Ut=new Map([["x",tn],["y",tn],["fx",tn],["fy",tn],["r",yo],["color",Cn],["opacity",vo],["symbol",xl],["length",wo],["projection",sg]]);function $4(t){return t===tn||t===sg}function A4(t){return t===tn||t===yo||t===wo||t===vo}const E4=Math.sqrt(3),N4=2/E4,D4={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*N4,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},hu=new Map([["asterisk",km],["circle",Gr],["cross",Mm],["diamond",Tm],["diamond2",Cm],["hexagon",D4],["plus",$m],["square",Am],["square2",Em],["star",Dm],["times",Rm],["triangle",Fm],["triangle2",Lm],["wye",Im]]);function du(t){return t&&typeof t.draw=="function"}function F4(t){return du(t)?!0:typeof t!="string"?!1:hu.has(t.toLowerCase())}function pu(t){if(t==null||du(t))return t;const e=hu.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function L4(t){if(t==null||du(t))return[void 0,t];if(typeof t=="string"){const e=hu.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function kl({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=ug(t)),e!=null&&!tr(e)&&(i=ff(i,mu(e))),n&&(i=ff(i,cg))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||tr(e))&&{sort:e},transform:ff(i,a)}}function nr({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=ug(t)),e!=null&&!tr(e)&&(i=sf(i,mu(e))),n&&(i=sf(i,cg))),{...r,...(e===null||tr(e))&&{sort:e},initializer:sf(i,o)}}function ff(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,xe(n),i,r)}}function sf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,l,f,s,u,c;return{data:l=n,facets:f=i,channels:a}=t.call(this,n,i,r,...o),{data:u=l,facets:c=f,channels:s}=e.call(this,l,f,{...r,...a},...o),{data:u,facets:c,channels:{...a,...s}}}}function I4(t,e){return(t.initializer!=null?nr:kl)(t,e)}function ug(t){return(e,n)=>{const i=Kt(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function cg(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function R4(t,{sort:e,...n}={}){return{...(_l(t)&&t.channel!==void 0?nr:I4)(n,mu(t)),sort:tr(e)?e:null}}function mu(t){return(typeof t=="function"&&t.length!==1?P4:O4)(t)}function P4(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function O4(t){let e,n;({channel:e,value:t,order:n}={..._o(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Pa:We),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=We;break;case"descending":n=Pa;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let l;if(e===void 0)l=Kt(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const f=(s,u)=>n(l[s],l[u]);return{data:r,facets:o.map(s=>s.slice().sort(f))}}}function Bo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function U4(t,e,n=hg){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",V4]),e.href!=null&&t.href===void 0&&i.push(["href",bu]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?z4(r):n(r,o,e))}function hg(t,e,n,i=dg){let r;jn(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,l]=Oa(o.label);let f;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),f=l([])},scope(s,u){o.scope(s,u)},reduce(s,u){f.push(o.reduce(s,u))}}}function z4(t){return{name:t,initialize(){},scope(){},reduce(){}}}function dg(t,e,n,i=gu){const r=g4(t,n),o=i(e,r);let a,l;return{label:Ti(o===Ua?null:r,o.label),initialize(f){a=r===void 0?f:Kt(f,r),o.scope==="data"&&(l=o.reduceIndex(Tn(f),a))},scope(f,s){o.scope===f&&(l=o.reduceIndex(s,a))},reduce(f,s){return o.scope==null?o.reduceIndex(f,a,s):o.reduceIndex(f,a,l,s)}}}function sh(t,e){return e?Or(Ha(t,n=>e[n]),lu):[[,t]]}function gu(t,e,n=B4){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&jn(t))return Y4(t);if(typeof t=="function")return H4(t);if(/^p\d{2}$/i.test(t))return pn(u4(t));switch(`${t}`.toLowerCase()){case"first":return bu;case"last":return G4;case"identity":return pg;case"count":return Ua;case"distinct":return X4;case"sum":return e==null?Ua:j4;case"proportion":return ch(e,"data");case"proportion-facet":return ch(e,"facet");case"deviation":return pn(o0);case"min":return pn(wn);case"min-index":return pn(Xb);case"max":return pn(Ue);case"max-index":return pn(Gb);case"mean":return uh(Kb);case"median":return uh(Ff);case"variance":return pn(r0);case"mode":return pn(Jb)}return n(t)}function B4(t){throw new Error(`invalid reduce: ${t}`)}function q4(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function W4(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>We(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function Y4(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function H4(t){return{reduceIndex(e,n,i){return t(uu(n,e),i)}}}function pn(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function uh(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return ye(n)?new Date(i):i}}}const pg={reduceIndex(t,e){return uu(e,t)}},bu={reduceIndex(t,e){return e[t[0]]}},V4={reduceIndex(t,e){const i=Or(Ui(t,o=>o.length,o=>e[o]),ms),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[5-1]=[` ${o.length.toLocaleString("en-US")} more`,qn(o,ms)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},G4={reduceIndex(t,e){return e[t[t.length-1]]}},Ua={label:"Frequency",reduceIndex(t){return t.length}},X4={label:"Distinct",reduceIndex(t,e){const n=new Ya;for(const i of t)n.add(e[i]);return n.size}},j4=pn(qn);function ch(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>qn(n,o=>i[o])/r}}function Kr(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=Ti(i)},l){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),mg(l,{scale:e,type:n,value:Kt(t,i),label:a,filter:r,hint:o})}function Z4(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Kr(e,i,n)]))}function K4(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:qt(o,a)]}));return n.channels=t,n}function mg(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&lf(i,wl)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&lf(i,M4)?null:"opacity";break;case"symbol":n!==!0&&lf(i,F4)?(e.scale=null,e.value=qt(i,pu)):e.scale="symbol";break;default:e.scale=Ut.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Ut.has(n))throw new Error(`unknown scale: ${n}`);return e}function Q4(t,e,n,i,r){const{order:o,reverse:a,reduce:l=!0,limit:f}=r;for(const s in r){if(!Ut.has(s))continue;let{value:u,order:c=o,reverse:h=a,reduce:p=l,limit:d=f}=_o(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),c=c===void 0?m!==(u==="width"||u==="height")?bg:gg:e8(c),p==null||p===!1)continue;const g=s==="fx"||s==="fy"?t8(e,i[s]):J4(n,s);if(!g)throw new Error(`missing channel for scale: ${s}`);const _=g.value,[b=0,v=1/0]=Zn(d)?d:d<0?[d]:[0,d];if(u==null)g.domain=()=>{let w=Array.from(new Ya(_));return h&&(w=w.reverse()),(b!==0||v!==1/0)&&(w=w.slice(b,v)),w};else{const w=u==="data"?t:u==="height"?hh(n,"y1","y2"):u==="width"?hh(n,"x1","x2"):_s(n,u,u==="y"?"y2":u==="x"?"x2":void 0),k=gu(p===!0?"max":p,w);g.domain=()=>{let x=Bb(Tn(_),S=>k.reduceIndex(S,w),S=>_[S]);return c&&x.sort(c),h&&x.reverse(),(b!==0||v!==1/0)&&(x=x.slice(b,v)),x.map(lu)}}}}function J4(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function t8(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const l of t[o])r[l]=a}return e}function hh(t,e,n){const i=_s(t,e),r=_s(t,n);return qt(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function _s(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function e8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return gg;case"descending":return bg}throw new Error(`invalid order: ${t}`)}function gg([t,e],[n,i]){return We(e,i)||We(t,n)}function bg([t,e],[n,i]){return Pa(e,i)||We(t,n)}function dh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function n8(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const i8=n8(t=>new Intl.NumberFormat(t));function r8(t="en-US"){const e=i8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function o8(t){return J5(t,"Invalid Date")}function a8(t="en-US"){const e=r8(t);return n=>(n instanceof Date?o8:typeof n=="number"?e:fe)(n)}const vi=a8();let ys=0,ws;function l8(){const t=ys;return ys=0,ws=void 0,t}function Rn(t){t!==ws&&(ws=t,console.warn(t),++ys)}const pe=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let f8=0;function ph(){return`plot-clip-${++f8}`}function s8(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:l,fillOpacity:f,stroke:s,strokeWidth:u,strokeOpacity:c,strokeLinejoin:h,strokeLinecap:p,strokeMiterlimit:d,strokeDasharray:m,strokeDashoffset:g,opacity:_,mixBlendMode:b,imageFilter:v,paintOrder:w,pointerEvents:k,shapeRendering:x,channels:S},{ariaLabel:T,fill:$="currentColor",fillOpacity:F,stroke:A="none",strokeOpacity:L,strokeWidth:R,strokeLinecap:W,strokeLinejoin:C,strokeMiterlimit:B,paintOrder:z}){$===null&&(l=null,f=null),A===null&&(s=null,c=null),he($)?!he(A)&&(!he(l)||S!=null&&S.fill)&&(A="none"):he(A)&&(!he(s)||S!=null&&S.stroke)&&($="none");const[Q,j]=Sn(l,$),[X,O]=se(f,F),[Y,J]=Sn(s,A),[lt,et]=se(c,L),[Z,q]=se(_);Zr(J)||(u===void 0&&(u=R),p===void 0&&(p=W),h===void 0&&(h=C),d===void 0&&!S4(h)&&(d=B),!Zr(j)&&w===void 0&&(w=z));const[N,E]=se(u);return $!==null&&(t.fill=ne(j,"currentColor"),t.fillOpacity=yr(O,1)),A!==null&&(t.stroke=ne(J,"none"),t.strokeWidth=yr(E,1),t.strokeOpacity=yr(et,1),t.strokeLinejoin=ne(h,"miter"),t.strokeLinecap=ne(p,"butt"),t.strokeMiterlimit=yr(d,4),t.strokeDasharray=ne(m,"none"),t.strokeDashoffset=ne(g,"0")),t.target=fe(a),t.ariaLabel=fe(T),t.ariaDescription=fe(r),t.ariaHidden=fe(o),t.opacity=yr(q,1),t.mixBlendMode=ne(b,"normal"),t.imageFilter=ne(v,"none"),t.paintOrder=ne(w,"normal"),t.pointerEvents=ne(k,"auto"),t.shapeRendering=ne(x,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:Q,scale:"auto",optional:!0},fillOpacity:{value:X,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:lt,scale:"auto",optional:!0},strokeWidth:{value:N,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function u8(t,e){e&&t.filter(n=>iu(e[n])).append("title").call(h8,e)}function c8(t,e){e&&t.filter(([n])=>iu(e[n])).append("title").call(d8,e)}function h8(t,e){e&&t.text(n=>vi(e[n]))}function d8(t,e){e&&t.text(([n])=>vi(e[n]))}function $n(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&_t(t,"aria-label",h=>i[h]),o&&_t(t,"fill",h=>o[h]),a&&_t(t,"fill-opacity",h=>a[h]),l&&_t(t,"stroke",h=>l[h]),f&&_t(t,"stroke-opacity",h=>f[h]),s&&_t(t,"stroke-width",h=>s[h]),u&&_t(t,"opacity",h=>u[h]),c&&vg(t,h=>c[h],e),n||u8(t,r)}function _g(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&_t(t,"aria-label",([h])=>i[h]),o&&_t(t,"fill",([h])=>o[h]),a&&_t(t,"fill-opacity",([h])=>a[h]),l&&_t(t,"stroke",([h])=>l[h]),f&&_t(t,"stroke-opacity",([h])=>f[h]),s&&_t(t,"stroke-width",([h])=>s[h]),u&&_t(t,"opacity",([h])=>u[h]),c&&vg(t,([h])=>c[h],e),n||c8(t,r)}function p8({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:l,href:f},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,l,f].filter(u=>u!==void 0)}function m8(t,e,n){const i=Ha(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Rn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*yg(t,e,n,i){const{z:r}=n,{z:o}=i,a=p8(i,n),l=[...e,...a];for(const f of o?m8(t,o,r):[t]){let s,u;t:for(const c of f){for(const h of l)if(!Hn(h[c])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(h=>ai(h[c])),u=[c];continue}u.push(c);for(let h=0;h<a.length;++h)if(ai(a[h][c])!==s[h]){yield u,s=a.map(d=>ai(d[c])),u=[c];continue t}}u&&(yield u)}}function wg(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Ve(t,"clip",["frame","sphere"])),t}function g8(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:l,marginLeft:f,marginRight:s,marginTop:u,marginBottom:c}=n,h=ph();r=`url(#${h})`,t=Ht("svg:g",i).call(p=>p.append("svg:clipPath").attr("id",h).append("rect").attr("x",f).attr("y",u).attr("width",a-s-f).attr("height",l-u-c)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const l=ph();r=`url(#${l})`,t.append("clipPath").attr("id",l).append("path").attr("d",Ja(a)({type:"Sphere"}));break}}_t(t,"aria-label",e.ariaLabel),_t(t,"aria-description",e.ariaDescription),_t(t,"aria-hidden",e.ariaHidden),_t(t,"clip-path",r)}function Fe(t,e,n,i){g8(t,e,n,i),_t(t,"fill",e.fill),_t(t,"fill-opacity",e.fillOpacity),_t(t,"stroke",e.stroke),_t(t,"stroke-width",e.strokeWidth),_t(t,"stroke-opacity",e.strokeOpacity),_t(t,"stroke-linejoin",e.strokeLinejoin),_t(t,"stroke-linecap",e.strokeLinecap),_t(t,"stroke-miterlimit",e.strokeMiterlimit),_t(t,"stroke-dasharray",e.strokeDasharray),_t(t,"stroke-dashoffset",e.strokeDashoffset),_t(t,"shape-rendering",e.shapeRendering),_t(t,"filter",e.imageFilter),_t(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;_t(t,"pointer-events",r)}function Le(t,e){b8(t,"mix-blend-mode",e.mixBlendMode),_t(t,"opacity",e.opacity)}function vg(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Hi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Hi.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function _t(t,e,n){n!=null&&t.attr(e,n)}function b8(t,e,n){n!=null&&t.style(e,n)}function Me(t,e,{x:n,y:i},r=pe,o=pe){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function ne(t,e){if((t=fe(t))!==e)return t}function yr(t,e){if((t=Nt(t))!==e)return t}const _8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function _u(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!_8.test(t))throw new Error(`invalid class name: ${t}`);return t}function yu(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function xo({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function wu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:wg(n)}}function Ht(t,{document:e}){return Dr(Ga(t).call(e.documentElement))}const xg=Math.PI,un=2*xg,mh=.618;function y8({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,f,s="frame";if(jn(t)){let k;if({type:t,domain:f,inset:k,insetTop:n=k!==void 0?k:n,insetRight:i=k!==void 0?k:i,insetBottom:r=k!==void 0?k:r,insetLeft:o=k!==void 0?k:o,clip:s=s,...l}=t,t==null)return}typeof t!="function"&&({type:t}=kg(t));const{width:u,height:c,marginLeft:h,marginRight:p,marginTop:d,marginBottom:m}=a,g=u-h-p-o-i,_=c-d-m-n-r;if(t=t==null?void 0:t({width:g,height:_,clip:s,...l}),t==null)return;s=w8(s,h,d,u-p,c-m);let b=h+o,v=d+n,w;if(f!=null){const[[k,x],[S,T]]=Ja(t).bounds(f),$=Math.min(g/(S-k),_/(T-x));$>0?(b-=($*(k+S)-g)/2,v-=($*(x+T)-_)/2,w=ls({point(F,A){this.stream.point(F*$+b,A*$+v)}})):Rn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&v===0?Mg():ls({point(k,x){this.stream.point(k+b,x+v)}})),{stream:k=>t.stream(w.stream(s(k)))}}function kg(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Re(E3,.7463,.4673);case"albers":return qo(x1,.7463,.4673);case"azimuthal-equal-area":return Re(N3,4,4);case"azimuthal-equidistant":return Re(D3,un,un);case"conic-conformal":return qo(I3,un,un);case"conic-equal-area":return qo(Ta,6.1702,2.9781);case"conic-equidistant":return qo(O3,7.312,3.6282);case"equal-earth":return Re(z3,5.4133,2.6347);case"equirectangular":return Re(R3,un,xg);case"gnomonic":return Re(B3,3.4641,3.4641);case"identity":return{type:Mg};case"reflect-y":return{type:v8};case"mercator":return Re(F3,un,un);case"orthographic":return Re(q3,2,2);case"stereographic":return Re(W3,2,2);case"transverse-mercator":return Re(Y3,un,un);default:throw new Error(`unknown projection type: ${t}`)}}function w8(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return a1(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function Re(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:l})=>{var s,u,c;const f=t();return a!=null&&((s=f.precision)==null||s.call(f,a)),o!=null&&((u=f.rotate)==null||u.call(f,o)),typeof l=="number"&&((c=f.clipAngle)==null||c.call(f,l)),f.scale(Math.min(i/e,r/n)),f.translate([i/2,r/2]),f},aspectRatio:n/e}}function qo(t,e,n){const{type:i,aspectRatio:r}=Re(t,e,n);return{type:o=>{const{parallels:a,domain:l,width:f,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),l===void 0&&u.fitSize([f,s],{type:"Sphere"})),u},aspectRatio:r}}const Mg=bo({stream:t=>t}),v8=bo(ls({point(t,e){this.stream.point(t,-e)}}));function x8(t,e,n,i){const r=n[t],o=n[e],a=r.length,l=n[t]=new Float64Array(a).fill(NaN),f=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(c,h){l[s]=c,f[s]=h}});for(s=0;s<a;++s)u.point(r[s],o[s])}function k8({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(jn(t)&&(t=t.type),t!=null)}function M8(t){if(typeof(t==null?void 0:t.stream)=="function")return mh;if(jn(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=kg(t);if(e)return e}return mh}}function S8(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)ei(a,o);return[i,r]}const Sg=new Map([["accent",d5],["category10",h5],["dark2",p5],["paired",m5],["pastel1",g5],["pastel2",b5],["set1",_5],["set2",y5],["set3",w5],["tableau10",v5]]);function T8(t){return t!=null&&Sg.has(`${t}`.toLowerCase())}const gh=new Map([...Sg,["brbg",cn(fp,sp)],["prgn",cn(up,cp)],["piyg",cn(hp,dp)],["puor",cn(pp,mp)],["rdbu",cn(hs,Ea)],["rdgy",cn(gp,bp)],["rdylbu",cn(ds,Na)],["rdylgn",cn(_p,yp)],["spectral",cn(wp,vp)],["burd",bh(hs,Ea)],["buylrd",bh(ds,Na)],["blues",Gt(Vp,Gp)],["greens",Gt(Xp,jp)],["greys",Gt(Zp,Kp)],["oranges",Gt(nm,im)],["purples",Gt(Qp,Jp)],["reds",Gt(tm,em)],["turbo",hn(um)],["viridis",hn(cm)],["magma",hn(hm)],["inferno",hn(dm)],["plasma",hn(pm)],["cividis",hn(rm)],["cubehelix",hn(om)],["warm",hn(am)],["cool",hn(lm)],["bugn",Gt(xp,kp)],["bupu",Gt(Mp,Sp)],["gnbu",Gt(Tp,Cp)],["orrd",Gt($p,Ap)],["pubu",Gt(Dp,Fp)],["pubugn",Gt(Ep,Np)],["purd",Gt(Lp,Ip)],["rdpu",Gt(Rp,Pp)],["ylgn",Gt(zp,Bp)],["ylgnbu",Gt(Op,Up)],["ylorbr",Gt(qp,Wp)],["ylorrd",Gt(Yp,Hp)],["rainbow",_h(fm)],["sinebow",_h(sm)]]);function Gt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?ze(e,n):t[n])}function cn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?ze(e,n):t[n])}function bh(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?ze(i=>e(1-i),n):t[n].slice().reverse())}function hn(t){return({length:e})=>ze(t,Math.max(2,Math.floor(e)))}function _h(t){return({length:e})=>ze(t,Math.floor(e)+1).slice(0,-1)}function Tg(t){const e=`${t}`.toLowerCase();if(!gh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return gh.get(e)}function Ml(t,e){const n=Tg(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function C8(t,e="greys"){const n=new Set,[i,r]=Ml(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const yh=new Map([["brbg",sp],["prgn",cp],["piyg",dp],["puor",mp],["rdbu",Ea],["rdgy",bp],["rdylbu",Na],["rdylgn",yp],["spectral",vp],["burd",t=>Ea(1-t)],["buylrd",t=>Na(1-t)],["blues",Gp],["greens",jp],["greys",Kp],["purples",Jp],["reds",em],["oranges",im],["turbo",um],["viridis",cm],["magma",hm],["inferno",dm],["plasma",pm],["cividis",rm],["cubehelix",om],["warm",am],["cool",lm],["bugn",kp],["bupu",Sp],["gnbu",Cp],["orrd",Ap],["pubugn",Np],["pubu",Fp],["purd",Ip],["rdpu",Pp],["ylgnbu",Up],["ylgn",Bp],["ylorbr",Wp],["ylorrd",Hp],["rainbow",fm],["sinebow",sm]]);function vu(t){const e=`${t}`.toLowerCase();if(!yh.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return yh.get(e)}const $8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function A8(t){return t!=null&&$8.has(`${t}`.toLowerCase())}const Cg=t=>e=>t(1-e),uf=[0,1],wh=new Map([["number",ie],["rgb",gi],["hsl",Mw],["hcl",Cw],["lab",Sw]]);function $g(t){const e=`${t}`.toLowerCase();if(!wh.has(e))throw new Error(`unknown interpolator: ${e}`);return wh.get(e)}function ko(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:l=Eg(t,n),unknown:f,round:s,scheme:u,interval:c,range:h=Ut.get(t)===yo?z8(n,l):Ut.get(t)===wo?B8(n,l):Ut.get(t)===vo?uf:void 0,interpolate:p=Ut.get(t)===Cn?u==null&&h!==void 0?gi:vu(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?Ps:ie,reverse:d}){if(c=sr(c,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof p!="function"&&(p=$g(p)),d=!!d,h!==void 0){const m=(l=xe(l)).length,g=(h=xe(h)).length;if(m!==g){if(p.length===1)throw new Error("invalid piecewise interpolator");p=Za(p,h),h=void 0}}if(p.length===1?(d&&(p=Cg(p),d=!1),h===void 0&&(h=Float64Array.from(l,(m,g)=>g/(l.length-1)),h.length===2&&(h=uf)),e.interpolate((h===uf?bo:ku)(p))):e.interpolate(p),a){const[m,g]=Ce(l);(m>0||g<0)&&(l=jr(l),er(l)!==Math.sign(m)?l[l.length-1]=0:l[0]=0)}return d&&(l=fa(l)),e.domain(l).unknown(f),r&&(e.nice(E8(r,i)),l=e.domain()),h!==void 0&&e.range(h),o&&e.clamp(o),{type:i,domain:l,range:h,scale:e,interpolate:p,interval:c}}function E8(t,e){return t===!0?void 0:typeof t=="number"?t:b4(t,e)}function N8(t,e,n){return ko(t,Xs(),e,n)}function D8(t,e,n){return Ag(t,e,{...n,exponent:.5})}function Ag(t,e,{exponent:n=1,...i}){return ko(t,B1().exponent(n),e,{...i,type:"pow"})}function F8(t,e,{base:n=10,domain:i=q8(e),...r}){return ko(t,P1().base(n),e,{...r,domain:i})}function L8(t,e,{constant:n=1,...i}){return ko(t,U1().constant(n),e,i)}function I8(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=W8(e),unknown:l,interpolate:f,reverse:s}){return n===void 0&&(n=f!==void 0?ze(f,r):Ut.get(t)===Cn?Ml(o,r):void 0),a.length>0&&(a=q1(a,n===void 0?{length:r}:n).quantiles()),xu(t,e,{domain:a,range:n,reverse:s,unknown:l})}function R8(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Eg(t,e),unknown:a,interpolate:l,reverse:f}){const[s,u]=Ce(o);let c;return n===void 0?(c=Ur(s,u,i),c[0]<=s&&c.splice(0,1),c[c.length-1]>=u&&c.pop(),i=c.length+1,n=l!==void 0?ze(l,i):Ut.get(t)===Cn?Ml(r,i):void 0):(c=ze(ie(s,u),i+1).slice(1,-1),s instanceof Date&&(c=c.map(h=>new Date(h)))),er(xe(o))<0&&c.reverse(),xu(t,e,{domain:c,range:n,reverse:f,unknown:a})}function xu(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?ze(o,n.length+1):Ut.get(t)===Cn?Ml(r,n.length+1):void 0,reverse:l}){n=xe(n);const f=er(n);if(!isNaN(f)&&!P8(n,f))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=fa(a)),{type:"threshold",scale:W1(f<0?fa(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function P8(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=no(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function O8(t){return{type:"identity",scale:A4(Ut.get(t))?L1():e=>e}}function Qr(t,e=Gm){return t.length?[wn(t,({value:n})=>n===void 0?n:wn(n,e)),Ue(t,({value:n})=>n===void 0?n:Ue(n,e))]:[0,1]}function Eg(t,e){const n=Ut.get(t);return(n===yo||n===vo||n===wo?U8:Qr)(e)}function U8(t){return[0,t.length?Ue(t,({value:e})=>e===void 0?e:Ue(e,Gm)):1]}function z8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Yi(t,.5,({value:a})=>a===void 0?NaN:Yi(a,.25,ml)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/Ue(r);return o<1?r.map(a=>a*o):r}function B8(t,e){const n=Ff(t,({value:o})=>o===void 0?NaN:Ff(o,Math.abs)),i=e.map(o=>12*o/n),r=60/Ue(i);return r<1?i.map(o=>o*r):i}function q8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Qr(t,ml);if(n<0)return Qr(t,ru)}return[1,10]}function W8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function ku(t){return(e,n)=>i=>t(e+i*(n-e))}function Sl(t,e,n,i,{type:r,nice:o,clamp:a,domain:l=Qr(i),unknown:f,pivot:s=0,scheme:u,range:c,symmetric:h=!0,interpolate:p=Ut.get(t)===Cn?u==null&&c!==void 0?gi:vu(u!==void 0?u:"rdbu"):ie,reverse:d}){s=+s,l=xe(l);let[m,g]=l;if(l.length>2&&Rn(`Warning: the diverging ${t} scale domain contains extra elements.`),no(m,g)<0&&([m,g]=[g,m],d=!d),m=Math.min(m,s),g=Math.max(g,s),typeof p!="function"&&(p=$g(p)),c!==void 0&&(p=p.length===1?ku(p)(...c):Za(p,c)),d&&(p=Cg(p)),h){const _=n.apply(s),b=_-n.apply(m),v=n.apply(g)-_;b<v?m=n.invert(_-v):b>v&&(g=n.invert(_+b))}return e.domain([m,s,g]).unknown(f).interpolator(p),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,g],pivot:s,interpolate:p,scale:e}}function Y8(t,e,n){return Sl(t,rp(),X8,e,n)}function H8(t,e,n){return Ng(t,e,{...n,exponent:.5})}function Ng(t,e,{exponent:n=1,...i}){return Sl(t,lp().exponent(n=+n),K8(n),e,{...i,type:"diverging-pow"})}function V8(t,e,{base:n=10,pivot:i=1,domain:r=Qr(e,i<0?ru:ml),...o}){return Sl(t,op().base(n=+n),j8,e,{domain:r,pivot:i,...o})}function G8(t,e,{constant:n=1,...i}){return Sl(t,ap().constant(n=+n),Q8(n),e,i)}const X8={apply(t){return t},invert(t){return t}},j8={apply:Math.log,invert:Math.exp},Z8={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function K8(t){return t===.5?Z8:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function Q8(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Dg(t,e,n,i){return ko(t,e,n,i)}function J8(t,e,n){return Dg(t,u5(),e,n)}function t7(t,e,n){return Dg(t,c5(),e,n)}const Mo=Symbol("ordinal");function Fg(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:l,hint:f}){return r=sr(r,i),o===void 0&&(o=Ig(n,r,t)),(i==="categorical"||i===Mo)&&(i="ordinal"),l&&(o=fa(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:f,interval:r}}function e7(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:l,...f}){i=sr(i,n),r===void 0&&(r=Ig(e,i,t));let s;if(Ut.get(t)===xl)s=r7(e),o=o===void 0?o7(s):qt(o,pu);else if(Ut.get(t)===Cn&&(o===void 0&&(n==="ordinal"||n===Mo)&&(o=C8(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"tableau10"),a!==void 0))if(o!==void 0){const u=vu(a),c=o[0],h=o[1]-o[0];o=({length:p})=>ze(d=>u(c+h*d),p)}else o=Tg(a);if(l===ss)throw new Error(`implicit unknown on ${t} scale is not supported`);return Fg(t,Gs().unknown(l),e,{...f,type:n,domain:r,range:o,hint:s})}function n7(t,e,{align:n=.5,padding:i=.5,...r}){return Lg(H3().align(n).padding(i),e,r,t)}function i7(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Lg(il().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Lg(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=Fg(i,t,e,n),t.round=r,t}function Ig(t,e,n){const i=new Ya;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=Ce(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&Ut.get(n)===tn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Or(i,We)}function vh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function r7(t){return{fill:vh(t,"fill"),stroke:vh(t,"stroke")}}function o7(t){return he(t.fill)?I5:L5}function vs(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:l,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,facet:{label:d=e}={},...m}={}){const g={};for(const[_,b]of t){const v=m[_],w=s7(_,b,{round:Ut.get(_)===tn?l:void 0,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,...v});if(w){let{label:k=_==="fx"||_==="fy"?d:e,percent:x,transform:S,inset:T,insetTop:$=T!==void 0?T:_==="y"?i:0,insetRight:F=T!==void 0?T:_==="x"?r:0,insetBottom:A=T!==void 0?T:_==="y"?o:0,insetLeft:L=T!==void 0?T:_==="x"?a:0}=v||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");w.percent=!!x,w.label=k===void 0?l7(b,w):k,w.transform=S,_==="x"||_==="fx"?(w.insetLeft=+L,w.insetRight=+F):(_==="y"||_==="fy")&&(w.insetTop=+$,w.insetBottom=+A),g[_]=w}}return g}function xh(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:l,label:f}=r;e[i]=p7(r),n[i]=o,o.type=a,l!=null&&(o.interval=l),f!=null&&(o.label=f)}return n}function a7(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?Mu(e):e;r&&kh(r,a),o&&Mh(o,a);const l=r||o?Rg(t,e):e;n&&kh(n,l),i&&Mh(i,l)}function l7(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!Ci(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function Mu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:l,marginRight:f,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,f),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function Rg({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Mu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:l,height:e?e.scale.bandwidth()+i+o:f,facet:{width:l,height:f}}}function kh(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,l=o+n,f=r-a-i;t.range=[l,Math.max(l,f)],Ci(t)||(t.range=Og(t)),t.scale.range(t.range)}Pg(t)}function Mh(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,l=o+n,f=r-a-i;t.range=[Math.max(l,f),l],Ci(t)?t.range.reverse():t.range=Og(t),t.scale.range(t.range)}Pg(t)}function Pg(t){t.round===void 0&&c7(t)&&f7(t)<=30&&t.scale.round(!0)}function f7({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,l=Math.abs(i-n)/Math.max(1,a+o*2);return(l-Math.floor(l))*a}function Og(t){const e=t.scale.domain().length+Ug(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function s7(t,e=[],n={}){const i=u7(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Ci({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(ye)?Rn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Fi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Fi(i)}".`):r.some(w4)?Rn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Fi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Fi(i)}".`):r.some(v4)&&Rn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Fi(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Fi(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Wo(e,n,Je);break;case"identity":switch(Ut.get(t)){case tn:n=Wo(e,n,Je);break;case xl:n=Wo(e,n,h7);break}break;case"utc":case"time":n=Wo(e,n,c4);break}switch(i){case"diverging":return Y8(t,e,n);case"diverging-sqrt":return H8(t,e,n);case"diverging-pow":return Ng(t,e,n);case"diverging-log":return V8(t,e,n);case"diverging-symlog":return G8(t,e,n);case"categorical":case"ordinal":case Mo:return e7(t,e,n);case"cyclical":case"sequential":case"linear":return N8(t,e,n);case"sqrt":return D8(t,e,n);case"threshold":return xu(t,e,n);case"quantile":return I8(t,e,n);case"quantize":return R8(t,e,n);case"pow":return Ag(t,e,n);case"log":return F8(t,e,n);case"symlog":return L8(t,e,n);case"utc":return t7(t,e,n);case"time":return J8(t,e,n);case"point":return n7(t,e,n);case"band":return i7(t,e,n);case"identity":return O8(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Fi(t){return typeof t=="symbol"?t.description:t}const Sh={toString:()=>"projection"};function u7(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:l}){if(t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=Sh);for(const{type:s}of e)if(s!==void 0){if(n===void 0)n=s;else if(n!==s)throw new Error(`scale incompatible with channel: ${n} !== ${s}`)}if(n===Sh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const f=Ut.get(t);if(f===yo)return"sqrt";if(f===vo||f===wo)return"linear";if(f===xl)return"ordinal";if((i||r||[]).length>2)return cf(f);if(i!==void 0){if(fh(i))return cf(f);if(ye(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(fh))return cf(f);if(s.some(ye))return"utc"}if(f===Cn){if(a!=null||A8(o))return"diverging";if(T8(o))return"categorical"}return"linear"}function cf(t){switch(t){case tn:return"point";case Cn:return Mo;default:return"ordinal"}}function Ci({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Mo}function Ug({type:t}){return t==="threshold"}function c7({type:t}){return t==="point"||t==="band"}function ir(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Wo(t,{domain:e,...n},i){for(const r of t)r.value!==void 0&&(r.value=i(r.value));return{domain:e===void 0?e:i(e),...n}}function h7(t){return qt(t,pu)}function d7(t){return e=>{if(!Ut.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function p7({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:l,pivot:f}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:jr(n),...i!==void 0&&{range:jr(i)},...a!==void 0&&{transform:a},...l&&{percent:l},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...f!==void 0&&{pivot:f,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function m7(t,e,n={}){let i=.5-pe,r=.5+pe,o=.5+pe,a=.5-pe;for(const{marginTop:m,marginRight:g,marginBottom:_,marginLeft:b}of e)m>i&&(i=m),g>r&&(r=g),_>o&&(o=_),b>a&&(a=b);let{margin:l,marginTop:f=l!==void 0?l:i,marginRight:s=l!==void 0?l:r,marginBottom:u=l!==void 0?l:o,marginLeft:c=l!==void 0?l:a}=n;f=+f,s=+s,u=+u,c=+c;let{width:h=640,height:p=g7(t,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,f-i+u-o)}=n;h=+h,p=+p;const d={width:h,height:p,marginTop:f,marginRight:s,marginBottom:u,marginLeft:c};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:f,marginRight:_=m!==void 0?m:s,marginBottom:b=m!==void 0?m:u,marginLeft:v=m!==void 0?m:c}=n.facet??{};g=+g,_=+_,b=+b,v=+v,d.facet={marginTop:g,marginRight:_,marginBottom:b,marginLeft:v}}return d}function g7({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:l,marginRightDefault:f,marginBottomDefault:s,marginLeftDefault:u}){const c=n?n.scale.domain().length:1,h=M8(r);if(h){const d=i?i.scale.domain().length:1,m=(1.1*c-.1)/(1.1*d-.1)*h,g=Math.max(.1,Math.min(10,m));return Math.round((a-u-f)*g+l+s)}const p=e?Ci(e)?e.scale.domain().length:Math.max(7,17/c):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const d=Th("y",e)/(Th("x",t)*o),m=i?i.scale.bandwidth():1,g=n?n.scale.bandwidth():1,_=m*(a-u-f)-t.insetLeft-t.insetRight;return(d*_+e.insetTop+e.insetBottom)/g+l+s}return!!(e||n)*Math.max(1,Math.min(60,p*c))*20+!!i*30+60}function Th(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const l=e.scale.exponent();r=f=>Math.pow(f,l);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=Ce(i);return Math.abs(r(a)-r(o))}function b7(t,e){const{fx:n,fy:i}=vs(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?Ub(r,o).map(([a,l],f)=>({x:a,y:l,i:f})):r?r.map((a,l)=>({x:a,i:l})):o?o.map((a,l)=>({y:a,i:l})):void 0}function _7(t,{x:e,y:n}){return e&&(e=xs(e)),n&&(n=xs(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Su(t,{fx:e,fy:n}){const i=Tn(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Ui(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Ui(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Ui(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function y7(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function w7(t){const e=[],n=new Uint32Array(qn(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const v7=new Map([["top",hf],["right",mf],["bottom",df],["left",pf],["top-left",Yo(hf,pf)],["top-right",Yo(hf,mf)],["bottom-left",Yo(df,pf)],["bottom-right",Yo(df,mf)],["top-empty",M7],["right-empty",C7],["bottom-empty",S7],["left-empty",T7],["empty",$7]]);function x7(t){if(t==null)return null;const e=v7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Ch=new WeakMap;function xs(t){let e=Ch.get(t);return e||Ch.set(t,e=new di(qt(t,(n,i)=>[n,i]))),e}function Kn(t,e){return xs(t).get(e)}function k7(t,e,n){return e=ai(e),n=ai(n),t.find(i=>Object.is(ai(i.x),e)&&Object.is(ai(i.y),n))}function Tl(t,e,n){var i;return(i=k7(t,e,n))==null?void 0:i.empty}function hf(t,{y:e},{y:n}){return e?Kn(e,n)===0:!0}function df(t,{y:e},{y:n}){return e?Kn(e,n)===e.length-1:!0}function pf(t,{x:e},{x:n}){return e?Kn(e,n)===0:!0}function mf(t,{x:e},{x:n}){return e?Kn(e,n)===e.length-1:!0}function M7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Kn(e,i);if(o>0)return Tl(t,n,e[o-1])}function S7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Kn(e,i);if(o<e.length-1)return Tl(t,n,e[o+1])}function T7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Kn(e,n);if(o>0)return Tl(t,e[o-1],i)}function C7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Kn(e,n);if(o<e.length-1)return Tl(t,e[o+1],i)}function $7(t,e,{empty:n}){return n}function Yo(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function gf(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class ue{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:l,fy:f,sort:s,dx:u=0,dy:c=0,margin:h=0,marginTop:p=h,marginRight:d=h,marginBottom:m=h,marginLeft:g=h,clip:_=r==null?void 0:r.clip,channels:b,tip:v,render:w}=i;if(this.data=e,this.sort=tr(s)?s:null,this.initializer=nr(i).initializer,this.transform=this.initializer?i.transform:kl(i).transform,o===null||o===!1?this.facet=null:(this.facet=Ve(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===na&&typeof l=="string"?[l]:l,this.fy=e===na&&typeof f=="string"?[f]:f),this.facetAnchor=x7(a),n=fg(n),b!==void 0&&(n={...A7(b),...n}),r!==void 0&&(n={...s8(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([k,x])=>{if(_l(x.value)){const{value:S,label:T=x.label,scale:$=x.scale}=x.value;x={...x,label:T,scale:$,value:S}}if(e===na&&typeof x.value=="string"){const{value:S}=x;x={...x,value:[S]}}return[k,x]}).filter(([k,{value:x,optional:S}])=>{if(x!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${k}`)})),this.dx=+u,this.dy=+c,this.marginTop=+p,this.marginRight=+d,this.marginBottom=+m,this.marginLeft=+g,this.clip=wg(_),this.tip=E7(v),this.facet==="super"){if(l||f)throw new Error("super-faceting cannot use fx or fy");for(const k in this.channels){const{scale:x}=n[k];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=Bg(w,this.render))}initialize(e,n,i){let r=xe(this.data);e===void 0&&r!=null&&(e=[Tn(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=xe(r)),e!==void 0&&(e.original=o);const a=Z4(this.channels,r);return this.sort!=null&&Q4(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=Hn}=n[r];if(o!==null){const a=i[r];e=e.filter(l=>o(a[l]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&x8(r,o,n,i.projection)}}scale(e,n,i){const r=K4(e,n);return i.projection&&this.project(e,r,i),r}}function zg(...t){return t.plot=ue.prototype.plot,t}function Bg(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,l){return t.call(this,n,i,r,o,a,(f,s,u,c,h)=>e.call(this,f,s,u,c,h,l))}}function A7(t){return Object.fromEntries(Object.entries(fg(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:_o(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function E7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Ve(t,"tip",["x","y","xy"]):t}function Cl(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:jn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const $h=new WeakMap;function Tu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:l,render:f,...s}={}){return a=+a,r!=null&&(n??(n=null),l={...l,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),l={...l,py:{value:o,scale:"y"}}),{x:n,y:i,channels:l,...s,render:Bg(function(u,c,h,p,d,m){d={...d,pointerSticky:!1};const g=d.ownerSVGElement,{data:_}=d.getMarkState(this);let b=$h.get(g);b||$h.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(J)-1;const{x:w,y:k,fx:x,fy:S}=c;let T=x?x(u.fx)-p.marginLeft:0,$=S?S(u.fy)-p.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),k!=null&&k.bandwidth&&($+=k.bandwidth()/2);const F=u.fi!=null;let A;if(F){let q=b.facetStates;q||(b.facetStates=q=new Map),A=q.get(this),A||q.set(this,A=new Map)}const[L,R]=xo(this,p),{px:W,py:C}=h,B=W?q=>W[q]:qg(h,L),z=C?q=>C[q]:Wg(h,R);let Q,j,X,O;function Y(q,N){if(F)if(O&&(O=cancelAnimationFrame(O)),q==null)A.delete(u.fi);else{A.set(u.fi,N),O=requestAnimationFrame(()=>{O=null;for(const[E,P]of A)if(P<N||P===N&&E<u.fi){q=null;break}J(q)});return}J(q)}function J(q){if(Q===q&&X===b.sticky)return;Q=q,X=d.pointerSticky=b.sticky;const N=Q==null?[]:[Q];F&&(N.fx=u.fx,N.fy=u.fy,N.fi=u.fi);const E=m(N,c,h,p,d);if(j){if(F){const P=j.parentNode,tt=j.getAttribute("transform"),U=E.getAttribute("transform");tt?E.setAttribute("transform",tt):E.removeAttribute("transform"),U?P.setAttribute("transform",U):P.removeAttribute("transform"),E.removeAttribute("aria-label"),E.removeAttribute("aria-description"),E.removeAttribute("aria-hidden")}j.replaceWith(E)}return b.roots[v]=j=E,Q==null&&(A==null?void 0:A.size)>1||d.dispatchValue(Q==null?null:_[Q]),E}function lt(q){if(b.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[N,E]=Vy(q);N-=T,E-=$;const P=N<p.marginLeft||N>p.width-p.marginRight?1:t,tt=E<p.marginTop||E>p.height-p.marginBottom?1:e;let U=null,dt=a*a;for(const nt of u){const mt=P*(B(nt)-N),ot=tt*(z(nt)-E),rt=mt*mt+ot*ot;rt<=dt&&(U=nt,dt=rt)}if(U!=null&&(t!==1||e!==1)){const nt=B(U)-N,mt=z(U)-E;dt=nt*nt+mt*mt}Y(U,dt)}function et(q){q.pointerType==="mouse"&&Q!=null&&(b.sticky&&b.roots.some(N=>N==null?void 0:N.contains(q.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(N=>N(null))):(b.sticky=!0,J(Q)),q.stopImmediatePropagation()))}function Z(q){q.pointerType==="mouse"&&(b.sticky||Y(null))}return g.addEventListener("pointerenter",lt),g.addEventListener("pointermove",lt),g.addEventListener("pointerdown",et),g.addEventListener("pointerleave",Z),J(null)},f)}}function N7(t){return Tu(1,1,t)}function D7(t){return Tu(1,.01,t)}function F7(t){return Tu(.01,1,t)}function qg({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function Wg({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function Yg(t){return Ci(t)&&t.interval===void 0?void 0:"tabular-nums"}function L7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:l=0,marginBottom:f=16+i,marginLeft:s=0,style:u,ticks:c=(r-s-l)/64,tickFormat:h,fontVariant:p=Yg(t),round:d=!0,opacity:m,className:g}=e;const _=wu(e);g=_u(g),m=se(m)[1],h===null&&(h=()=>null);const b=Ht("svg",_).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(L=>L.append("style").text(`.${g}-ramp {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
.${g}-ramp text {
  white-space: pre;
}`)).call(yu,u);let v=L=>L.selectAll(".tick line").attr("y1",a+f-o),w;const k=d?(L,R)=>L.rangeRound(R):(L,R)=>L.range(R),{type:x,domain:S,range:T,interpolate:$,scale:F,pivot:A}=t;if($){const L=T===void 0?$:Za($.length===1?ku($):$,T);w=k(F.copy(),ze(ie(s,r-l),Math.min(S.length+(A!==void 0),T===void 0?1/0:T.length)));const R=256,W=_.document.createElement("canvas");W.width=R,W.height=1;const C=W.getContext("2d");for(let B=0,z=R-1;B<R;++B)C.fillStyle=L(B/z),C.fillRect(B,0,1,1);b.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-l).attr("height",o-a-f).attr("preserveAspectRatio","none").attr("xlink:href",W.toDataURL())}else if(x==="threshold"){const L=S,R=h===void 0?W=>W:typeof h=="string"?lr(h):h;w=k(Xs().domain([-1,T.length-1]),[s,r-l]),b.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",(W,C)=>w(C-1)).attr("y",a).attr("width",(W,C)=>w(C)-w(C-1)).attr("height",o-a-f).attr("fill",W=>W),c=qt(L,(W,C)=>C),h=W=>R(L[W],W)}else w=k(il().domain(S),[s,r-l]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-f).attr("fill",F),v=()=>{};return b.append("g").attr("transform",`translate(0,${o-f})`).call(s_(w).ticks(Array.isArray(c)?null:c,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(c)?c:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ne(p,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const Hg=Math.PI/180;function So(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=bf(n),t.markerMid=bf(i),t.markerEnd=bf(r)}function bf(t){if(t==null||t===!1)return null;if(t===!0)return Eh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Ah("auto");case"arrow-reverse":return Ah("auto-start-reverse");case"dot":return I7;case"circle":case"circle-fill":return Eh;case"circle-stroke":return R7}throw new Error(`invalid marker: ${t}`)}function Ah(t){return(e,n)=>Ht("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function I7(t,e){return Ht("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Eh(t,e){return Ht("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","white").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function R7(t,e){return Ht("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","white").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}let P7=0;function $l(t,e,{stroke:n},i){return Vg(t,e,n&&(r=>n[r]),i)}function O7(t,e,{stroke:n},i){return Vg(t,e,n&&(([r])=>n[r]),i)}function Vg(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const l=new Map;function f(s){return function(u){const c=o(u);let h=l.get(s);h||l.set(s,h=new Map);let p=h.get(c);if(!p){const d=this.parentNode.insertBefore(s(c,a),this),m=`plot-marker-${++P7}`;d.setAttribute("id",m),h.set(c,p=`url(#${m})`)}return p}}e&&t.attr("marker-start",f(e)),n&&t.attr("marker-mid",f(n)),i&&t.attr("marker-end",f(i))}function Cu({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=Xg(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function Gg({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=Xg(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function Xg(t,e,n){return t===void 0&&e===void 0&&n===void 0?pe?[1,0]:[.5,.5]:[e,n]}function jg(t,{interval:e}){return t={..._o(t)},t.interval=cu(t.interval===void 0?e:t.interval),t}function Zg(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:l,interval:f}=jg(r,n);if(l==null||f==null&&!i)return n;const s=Ti(r);if(f==null){let p;const d={transform:m=>p||(p=Kt(m,l)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?d:o,[`${t}2`]:a===void 0?d:a}}let u,c;function h(p){return c!==void 0&&p===u?c:c=qt(Kt(u=p,l),d=>f.floor(d))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:h,label:s}:o,[`${t}2`]:a===void 0?{transform:p=>h(p).map(d=>f.offset(d)),label:s}:a})}function Kg(t,e,n){const{[t]:i}=n,{value:r,interval:o}=jg(i,n);return r==null||o==null?n:e({...n,[t]:{label:Ti(i),transform:a=>{const l=qt(Kt(a,r),s=>o.floor(s)),f=l.map(s=>o.offset(s));return l.map(ye(l)?(s,u)=>s==null||isNaN(s=+s)||(u=f[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=f[u],u==null)?NaN:(+s+ +u)/2)}}})}function U7(t={}){return Zg("x",Cu,t)}function Qg(t={}){return Zg("y",Gg,t)}function z7(t={}){return Kg("x",Cu,t)}function B7(t={}){return Kg("y",Gg,t)}const Jg={ariaLabel:"rule",fill:null,stroke:"currentColor"};class q7 extends ue{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:l=a,insetBottom:f=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Cl(n,"x"),Jg),this.insetTop=Nt(l),this.insetBottom=Nt(f),So(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y1:s,y2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetTop:_,insetBottom:b}=this;return Ht("svg:g",o).call(Fe,this,r,o).call(Me,this,{x:f&&a},pe,0).call(v=>v.selectAll().data(e).enter().append("line").call(Le,this).attr("x1",f?w=>f[w]:(m+c-d)/2).attr("x2",f?w=>f[w]:(m+c-d)/2).attr("y1",s&&!ir(l)?w=>s[w]+_:p+_).attr("y2",u&&!ir(l)?l.bandwidth?w=>u[w]+l.bandwidth()-b:w=>u[w]-b:h-g-b).call($n,this,i).call($l,this,i,o)).node()}}class W7 extends ue{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:l=a,insetLeft:f=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},Cl(n,"y"),Jg),this.insetRight=Nt(l),this.insetLeft=Nt(f),So(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{y:f,x1:s,x2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetLeft:_,insetRight:b}=this;return Ht("svg:g",o).call(Fe,this,r,o).call(Me,this,{y:f&&l},0,pe).call(v=>v.selectAll().data(e).enter().append("line").call(Le,this).attr("x1",s&&!ir(a)?w=>s[w]+_:m+_).attr("x2",u&&!ir(a)?a.bandwidth?w=>u[w]+a.bandwidth()-b:w=>u[w]-b:c-d-b).attr("y1",f?w=>f[w]:(p+h-g)/2).attr("y2",f?w=>f[w]:(p+h-g)/2).call($n,this,i).call($l,this,i,o)).node()}}function Al(t,e){let{x:n=ae,y:i,y1:r,y2:o,...a}=Qg(e);return[r,o]=e2(i,r,o),new q7(t,{...a,x:n,y1:r,y2:o})}function t2(t,e){let{y:n=ae,x:i,x1:r,x2:o,...a}=U7(e);return[r,o]=e2(i,r,o),new W7(t,{...a,y:n,x1:r,x2:o})}function e2(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function $u(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const Y7={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},n2="";class Au extends ue{constructor(e,n={}){const{x:i,y:r,text:o=Zn(e)&&ag(e)?ae:bl,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:f=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:c,monospace:h,fontFamily:p=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:g,fontWeight:_,rotate:b}=n,[v,w]=se(b,0),[k,x]=Z7(d);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:k,optional:!0},rotate:{value:y4(v),optional:!0},text:{value:o,filter:iu,optional:!0}},n,Y7),this.rotate=w,this.textAnchor=ne(l,"middle"),this.lineAnchor=Ve(f,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=i2(c),this.monospace=!!h,this.fontFamily=fe(p),this.fontSize=x,this.fontStyle=fe(m),this.fontVariant=fe(g),this.fontWeight=fe(_),this.frameAnchor=vl(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=o2(this),this.clipLine=a2(this)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,rotate:u,text:c,title:h,fontSize:p}=i,{rotate:d}=this,[m,g]=xo(this,r);return Ht("svg:g",o).call(Fe,this,r,o).call(r2,this,c,r).call(Me,this,{x:f&&a,y:s&&l}).call(_=>_.selectAll().data(e).enter().append("text").call(Le,this).call(H7,this,c,h).attr("transform",$u`translate(${f?b=>f[b]:m},${s?b=>s[b]:g})${u?b=>` rotate(${u[b]})`:d?` rotate(${d})`:""}`).call(_t,"font-size",p&&(b=>p[b])).call($n,this,i)).node()}}function i2(t){return t==null?null:Ve(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function H7(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:l,clipLine:f}=e;t.each(function(s){const u=l(vi(n[s])??"").map(f),c=u.length,h=r==="top"?.71:r==="bottom"?1-c:(164-c*100)/200;if(c>1){let p=0;for(let d=0;d<c;++d){if(++p,!u[d])continue;const m=this.ownerDocument.createElementNS(Hi.svg,"tspan");m.setAttribute("x",0),d===p-1?m.setAttribute("y",`${(h+d)*o}em`):m.setAttribute("dy",`${p*o}em`),m.textContent=u[d],this.appendChild(m),p=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const p=this.ownerDocument.createElementNS(Hi.svg,"title");p.textContent=n[s],this.appendChild(p)}})}function El(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=yl(e,n)),new Au(t,{...i,x:e,y:n})}function V7(t,{x:e=ae,...n}={}){return new Au(t,B7({...n,x:e}))}function G7(t,{y:e=ae,...n}={}){return new Au(t,z7({...n,y:e}))}function r2(t,e,n){_t(t,"text-anchor",e.textAnchor),_t(t,"font-family",e.fontFamily),_t(t,"font-size",e.fontSize),_t(t,"font-style",e.fontStyle),_t(t,"font-variant",e.fontVariant===void 0?X7(n):e.fontVariant),_t(t,"font-weight",e.fontWeight)}function X7(t){return t&&(x4(t)||ye(t))?"tabular-nums":void 0}const j7=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function Z7(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),j7.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function K7(t,e,n){const i=[];let r,o=0;for(const[a,l,f]of Q7(t)){if(r===void 0&&(r=a),o>r&&n(t,r,l)>e&&(i.push(t.slice(r,o)+(t[o-1]===n2?"-":"")),r=a),f){i.push(t.slice(r,l)),r=void 0;continue}o=l}return i}function*Q7(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case n2:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Nh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Eu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=ur(t,r))i+=Nh[t[r]]??(f2(t,r)?120:Nh.e);return i}function Nu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=ur(t,r))i+=f2(t,r)?200:100;return i}function o2({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?Nu:Eu,r=e*100;return o=>K7(o,r,i)}function a2({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?Nu:Eu,r=e*100;switch(n){case"clip-start":return o=>Fh(o,r,i,"");case"clip-end":return o=>Dh(o,r,i,"");case"ellipsis-start":return o=>Fh(o,r,i,qi);case"ellipsis-middle":return o=>J7(o,r,i,qi);case"ellipsis-end":return o=>Dh(o,r,i,qi)}}const qi="";function rr(t,e,n,i){const r=[];let o=0;for(let a=0,l=0,f=t.length;a<f;a=l){l=ur(t,a);const s=n(t,a,l);if(o+s>e){for(o+=i;o>e&&a>0;)l=a,a=r.pop(),o-=n(t,a,l);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function Dh(t,e,n,i){t=t.trim();const r=n(i),[o]=rr(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function J7(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,l]=rr(t,e/2,n,o),[f]=rr(t,r-e/2-l+o,n,-o);return f<0?i:t.slice(0,a).trimEnd()+i+t.slice(ur(t,f)).trimStart()}function Fh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=rr(t,r-e+o,n,-o);return a<0?i:i+t.slice(ur(t,a)).trimStart()}const ks=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Lh=/\p{Extended_Pictographic}/uy;function ur(t,e){return e+=t9(t,e)?2:1,n9(t,e)&&(e=ks.lastIndex),e9(t,e)?ur(t,e+1):e}function l2(t,e){return t.charCodeAt(e)<128}function t9(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function e9(t,e){return t.charCodeAt(e)===8205}function n9(t,e){return l2(t,e)?!1:(ks.lastIndex=e,ks.test(t))}function f2(t,e){return l2(t,e)?!1:(Lh.lastIndex=e,Lh.test(t))}const i9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},s2=3.5,r9=s2*5,u2={draw(t,e,n){const i=e*n/r9;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},o9={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},a9=new Map([["arrow",u2],["spike",o9]]);function l9(t){return t&&typeof t.draw=="function"}function f9(t){if(l9(t))return t;const e=a9.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class c2 extends ue{constructor(e,n={}){const{x:i,y:r,r:o=s2,length:a,rotate:l,shape:f=u2,anchor:s="middle",frameAnchor:u}=n,[c,h]=se(a,12),[p,d]=se(l,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,i9),this.r=+o,this.length=h,this.rotate=d,this.shape=f9(f),this.anchor=Ve(s,"anchor",["start","middle","end"]),this.frameAnchor=vl(u)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,length:u,rotate:c}=i,{length:h,rotate:p,anchor:d,shape:m,r:g}=this,[_,b]=xo(this,r);return Ht("svg:g",o).call(Fe,this,r,o).call(Me,this,{x:f&&a,y:s&&l}).call(v=>v.selectAll().data(e).enter().append("path").call(Le,this).attr("transform",$u`translate(${f?w=>f[w]:_},${s?w=>s[w]:b})${c?w=>` rotate(${c[w]})`:p?` rotate(${p})`:""}${d==="start"?"":d==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const k=In();return m.draw(k,u[w],g),k}:(()=>{const w=In();return m.draw(w,h,g),w})()).call($n,this,i)).node()}}function s9(t,e={}){const{x:n=ae,...i}=e;return new c2(t,{...i,x:n})}function u9(t,e={}){const{y:n=ae,...i}=e;return new c2(t,{...i,y:n})}function Qn(t,e){return arguments.length<2&&!Zn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Nl({anchor:t}={},e){return t===void 0?e[0]:Ve(t,"anchor",e)}function h2(t){return Nl(t,["left","right"])}function d2(t){return Nl(t,["right","left"])}function p2(t){return Nl(t,["bottom","top"])}function m2(t){return Nl(t,["top","bottom"])}function g2(){const[t,e]=Qn(...arguments);return _2("y",h2(e),t,e)}function c9(){const[t,e]=Qn(...arguments);return _2("fy",d2(e),t,e)}function b2(){const[t,e]=Qn(...arguments);return y2("x",p2(e),t,e)}function h9(){const[t,e]=Qn(...arguments);return y2("fx",m2(e),t,e)}function _2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="y"?6:0,tickPadding:m,tickRotate:g,x:_,margin:b,marginTop:v=b===void 0?20:b,marginRight:w=b===void 0?e==="right"?40:0:b,marginBottom:k=b===void 0?20:b,marginLeft:x=b===void 0?e==="left"?40:0:b,label:S,labelAnchor:T,labelArrow:$,labelOffset:F,...A}){return d=Nt(d),m=Nt(m),g=Nt(g),T!==void 0&&(T=Ve(T,"labelAnchor",["center","top","bottom"])),$=C2($),zg(d&&!he(o)?d9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:g,x:_,...A}):null,he(f)?null:m9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:g,x:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...A}),!he(f)&&S!==null?El([],k2({fill:f,fillOpacity:s,...A},function(L,R,W,C,B){const z=C[t],{marginTop:Q,marginRight:j,marginBottom:X,marginLeft:O}=t==="y"&&B.inset||B,Y=T??(z.bandwidth?"center":"top"),J=F??(e==="right"?j:O)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${e}`,this.rotate=0),this.dy=Y==="top"?3-Q:Y==="bottom"?X-3:0,this.dx=e==="right"?J:-J,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[T2(t,z,{anchor:e,label:S,labelAnchor:Y,labelArrow:$})]}}}})):null)}function y2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="x"?6:0,tickPadding:m,tickRotate:g,y:_,margin:b,marginTop:v=b===void 0?e==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:k=b===void 0?e==="bottom"?30:0:b,marginLeft:x=b===void 0?20:b,label:S,labelAnchor:T,labelArrow:$,labelOffset:F,...A}){return d=Nt(d),m=Nt(m),g=Nt(g),T!==void 0&&(T=Ve(T,"labelAnchor",["center","left","right"])),$=C2($),zg(d&&!he(o)?p9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:g,y:_,...A}):null,he(f)?null:g9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:g,y:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...A}),!he(f)&&S!==null?El([],k2({fill:f,fillOpacity:s,...A},function(L,R,W,C,B){const z=C[t],{marginTop:Q,marginRight:j,marginBottom:X,marginLeft:O}=t==="x"&&B.inset||B,Y=T??(z.bandwidth?"center":"right"),J=F??(e==="top"?Q:X)-3;return Y==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-J:J,this.dx=Y==="right"?j-3:Y==="left"?3-O:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[T2(t,z,{anchor:e,label:S,labelAnchor:Y,labelArrow:$})]}}}})):null)}function d9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetLeft:u=s,insetRight:c=s,dx:h=0,y:p=t==="y"?void 0:null,...d}){return cr(u9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:l,y:p,...d,dx:e==="left"?+h-pe+ +u:+h+pe-c,anchor:"start",length:f,shape:e==="left"?M9:S9})}function p9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetTop:u=s,insetBottom:c=s,dy:h=0,x:p=t==="x"?void 0:null,...d}){return cr(s9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:l,x:p,...d,dy:e==="bottom"?+h-pe-c:+h+pe+ +u,anchor:"start",length:f,shape:e==="bottom"?x9:k9})}function m9(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Hg):0),text:f,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:c,inset:h=0,insetLeft:p=h,insetRight:d=h,dx:m=0,y:g=t==="y"?void 0:null,..._}){return cr(G7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,y:g,..._,dx:e==="left"?+m-o-l+ +p:+m+ +o+ +l-d},function(b,v,w,k,x){c===void 0&&(this.fontVariant=S2(b)),f===void 0&&(x.text=M2(b,v,w,k,e))})}function g9(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Hg):0),text:f,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:c,inset:h=0,insetTop:p=h,insetBottom:d=h,dy:m=0,x:g=t==="x"?void 0:null,..._}){return cr(V7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f===void 0?null:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,x:g,..._,dy:e==="bottom"?+m+ +o+ +l-d:+m-o-l+ +p},function(b,v,w,k,x){c===void 0&&(this.fontVariant=S2(b)),f===void 0&&(x.text=M2(b,v,w,k,e))})}function b9(){const[t,e]=Qn(...arguments);return w2("y",h2(e),t,e)}function _9(){const[t,e]=Qn(...arguments);return w2("fy",d2(e),t,e)}function y9(){const[t,e]=Qn(...arguments);return v2("x",p2(e),t,e)}function w9(){const[t,e]=Qn(...arguments);return v2("fx",m2(e),t,e)}function w2(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...l}){return cr(t2,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...x2(l)})}function v2(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...l}){return cr(Al,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...x2(l)})}function x2({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function k2({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u=!1},c){return[,t]=Sn(t),[,e]=se(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u,initializer:c}}function cr(t,e,n,i,r,o,a){let l;function f(c,h,p,d,m,g){const _=c==null&&(e==="fx"||e==="fy"),{[e]:b}=d;if(!b)throw new Error(`missing scale: ${e}`);const v=b.domain();let{interval:w,ticks:k,tickFormat:x,tickSpacing:S=e==="x"?80:35}=o;if(typeof k=="string"&&$2(b)&&(w=k,k=void 0),k===void 0&&(k=sr(w,b.type)??v9(b,S)),c==null){if(Zn(k))c=xe(k);else if(Pi(k))c=_f(k,...Ce(v));else if(b.interval){let $=b.interval;if(b.ticks){const[F,A]=Ce(v),L=(A-F)/$[go];$=rh($,L/k)??$,c=_f($,F,A)}else{c=v;const F=c.length;$=rh($,F/k)??$,$!==b.interval&&(c=_f($,...Ce(c)))}if($===b.interval){const F=Math.round(c.length/k);F>1&&(c=c.filter((A,L)=>L%F===0))}}else b.ticks?c=b.ticks(k):c=v;if(!b.ticks&&c.length&&c!==v){const $=new Ya(v);c=c.filter(F=>$.has(F)),c.length||Rn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?h=[Tn(c)]:l[e]={scale:e,value:ae}}a==null||a.call(this,b,c,k,x,l);const T=Object.fromEntries(Object.entries(l).map(([$,F])=>[$,{...F,value:Kt(c,F.value)}]));return _&&(h=g.filterFacets(c,T)),{data:c,facets:h,channels:T}}const s=nr(o).initializer,u=t(r,nr({...o,initializer:f},s));return r==null?(l=u.channels,u.channels={}):l={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function v9(t,e){const[n,i]=Ce(t.range());return(i-n)/e}function M2(t,e,n,i,r){return{value:Du(t,e,n,i,r)}}function Du(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&ye(e)?r4(e,r)??vi:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?vi:typeof i=="string"?(ye(t.domain())?po:lr)(i):bo(i)}function _f(t,e,n){return t.range(e,t.offset(t.floor(n)))}const x9={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},k9={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},M9={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},S9={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function S2(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function T9(t){return Math.sign(er(t.domain()))*Math.sign(er(t.range()))}function T2(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&$2(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[]/.test(i)),!o)return i;if(o===!0){const a=T9(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${i}`;case"right":return`${i} `;case"up":return n==="right"?`${i} `:` ${i}`;case"down":return n==="right"?`${i} `:` ${i}`}return i}}function C2(t="auto"){return he(t)?!1:typeof t=="boolean"?t:Ve(t,"labelArrow",["auto","up","right","down","left"])}function $2(t){return ye(t.domain())}function Ih(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function C9(t,{opacity:e,...n}={}){if(!Ci(t)&&!Ug(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return A2(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",se(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function $9(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:he(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...l}={},f){const[c,h]=Sn(e),[p,d]=Sn(i),m=Ih(f,c),g=Ih(f,p),_=a*a*Math.PI;return n=se(n)[1],r=se(r)[1],o=se(o)[1],A2(t,l,(b,v,w,k)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",k).attr("fill",c==="color"?x=>m.scale(x):h).attr("fill-opacity",n).attr("stroke",p==="color"?x=>g.scale(x):d).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",x=>{const S=In();return t.scale(x).draw(S,_),S}))}function A2(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=Yg(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:f=a,marginLeft:s=0,className:u,style:c,width:h}=e;const p=wu(e);u=_u(u),r=Du(t.scale,t.domain,void 0,r);const d=Ht("div",p).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`.${u}-swatches-columns .${u}-swatch {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
.${u}-swatches-columns .${u}-swatch::before {
  flex-shrink: 0;
}
.${u}-swatches-columns .${u}-swatch-label {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,l,f).call(g=>g.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`.${u}-swatches-wrap {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
.${u}-swatches-wrap .${u}-swatch {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,l,f).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),d.call(g=>g.insert("style","*").text(`.${u}-swatches {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
.${u}-swatch > svg {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",ne(o,"normal")).call(yu,c).node()}const Ms=new Map([["symbol",$9],["color",N2],["opacity",E9]]);function A9(t,e,n={}){return(i,r)=>{if(!Ms.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return Ms.get(i)(t[i],E2(e,n[i],r),o=>t[o])}}function E2({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return T4(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function N2(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return C9(t,n);case"ramp":return L7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function E9({type:t,interpolate:e,...n},{legend:i=!0,color:r=Wn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return N2({type:t,...n,interpolate:N9(r)},{legend:i,...o})}function N9(t){const{r:e,g:n,b:i}=Wn(t)||Wn(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function D9(t,e,n){const i=[];for(const[r,o]of Ms){const a=n[r];if(a!=null&&a.legend&&r in t){const l=o(t[r],E2(e,t[r],a),f=>t[f]);l!=null&&i.push(l)}}return i}const F9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},L9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class I9 extends ue{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:l=i,rx:f,ry:s}=e;super(na,void 0,e,n==null?F9:L9),this.anchor=ng(n,"anchor",["top","right","bottom","left"]),this.insetTop=Nt(r),this.insetRight=Nt(o),this.insetBottom=Nt(a),this.insetLeft=Nt(l),this.rx=Nt(f),this.ry=Nt(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:l,marginBottom:f,marginLeft:s,width:u,height:c}=r,{anchor:h,insetTop:p,insetRight:d,insetBottom:m,insetLeft:g,rx:_,ry:b}=this,v=s+g,w=u-l-d,k=a+p,x=c-f-m;return Ht(h?"svg:line":"svg:rect",o).datum(0).call(Fe,this,r,o).call(Le,this).call($n,this,i).call(Me,this,{}).call(h==="left"?S=>S.attr("x1",v).attr("x2",v).attr("y1",k).attr("y2",x):h==="right"?S=>S.attr("x1",w).attr("x2",w).attr("y1",k).attr("y2",x):h==="top"?S=>S.attr("x1",v).attr("x2",w).attr("y1",k).attr("y2",k):h==="bottom"?S=>S.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):S=>S.attr("x",v).attr("y",k).attr("width",w-v).attr("height",x-k).attr("rx",_).attr("ry",b)).node()}}function R9(t){return new I9(t)}const yf={ariaLabel:"tip",fill:"white",stroke:"currentColor"},P9=new Set(["geometry","href","src","ariaLabel","scales"]);class O9 extends ue{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&Zn(e)&&ag(e)&&(n={...n,title:ae});const{x:i,y:r,x1:o,x2:a,y1:l,y2:f,anchor:s,monospace:u,fontFamily:c=u?"ui-monospace, monospace":void 0,fontSize:h,fontStyle:p,fontVariant:d,fontWeight:m,lineHeight:g=1,lineWidth:_=20,frameAnchor:b,format:v,textAnchor:w="start",textOverflow:k,textPadding:x=8,title:S,pointerSize:T=12,pathFilter:$="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:l!=null&&f!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:f==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:f,scale:"y",optional:l==null},title:{value:S,optional:!0}},n,yf),this.anchor=lg(s,"anchor"),this.previousAnchor=this.anchor??"top-left",this.frameAnchor=vl(b),this.textAnchor=ne(w,"middle"),this.textPadding=+x,this.pointerSize=+T,this.pathFilter=fe($),this.lineHeight=+g,this.lineWidth=+_,this.textOverflow=i2(k),this.monospace=!!u,this.fontFamily=fe(c),this.fontSize=Nt(h),this.fontStyle=fe(p),this.fontVariant=fe(d),this.fontWeight=fe(m);for(const F in yf)F in this.channels&&(this[F]=yf[F]);this.splitLines=o2(this),this.clipLine=a2(this),this.format={...v}}render(e,n,i,r,o){const a=this,{x:l,y:f,fx:s,fy:u}=n,{ownerSVGElement:c,document:h}=o,{anchor:p,monospace:d,lineHeight:m,lineWidth:g}=this,{textPadding:_,pointerSize:b,pathFilter:v}=this,{marginTop:w,marginLeft:k}=r,{x1:x,y1:S,x2:T,y2:$,x:F=x??T,y:A=S??$}=i,L=s?s(e.fx)-k:0,R=u?u(e.fy)-w:0,[W,C]=xo(this,r),B=qg(i,W),z=Wg(i,C),Q=d?Nu:Eu,j=Q(qi);let X,O;"title"in i?(X=i.channels,O=Y9):(X=W9.call(this,i,n),O=H9);const Y=Ht("svg:g",o).call(Fe,this,r,o).call(r2,this).call(Me,this,{x:F&&l,y:A&&f}).call(et=>et.selectAll().data(e).enter().append("g").attr("transform",Z=>`translate(${Math.round(B(Z))},${Math.round(z(Z))})`).call(Le,this).call(Z=>Z.append("path").attr("filter",v)).call(Z=>Z.append("text").each(function(q){const N=Dr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const E=O.call(a,q,e,X,n,i);if(typeof E=="string")for(const P of a.splitLines(E))J(N,{value:a.clipLine(P)});else{const P=new Set;for(const tt of E){const{label:U=""}=tt;U&&P.has(U)||(P.add(U),J(N,tt))}}})));function J(et,{label:Z,value:q,color:N,opacity:E}){Z??(Z=""),q??(q="");const P=N!=null||E!=null;let tt,U=g*100;const[dt]=rr(Z,U,Q,j);if(dt>=0)Z=Z.slice(0,dt).trimEnd()+qi,tt=q.trim(),q="";else{(Z||!q&&!P)&&(q=" "+q);const[mt]=rr(q,U-Q(Z),Q,j);mt>=0&&(q=q.slice(0,mt).trimEnd()+qi,tt=q.trim())}const nt=et.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");Z&&nt.append("tspan").attr("font-weight","bold").text(Z),q&&nt.append(()=>h.createTextNode(q)),P&&nt.append("tspan").text(" ").attr("fill",N).attr("fill-opacity",E).style("user-select","none"),tt&&nt.append("title").text(tt)}function lt(){const{width:et,height:Z}=r.facet??r;Y.selectChildren().each(function(q){let{x:N,width:E,height:P}=this.getBBox();E=Math.round(E),P=Math.round(P);let tt=p;if(tt===void 0){tt=a.previousAnchor;const nt=B(q)+L,mt=z(q)+R,ot=nt+E+_*2<et,rt=nt-E-_*2>0,Vt=mt+P+b+_*2+7<Z,ee=mt-P-b-_*2>0,bt=(/-left$/.test(tt)?ot||!rt:ot&&!rt)?"left":"right",Dt=(/^top-/.test(tt)?Vt||!ee:Vt&&!ee)?"top":"bottom";tt=a.previousAnchor=`${Dt}-${bt}`}const U=this.firstChild,dt=this.lastChild;if(U.setAttribute("d",q9(tt,b,_,E,P)),N)for(const nt of dt.childNodes)nt.setAttribute("x",-N);dt.setAttribute("y",`${+z9(tt,dt.childNodes.length,m).toFixed(6)}em`),dt.setAttribute("transform",`translate(${B9(tt,b,_,E,P)})`)}),Y.attr("visibility",null)}return e.length&&(Y.attr("visibility","hidden"),c.isConnected?Promise.resolve().then(lt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(lt)),Y.node()}}function U9(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=yl(e,n)),new O9(t,{...i,x:e,y:n})}function z9(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function B9(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function q9(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function W9({channels:t},e){var r,o;const n={};let i=this.format;i=Rh(i,t,"x"),i=Rh(i,t,"y"),this.format=i;for(const a in i){const l=i[a];if(!(l===null||l===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const f=dh(t,a);f&&(n[a]=f)}}for(const a in t){if(a in n||a in i||P9.has(a))continue;const l=dh(t,a);l&&(n[a]=l)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const l=this.format[a];if(typeof l=="string"){const f=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(ye(f)?po:lr)(l)}else if(l===void 0||l===!0){const f=e[a];this.format[a]=f!=null&&f.bandwidth?Du(f,f.domain()):vi}}return n}function Rh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([l])=>l===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function Y9(t,e,{title:n}){return vi(n.value[t],t)}function*H9(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:za(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Oh(i,n,"x"),value:Ph(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Oh(i,n,"y"),value:Ph(this.format.y2,n.y1,a,t)};else{const l=a.value[t],f=a.scale;if(!Hn(l)&&f==null)continue;yield{label:za(i,n,o),value:this.format[o](l,t),color:f==="color"?r[o][t]:null,opacity:f==="opacity"?r[o][t]:null}}}}function Ph(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}${t(n.value[i],i)}`}function Oh(t,e,n){const i=za(t,e,`${n}1`,n),r=za(t,e,`${n}2`,n);return i===r?i:`${i}${r}`}function za(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function Ie(t={}){var j;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:l}=t,f=_u(t.className),s=t.marks===void 0?[]:zh(t.marks);s.push(...J9(s));const u=K9(e,t),c=new Map;for(const X of s){const O=Bh(X,u,t);O&&c.set(X,O)}const h=new Map;u&&wr(h,[u],t),wr(h,c,t);const p=zh(tx(s,h,t));for(const X of p){const O=Bh(X,u,t);O&&c.set(X,O)}s.unshift(...p);let d=b7(h,t);if(d!==void 0){const X=u?gf(d,u):void 0;for(const Y of s){if(Y.facet===null||Y.facet==="super")continue;const J=c.get(Y);J!==void 0&&(J.facetsIndex=Y.fx!=null||Y.fy!=null?gf(d,J):X)}const O=new Set;for(const{facetsIndex:Y}of c.values())Y==null||Y.forEach((J,lt)=>{(J==null?void 0:J.length)>0&&O.add(lt)});d.forEach(0<O.size&&O.size<d.length?(Y,J)=>Y.empty=!O.has(J):Y=>Y.empty=!1);for(const Y of s)if(Y.facet==="exclude"){const J=c.get(Y);J!==void 0&&(J.facetsIndex=w7(J.facetsIndex))}}for(const X of Ut.keys())gs(t[X])&&X!=="fx"&&X!=="fy"&&h.set(X,[]);const m=new Map;for(const X of s){if(m.has(X))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:O,channels:Y}=c.get(X)??{},{data:J,facets:lt,channels:et}=X.initialize(O,Y,t);Fu(et,t),m.set(X,{data:J,facets:lt,channels:et})}const g=vs(wr(h,m,t),t),_=m7(g,s,t);a7(g,_);const b=xh(g),{fx:v,fy:w}=b,k=v||w?Rg(g,_):_,x=v||w?lx(b,_):_,S=wu(t),T=S.document,$=Ga("svg").call(T.documentElement);let F=$;S.ownerSVGElement=$,S.className=f,S.projection=y8(t,k),S.filterFacets=(X,O)=>gf(d,{channels:O,groups:Su(X,O)}),S.getMarkState=X=>{const O=m.get(X),Y=c.get(X);return{...O,channels:{...O.channels,...Y==null?void 0:Y.channels}}},S.dispatchValue=X=>{F.value!==X&&(F.value=X,F.dispatchEvent(new Event("input",{bubbles:!0})))};const A=new Set;for(const[X,O]of m)if(X.initializer!=null){const Y=X.facet==="super"?x:k,J=X.initializer(O.data,O.facets,O.channels,b,Y,S);if(J.data!==void 0&&(O.data=J.data),J.facets!==void 0&&(O.facets=J.facets),J.channels!==void 0){const{fx:lt,fy:et,...Z}=J.channels;Z9(Z),Object.assign(O.channels,Z);for(const q of Object.values(Z)){const{scale:N}=q;N!=null&&!$4(Ut.get(N))&&(D2(q,t),A.add(N))}(lt!=null||et!=null)&&c.set(X,!0)}}if(A.size){const X=new Map;wr(X,m,t,lt=>A.has(lt)),wr(h,m,t,lt=>A.has(lt));const O=ax(vs(X,t),g),{scales:Y,...J}=xh(O);Object.assign(g,O),Object.assign(b,J),Object.assign(b.scales,Y)}let L,R;d!==void 0&&(L={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},d=_7(d,L),R=y7(v,w,_));for(const[X,O]of m)O.values=X.scale(O.channels,b,S);const{width:W,height:C}=_;Dr($).attr("class",f).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",W).attr("height",C).attr("viewBox",`0 0 ${W} ${C}`).attr("aria-label",a).attr("aria-description",l).call(X=>X.append("style").text(`.${f} {
  display: block;
  background: white;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
.${f} text,
.${f} tspan {
  white-space: pre;
}`)).call(yu,n);for(const X of s){const{channels:O,values:Y,facets:J}=m.get(X);if(d===void 0||X.facet==="super"){let lt=null;if(J&&(lt=J[0],lt=X.filter(lt,O,Y),lt.length===0))continue;const et=X.render(lt,b,Y,x,S);if(et==null)continue;$.appendChild(et)}else{let lt;for(const et of d){if(!(((j=X.facetAnchor)==null?void 0:j.call(X,d,L,et))??!et.empty))continue;let Z=null;if(J){const N=c.has(X);if(Z=J[N?et.i:0],Z=X.filter(Z,O,Y),Z.length===0)continue;!N&&Z===J[0]&&(Z=m4(Z)),Z.fx=et.x,Z.fy=et.y,Z.fi=et.i}const q=X.render(Z,b,Y,k,S);if(q!=null){(lt??(lt=Dr($).append("g"))).append(()=>q).datum(et);for(const N of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(N)&&(lt.attr(N,q.getAttribute(N)),q.removeAttribute(N))}}lt==null||lt.selectChildren().attr("transform",R)}}const B=D9(g,S,t),{figure:z=i!=null||r!=null||o!=null||B.length>0}=t;z&&(F=T.createElement("figure"),F.className=`${f}-figure`,F.style.maxWidth="initial",i!=null&&F.append(Uh(T,i,"h2")),r!=null&&F.append(Uh(T,r,"h3")),F.append(...B,$),o!=null&&F.append(V9(T,o))),F.scale=d7(b.scales),F.legend=A9(g,S,t);const Q=l8();return Q>0&&Dr($).append("text").attr("x",W).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${Q.toLocaleString("en-US")} warning${Q===1?"":"s"}. Please check the console.`),F}function Uh(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function V9(t,e){const n=t.createElement("figcaption");return n.append(e),n}function G9({marks:t=[],...e}={}){return Ie({...e,marks:[...t,this]})}ue.prototype.plot=G9;function zh(t){return t.flat(1/0).filter(e=>e!=null).map(X9)}function X9(t){return typeof t.render=="function"?t:new j9(t)}class j9 extends ue{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Fu(t,e){for(const n in t)D2(t[n],e);return t}function D2(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:l=o?f=>f*100:og(a,r)}=e[n]??{};l!=null&&(t.value=qt(t.value,l),t.transform=!1)}function Z9(t){for(const e in t)mg(e,t[e])}function wr(t,e,n,i=s4){var r,o;for(const{channels:a}of e.values())for(const l in a){const f=a[l],{scale:s}=f;if(s!=null&&i(s))if(s==="projection"){if(!k8(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,c=((o=n.y)==null?void 0:o.domain)===void 0;if(u||c){const[h,p]=S8(f);u&&wf(t,"x",h),c&&wf(t,"y",p)}}}else wf(t,s,f)}return t}function wf(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function K9(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=xe(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Kr(r,{value:n,scale:"fx"})),i!=null&&(o.fy=Kr(r,{value:i,scale:"fy"})),Fu(o,e);const a=Su(r,o);return{channels:o,groups:a,data:t.data}}function Bh(t,e,n){var f;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=xe(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=Kr(s,{value:i,scale:"fx"})),r!=null&&(u.fy=Kr(s,{value:r,scale:"fy"})),Fu(u,n),{channels:u,groups:Su(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:o,groups:a};l.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((f=xe(t.data))==null?void 0:f.length)===l.length&&Rn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function Q9(t,e={}){return nr({...e,x:null,y:null},(n,i,r,o,a,l)=>l.getMarkState(t))}function J9(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r}=i;r=/^x$/i.test(r)?D7:/^y$/i.test(r)?F7:N7,i=r(Q9(n,i)),i.title=null;const o=U9(n.data,i);o.facet=n.facet,o.facetAnchor=n.facetAnchor,e.push(o)}}return e}function tx(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:l={},axis:f,grid:s,facet:u={},facet:{axis:c=f,grid:h}=u,x:{axis:p=f,grid:d=p===null?null:s}=r,y:{axis:m=f,grid:g=m===null?null:s}=o,fx:{axis:_=c,grid:b=_===null?null:h}=a,fy:{axis:v=c,grid:w=v===null?null:h}=l}=n;(i||!gs(r)&&!qh("x",t))&&(p=d=null),(i||!gs(o)&&!qh("y",t))&&(m=g=null),e.has("fx")||(_=b=null),e.has("fy")||(v=w=null),p===void 0&&(p=!Go(t,"x")),m===void 0&&(m=!Go(t,"y")),_===void 0&&(_=!Go(t,"fx")),v===void 0&&(v=!Go(t,"fy")),p===!0&&(p="bottom"),m===!0&&(m="left"),_===!0&&(_=p==="top"||p===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const k=[];return Vo(k,w,_9,l),Ho(k,v,c9,"right","left",u,l),Vo(k,b,w9,a),Ho(k,_,h9,"top","bottom",u,a),Vo(k,g,b9,o),Ho(k,m,g2,"left","right",n,o),Vo(k,d,y9,r),Ho(k,p,b2,"bottom","top",n,r),k}function Ho(t,e,n,i,r,o,a){if(!e)return;const l=ex(e);a=nx(l?i:e,o,a);const{line:f}=a;(n===g2||n===b2)&&f&&!Zr(f)&&t.push(R9(ix(a))),t.push(n(a)),l&&t.push(n({...a,anchor:r,label:null}))}function Vo(t,e,n,i){!e||Zr(e)||t.push(n(rx(e,i)))}function ex(t){return/^\s*both\s*$/i.test(t)}function nx(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h=e.label,labelAnchor:p,labelArrow:d=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h,labelAnchor:p,labelArrow:d,labelOffset:m}}function ix(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function rx(t,{stroke:e=wl(t)?t:void 0,ticks:n=ox(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function ox(t){switch(typeof t){case"number":return!0;case"string":return!wl(t)}return Zn(t)||typeof(t==null?void 0:t.range)=="function"}function Go(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function qh(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function ax(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function lx({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Mu(n),s=t&&Wh(t),u=e&&Wh(e);return{marginTop:e?u[0]:i,marginRight:t?l-s[1]:r,marginBottom:e?f-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:f}}function Wh(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const fx=new Map([["basis",R5],["basis-closed",P5],["basis-open",O5],["bundle",U5],["bump-x",S5],["bump-y",T5],["cardinal",z5],["cardinal-closed",B5],["cardinal-open",q5],["catmull-rom",W5],["catmull-rom-closed",Y5],["catmull-rom-open",H5],["linear",mo],["linear-closed",V5],["monotone-x",G5],["monotone-y",X5],["natural",j5],["step",Z5],["step-after",Q5],["step-before",K5]]);function F2(t=mo,e){if(typeof t=="function")return t;const n=fx.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function L2(t=or,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?or:F2(t,e)}function or(t){return mo(t)}function sx(t={y:"count"},e={}){[t,e]=hx(t,e);const{x:n,y:i}=e;return cx(dx(n,e,ae),null,null,i,t,Cu(e))}function ux(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=bu}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function I2(t={}){return ux(sx,"y",Cl(t,"x"))}function cx(t,e,n,i,{data:r=pg,filter:o=Ua,sort:a,reverse:l,...f}={},s={}){t=Yh(t),e=Yh(e),f=mx(f,s),r=O2(r,ae),a=a==null?void 0:R2("sort",a,s),o=o==null?void 0:P2("filter",o,s),n!=null&&Bo(f,"x","x1","x2")&&(n=null),i!=null&&Bo(f,"y","y1","y2")&&(i=null);const[u,c]=dn(t),[h,p]=dn(t),[d,m]=dn(e),[g,_]=dn(e),[b,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,k]=dn(b),{x,y:S,z:T,fill:$,stroke:F,x1:A,x2:L,y1:R,y2:W,domain:C,cumulative:B,thresholds:z,interval:Q,...j}=s,[X,O]=dn(T),[Y]=Sn($),[J]=Sn(F),[lt,et]=dn(Y),[Z,q]=dn(J);return{..."z"in s&&{z:X||T},..."fill"in s&&{fill:lt||$},..."stroke"in s&&{stroke:Z||F},...kl(j,(N,E,P)=>{const tt=rg(Kt(N,b),P==null?void 0:P[v]),U=Kt(N,T),dt=Kt(N,Y),nt=Kt(N,J),mt=q4(f,{z:U,fill:dt,stroke:nt}),ot=[],rt=[],Vt=tt&&k([]),ee=U&&O([]),bt=dt&&et([]),Dt=nt&&q([]),Et=t&&c([]),zt=t&&p([]),st=e&&m([]),St=e&&_([]),Bt=_x(t==null?void 0:t(N),e==null?void 0:e(N));let To=0;for(const fn of f)fn.initialize(N);a&&a.initialize(N),o&&o.initialize(N);for(const fn of E){const hr=[];for(const pt of f)pt.scope("facet",fn);a&&a.scope("facet",fn),o&&o.scope("facet",fn);for(const[pt,Ge]of sh(fn,mt))for(const[Q2,Co]of sh(Ge,tt))for(const[Xe,Jn]of Bt(Co))if(!(o&&!o.reduce(Xe,Jn))){hr.push(To++),rt.push(r.reduceIndex(Xe,N,Jn)),tt&&Vt.push(Q2),U&&ee.push(mt===U?pt:U[(Xe.length>0?Xe:Co)[0]]),dt&&bt.push(mt===dt?pt:dt[(Xe.length>0?Xe:Co)[0]]),nt&&Dt.push(mt===nt?pt:nt[(Xe.length>0?Xe:Co)[0]]),Et&&(Et.push(Jn.x1),zt.push(Jn.x2)),st&&(st.push(Jn.y1),St.push(Jn.y2));for(const J2 of f)J2.reduce(Xe,Jn);a&&a.reduce(Xe)}ot.push(hr)}return W4(ot,a,l),{data:rt,facets:ot}}),...!Bo(f,"x")&&(u?{x1:u,x2:h,x:bs(u,h)}:{x,x1:A,x2:L}),...!Bo(f,"y")&&(d?{y1:d,y2:g,y:bs(d,g)}:{y:S,y1:R,y2:W}),...w&&{[v]:w},...Object.fromEntries(f.map(({name:N,output:E})=>[N,E]))}}function hx({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function dx(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={..._o(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=px(t.thresholds,t.interval),t}function Yh(t){if(t==null)return;const{value:e,cumulative:n,domain:i=Ce,thresholds:r}=t,o=a=>{let l=Kt(a,e),f;if(ye(l)||bx(r)){l=qt(l,eg,Float64Array);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Pi(r)?r(l,u,c):r;typeof h=="number"&&(h=J1(u,c,h)),Pi(h)&&(i===Ce&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c))),f=h}else{l=Je(l);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Pi(r)?r(l,u,c):r;if(typeof h=="number")if(i===Ce){let p=la(u,c,h);if(isFinite(p))if(p>0){let d=Math.round(u/p),m=Math.round(c/p);d*p<=u||--d,m*p>c||++m;let g=m-d+1;h=new Float64Array(g);for(let _=0;_<g;++_)h[_]=(d+_)*p}else if(p<0){p=-p;let d=Math.round(u*p),m=Math.round(c*p);d/p<=u||--d,m/p>c||++m;let g=m-d+1;h=new Float64Array(g);for(let _=0;_<g;++_)h[_]=(d+_)/p}else h=[u];else h=[u]}else h=Ur(u,c,h);else Pi(h)&&(i===Ce&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c)));f=h}const s=[];if(f.length===1)s.push([f[0],f[0]]);else for(let u=1;u<f.length;++u)s.push([f[u-1],f[u]]);return s.bin=(n<0?wx:n>0?yx:Lu)(s,f,l),s};return o.label=Ti(e),o}function px(t,e,n=Hh){if(t===void 0)return e===void 0?n:sr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return Zb;case"scott":return h0;case"sturges":return Vb;case"auto":return Hh}return au(t)}return t}function mx(t,e){return U4(t,e,R2)}function R2(t,e,n){return hg(t,e,n,P2)}function P2(t,e,n){return dg(t,e,n,O2)}function O2(t,e){return gu(t,e,gx)}function gx(t){switch(`${t}`.toLowerCase()){case"x":return vx;case"x1":return kx;case"x2":return Mx;case"y":return xx;case"y1":return Sx;case"y2":return Tx}throw new Error(`invalid bin reduce: ${t}`)}function Hh(t,e,n){return Math.min(200,h0(t,e,n))}function bx(t){return _4(t)||Zn(t)&&ye(t)}function _x(t,e){return t&&e?function*(n){const i=t.bin(n);for(const[r,[o,a]]of t.entries()){const l=e.bin(i[r]);for(const[f,[s,u]]of e.entries())yield[l[f],{x1:o,y1:s,x2:a,y2:u}]}}:t?function*(n){const i=t.bin(n);for(const[r,[o,a]]of t.entries())yield[i[r],{x1:o,x2:a}]}:function*(n){const i=e.bin(n);for(const[r,[o,a]]of e.entries())yield[i[r],{y1:o,y2:a}]}}function Lu(t,e,n){return e=Je(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[Wa(e,n[a])-1])==null||o.push(a);return r}}function yx(t,e,n){const i=Lu(t,e,n);return r=>{const o=i(r);for(let a=1,l=o.length;a<l;++a){const f=o[a-1],s=o[a];for(const u of f)s.push(u)}return o}}function wx(t,e,n){const i=Lu(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const l=o[a+1],f=o[a];for(const s of l)f.push(s)}return o}}function U2(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const vx={reduceIndex(t,e,{x1:n,x2:i}){return U2(n,i)}},xx={reduceIndex(t,e,{y1:n,y2:i}){return U2(n,i)}},kx={reduceIndex(t,e,{x1:n}){return n}},Mx={reduceIndex(t,e,{x2:n}){return n}},Sx={reduceIndex(t,e,{y1:n}){return n}},Tx={reduceIndex(t,e,{y2:n}){return n}};function z2(t={}){return ig(t)?t:{...t,y:ae}}function Cx(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const l of e)for(const f of l)i[f]&&++r,i[f]=1;if(r===0)return{data:t,facets:e};t=jr(t);const o=t[Jm]=new Uint32Array(n+r);e=e.map(l=>jr(l,Uint32Array));let a=n;i.fill(0);for(const l of e)for(let f=0,s=l.length;f<s;++f){const u=l[f];i[u]?(l[f]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function $x(t={},e={}){arguments.length===1&&([t,e]=Ax(t));const{x1:n,x:i=n,y:r,...o}=e,[a,l,f,s]=Nx(i,r,"x","y",t,o);return{...a,x1:n,x:l,y1:f,y2:s,y:bs(f,s)}}function B2({y:t,y1:e,y2:n,...i}={}){return i=Cl(i,"x"),e===void 0&&n===void 0?$x({y:t,...i}):([e,n]=p4(t,e,n),{...i,y1:e,y2:n})}function Ax(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const Ex={length:!0};function Nx(t,e=f4,n,i,{offset:r,order:o,reverse:a},l){if(e===null)throw new Error(`stack requires ${i}`);const f=su(l),[s,u]=dn(t),[c,h]=Oa(e),[p,d]=Oa(e);return c.hint=p.hint=Ex,r=Dx(r),o=Ix(o,r,i),[kl(l,(m,g,_)=>{({data:m,facets:g}=Cx(m,g));const b=t==null?void 0:u(rg(Kt(m,t),_==null?void 0:_[n])),v=Kt(m,e,Float64Array),w=Kt(m,f),k=o&&o(m,b,v,w),x=m.length,S=h(new Float64Array(x)),T=d(new Float64Array(x)),$=[];for(const F of g){const A=b?Array.from(Ha(F,L=>b[L]).values()):[F];if(k)for(const L of A)L.sort(k);for(const L of A){let R=0,W=0;a&&L.reverse();for(const C of L){const B=v[C];B<0?R=T[C]=(S[C]=R)+B:B>0?W=T[C]=(S[C]=W)+B:T[C]=S[C]=W}}$.push(A)}return r&&r($,S,T,w),{data:m,facets:g}}),s,c,p]}function Dx(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return Fx;case"center":case"silhouette":return Lx;case"wiggle":return W2}throw new Error(`unknown offset: ${t}`)}}function q2(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function Fx(t,e,n){for(const i of t)for(const r of i){const[o,a]=q2(r,n);for(const l of r){const f=1/(a-o||1);e[l]=f*(e[l]-o),n[l]=f*(n[l]-o)}}}function Lx(t,e,n){for(const i of t){for(const r of i){const[o,a]=q2(r,n);for(const l of r){const f=(a+o)/2;e[l]-=f,n[l]-=f}}Y2(i,e,n)}H2(t,e,n)}function W2(t,e,n,i){for(const r of t){const o=new di;let a=0;for(const l of r){let f=-1;const s=l.map(p=>Math.abs(n[p]-e[p])),u=l.map(p=>{f=i?i[p]:++f;const d=n[p]-e[p],m=o.has(f)?d-o.get(f):0;return o.set(f,d),m}),c=[0,...zb(u)];for(const p of l)e[p]+=a,n[p]+=a;const h=qn(s);h&&(a-=qn(s,(p,d)=>(u[d]/2+c[d])*p)/h)}Y2(r,e,n)}H2(t,e,n)}function Y2(t,e,n){const i=wn(t,r=>wn(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function H2(t,e,n){const i=t.length;if(i===1)return;const r=t.map(l=>l.flat()),o=r.map(l=>(wn(l,f=>e[f])+Ue(l,f=>n[f]))/2),a=wn(o);for(let l=0;l<i;l++){const f=a-o[l];for(const s of r[l])e[s]+=f,n[s]+=f}}function Ix(t,e,n){if(t===void 0&&e===W2)return Vh(We);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Pa:We;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return Rx(r);case"z":return Px(r);case"sum":return Ox(r);case"appearance":return Ux(r);case"inside-out":return Vh(r)}return Gh(tg(t))}if(typeof t=="function")return(t.length===1?Gh:zx)(t);if(Array.isArray(t))return Bx(t);throw new Error(`invalid order: ${t}`)}}function Rx(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function Px(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function Ox(t){return Dl(t,(e,n,i,r)=>Es(Tn(e),o=>qn(o,a=>i[a]),o=>r[o]))}function Ux(t){return Dl(t,(e,n,i,r)=>Es(Tn(e),o=>n[c0(o,a=>i[a])],o=>r[o]))}function Vh(t){return Dl(t,(e,n,i,r)=>{const o=Tn(e),a=Es(o,c=>n[c0(c,h=>i[h])],c=>r[c]),l=Ui(o,c=>qn(c,h=>i[h]),c=>r[c]),f=[],s=[];let u=0;for(const c of a)u<0?(u+=l.get(c),f.push(c)):(u-=l.get(c),s.push(c));return s.reverse().concat(f)})}function Gh(t){return e=>{const n=Kt(e,t);return(i,r)=>We(n[i],n[r])}}function zx(t){return e=>(n,i)=>t(e[n],e[i])}function Bx(t){return Dl(We,()=>t)}function Dl(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new di(e(n,i,r,o).map((l,f)=>[l,f]));return(l,f)=>t(a.get(o[l]),a.get(o[f]))}}const qx={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Wx extends ue{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,z:l,curve:f,tension:s}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:su(n),optional:!0}},n,qx),this.z=l,this.curve=F2(f,s)}filter(e){return e}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i;return Ht("svg:g",o).call(Fe,this,r,o).call(Me,this,n,0,0).call(u=>u.selectAll().data(yg(e,[a,l,f,s],this,i)).enter().append("path").call(Le,this).call(_g,this,i).attr("d",M5().curve(this.curve).defined(c=>c>=0).x0(c=>a[c]).y0(c=>l[c]).x1(c=>f[c]).y1(c=>s[c]))).node()}}function Yx(t,e){const{x:n=bl,...i}=I2(e);return new Wx(t,B2(z2({...i,x1:n,x2:void 0})))}const Hx={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class Vx extends ue{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:l,tension:f}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,Hx),this.curve=L2(l,f),So(this,n)}project(e,n,i){this.curve!==or&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i,{curve:u}=this;return Ht("svg:g",o).call(Fe,this,r,o).call(Me,this,n).call(c=>c.selectAll().data(e).enter().append("path").call(Le,this).attr("d",u===or&&o.projection?Gx(o.projection,a,l,f,s):h=>{const p=In(),d=u(p);return d.lineStart(),d.point(a[h],l[h]),d.point(f[h],s[h]),d.lineEnd(),p}).call($n,this,i).call($l,this,i,o)).node()}}function Gx(t,e,n,i,r){const o=Ja(t);return e=Je(e),n=Je(n),i=Je(i),r=Je(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Iu(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...l}={}){return[n,i]=Xh(e,n,i),[o,a]=Xh(r,o,a),new Vx(t,{...l,x1:n,x2:i,y1:o,y2:a})}function Xh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class V2 extends ue{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:l=o,insetBottom:f=o,insetLeft:s=o,rx:u,ry:c}=i;this.insetTop=Nt(a),this.insetRight=Nt(l),this.insetBottom=Nt(f),this.insetLeft=Nt(s),this.rx=ne(u,"auto"),this.ry=ne(c,"auto")}render(e,n,i,r,o){const{rx:a,ry:l}=this;return Ht("svg:g",o).call(Fe,this,r,o).call(this._transform,this,n).call(f=>f.selectAll().data(e).enter().append("rect").call(Le,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(_t,"rx",a).call(_t,"ry",l).call($n,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}}const Xx={ariaLabel:"bar"};class jx extends V2{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,Xx)}_transform(e,n,{y:i}){e.call(Me,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return ir(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:l,insetBottom:f}=this;return ir(e)?a-r-o-l-f:s=>Math.max(0,Math.abs(i[s]-n[s])-l-f)}}function Zx(t,e={}){return d4(e)||(e={...e,x:bl,y2:ae}),new jx(t,B2(Qg(z2(e))))}const Kx={ariaLabel:"cell"};class Qx extends V2{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,Kx)}_transform(e,n){e.call(Me,n,{},0,0)}}function Jx(t,{x:e,y:n,...i}={}){return[e,n]=yl(e,n),new Qx(t,{...i,x:e,y:n})}const tk={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function ek(t){return t.sort===void 0&&t.reverse===void 0?R4({channel:"-r"},t):t}class nk extends ue{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:l=Gr,frameAnchor:f}=n,[s,u]=se(a,0),[c,h]=L4(l),[p,d]=se(o,c==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:ml,optional:!0},rotate:{value:s,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},ek(n),tk),this.r=d,this.rotate=u,this.symbol=h,this.frameAnchor=vl(f);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:_,stroke:b}=m;g.hint={fill:_?_.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,r:u,rotate:c,symbol:h}=i,{r:p,rotate:d,symbol:m}=this,[g,_]=xo(this,r),b=m===Gr,v=u?void 0:p*p*Math.PI;return ru(p)&&(e=[]),Ht("svg:g",o).call(Fe,this,r,o).call(Me,this,{x:f&&a,y:s&&l}).call(w=>w.selectAll().data(e).enter().append(b?"circle":"path").call(Le,this).call(b?k=>{k.attr("cx",f?x=>f[x]:g).attr("cy",s?x=>s[x]:_).attr("r",u?x=>u[x]:p)}:k=>{k.attr("transform",$u`translate(${f?x=>f[x]:g},${s?x=>s[x]:_})${c?x=>` rotate(${c[x]})`:d?` rotate(${d})`:""}`).attr("d",u&&h?x=>{const S=In();return h[x].draw(S,u[x]*u[x]*Math.PI),S}:u?x=>{const S=In();return m.draw(S,u[x]*u[x]*Math.PI),S}:h?x=>{const S=In();return h[x].draw(S,v),S}:(()=>{const x=In();return m.draw(x,v),x})())}).call($n,this,i)).node()}}function Jr(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=yl(e,n)),new nk(t,{...i,x:e,y:n})}const ik={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class rk extends ue{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:l}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:su(n),optional:!0}},n,ik),this.z=o,this.curve=L2(a,l),So(this,n)}filter(e){return e}project(e,n,i){this.curve!==or&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:l}=i,{curve:f}=this;return Ht("svg:g",o).call(Fe,this,r,o).call(Me,this,n).call(s=>s.selectAll().data(yg(e,[a,l],this,i)).enter().append("path").call(Le,this).call(_g,this,i).call(O7,this,i,o).attr("d",f===or&&o.projection?ok(o.projection,a,l):vm().curve(f).defined(u=>u>=0).x(u=>a[u]).y(u=>l[u]))).node()}}function ok(t,e,n){const i=Ja(t);return e=Je(e),n=Je(n),r=>{let o=[];const a=[o];for(const l of r)l===-1?(o=[],a.push(o)):o.push([e[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function ak(t,{x:e=bl,y:n=ae,...i}={}){return new rk(t,I2({...i,x:e,y:n}))}const lk={ariaLabel:"tick",fill:null,stroke:"currentColor"};class fk extends ue{constructor(e,n,i){super(e,n,i,lk),So(this,i)}render(e,n,i,r,o){return Ht("svg:g",o).call(Fe,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Le,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call($n,this,i).call($l,this,i,o)).node()}}class sk extends fk{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Nt(a),this.insetBottom=Nt(l)}_transform(e,n,{x:i}){e.call(Me,n,{x:i},pe,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function Fl(t,{x:e=ae,...n}={}){return new sk(t,{...n,x:e})}function uk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),me(e,"width",t[0]+"px"),me(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&me(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[4](null)}}}function ck(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Ye(()=>{const f=Ie({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Fl(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(f)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Pn extends Rt{constructor(e){super(),It(this,e,ck,uk,Lt,{pattern:3,width:0,height:1})}}function hk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),me(e,"width",t[0]+"px"),me(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&me(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[4](null)}}}function dk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Ye(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=Ie({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[Zx(f,{x:(u,c)=>c+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class On extends Rt{constructor(e){super(),It(this,e,dk,hk,Lt,{pattern:3,width:0,height:1})}}function pk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),me(e,"width",t[0]+"px"),me(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&me(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[4](null)}}}function mk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Ye(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=Ie({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Jx(f,{x:(u,c)=>c+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Un extends Rt{constructor(e){super(),It(this,e,mk,pk,Lt,{pattern:3,width:0,height:1})}}function gk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),me(e,"width",t[0]+"px"),me(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&me(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[7](null)}}}function bk(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{width:a=800}=e,{height:l=50}=e,f,s=null,u;const c=async m=>{o?n(6,s=o):(n(6,s=await Ss(m)),console.log(`Loaded ${m}, sr= ${s.sampleRate}`)),u=s.sampleRate};let h=null;const p=(m,g)=>{g&&(h=Ba(g,m,.5))};Ye(()=>{if(n(2,f.textContent="",f),!h)return;const m=Ie({width:a,height:l,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[ak(h,{x:(g,_)=>_/u,y:g=>g})]});f.appendChild(m)});function d(m){oe[m?"unshift":"push"](()=>{f=m,n(2,f)})}return t.$$set=m=>{"pattern"in m&&n(3,i=m.pattern),"audioFile"in m&&n(4,r=m.audioFile),"cachedAudio"in m&&n(5,o=m.cachedAudio),"width"in m&&n(0,a=m.width),"height"in m&&n(1,l=m.height)},t.$$.update=()=>{t.$$.dirty&16&&c(r),t.$$.dirty&72&&p(i,s)},[a,l,f,i,r,o,s,d]}class zn extends Rt{constructor(e){super(),It(this,e,bk,gk,Lt,{pattern:3,audioFile:4,cachedAudio:5,width:0,height:1})}}function _k(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){G(l,e,f),y(e,n),t[7](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:wt,i:wt,o:wt,d(l){l&&V(e),t[7](null),o=!1,a()}}}function yk(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{currentTrialNumber:a=-1}=e,l=null;const f=async d=>{o?(n(6,l=o),console.log("used cached audio")):(n(6,l=await Ss(d)),console.log(`loaded ${d}, sr= ${l.sampleRate}`))};let s=null,u;const c=(d,m)=>{m&&u&&(s=Ba(m,d),Ts(s,m.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};ci(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function p(d){oe[d?"unshift":"push"](()=>{u=d,n(0,u)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"cachedAudio"in d&&n(4,o=d.cachedAudio),"currentTrialNumber"in d&&n(5,a=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&32&&a>-1&&window.setTimeout(h,200),t.$$.dirty&68&&c(i,l)},[u,h,i,r,o,a,l,p]}class to extends Rt{constructor(e){super(),It(this,e,yk,_k,Lt,{pattern:2,audioFile:3,cachedAudio:4,currentTrialNumber:5})}}function jh(t,e,n){const i=t.slice();return i[8]=e[n],i}function Zh(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=at(n),e.__value=t[8],ft(e,e.__value)},m(r,o){G(r,e,o),y(e,i)},p:wt,d(r){r&&V(e)}}}function wk(t){let e,n,i,r,o,a,l,f=(ia*1e3).toFixed(0)+"",s,u,c,h,p,d,m,g,_=t[0].toFixed(1)+"",b,v,w=(t[2]*1e3).toFixed(1)+"",k,x,S,T,$,F,A,L,R,W,C,B,z,Q,j,X,O,Y,J,lt,et=jt(t[5]),Z=[];for(let q=0;q<et.length;q+=1)Z[q]=Zh(jh(t,et,q));return R=new to({props:{pattern:t[1],audioFile:t[3]}}),C=new zn({props:{pattern:t[1],audioFile:t[3],width:Xo,height:jo}}),z=new Pn({props:{pattern:t[1],width:Xo,height:jo}}),j=new On({props:{pattern:t[1],width:Xo,height:jo}}),O=new Un({props:{pattern:t[1],width:Xo,height:jo}}),{c(){e=M("main"),n=M("h2"),n.textContent="Playground",i=D(),r=M("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=D(),a=M("div"),l=at("inter-onset interval (IOI): "),s=at(f),u=at(" milliseconds ("),c=at(t[4]),h=at(` bpm)
    `),p=M("label"),d=at(`deviation as percent of IOI
      `),m=M("input"),g=D(),b=at(_),v=at(`
      (`),k=at(w),x=at(" milliseconds)"),S=D(),T=M("label"),$=at(`instrument sample:
      `),F=M("select");for(let q=0;q<Z.length;q+=1)Z[q].c();A=D(),L=M("div"),ht(R.$$.fragment),W=D(),ht(C.$$.fragment),B=D(),ht(z.$$.fragment),Q=D(),ht(j.$$.fragment),X=D(),ht(O.$$.fragment),I(m,"type","range"),I(m,"min","-20"),I(m,"max","20"),I(m,"step","1"),I(p,"class","svelte-1sot113"),t[3]===void 0&&rn(()=>t[7].call(F)),I(T,"class","svelte-1sot113"),I(L,"class","stimuli svelte-1sot113")},m(q,N){G(q,e,N),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,s),y(a,u),y(a,c),y(a,h),y(a,p),y(p,d),y(p,m),ft(m,t[0]),y(p,g),y(p,b),y(p,v),y(p,k),y(p,x),y(a,S),y(a,T),y(T,$),y(T,F);for(let E=0;E<Z.length;E+=1)Z[E]&&Z[E].m(F,null);de(F,t[3],!0),y(e,A),y(e,L),ut(R,L,null),y(L,W),ut(C,L,null),y(L,B),ut(z,L,null),y(L,Q),ut(j,L,null),y(L,X),ut(O,L,null),Y=!0,J||(lt=[gt(m,"change",t[6]),gt(m,"input",t[6]),gt(F,"change",t[7])],J=!0)},p(q,[N]){if((!Y||N&16)&&Ft(c,q[4]),N&1&&ft(m,q[0]),(!Y||N&1)&&_!==(_=q[0].toFixed(1)+"")&&Ft(b,_),(!Y||N&4)&&w!==(w=(q[2]*1e3).toFixed(1)+"")&&Ft(k,w),N&32){et=jt(q[5]);let nt;for(nt=0;nt<et.length;nt+=1){const mt=jh(q,et,nt);Z[nt]?Z[nt].p(mt,N):(Z[nt]=Zh(mt),Z[nt].c(),Z[nt].m(F,null))}for(;nt<Z.length;nt+=1)Z[nt].d(1);Z.length=et.length}N&40&&de(F,q[3]);const E={};N&2&&(E.pattern=q[1]),N&8&&(E.audioFile=q[3]),R.$set(E);const P={};N&2&&(P.pattern=q[1]),N&8&&(P.audioFile=q[3]),C.$set(P);const tt={};N&2&&(tt.pattern=q[1]),z.$set(tt);const U={};N&2&&(U.pattern=q[1]),j.$set(U);const dt={};N&2&&(dt.pattern=q[1]),O.$set(dt)},i(q){Y||(H(R.$$.fragment,q),H(C.$$.fragment,q),H(z.$$.fragment,q),H(j.$$.fragment,q),H(O.$$.fragment,q),Y=!0)},o(q){K(R.$$.fragment,q),K(C.$$.fragment,q),K(z.$$.fragment,q),K(j.$$.fragment,q),K(O.$$.fragment,q),Y=!1},d(q){q&&V(e),yn(Z,q),ct(R),ct(C),ct(z),ct(j),ct(O),J=!1,ke(lt)}}}let Xo=600,jo=100,ia=.5,vk=6,xk=3,kk=!0,Mk=0;function Sk(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],l=5,f=[];function s(){l=be(this.value),n(0,l)}function u(){a=ui(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=l/100*ia),t.$$.dirty&6&&(n(1,f=Wi(vk,ia,xk,r,kk,Mk)),console.log("generated pattern",f))},n(4,i=1/ia*60),[l,f,r,a,i,o,s,u]}class Tk extends Rt{constructor(e){super(),It(this,e,Sk,wk,Lt,{})}}var G2={exports:{}};(function(t,e){(function(n,i){i()})(dr,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,c){var h=new XMLHttpRequest;h.open("GET",s),h.responseType="blob",h.onload=function(){f(h.response,u,c)},h.onerror=function(){console.error("could not download file")},h.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof dr=="object"&&dr.global===dr?dr:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(s,u,c){var h=a.URL||a.webkitURL,p=document.createElement("a");u=u||s.name||"download",p.download=u,p.rel="noopener",typeof s=="string"?(p.href=s,p.origin===location.origin?o(p):r(p.href)?i(s,u,c):o(p,p.target="_blank")):(p.href=h.createObjectURL(s),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,c){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,c),u);else if(r(s))i(s,u,c);else{var h=document.createElement("a");h.href=s,h.target="_blank",setTimeout(function(){o(h)})}}:function(s,u,c,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,c);var p=s.type==="application/octet-stream",d=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||l)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(s)}else{var _=a.URL||a.webkitURL,b=_.createObjectURL(s);h?h.location=b:location.href=b,h=null,setTimeout(function(){_.revokeObjectURL(b)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(G2);var Ck=G2.exports;const X2=n0(Ck);function At(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}At.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};At.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};At.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};At.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=j2(0,t.length-1);return this.activate(t[e]),this};At.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=j2(0,t.length-1);this.activate(t[e])};At.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};At.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};At.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};At.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};At.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};At.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};At.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};At.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};At.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};At.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};At.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};At.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};At.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};At.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};At.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};At.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const Ru=function(){};Ru.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};Ru.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};At.prototype.checkErr=new Ru;function j2(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Kh(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,$,F,A,L,R,W,C,B,z,Q,j,X,O,Y,J,lt,et,Z,q;return{c(){e=M("div"),n=M("label"),i=at(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=at(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",g=M("option"),g.textContent="55-60",_=D(),b=M("label"),v=at(`Gender:
        `),w=M("input"),k=D(),x=M("label"),S=at(`Highest finished education (select the best fitting one):
        `),T=M("select"),$=M("option"),$.textContent="none",F=M("option"),F.textContent="high school",A=M("option"),A.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",W=D(),C=M("label"),B=at(`Which music instruments do you play?
        `),z=M("input"),Q=D(),j=M("label"),X=at(`For how many years do you roughly play it/them?
        `),O=M("input"),Y=D(),J=M("label"),lt=at(`How many years of experience do you have with visualization?
        `),et=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",ft(s,s.__value),u.__value="25-29",ft(u,u.__value),c.__value="30-34",ft(c,c.__value),h.__value="35-39",ft(h,h.__value),p.__value="40-44",ft(p,p.__value),d.__value="45-49",ft(d,d.__value),m.__value="50-54",ft(m,m.__value),g.__value="55-60",ft(g,g.__value),t[6]===void 0&&rn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(b,"class","svelte-u6a8gr"),$.__value="none",ft($,$.__value),F.__value="highs",ft(F,F.__value),A.__value="bachelor",ft(A,A.__value),L.__value="master",ft(L,L.__value),R.__value="phd",ft(R,R.__value),t[8]===void 0&&rn(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(C,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(j,"class","svelte-u6a8gr"),I(et,"type","number"),I(et,"min","0"),I(et,"step","1"),I(J,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,E){G(N,e,E),y(e,n),y(n,i),y(n,r),ft(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,g),de(f,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),ft(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,$),y(T,F),y(T,A),y(T,L),y(T,R),de(T,t[8],!0),y(e,W),y(e,C),y(C,B),y(C,z),ft(z,t[9]),y(e,Q),y(e,j),y(j,X),y(j,O),ft(O,t[10]),y(e,Y),y(e,J),y(J,lt),y(J,et),ft(et,t[11]),Z||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(et,"input",t[28])],Z=!0)},p(N,E){E[0]&32&&r.value!==N[5]&&ft(r,N[5]),E[0]&64&&de(f,N[6]),E[0]&128&&w.value!==N[7]&&ft(w,N[7]),E[0]&256&&de(T,N[8]),E[0]&512&&z.value!==N[9]&&ft(z,N[9]),E[0]&1024&&be(O.value)!==N[10]&&ft(O,N[10]),E[0]&2048&&be(et.value)!==N[11]&&ft(et,N[11])},d(N){N&&V(e),Z=!1,ke(q)}}}function Qh(t){let e,n,i,r,o=t[14]&&Jh(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=Vn()},m(a,l){G(a,e,l),G(a,n,l),o&&o.m(a,l),G(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=Jh(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Qt(),K(o,1,1,()=>{o=null}),Jt())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function Jh(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,g,_,b,v;const w=[Ak,$k],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(g=x(t))&&(_=k[g]=w[g](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=at("Test number "),a=at(o),l=at(" / "),s=at(f),u=D(),c=M("p"),h=at("Trial number "),d=at(p),m=D(),_&&_.c(),b=Vn()},m(S,T){G(S,e,T),G(S,n,T),G(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),G(S,u,T),G(S,c,T),y(c,h),y(c,d),G(S,m,T),~g&&k[g].m(S,T),G(S,b,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Ft(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Ft(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Ft(d,p);let $=g;g=x(S),g===$?~g&&k[g].p(S,T):(_&&(Qt(),K(k[$],1,1,()=>{k[$]=null}),Jt()),~g?(_=k[g],_?_.p(S,T):(_=k[g]=w[g](S),_.c()),H(_,1),_.m(b.parentNode,b)):_=null)},i(S){v||(H(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(b)),~g&&k[g].d(S)}}}function $k(t){let e,n,i,r;const o=[Fk,Dk,Nk,Ek],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Vn()},m(f,s){~e&&a[e].m(f,s),G(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Qt(),K(a[u],1,1,()=>{a[u]=null}),Jt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function Ak(t){let e,n,i,r;return e=new to({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),G(o,n,a),G(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ct(e,o)}}}function Ek(t){let e,n;return e=new Un({props:{pattern:t[0],width:Ll,height:Il}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Nk(t){let e,n;return e=new On({props:{pattern:t[0],width:Ll,height:Il}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Dk(t){let e,n;return e=new Pn({props:{pattern:t[0],width:Ll,height:Il}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Fk(t){let e,n;return e=new zn({props:{pattern:t[0],audioFile:t[1],width:Ll,height:Il}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function td(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Any final feedback?
        `),r=M("textarea")},m(l,f){G(l,e,f),y(e,n),y(n,i),y(n,r),ft(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&ft(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function ed(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){G(l,e,f),G(l,n,f),G(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:wt,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function nd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){G(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:wt,d(r){r&&V(e),n=!1,i()}}}function Lk(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&Kh(t),u=t[3]==="tests"&&Qh(t),c=t[3]==="feedback"&&td(t),h=t[3]==="done"&&ed(t),p=!t[15]&&t[3]!=="done"&&nd(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){G(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=Kh(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&H(u,1)):(u=Qh(d),u.c(),H(u,1),u.m(e,o)):u&&(Qt(),K(u,1,1,()=>{u=null}),Jt()),d[3]==="feedback"?c?c.p(d,m):(c=td(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=ed(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=nd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(H(u),f=!0)},o(d){K(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let id=.5;const vf=20;let Ik=6,Rk=!0,Pk=0,Ll=600,Il=100;function Ok(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},k=[],x,S,T=!1,$=!1,F=!1,A="tick",L=vf,R=4-1,W=[],C=[],B=0;const z=[];ci(()=>{document.querySelector("html").addEventListener("keyup",et)});const Q=()=>{S=new At({ratio:{firstVal:vf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,vf],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function j(){l==="start"?(n(2,a=Cs(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,A=a[f].stimulus),n(1,o=a[f].audioFile),X()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function X(){Q(),n(13,b=0),v=0,x=0,n(14,T=!0),C=[],k=[],s=new Date,O()}function O(){console.log("Starting trial "+b),w={},n(15,$=!0),Y()}function Y(){let rt=Math.round(S.getLast("ratio"));rt=Math.random()<.5?rt:-rt,w.deviation=rt,n(20,L=rt),console.log("generated pattern",W),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function J(ot){if(!$)return;n(15,$=!1),w.decisionChoice=ot,w.errorCode=0;const rt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(rt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,b++,b),S.reversalLimitReached("ratio")?lt():O()}function lt(){n(14,T=!1),Z(),C=[],B=S.getFinalVal("ratio");for(let rt=0;rt<k.length;rt++)C[rt]=k[rt].deviation;console.log(C);const ot=new Date;z.push({encoding:A,audioFile:o,final:B,data:C,score:x,testNumber:f,trialCount:b+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ot-s)/1e3}),n(4,f++,f)}function et(ot){switch(console.log(ot.key),ot.key){case"ArrowLeft":J(0);break;case"ArrowRight":J(1);break;case"PageDown":!$&&l!=="done"&&j()}}function Z(){`${x}`,b+1,`${(x/(b+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ot={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ot);const rt=JSON.stringify(ot,void 0,2),Vt=new Blob([rt],{type:"text/plain;charset=utf-8"});X2(Vt,"results.json")}function N(){u=this.value,n(5,u)}function E(){c=ui(this),n(6,c)}function P(){h=this.value,n(7,h)}function tt(){p=ui(this),n(8,p)}function U(){d=this.value,n(9,d)}function dt(){m=be(this.value),n(10,m)}function nt(){g=be(this.value),n(11,g)}function mt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*id),t.$$.dirty[0]&2097153&&(n(0,W=Wi(Ik,id,R,i,Rk,Pk)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,p,d,m,g,_,b,T,$,F,A,j,q,L,i,N,E,P,tt,U,dt,nt,mt]}class Uk extends Rt{constructor(e){super(),It(this,e,Ok,Lk,Lt,{},null,[-1,-1])}}function rd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,$,F,A,L,R,W,C,B,z,Q,j,X,O,Y,J,lt,et,Z,q;return{c(){e=M("div"),n=M("label"),i=at(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=at(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",g=M("option"),g.textContent="55-60",_=D(),b=M("label"),v=at(`Gender:
        `),w=M("input"),k=D(),x=M("label"),S=at(`Highest finished education (select the best fitting one):
        `),T=M("select"),$=M("option"),$.textContent="none",F=M("option"),F.textContent="high school",A=M("option"),A.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",W=D(),C=M("label"),B=at(`Which music instruments do you play?
        `),z=M("input"),Q=D(),j=M("label"),X=at(`For how many years do you roughly play it/them?
        `),O=M("input"),Y=D(),J=M("label"),lt=at(`How many years of experience do you have with visualization?
        `),et=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",ft(s,s.__value),u.__value="25-29",ft(u,u.__value),c.__value="30-34",ft(c,c.__value),h.__value="35-39",ft(h,h.__value),p.__value="40-44",ft(p,p.__value),d.__value="45-49",ft(d,d.__value),m.__value="50-54",ft(m,m.__value),g.__value="55-60",ft(g,g.__value),t[6]===void 0&&rn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(b,"class","svelte-u6a8gr"),$.__value="none",ft($,$.__value),F.__value="highs",ft(F,F.__value),A.__value="bachelor",ft(A,A.__value),L.__value="master",ft(L,L.__value),R.__value="phd",ft(R,R.__value),t[8]===void 0&&rn(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(C,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(j,"class","svelte-u6a8gr"),I(et,"type","number"),I(et,"min","0"),I(et,"step","1"),I(J,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,E){G(N,e,E),y(e,n),y(n,i),y(n,r),ft(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,g),de(f,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),ft(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,$),y(T,F),y(T,A),y(T,L),y(T,R),de(T,t[8],!0),y(e,W),y(e,C),y(C,B),y(C,z),ft(z,t[9]),y(e,Q),y(e,j),y(j,X),y(j,O),ft(O,t[10]),y(e,Y),y(e,J),y(J,lt),y(J,et),ft(et,t[11]),Z||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(et,"input",t[28])],Z=!0)},p(N,E){E[0]&32&&r.value!==N[5]&&ft(r,N[5]),E[0]&64&&de(f,N[6]),E[0]&128&&w.value!==N[7]&&ft(w,N[7]),E[0]&256&&de(T,N[8]),E[0]&512&&z.value!==N[9]&&ft(z,N[9]),E[0]&1024&&be(O.value)!==N[10]&&ft(O,N[10]),E[0]&2048&&be(et.value)!==N[11]&&ft(et,N[11])},d(N){N&&V(e),Z=!1,ke(q)}}}function od(t){let e,n,i,r,o=t[14]&&ad(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=Vn()},m(a,l){G(a,e,l),G(a,n,l),o&&o.m(a,l),G(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=ad(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Qt(),K(o,1,1,()=>{o=null}),Jt())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function ad(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,g,_,b,v;const w=[Bk,zk],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(g=x(t))&&(_=k[g]=w[g](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=at("Test number "),a=at(o),l=at(" / "),s=at(f),u=D(),c=M("p"),h=at("Trial number "),d=at(p),m=D(),_&&_.c(),b=Vn()},m(S,T){G(S,e,T),G(S,n,T),G(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),G(S,u,T),G(S,c,T),y(c,h),y(c,d),G(S,m,T),~g&&k[g].m(S,T),G(S,b,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Ft(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Ft(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Ft(d,p);let $=g;g=x(S),g===$?~g&&k[g].p(S,T):(_&&(Qt(),K(k[$],1,1,()=>{k[$]=null}),Jt()),~g?(_=k[g],_?_.p(S,T):(_=k[g]=w[g](S),_.c()),H(_,1),_.m(b.parentNode,b)):_=null)},i(S){v||(H(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(b)),~g&&k[g].d(S)}}}function zk(t){let e,n,i,r;const o=[Hk,Yk,Wk,qk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Vn()},m(f,s){~e&&a[e].m(f,s),G(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Qt(),K(a[u],1,1,()=>{a[u]=null}),Jt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function Bk(t){let e,n,i,r;return e=new to({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),G(o,n,a),G(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ct(e,o)}}}function qk(t){let e,n;return e=new Un({props:{pattern:t[0],width:Rl,height:Pl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Wk(t){let e,n;return e=new On({props:{pattern:t[0],width:Rl,height:Pl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Yk(t){let e,n;return e=new Pn({props:{pattern:t[0],width:Rl,height:Pl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Hk(t){let e,n;return e=new zn({props:{pattern:t[0],audioFile:t[1],width:Rl,height:Pl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function ld(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Any final feedback?
        `),r=M("textarea")},m(l,f){G(l,e,f),y(e,n),y(n,i),y(n,r),ft(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&ft(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function fd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){G(l,e,f),G(l,n,f),G(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:wt,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function sd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){G(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:wt,d(r){r&&V(e),n=!1,i()}}}function Vk(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&rd(t),u=t[3]==="tests"&&od(t),c=t[3]==="feedback"&&ld(t),h=t[3]==="done"&&fd(t),p=!t[15]&&t[3]!=="done"&&sd(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study (Within-Participant Variance)",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){G(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=rd(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&H(u,1)):(u=od(d),u.c(),H(u,1),u.m(e,o)):u&&(Qt(),K(u,1,1,()=>{u=null}),Jt()),d[3]==="feedback"?c?c.p(d,m):(c=ld(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=fd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=sd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(H(u),f=!0)},o(d){K(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let ud=.5;const xf=20;let Gk=6,Xk=!0,jk=0,Rl=600,Pl=100;function Zk(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},k=[],x,S,T=!1,$=!1,F=!1,A="tick",L=xf,R=4-1,W=[],C=[],B=0;const z=[];ci(()=>{document.querySelector("html").addEventListener("keyup",et)});const Q=()=>{S=new At({ratio:{firstVal:xf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,xf],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function j(){l==="start"?(n(2,a=Cs(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,A=a[f].stimulus),n(1,o=a[f].audioFile),X()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function X(){Q(),n(13,b=0),v=0,x=0,n(14,T=!0),C=[],k=[],s=new Date,O()}function O(){console.log("Starting trial "+b),w={},n(15,$=!0),Y()}function Y(){let rt=Math.round(S.getLast("ratio"));rt=Math.random()<.5?rt:-rt,w.deviation=rt,n(20,L=rt),console.log("generated pattern",W),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function J(ot){if(!$)return;n(15,$=!1),w.decisionChoice=ot,w.errorCode=0;const rt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(rt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,b++,b),S.reversalLimitReached("ratio")?lt():O()}function lt(){n(14,T=!1),Z(),C=[],B=S.getFinalVal("ratio");for(let rt=0;rt<k.length;rt++)C[rt]=k[rt].deviation;console.log(C);const ot=new Date;z.push({encoding:A,audioFile:o,final:B,data:C,score:x,testNumber:f,trialCount:b+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ot-s)/1e3}),n(4,f++,f)}function et(ot){switch(console.log(ot.key),ot.key){case"ArrowLeft":J(0);break;case"ArrowRight":J(1);break;case"PageDown":!$&&l!=="done"&&j()}}function Z(){`${x}`,b+1,`${(x/(b+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ot={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ot);const rt=JSON.stringify(ot,void 0,2),Vt=new Blob([rt],{type:"text/plain;charset=utf-8"});X2(Vt,"results.json")}function N(){u=this.value,n(5,u)}function E(){c=ui(this),n(6,c)}function P(){h=this.value,n(7,h)}function tt(){p=ui(this),n(8,p)}function U(){d=this.value,n(9,d)}function dt(){m=be(this.value),n(10,m)}function nt(){g=be(this.value),n(11,g)}function mt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*ud),t.$$.dirty[0]&2097153&&(n(0,W=Wi(Gk,ud,R,i,Xk,jk)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,p,d,m,g,_,b,T,$,F,A,j,q,L,i,N,E,P,tt,U,dt,nt,mt]}class Kk extends Rt{constructor(e){super(),It(this,e,Zk,Vk,Lt,{},null,[-1,-1])}}function eo(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,o+=i*(l-r))}if(n>1)return o/(n-1)}function Pu(t,e){const n=eo(t,e);return n&&Math.sqrt(n)}class Qk extends Map{constructor(e,n=eM){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(cd(this,e))}has(e){return super.has(cd(this,e))}set(e,n){return super.set(Jk(this,e),n)}delete(e){return super.delete(tM(this,e))}}function cd({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Jk({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function tM({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function eM(t){return t!==null&&typeof t=="object"?t.valueOf():t}function nM(t){return t}function Bn(t,...e){return iM(t,Array.from,nM,e)}function iM(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const l=new Qk,f=i[a++];let s=-1;for(const u of o){const c=f(u,++s,o),h=l.get(c);h?h.push(u):l.set(c,[u])}for(const[u,c]of l)l.set(u,r(c,a));return e(l)}(t,0)}function Ou(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function xi(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}var hd={},kf={},Mf=34,vr=10,Sf=13;function Z2(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function rM(t,e){var n=Z2(t);return function(i,r){return e(n(i),r,t)}}function dd(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function ce(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function oM(t){return t<0?"-"+ce(-t,6):t>9999?"+"+ce(t,6):ce(t,4)}function aM(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":oM(t.getUTCFullYear())+"-"+ce(t.getUTCMonth()+1,2)+"-"+ce(t.getUTCDate(),2)+(r?"T"+ce(e,2)+":"+ce(n,2)+":"+ce(i,2)+"."+ce(r,3)+"Z":i?"T"+ce(e,2)+":"+ce(n,2)+":"+ce(i,2)+"Z":n||e?"T"+ce(e,2)+":"+ce(n,2)+"Z":"")}function lM(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(c,h){var p,d,m=r(c,function(g,_){if(p)return p(g,_-1);d=g,p=h?rM(g,h):Z2(g)});return m.columns=d||[],m}function r(c,h){var p=[],d=c.length,m=0,g=0,_,b=d<=0,v=!1;c.charCodeAt(d-1)===vr&&--d,c.charCodeAt(d-1)===Sf&&--d;function w(){if(b)return kf;if(v)return v=!1,hd;var x,S=m,T;if(c.charCodeAt(S)===Mf){for(;m++<d&&c.charCodeAt(m)!==Mf||c.charCodeAt(++m)===Mf;);return(x=m)>=d?b=!0:(T=c.charCodeAt(m++))===vr?v=!0:T===Sf&&(v=!0,c.charCodeAt(m)===vr&&++m),c.slice(S+1,x-1).replace(/""/g,'"')}for(;m<d;){if((T=c.charCodeAt(x=m++))===vr)v=!0;else if(T===Sf)v=!0,c.charCodeAt(m)===vr&&++m;else if(T!==n)continue;return c.slice(S,x)}return b=!0,c.slice(S,d)}for(;(_=w())!==kf;){for(var k=[];_!==hd&&_!==kf;)k.push(_),_=w();h&&(k=h(k,g++))==null||p.push(k)}return p}function o(c,h){return c.map(function(p){return h.map(function(d){return u(p[d])}).join(t)})}function a(c,h){return h==null&&(h=dd(c)),[h.map(u).join(t)].concat(o(c,h)).join(`
`)}function l(c,h){return h==null&&(h=dd(c)),o(c,h).join(`
`)}function f(c){return c.map(s).join(`
`)}function s(c){return c.map(u).join(t)}function u(c){return c==null?"":c instanceof Date?aM(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:r,format:a,formatBody:l,formatRows:f,formatRow:s,formatValue:u}}var fM=lM(","),sM=fM.parse;function Er(t,e,n){this.k=t,this.x=e,this.y=n}Er.prototype={constructor:Er,scale:function(t){return t===1?this:new Er(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Er(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Er.prototype;function uM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[6](null)}}}function cM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=100}=e,f;Ye(()=>{const u=Ie({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Fl(i,{x:c=>c}),El(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${h+1}`})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){oe[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class K2 extends Rt{constructor(e){super(),It(this,e,cM,uM,Lt,{data:3,domain:4,title:5,width:0,height:1})}}function hM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[5](null)}}}function dM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;Ye(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.finals)})),u=Ie({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[Jr(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Iu(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Al([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=xi(s),d=1.96*(Pu(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Uu extends Rt{constructor(e){super(),It(this,e,dM,hM,Lt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function pM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[5](null)}}}function mM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;Ye(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.trialCounts)})),u=Ie({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[Jr(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Iu(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Al([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=xi(s),d=1.96*(Pu(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class zu extends Rt{constructor(e){super(),It(this,e,mM,pM,Lt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function pd(t,e,n){const i=t.slice();return i[8]=e[n],i}function md(t,e,n){const i=t.slice();return i[11]=e[n],i}function gd(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new K2({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=M("b"),i=at(n),r=D(),ht(o.$$.fragment)},m(l,f){G(l,e,f),y(e,i),G(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&4)&&n!==(n=l[11].encoding+"")&&Ft(i,n);const s={};f&4&&(s.data=l[11].finals),f&4&&(s.title=l[11].encoding),f&2&&(s.domain=[0,l[1]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function bd(t){let e,n,i,r=t[8].demographics.partID+"",o,a,l,f,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=M("div"),n=M("b"),i=at("P"),o=at(r),a=at(":"),l=D(),f=new rb(!1),u=D(),f.a=u,me(e,"text-align","left")},m(c,h){G(c,e,h),y(e,n),y(n,i),y(n,o),y(n,a),y(e,l),f.m(s,e),y(e,u)},p(c,h){h&1&&r!==(r=c[8].demographics.partID+"")&&Ft(o,r),h&1&&s!==(s=c[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&f.p(s)},d(c){c&&V(e)}}}function gM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,$,F,A;c=new Uu({props:{stimuli:t[2]}}),g=new zu({props:{stimuli:t[2]}});let L=jt(t[2]),R=[];for(let z=0;z<L.length;z+=1)R[z]=gd(md(t,L,z));const W=z=>K(R[z],1,1,()=>{R[z]=null});let C=jt(t[0]),B=[];for(let z=0;z<C.length;z+=1)B[z]=bd(pd(t,C,z));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values",u=D(),ht(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts",m=D(),ht(g.$$.fragment),_=D(),b=M("div"),v=M("h3"),v.textContent="Final Values for Each Stimulus and All Participants",w=D();for(let z=0;z<R.length;z+=1)R[z].c();k=D(),x=M("div"),S=M("h3"),S.textContent="Feedback",T=D();for(let z=0;z<B.length;z+=1)B[z].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(z,Q){G(z,e,Q),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w);for(let j=0;j<R.length;j+=1)R[j]&&R[j].m(b,null);y(e,k),y(e,x),y(x,S),y(x,T);for(let j=0;j<B.length;j+=1)B[j]&&B[j].m(x,null);$=!0,F||(A=gt(a,"input",t[3]),F=!0)},p(z,[Q]){const j={};Q&4&&(j.stimuli=z[2]),c.$set(j);const X={};if(Q&4&&(X.stimuli=z[2]),g.$set(X),Q&6){L=jt(z[2]);let O;for(O=0;O<L.length;O+=1){const Y=md(z,L,O);R[O]?(R[O].p(Y,Q),H(R[O],1)):(R[O]=gd(Y),R[O].c(),H(R[O],1),R[O].m(b,null))}for(Qt(),O=L.length;O<R.length;O+=1)W(O);Jt()}if(Q&1){C=jt(z[0]);let O;for(O=0;O<C.length;O+=1){const Y=pd(z,C,O);B[O]?B[O].p(Y,Q):(B[O]=bd(Y),B[O].c(),B[O].m(x,null))}for(;O<B.length;O+=1)B[O].d(1);B.length=C.length}},i(z){if(!$){H(c.$$.fragment,z),H(g.$$.fragment,z);for(let Q=0;Q<L.length;Q+=1)H(R[Q]);$=!0}},o(z){K(c.$$.fragment,z),K(g.$$.fragment,z),R=R.filter(Boolean);for(let Q=0;Q<R.length;Q+=1)K(R[Q]);$=!1},d(z){z&&V(e),ct(c),ct(g),yn(R,z),yn(B,z),F=!1,A()}}}function bM(t,e,n){let i,r,o,a=[];const l=async u=>{const c=[],h=[];for(const p of u.target.files){const d=await p.text();c.push(JSON.parse(d)),h.push(p.name)}n(0,a=c),console.log(a)},f=u=>{if(u.lenght===0)return[];const c=[];for(const h of u)for(const p of h.tests){let d=p.encoding;(p.encoding==="audio"||p.encoding==="waveform")&&(d=`${p.encoding} + ${p.audioFile.startsWith("./Fluid")?"piano":"drums"}`),c.push({...h.demographics,...p,date:h.date,testType:d})}return console.log(c),c},s=u=>{if(u.length===0)return[];const c=Bn(u,h=>h.testType).map(([h,p])=>{const d=p.map(m=>m.final);return{encoding:h,finals:d,finalMean:xi(d),finalVar:eo(d),trialCounts:p.map(m=>m.trialCount)}});return console.log(c),c};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=f(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=Ou(i.map(u=>Math.abs(u.final))))},[a,o,r,l,i]}class _M extends Rt{constructor(e){super(),It(this,e,bM,gM,Lt,{})}}function yM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[6](null)}}}function wM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=300}=e,f;Ye(()=>{console.log(o),console.log(i);const u=Ie({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Fl(i,{x:c=>c,strokeWidth:.5}),El(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${Math.floor(h/3)+1}-${h%3+1}`,fill:"black",stroke:"white"})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){oe[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class vM extends Rt{constructor(e){super(),It(this,e,wM,yM,Lt,{data:3,domain:4,title:5,width:0,height:1})}}function xM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[5](null)}}}function kM(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;Ye(()=>{const s=i.map(c=>({partID:c.partID,...l(c.finals)}));console.log(i,s);const u=Ie({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.partID)},marks:[Jr(s,{x:c=>c.mean,y:c=>c.partID,symbol:"diamond"}),Jr(i,{x:c=>c.mean,y:c=>c.partID}),Iu(s,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),Al([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=xi(s),d=1.96*(Pu(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"partis"in s&&n(3,i=s.partis),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Zo extends Rt{constructor(e){super(),It(this,e,kM,xM,Lt,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function _d(t,e,n){const i=t.slice();return i[13]=e[n],i}function yd(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new vM({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=M("b"),i=at(n),r=D(),ht(o.$$.fragment)},m(l,f){G(l,e,f),y(e,i),G(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&32)&&n!==(n=l[13].encoding+"")&&Ft(i,n);const s={};f&32&&(s.data=l[13].finals),f&32&&(s.title=l[13].encoding),f&16&&(s.domain=[0,l[4]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function MM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,$,F,A,L,R,W,C,B,z,Q,j,X,O,Y,J,lt;c=new Uu({props:{stimuli:t[5]}}),g=new zu({props:{stimuli:t[5]}}),k=new Zo({props:{partis:t[3]}}),$=new Zo({props:{partis:t[2]}}),R=new Zo({props:{partis:t[0]}}),z=new Zo({props:{partis:t[1]}});let et=jt(t[5]),Z=[];for(let N=0;N<et.length;N+=1)Z[N]=yd(_d(t,et,N));const q=N=>K(Z[N],1,1,()=>{Z[N]=null});return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis (Within-Participant Variance)",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values per Stimulus",u=D(),ht(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts per Stimulus",m=D(),ht(g.$$.fragment),_=D(),b=M("div"),v=M("h3"),v.textContent="Mean and CI of Final Values per Participant",w=D(),ht(k.$$.fragment),x=D(),S=M("h4"),S.textContent="Only Audio",T=D(),ht($.$$.fragment),F=D(),A=M("h4"),A.textContent="Only Color",L=D(),ht(R.$$.fragment),W=D(),C=M("h4"),C.textContent="Only Waveform",B=D(),ht(z.$$.fragment),Q=D(),j=M("div"),X=M("h3"),X.textContent="Final Values for Each Stimulus and All Participants",O=D();for(let N=0;N<Z.length;N+=1)Z[N].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(N,E){G(N,e,E),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w),ut(k,b,null),y(b,x),y(b,S),y(b,T),ut($,b,null),y(b,F),y(b,A),y(b,L),ut(R,b,null),y(b,W),y(b,C),y(b,B),ut(z,b,null),y(e,Q),y(e,j),y(j,X),y(j,O);for(let P=0;P<Z.length;P+=1)Z[P]&&Z[P].m(j,null);Y=!0,J||(lt=gt(a,"input",t[6]),J=!0)},p(N,[E]){const P={};E&32&&(P.stimuli=N[5]),c.$set(P);const tt={};E&32&&(tt.stimuli=N[5]),g.$set(tt);const U={};E&8&&(U.partis=N[3]),k.$set(U);const dt={};E&4&&(dt.partis=N[2]),$.$set(dt);const nt={};E&1&&(nt.partis=N[0]),R.$set(nt);const mt={};if(E&2&&(mt.partis=N[1]),z.$set(mt),E&48){et=jt(N[5]);let ot;for(ot=0;ot<et.length;ot+=1){const rt=_d(N,et,ot);Z[ot]?(Z[ot].p(rt,E),H(Z[ot],1)):(Z[ot]=yd(rt),Z[ot].c(),H(Z[ot],1),Z[ot].m(j,null))}for(Qt(),ot=et.length;ot<Z.length;ot+=1)q(ot);Jt()}},i(N){if(!Y){H(c.$$.fragment,N),H(g.$$.fragment,N),H(k.$$.fragment,N),H($.$$.fragment,N),H(R.$$.fragment,N),H(z.$$.fragment,N);for(let E=0;E<et.length;E+=1)H(Z[E]);Y=!0}},o(N){K(c.$$.fragment,N),K(g.$$.fragment,N),K(k.$$.fragment,N),K($.$$.fragment,N),K(R.$$.fragment,N),K(z.$$.fragment,N),Z=Z.filter(Boolean);for(let E=0;E<Z.length;E+=1)K(Z[E]);Y=!1},d(N){N&&V(e),ct(c),ct(g),ct(k),ct($),ct(R),ct(z),yn(Z,N),J=!1,lt()}}}function SM(t,e,n){let i,r,o,a,l,f,s,u=[];const c=async m=>{const g=[],_=[];for(const b of m.target.files){const v=await b.text();g.push(JSON.parse(v)),_.push(b.name)}n(7,u=g),console.log(u)},h=m=>{if(m.lenght===0)return[];const g=[];for(const _ of m)for(const b of _.tests){let v=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(v=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({..._.demographics,...b,date:_.date,testType:v})}return console.log(g),g},p=m=>{if(m.length===0)return[];const g=Bn(m,_=>_.testType).map(([_,b])=>{const v=b.map(w=>w.final);return{encoding:_,finals:v,finalMean:xi(v),finalVar:eo(v),trialCounts:b.map(w=>w.trialCount)}});return console.log(g),g},d=(m,g)=>{if(m.length===0)return[];g&&(m=m.filter(b=>b.testType===g));const _=Bn(m,b=>b.partID).map(([b,v])=>{const w=v.map(k=>k.final);return{partID:b,finals:w,finalMean:xi(w),finalVar:eo(w),trialCounts:v.map(k=>k.trialCount)}});return console.log(_),_};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=h(u)),t.$$.dirty&256&&n(5,r=p(i)),t.$$.dirty&256&&n(4,o=Ou(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=d(i)),t.$$.dirty&256&&n(2,l=d(i,"audio + piano")),t.$$.dirty&256&&n(1,f=d(i,"waveform + piano")),t.$$.dirty&256&&n(0,s=d(i,"color"))},[s,f,l,a,o,r,c,u,i]}class TM extends Rt{constructor(e){super(),It(this,e,SM,MM,Lt,{})}}function wd(t,e){return t==null?e:typeof t=="function"?t:n=>n[t]}function CM(t,e,n,i,r,o){const a=new Float64Array(o),l=(o-1)/(r-i);for(let f=0;f<t.length;++f){const s=t[f],u=e(s,f,t),c=n(s,f,t);if(!(Number.isFinite(u)&&Number.isFinite(c)))continue;const h=(u-i)*l,p=Math.floor(h),d=p+1;0<=p&&d<o?(a[p]+=(d-h)*c,a[d]+=(h-p)*c):p===-1?a[d]+=(h-p)*c:d===o&&(a[p]+=(d-h)*c)}return a}function vd(t,e=!1){const n=new Float64Array(5),i=new Float64Array(4);$M(n,i,t);const r=Float64Array.of(0,i[1]-n[1]*i[0],i[2]-n[2]*i[0],i[3]-n[3]*i[0],-n[4]*i[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(i[0]+i[1]+i[2]+i[3])/o,l=(r[1]+r[2]+r[3]+r[4])/o;return{sigma:t,negative:e,a:n,b_causal:i,b_anticausal:r,sum_causal:a,sum_anticausal:l}}function $M(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),l=.6318/n,f=1.997/n,s=Float64Array.of(-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l),-a*Math.cos(f),a*Math.sin(f),-a*Math.cos(-f),a*Math.sin(-f)),u=n*2.5066282746310007,c=Float64Array.of(r[0],r[1],0,0,0,0,0,0),h=Float64Array.of(1,0,s[0],s[1],0,0,0,0,0,0);let p,d;for(d=2;d<8;d+=2){for(c[d]=s[d]*c[d-2]-s[d+1]*c[d-1],c[d+1]=s[d]*c[d-1]+s[d+1]*c[d-2],p=d-2;p>0;p-=2)c[p]+=s[d]*c[p-2]-s[d+1]*c[p-1],c[p+1]+=s[d]*c[p-1]+s[d+1]*c[p-2];for(p=0;p<=d;p+=2)c[p]+=r[d]*h[p]-r[d+1]*h[p+1],c[p+1]+=r[d]*h[p+1]+r[d+1]*h[p];for(h[d+2]=s[d]*h[d]-s[d+1]*h[d+1],h[d+3]=s[d]*h[d+1]+s[d+1]*h[d],p=d;p>0;p-=2)h[p]+=s[d]*h[p-2]-s[d+1]*h[p-1],h[p+1]+=s[d]*h[p-1]+s[d+1]*h[p-2]}for(d=0;d<4;++d)p=d<<1,e[d]=c[p]/u,t[d+1]=h[p+2]}function AM(t,e,n,i=1,r=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),l=r,f=EM){const s=i*2,u=i*3,c=i*4,h=i*n;let p,d;for(f(r,e,n,i,t.b_causal,3,t.a,4,t.sum_causal,a,t.sigma),d=4,p=c;d<n;++d,p+=i)r[d]=t.b_causal[0]*e[p]+t.b_causal[1]*e[p-i]+t.b_causal[2]*e[p-s]+t.b_causal[3]*e[p-u]-t.a[1]*r[d-1]-t.a[2]*r[d-2]-t.a[3]*r[d-3]-t.a[4]*r[d-4];for(f(o,e,n,-i,t.b_anticausal,4,t.a,4,t.sum_anticausal,a,t.sigma),d=4,p=h-i*5;d<n;++d,p-=i)o[d]=t.b_anticausal[1]*e[p+i]+t.b_anticausal[2]*e[p+s]+t.b_anticausal[3]*e[p+u]+t.b_anticausal[4]*e[p+c]-t.a[1]*o[d-1]-t.a[2]*o[d-2]-t.a[3]*o[d-3]-t.a[4]*o[d-4];if(t.negative)for(d=0,p=0;d<n;++d,p+=i)l[p]=r[d]+o[n-d-1];else for(d=0,p=0;d<n;++d,p+=i)l[p]=Math.max(0,r[d]+o[n-d-1]);return l}function EM(t,e,n,i,r,o,a,l,f,s){const u=Math.abs(i)*n,c=i<0?u+i:0;let h,p,d;for(p=0;p<l;++p)for(s[p]=p<=o?r[p]:0,d=1;d<=l&&d<=p;++d)s[p]-=a[d]*s[p-d];for(d=0;d<l;++d)for(t[d]=0,p=1;p<=d;++p)h=c+i*p,h>=0&&h<u&&(t[d]+=s[d-p]*e[h]);const m=e[c];if(m>0)for(d=0;d<l;++d)t[d]+=s[d]*m}function NM(t,e,n=0){const i=t.length;let r,o;for(let a=0;a<i;++a){const l=e(t[a],a,t);l!=null&&(r===void 0?l>=l&&(r=o=l):(l<r&&(r=l),l>o&&(o=l)))}return[r-n,o+n]}function DM(t,e){const n=t.map(e).filter(s=>s!=null&&s>=s);n.sort((s,u)=>s-u);const i=FM(n),r=xd(n,.25),o=xd(n,.75),a=n.length,l=(o-r)/1.34;return 1.06*(Math.min(i,l)||i||Math.abs(r)||1)*Math.pow(a,-.2)}function FM(t){const e=t.length;let n=0,i,r=0,o=0;for(let a=0;a<e;++a){const l=t[a];i=l-r,r+=i/++n,o+=i*(l-r)}return n>1?Math.sqrt(o/(n-1)):NaN}function xd(t,e){const n=t.length;if(!n)return NaN;if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];const i=(n-1)*e,r=Math.floor(i),o=t[r];return o+(t[r+1]-o)*(i-r)}function LM(t,e={}){const{adjust:n=1,pad:i=3,bins:r=512}=e,o=wd(e.x,_=>_),a=wd(e.weight,()=>1/t.length);let l=e.bandwidth??n*DM(t,o);const[f,s]=e.extent??NM(t,o,i*l),u=CM(t,o,a,f,s,r),c=(s-f)/(r-1),h=u.some(_=>_<0);let p=vd(l/c,h),d;function*m(_="x",b="y"){const v=g.grid(),w=1/c;for(let k=0;k<r;++k)yield{[_]:f+k*c,[b]:v[k]*w}}const g={[Symbol.iterator]:m,points:m,grid:()=>d||(d=AM(p,u,r)),extent:()=>[f,s],bandwidth(_){return arguments.length?(_!==l&&(l=_,d=null,p=vd(l/c,h)),g):l}};return g}function IM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){G(o,e,a),y(e,n),t[10](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:wt,o:wt,d(o){o&&V(e),t[10](null)}}}function RM(t,e,n){let i,{values:r}=e,{title:o=""}=e,{xLabel:a="some value"}=e,{xDomain:l=void 0}=e,{width:f=1e3}=e,{height:s=100}=e,{bandwidth:u=.25}=e,{bins:c=256}=e,{pad:h=4}=e,p;Ye(()=>{const m=[...i.bandwidth(u)];n(2,p.textContent="",p);const g=Ie({width:f,height:s,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:l},y:{label:"density",type:"linear"},marks:[Yx(m,{x:"x",y:"y",fill:"#ccc"}),Fl(r,{x:_=>_,strokeWidth:.5}),t2([0])]});p.appendChild(g)});function d(m){oe[m?"unshift":"push"](()=>{p=m,n(2,p)})}return t.$$set=m=>{"values"in m&&n(3,r=m.values),"title"in m&&n(4,o=m.title),"xLabel"in m&&n(5,a=m.xLabel),"xDomain"in m&&n(6,l=m.xDomain),"width"in m&&n(0,f=m.width),"height"in m&&n(1,s=m.height),"bandwidth"in m&&n(7,u=m.bandwidth),"bins"in m&&n(8,c=m.bins),"pad"in m&&n(9,h=m.pad)},t.$$.update=()=>{t.$$.dirty&904&&(i=LM(r,{bandwidth:u,pad:h,bins:c}))},[f,s,p,r,o,a,l,u,c,h,d]}class PM extends Rt{constructor(e){super(),It(this,e,RM,IM,Lt,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function OM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){G(o,e,a),y(e,n),t[12](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:wt,o:wt,d(o){o&&V(e),t[12](null)}}}function UM(t,e,n){let{title:i=""}=e,{data:r}=e,{x:o="x"}=e,{y:a="y"}=e,{xLabel:l=null}=e,{yLabel:f=null}=e,{xDomain:s=void 0}=e,{yDomain:u=void 0}=e,{grid:c=!1}=e,{width:h=300}=e,{height:p=300}=e,d;Ye(()=>{console.log(r,o,a),n(2,d.textContent="",d);const g=Ie({width:h,height:p,title:i,style:{background:"none"},x:{label:l||(typeof o=="string"?o:"x"),domain:s},y:{label:f||(typeof a=="string"?a:"y"),domain:u},marks:[Jr(r,{x:o,y:a})]});d.appendChild(g)});function m(g){oe[g?"unshift":"push"](()=>{d=g,n(2,d)})}return t.$$set=g=>{"title"in g&&n(3,i=g.title),"data"in g&&n(4,r=g.data),"x"in g&&n(5,o=g.x),"y"in g&&n(6,a=g.y),"xLabel"in g&&n(7,l=g.xLabel),"yLabel"in g&&n(8,f=g.yLabel),"xDomain"in g&&n(9,s=g.xDomain),"yDomain"in g&&n(10,u=g.yDomain),"grid"in g&&n(11,c=g.grid),"width"in g&&n(0,h=g.width),"height"in g&&n(1,p=g.height)},[h,p,d,i,r,o,a,l,f,s,u,c,m]}class kd extends Rt{constructor(e){super(),It(this,e,UM,OM,Lt,{title:3,data:4,x:5,y:6,xLabel:7,yLabel:8,xDomain:9,yDomain:10,grid:11,width:0,height:1})}}function Md(t,e,n){const i=t.slice();return i[12]=e[n],i}function Sd(t,e,n){const i=t.slice();return i[15]=e[n],i}function Td(t,e,n){const i=t.slice();return i[18]=e[n],i}function Cd(t,e,n){const i=t.slice();return i[21]=e[n],i}function $d(t){let e,n;return e=new PM({props:{title:`Density of final values for ${t[21][0]}`,values:t[21][1].map(Fd),xLabel:"final values",xDomain:[-1,20]}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=`Density of final values for ${i[21][0]}`),r&2&&(o.values=i[21][1].map(Fd)),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Ad(t){let e,n=t[18].encoding+"",i,r,o,a;return o=new K2({props:{data:t[18].finals,title:t[18].encoding,domain:[0,t[3]]}}),{c(){e=M("b"),i=at(n),r=D(),ht(o.$$.fragment)},m(l,f){G(l,e,f),y(e,i),G(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&16)&&n!==(n=l[18].encoding+"")&&Ft(i,n);const s={};f&16&&(s.data=l[18].finals),f&16&&(s.title=l[18].encoding),f&8&&(s.domain=[0,l[3]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function Ed(t){let e,n=t[15]+"",i;return{c(){e=M("p"),i=at(n)},m(r,o){G(r,e,o),y(e,i)},p(r,o){o&1&&n!==(n=r[15]+"")&&Ft(i,n)},d(r){r&&V(e)}}}function Nd(t){let e,n,i,r=t[12].demographics.internalPID+"",o,a,l=t[12].demographics.partID+"",f,s,u,c,h=jt(t[12].demographics.partFeedback.split(`
`)),p=[];for(let d=0;d<h.length;d+=1)p[d]=Ed(Sd(t,h,d));return{c(){e=M("div"),n=M("b"),i=at("P"),o=at(r),a=D(),f=at(l),s=at(":"),u=D();for(let d=0;d<p.length;d+=1)p[d].c();c=D(),me(e,"text-align","left")},m(d,m){G(d,e,m),y(e,n),y(n,i),y(n,o),y(n,a),y(n,f),y(n,s),y(e,u);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(e,null);y(e,c)},p(d,m){if(m&1&&r!==(r=d[12].demographics.internalPID+"")&&Ft(o,r),m&1&&l!==(l=d[12].demographics.partID+"")&&Ft(f,l),m&1){h=jt(d[12].demographics.partFeedback.split(`
`));let g;for(g=0;g<h.length;g+=1){const _=Sd(d,h,g);p[g]?p[g].p(_,m):(p[g]=Ed(_),p[g].c(),p[g].m(e,c))}for(;g<p.length;g+=1)p[g].d(1);p.length=h.length}},d(d){d&&V(e),yn(p,d)}}}function zM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g=t[0].length+"",_,b,v=t[1].length+"",w,k,x=t[5].length+"",S,T,$,F,A,L,R,W,C,B,z,Q,j,X,O,Y,J,lt,et,Z,q,N,E,P,tt,U,dt,nt,mt,ot=jt(Bn(t[1],Dd)),rt=[];for(let st=0;st<ot.length;st+=1)rt[st]=$d(Cd(t,ot,st));const Vt=st=>K(rt[st],1,1,()=>{rt[st]=null});L=new kd({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",xDomain:[0,20],yDomain:[0,20],data:t[0].map(t[8])}}),W=new kd({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",xDomain:[0,20],yDomain:[0,20],data:t[0].map(Ld)}}),j=new Uu({props:{stimuli:t[4]}}),lt=new zu({props:{stimuli:t[4]}});let ee=jt(t[4]),bt=[];for(let st=0;st<ee.length;st+=1)bt[st]=Ad(Td(t,ee,st));const Dt=st=>K(bt[st],1,1,()=>{bt[st]=null});let Et=jt(t[0]),zt=[];for(let st=0;st<Et.length;st+=1)zt[st]=Nd(Md(t,Et,st));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("label"),l=at(`Prolifc demographics CSV
    `),f=M("input"),s=D(),u=M("label"),c=at(`Results JSONs
    `),h=M("input"),d=D(),m=M("div"),_=at(g),b=at(` participants completed -
    `),w=at(v),k=at(` tests -
    `),S=at(x),T=at(" filtered tests"),$=D(),F=M("div");for(let st=0;st<rt.length;st+=1)rt[st].c();A=D(),ht(L.$$.fragment),R=D(),ht(W.$$.fragment),C=D(),B=M("div"),z=M("h3"),z.textContent="Mean and CI of Final Values",Q=D(),ht(j.$$.fragment),X=D(),O=M("div"),Y=M("h3"),Y.textContent="Mean and CI of Trial Counts",J=D(),ht(lt.$$.fragment),et=D(),Z=M("div"),q=M("h3"),q.textContent="Final Values for Each Stimulus and All Participants",N=D();for(let st=0;st<bt.length;st+=1)bt[st].c();E=D(),P=M("div"),tt=M("h3"),tt.textContent="Feedback",U=D();for(let st=0;st<zt.length;st+=1)zt[st].c();I(f,"type","file"),I(f,"accept",".csv"),I(h,"type","file"),I(h,"accept",".json"),h.multiple=!0,h.disabled=p=t[2]===null},m(st,St){G(st,e,St),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,f),y(e,s),y(e,u),y(u,c),y(u,h),y(e,d),y(e,m),y(m,_),y(m,b),y(m,w),y(m,k),y(m,S),y(m,T),y(e,$),y(e,F);for(let Bt=0;Bt<rt.length;Bt+=1)rt[Bt]&&rt[Bt].m(F,null);y(e,A),ut(L,e,null),y(e,R),ut(W,e,null),y(e,C),y(e,B),y(B,z),y(B,Q),ut(j,B,null),y(e,X),y(e,O),y(O,Y),y(O,J),ut(lt,O,null),y(e,et),y(e,Z),y(Z,q),y(Z,N);for(let Bt=0;Bt<bt.length;Bt+=1)bt[Bt]&&bt[Bt].m(Z,null);y(e,E),y(e,P),y(P,tt),y(P,U);for(let Bt=0;Bt<zt.length;Bt+=1)zt[Bt]&&zt[Bt].m(P,null);dt=!0,nt||(mt=[gt(f,"input",t[6]),gt(h,"input",t[7])],nt=!0)},p(st,[St]){if((!dt||St&4&&p!==(p=st[2]===null))&&(h.disabled=p),(!dt||St&1)&&g!==(g=st[0].length+"")&&Ft(_,g),(!dt||St&2)&&v!==(v=st[1].length+"")&&Ft(w,v),(!dt||St&32)&&x!==(x=st[5].length+"")&&Ft(S,x),St&2){ot=jt(Bn(st[1],Dd));let pt;for(pt=0;pt<ot.length;pt+=1){const Ge=Cd(st,ot,pt);rt[pt]?(rt[pt].p(Ge,St),H(rt[pt],1)):(rt[pt]=$d(Ge),rt[pt].c(),H(rt[pt],1),rt[pt].m(F,null))}for(Qt(),pt=ot.length;pt<rt.length;pt+=1)Vt(pt);Jt()}const Bt={};St&1&&(Bt.data=st[0].map(st[8])),L.$set(Bt);const To={};St&1&&(To.data=st[0].map(Ld)),W.$set(To);const fn={};St&16&&(fn.stimuli=st[4]),j.$set(fn);const hr={};if(St&16&&(hr.stimuli=st[4]),lt.$set(hr),St&24){ee=jt(st[4]);let pt;for(pt=0;pt<ee.length;pt+=1){const Ge=Td(st,ee,pt);bt[pt]?(bt[pt].p(Ge,St),H(bt[pt],1)):(bt[pt]=Ad(Ge),bt[pt].c(),H(bt[pt],1),bt[pt].m(Z,null))}for(Qt(),pt=ee.length;pt<bt.length;pt+=1)Dt(pt);Jt()}if(St&1){Et=jt(st[0]);let pt;for(pt=0;pt<Et.length;pt+=1){const Ge=Md(st,Et,pt);zt[pt]?zt[pt].p(Ge,St):(zt[pt]=Nd(Ge),zt[pt].c(),zt[pt].m(P,null))}for(;pt<zt.length;pt+=1)zt[pt].d(1);zt.length=Et.length}},i(st){if(!dt){for(let St=0;St<ot.length;St+=1)H(rt[St]);H(L.$$.fragment,st),H(W.$$.fragment,st),H(j.$$.fragment,st),H(lt.$$.fragment,st);for(let St=0;St<ee.length;St+=1)H(bt[St]);dt=!0}},o(st){rt=rt.filter(Boolean);for(let St=0;St<rt.length;St+=1)K(rt[St]);K(L.$$.fragment,st),K(W.$$.fragment,st),K(j.$$.fragment,st),K(lt.$$.fragment,st),bt=bt.filter(Boolean);for(let St=0;St<bt.length;St+=1)K(bt[St]);dt=!1},d(st){st&&V(e),yn(rt,st),ct(L),ct(W),ct(j),ct(lt),yn(bt,st),yn(zt,st),nt=!1,ke(mt)}}}let BM=20;const Dd=t=>t.testType,Fd=t=>t.final,Ld=t=>({...t.demographics,finalAudio:t.tests.filter(e=>e.encoding.startsWith("audio"))[0].final,finalColor:t.tests.filter(e=>e.encoding.startsWith("color"))[0].final,finalWaveform:t.tests.filter(e=>e.encoding.startsWith("waveform"))[0].final});function qM(t,e,n){let i,r,o,a,l=[],f=null;const s=async m=>{const _=await m.target.files[0].text(),b=sM(_);n(2,f=b)},u=async m=>{const g=[];for(const b of m.target.files){const v=await b.text();g.push(JSON.parse(v))}console.log(g.map(b=>`${b.demographics.partID} ${b.studyStep}`));const _=Bn(g,b=>b.demographics.partID);console.log(`${_.length} participants`,_),n(0,l=g.filter(b=>b.studyStep==="feedback").map((b,v)=>({...b,demographics:{...b.demographics,internalPID:v+1},prolificDemogr:f.filter(w=>w["Participant id"]===b.demographics.partID)[0]}))),console.log("participants",l)},c=m=>{if(m.lenght===0)return[];const g=[];for(const _ of m)for(const b of _.tests){let v=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(v=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({..._.demographics,countryBirth:_.prolificDemogr["Country of birth"],countryResidence:_.prolificDemogr["Country of residence"],prolificApprovals:_.prolificDemogr["Total approvals"],...b,date:_.date,testType:v})}return console.log("tests",g),g},h=(m,g)=>m.filter(_=>_.final<g),p=m=>{if(m.length===0)return[];const g=Bn(m,_=>_.testType).map(([_,b])=>{const v=b.map(w=>w.final);return{encoding:_,testType:_,finals:v,finalMean:xi(v),finalVar:eo(v),trialCounts:b.map(w=>w.trialCount)}});return console.log(g),g},d=m=>(console.log(m.tests),{...m.demographics,finalAudio:m.tests.filter(g=>g.encoding.startsWith("audio"))[0].final,finalColor:m.tests.filter(g=>g.encoding.startsWith("color"))[0].final,finalWaveform:m.tests.filter(g=>g.encoding.startsWith("waveform"))[0].final});return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=c(l)),t.$$.dirty&2&&n(5,r=h(i,BM)),t.$$.dirty&2&&n(4,o=p(i)),t.$$.dirty&2&&n(3,a=Ou(i.map(m=>Math.abs(m.final)))),t.$$.dirty&2&&console.log("tests by enc",Bn(i,m=>m.testType))},[l,i,f,a,o,r,s,u,d]}class WM extends Rt{constructor(e){super(),It(this,e,qM,zM,Lt,{})}}function Id(t,e,n){const i=t.slice();return i[8]=e[n],i}function Rd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=at(n),e.__value=t[8],ft(e,e.__value)},m(r,o){G(r,e,o),y(e,i)},p:wt,d(r){r&&V(e)}}}function YM(t){let e,n,i,r,o,a,l,f,s=(t[1]*1e3).toFixed(1)+"",u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,$,F,A,L,R,W,C,B,z,Q,j,X,O,Y,J,lt,et,Z,q,N=jt(t[5]),E=[];for(let P=0;P<N.length;P+=1)E[P]=Rd(Id(t,N,P));return x=new to({props:{pattern:t[3],audioFile:t[2]}}),T=new to({props:{pattern:t[4],audioFile:t[2]}}),F=new zn({props:{pattern:t[3],audioFile:t[2],width:En,height:Nn}}),L=new zn({props:{pattern:t[4],audioFile:t[2],width:En,height:Nn}}),W=new Pn({props:{pattern:t[3],width:En,height:Nn}}),B=new Pn({props:{pattern:t[4],width:En,height:Nn}}),Q=new On({props:{pattern:t[3],width:En,height:Nn}}),X=new On({props:{pattern:t[4],width:En,height:Nn}}),Y=new Un({props:{pattern:t[3],width:En,height:Nn}}),lt=new Un({props:{pattern:t[4],width:En,height:Nn}}),{c(){e=M("main"),n=M("h2"),n.textContent="Examples",i=D(),r=M("div"),o=M("label"),a=at(`deviation
      `),l=M("input"),f=at(`
      (`),u=at(s),c=at(" milliseconds)"),h=D(),p=M("label"),d=at(`instrument sample:
      `),m=M("select");for(let P=0;P<E.length;P+=1)E[P].c();g=D(),_=M("div"),b=M("h2"),b.textContent="early fourth note",v=D(),w=M("h2"),w.textContent="late fourth note",k=D(),ht(x.$$.fragment),S=D(),ht(T.$$.fragment),$=D(),ht(F.$$.fragment),A=D(),ht(L.$$.fragment),R=D(),ht(W.$$.fragment),C=D(),ht(B.$$.fragment),z=D(),ht(Q.$$.fragment),j=D(),ht(X.$$.fragment),O=D(),ht(Y.$$.fragment),J=D(),ht(lt.$$.fragment),I(l,"type","range"),I(l,"min","0"),I(l,"max","20"),I(l,"step","1"),I(o,"class","svelte-1kjj0oz"),t[2]===void 0&&rn(()=>t[7].call(m)),I(p,"class","svelte-1kjj0oz"),I(_,"class","stimuli svelte-1kjj0oz")},m(P,tt){G(P,e,tt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),ft(l,t[0]),y(o,f),y(o,u),y(o,c),y(r,h),y(r,p),y(p,d),y(p,m);for(let U=0;U<E.length;U+=1)E[U]&&E[U].m(m,null);de(m,t[2],!0),y(e,g),y(e,_),y(_,b),y(_,v),y(_,w),y(_,k),ut(x,_,null),y(_,S),ut(T,_,null),y(_,$),ut(F,_,null),y(_,A),ut(L,_,null),y(_,R),ut(W,_,null),y(_,C),ut(B,_,null),y(_,z),ut(Q,_,null),y(_,j),ut(X,_,null),y(_,O),ut(Y,_,null),y(_,J),ut(lt,_,null),et=!0,Z||(q=[gt(l,"change",t[6]),gt(l,"input",t[6]),gt(m,"change",t[7])],Z=!0)},p(P,[tt]){if(tt&1&&ft(l,P[0]),(!et||tt&2)&&s!==(s=(P[1]*1e3).toFixed(1)+"")&&Ft(u,s),tt&32){N=jt(P[5]);let Et;for(Et=0;Et<N.length;Et+=1){const zt=Id(P,N,Et);E[Et]?E[Et].p(zt,tt):(E[Et]=Rd(zt),E[Et].c(),E[Et].m(m,null))}for(;Et<E.length;Et+=1)E[Et].d(1);E.length=N.length}tt&36&&de(m,P[2]);const U={};tt&8&&(U.pattern=P[3]),tt&4&&(U.audioFile=P[2]),x.$set(U);const dt={};tt&16&&(dt.pattern=P[4]),tt&4&&(dt.audioFile=P[2]),T.$set(dt);const nt={};tt&8&&(nt.pattern=P[3]),tt&4&&(nt.audioFile=P[2]),F.$set(nt);const mt={};tt&16&&(mt.pattern=P[4]),tt&4&&(mt.audioFile=P[2]),L.$set(mt);const ot={};tt&8&&(ot.pattern=P[3]),W.$set(ot);const rt={};tt&16&&(rt.pattern=P[4]),B.$set(rt);const Vt={};tt&8&&(Vt.pattern=P[3]),Q.$set(Vt);const ee={};tt&16&&(ee.pattern=P[4]),X.$set(ee);const bt={};tt&8&&(bt.pattern=P[3]),Y.$set(bt);const Dt={};tt&16&&(Dt.pattern=P[4]),lt.$set(Dt)},i(P){et||(H(x.$$.fragment,P),H(T.$$.fragment,P),H(F.$$.fragment,P),H(L.$$.fragment,P),H(W.$$.fragment,P),H(B.$$.fragment,P),H(Q.$$.fragment,P),H(X.$$.fragment,P),H(Y.$$.fragment,P),H(lt.$$.fragment,P),et=!0)},o(P){K(x.$$.fragment,P),K(T.$$.fragment,P),K(F.$$.fragment,P),K(L.$$.fragment,P),K(W.$$.fragment,P),K(B.$$.fragment,P),K(Q.$$.fragment,P),K(X.$$.fragment,P),K(Y.$$.fragment,P),K(lt.$$.fragment,P),et=!1},d(P){P&&V(e),yn(E,P),ct(x),ct(T),ct(F),ct(L),ct(W),ct(B),ct(Q),ct(X),ct(Y),ct(lt),Z=!1,ke(q)}}}let En=600,Nn=100,Tf=.5,Pd=6,Od=3,Ud=!0,zd=0;function HM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,l=[],f=[];function s(){a=be(this.value),n(0,a)}function u(){o=ui(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*Tf),t.$$.dirty&2&&n(3,l=Wi(Pd,Tf,Od,-i,Ud,zd)),t.$$.dirty&2&&n(4,f=Wi(Pd,Tf,Od,i,Ud,zd))},[a,i,o,l,f,r,s,u]}class VM extends Rt{constructor(e){super(),It(this,e,HM,YM,Lt,{})}}function GM(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){G(l,e,f),y(e,n),t[5](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:wt,i:wt,o:wt,d(l){l&&V(e),t[5](null),o=!1,a()}}}function XM(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,{currentTrialNumber:o=-1}=e,a=null,l;const f=()=>{r&&l&&(a=Ba(r,i),Ts(a,r.sampleRate,l))};ci(f);const s=()=>{l&&(n(0,l.currentTime=0,l),l.play())};ci(()=>{document.querySelector("html").addEventListener("keyup",c=>{c.key==="p"&&s()})});function u(c){oe[c?"unshift":"push"](()=>{l=c,n(0,l)})}return t.$$set=c=>{"pattern"in c&&n(2,i=c.pattern),"cachedAudio"in c&&n(3,r=c.cachedAudio),"currentTrialNumber"in c&&n(4,o=c.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&16&&o>-1&&(f(),window.setTimeout(s,200))},[l,s,i,r,o,u]}class jM extends Rt{constructor(e){super(),It(this,e,XM,GM,Lt,{pattern:2,cachedAudio:3,currentTrialNumber:4})}}function ra(t,e){return new URLSearchParams(t.location.search).get(e)}function ZM(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio",n.controls=!1},m(l,f){G(l,e,f),y(e,n),t[4](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:wt,i:wt,o:wt,d(l){l&&V(e),t[4](null),o=!1,a()}}}function KM(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,o=null,a;const l=(u,c)=>{c&&a&&(o=Ba(c,u),Ts(o,c.sampleRate,a))};ci(()=>l(i,r));const f=async()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(u){oe[u?"unshift":"push"](()=>{a=u,n(0,a)})}return t.$$set=u=>{"pattern"in u&&n(2,i=u.pattern),"cachedAudio"in u&&n(3,r=u.cachedAudio)},[a,f,i,r,s]}class QM extends Rt{constructor(e){super(),It(this,e,KM,ZM,Lt,{pattern:2,cachedAudio:3})}}function Bd(t){let e;return{c(){e=M("div"),e.innerHTML=`<p>In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p>By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p>If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CSHH1IPL"><button>I do not consent and will not participate</button></a>`},m(n,i){G(n,e,i)},d(n){n&&V(e)}}}function qd(t){let e,n,i,r,o,a,l,f,s;return r=new QM({props:{pattern:[.1,.6,1.1],cachedAudio:t[3]}}),{c(){e=M("div"),n=M("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,i=D(),ht(r.$$.fragment),o=D(),a=M("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=D(),f=M("a"),f.innerHTML="<button>I cannot hear the audio and will not participate in this study</button>",I(f,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(u,c){G(u,e,c),y(e,n),y(e,i),ut(r,e,null),y(e,o),y(e,a),y(e,l),y(e,f),s=!0},p(u,c){const h={};c[0]&8&&(h.cachedAudio=u[3]),r.$set(h)},i(u){s||(H(r.$$.fragment,u),s=!0)},o(u){K(r.$$.fragment,u),s=!1},d(u){u&&V(e),ct(r)}}}function Wd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b;return{c(){e=M("div"),n=M("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",i=D(),r=M("p"),o=M("button"),o.textContent="+",a=D(),l=M("button"),l.textContent="-",f=D(),s=$f("svg"),u=$f("rect"),m=D(),g=M("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,I(u,"width",c=t[0]*.52),I(u,"height",h=t[17]*2),I(u,"fill","#ccc"),I(u,"rx","8"),I(s,"width",p=t[0]*.52+"px"),I(s,"height",d=t[17]*2+"px")},m(v,w){G(v,e,w),y(e,n),y(e,i),y(e,r),y(r,o),y(r,a),y(r,l),y(e,f),y(e,s),y(s,u),y(e,m),y(e,g),_||(b=[gt(o,"click",t[23]),gt(l,"click",t[24])],_=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&I(u,"width",c),w[0]&131072&&h!==(h=v[17]*2)&&I(u,"height",h),w[0]&1&&p!==(p=v[0]*.52+"px")&&I(s,"width",p),w[0]&131072&&d!==(d=v[17]*2+"px")&&I(s,"height",d)},d(v){v&&V(e),_=!1,ke(b)}}}function Yd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,k,x,S,T,$,F,A;return{c(){e=M("div"),n=M("label"),i=M("span"),i.textContent="Highest finished education (select the best fitting one):",r=D(),o=M("select"),a=M("option"),a.textContent="none",l=M("option"),l.textContent="high school",f=M("option"),f.textContent="bachelor",s=M("option"),s.textContent="master",u=M("option"),u.textContent="phd",c=D(),h=M("label"),p=M("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,d=D(),m=M("input"),g=D(),_=M("label"),b=M("span"),b.textContent="For how many years do you roughly play it/them?",v=D(),w=M("input"),k=D(),x=M("label"),S=M("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,T=D(),$=M("input"),a.__value="none",ft(a,a.__value),l.__value="highs",ft(l,l.__value),f.__value="bachelor",ft(f,f.__value),s.__value="master",ft(s,s.__value),u.__value="phd",ft(u,u.__value),t[7]===void 0&&rn(()=>t[25].call(o)),I(n,"class","svelte-1u8tzxr"),I(m,"type","text"),I(m,"placeholder","free text"),I(h,"class","svelte-1u8tzxr"),I(w,"type","number"),I(w,"min","0"),I(w,"step","1"),I(_,"class","svelte-1u8tzxr"),I($,"type","number"),I($,"min","0"),I($,"step","1"),I(x,"class","svelte-1u8tzxr"),I(e,"class","demo-form svelte-1u8tzxr")},m(L,R){G(L,e,R),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,l),y(o,f),y(o,s),y(o,u),de(o,t[7],!0),y(e,c),y(e,h),y(h,p),y(h,d),y(h,m),ft(m,t[8]),y(e,g),y(e,_),y(_,b),y(_,v),y(_,w),ft(w,t[9]),y(e,k),y(e,x),y(x,S),y(x,T),y(x,$),ft($,t[10]),F||(A=[gt(o,"change",t[25]),gt(m,"input",t[26]),gt(w,"input",t[27]),gt($,"input",t[28])],F=!0)},p(L,R){R[0]&128&&de(o,L[7]),R[0]&256&&m.value!==L[8]&&ft(m,L[8]),R[0]&512&&be(w.value)!==L[9]&&ft(w,L[9]),R[0]&1024&&be($.value)!==L[10]&&ft($,L[10])},d(L){L&&V(e),F=!1,ke(A)}}}function Hd(t){let e,n,i,r,o=t[13]&&Vd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=D(),o&&o.c(),i=Vn()},m(a,l){G(a,e,l),G(a,n,l),o&&o.m(a,l),G(a,i,l),r=!0},p(a,l){a[13]?o?(o.p(a,l),l[0]&8192&&H(o,1)):(o=Vd(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Qt(),K(o,1,1,()=>{o=null}),Jt())},i(a){r||(H(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function Vd(t){let e,n,i=t[6]+1+"",r,o,a=t[4].length+"",l,f,s=t[12]+1+"",u,c,h,p,d,m,g;const _=[tS,JM],b=[];function v(w,k){return w[16]==="audio"?0:w[15]===!1?1:-1}return~(h=v(t))&&(p=b[h]=_[h](t)),{c(){e=M("p"),n=at("Test number "),r=at(i),o=at(" / "),l=at(a),f=at(", trial number "),u=at(s),c=D(),p&&p.c(),d=D(),m=M("p"),m.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`},m(w,k){G(w,e,k),y(e,n),y(e,r),y(e,o),y(e,l),y(e,f),y(e,u),G(w,c,k),~h&&b[h].m(w,k),G(w,d,k),G(w,m,k),g=!0},p(w,k){(!g||k[0]&64)&&i!==(i=w[6]+1+"")&&Ft(r,i),(!g||k[0]&16)&&a!==(a=w[4].length+"")&&Ft(l,a),(!g||k[0]&4096)&&s!==(s=w[12]+1+"")&&Ft(u,s);let x=h;h=v(w),h===x?~h&&b[h].p(w,k):(p&&(Qt(),K(b[x],1,1,()=>{b[x]=null}),Jt()),~h?(p=b[h],p?p.p(w,k):(p=b[h]=_[h](w),p.c()),H(p,1),p.m(d.parentNode,d)):p=null)},i(w){g||(H(p),g=!0)},o(w){K(p),g=!1},d(w){w&&(V(e),V(c),V(d),V(m)),~h&&b[h].d(w)}}}function JM(t){let e,n,i,r;const o=[rS,iS,nS,eS],a=[];function l(f,s){return f[16]==="waveform"?0:f[16]==="tick"?1:f[16]==="bar"?2:f[16]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Vn()},m(f,s){~e&&a[e].m(f,s),G(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Qt(),K(a[u],1,1,()=>{a[u]=null}),Jt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function tS(t){let e,n,i,r;return i=new jM({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],cachedAudio:t[3],currentTrialNumber:t[12]}}),{c(){e=M("div"),e.innerHTML=`Listen to the audio, the forth note comes either too soon or too late.
          Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=D(),ht(i.$$.fragment)},m(o,a){G(o,e,a),G(o,n,a),ut(i,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.pattern=[...o[1].slice(0,o[1].length-1),o[1].at(-1)+Math.random()*1e-4]),a[0]&8&&(l.cachedAudio=o[3]),a[0]&4096&&(l.currentTrialNumber=o[12]),i.$set(l)},i(o){r||(H(i.$$.fragment,o),r=!0)},o(o){K(i.$$.fragment,o),r=!1},d(o){o&&(V(e),V(n)),ct(i,o)}}}function eS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Un({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Un({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Un({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function nS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new On({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new On({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new On({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The bar chart shows the size of the gaps between notes in the bars'
            height (example: the bar at 2 shows the gap between the first and
            second note). Look at the third bar, it is either lower (early) or
            higher (late) than the others.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function iS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Pn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Pn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Pn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`Look at the peaks, the gap between the third and forth tick is
            either smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function rS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new zn({props:{pattern:t[18],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),a=new zn({props:{pattern:t[19],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),h=new zn({props:{pattern:t[1],audioFile:t[2],cachedAudio:t[3],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the peaks, the gap between the third and forth peaks is either
            smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const g={};m[0]&4&&(g.audioFile=d[2]),m[0]&8&&(g.cachedAudio=d[3]),m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&4&&(_.audioFile=d[2]),m[0]&8&&(_.cachedAudio=d[3]),m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&4&&(b.audioFile=d[2]),m[0]&8&&(b.cachedAudio=d[3]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function Gd(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Do you have any final feedback/comments?
        `),r=M("textarea")},m(l,f){G(l,e,f),y(e,n),y(n,i),y(n,r),ft(r,t[11]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&2048&&ft(r,l[11])},d(l){l&&V(e),o=!1,a()}}}function Xd(t){let e,n,i;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("a"),i.textContent="click here to get your compensation",I(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){G(r,e,o),G(r,n,o),G(r,i,o)},d(r){r&&(V(e),V(n),V(i))}}}function jd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step",I(e,"class","next-btn svelte-1u8tzxr")},m(r,o){G(r,e,o),n||(i=gt(e,"click",t[20]),n=!0)},p:wt,d(r){r&&V(e),n=!1,i()}}}function oS(t){let e,n,i,r,o,a,l,f,s,u=t[5]==="consent"&&Bd(),c=t[5]==="start1"&&qd(t),h=t[5]==="start2"&&Wd(t),p=t[5]==="demo"&&Yd(t),d=t[5]==="tests"&&Hd(t),m=t[5]==="feedback"&&Gd(t),g=t[5]==="done"&&Xd(),_=!t[14]&&t[5]!=="done"&&jd(t);return{c(){e=M("main"),u&&u.c(),n=D(),c&&c.c(),i=D(),h&&h.c(),r=D(),p&&p.c(),o=D(),d&&d.c(),a=D(),m&&m.c(),l=D(),g&&g.c(),f=D(),_&&_.c(),I(e,"class","svelte-1u8tzxr")},m(b,v){G(b,e,v),u&&u.m(e,null),y(e,n),c&&c.m(e,null),y(e,i),h&&h.m(e,null),y(e,r),p&&p.m(e,null),y(e,o),d&&d.m(e,null),y(e,a),m&&m.m(e,null),y(e,l),g&&g.m(e,null),y(e,f),_&&_.m(e,null),s=!0},p(b,v){b[5]==="consent"?u||(u=Bd(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),b[5]==="start1"?c?(c.p(b,v),v[0]&32&&H(c,1)):(c=qd(b),c.c(),H(c,1),c.m(e,i)):c&&(Qt(),K(c,1,1,()=>{c=null}),Jt()),b[5]==="start2"?h?h.p(b,v):(h=Wd(b),h.c(),h.m(e,r)):h&&(h.d(1),h=null),b[5]==="demo"?p?p.p(b,v):(p=Yd(b),p.c(),p.m(e,o)):p&&(p.d(1),p=null),b[5]==="tests"?d?(d.p(b,v),v[0]&32&&H(d,1)):(d=Hd(b),d.c(),H(d,1),d.m(e,a)):d&&(Qt(),K(d,1,1,()=>{d=null}),Jt()),b[5]==="feedback"?m?m.p(b,v):(m=Gd(b),m.c(),m.m(e,l)):m&&(m.d(1),m=null),b[5]==="done"?g||(g=Xd(),g.c(),g.m(e,f)):g&&(g.d(1),g=null),!b[14]&&b[5]!=="done"?_?_.p(b,v):(_=jd(b),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i(b){s||(H(c),H(d),s=!0)},o(b){K(c),K(d),s=!1},d(b){b&&V(e),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d(),d&&d.d(),m&&m.d(),g&&g.d(),_&&_.d()}}}const aS="/store";let Zd=.5;const Cf=20;let lS=6,fS=!0,sS=0;function uS(t,e,n){let i,r,o=ra(window,"PROLIFIC_PID"),a=ra(window,"STUDY_ID"),l=ra(window,"SESSION_ID");const f=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let s=f[0],u;Ss(s).then(bt=>{n(3,u=bt),console.log("Audio fetched",bt)});let c=[{stimulus:"audio",audioFile:f[0]},{stimulus:"waveform",audioFile:f[0]},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],p=[0,.5,1,1.6,2.1,2.6];let d="consent",m=0,g,_="",b="",v=0,w=0,k="",x=0,S,T={},$=[],F,A,L=!1,R=!1,W=!1,C="tick",B=Cf,z=4-1,Q=600,j=[],X=[],O=0;const Y=[];ci(()=>{document.querySelector("html").addEventListener("keyup",P)});const J=()=>{A=new At({ratio:{firstVal:Cf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Cf],direction:-1,reversalLimit:5,verbosity:0}}),A.init()};function lt(){d==="consent"?n(5,d="start1"):d==="start1"?n(5,d="start2"):d==="start2"?(n(4,c=Cs(c)),n(5,d="demo")):d==="demo"?_==""||b==""?alert("please fill the form first"):(n(5,d="tests"),n(6,m=0)):d==="tests"?(U(),m<c.length?(n(16,C=c[m].stimulus),n(2,s=c[m].audioFile),et()):n(5,d="feedback")):d==="feedback"&&(U(),n(5,d="done"))}function et(){J(),n(12,x=0),S=0,F=0,n(13,L=!0),X=[],$=[],g=new Date,Z()}function Z(){console.log("Starting trial "+x),T={},n(14,R=!0),q()}function q(){let Dt=Math.round(A.getLast("ratio"));Dt=Math.random()<.5?Dt:-Dt,T.deviation=Dt,n(21,B=Dt),T.startTime=new Date,n(15,W=!0),window.setTimeout(()=>{n(15,W=!1)},1e3)}function N(bt){if(!R)return;n(14,R=!1),T.decisionChoice=bt,T.errorCode=0,T.timeTaken=(new Date-T.startTime)/1e3;const Dt=F;(T.decisionChoice==0&&T.deviation<0||T.decisionChoice==1&&T.deviation>0)&&T.errorCode==0&&F++,T.errorCode==0&&(A.next(Dt!=F),$[$.length]=T),T.errorCode==0&&S++,n(12,x++,x),A.reversalLimitReached("ratio")?E():Z()}function E(){n(13,L=!1),tt(),X=[],O=A.getFinalVal("ratio");for(let Dt=0;Dt<$.length;Dt++)X[Dt]=$[Dt].deviation;console.log(X);const bt=new Date;Y.push({encoding:C,audioFile:s,final:O,data:X,score:F,testNumber:m,trialCount:x+1,trials:$,validTrialCount:S+1,testTimeSeconds:(bt-g)/1e3}),n(6,m++,m)}function P(bt){if(!W)switch(bt.key){case"ArrowLeft":R&&N(0);break;case"ArrowRight":R&&N(1);break;case"PageDown":!R&&d!=="done"&&lt()}}function tt(){`${F}`,x+1,`${(F/(x+1)*100).toFixed(1)}${A.getFinalVal("ratio")}`}function U(){const bt={studyStep:d,demographics:{partID:o,studyID:a,sessionID:l,partEduation:_,partMusicInstr:b,partMusicInstrYears:v,partVisExperienceYears:w,partFeedback:k,visWidth:Q},date:new Date().toISOString(),tests:Y};console.log("saving data",bt);const Dt=JSON.stringify(bt,void 0,2);fetch(aS,{method:"POST",headers:{"Content-Type":"application/json"},body:Dt}).then(Et=>{console.log("Data saved:",Et)})}const dt=()=>n(0,Q*=1.05),nt=()=>n(0,Q*=.95);function mt(){_=ui(this),n(7,_)}function ot(){b=this.value,n(8,b)}function rt(){v=be(this.value),n(9,v)}function Vt(){w=be(this.value),n(10,w)}function ee(){k=this.value,n(11,k)}return t.$$.update=()=>{t.$$.dirty[0]&2097152&&n(22,i=B/100*Zd),t.$$.dirty[0]&1&&n(17,r=Q/6),t.$$.dirty[0]&4194306&&(n(1,j=Wi(lS,Zd,z,i,fS,sS)),console.log("generated pattern",j))},[Q,j,s,u,c,d,m,_,b,v,w,k,x,L,R,W,C,r,h,p,lt,B,i,dt,nt,mt,ot,rt,Vt,ee]}class cS extends Rt{constructor(e){super(),It(this,e,uS,oS,Lt,{},null,[-1,-1])}}function Kd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b;return{c(){e=M("div"),n=M("button"),n.textContent="Playground",i=D(),r=M("button"),r.textContent="Examples",o=D(),a=M("button"),a.textContent="Study",l=D(),f=M("button"),f.textContent="Analysis",s=D(),u=M("button"),u.textContent="Study (variance)",c=D(),h=M("button"),h.textContent="Analysis (variance)",p=D(),d=M("button"),d.textContent="Study (Prolific)",m=D(),g=M("button"),g.textContent="Analysis (Prolific)"},m(v,w){G(v,e,w),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(e,s),y(e,u),y(e,c),y(e,h),y(e,p),y(e,d),y(e,m),y(e,g),_||(b=[gt(n,"click",t[1]),gt(r,"click",t[2]),gt(a,"click",t[3]),gt(f,"click",t[4]),gt(u,"click",t[5]),gt(h,"click",t[6]),gt(d,"click",t[7]),gt(g,"click",t[8])],_=!0)},p:wt,d(v){v&&V(e),_=!1,ke(b)}}}function hS(t){let e,n;return e=new WM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function dS(t){let e,n;return e=new cS({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function pS(t){let e,n;return e=new TM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function mS(t){let e,n;return e=new Kk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function gS(t){let e,n;return e=new _M({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function bS(t){let e,n;return e=new Uk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function _S(t){let e,n;return e=new VM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function yS(t){let e,n;return e=new Tk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function wS(t){let e,n,i,r,o,a,l,f=t[0]!=="study_prolific"&&Kd(t);const s=[yS,_S,bS,gS,mS,pS,dS,hS],u=[];function c(h,p){return h[0]==="playground"?0:h[0]==="examples"?1:h[0]==="study"?2:h[0]==="analysis"?3:h[0]==="study_variance"?4:h[0]==="analysis_variance"?5:h[0]==="study_prolific"?6:h[0]==="analysis_prolific"?7:-1}return~(o=c(t))&&(a=u[o]=s[o](t)),{c(){e=M("main"),n=M("h1"),n.textContent="Rhythm Error Sensitivity Study",i=D(),f&&f.c(),r=D(),a&&a.c()},m(h,p){G(h,e,p),y(e,n),y(e,i),f&&f.m(e,null),y(e,r),~o&&u[o].m(e,null),l=!0},p(h,[p]){h[0]!=="study_prolific"?f?f.p(h,p):(f=Kd(h),f.c(),f.m(e,r)):f&&(f.d(1),f=null);let d=o;o=c(h),o!==d&&(a&&(Qt(),K(u[d],1,1,()=>{u[d]=null}),Jt()),~o?(a=u[o],a||(a=u[o]=s[o](h),a.c()),H(a,1),a.m(e,null)):a=null)},i(h){l||(H(a),l=!0)},o(h){K(a),l=!1},d(h){h&&V(e),f&&f.d(),~o&&u[o].d()}}}function vS(t,e,n){let i=ra(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific"),()=>n(0,i="analysis_prolific")]}class xS extends Rt{constructor(e){super(),It(this,e,vS,wS,Lt,{})}}new xS({target:document.getElementById("app")});export{n0 as g};

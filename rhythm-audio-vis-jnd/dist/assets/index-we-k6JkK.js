var hb=Object.defineProperty;var db=(t,e,n)=>e in t?hb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Rn=(t,e,n)=>(db(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function _t(){}function p0(t){return t()}function Zu(){return Object.create(null)}function $e(t){t.forEach(p0)}function m0(t){return typeof t=="function"}function Ot(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function pb(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function G(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function Ve(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function Uf(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ot(t){return document.createTextNode(t)}function D(){return ot(" ")}function ti(){return ot("")}function gt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function I(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function xe(t){return t===""?null:+t}function mb(t){return Array.from(t.childNodes)}function Lt(t,e){e=""+e,t.data!==e&&(t.data=e)}function st(t,e){t.value=e??""}function we(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function _e(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function gi(t){const e=t.querySelector(":checked");return e&&e.__value}class gb{constructor(e=!1){Rn(this,"is_svg",!1);Rn(this,"e");Rn(this,"n");Rn(this,"t");Rn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Uf(n.nodeName):this.e=M(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)G(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(V)}}let qr;function Rr(t){qr=t}function g0(){if(!qr)throw new Error("Function called outside component initialization");return qr}function bi(t){g0().$$.on_mount.push(t)}function qe(t){g0().$$.after_update.push(t)}const Ui=[],oe=[];let Wi=[];const Ku=[],bb=Promise.resolve();let zf=!1;function _b(){zf||(zf=!0,bb.then(b0))}function hn(t){Wi.push(t)}const Xl=new Set;let Fi=0;function b0(){if(Fi!==0)return;const t=qr;do{try{for(;Fi<Ui.length;){const e=Ui[Fi];Fi++,Rr(e),yb(e.$$)}}catch(e){throw Ui.length=0,Fi=0,e}for(Rr(null),Ui.length=0,Fi=0;oe.length;)oe.pop()();for(let e=0;e<Wi.length;e+=1){const n=Wi[e];Xl.has(n)||(Xl.add(n),n())}Wi.length=0}while(Ui.length);for(;Ku.length;)Ku.pop()();zf=!1,Xl.clear(),Rr(t)}function yb(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(hn)}}function wb(t){const e=[],n=[];Wi.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Wi=e}const ra=new Set;let ui;function Gt(){ui={r:0,c:[],p:ui}}function Xt(){ui.r||$e(ui.c),ui=ui.p}function Y(t,e){t&&t.i&&(ra.delete(t),t.i(e))}function K(t,e,n,i){if(t&&t.o){if(ra.has(t))return;ra.add(t),ui.c.push(()=>{ra.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Bt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ht(t){t&&t.c()}function ut(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),hn(()=>{const o=t.$$.on_mount.map(p0).filter(m0);t.$$.on_destroy?t.$$.on_destroy.push(...o):$e(o),t.$$.on_mount=[]}),r.forEach(hn)}function ct(t,e){const n=t.$$;n.fragment!==null&&(wb(n.after_update),$e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function vb(t,e){t.$$.dirty[0]===-1&&(Ui.push(t),_b(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ut(t,e,n,i,r,o,a=null,l=[-1]){const f=qr;Rr(t);const s=t.$$={fragment:null,ctx:[],props:o,update:_t,not_equal:r,bound:Zu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Zu(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(c,h,...p)=>{const d=p.length?p[0]:h;return s.ctx&&r(s.ctx[c],s.ctx[c]=d)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](d),u&&vb(t,c)),h}):[],s.update(),u=!0,$e(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const c=mb(e.target);s.fragment&&s.fragment.l(c),c.forEach(V)}else s.fragment&&s.fragment.c();e.intro&&Y(t.$$.fragment),ut(t,e.target,e.anchor),b0()}Rr(f)}class zt{constructor(){Rn(this,"$$");Rn(this,"$$set")}$destroy(){ct(this,1),this.$destroy=_t}$on(e,n){if(!m0(n))return _t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!pb(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xb="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xb);const kb="modulepreload",Mb=function(t){return"/rhythm-vis/"+t},Ju={},Li=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=Mb(a),a in Ju)return;Ju[a]=!0;const l=a.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(!!i)for(let c=o.length-1;c>=0;c--){const h=o[c];if(h.href===a&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":kb,l||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),l)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function Sb(t){if(t){if(t=new Uint8Array(t.buffer||t),Cb(t))return"wav";if(Tb(t))return"mp3";if(Eb(t))return"flac";if($b(t))return"m4a";if(Nb(t))return"opus";if(Ab(t))return"oga";if(Db(t))return"qoa"}}function Tb(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function Cb(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function Ab(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function Eb(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function $b(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function Nb(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function Db(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let Fb=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const Lb=globalThis.AudioBuffer||Fb;async function Ib(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=Sb(t);if(!e)throw Error("Cannot detect audio format");if(!me[e])throw Error("Missing decoder for "+e+" format");return me[e](t)}const me={async oga(t){let{decoder:e}=me.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await Li(()=>import("./index-J64GgcWy.js"),__vite__mapDeps([0,1,2]));await(me.oga.decoder=e=new n).ready}return t&&Ii(await e.decodeFile(t))},async mp3(t){let{decoder:e}=me.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await Li(()=>import("./index-er59X76W.js"),__vite__mapDeps([3,1]));await(me.mp3.decoder=e=new n).ready}return t&&Ii(await e.decode(t))},async flac(t){let{decoder:e}=me.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await Li(()=>import("./index-ng9yjEI3.js"),__vite__mapDeps([4,1,2]));await(me.flac.decoder=e=new n).ready}return t&&Ii(await e.decode(t))},async opus(t){let{decoder:e}=me.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await Li(()=>import("./index-pWTx6dyo.js"),__vite__mapDeps([5,1,2]));await(me.opus.decoder=e=new n).ready}return t&&Ii(await e.decodeFile(t))},async wav(t){let{decode:e}=me.wav;if(!e){let n=await Li(()=>import("./index-SFoQo9fk.js").then(i=>i.i),__vite__mapDeps([]));e=me.wav.decode=n.default.decode}return t&&Ii(await e(t))},async qoa(t){let{decode:e}=me.qoa;return e||(me.qoa.decode=e=(await Li(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&Ii(await e(t))}};function Ii({channelData:t,sampleRate:e}){let n=new Lb({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var _r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rb=Pb;function Pb(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=Ub(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Ob(a,r,i,n,o)}function Ob(t,e,n,i,r){var o=r/8,a=i*o,l=new ArrayBuffer(44+t.length*o),f=new DataView(l);return Io(f,0,"RIFF"),f.setUint32(4,36+t.length*o,!0),Io(f,8,"WAVE"),Io(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,e,!0),f.setUint16(22,i,!0),f.setUint32(24,n,!0),f.setUint32(28,n*a,!0),f.setUint16(32,a,!0),f.setUint16(34,r,!0),Io(f,36,"data"),f.setUint32(40,t.length*o,!0),e===1?Bb(f,44,t):zb(f,44,t),l}function Ub(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function zb(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function Bb(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function Io(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const qb=_0(Rb);function Xi(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let l=0;l<t;++l){let f;r?f=l>=n?i:0:f=l===n?i:0,a.push(l*e+o+f)}return a}async function Rs(t){const n=await(await fetch(t)).arrayBuffer();return await Ib(n)}function Ka(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const l=Math.round(a*t.sampleRate);let f=1;for(let s=0;s<r.length;++s)f=Math.max(0,f-2/40100),o[l+s]=r[s]*f}return o}function Ps(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([qb(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function Os(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function ve(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ao(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Ja(t){let e,n,i;t.length!==2?(e=ve,n=(l,f)=>ve(t(l),f),i=(l,f)=>t(l)-f):(e=t===ve||t===ao?t:Wb,n=t,i=t);function r(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<0?s=c+1:u=c}while(s<u)}return s}function o(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<=0?s=c+1:u=c}while(s<u)}return s}function a(l,f,s=0,u=l.length){const c=r(l,f,s,u-1);return c>s&&i(l[c-1],f)>-i(l[c],f)?c-1:c}return{left:r,center:a,right:o}}function Wb(){return 0}function y0(t){return t===null?NaN:+t}function*Yb(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const Hb=Ja(ve),Vb=Hb.right;Ja(y0).center;const Qa=Vb;function Us(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function Gb(t){return t.length|0}function Xb(t){return!(t>0)}function jb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Zb(t){return e=>t(...e)}function Kb(...t){const e=typeof t[t.length-1]=="function"&&Zb(t.pop());t=t.map(jb);const n=t.map(Gb),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(Xb))return o;for(;;){o.push(r.map((l,f)=>t[f][l]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function Jb(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function ji(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,o+=i*(l-r))}if(n>1)return o/(n-1)}function lo(t,e){const n=ji(t,e);return n&&Math.sqrt(n)}function Re(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class _i{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,l=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);l&&(n[i++]=l),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class yi extends Map{constructor(e,n=x0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Bf(this,e))}has(e){return super.has(Bf(this,e))}set(e,n){return super.set(w0(this,e),n)}delete(e){return super.delete(v0(this,e))}}class tl extends Set{constructor(e,n=x0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(Bf(this,e))}add(e){return super.add(w0(this,e))}delete(e){return super.delete(v0(this,e))}}function Bf({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function w0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function v0({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function x0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function da(t){return t}function el(t,...e){return nl(t,da,da,e)}function ln(t,...e){return nl(t,Array.from,da,e)}function Yi(t,e,...n){return nl(t,da,e,n)}function Qb(t,e,...n){return nl(t,Array.from,e,n)}function nl(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const l=new yi,f=i[a++];let s=-1;for(const u of o){const c=f(u,++s,o),h=l.get(c);h?h.push(u):l.set(c,[u])}for(const[u,c]of l)l.set(u,r(c,a));return e(l)}(t,0)}function t_(t,e){return Array.from(e,n=>t[n])}function Wr(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const l=pa(a[r],a[o]);if(l)return l}})):(n=t.map(n),i.sort((r,o)=>pa(n[r],n[o]))),t_(t,i)}return t.sort(k0(n))}function k0(t=ve){if(t===ve)return pa;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function pa(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function zs(t,e,n){return(e.length!==2?Wr(Yi(t,e,n),([i,r],[o,a])=>ve(r,a)||ve(i,o)):Wr(el(t,n),([i,r],[o,a])=>e(r,a)||ve(i,o))).map(([i])=>i)}const e_=Math.sqrt(50),n_=Math.sqrt(10),i_=Math.sqrt(2);function ma(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=e_?10:o>=n_?5:o>=i_?2:1;let l,f,s;return r<0?(s=Math.pow(10,-r)/a,l=Math.round(t*s),f=Math.round(e*s),l/s<t&&++l,f/s>e&&--f,s=-s):(s=Math.pow(10,r)*a,l=Math.round(t/s),f=Math.round(e/s),l*s<t&&++l,f*s>e&&--f),f<l&&.5<=n&&n<2?ma(t,e,n*2):[l,f,s]}function Yr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?ma(e,t,n):ma(t,e,n);if(!(o>=r))return[];const l=o-r+1,f=new Array(l);if(i)if(a<0)for(let s=0;s<l;++s)f[s]=(o-s)/-a;else for(let s=0;s<l;++s)f[s]=(o-s)*a;else if(a<0)for(let s=0;s<l;++s)f[s]=(r+s)/-a;else for(let s=0;s<l;++s)f[s]=(r+s)*a;return f}function ga(t,e,n){return e=+e,t=+t,n=+n,ma(t,e,n)[2]}function qf(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?ga(e,t,n):ga(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function r_(t){return Math.max(1,Math.ceil(Math.log(Us(t))/Math.LN2)+1)}function ke(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function o_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function Cn(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function a_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function M0(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?pa:k0(r);i>n;){if(i-n>600){const f=i-n+1,s=e-n+1,u=Math.log(f),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(f-c)/f)*(s-f/2<0?-1:1),p=Math.max(n,Math.floor(e-s*c/f+h)),d=Math.min(i,Math.floor(e+(f-s)*c/f+h));M0(t,e,p,d,r)}const o=t[e];let a=n,l=i;for(yr(t,n,e),r(t[i],o)>0&&yr(t,n,i);a<l;){for(yr(t,a,l),++a,--l;r(t[a],o)<0;)++a;for(;r(t[l],o)>0;)--l}r(t[n],o)===0?yr(t,n,l):(++l,yr(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function yr(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function S0(t,e=ve){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?ve(a,r)>0:ve(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Zi(t,e,n){if(t=Float64Array.from(Yb(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return Cn(t);if(e>=1)return ke(t);var i,r=(i-1)*e,o=Math.floor(r),a=ke(M0(t,o).subarray(0,o+1)),l=Cn(t.subarray(o+1));return a+(l-a)*(r-o)}}function l_(t,e,n=y0){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return a+(l-a)*(r-o)}}function f_(t,e,n){const i=Us(t),r=Zi(t,.75)-Zi(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function T0(t,e,n){const i=Us(t),r=lo(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function jn(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function Wf(t,e){return Zi(t,.5,e)}function*s_(t){for(const e of t)yield*e}function C0(t){return Array.from(s_(t))}function u_(t,e){const n=new yi;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function c_(t,e=h_){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function h_(t,e){return[t,e]}function Yf(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Zn(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function ba(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function d_(t){return t}var jl=1,Zl=2,Hf=3,Ro=4,Qu=1e-6;function p_(t){return"translate("+t+",0)"}function m_(t){return"translate(0,"+t+")"}function g_(t){return e=>+t(e)}function b_(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function __(){return!this.__axis}function y_(t,e){var n=[],i=null,r=null,o=6,a=6,l=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===jl||t===Ro?-1:1,u=t===Ro||t===Zl?"x":"y",c=t===jl||t===Hf?p_:m_;function h(p){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):d_),b=Math.max(o,0)+l,_=e.range(),g=+_[0]+f,v=+_[_.length-1]+f,w=(e.bandwidth?b_:g_)(e.copy(),f),k=p.selection?p.selection():p,x=k.selectAll(".domain").data([null]),S=k.selectAll(".tick").data(d,e).order(),T=S.exit(),E=S.enter().append("g").attr("class","tick"),F=S.select("line"),C=S.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(E),F=F.merge(E.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),C=C.merge(E.append("text").attr("fill","currentColor").attr(u,s*b).attr("dy",t===jl?"0em":t===Hf?"0.71em":"0.32em")),p!==k&&(x=x.transition(p),S=S.transition(p),F=F.transition(p),C=C.transition(p),T=T.transition(p).attr("opacity",Qu).attr("transform",function(L){return isFinite(L=w(L))?c(L+f):this.getAttribute("transform")}),E.attr("opacity",Qu).attr("transform",function(L){var R=this.parentNode.__axis;return c((R&&isFinite(R=R(L))?R:w(L))+f)})),T.remove(),x.attr("d",t===Ro||t===Zl?a?"M"+s*a+","+g+"H"+f+"V"+v+"H"+s*a:"M"+f+","+g+"V"+v:a?"M"+g+","+s*a+"V"+f+"H"+v+"V"+s*a:"M"+g+","+f+"H"+v),S.attr("opacity",1).attr("transform",function(L){return c(w(L)+f)}),F.attr(u+"2",s*o),C.attr(u,s*b).text(m),k.filter(__).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Zl?"start":t===Ro?"end":"middle"),k.each(function(){this.__axis=w})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),h):i&&i.slice()},h.tickFormat=function(p){return arguments.length?(r=p,h):r},h.tickSize=function(p){return arguments.length?(o=a=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(l=+p,h):l},h.offset=function(p){return arguments.length?(f=+p,h):f},h}function w_(t){return y_(Hf,t)}var v_={value:()=>{}};function A0(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new oa(n)}function oa(t){this._=t}function x_(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}oa.prototype=A0.prototype={constructor:oa,on:function(t,e){var n=this._,i=x_(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=k_(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=tc(n[r],t.name,e);else if(e==null)for(r in n)n[r]=tc(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new oa(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function k_(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function tc(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=v_,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Vf="http://www.w3.org/1999/xhtml";const Ki={svg:"http://www.w3.org/2000/svg",xhtml:Vf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function il(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ki.hasOwnProperty(e)?{space:Ki[e],local:t}:t}function M_(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Vf&&e.documentElement.namespaceURI===Vf?e.createElement(t):e.createElementNS(n,t)}}function S_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rl(t){var e=il(t);return(e.local?S_:M_)(e)}function T_(){}function Bs(t){return t==null?T_:function(){return this.querySelector(t)}}function C_(t){typeof t!="function"&&(t=Bs(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=new Array(a),f,s,u=0;u<a;++u)(f=o[u])&&(s=t.call(f,f.__data__,u,o))&&("__data__"in f&&(s.__data__=f.__data__),l[u]=s);return new Ce(i,this._parents)}function A_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function E_(){return[]}function E0(t){return t==null?E_:function(){return this.querySelectorAll(t)}}function $_(t){return function(){return A_(t.apply(this,arguments))}}function N_(t){typeof t=="function"?t=$_(t):t=E0(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&(i.push(t.call(f,f.__data__,s,a)),r.push(f));return new Ce(i,r)}function $0(t){return function(){return this.matches(t)}}function N0(t){return function(e){return e.matches(t)}}var D_=Array.prototype.find;function F_(t){return function(){return D_.call(this.children,t)}}function L_(){return this.firstElementChild}function I_(t){return this.select(t==null?L_:F_(typeof t=="function"?t:N0(t)))}var R_=Array.prototype.filter;function P_(){return Array.from(this.children)}function O_(t){return function(){return R_.call(this.children,t)}}function U_(t){return this.selectAll(t==null?P_:O_(typeof t=="function"?t:N0(t)))}function z_(t){typeof t!="function"&&(t=$0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new Ce(i,this._parents)}function D0(t){return new Array(t.length)}function B_(){return new Ce(this._enter||this._groups.map(D0),this._parents)}function _a(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_a.prototype={constructor:_a,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function q_(t){return function(){return t}}function W_(t,e,n,i,r,o){for(var a=0,l,f=e.length,s=o.length;a<s;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):n[a]=new _a(t,o[a]);for(;a<f;++a)(l=e[a])&&(r[a]=l)}function Y_(t,e,n,i,r,o,a){var l,f,s=new Map,u=e.length,c=o.length,h=new Array(u),p;for(l=0;l<u;++l)(f=e[l])&&(h[l]=p=a.call(f,f.__data__,l,e)+"",s.has(p)?r[l]=f:s.set(p,f));for(l=0;l<c;++l)p=a.call(t,o[l],l,o)+"",(f=s.get(p))?(i[l]=f,f.__data__=o[l],s.delete(p)):n[l]=new _a(t,o[l]);for(l=0;l<u;++l)(f=e[l])&&s.get(h[l])===f&&(r[l]=f)}function H_(t){return t.__data__}function V_(t,e){if(!arguments.length)return Array.from(this,H_);var n=e?Y_:W_,i=this._parents,r=this._groups;typeof t!="function"&&(t=q_(t));for(var o=r.length,a=new Array(o),l=new Array(o),f=new Array(o),s=0;s<o;++s){var u=i[s],c=r[s],h=c.length,p=G_(t.call(u,u&&u.__data__,s,i)),d=p.length,m=l[s]=new Array(d),b=a[s]=new Array(d),_=f[s]=new Array(h);n(u,c,m,b,_,p,e);for(var g=0,v=0,w,k;g<d;++g)if(w=m[g]){for(g>=v&&(v=g+1);!(k=b[v])&&++v<d;);w._next=k||null}}return a=new Ce(a,i),a._enter=l,a._exit=f,a}function G_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function X_(){return new Ce(this._exit||this._groups.map(D0),this._parents)}function j_(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function Z_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),l=new Array(r),f=0;f<a;++f)for(var s=n[f],u=i[f],c=s.length,h=l[f]=new Array(c),p,d=0;d<c;++d)(p=s[d]||u[d])&&(h[d]=p);for(;f<r;++f)l[f]=n[f];return new Ce(l,this._parents)}function K_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function J_(t){t||(t=Q_);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],l=a.length,f=r[o]=new Array(l),s,u=0;u<l;++u)(s=a[u])&&(f[u]=s);f.sort(e)}return new Ce(r,this._parents).order()}function Q_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ty(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function ey(){return Array.from(this)}function ny(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function iy(){let t=0;for(const e of this)++t;return t}function ry(){return!this.node()}function oy(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,l;o<a;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function ay(t){return function(){this.removeAttribute(t)}}function ly(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fy(t,e){return function(){this.setAttribute(t,e)}}function sy(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function uy(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function cy(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function hy(t,e){var n=il(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?ly:ay:typeof e=="function"?n.local?cy:uy:n.local?sy:fy)(n,e))}function F0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function dy(t){return function(){this.style.removeProperty(t)}}function py(t,e,n){return function(){this.style.setProperty(t,e,n)}}function my(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function gy(t,e,n){return arguments.length>1?this.each((e==null?dy:typeof e=="function"?my:py)(t,e,n??"")):Ji(this.node(),t)}function Ji(t,e){return t.style.getPropertyValue(e)||F0(t).getComputedStyle(t,null).getPropertyValue(e)}function by(t){return function(){delete this[t]}}function _y(t,e){return function(){this[t]=e}}function yy(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function wy(t,e){return arguments.length>1?this.each((e==null?by:typeof e=="function"?yy:_y)(t,e)):this.node()[t]}function L0(t){return t.trim().split(/^|\s+/)}function qs(t){return t.classList||new I0(t)}function I0(t){this._node=t,this._names=L0(t.getAttribute("class")||"")}I0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function R0(t,e){for(var n=qs(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function P0(t,e){for(var n=qs(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function vy(t){return function(){R0(this,t)}}function xy(t){return function(){P0(this,t)}}function ky(t,e){return function(){(e.apply(this,arguments)?R0:P0)(this,t)}}function My(t,e){var n=L0(t+"");if(arguments.length<2){for(var i=qs(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?ky:e?vy:xy)(n,e))}function Sy(){this.textContent=""}function Ty(t){return function(){this.textContent=t}}function Cy(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ay(t){return arguments.length?this.each(t==null?Sy:(typeof t=="function"?Cy:Ty)(t)):this.node().textContent}function Ey(){this.innerHTML=""}function $y(t){return function(){this.innerHTML=t}}function Ny(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Dy(t){return arguments.length?this.each(t==null?Ey:(typeof t=="function"?Ny:$y)(t)):this.node().innerHTML}function Fy(){this.nextSibling&&this.parentNode.appendChild(this)}function Ly(){return this.each(Fy)}function Iy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ry(){return this.each(Iy)}function Py(t){var e=typeof t=="function"?t:rl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Oy(){return null}function Uy(t,e){var n=typeof t=="function"?t:rl(t),i=e==null?Oy:typeof e=="function"?e:Bs(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function zy(){var t=this.parentNode;t&&t.removeChild(this)}function By(){return this.each(zy)}function qy(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Wy(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Yy(t){return this.select(t?Wy:qy)}function Hy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Vy(t){return function(e){t.call(this,e,this.__data__)}}function Gy(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Xy(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function jy(t,e,n){return function(){var i=this.__on,r,o=Vy(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Zy(t,e,n){var i=Gy(t+""),r,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,s=l.length,u;f<s;++f)for(r=0,u=l[f];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(l=e?jy:Xy,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function O0(t,e,n){var i=F0(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ky(t,e){return function(){return O0(this,t,e)}}function Jy(t,e){return function(){return O0(this,t,e.apply(this,arguments))}}function Qy(t,e){return this.each((typeof e=="function"?Jy:Ky)(t,e))}function*tw(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var U0=[null];function Ce(t,e){this._groups=t,this._parents=e}function fo(){return new Ce([[document.documentElement]],U0)}function ew(){return this}Ce.prototype=fo.prototype={constructor:Ce,select:C_,selectAll:N_,selectChild:I_,selectChildren:U_,filter:z_,data:V_,enter:B_,exit:X_,join:j_,merge:Z_,selection:ew,order:K_,sort:J_,call:ty,nodes:ey,node:ny,size:iy,empty:ry,each:oy,attr:hy,style:gy,property:wy,classed:My,text:Ay,html:Dy,raise:Ly,lower:Ry,append:Py,insert:Uy,remove:By,clone:Yy,datum:Hy,on:Zy,dispatch:Qy,[Symbol.iterator]:tw};function Pr(t){return typeof t=="string"?new Ce([[document.querySelector(t)]],[document.documentElement]):new Ce([[t]],U0)}function nw(t){let e;for(;e=t.sourceEvent;)t=e;return t}function iw(t,e){if(t=nw(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function hr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function so(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ei(){}var wi=.7,Qi=1/wi,Hi="\\s*([+-]?\\d+)\\s*",Hr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rw=/^#([0-9a-f]{3,8})$/,ow=new RegExp(`^rgb\\(${Hi},${Hi},${Hi}\\)$`),aw=new RegExp(`^rgb\\(${un},${un},${un}\\)$`),lw=new RegExp(`^rgba\\(${Hi},${Hi},${Hi},${Hr}\\)$`),fw=new RegExp(`^rgba\\(${un},${un},${un},${Hr}\\)$`),sw=new RegExp(`^hsl\\(${Hr},${un},${un}\\)$`),uw=new RegExp(`^hsla\\(${Hr},${un},${un},${Hr}\\)$`),ec={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hr(ei,vi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:nc,formatHex:nc,formatHex8:cw,formatHsl:hw,formatRgb:ic,toString:ic});function nc(){return this.rgb().formatHex()}function cw(){return this.rgb().formatHex8()}function hw(){return z0(this).formatHsl()}function ic(){return this.rgb().formatRgb()}function vi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rw.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rc(e):n===3?new te(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Po(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Po(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ow.exec(t))?new te(e[1],e[2],e[3],1):(e=aw.exec(t))?new te(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lw.exec(t))?Po(e[1],e[2],e[3],e[4]):(e=fw.exec(t))?Po(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=sw.exec(t))?lc(e[1],e[2]/100,e[3]/100,1):(e=uw.exec(t))?lc(e[1],e[2]/100,e[3]/100,e[4]):ec.hasOwnProperty(t)?rc(ec[t]):t==="transparent"?new te(NaN,NaN,NaN,0):null}function rc(t){return new te(t>>16&255,t>>8&255,t&255,1)}function Po(t,e,n,i){return i<=0&&(t=e=n=NaN),new te(t,e,n,i)}function Ws(t){return t instanceof ei||(t=vi(t)),t?(t=t.rgb(),new te(t.r,t.g,t.b,t.opacity)):new te}function Kn(t,e,n,i){return arguments.length===1?Ws(t):new te(t,e,n,i??1)}function te(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}hr(te,Kn,so(ei,{brighter(t){return t=t==null?Qi:Math.pow(Qi,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?wi:Math.pow(wi,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new te(di(this.r),di(this.g),di(this.b),ya(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oc,formatHex:oc,formatHex8:dw,formatRgb:ac,toString:ac}));function oc(){return`#${ci(this.r)}${ci(this.g)}${ci(this.b)}`}function dw(){return`#${ci(this.r)}${ci(this.g)}${ci(this.b)}${ci((isNaN(this.opacity)?1:this.opacity)*255)}`}function ac(){const t=ya(this.opacity);return`${t===1?"rgb(":"rgba("}${di(this.r)}, ${di(this.g)}, ${di(this.b)}${t===1?")":`, ${t})`}`}function ya(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function di(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ci(t){return t=di(t),(t<16?"0":"")+t.toString(16)}function lc(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ge(t,e,n,i)}function z0(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);if(t instanceof ei||(t=vi(t)),!t)return new Ge;if(t instanceof Ge)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,l=o-r,f=(o+r)/2;return l?(e===o?a=(n-i)/l+(n<i)*6:n===o?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?o+r:2-o-r,a*=60):l=f>0&&f<1?0:a,new Ge(a,l,f,t.opacity)}function Gf(t,e,n,i){return arguments.length===1?z0(t):new Ge(t,e,n,i??1)}function Ge(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}hr(Ge,Gf,so(ei,{brighter(t){return t=t==null?Qi:Math.pow(Qi,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wi:Math.pow(wi,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new te(Kl(t>=240?t-240:t+120,r,i),Kl(t,r,i),Kl(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ge(fc(this.h),Oo(this.s),Oo(this.l),ya(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ya(this.opacity);return`${t===1?"hsl(":"hsla("}${fc(this.h)}, ${Oo(this.s)*100}%, ${Oo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function fc(t){return t=(t||0)%360,t<0?t+360:t}function Oo(t){return Math.max(0,Math.min(1,t||0))}function Kl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const B0=Math.PI/180,q0=180/Math.PI,wa=18,W0=.96422,Y0=1,H0=.82521,V0=4/29,Vi=6/29,G0=3*Vi*Vi,pw=Vi*Vi*Vi;function X0(t){if(t instanceof cn)return new cn(t.l,t.a,t.b,t.opacity);if(t instanceof Mn)return j0(t);t instanceof te||(t=Ws(t));var e=ef(t.r),n=ef(t.g),i=ef(t.b),r=Jl((.2225045*e+.7168786*n+.0606169*i)/Y0),o,a;return e===n&&n===i?o=a=r:(o=Jl((.4360747*e+.3850649*n+.1430804*i)/W0),a=Jl((.0139322*e+.0971045*n+.7141733*i)/H0)),new cn(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Xf(t,e,n,i){return arguments.length===1?X0(t):new cn(t,e,n,i??1)}function cn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}hr(cn,Xf,so(ei,{brighter(t){return new cn(this.l+wa*(t??1),this.a,this.b,this.opacity)},darker(t){return new cn(this.l-wa*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=W0*Ql(e),t=Y0*Ql(t),n=H0*Ql(n),new te(tf(3.1338561*e-1.6168667*t-.4906146*n),tf(-.9787684*e+1.9161415*t+.033454*n),tf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Jl(t){return t>pw?Math.pow(t,1/3):t/G0+V0}function Ql(t){return t>Vi?t*t*t:G0*(t-V0)}function tf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ef(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function mw(t){if(t instanceof Mn)return new Mn(t.h,t.c,t.l,t.opacity);if(t instanceof cn||(t=X0(t)),t.a===0&&t.b===0)return new Mn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*q0;return new Mn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function jf(t,e,n,i){return arguments.length===1?mw(t):new Mn(t,e,n,i??1)}function Mn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function j0(t){if(isNaN(t.h))return new cn(t.l,0,0,t.opacity);var e=t.h*B0;return new cn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}hr(Mn,jf,so(ei,{brighter(t){return new Mn(this.h,this.c,this.l+wa*(t??1),this.opacity)},darker(t){return new Mn(this.h,this.c,this.l-wa*(t??1),this.opacity)},rgb(){return j0(this).rgb()}}));var Z0=-.14861,Ys=1.78277,Hs=-.29227,ol=-.90649,Vr=1.97294,sc=Vr*ol,uc=Vr*Ys,cc=Ys*Hs-ol*Z0;function gw(t){if(t instanceof pi)return new pi(t.h,t.s,t.l,t.opacity);t instanceof te||(t=Ws(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(cc*i+sc*e-uc*n)/(cc+sc-uc),o=i-r,a=(Vr*(n-r)-Hs*o)/ol,l=Math.sqrt(a*a+o*o)/(Vr*r*(1-r)),f=l?Math.atan2(a,o)*q0-120:NaN;return new pi(f<0?f+360:f,l,r,t.opacity)}function dn(t,e,n,i){return arguments.length===1?gw(t):new pi(t,e,n,i??1)}function pi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}hr(pi,dn,so(ei,{brighter(t){return t=t==null?Qi:Math.pow(Qi,t),new pi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?wi:Math.pow(wi,t),new pi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*B0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new te(255*(e+n*(Z0*i+Ys*r)),255*(e+n*(Hs*i+ol*r)),255*(e+n*(Vr*i)),this.opacity)}}));function bw(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function _w(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return bw((n-i/e)*e,a,r,o,l)}}const al=t=>()=>t;function K0(t,e){return function(n){return t+n*e}}function yw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Vs(t,e){var n=e-t;return n?K0(t,n>180||n<-180?n-360*Math.round(n/360):n):al(isNaN(t)?e:t)}function ww(t){return(t=+t)==1?le:function(e,n){return n-e?yw(e,n,t):al(isNaN(e)?n:e)}}function le(t,e){var n=e-t;return n?K0(t,n):al(isNaN(t)?e:t)}const xi=function t(e){var n=ww(e);function i(r,o){var a=n((r=Kn(r)).r,(o=Kn(o)).r),l=n(r.g,o.g),f=n(r.b,o.b),s=le(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=l(u),r.b=f(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function vw(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=Kn(e[a]),i[a]=l.r||0,r[a]=l.g||0,o[a]=l.b||0;return i=t(i),r=t(r),o=t(o),l.opacity=1,function(f){return l.r=i(f),l.g=r(f),l.b=o(f),l+""}}}var xw=vw(_w);function kw(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function Mw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Sw(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=uo(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=r[a](l);return o}}function Tw(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ae(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Cw(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=uo(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Zf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nf=new RegExp(Zf.source,"g");function Aw(t){return function(){return t}}function Ew(t){return function(e){return t(e)+""}}function J0(t,e){var n=Zf.lastIndex=nf.lastIndex=0,i,r,o,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=Zf.exec(t))&&(r=nf.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:ae(i,r)})),n=nf.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?f[0]?Ew(f[0].x):Aw(e):(e=f.length,function(s){for(var u=0,c;u<e;++u)l[(c=f[u]).i]=c.x(s);return l.join("")})}function uo(t,e){var n=typeof e,i;return e==null||n==="boolean"?al(e):(n==="number"?ae:n==="string"?(i=vi(e))?(e=i,xi):J0:e instanceof vi?xi:e instanceof Date?Tw:Mw(e)?kw:Array.isArray(e)?Sw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Cw:ae)(t,e)}function Gs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var hc=180/Math.PI,Kf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Q0(t,e,n,i,r,o){var a,l,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),t*i<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*hc,skewX:Math.atan(f)*hc,scaleX:a,scaleY:l}}var Uo;function $w(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Kf:Q0(e.a,e.b,e.c,e.d,e.e,e.f)}function Nw(t){return t==null||(Uo||(Uo=document.createElementNS("http://www.w3.org/2000/svg","g")),Uo.setAttribute("transform",t),!(t=Uo.transform.baseVal.consolidate()))?Kf:(t=t.matrix,Q0(t.a,t.b,t.c,t.d,t.e,t.f))}function t1(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push("translate(",null,e,null,n);d.push({i:m-4,x:ae(s,c)},{i:m-2,x:ae(u,h)})}else(c||h)&&p.push("translate("+c+e+h+n)}function a(s,u,c,h){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),h.push({i:c.push(r(c)+"rotate(",null,i)-2,x:ae(s,u)})):u&&c.push(r(c)+"rotate("+u+i)}function l(s,u,c,h){s!==u?h.push({i:c.push(r(c)+"skewX(",null,i)-2,x:ae(s,u)}):u&&c.push(r(c)+"skewX("+u+i)}function f(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push(r(p)+"scale(",null,",",null,")");d.push({i:m-4,x:ae(s,c)},{i:m-2,x:ae(u,h)})}else(c!==1||h!==1)&&p.push(r(p)+"scale("+c+","+h+")")}return function(s,u){var c=[],h=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,c,h),a(s.rotate,u.rotate,c,h),l(s.skewX,u.skewX,c,h),f(s.scaleX,s.scaleY,u.scaleX,u.scaleY,c,h),s=u=null,function(p){for(var d=-1,m=h.length,b;++d<m;)c[(b=h[d]).i]=b.x(p);return c.join("")}}}var Dw=t1($w,"px, ","px)","deg)"),Fw=t1(Nw,", ",")",")");function Lw(t){return function(e,n){var i=t((e=Gf(e)).h,(n=Gf(n)).h),r=le(e.s,n.s),o=le(e.l,n.l),a=le(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Iw=Lw(Vs);function Rw(t,e){var n=le((t=Xf(t)).l,(e=Xf(e)).l),i=le(t.a,e.a),r=le(t.b,e.b),o=le(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function Pw(t){return function(e,n){var i=t((e=jf(e)).h,(n=jf(n)).h),r=le(e.c,n.c),o=le(e.l,n.l),a=le(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Ow=Pw(Vs);function e1(t){return function e(n){n=+n;function i(r,o){var a=t((r=dn(r)).h,(o=dn(o)).h),l=le(r.s,o.s),f=le(r.l,o.l),s=le(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=l(u),r.l=f(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}e1(Vs);var Xs=e1(le);function ll(t,e){e===void 0&&(e=t,t=uo);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[l](a-l)}}function Ze(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var tr=0,Cr=0,wr=0,n1=1e3,va,Ar,xa=0,ki=0,fl=0,Gr=typeof performance=="object"&&performance.now?performance:Date,i1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function js(){return ki||(i1(Uw),ki=Gr.now()+fl)}function Uw(){ki=0}function ka(){this._call=this._time=this._next=null}ka.prototype=r1.prototype={constructor:ka,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?js():+n)+(e==null?0:+e),!this._next&&Ar!==this&&(Ar?Ar._next=this:va=this,Ar=this),this._call=t,this._time=n,Jf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jf())}};function r1(t,e,n){var i=new ka;return i.restart(t,e,n),i}function zw(){js(),++tr;for(var t=va,e;t;)(e=ki-t._time)>=0&&t._call.call(void 0,e),t=t._next;--tr}function dc(){ki=(xa=Gr.now())+fl,tr=Cr=0;try{zw()}finally{tr=0,qw(),ki=0}}function Bw(){var t=Gr.now(),e=t-xa;e>n1&&(fl-=e,xa=t)}function qw(){for(var t,e=va,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:va=n);Ar=t,Jf(i)}function Jf(t){if(!tr){Cr&&(Cr=clearTimeout(Cr));var e=t-ki;e>24?(t<1/0&&(Cr=setTimeout(dc,t-Gr.now()-fl)),wr&&(wr=clearInterval(wr))):(wr||(xa=Gr.now(),wr=setInterval(Bw,n1)),tr=1,i1(dc))}}function pc(t,e,n){var i=new ka;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Ww=A0("start","end","cancel","interrupt"),Yw=[],o1=0,mc=1,Qf=2,aa=3,gc=4,ts=5,la=6;function sl(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Hw(t,n,{name:e,index:i,group:r,on:Ww,tween:Yw,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:o1})}function Zs(t,e){var n=tn(t,e);if(n.state>o1)throw new Error("too late; already scheduled");return n}function mn(t,e){var n=tn(t,e);if(n.state>aa)throw new Error("too late; already running");return n}function tn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Hw(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=r1(o,0,n.time);function o(s){n.state=mc,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,c,h,p;if(n.state!==mc)return f();for(u in i)if(p=i[u],p.name===n.name){if(p.state===aa)return pc(a);p.state===gc?(p.state=la,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[u]):+u<e&&(p.state=la,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[u])}if(pc(function(){n.state===aa&&(n.state=gc,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=Qf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Qf){for(n.state=aa,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=p);r.length=c+1}}function l(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(f),n.state=ts,1),c=-1,h=r.length;++c<h;)r[c].call(t,u);n.state===ts&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=la,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function Vw(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>Qf&&i.state<ts,i.state=la,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function Gw(t){return this.each(function(){Vw(this,t)})}function Xw(t,e){var n,i;return function(){var r=mn(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function jw(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=mn(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},f=0,s=r.length;f<s;++f)if(r[f].name===e){r[f]=l;break}f===s&&r.push(l)}o.tween=r}}function Zw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=tn(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Xw:jw)(n,t,e))}function Ks(t,e,n){var i=t._id;return t.each(function(){var r=mn(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return tn(r,i).value[e]}}function a1(t,e){var n;return(typeof e=="number"?ae:e instanceof vi?xi:(n=vi(e))?(e=n,xi):J0)(t,e)}function Kw(t){return function(){this.removeAttribute(t)}}function Jw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Qw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function tv(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function ev(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function nv(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function iv(t,e){var n=il(t),i=n==="transform"?Fw:a1;return this.attrTween(t,typeof e=="function"?(n.local?nv:ev)(n,i,Ks(this,"attr."+t,e)):e==null?(n.local?Jw:Kw)(n):(n.local?tv:Qw)(n,i,e))}function rv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function ov(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function av(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&ov(t,o)),n}return r._value=e,r}function lv(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&rv(t,o)),n}return r._value=e,r}function fv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=il(t);return this.tween(n,(i.local?av:lv)(i,e))}function sv(t,e){return function(){Zs(this,t).delay=+e.apply(this,arguments)}}function uv(t,e){return e=+e,function(){Zs(this,t).delay=e}}function cv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?sv:uv)(e,t)):tn(this.node(),e).delay}function hv(t,e){return function(){mn(this,t).duration=+e.apply(this,arguments)}}function dv(t,e){return e=+e,function(){mn(this,t).duration=e}}function pv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?hv:dv)(e,t)):tn(this.node(),e).duration}function mv(t,e){if(typeof e!="function")throw new Error;return function(){mn(this,t).ease=e}}function gv(t){var e=this._id;return arguments.length?this.each(mv(e,t)):tn(this.node(),e).ease}function bv(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;mn(this,t).ease=n}}function _v(t){if(typeof t!="function")throw new Error;return this.each(bv(this._id,t))}function yv(t){typeof t!="function"&&(t=$0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new An(i,this._parents,this._name,this._id)}function wv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var f=e[l],s=n[l],u=f.length,c=a[l]=new Array(u),h,p=0;p<u;++p)(h=f[p]||s[p])&&(c[p]=h);for(;l<i;++l)a[l]=e[l];return new An(a,this._parents,this._name,this._id)}function vv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function xv(t,e,n){var i,r,o=vv(e)?Zs:mn;return function(){var a=o(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function kv(t,e){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(t):this.each(xv(n,t,e))}function Mv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Sv(){return this.on("end.remove",Mv(this._id))}function Tv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Bs(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var l=i[a],f=l.length,s=o[a]=new Array(f),u,c,h=0;h<f;++h)(u=l[h])&&(c=t.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c,sl(s[h],e,n,h,s,tn(u,n)));return new An(o,this._parents,e,n)}function Cv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=E0(t));for(var i=this._groups,r=i.length,o=[],a=[],l=0;l<r;++l)for(var f=i[l],s=f.length,u,c=0;c<s;++c)if(u=f[c]){for(var h=t.call(u,u.__data__,c,f),p,d=tn(u,n),m=0,b=h.length;m<b;++m)(p=h[m])&&sl(p,e,n,m,h,d);o.push(h),a.push(u)}return new An(o,a,e,n)}var Av=fo.prototype.constructor;function Ev(){return new Av(this._groups,this._parents)}function $v(t,e){var n,i,r;return function(){var o=Ji(this,t),a=(this.style.removeProperty(t),Ji(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function l1(t){return function(){this.style.removeProperty(t)}}function Nv(t,e,n){var i,r=n+"",o;return function(){var a=Ji(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function Dv(t,e,n){var i,r,o;return function(){var a=Ji(this,t),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(t),Ji(this,t))),a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l))}}function Fv(t,e){var n,i,r,o="style."+e,a="end."+o,l;return function(){var f=mn(this,t),s=f.on,u=f.value[o]==null?l||(l=l1(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),f.on=i}}function Lv(t,e,n){var i=(t+="")=="transform"?Dw:a1;return e==null?this.styleTween(t,$v(t,i)).on("end.style."+t,l1(t)):typeof e=="function"?this.styleTween(t,Dv(t,i,Ks(this,"style."+t,e))).each(Fv(this._id,t)):this.styleTween(t,Nv(t,i,e),n).on("end.style."+t,null)}function Iv(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Rv(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Iv(t,a,n)),i}return o._value=e,o}function Pv(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Rv(t,e,n??""))}function Ov(t){return function(){this.textContent=t}}function Uv(t){return function(){var e=t(this);this.textContent=e??""}}function zv(t){return this.tween("text",typeof t=="function"?Uv(Ks(this,"text",t)):Ov(t==null?"":t+""))}function Bv(t){return function(e){this.textContent=t.call(this,e)}}function qv(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Bv(r)),e}return i._value=t,i}function Wv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,qv(t))}function Yv(){for(var t=this._name,e=this._id,n=f1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)if(f=a[s]){var u=tn(f,e);sl(f,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new An(i,this._parents,t,n)}function Hv(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var l={value:a},f={value:function(){--r===0&&o()}};n.each(function(){var s=mn(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),s.on=e}),r===0&&o()})}var Vv=0;function An(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function f1(){return++Vv}var bn=fo.prototype;An.prototype={constructor:An,select:Tv,selectAll:Cv,selectChild:bn.selectChild,selectChildren:bn.selectChildren,filter:yv,merge:wv,selection:Ev,transition:Yv,call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:kv,attr:iv,attrTween:fv,style:Lv,styleTween:Pv,text:zv,textTween:Wv,remove:Sv,tween:Zw,delay:cv,duration:pv,ease:gv,easeVarying:_v,end:Hv,[Symbol.iterator]:bn[Symbol.iterator]};function Gv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Xv={time:null,delay:0,duration:250,ease:Gv};function jv(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Zv(t){var e,n;t instanceof An?(e=t._id,t=t._name):(e=f1(),(n=Xv).time=js(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&sl(f,t,e,s,a,n||jv(f,e));return new An(i,this._parents,t,e)}fo.prototype.interrupt=Gw;fo.prototype.transition=Zv;const es=Math.PI,ns=2*es,fi=1e-6,Kv=ns-fi;function s1(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Jv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return s1;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class u1{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?s1:Jv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,f=i-e,s=r-n,u=a-e,c=l-n,h=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>fi)if(!(Math.abs(c*f-s*u)>fi)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,d=r-l,m=f*f+s*s,b=p*p+d*d,_=Math.sqrt(m),g=Math.sqrt(h),v=o*Math.tan((es-Math.acos((m+h-b)/(2*_*g)))/2),w=v/g,k=v/_;Math.abs(w-1)>fi&&this._append`L${e+w*u},${n+w*c}`,this._append`A${o},${o},0,0,${+(c*p>u*d)},${this._x1=e+k*f},${this._y1=n+k*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),f=i*Math.sin(r),s=e+l,u=n+f,c=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>fi||Math.abs(this._y1-u)>fi)&&this._append`L${s},${u}`,i&&(h<0&&(h=h%ns+ns),h>Kv?this._append`A${i},${i},0,1,${c},${e-l},${n-f}A${i},${i},0,1,${c},${this._x1=s},${this._y1=u}`:h>fi&&this._append`A${i},${i},0,${+(h>=es)},${c},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Bn(t=3){return new u1(+t)}var bc={},rf={},of=34,vr=10,af=13;function c1(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Qv(t,e){var n=c1(t);return function(i,r){return e(n(i),r,t)}}function _c(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function ge(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function t3(t){return t<0?"-"+ge(-t,6):t>9999?"+"+ge(t,6):ge(t,4)}function e3(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":t3(t.getUTCFullYear())+"-"+ge(t.getUTCMonth()+1,2)+"-"+ge(t.getUTCDate(),2)+(r?"T"+ge(e,2)+":"+ge(n,2)+":"+ge(i,2)+"."+ge(r,3)+"Z":i?"T"+ge(e,2)+":"+ge(n,2)+":"+ge(i,2)+"Z":n||e?"T"+ge(e,2)+":"+ge(n,2)+"Z":"")}function n3(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(c,h){var p,d,m=r(c,function(b,_){if(p)return p(b,_-1);d=b,p=h?Qv(b,h):c1(b)});return m.columns=d||[],m}function r(c,h){var p=[],d=c.length,m=0,b=0,_,g=d<=0,v=!1;c.charCodeAt(d-1)===vr&&--d,c.charCodeAt(d-1)===af&&--d;function w(){if(g)return rf;if(v)return v=!1,bc;var x,S=m,T;if(c.charCodeAt(S)===of){for(;m++<d&&c.charCodeAt(m)!==of||c.charCodeAt(++m)===of;);return(x=m)>=d?g=!0:(T=c.charCodeAt(m++))===vr?v=!0:T===af&&(v=!0,c.charCodeAt(m)===vr&&++m),c.slice(S+1,x-1).replace(/""/g,'"')}for(;m<d;){if((T=c.charCodeAt(x=m++))===vr)v=!0;else if(T===af)v=!0,c.charCodeAt(m)===vr&&++m;else if(T!==n)continue;return c.slice(S,x)}return g=!0,c.slice(S,d)}for(;(_=w())!==rf;){for(var k=[];_!==bc&&_!==rf;)k.push(_),_=w();h&&(k=h(k,b++))==null||p.push(k)}return p}function o(c,h){return c.map(function(p){return h.map(function(d){return u(p[d])}).join(t)})}function a(c,h){return h==null&&(h=_c(c)),[h.map(u).join(t)].concat(o(c,h)).join(`
`)}function l(c,h){return h==null&&(h=_c(c)),o(c,h).join(`
`)}function f(c){return c.map(s).join(`
`)}function s(c){return c.map(u).join(t)}function u(c){return c==null?"":c instanceof Date?e3(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:r,format:a,formatBody:l,formatRows:f,formatRow:s,formatValue:u}}var i3=n3(","),r3=i3.parse;function o3(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ma(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function er(t){return t=Ma(Math.abs(t)),t?t[1]:NaN}function a3(t,e){return function(n,i){for(var r=n.length,o=[],a=0,l=t[0],f=0;r>0&&l>0&&(f+l+1>i&&(l=Math.max(1,i-f)),o.push(n.substring(r-=l,r+l)),!((f+=l+1)>i));)l=t[a=(a+1)%t.length];return o.reverse().join(e)}}function l3(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var f3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xr(t){if(!(e=f3.exec(t)))throw new Error("invalid format: "+t);var e;return new Js({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xr.prototype=Js.prototype;function Js(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Js.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function s3(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var h1;function u3(t,e){var n=Ma(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(h1=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ma(t,Math.max(0,e+o-1))[0]}function yc(t,e){var n=Ma(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const wc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:o3,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>yc(t*100,e),r:yc,s:u3,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function vc(t){return t}var xc=Array.prototype.map,kc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function c3(t){var e=t.grouping===void 0||t.thousands===void 0?vc:a3(xc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?vc:l3(xc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function s(c){c=Xr(c);var h=c.fill,p=c.align,d=c.sign,m=c.symbol,b=c.zero,_=c.width,g=c.comma,v=c.precision,w=c.trim,k=c.type;k==="n"?(g=!0,k="g"):wc[k]||(v===void 0&&(v=12),w=!0,k="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=m==="$"?i:/[%p]/.test(k)?a:"",T=wc[k],E=/[defgprs%]/.test(k);v=v===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function F(C){var L=x,R=S,W,A,B;if(k==="c")R=T(C)+R,C="";else{C=+C;var z=C<0||1/C<0;if(C=isNaN(C)?f:T(Math.abs(C),v),w&&(C=s3(C)),z&&+C==0&&d!=="+"&&(z=!1),L=(z?d==="("?d:l:d==="-"||d==="("?"":d)+L,R=(k==="s"?kc[8+h1/3]:"")+R+(z&&d==="("?")":""),E){for(W=-1,A=C.length;++W<A;)if(B=C.charCodeAt(W),48>B||B>57){R=(B===46?r+C.slice(W+1):C.slice(W))+R,C=C.slice(0,W);break}}}g&&!b&&(C=e(C,1/0));var J=L.length+C.length+R.length,j=J<_?new Array(_-J+1).join(h):"";switch(g&&b&&(C=e(j+C,j.length?_-R.length:1/0),j=""),p){case"<":C=L+C+R+j;break;case"=":C=L+j+C+R;break;case"^":C=j.slice(0,J=j.length>>1)+L+C+R+j.slice(J);break;default:C=j+L+C+R;break}return o(C)}return F.toString=function(){return c+""},F}function u(c,h){var p=s((c=Xr(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(er(h)/3)))*3,m=Math.pow(10,-d),b=kc[8+d/3];return function(_){return p(m*_)+b}}return{format:s,formatPrefix:u}}var zo,dr,d1;h3({thousands:",",grouping:[3],currency:["$",""]});function h3(t){return zo=c3(t),dr=zo.format,d1=zo.formatPrefix,zo}function d3(t){return Math.max(0,-er(Math.abs(t)))}function p3(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(er(e)/3)))*3-er(Math.abs(t)))}function m3(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,er(e)-er(t))+1}var xt=1e-6,p1=1e-12,St=Math.PI,Wt=St/2,Mc=St/4,Ae=St*2,se=180/St,qt=St/180,At=Math.abs,pr=Math.atan,En=Math.atan2,Mt=Math.cos,m1=Math.exp,Sa=Math.log,lf=Math.pow,vt=Math.sin,Pe=Math.sign||function(t){return t>0?1:t<0?-1:0},Me=Math.sqrt,Qs=Math.tan;function g1(t){return t>1?0:t<-1?St:Math.acos(t)}function Be(t){return t>1?Wt:t<-1?-Wt:Math.asin(t)}function Oe(){}function Ta(t,e){t&&Tc.hasOwnProperty(t.type)&&Tc[t.type](t,e)}var Sc={Feature:function(t,e){Ta(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Ta(n[i].geometry,e)}},Tc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){is(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)is(n[i],e,0)},Polygon:function(t,e){Cc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Cc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Ta(n[i],e)}};function is(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function Cc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)is(t[n],e,1);e.polygonEnd()}function si(t,e){t&&Sc.hasOwnProperty(t.type)?Sc[t.type](t,e):Ta(t,e)}function rs(t){return[En(t[1],t[0]),Be(t[2])]}function nr(t){var e=t[0],n=t[1],i=Mt(n);return[i*Mt(e),i*vt(e),vt(n)]}function Bo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ca(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ff(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function qo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function os(t){var e=Me(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function as(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function ls(t,e){return At(t)>St&&(t-=Math.round(t/Ae)*Ae),[t,e]}ls.invert=ls;function b1(t,e,n){return(t%=Ae)?e||n?as(Ec(t),$c(e,n)):Ec(t):e||n?$c(e,n):ls}function Ac(t){return function(e,n){return e+=t,At(e)>St&&(e-=Math.round(e/Ae)*Ae),[e,n]}}function Ec(t){var e=Ac(t);return e.invert=Ac(-t),e}function $c(t,e){var n=Mt(t),i=vt(t),r=Mt(e),o=vt(e);function a(l,f){var s=Mt(f),u=Mt(l)*s,c=vt(l)*s,h=vt(f),p=h*n+u*i;return[En(c*r-p*o,u*n-h*i),Be(p*r+c*o)]}return a.invert=function(l,f){var s=Mt(f),u=Mt(l)*s,c=vt(l)*s,h=vt(f),p=h*r-c*o;return[En(c*r+h*o,u*n+p*i),Be(p*n-u*i)]},a}function g3(t){t=b1(t[0]*qt,t[1]*qt,t.length>2?t[2]*qt:0);function e(n){return n=t(n[0]*qt,n[1]*qt),n[0]*=se,n[1]*=se,n}return e.invert=function(n){return n=t.invert(n[0]*qt,n[1]*qt),n[0]*=se,n[1]*=se,n},e}function b3(t,e,n,i,r,o){if(n){var a=Mt(e),l=vt(e),f=i*n;r==null?(r=e+i*Ae,o=e-f/2):(r=Nc(a,r),o=Nc(a,o),(i>0?r<o:r>o)&&(r+=i*Ae));for(var s,u=r;i>0?u>o:u<o;u-=f)s=rs([a,-l*Mt(u),-l*vt(u)]),t.point(s[0],s[1])}}function Nc(t,e){e=nr(e),e[0]-=t,os(e);var n=g1(-e[1]);return((-e[2]<0?-n:n)+Ae-xt)%Ae}function _1(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Oe,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function fa(t,e){return At(t[0]-e[0])<xt&&At(t[1]-e[1])<xt}function Wo(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function y1(t,e,n,i,r){var o=[],a=[],l,f;if(t.forEach(function(d){if(!((m=d.length-1)<=0)){var m,b=d[0],_=d[m],g;if(fa(b,_)){if(!b[2]&&!_[2]){for(r.lineStart(),l=0;l<m;++l)r.point((b=d[l])[0],b[1]);r.lineEnd();return}_[0]+=2*xt}o.push(g=new Wo(b,d,null,!0)),a.push(g.o=new Wo(b,null,g,!1)),o.push(g=new Wo(_,d,null,!1)),a.push(g.o=new Wo(_,null,g,!0))}}),!!o.length){for(a.sort(e),Dc(o),Dc(a),l=0,f=a.length;l<f;++l)a[l].e=n=!n;for(var s=o[0],u,c;;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(l=0,f=u.length;l<f;++l)r.point((c=u[l])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(p)for(u=h.p.z,l=u.length-1;l>=0;--l)r.point((c=u[l])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);r.lineEnd()}}}function Dc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function sf(t){return At(t[0])<=St?t[0]:Pe(t[0])*((At(t[0])+St)%Ae-St)}function _3(t,e){var n=sf(e),i=e[1],r=vt(i),o=[vt(n),-Mt(n),0],a=0,l=0,f=new _i;r===1?i=Wt+xt:r===-1&&(i=-Wt-xt);for(var s=0,u=t.length;s<u;++s)if(h=(c=t[s]).length)for(var c,h,p=c[h-1],d=sf(p),m=p[1]/2+Mc,b=vt(m),_=Mt(m),g=0;g<h;++g,d=w,b=x,_=S,p=v){var v=c[g],w=sf(v),k=v[1]/2+Mc,x=vt(k),S=Mt(k),T=w-d,E=T>=0?1:-1,F=E*T,C=F>St,L=b*x;if(f.add(En(L*E*vt(F),_*S+L*Mt(F))),a+=C?T+E*Ae:T,C^d>=n^w>=n){var R=Ca(nr(p),nr(v));os(R);var W=Ca(o,R);os(W);var A=(C^T>=0?-1:1)*Be(W[2]);(i>A||i===A&&(R[0]||R[1]))&&(l+=C^T>=0?1:-1)}}return(a<-xt||a<xt&&f<-p1)^l&1}function w1(t,e,n,i){return function(r){var o=e(r),a=_1(),l=e(a),f=!1,s,u,c,h={point:p,lineStart:m,lineEnd:b,polygonStart:function(){h.point=_,h.lineStart=g,h.lineEnd=v,u=[],s=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=b,u=C0(u);var w=_3(s,i);u.length?(f||(r.polygonStart(),f=!0),y1(u,w3,w,n,r)):w&&(f||(r.polygonStart(),f=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(w,k){t(w,k)&&r.point(w,k)}function d(w,k){o.point(w,k)}function m(){h.point=d,o.lineStart()}function b(){h.point=p,o.lineEnd()}function _(w,k){c.push([w,k]),l.point(w,k)}function g(){l.lineStart(),c=[]}function v(){_(c[0][0],c[0][1]),l.lineEnd();var w=l.clean(),k=a.result(),x,S=k.length,T,E,F;if(c.pop(),s.push(c),c=null,!!S){if(w&1){if(E=k[0],(T=E.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),x=0;x<T;++x)r.point((F=E[x])[0],F[1]);r.lineEnd()}return}S>1&&w&2&&k.push(k.pop().concat(k.shift())),u.push(k.filter(y3))}}return h}}function y3(t){return t.length>1}function w3(t,e){return((t=t.x)[0]<0?t[1]-Wt-xt:Wt-t[1])-((e=e.x)[0]<0?e[1]-Wt-xt:Wt-e[1])}const Fc=w1(function(){return!0},v3,k3,[-St,-Wt]);function v3(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var l=o>0?St:-St,f=At(o-e);At(f-St)<xt?(t.point(e,n=(n+a)/2>0?Wt:-Wt),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),r=0):i!==l&&f>=St&&(At(e-i)<xt&&(e-=i*xt),At(o-l)<xt&&(o-=l*xt),n=x3(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),r=0),t.point(e=o,n=a),i=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function x3(t,e,n,i){var r,o,a=vt(t-n);return At(a)>xt?pr((vt(e)*(o=Mt(i))*vt(n)-vt(i)*(r=Mt(e))*vt(t))/(r*o*a)):(e+i)/2}function k3(t,e,n,i){var r;if(t==null)r=n*Wt,i.point(-St,r),i.point(0,r),i.point(St,r),i.point(St,0),i.point(St,-r),i.point(0,-r),i.point(-St,-r),i.point(-St,0),i.point(-St,r);else if(At(t[0]-e[0])>xt){var o=t[0]<e[0]?St:-St;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function M3(t){var e=Mt(t),n=6*qt,i=e>0,r=At(e)>xt;function o(u,c,h,p){b3(p,t,n,h,u,c)}function a(u,c){return Mt(u)*Mt(c)>e}function l(u){var c,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(b,_){var g=[b,_],v,w=a(b,_),k=i?w?0:s(b,_):w?s(b+(b<0?St:-St),_):0;if(!c&&(d=p=w)&&u.lineStart(),w!==p&&(v=f(c,g),(!v||fa(c,v)||fa(g,v))&&(g[2]=1)),w!==p)m=0,w?(u.lineStart(),v=f(g,c),u.point(v[0],v[1])):(v=f(c,g),u.point(v[0],v[1],2),u.lineEnd()),c=v;else if(r&&c&&i^w){var x;!(k&h)&&(x=f(g,c,!0))&&(m=0,i?(u.lineStart(),u.point(x[0][0],x[0][1]),u.point(x[1][0],x[1][1]),u.lineEnd()):(u.point(x[1][0],x[1][1]),u.lineEnd(),u.lineStart(),u.point(x[0][0],x[0][1],3)))}w&&(!c||!fa(c,g))&&u.point(g[0],g[1]),c=g,p=w,h=k},lineEnd:function(){p&&u.lineEnd(),c=null},clean:function(){return m|(d&&p)<<1}}}function f(u,c,h){var p=nr(u),d=nr(c),m=[1,0,0],b=Ca(p,d),_=Bo(b,b),g=b[0],v=_-g*g;if(!v)return!h&&u;var w=e*_/v,k=-e*g/v,x=Ca(m,b),S=qo(m,w),T=qo(b,k);ff(S,T);var E=x,F=Bo(S,E),C=Bo(E,E),L=F*F-C*(Bo(S,S)-1);if(!(L<0)){var R=Me(L),W=qo(E,(-F-R)/C);if(ff(W,S),W=rs(W),!h)return W;var A=u[0],B=c[0],z=u[1],J=c[1],j;B<A&&(j=A,A=B,B=j);var X=B-A,O=At(X-St)<xt,H=O||X<xt;if(!O&&J<z&&(j=z,z=J,J=j),H?O?z+J>0^W[1]<(At(W[0]-A)<xt?z:J):z<=W[1]&&W[1]<=J:X>St^(A<=W[0]&&W[0]<=B)){var Q=qo(E,(-F+R)/C);return ff(Q,S),[W,rs(Q)]}}}function s(u,c){var h=i?t:St-t,p=0;return u<-h?p|=1:u>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return w1(a,l,o,i?[0,-t]:[-St,t-St])}function S3(t,e,n,i,r,o){var a=t[0],l=t[1],f=e[0],s=e[1],u=0,c=1,h=f-a,p=s-l,d;if(d=n-a,!(!h&&d>0)){if(d/=h,h<0){if(d<u)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>u&&(u=d)}if(d=r-a,!(!h&&d<0)){if(d/=h,h<0){if(d>c)return;d>u&&(u=d)}else if(h>0){if(d<u)return;d<c&&(c=d)}if(d=i-l,!(!p&&d>0)){if(d/=p,p<0){if(d<u)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>u&&(u=d)}if(d=o-l,!(!p&&d<0)){if(d/=p,p<0){if(d>c)return;d>u&&(u=d)}else if(p>0){if(d<u)return;d<c&&(c=d)}return u>0&&(t[0]=a+u*h,t[1]=l+u*p),c<1&&(e[0]=a+c*h,e[1]=l+c*p),!0}}}}}var Er=1e9,Yo=-Er;function v1(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,c,h){var p=0,d=0;if(s==null||(p=a(s,c))!==(d=a(u,c))||f(s,u)<0^c>0)do h.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+c+4)%4)!==d);else h.point(u[0],u[1])}function a(s,u){return At(s[0]-t)<xt?u>0?0:3:At(s[0]-n)<xt?u>0?2:1:At(s[1]-e)<xt?u>0?1:0:u>0?3:2}function l(s,u){return f(s.x,u.x)}function f(s,u){var c=a(s,1),h=a(u,1);return c!==h?c-h:c===0?u[1]-s[1]:c===1?s[0]-u[0]:c===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,c=_1(),h,p,d,m,b,_,g,v,w,k,x,S={point:T,lineStart:L,lineEnd:R,polygonStart:F,polygonEnd:C};function T(A,B){r(A,B)&&u.point(A,B)}function E(){for(var A=0,B=0,z=p.length;B<z;++B)for(var J=p[B],j=1,X=J.length,O=J[0],H,Q,at=O[0],nt=O[1];j<X;++j)H=at,Q=nt,O=J[j],at=O[0],nt=O[1],Q<=i?nt>i&&(at-H)*(i-Q)>(nt-Q)*(t-H)&&++A:nt<=i&&(at-H)*(i-Q)<(nt-Q)*(t-H)&&--A;return A}function F(){u=c,h=[],p=[],x=!0}function C(){var A=E(),B=x&&A,z=(h=C0(h)).length;(B||z)&&(s.polygonStart(),B&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),z&&y1(h,l,A,o,s),s.polygonEnd()),u=s,h=p=d=null}function L(){S.point=W,p&&p.push(d=[]),k=!0,w=!1,g=v=NaN}function R(){h&&(W(m,b),_&&w&&c.rejoin(),h.push(c.result())),S.point=T,w&&u.lineEnd()}function W(A,B){var z=r(A,B);if(p&&d.push([A,B]),k)m=A,b=B,_=z,k=!1,z&&(u.lineStart(),u.point(A,B));else if(z&&w)u.point(A,B);else{var J=[g=Math.max(Yo,Math.min(Er,g)),v=Math.max(Yo,Math.min(Er,v))],j=[A=Math.max(Yo,Math.min(Er,A)),B=Math.max(Yo,Math.min(Er,B))];S3(J,j,t,e,n,i)?(w||(u.lineStart(),u.point(J[0],J[1])),u.point(j[0],j[1]),z||u.lineEnd(),x=!1):z&&(u.lineStart(),u.point(A,B),x=!1)}g=A,v=B,w=z}return S}}const fs=t=>t;var uf=new _i,ss=new _i,x1,k1,us,cs,zn={point:Oe,lineStart:Oe,lineEnd:Oe,polygonStart:function(){zn.lineStart=T3,zn.lineEnd=A3},polygonEnd:function(){zn.lineStart=zn.lineEnd=zn.point=Oe,uf.add(At(ss)),ss=new _i},result:function(){var t=uf/2;return uf=new _i,t}};function T3(){zn.point=C3}function C3(t,e){zn.point=M1,x1=us=t,k1=cs=e}function M1(t,e){ss.add(cs*t-us*e),us=t,cs=e}function A3(){M1(x1,k1)}const Lc=zn;var ir=1/0,Aa=ir,jr=-ir,Ea=jr,E3={point:$3,lineStart:Oe,lineEnd:Oe,polygonStart:Oe,polygonEnd:Oe,result:function(){var t=[[ir,Aa],[jr,Ea]];return jr=Ea=-(Aa=ir=1/0),t}};function $3(t,e){t<ir&&(ir=t),t>jr&&(jr=t),e<Aa&&(Aa=e),e>Ea&&(Ea=e)}const $a=E3;var hs=0,ds=0,$r=0,Na=0,Da=0,zi=0,ps=0,ms=0,Nr=0,S1,T1,on,an,Xe={point:Mi,lineStart:Ic,lineEnd:Rc,polygonStart:function(){Xe.lineStart=F3,Xe.lineEnd=L3},polygonEnd:function(){Xe.point=Mi,Xe.lineStart=Ic,Xe.lineEnd=Rc},result:function(){var t=Nr?[ps/Nr,ms/Nr]:zi?[Na/zi,Da/zi]:$r?[hs/$r,ds/$r]:[NaN,NaN];return hs=ds=$r=Na=Da=zi=ps=ms=Nr=0,t}};function Mi(t,e){hs+=t,ds+=e,++$r}function Ic(){Xe.point=N3}function N3(t,e){Xe.point=D3,Mi(on=t,an=e)}function D3(t,e){var n=t-on,i=e-an,r=Me(n*n+i*i);Na+=r*(on+t)/2,Da+=r*(an+e)/2,zi+=r,Mi(on=t,an=e)}function Rc(){Xe.point=Mi}function F3(){Xe.point=I3}function L3(){C1(S1,T1)}function I3(t,e){Xe.point=C1,Mi(S1=on=t,T1=an=e)}function C1(t,e){var n=t-on,i=e-an,r=Me(n*n+i*i);Na+=r*(on+t)/2,Da+=r*(an+e)/2,zi+=r,r=an*t-on*e,ps+=r*(on+t),ms+=r*(an+e),Nr+=r*3,Mi(on=t,an=e)}const Pc=Xe;function A1(t){this._context=t}A1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ae);break}}},result:Oe};var gs=new _i,cf,E1,$1,Dr,Fr,Fa={point:Oe,lineStart:function(){Fa.point=R3},lineEnd:function(){cf&&N1(E1,$1),Fa.point=Oe},polygonStart:function(){cf=!0},polygonEnd:function(){cf=null},result:function(){var t=+gs;return gs=new _i,t}};function R3(t,e){Fa.point=N1,E1=Dr=t,$1=Fr=e}function N1(t,e){Dr-=t,Fr-=e,gs.add(Me(Dr*Dr+Fr*Fr)),Dr=t,Fr=e}const Oc=Fa;let Uc,La,zc,Bc;class qc{constructor(e){this._append=e==null?D1:P3(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==zc||this._append!==La){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,zc=i,La=this._append,Bc=this._,this._=r}this._+=Bc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function D1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function P3(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return D1;if(e!==Uc){const n=10**e;Uc=e,La=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return La}function ul(t,e){let n=3,i=4.5,r,o;function a(l){return l&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),si(l,r(o))),o.result()}return a.area=function(l){return si(l,r(Lc)),Lc.result()},a.measure=function(l){return si(l,r(Oc)),Oc.result()},a.bounds=function(l){return si(l,r($a)),$a.result()},a.centroid=function(l){return si(l,r(Pc)),Pc.result()},a.projection=function(l){return arguments.length?(r=l==null?(t=null,fs):(t=l).stream,a):t},a.context=function(l){return arguments.length?(o=l==null?(e=null,new qc(n)):new A1(e=l),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(o.pointRadius(+l),+l),a):i},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const f=Math.floor(l);if(!(f>=0))throw new RangeError(`invalid digits: ${l}`);n=f}return e===null&&(o=new qc(n)),a},a.projection(t).digits(n).context(e)}function bs(t){return{stream:cl(t)}}function cl(t){return function(e){var n=new _s;for(var i in t)n[i]=t[i];return n.stream=e,n}}function _s(){}_s.prototype={constructor:_s,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function tu(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),si(n,t.stream($a)),e($a.result()),i!=null&&t.clipExtent(i),t}function eu(t,e,n){return tu(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([l,f])},n)}function F1(t,e,n){return eu(t,[[0,0],e],n)}function L1(t,e,n){return tu(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];t.scale(150*o).translate([a,l])},n)}function I1(t,e,n){return tu(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],l=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}var Wc=16,O3=Mt(30*qt);function Yc(t,e){return+e?z3(t,e):U3(t)}function U3(t){return cl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function z3(t,e){function n(i,r,o,a,l,f,s,u,c,h,p,d,m,b){var _=s-i,g=u-r,v=_*_+g*g;if(v>4*e&&m--){var w=a+h,k=l+p,x=f+d,S=Me(w*w+k*k+x*x),T=Be(x/=S),E=At(At(x)-1)<xt||At(o-c)<xt?(o+c)/2:En(k,w),F=t(E,T),C=F[0],L=F[1],R=C-i,W=L-r,A=g*R-_*W;(A*A/v>e||At((_*R+g*W)/v-.5)>.3||a*h+l*p+f*d<O3)&&(n(i,r,o,a,l,f,C,L,E,w/=S,k/=S,x,m,b),b.point(C,L),n(C,L,E,w,k,x,s,u,c,h,p,d,m,b))}}return function(i){var r,o,a,l,f,s,u,c,h,p,d,m,b={point:_,lineStart:g,lineEnd:w,polygonStart:function(){i.polygonStart(),b.lineStart=k},polygonEnd:function(){i.polygonEnd(),b.lineStart=g}};function _(T,E){T=t(T,E),i.point(T[0],T[1])}function g(){c=NaN,b.point=v,i.lineStart()}function v(T,E){var F=nr([T,E]),C=t(T,E);n(c,h,u,p,d,m,c=C[0],h=C[1],u=T,p=F[0],d=F[1],m=F[2],Wc,i),i.point(c,h)}function w(){b.point=_,i.lineEnd()}function k(){g(),b.point=x,b.lineEnd=S}function x(T,E){v(r=T,E),o=c,a=h,l=p,f=d,s=m,b.point=v}function S(){n(c,h,u,p,d,m,o,a,r,l,f,s,Wc,i),b.lineEnd=w,w()}return b}}var B3=cl({point:function(t,e){this.stream.point(t*qt,e*qt)}});function q3(t){return cl({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function W3(t,e,n,i,r){function o(a,l){return a*=i,l*=r,[e+t*a,n-t*l]}return o.invert=function(a,l){return[(a-e)/t*i,(n-l)/t*r]},o}function Hc(t,e,n,i,r,o){if(!o)return W3(t,e,n,i,r);var a=Mt(o),l=vt(o),f=a*t,s=l*t,u=a/t,c=l/t,h=(l*n-a*e)/t,p=(l*e+a*n)/t;function d(m,b){return m*=i,b*=r,[f*m-s*b+e,n-s*m-f*b]}return d.invert=function(m,b){return[i*(u*m-c*b+h),r*(p-c*m-u*b)]},d}function ni(t){return R1(function(){return t})()}function R1(t){var e,n=150,i=480,r=250,o=0,a=0,l=0,f=0,s=0,u,c=0,h=1,p=1,d=null,m=Fc,b=null,_,g,v,w=fs,k=.5,x,S,T,E,F;function C(A){return T(A[0]*qt,A[1]*qt)}function L(A){return A=T.invert(A[0],A[1]),A&&[A[0]*se,A[1]*se]}C.stream=function(A){return E&&F===A?E:E=B3(q3(u)(m(x(w(F=A)))))},C.preclip=function(A){return arguments.length?(m=A,d=void 0,W()):m},C.postclip=function(A){return arguments.length?(w=A,b=_=g=v=null,W()):w},C.clipAngle=function(A){return arguments.length?(m=+A?M3(d=A*qt):(d=null,Fc),W()):d*se},C.clipExtent=function(A){return arguments.length?(w=A==null?(b=_=g=v=null,fs):v1(b=+A[0][0],_=+A[0][1],g=+A[1][0],v=+A[1][1]),W()):b==null?null:[[b,_],[g,v]]},C.scale=function(A){return arguments.length?(n=+A,R()):n},C.translate=function(A){return arguments.length?(i=+A[0],r=+A[1],R()):[i,r]},C.center=function(A){return arguments.length?(o=A[0]%360*qt,a=A[1]%360*qt,R()):[o*se,a*se]},C.rotate=function(A){return arguments.length?(l=A[0]%360*qt,f=A[1]%360*qt,s=A.length>2?A[2]%360*qt:0,R()):[l*se,f*se,s*se]},C.angle=function(A){return arguments.length?(c=A%360*qt,R()):c*se},C.reflectX=function(A){return arguments.length?(h=A?-1:1,R()):h<0},C.reflectY=function(A){return arguments.length?(p=A?-1:1,R()):p<0},C.precision=function(A){return arguments.length?(x=Yc(S,k=A*A),W()):Me(k)},C.fitExtent=function(A,B){return eu(C,A,B)},C.fitSize=function(A,B){return F1(C,A,B)},C.fitWidth=function(A,B){return L1(C,A,B)},C.fitHeight=function(A,B){return I1(C,A,B)};function R(){var A=Hc(n,0,0,h,p,c).apply(null,e(o,a)),B=Hc(n,i-A[0],r-A[1],h,p,c);return u=b1(l,f,s),S=as(e,B),T=as(u,S),x=Yc(S,k),W()}function W(){return E=F=null,C}return function(){return e=t.apply(this,arguments),C.invert=e.invert&&L,R()}}function nu(t){var e=0,n=St/3,i=R1(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*qt,n=o[1]*qt):[e*se,n*se]},r}function Y3(t){var e=Mt(t);function n(i,r){return[i*e,vt(r)/e]}return n.invert=function(i,r){return[i/e,Be(r*e)]},n}function H3(t,e){var n=vt(t),i=(n+vt(e))/2;if(At(i)<xt)return Y3(t);var r=1+n*(2*i-n),o=Me(r)/i;function a(l,f){var s=Me(r-2*i*vt(f))/i;return[s*vt(l*=i),o-s*Mt(l)]}return a.invert=function(l,f){var s=o-f,u=En(l,At(s))*Pe(s);return s*i<0&&(u-=St*Pe(l)*Pe(s)),[u/i,Be((r-(l*l+s*s)*i*i)/(2*i))]},a}function Ia(){return nu(H3).scale(155.424).center([0,33.6442])}function P1(){return Ia().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function V3(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function G3(){var t,e,n=P1(),i,r=Ia().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Ia().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,s={point:function(h,p){f=[h,p]}};function u(h){var p=h[0],d=h[1];return f=null,i.point(p,d),f||(o.point(p,d),f)||(l.point(p,d),f)}u.invert=function(h){var p=n.scale(),d=n.translate(),m=(h[0]-d[0])/p,b=(h[1]-d[1])/p;return(b>=.12&&b<.234&&m>=-.425&&m<-.214?r:b>=.166&&b<.234&&m>=-.214&&m<-.115?a:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=V3([n.stream(e=h),r.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),c()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),d=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(s),o=r.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+xt,m+.12*p+xt],[d-.214*p-xt,m+.234*p-xt]]).stream(s),l=a.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+xt,m+.166*p+xt],[d-.115*p-xt,m+.234*p-xt]]).stream(s),c()},u.fitExtent=function(h,p){return eu(u,h,p)},u.fitSize=function(h,p){return F1(u,h,p)},u.fitWidth=function(h,p){return L1(u,h,p)},u.fitHeight=function(h,p){return I1(u,h,p)};function c(){return t=e=null,u}return u.scale(1070)}function O1(t){return function(e,n){var i=Mt(e),r=Mt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*vt(e),o*vt(n)]}}function co(t){return function(e,n){var i=Me(e*e+n*n),r=t(i),o=vt(r),a=Mt(r);return[En(e*o,i*a),Be(i&&n*o/i)]}}var U1=O1(function(t){return Me(2/(1+t))});U1.invert=co(function(t){return 2*Be(t/2)});function X3(){return ni(U1).scale(124.75).clipAngle(180-.001)}var z1=O1(function(t){return(t=g1(t))&&t/vt(t)});z1.invert=co(function(t){return t});function j3(){return ni(z1).scale(79.4188).clipAngle(180-.001)}function hl(t,e){return[t,Sa(Qs((Wt+e)/2))]}hl.invert=function(t,e){return[t,2*pr(m1(e))-Wt]};function Z3(){return B1(hl).scale(961/Ae)}function B1(t){var e=ni(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,l,f,s;e.scale=function(c){return arguments.length?(i(c),u()):i()},e.translate=function(c){return arguments.length?(r(c),u()):r()},e.center=function(c){return arguments.length?(n(c),u()):n()},e.clipExtent=function(c){return arguments.length?(c==null?a=l=f=s=null:(a=+c[0][0],l=+c[0][1],f=+c[1][0],s=+c[1][1]),u()):a==null?null:[[a,l],[f,s]]};function u(){var c=St*i(),h=e(g3(e.rotate()).invert([0,0]));return o(a==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===hl?[[Math.max(h[0]-c,a),l],[Math.min(h[0]+c,f),s]]:[[a,Math.max(h[1]-c,l)],[f,Math.min(h[1]+c,s)]])}return u()}function Ho(t){return Qs((Wt+t)/2)}function K3(t,e){var n=Mt(t),i=t===e?vt(t):Sa(n/Mt(e))/Sa(Ho(e)/Ho(t)),r=n*lf(Ho(t),i)/i;if(!i)return hl;function o(a,l){r>0?l<-Wt+xt&&(l=-Wt+xt):l>Wt-xt&&(l=Wt-xt);var f=r/lf(Ho(l),i);return[f*vt(i*a),r-f*Mt(i*a)]}return o.invert=function(a,l){var f=r-l,s=Pe(i)*Me(a*a+f*f),u=En(a,At(f))*Pe(f);return f*i<0&&(u-=St*Pe(a)*Pe(f)),[u/i,2*pr(lf(r/s,1/i))-Wt]},o}function J3(){return nu(K3).scale(109.5).parallels([30,30])}function Ra(t,e){return[t,e]}Ra.invert=Ra;function Q3(){return ni(Ra).scale(152.63)}function t6(t,e){var n=Mt(t),i=t===e?vt(t):(n-Mt(e))/(e-t),r=n/i+t;if(At(i)<xt)return Ra;function o(a,l){var f=r-l,s=i*a;return[f*vt(s),r-f*Mt(s)]}return o.invert=function(a,l){var f=r-l,s=En(a,At(f))*Pe(f);return f*i<0&&(s-=St*Pe(a)*Pe(f)),[s/i,r-Pe(i)*Me(a*a+f*f)]},o}function e6(){return nu(t6).scale(131.154).center([0,13.9389])}var Or=1.340264,Ur=-.081106,zr=893e-6,Br=.003796,Pa=Me(3)/2,n6=12;function q1(t,e){var n=Be(Pa*vt(e)),i=n*n,r=i*i*i;return[t*Mt(n)/(Pa*(Or+3*Ur*i+r*(7*zr+9*Br*i))),n*(Or+Ur*i+r*(zr+Br*i))]}q1.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,l,f;o<n6&&(l=n*(Or+Ur*i+r*(zr+Br*i))-e,f=Or+3*Ur*i+r*(7*zr+9*Br*i),n-=a=l/f,i=n*n,r=i*i*i,!(At(a)<p1));++o);return[Pa*t*(Or+3*Ur*i+r*(7*zr+9*Br*i))/Mt(n),Be(vt(n)/Pa)]};function i6(){return ni(q1).scale(177.158)}function W1(t,e){var n=Mt(e),i=Mt(t)*n;return[n*vt(t)/i,vt(e)/i]}W1.invert=co(pr);function r6(){return ni(W1).scale(144.049).clipAngle(60)}function Y1(t,e){return[Mt(e)*vt(t),vt(e)]}Y1.invert=co(Be);function o6(){return ni(Y1).scale(249.5).clipAngle(90+xt)}function H1(t,e){var n=Mt(e),i=1+Mt(t)*n;return[n*vt(t)/i,vt(e)/i]}H1.invert=co(function(t){return 2*pr(t)});function a6(){return ni(H1).scale(250).clipAngle(142)}function V1(t,e){return[Sa(Qs((Wt+e)/2)),-t]}V1.invert=function(t,e){return[-e,2*pr(m1(t))-Wt]};function l6(){var t=B1(V1),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function gn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function dl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ys=Symbol("implicit");function iu(){var t=new yi,e=[],n=[],i=ys;function r(o){let a=t.get(o);if(a===void 0){if(i!==ys)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new yi;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return iu(e,n).unknown(i)},gn.apply(r,arguments),r}function pl(){var t=iu().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,l=!1,f=0,s=0,u=.5;delete t.unknown;function c(){var h=e().length,p=r<i,d=p?r:i,m=p?i:r;o=(m-d)/Math.max(1,h-f+s*2),l&&(o=Math.floor(o)),d+=(m-d-o*(h-f))*u,a=o*(1-f),l&&(d=Math.round(d),a=Math.round(a));var b=Yf(h).map(function(_){return d+o*_});return n(p?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),c()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,c()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,l=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(l=!!h,c()):l},t.padding=function(h){return arguments.length?(f=Math.min(1,s=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(s=+h,c()):s},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),c()):u},t.copy=function(){return pl(e(),[i,r]).round(l).paddingInner(f).paddingOuter(s).align(u)},gn.apply(c(),arguments)}function G1(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return G1(e())},t}function f6(){return G1(pl.apply(null,arguments).paddingInner(1))}function s6(t){return function(){return t}}function ws(t){return+t}var Vc=[0,1];function Ue(t){return t}function vs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:s6(isNaN(e)?NaN:.5)}function u6(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function c6(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=vs(r,i),o=n(a,o)):(i=vs(i,r),o=n(o,a)),function(l){return o(i(l))}}function h6(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=vs(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(l){var f=Qa(t,l,1,i)-1;return o[f](r[f](l))}}function ho(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ml(){var t=Vc,e=Vc,n=uo,i,r,o,a=Ue,l,f,s;function u(){var h=Math.min(t.length,e.length);return a!==Ue&&(a=u6(t[0],t[h-1])),l=h>2?h6:c6,f=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=l(t.map(i),e,n)))(i(a(h)))}return c.invert=function(h){return a(r((s||(s=l(e,t.map(i),ae)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,ws),u()):t.slice()},c.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},c.rangeRound=function(h){return e=Array.from(h),n=Gs,u()},c.clamp=function(h){return arguments.length?(a=h?!0:Ue,u()):a!==Ue},c.interpolate=function(h){return arguments.length?(n=h,u()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,p){return i=h,r=p,u()}}function X1(){return ml()(Ue,Ue)}function d6(t,e,n,i){var r=qf(t,e,n),o;switch(i=Xr(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=p3(r,a))&&(i.precision=o),d1(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=m3(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=d3(r))&&(i.precision=o-(i.type==="%")*2);break}}return dr(i)}function po(t){var e=t.domain;return t.ticks=function(n){var i=e();return Yr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return d6(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],l=i[o],f,s,u=10;for(l<a&&(s=a,a=l,l=s,s=r,r=o,o=s);u-- >0;){if(s=ga(a,l,n),s===f)return i[r]=a,i[o]=l,e(i);if(s>0)a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s;else if(s<0)a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s;else break;f=s}return t},t}function ru(){var t=X1();return t.copy=function(){return ho(t,ru())},gn.apply(t,arguments),po(t)}function j1(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,ws),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return j1(t).unknown(e)},t=arguments.length?Array.from(t,ws):[0,1],po(n)}function Z1(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function Gc(t){return Math.log(t)}function Xc(t){return Math.exp(t)}function p6(t){return-Math.log(-t)}function m6(t){return-Math.exp(-t)}function g6(t){return isFinite(t)?+("1e"+t):t<0?0:t}function b6(t){return t===10?g6:t===Math.E?Math.exp:e=>Math.pow(t,e)}function _6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function jc(t){return(e,n)=>-t(-e,n)}function K1(t){const e=t(Gc,Xc),n=e.domain;let i=10,r,o;function a(){return r=_6(i),o=b6(i),n()[0]<0?(r=jc(r),o=jc(o),t(p6,m6)):t(Gc,Xc),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const f=n();let s=f[0],u=f[f.length-1];const c=u<s;c&&([s,u]=[u,s]);let h=r(s),p=r(u),d,m;const b=l==null?10:+l;let _=[];if(!(i%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(d=1;d<i;++d)if(m=h<0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}}else for(;h<=p;++h)for(d=i-1;d>=1;--d)if(m=h>0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}_.length*2<b&&(_=Yr(s,u,b))}else _=Yr(h,p,Math.min(p-h,b)).map(o);return c?_.reverse():_},e.tickFormat=(l,f)=>{if(l==null&&(l=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Xr(f)).precision==null&&(f.trim=!0),f=dr(f)),l===1/0)return f;const s=Math.max(1,i*l/e.ticks().length);return u=>{let c=u/o(Math.round(r(u)));return c*i<i-.5&&(c*=i),c<=s?f(u):""}},e.nice=()=>n(Z1(n(),{floor:l=>o(Math.floor(r(l))),ceil:l=>o(Math.ceil(r(l)))})),e}function J1(){const t=K1(ml()).domain([1,10]);return t.copy=()=>ho(t,J1()).base(t.base()),gn.apply(t,arguments),t}function Zc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Kc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Q1(t){var e=1,n=t(Zc(e),Kc(e));return n.constant=function(i){return arguments.length?t(Zc(e=+i),Kc(e)):e},po(n)}function tp(){var t=Q1(ml());return t.copy=function(){return ho(t,tp()).constant(t.constant())},gn.apply(t,arguments)}function Jc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function y6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function w6(t){return t<0?-t*t:t*t}function ep(t){var e=t(Ue,Ue),n=1;function i(){return n===1?t(Ue,Ue):n===.5?t(y6,w6):t(Jc(n),Jc(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},po(e)}function np(){var t=ep(ml());return t.copy=function(){return ho(t,np()).exponent(t.exponent())},gn.apply(t,arguments),t}function ip(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=l_(t,a/l);return o}function o(a){return a==null||isNaN(a=+a)?i:e[Qa(n,a)]}return o.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ve),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return ip().domain(t).range(e).unknown(i)},gn.apply(o,arguments)}function rp(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[Qa(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return rp().domain(t).range(e).unknown(n)},gn.apply(r,arguments)}const hf=new Date,df=new Date;function Zt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),l=r.ceil(o);return o-a<l-o?a:l},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,l)=>{const f=[];if(o=r.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return f;let s;do f.push(s=new Date(+o)),e(o,l),t(o);while(s<o&&o<a);return f},r.filter=o=>Zt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!o(a););else for(;--l>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(hf.setTime(+o),df.setTime(+a),t(hf),t(df),Math.floor(n(hf,df))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Oa=Zt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Oa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Zt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Oa);Oa.range;const Sn=1e3,ze=Sn*60,Tn=ze*60,$n=Tn*24,ou=$n*7,Qc=$n*30,pf=$n*365,je=Zt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sn)},(t,e)=>(e-t)/Sn,t=>t.getUTCSeconds());je.range;const mo=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sn)},(t,e)=>{t.setTime(+t+e*ze)},(t,e)=>(e-t)/ze,t=>t.getMinutes());mo.range;const go=Zt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ze)},(t,e)=>(e-t)/ze,t=>t.getUTCMinutes());go.range;const bo=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sn-t.getMinutes()*ze)},(t,e)=>{t.setTime(+t+e*Tn)},(t,e)=>(e-t)/Tn,t=>t.getHours());bo.range;const _o=Zt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Tn)},(t,e)=>(e-t)/Tn,t=>t.getUTCHours());_o.range;const Ai=Zt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ze)/$n,t=>t.getDate()-1);Ai.range;const gl=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$n,t=>t.getUTCDate()-1);gl.range;const bl=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/$n,t=>Math.floor(t/$n));bl.range;function Ei(t){return Zt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ze)/ou)}const rr=Ei(0),Zr=Ei(1),op=Ei(2),ap=Ei(3),Si=Ei(4),lp=Ei(5),fp=Ei(6);rr.range;Zr.range;op.range;ap.range;Si.range;lp.range;fp.range;function $i(t){return Zt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ou)}const or=$i(0),Kr=$i(1),sp=$i(2),up=$i(3),Ti=$i(4),cp=$i(5),hp=$i(6);or.range;Kr.range;sp.range;up.range;Ti.range;cp.range;hp.range;const yo=Zt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());yo.range;const wo=Zt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());wo.range;const Ke=Zt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ke.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ke.range;const Je=Zt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Je.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Je.range;function dp(t,e,n,i,r,o){const a=[[je,1,Sn],[je,5,5*Sn],[je,15,15*Sn],[je,30,30*Sn],[o,1,ze],[o,5,5*ze],[o,15,15*ze],[o,30,30*ze],[r,1,Tn],[r,3,3*Tn],[r,6,6*Tn],[r,12,12*Tn],[i,1,$n],[i,2,2*$n],[n,1,ou],[e,1,Qc],[e,3,3*Qc],[t,1,pf]];function l(s,u,c){const h=u<s;h&&([s,u]=[u,s]);const p=c&&typeof c.range=="function"?c:f(s,u,c),d=p?p.range(s,+u+1):[];return h?d.reverse():d}function f(s,u,c){const h=Math.abs(u-s)/c,p=Ja(([,,b])=>b).right(a,h);if(p===a.length)return t.every(qf(s/pf,u/pf,c));if(p===0)return Oa.every(Math.max(qf(s,u,c),1));const[d,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return d.every(m)}return[l,f]}const[v6,pp]=dp(Je,wo,or,bl,_o,go),[x6,k6]=dp(Ke,yo,rr,Ai,bo,mo);function mf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function gf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function xr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function M6(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,l=t.months,f=t.shortMonths,s=kr(r),u=Mr(r),c=kr(o),h=Mr(o),p=kr(a),d=Mr(a),m=kr(l),b=Mr(l),_=kr(f),g=Mr(f),v={a:z,A:J,b:j,B:X,c:null,d:oh,e:oh,f:G6,g:i5,G:o5,H:Y6,I:H6,j:V6,L:mp,m:X6,M:j6,p:O,q:H,Q:fh,s:sh,S:Z6,u:K6,U:J6,V:Q6,w:t5,W:e5,x:null,X:null,y:n5,Y:r5,Z:a5,"%":lh},w={a:Q,A:at,b:nt,B:Z,c:null,d:ah,e:ah,f:u5,g:w5,G:x5,H:l5,I:f5,j:s5,L:bp,m:c5,M:h5,p:q,q:N,Q:fh,s:sh,S:d5,u:p5,U:m5,V:g5,w:b5,W:_5,x:null,X:null,y:y5,Y:v5,Z:k5,"%":lh},k={a:F,A:C,b:L,B:R,c:W,d:ih,e:ih,f:z6,g:nh,G:eh,H:rh,I:rh,j:R6,L:U6,m:I6,M:P6,p:E,q:L6,Q:q6,s:W6,S:O6,u:E6,U:$6,V:N6,w:A6,W:D6,x:A,X:B,y:nh,Y:eh,Z:F6,"%":B6};v.x=x(n,v),v.X=x(i,v),v.c=x(e,v),w.x=x(n,w),w.X=x(i,w),w.c=x(e,w);function x($,P){return function(tt){var U=[],mt=-1,rt=0,pt=$.length,ft,dt,Rt;for(tt instanceof Date||(tt=new Date(+tt));++mt<pt;)$.charCodeAt(mt)===37&&(U.push($.slice(rt,mt)),(dt=th[ft=$.charAt(++mt)])!=null?ft=$.charAt(++mt):dt=ft==="e"?" ":"0",(Rt=P[ft])&&(ft=Rt(tt,dt)),U.push(ft),rt=mt+1);return U.push($.slice(rt,mt)),U.join("")}}function S($,P){return function(tt){var U=xr(1900,void 0,1),mt=T(U,$,tt+="",0),rt,pt;if(mt!=tt.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(P&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(rt=gf(xr(U.y,0,1)),pt=rt.getUTCDay(),rt=pt>4||pt===0?Kr.ceil(rt):Kr(rt),rt=gl.offset(rt,(U.V-1)*7),U.y=rt.getUTCFullYear(),U.m=rt.getUTCMonth(),U.d=rt.getUTCDate()+(U.w+6)%7):(rt=mf(xr(U.y,0,1)),pt=rt.getDay(),rt=pt>4||pt===0?Zr.ceil(rt):Zr(rt),rt=Ai.offset(rt,(U.V-1)*7),U.y=rt.getFullYear(),U.m=rt.getMonth(),U.d=rt.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),pt="Z"in U?gf(xr(U.y,0,1)).getUTCDay():mf(xr(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(pt+5)%7:U.w+U.U*7-(pt+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,gf(U)):mf(U)}}function T($,P,tt,U){for(var mt=0,rt=P.length,pt=tt.length,ft,dt;mt<rt;){if(U>=pt)return-1;if(ft=P.charCodeAt(mt++),ft===37){if(ft=P.charAt(mt++),dt=k[ft in th?P.charAt(mt++):ft],!dt||(U=dt($,tt,U))<0)return-1}else if(ft!=tt.charCodeAt(U++))return-1}return U}function E($,P,tt){var U=s.exec(P.slice(tt));return U?($.p=u.get(U[0].toLowerCase()),tt+U[0].length):-1}function F($,P,tt){var U=p.exec(P.slice(tt));return U?($.w=d.get(U[0].toLowerCase()),tt+U[0].length):-1}function C($,P,tt){var U=c.exec(P.slice(tt));return U?($.w=h.get(U[0].toLowerCase()),tt+U[0].length):-1}function L($,P,tt){var U=_.exec(P.slice(tt));return U?($.m=g.get(U[0].toLowerCase()),tt+U[0].length):-1}function R($,P,tt){var U=m.exec(P.slice(tt));return U?($.m=b.get(U[0].toLowerCase()),tt+U[0].length):-1}function W($,P,tt){return T($,e,P,tt)}function A($,P,tt){return T($,n,P,tt)}function B($,P,tt){return T($,i,P,tt)}function z($){return a[$.getDay()]}function J($){return o[$.getDay()]}function j($){return f[$.getMonth()]}function X($){return l[$.getMonth()]}function O($){return r[+($.getHours()>=12)]}function H($){return 1+~~($.getMonth()/3)}function Q($){return a[$.getUTCDay()]}function at($){return o[$.getUTCDay()]}function nt($){return f[$.getUTCMonth()]}function Z($){return l[$.getUTCMonth()]}function q($){return r[+($.getUTCHours()>=12)]}function N($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var P=x($+="",v);return P.toString=function(){return $},P},parse:function($){var P=S($+="",!1);return P.toString=function(){return $},P},utcFormat:function($){var P=x($+="",w);return P.toString=function(){return $},P},utcParse:function($){var P=S($+="",!0);return P.toString=function(){return $},P}}}var th={"-":"",_:" ",0:"0"},ne=/^\s*\d+/,S6=/^%/,T6=/[\\^$*+?|[\]().{}]/g;function Ct(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function C6(t){return t.replace(T6,"\\$&")}function kr(t){return new RegExp("^(?:"+t.map(C6).join("|")+")","i")}function Mr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function A6(t,e,n){var i=ne.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function E6(t,e,n){var i=ne.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function $6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function N6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function D6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function eh(t,e,n){var i=ne.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function nh(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function F6(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function L6(t,e,n){var i=ne.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function I6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function ih(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function R6(t,e,n){var i=ne.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function rh(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function P6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function O6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function U6(t,e,n){var i=ne.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function z6(t,e,n){var i=ne.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function B6(t,e,n){var i=S6.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function q6(t,e,n){var i=ne.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function W6(t,e,n){var i=ne.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function oh(t,e){return Ct(t.getDate(),e,2)}function Y6(t,e){return Ct(t.getHours(),e,2)}function H6(t,e){return Ct(t.getHours()%12||12,e,2)}function V6(t,e){return Ct(1+Ai.count(Ke(t),t),e,3)}function mp(t,e){return Ct(t.getMilliseconds(),e,3)}function G6(t,e){return mp(t,e)+"000"}function X6(t,e){return Ct(t.getMonth()+1,e,2)}function j6(t,e){return Ct(t.getMinutes(),e,2)}function Z6(t,e){return Ct(t.getSeconds(),e,2)}function K6(t){var e=t.getDay();return e===0?7:e}function J6(t,e){return Ct(rr.count(Ke(t)-1,t),e,2)}function gp(t){var e=t.getDay();return e>=4||e===0?Si(t):Si.ceil(t)}function Q6(t,e){return t=gp(t),Ct(Si.count(Ke(t),t)+(Ke(t).getDay()===4),e,2)}function t5(t){return t.getDay()}function e5(t,e){return Ct(Zr.count(Ke(t)-1,t),e,2)}function n5(t,e){return Ct(t.getFullYear()%100,e,2)}function i5(t,e){return t=gp(t),Ct(t.getFullYear()%100,e,2)}function r5(t,e){return Ct(t.getFullYear()%1e4,e,4)}function o5(t,e){var n=t.getDay();return t=n>=4||n===0?Si(t):Si.ceil(t),Ct(t.getFullYear()%1e4,e,4)}function a5(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ct(e/60|0,"0",2)+Ct(e%60,"0",2)}function ah(t,e){return Ct(t.getUTCDate(),e,2)}function l5(t,e){return Ct(t.getUTCHours(),e,2)}function f5(t,e){return Ct(t.getUTCHours()%12||12,e,2)}function s5(t,e){return Ct(1+gl.count(Je(t),t),e,3)}function bp(t,e){return Ct(t.getUTCMilliseconds(),e,3)}function u5(t,e){return bp(t,e)+"000"}function c5(t,e){return Ct(t.getUTCMonth()+1,e,2)}function h5(t,e){return Ct(t.getUTCMinutes(),e,2)}function d5(t,e){return Ct(t.getUTCSeconds(),e,2)}function p5(t){var e=t.getUTCDay();return e===0?7:e}function m5(t,e){return Ct(or.count(Je(t)-1,t),e,2)}function _p(t){var e=t.getUTCDay();return e>=4||e===0?Ti(t):Ti.ceil(t)}function g5(t,e){return t=_p(t),Ct(Ti.count(Je(t),t)+(Je(t).getUTCDay()===4),e,2)}function b5(t){return t.getUTCDay()}function _5(t,e){return Ct(Kr.count(Je(t)-1,t),e,2)}function y5(t,e){return Ct(t.getUTCFullYear()%100,e,2)}function w5(t,e){return t=_p(t),Ct(t.getUTCFullYear()%100,e,2)}function v5(t,e){return Ct(t.getUTCFullYear()%1e4,e,4)}function x5(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ti(t):Ti.ceil(t),Ct(t.getUTCFullYear()%1e4,e,4)}function k5(){return"+0000"}function lh(){return"%"}function fh(t){return+t}function sh(t){return Math.floor(+t/1e3)}var Ri,au,vo;M5({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function M5(t){return Ri=M6(t),au=Ri.format,Ri.parse,vo=Ri.utcFormat,Ri.utcParse,Ri}function S5(t){return new Date(t)}function T5(t){return t instanceof Date?+t:+new Date(+t)}function lu(t,e,n,i,r,o,a,l,f,s){var u=X1(),c=u.invert,h=u.domain,p=s(".%L"),d=s(":%S"),m=s("%I:%M"),b=s("%I %p"),_=s("%a %d"),g=s("%b %d"),v=s("%B"),w=s("%Y");function k(x){return(f(x)<x?p:l(x)<x?d:a(x)<x?m:o(x)<x?b:i(x)<x?r(x)<x?_:g:n(x)<x?v:w)(x)}return u.invert=function(x){return new Date(c(x))},u.domain=function(x){return arguments.length?h(Array.from(x,T5)):h().map(S5)},u.ticks=function(x){var S=h();return t(S[0],S[S.length-1],x??10)},u.tickFormat=function(x,S){return S==null?k:s(S)},u.nice=function(x){var S=h();return(!x||typeof x.range!="function")&&(x=e(S[0],S[S.length-1],x??10)),x?h(Z1(S,x)):u},u.copy=function(){return ho(u,lu(t,e,n,i,r,o,a,l,f,s))},u}function C5(){return gn.apply(lu(x6,k6,Ke,yo,rr,Ai,bo,mo,je,au).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function A5(){return gn.apply(lu(v6,pp,Je,wo,or,gl,_o,go,je,vo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _l(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function yl(){var t=0,e=.5,n=1,i=1,r,o,a,l,f,s=Ue,u,c=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(i*m<i*o?l:f),s(c?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(c=!!m,p):c},p.interpolator=function(m){return arguments.length?(s=m,p):s};function d(m){return function(b){var _,g,v;return arguments.length?([_,g,v]=b,s=ll(m,[_,g,v]),p):[s(0),s(.5),s(1)]}}return p.range=d(uo),p.rangeRound=d(Gs),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return u=m,r=m(t),o=m(e),a=m(n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p}}function yp(){var t=po(yl()(Ue));return t.copy=function(){return _l(t,yp())},dl.apply(t,arguments)}function wp(){var t=K1(yl()).domain([.1,1,10]);return t.copy=function(){return _l(t,wp()).base(t.base())},dl.apply(t,arguments)}function vp(){var t=Q1(yl());return t.copy=function(){return _l(t,vp()).constant(t.constant())},dl.apply(t,arguments)}function xp(){var t=ep(yl());return t.copy=function(){return _l(t,xp()).exponent(t.exponent())},dl.apply(t,arguments)}function kt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const E5=kt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),$5=kt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),N5=kt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),D5=kt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),F5=kt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),L5=kt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),I5=kt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),R5=kt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),P5=kt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),O5=kt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),$t=t=>xw(t[t.length-1]);var kp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(kt);const Mp=$t(kp);var Sp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(kt);const Tp=$t(Sp);var Cp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(kt);const Ap=$t(Cp);var Ep=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(kt);const $p=$t(Ep);var xs=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(kt);const Ua=$t(xs);var Np=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(kt);const Dp=$t(Np);var ks=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(kt);const za=$t(ks);var Fp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(kt);const Lp=$t(Fp);var Ip=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(kt);const Rp=$t(Ip);var Pp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(kt);const Op=$t(Pp);var Up=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(kt);const zp=$t(Up);var Bp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(kt);const qp=$t(Bp);var Wp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(kt);const Yp=$t(Wp);var Hp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(kt);const Vp=$t(Hp);var Gp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(kt);const Xp=$t(Gp);var jp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(kt);const Zp=$t(jp);var Kp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(kt);const Jp=$t(Kp);var Qp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(kt);const tm=$t(Qp);var em=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(kt);const nm=$t(em);var im=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(kt);const rm=$t(im);var om=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(kt);const am=$t(om);var lm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(kt);const fm=$t(lm);var sm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(kt);const um=$t(sm);var cm=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(kt);const hm=$t(cm);var dm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(kt);const pm=$t(dm);var mm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(kt);const gm=$t(mm);var bm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(kt);const _m=$t(bm);function ym(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const wm=Xs(dn(300,.5,0),dn(-240,.5,1));var vm=Xs(dn(-100,.75,.35),dn(80,1.5,.8)),xm=Xs(dn(260,.75,.35),dn(80,1.5,.8)),Vo=dn();function km(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Vo.h=360*t-100,Vo.s=1.5-1.5*e,Vo.l=.8-.9*e,Vo+""}var Go=Kn(),U5=Math.PI/3,z5=Math.PI*2/3;function Mm(t){var e;return t=(.5-t)*Math.PI,Go.r=255*(e=Math.sin(t))*e,Go.g=255*(e=Math.sin(t+U5))*e,Go.b=255*(e=Math.sin(t+z5))*e,Go+""}function Sm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function wl(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Tm=wl(kt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Cm=wl(kt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Am=wl(kt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Em=wl(kt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Qt(t){return function(){return t}}const $m=Math.cos,fu=Math.min,Ba=Math.sin,Kt=Math.sqrt,uh=1e-12,qa=Math.PI,vl=2*qa;function Nm(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new u1(e)}function Dm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Fm(t){this._context=t}Fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function xo(t){return new Fm(t)}function Lm(t){return t[0]}function Im(t){return t[1]}function Rm(t,e){var n=Qt(!0),i=null,r=xo,o=null,a=Nm(l);t=typeof t=="function"?t:t===void 0?Lm:Qt(t),e=typeof e=="function"?e:e===void 0?Im:Qt(e);function l(f){var s,u=(f=Dm(f)).length,c,h=!1,p;for(i==null&&(o=r(p=a())),s=0;s<=u;++s)!(s<u&&n(c=f[s],s,f))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,f),+e(c,s,f));if(p)return o=null,p+""||null}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Qt(+f),l):t},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Qt(+f),l):e},l.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Qt(!!f),l):n},l.curve=function(f){return arguments.length?(r=f,i!=null&&(o=r(i)),l):r},l.context=function(f){return arguments.length?(f==null?i=o=null:o=r(i=f),l):i},l}function B5(t,e,n){var i=null,r=Qt(!0),o=null,a=xo,l=null,f=Nm(s);t=typeof t=="function"?t:t===void 0?Lm:Qt(+t),e=typeof e=="function"?e:Qt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Im:Qt(+n);function s(c){var h,p,d,m=(c=Dm(c)).length,b,_=!1,g,v=new Array(m),w=new Array(m);for(o==null&&(l=a(g=f())),h=0;h<=m;++h){if(!(h<m&&r(b=c[h],h,c))===_)if(_=!_)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=h-1;d>=p;--d)l.point(v[d],w[d]);l.lineEnd(),l.areaEnd()}_&&(v[h]=+t(b,h,c),w[h]=+e(b,h,c),l.point(i?+i(b,h,c):v[h],n?+n(b,h,c):w[h]))}if(g)return l=null,g+""||null}function u(){return Rm().defined(r).curve(a).context(o)}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Qt(+c),i=null,s):t},s.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Qt(+c),s):t},s.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Qt(+c),s):i},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Qt(+c),n=null,s):e},s.y0=function(c){return arguments.length?(e=typeof c=="function"?c:Qt(+c),s):e},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Qt(+c),s):n},s.lineX0=s.lineY0=function(){return u().x(t).y(e)},s.lineY1=function(){return u().x(t).y(n)},s.lineX1=function(){return u().x(i).y(e)},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Qt(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,o!=null&&(l=a(o)),s):a},s.context=function(c){return arguments.length?(c==null?o=l=null:l=a(o=c),s):o},s}class Pm{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function q5(t){return new Pm(t,!0)}function W5(t){return new Pm(t,!1)}const Y5=Kt(3),Om={draw(t,e){const n=Kt(e+fu(e/28,.75))*.59436,i=n/2,r=i*Y5;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Jr={draw(t,e){const n=Kt(e/qa);t.moveTo(n,0),t.arc(0,0,n,0,vl)}},Um={draw(t,e){const n=Kt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},zm=Kt(1/3),H5=zm*2,Bm={draw(t,e){const n=Kt(e/H5),i=n*zm;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},qm={draw(t,e){const n=Kt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},Wm={draw(t,e){const n=Kt(e-fu(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Ym={draw(t,e){const n=Kt(e),i=-n/2;t.rect(i,i,n,n)}},Hm={draw(t,e){const n=Kt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},V5=.8908130915292852,Vm=Ba(qa/10)/Ba(7*qa/10),G5=Ba(vl/10)*Vm,X5=-$m(vl/10)*Vm,Gm={draw(t,e){const n=Kt(e*V5),i=G5*n,r=X5*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=vl*o/5,l=$m(a),f=Ba(a);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*r,f*i+l*r)}t.closePath()}},bf=Kt(3),Xm={draw(t,e){const n=-Kt(e/(bf*3));t.moveTo(0,n*2),t.lineTo(-bf*n,-n),t.lineTo(bf*n,-n),t.closePath()}},j5=Kt(3),jm={draw(t,e){const n=Kt(e)*.6824,i=n/2,r=n*j5/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},Le=-.5,Ie=Kt(3)/2,Ms=1/Kt(12),Z5=(Ms/2+1)*3,Zm={draw(t,e){const n=Kt(e/Z5),i=n/2,r=n*Ms,o=i,a=n*Ms+n,l=-o,f=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(l,f),t.lineTo(Le*i-Ie*r,Ie*i+Le*r),t.lineTo(Le*o-Ie*a,Ie*o+Le*a),t.lineTo(Le*l-Ie*f,Ie*l+Le*f),t.lineTo(Le*i+Ie*r,Le*r-Ie*i),t.lineTo(Le*o+Ie*a,Le*a-Ie*o),t.lineTo(Le*l+Ie*f,Le*f-Ie*l),t.closePath()}},Km={draw(t,e){const n=Kt(e-fu(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},K5=[Jr,Um,Bm,Ym,Gm,Xm,Zm],J5=[Jr,Wm,Km,jm,Om,Hm,qm];function Jn(){}function Wa(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function xl(t){this._context=t}xl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wa(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Q5(t){return new xl(t)}function Jm(t){this._context=t}Jm.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Wa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function t4(t){return new Jm(t)}function Qm(t){this._context=t}Qm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Wa(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e4(t){return new Qm(t)}function tg(t,e){this._basis=new xl(t),this._beta=e}tg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,l=-1,f;++l<=n;)f=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+f*o),this._beta*e[l]+(1-this._beta)*(r+f*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const n4=function t(e){function n(i){return e===1?new xl(i):new tg(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Ya(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function su(t,e){this._context=t,this._k=(1-e)/6}su.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ya(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const i4=function t(e){function n(i){return new su(i,e)}return n.tension=function(i){return t(+i)},n}(0);function uu(t,e){this._context=t,this._k=(1-e)/6}uu.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const r4=function t(e){function n(i){return new uu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function cu(t,e){this._context=t,this._k=(1-e)/6}cu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const o4=function t(e){function n(i){return new cu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function hu(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>uh){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,r=(r*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>uh){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function eg(t,e){this._context=t,this._alpha=e}eg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:hu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const a4=function t(e){function n(i){return e?new eg(i,e):new su(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function ng(t,e){this._context=t,this._alpha=e}ng.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:hu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l4=function t(e){function n(i){return e?new ng(i,e):new uu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function ig(t,e){this._context=t,this._alpha=e}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const f4=function t(e){function n(i){return e?new ig(i,e):new cu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function rg(t){this._context=t}rg.prototype={areaStart:Jn,areaEnd:Jn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function s4(t){return new rg(t)}function ch(t){return t<0?-1:1}function hh(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(o*r+a*i)/(i+r);return(ch(o)+ch(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function dh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function _f(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,r+l*e,o-l,a-l*n,o,a)}function Ha(t){this._context=t}Ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_f(this,this._t0,dh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,_f(this,dh(this,n=hh(this,t,e)),n);break;default:_f(this,this._t0,n=hh(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function og(t){this._context=new ag(t)}(og.prototype=Object.create(Ha.prototype)).point=function(t,e){Ha.prototype.point.call(this,e,t)};function ag(t){this._context=t}ag.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function u4(t){return new Ha(t)}function c4(t){return new og(t)}function lg(t){this._context=t}lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=ph(t),r=ph(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function ph(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function h4(t){return new lg(t)}function kl(t,e){this._context=t,this._t=e}kl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function d4(t){return new kl(t,.5)}function p4(t){return new kl(t,0)}function m4(t){return new kl(t,1)}function Lr(t,e,n){this.k=t,this.x=e,this.y=n}Lr.prototype={constructor:Lr,scale:function(t){return t===1?this:new Lr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Lr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Lr.prototype;function Qn(t){return t!=null&&!Number.isNaN(t)}function Qe(t,e){return+Qn(e)-+Qn(t)||ve(t,e)}function Va(t,e){return+Qn(e)-+Qn(t)||ao(t,e)}function du(t){return t!=null&&`${t}`!=""}function fg(t){return isFinite(t)?t:NaN}function Ml(t){return t>0&&isFinite(t)?t:NaN}function pu(t){return t<0&&isFinite(t)?t:NaN}function g4(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${b4(t.getUTCFullYear())}-${kn(t.getUTCMonth()+1,2)}-${kn(t.getUTCDate(),2)}${n||i||r||o?`T${kn(n,2)}:${kn(i,2)}${r||o?`:${kn(r,2)}${o?`.${kn(o,3)}`:""}`:""}Z`:""}`}function b4(t){return t<0?`-${kn(-t,6)}`:t>9999?`+${kn(t,6)}`:kn(t,4)}function kn(t,e){return`${t}`.padStart(e,"0")}const _4=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function sg(t,e){return _4.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Bi=1e3,qn=Bi*60,Wn=qn*60,pn=Wn*24,rn=pn*7,mi=pn*30,Un=pn*365,yf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Bi],["5 seconds",5*Bi],["15 seconds",15*Bi],["30 seconds",30*Bi],["minute",qn],["5 minutes",5*qn],["15 minutes",15*qn],["30 minutes",30*qn],["hour",Wn],["3 hours",3*Wn],["6 hours",6*Wn],["12 hours",12*Wn],["day",pn],["2 days",2*pn],["week",rn],["2 weeks",2*rn],["month",mi],["3 months",3*mi],["6 months",6*mi],["year",Un],["2 years",2*Un],["5 years",5*Un],["10 years",10*Un],["20 years",20*Un],["50 years",50*Un],["100 years",100*Un]],mu=new Map([["second",Bi],["minute",qn],["hour",Wn],["day",pn],["monday",rn],["tuesday",rn],["wednesday",rn],["thursday",rn],["friday",rn],["saturday",rn],["sunday",rn],["week",rn],["month",mi],["year",Un]]),ug=new Map([["second",je],["minute",mo],["hour",bo],["day",Ai],["monday",Zr],["tuesday",op],["wednesday",ap],["thursday",Si],["friday",lp],["saturday",fp],["sunday",rr],["week",rr],["month",yo],["year",Ke]]),gu=new Map([["second",je],["minute",go],["hour",_o],["day",bl],["monday",Kr],["tuesday",sp],["wednesday",up],["thursday",Ti],["friday",cp],["saturday",hp],["sunday",or],["week",or],["month",wo],["year",Je]]),ko=Symbol("intervalDuration"),Sl=Symbol("intervalType");for(const[t,e]of ug)e[ko]=mu.get(t),e[Sl]="time";for(const[t,e]of gu)e[ko]=mu.get(t),e[Sl]="utc";const Ir=[["year",Je,"utc"],["month",wo,"utc"],["day",bl,"utc",6*mi],["hour",_o,"utc",3*pn],["minute",go,"utc",6*Wn],["second",je,"utc",30*qn]],sa=[["year",Ke,"time"],["month",yo,"time"],["day",Ai,"time",6*mi],["hour",bo,"time",3*pn],["minute",mo,"time",6*Wn],["second",je,"time",30*qn]],y4=[Ir[0],sa[0],Ir[1],sa[1],Ir[2],sa[2],...Ir.slice(3)];function cg(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=gu.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function hg(t){return dg(cg(t),"time")}function bu(t){return dg(cg(t),"utc")}function dg([t,e],n){let i=(n==="time"?ug:gu).get(t);return e>1&&(i=i.every(e),i[ko]=mu.get(t)*e,i[Sl]=n),i}function mh(t,e){if(!(e>1))return;const n=t[ko];if(!yf.some(([,r])=>r===n)||n%pn===0&&pn<n&&n<mi)return;const[i]=yf[Ja(([,r])=>Math.log(r)).center(yf,Math.log(n*e))];return(t[Sl]==="time"?hg:bu)(i)}function gh(t,e,n){const i=e==="time"?au:vo;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=w4(n);switch(t){case"millisecond":return Pi(i(".%L"),i(":%M:%S"),r);case"second":return Pi(i(":%S"),i("%-I:%M"),r);case"minute":return Pi(i("%-I:%M"),i("%p"),r);case"hour":return Pi(i("%-I %p"),i("%b %-d"),r);case"day":return Pi(i("%-d"),i("%b"),r);case"month":return Pi(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function w4(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function v4(t){return t==="time"?sa:t==="utc"?Ir:y4}function x4(t,e,n){const i=ke(c_(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return gh("millisecond","utc",n);for(const[r,o,a,l]of v4(t)){if(i>l||r==="hour"&&!i)break;if(e.every(f=>o.floor(f)>=f))return gh(r,a,n)}}function Pi(t,e,n){return(i,r,o)=>{const a=t(i,r),l=e(i,r),f=r-lr(o);return r!==f&&o[f]!==void 0&&l===e(o[f],f)?a:n(a,l)}}const Qr=Object.getPrototypeOf(Uint8Array),k4=Object.prototype.toString,pg=Symbol("reindex");function ee(t,e,n){const i=typeof e;return i==="string"?bh(t,mg(e),n):i==="function"?bh(t,e,n):i==="number"||e instanceof Date||i==="boolean"?jt(t,Mo(e),n):typeof(e==null?void 0:e.transform)=="function"?_h(e.transform(t),n):M4(_h(e,n),t==null?void 0:t[pg])}function M4(t,e){return e?vu(t,e):t}function bh(t,e,n){return jt(t,(n==null?void 0:n.prototype)instanceof Qr?S4(e):e,n)}function _h(t,e){return e===void 0?Ee(t):t instanceof e?t:e.prototype instanceof Qr&&!(t instanceof Qr)?e.from(t,yu):e.from(t)}function S4(t){return(e,n)=>yu(t(e,n))}const ua=[null],mg=t=>e=>e[t],Tl={transform:Dn},fe={transform:t=>t},T4=()=>1,C4=()=>!0,ue=t=>t==null?t:`${t}`,Pt=t=>t==null?t:+t,_u=t=>t?t[0]:void 0,Ss=t=>t?t[1]:void 0,Mo=t=>()=>t;function A4(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Zi(n,e,i)}function fn(t){return t instanceof Qr?t:jt(t,yu,Float64Array)}function yu(t){return t==null?NaN:Number(t)}function E4(t){return jt(t,gg)}function gg(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?sg(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Nn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Al(t)?[void 0,t]:[t,void 0]}function ce(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function bg(t,e,n){if(t!=null)return en(t,e,n)}function en(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Ee(t){return t==null||t instanceof Array||t instanceof Qr?t:Array.from(t)}function jt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function to(t,e=Array){return t instanceof e?t.slice():e.from(t)}function $4({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function _g({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function N4(t){return $4(t)||_g(t)||t.interval!==void 0}function ii(t){return(t==null?void 0:t.toString)===k4}function Ts(t){return ii(t)&&(t.type!==void 0||t.domain!==void 0)}function Cl(t){return ii(t)&&typeof t.transform!="function"}function ar(t){return Cl(t)&&t.value===void 0&&t.channel===void 0}function D4(t,e,n,i=fe){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function So(t,e){return t===void 0&&e===void 0?[_u,Ss]:[t,e]}function wu({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Nn(e)),t===void 0&&([t]=Nn(n)),t}function Dn(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function vu(t,e){return jt(e,n=>t[n],t.constructor)}function F4(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function hi(t){return t!==null&&typeof t=="object"?t.valueOf():t}function L4(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Ga(t){let e;return[{transform:()=>e,label:Ni(t)},n=>e=n]}function vn(t){return t==null?[t]:Ga(t)}function Ni(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function Cs(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return Se(i)||Se(r)?jt(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):jt(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function yg(t,e){const n=wg(e==null?void 0:e.interval,e==null?void 0:e.type);return n?jt(t,n):t}function wg(t,e){const n=xu(t,e);return n&&(i=>Qn(i)?n.floor(i):i)}function xu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Yf(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Yf(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?hg:bu)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function mr(t,e){if(t=xu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function I4(t,e){if(t=mr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function R4(t){return qi(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function qi(t){return typeof(t==null?void 0:t.range)=="function"}function To(t){return t===void 0||Cl(t)?t:{value:t}}function P4(t){return t==null?null:{transform:e=>ee(e,t,Float64Array),label:Ni(t)}}function ri(t){return t&&typeof t[Symbol.iterator]=="function"}function vg(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function yh(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Se(t){for(const e of t)if(e!=null)return e instanceof Date}function O4(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&sg(e)}function U4(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function z4(t){for(const e of t)if(e!=null)return typeof e=="number"}function wf(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const B4=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Al(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||B4.has(t))}function q4(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function be(t){return t==null||eo(t)}function eo(t){return/^\s*none\s*$/i.test(t)}function W4(t){return/^\s*round\s*$/i.test(t)}function As(t,e){return bg(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function El(t="middle"){return As(t,"frameAnchor")}function lr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return ao(e,n)}function Y4(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function H4(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function xg(t){return ri(t)?H4(t):t}const sn=Symbol("position"),Fn=Symbol("color"),Co=Symbol("radius"),Ao=Symbol("length"),Eo=Symbol("opacity"),$l=Symbol("symbol"),kg=Symbol("projection"),Yt=new Map([["x",sn],["y",sn],["fx",sn],["fy",sn],["r",Co],["color",Fn],["opacity",Eo],["symbol",$l],["length",Ao],["projection",kg]]);function V4(t){return t===sn||t===kg}function G4(t){return t===sn||t===Co||t===Ao||t===Eo}const X4=Math.sqrt(3),j4=2/X4,Z4={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*j4,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},ku=new Map([["asterisk",Om],["circle",Jr],["cross",Um],["diamond",Bm],["diamond2",qm],["hexagon",Z4],["plus",Wm],["square",Ym],["square2",Hm],["star",Gm],["times",Km],["triangle",Xm],["triangle2",jm],["wye",Zm]]);function Mu(t){return t&&typeof t.draw=="function"}function K4(t){return Mu(t)?!0:typeof t!="string"?!1:ku.has(t.toLowerCase())}function Su(t){if(t==null||Mu(t))return t;const e=ku.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function J4(t){if(t==null||Mu(t))return[void 0,t];if(typeof t=="string"){const e=ku.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Nl({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=Mg(t)),e!=null&&!ar(e)&&(i=vf(i,Tu(e))),n&&(i=vf(i,Sg))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||ar(e))&&{sort:e},transform:vf(i,a)}}function fr({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=Mg(t)),e!=null&&!ar(e)&&(i=xf(i,Tu(e))),n&&(i=xf(i,Sg))),{...r,...(e===null||ar(e))&&{sort:e},initializer:xf(i,o)}}function vf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,Ee(n),i,r)}}function xf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,l,f,s,u,c;return{data:l=n,facets:f=i,channels:a}=t.call(this,n,i,r,...o),{data:u=l,facets:c=f,channels:s}=e.call(this,l,f,{...r,...a},...o),{data:u,facets:c,channels:{...a,...s}}}}function Q4(t,e){return(t.initializer!=null?fr:Nl)(t,e)}function Mg(t){return(e,n)=>{const i=ee(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function Sg(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function t8(t,{sort:e,...n}={}){return{...(Cl(t)&&t.channel!==void 0?fr:Q4)(n,Tu(t)),sort:ar(e)?e:null}}function Tu(t){return(typeof t=="function"&&t.length!==1?e8:n8)(t)}function e8(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function n8(t){let e,n;({channel:e,value:t,order:n}={...To(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Va:Qe),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Qe;break;case"descending":n=Va;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let l;if(e===void 0)l=ee(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const f=(s,u)=>n(l[s],l[u]);return{data:r,facets:o.map(s=>s.slice().sort(f))}}}function Xo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function i8(t,e,n=Tg){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",u8]),e.href!=null&&t.href===void 0&&i.push(["href",Au]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?r8(r):n(r,o,e))}function Tg(t,e,n,i=Cg){let r;ii(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,l]=Ga(o.label);let f;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),f=l([])},scope(s,u){o.scope(s,u)},reduce(s,u){f.push(o.reduce(s,u))}}}function r8(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Cg(t,e,n,i=Cu){const r=L4(t,n),o=i(e,r);let a,l;return{label:Ni(o===Xa?null:r,o.label),initialize(f){a=r===void 0?f:ee(f,r),o.scope==="data"&&(l=o.reduceIndex(Dn(f),a))},scope(f,s){o.scope===f&&(l=o.reduceIndex(s,a))},reduce(f,s){return o.scope==null?o.reduceIndex(f,a,s):o.reduceIndex(f,a,l,s)}}}function wh(t,e){return e?Wr(el(t,n=>e[n]),_u):[[,t]]}function Cu(t,e,n=o8){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ii(t))return f8(t);if(typeof t=="function")return s8(t);if(/^p\d{2}$/i.test(t))return xn(A4(t));switch(`${t}`.toLowerCase()){case"first":return Au;case"last":return c8;case"identity":return Ag;case"count":return Xa;case"distinct":return h8;case"sum":return e==null?Xa:d8;case"proportion":return xh(e,"data");case"proportion-facet":return xh(e,"facet");case"deviation":return xn(lo);case"min":return xn(Cn);case"min-index":return xn(a_);case"max":return xn(ke);case"max-index":return xn(o_);case"mean":return vh(jn);case"median":return vh(Wf);case"variance":return xn(ji);case"mode":return xn(u_)}return n(t)}function o8(t){throw new Error(`invalid reduce: ${t}`)}function a8(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function l8(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>Qe(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function f8(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function s8(t){return{reduceIndex(e,n,i){return t(vu(n,e),i)}}}function xn(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function vh(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return Se(n)?new Date(i):i}}}const Ag={reduceIndex(t,e){return vu(e,t)}},Au={reduceIndex(t,e){return e[t[0]]}},u8={reduceIndex(t,e){const i=Wr(Yi(t,o=>o.length,o=>e[o]),Ss),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[`… ${o.length.toLocaleString("en-US")} more`,Zn(o,Ss)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},c8={reduceIndex(t,e){return e[t[t.length-1]]}},Xa={label:"Frequency",reduceIndex(t){return t.length}},h8={label:"Distinct",reduceIndex(t,e){const n=new tl;for(const i of t)n.add(e[i]);return n.size}},d8=xn(Zn);function xh(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>Zn(n,o=>i[o])/r}}function no(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=Ni(i)},l){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),Eg(l,{scale:e,type:n,value:ee(t,i),label:a,filter:r,hint:o})}function p8(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,no(e,i,n)]))}function m8(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:jt(o,a)]}));return n.channels=t,n}function Eg(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&wf(i,Al)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&wf(i,q4)?null:"opacity";break;case"symbol":n!==!0&&wf(i,K4)?(e.scale=null,e.value=jt(i,Su)):e.scale="symbol";break;default:e.scale=Yt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Yt.has(n))throw new Error(`unknown scale: ${n}`);return e}function g8(t,e,n,i,r){const{order:o,reverse:a,reduce:l=!0,limit:f}=r;for(const s in r){if(!Yt.has(s))continue;let{value:u,order:c=o,reverse:h=a,reduce:p=l,limit:d=f}=To(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),c=c===void 0?m!==(u==="width"||u==="height")?Ng:$g:y8(c),p==null||p===!1)continue;const b=s==="fx"||s==="fy"?_8(e,i[s]):b8(n,s);if(!b)throw new Error(`missing channel for scale: ${s}`);const _=b.value,[g=0,v=1/0]=ri(d)?d:d<0?[d]:[0,d];if(u==null)b.domain=()=>{let w=Array.from(new tl(_));return h&&(w=w.reverse()),(g!==0||v!==1/0)&&(w=w.slice(g,v)),w};else{const w=u==="data"?t:u==="height"?kh(n,"y1","y2"):u==="width"?kh(n,"x1","x2"):Es(n,u,u==="y"?"y2":u==="x"?"x2":void 0),k=Cu(p===!0?"max":p,w);b.domain=()=>{let x=Qb(Dn(_),S=>k.reduceIndex(S,w),S=>_[S]);return c&&x.sort(c),h&&x.reverse(),(g!==0||v!==1/0)&&(x=x.slice(g,v)),x.map(_u)}}}}function b8(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function _8(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const l of t[o])r[l]=a}return e}function kh(t,e,n){const i=Es(t,e),r=Es(t,n);return jt(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function Es(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function y8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return $g;case"descending":return Ng}throw new Error(`invalid order: ${t}`)}function $g([t,e],[n,i]){return Qe(e,i)||Qe(t,n)}function Ng([t,e],[n,i]){return Va(e,i)||Qe(t,n)}function Mh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function w8(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const v8=w8(t=>new Intl.NumberFormat(t));function x8(t="en-US"){const e=v8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function k8(t){return g4(t,"Invalid Date")}function M8(t="en-US"){const e=x8(t);return n=>(n instanceof Date?k8:typeof n=="number"?e:ue)(n)}const Ci=M8();let $s=0,Ns;function S8(){const t=$s;return $s=0,Ns=void 0,t}function Yn(t){t!==Ns&&(Ns=t,console.warn(t),++$s)}const ye=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let T8=0;function Sh(){return`plot-clip-${++T8}`}function C8(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:l,fillOpacity:f,stroke:s,strokeWidth:u,strokeOpacity:c,strokeLinejoin:h,strokeLinecap:p,strokeMiterlimit:d,strokeDasharray:m,strokeDashoffset:b,opacity:_,mixBlendMode:g,imageFilter:v,paintOrder:w,pointerEvents:k,shapeRendering:x,channels:S},{ariaLabel:T,fill:E="currentColor",fillOpacity:F,stroke:C="none",strokeOpacity:L,strokeWidth:R,strokeLinecap:W,strokeLinejoin:A,strokeMiterlimit:B,paintOrder:z}){E===null&&(l=null,f=null),C===null&&(s=null,c=null),be(E)?!be(C)&&(!be(l)||S!=null&&S.fill)&&(C="none"):be(C)&&(!be(s)||S!=null&&S.stroke)&&(E="none");const[J,j]=Nn(l,E),[X,O]=ce(f,F),[H,Q]=Nn(s,C),[at,nt]=ce(c,L),[Z,q]=ce(_);eo(Q)||(u===void 0&&(u=R),p===void 0&&(p=W),h===void 0&&(h=A),d===void 0&&!W4(h)&&(d=B),!eo(j)&&w===void 0&&(w=z));const[N,$]=ce(u);return E!==null&&(t.fill=re(j,"currentColor"),t.fillOpacity=Sr(O,1)),C!==null&&(t.stroke=re(Q,"none"),t.strokeWidth=Sr($,1),t.strokeOpacity=Sr(nt,1),t.strokeLinejoin=re(h,"miter"),t.strokeLinecap=re(p,"butt"),t.strokeMiterlimit=Sr(d,4),t.strokeDasharray=re(m,"none"),t.strokeDashoffset=re(b,"0")),t.target=ue(a),t.ariaLabel=ue(T),t.ariaDescription=ue(r),t.ariaHidden=ue(o),t.opacity=Sr(q,1),t.mixBlendMode=re(g,"normal"),t.imageFilter=re(v,"none"),t.paintOrder=re(w,"normal"),t.pointerEvents=re(k,"auto"),t.shapeRendering=re(x,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:J,scale:"auto",optional:!0},fillOpacity:{value:X,scale:"auto",optional:!0},stroke:{value:H,scale:"auto",optional:!0},strokeOpacity:{value:at,scale:"auto",optional:!0},strokeWidth:{value:N,optional:!0},opacity:{value:Z,scale:"auto",optional:!0}}}function A8(t,e){e&&t.filter(n=>du(e[n])).append("title").call($8,e)}function E8(t,e){e&&t.filter(([n])=>du(e[n])).append("title").call(N8,e)}function $8(t,e){e&&t.text(n=>Ci(e[n]))}function N8(t,e){e&&t.text(([n])=>Ci(e[n]))}function Ln(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&wt(t,"aria-label",h=>i[h]),o&&wt(t,"fill",h=>o[h]),a&&wt(t,"fill-opacity",h=>a[h]),l&&wt(t,"stroke",h=>l[h]),f&&wt(t,"stroke-opacity",h=>f[h]),s&&wt(t,"stroke-width",h=>s[h]),u&&wt(t,"opacity",h=>u[h]),c&&Ig(t,h=>c[h],e),n||A8(t,r)}function Dg(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&wt(t,"aria-label",([h])=>i[h]),o&&wt(t,"fill",([h])=>o[h]),a&&wt(t,"fill-opacity",([h])=>a[h]),l&&wt(t,"stroke",([h])=>l[h]),f&&wt(t,"stroke-opacity",([h])=>f[h]),s&&wt(t,"stroke-width",([h])=>s[h]),u&&wt(t,"opacity",([h])=>u[h]),c&&Ig(t,([h])=>c[h],e),n||E8(t,r)}function D8({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:l,href:f},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,l,f].filter(u=>u!==void 0)}function F8(t,e,n){const i=el(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Yn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*Fg(t,e,n,i){const{z:r}=n,{z:o}=i,a=D8(i,n),l=[...e,...a];for(const f of o?F8(t,o,r):[t]){let s,u;t:for(const c of f){for(const h of l)if(!Qn(h[c])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(h=>hi(h[c])),u=[c];continue}u.push(c);for(let h=0;h<a.length;++h)if(hi(a[h][c])!==s[h]){yield u,s=a.map(d=>hi(d[c])),u=[c];continue t}}u&&(yield u)}}function Lg(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=en(t,"clip",["frame","sphere"])),t}function L8(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:l,marginLeft:f,marginRight:s,marginTop:u,marginBottom:c}=n,h=Sh();r=`url(#${h})`,t=Ht("svg:g",i).call(p=>p.append("svg:clipPath").attr("id",h).append("rect").attr("x",f).attr("y",u).attr("width",a-s-f).attr("height",l-u-c)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const l=Sh();r=`url(#${l})`,t.append("clipPath").attr("id",l).append("path").attr("d",ul(a)({type:"Sphere"}));break}}wt(t,"aria-label",e.ariaLabel),wt(t,"aria-description",e.ariaDescription),wt(t,"aria-hidden",e.ariaHidden),wt(t,"clip-path",r)}function We(t,e,n,i){L8(t,e,n,i),wt(t,"fill",e.fill),wt(t,"fill-opacity",e.fillOpacity),wt(t,"stroke",e.stroke),wt(t,"stroke-width",e.strokeWidth),wt(t,"stroke-opacity",e.strokeOpacity),wt(t,"stroke-linejoin",e.strokeLinejoin),wt(t,"stroke-linecap",e.strokeLinecap),wt(t,"stroke-miterlimit",e.strokeMiterlimit),wt(t,"stroke-dasharray",e.strokeDasharray),wt(t,"stroke-dashoffset",e.strokeDashoffset),wt(t,"shape-rendering",e.shapeRendering),wt(t,"filter",e.imageFilter),wt(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;wt(t,"pointer-events",r)}function Ye(t,e){I8(t,"mix-blend-mode",e.mixBlendMode),wt(t,"opacity",e.opacity)}function Ig(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Ki.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Ki.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function wt(t,e,n){n!=null&&t.attr(e,n)}function I8(t,e,n){n!=null&&t.style(e,n)}function Ne(t,e,{x:n,y:i},r=ye,o=ye){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function re(t,e){if((t=ue(t))!==e)return t}function Sr(t,e){if((t=Pt(t))!==e)return t}const R8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Eu(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!R8.test(t))throw new Error(`invalid class name: ${t}`);return t}function $u(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function $o({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function Nu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Lg(n)}}function Ht(t,{document:e}){return Pr(rl(t).call(e.documentElement))}const Rg=Math.PI,_n=2*Rg,Th=.618;function P8({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,f,s="frame";if(ii(t)){let k;if({type:t,domain:f,inset:k,insetTop:n=k!==void 0?k:n,insetRight:i=k!==void 0?k:i,insetBottom:r=k!==void 0?k:r,insetLeft:o=k!==void 0?k:o,clip:s=s,...l}=t,t==null)return}typeof t!="function"&&({type:t}=Pg(t));const{width:u,height:c,marginLeft:h,marginRight:p,marginTop:d,marginBottom:m}=a,b=u-h-p-o-i,_=c-d-m-n-r;if(t=t==null?void 0:t({width:b,height:_,clip:s,...l}),t==null)return;s=O8(s,h,d,u-p,c-m);let g=h+o,v=d+n,w;if(f!=null){const[[k,x],[S,T]]=ul(t).bounds(f),E=Math.min(b/(S-k),_/(T-x));E>0?(g-=(E*(k+S)-b)/2,v-=(E*(x+T)-_)/2,w=bs({point(F,C){this.stream.point(F*E+g,C*E+v)}})):Yn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=g===0&&v===0?Og():bs({point(k,x){this.stream.point(k+g,x+v)}})),{stream:k=>t.stream(w.stream(s(k)))}}function Pg(t){switch(`${t}`.toLowerCase()){case"albers-usa":return He(G3,.7463,.4673);case"albers":return jo(P1,.7463,.4673);case"azimuthal-equal-area":return He(X3,4,4);case"azimuthal-equidistant":return He(j3,_n,_n);case"conic-conformal":return jo(J3,_n,_n);case"conic-equal-area":return jo(Ia,6.1702,2.9781);case"conic-equidistant":return jo(e6,7.312,3.6282);case"equal-earth":return He(i6,5.4133,2.6347);case"equirectangular":return He(Q3,_n,Rg);case"gnomonic":return He(r6,3.4641,3.4641);case"identity":return{type:Og};case"reflect-y":return{type:U8};case"mercator":return He(Z3,_n,_n);case"orthographic":return He(o6,2,2);case"stereographic":return He(a6,2,2);case"transverse-mercator":return He(l6,_n,_n);default:throw new Error(`unknown projection type: ${t}`)}}function O8(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return v1(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function He(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:l})=>{var s,u,c;const f=t();return a!=null&&((s=f.precision)==null||s.call(f,a)),o!=null&&((u=f.rotate)==null||u.call(f,o)),typeof l=="number"&&((c=f.clipAngle)==null||c.call(f,l)),f.scale(Math.min(i/e,r/n)),f.translate([i/2,r/2]),f},aspectRatio:n/e}}function jo(t,e,n){const{type:i,aspectRatio:r}=He(t,e,n);return{type:o=>{const{parallels:a,domain:l,width:f,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),l===void 0&&u.fitSize([f,s],{type:"Sphere"})),u},aspectRatio:r}}const Og=Mo({stream:t=>t}),U8=Mo(bs({point(t,e){this.stream.point(t,-e)}}));function z8(t,e,n,i){const r=n[t],o=n[e],a=r.length,l=n[t]=new Float64Array(a).fill(NaN),f=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(c,h){l[s]=c,f[s]=h}});for(s=0;s<a;++s)u.point(r[s],o[s])}function B8({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(ii(t)&&(t=t.type),t!=null)}function q8(t){if(typeof(t==null?void 0:t.stream)=="function")return Th;if(ii(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Pg(t);if(e)return e}return Th}}function W8(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)si(a,o);return[i,r]}const Y8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Ug=new Map([["accent",$5],["category10",E5],["dark2",N5],["observable10",Y8],["paired",D5],["pastel1",F5],["pastel2",L5],["set1",I5],["set2",R5],["set3",P5],["tableau10",O5]]);function H8(t){return t!=null&&Ug.has(`${t}`.toLowerCase())}const Ch=new Map([...Ug,["brbg",yn(kp,Mp)],["prgn",yn(Sp,Tp)],["piyg",yn(Cp,Ap)],["puor",yn(Ep,$p)],["rdbu",yn(xs,Ua)],["rdgy",yn(Np,Dp)],["rdylbu",yn(ks,za)],["rdylgn",yn(Fp,Lp)],["spectral",yn(Ip,Rp)],["burd",Ah(xs,Ua)],["buylrd",Ah(ks,za)],["blues",Jt(lm,fm)],["greens",Jt(sm,um)],["greys",Jt(cm,hm)],["oranges",Jt(bm,_m)],["purples",Jt(dm,pm)],["reds",Jt(mm,gm)],["turbo",wn(Sm)],["viridis",wn(Tm)],["magma",wn(Cm)],["inferno",wn(Am)],["plasma",wn(Em)],["cividis",wn(ym)],["cubehelix",wn(wm)],["warm",wn(vm)],["cool",wn(xm)],["bugn",Jt(Pp,Op)],["bupu",Jt(Up,zp)],["gnbu",Jt(Bp,qp)],["orrd",Jt(Wp,Yp)],["pubu",Jt(Gp,Xp)],["pubugn",Jt(Hp,Vp)],["purd",Jt(jp,Zp)],["rdpu",Jt(Kp,Jp)],["ylgn",Jt(em,nm)],["ylgnbu",Jt(Qp,tm)],["ylorbr",Jt(im,rm)],["ylorrd",Jt(om,am)],["rainbow",Eh(km)],["sinebow",Eh(Mm)]]);function Jt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ze(e,n):t[n])}function yn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ze(e,n):t[n])}function Ah(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ze(i=>e(1-i),n):t[n].slice().reverse())}function wn(t){return({length:e})=>Ze(t,Math.max(2,Math.floor(e)))}function Eh(t){return({length:e})=>Ze(t,Math.floor(e)+1).slice(0,-1)}function zg(t){const e=`${t}`.toLowerCase();if(!Ch.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Ch.get(e)}function Dl(t,e){const n=zg(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function V8(t,e="greys"){const n=new Set,[i,r]=Dl(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const $h=new Map([["brbg",Mp],["prgn",Tp],["piyg",Ap],["puor",$p],["rdbu",Ua],["rdgy",Dp],["rdylbu",za],["rdylgn",Lp],["spectral",Rp],["burd",t=>Ua(1-t)],["buylrd",t=>za(1-t)],["blues",fm],["greens",um],["greys",hm],["purples",pm],["reds",gm],["oranges",_m],["turbo",Sm],["viridis",Tm],["magma",Cm],["inferno",Am],["plasma",Em],["cividis",ym],["cubehelix",wm],["warm",vm],["cool",xm],["bugn",Op],["bupu",zp],["gnbu",qp],["orrd",Yp],["pubugn",Vp],["pubu",Xp],["purd",Zp],["rdpu",Jp],["ylgnbu",tm],["ylgn",nm],["ylorbr",rm],["ylorrd",am],["rainbow",km],["sinebow",Mm]]);function Du(t){const e=`${t}`.toLowerCase();if(!$h.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return $h.get(e)}const G8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function X8(t){return t!=null&&G8.has(`${t}`.toLowerCase())}const Bg=t=>e=>t(1-e),kf=[0,1],Nh=new Map([["number",ae],["rgb",xi],["hsl",Iw],["hcl",Ow],["lab",Rw]]);function qg(t){const e=`${t}`.toLowerCase();if(!Nh.has(e))throw new Error(`unknown interpolator: ${e}`);return Nh.get(e)}function No(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:l=Yg(t,n),unknown:f,round:s,scheme:u,interval:c,range:h=Yt.get(t)===Co?o7(n,l):Yt.get(t)===Ao?a7(n,l):Yt.get(t)===Eo?kf:void 0,interpolate:p=Yt.get(t)===Fn?u==null&&h!==void 0?xi:Du(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?Gs:ae,reverse:d}){if(c=mr(c,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof p!="function"&&(p=qg(p)),d=!!d,h!==void 0){const m=(l=Ee(l)).length,b=(h=Ee(h)).length;if(m!==b){if(p.length===1)throw new Error("invalid piecewise interpolator");p=ll(p,h),h=void 0}}if(p.length===1?(d&&(p=Bg(p),d=!1),h===void 0&&(h=Float64Array.from(l,(m,b)=>b/(l.length-1)),h.length===2&&(h=kf)),e.interpolate((h===kf?Mo:Lu)(p))):e.interpolate(p),a){const[m,b]=Re(l);(m>0||b<0)&&(l=to(l),lr(l)!==Math.sign(m)?l[l.length-1]=0:l[0]=0)}return d&&(l=ba(l)),e.domain(l).unknown(f),r&&(e.nice(j8(r,i)),l=e.domain()),h!==void 0&&e.range(h),o&&e.clamp(o),{type:i,domain:l,range:h,scale:e,interpolate:p,interval:c}}function j8(t,e){return t===!0?void 0:typeof t=="number"?t:I4(t,e)}function Z8(t,e,n){return No(t,ru(),e,n)}function K8(t,e,n){return Wg(t,e,{...n,exponent:.5})}function Wg(t,e,{exponent:n=1,...i}){return No(t,np().exponent(n),e,{...i,type:"pow"})}function J8(t,e,{base:n=10,domain:i=l7(e),...r}){return No(t,J1().base(n),e,{...r,domain:i})}function Q8(t,e,{constant:n=1,...i}){return No(t,tp().constant(n),e,i)}function t7(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=f7(e),unknown:l,interpolate:f,reverse:s}){return n===void 0&&(n=f!==void 0?Ze(f,r):Yt.get(t)===Fn?Dl(o,r):void 0),a.length>0&&(a=ip(a,n===void 0?{length:r}:n).quantiles()),Fu(t,e,{domain:a,range:n,reverse:s,unknown:l})}function e7(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Yg(t,e),unknown:a,interpolate:l,reverse:f}){const[s,u]=Re(o);let c;return n===void 0?(c=Yr(s,u,i),c[0]<=s&&c.splice(0,1),c[c.length-1]>=u&&c.pop(),i=c.length+1,n=l!==void 0?Ze(l,i):Yt.get(t)===Fn?Dl(r,i):void 0):(c=Ze(ae(s,u),i+1).slice(1,-1),s instanceof Date&&(c=c.map(h=>new Date(h)))),lr(Ee(o))<0&&c.reverse(),Fu(t,e,{domain:c,range:n,reverse:f,unknown:a})}function Fu(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?Ze(o,n.length+1):Yt.get(t)===Fn?Dl(r,n.length+1):void 0,reverse:l}){n=Ee(n);const f=lr(n);if(!isNaN(f)&&!n7(n,f))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=ba(a)),{type:"threshold",scale:rp(f<0?ba(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function n7(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=ao(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function i7(t){return{type:"identity",scale:G4(Yt.get(t))?j1():e=>e}}function io(t,e=fg){return t.length?[Cn(t,({value:n})=>n===void 0?n:Cn(n,e)),ke(t,({value:n})=>n===void 0?n:ke(n,e))]:[0,1]}function Yg(t,e){const n=Yt.get(t);return(n===Co||n===Eo||n===Ao?r7:io)(e)}function r7(t){return[0,t.length?ke(t,({value:e})=>e===void 0?e:ke(e,fg)):1]}function o7(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Zi(t,.5,({value:a})=>a===void 0?NaN:Zi(a,.25,Ml)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ke(r);return o<1?r.map(a=>a*o):r}function a7(t,e){const n=Wf(t,({value:o})=>o===void 0?NaN:Wf(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ke(i);return r<1?i.map(o=>o*r):i}function l7(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return io(t,Ml);if(n<0)return io(t,pu)}return[1,10]}function f7(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function Lu(t){return(e,n)=>i=>t(e+i*(n-e))}function Fl(t,e,n,i,{type:r,nice:o,clamp:a,domain:l=io(i),unknown:f,pivot:s=0,scheme:u,range:c,symmetric:h=!0,interpolate:p=Yt.get(t)===Fn?u==null&&c!==void 0?xi:Du(u!==void 0?u:"rdbu"):ae,reverse:d}){s=+s,l=Ee(l);let[m,b]=l;if(l.length>2&&Yn(`Warning: the diverging ${t} scale domain contains extra elements.`),ao(m,b)<0&&([m,b]=[b,m],d=!d),m=Math.min(m,s),b=Math.max(b,s),typeof p!="function"&&(p=qg(p)),c!==void 0&&(p=p.length===1?Lu(p)(...c):ll(p,c)),d&&(p=Bg(p)),h){const _=n.apply(s),g=_-n.apply(m),v=n.apply(b)-_;g<v?m=n.invert(_-v):g>v&&(b=n.invert(_+g))}return e.domain([m,s,b]).unknown(f).interpolator(p),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,b],pivot:s,interpolate:p,scale:e}}function s7(t,e,n){return Fl(t,yp(),d7,e,n)}function u7(t,e,n){return Hg(t,e,{...n,exponent:.5})}function Hg(t,e,{exponent:n=1,...i}){return Fl(t,xp().exponent(n=+n),g7(n),e,{...i,type:"diverging-pow"})}function c7(t,e,{base:n=10,pivot:i=1,domain:r=io(e,i<0?pu:Ml),...o}){return Fl(t,wp().base(n=+n),p7,e,{domain:r,pivot:i,...o})}function h7(t,e,{constant:n=1,...i}){return Fl(t,vp().constant(n=+n),b7(n),e,i)}const d7={apply(t){return t},invert(t){return t}},p7={apply:Math.log,invert:Math.exp},m7={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function g7(t){return t===.5?m7:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function b7(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Vg(t,e,n,i){return No(t,e,n,i)}function _7(t,e,n){return Vg(t,C5(),e,n)}function y7(t,e,n){return Vg(t,A5(),e,n)}const Do=Symbol("ordinal");function Gg(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:l,hint:f}){return r=mr(r,i),o===void 0&&(o=jg(n,r,t)),(i==="categorical"||i===Do)&&(i="ordinal"),l&&(o=ba(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:f,interval:r}}function w7(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:l,...f}){i=mr(i,n),r===void 0&&(r=jg(e,i,t));let s;if(Yt.get(t)===$l)s=k7(e),o=o===void 0?M7(s):jt(o,Su);else if(Yt.get(t)===Fn&&(o===void 0&&(n==="ordinal"||n===Do)&&(o=V8(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const u=Du(a),c=o[0],h=o[1]-o[0];o=({length:p})=>Ze(d=>u(c+h*d),p)}else o=zg(a);if(l===ys)throw new Error(`implicit unknown on ${t} scale is not supported`);return Gg(t,iu().unknown(l),e,{...f,type:n,domain:r,range:o,hint:s})}function v7(t,e,{align:n=.5,padding:i=.5,...r}){return Xg(f6().align(n).padding(i),e,r,t)}function x7(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Xg(pl().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Xg(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=Gg(i,t,e,n),t.round=r,t}function jg(t,e,n){const i=new tl;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=Re(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&Yt.get(n)===sn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Wr(i,Qe)}function Dh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function k7(t){return{fill:Dh(t,"fill"),stroke:Dh(t,"stroke")}}function M7(t){return be(t.fill)?J5:K5}function Ds(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:l,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,facet:{label:d=e}={},...m}={}){const b={};for(const[_,g]of t){const v=m[_],w=E7(_,g,{round:Yt.get(_)===sn?l:void 0,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,...v});if(w){let{label:k=_==="fx"||_==="fy"?d:e,percent:x,transform:S,inset:T,insetTop:E=T!==void 0?T:_==="y"?i:0,insetRight:F=T!==void 0?T:_==="x"?r:0,insetBottom:C=T!==void 0?T:_==="y"?o:0,insetLeft:L=T!==void 0?T:_==="x"?a:0}=v||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");w.percent=!!x,w.label=k===void 0?T7(g,w):k,w.transform=S,_==="x"||_==="fx"?(w.insetLeft=+L,w.insetRight=+F):(_==="y"||_==="fy")&&(w.insetTop=+E,w.insetBottom=+C),b[_]=w}}return b}function Fh(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:l,label:f}=r;e[i]=L7(r),n[i]=o,o.type=a,l!=null&&(o.interval=l),f!=null&&(o.label=f)}return n}function S7(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?Iu(e):e;r&&Lh(r,a),o&&Ih(o,a);const l=r||o?Zg(t,e):e;n&&Lh(n,l),i&&Ih(i,l)}function T7(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!Di(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function C7(t){return Math.sign(lr(t.domain()))*Math.sign(lr(t.range()))}function Iu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:l,marginRight:f,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,f),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function Zg({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Iu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:l,height:e?e.scale.bandwidth()+i+o:f,facet:{width:l,height:f}}}function Lh(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,l=o+n,f=r-a-i;t.range=[l,Math.max(l,f)],Di(t)||(t.range=Jg(t)),t.scale.range(t.range)}Kg(t)}function Ih(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,l=o+n,f=r-a-i;t.range=[Math.max(l,f),l],Di(t)?t.range.reverse():t.range=Jg(t),t.scale.range(t.range)}Kg(t)}function Kg(t){t.round===void 0&&N7(t)&&A7(t)<=30&&t.scale.round(!0)}function A7({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,l=Math.abs(i-n)/Math.max(1,a+o*2);return(l-Math.floor(l))*a}function Jg(t){const e=t.scale.domain().length+Qg(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function E7(t,e=[],n={}){const i=$7(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Di({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(Se)?Yn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Oi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Oi(i)}".`):r.some(O4)?Yn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Oi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Oi(i)}".`):r.some(U4)&&Yn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Oi(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Oi(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Zo(e,n,fn);break;case"identity":switch(Yt.get(t)){case sn:n=Zo(e,n,fn);break;case $l:n=Zo(e,n,D7);break}break;case"utc":case"time":n=Zo(e,n,E4);break}switch(i){case"diverging":return s7(t,e,n);case"diverging-sqrt":return u7(t,e,n);case"diverging-pow":return Hg(t,e,n);case"diverging-log":return c7(t,e,n);case"diverging-symlog":return h7(t,e,n);case"categorical":case"ordinal":case Do:return w7(t,e,n);case"cyclical":case"sequential":case"linear":return Z8(t,e,n);case"sqrt":return K8(t,e,n);case"threshold":return Fu(t,e,n);case"quantile":return t7(t,e,n);case"quantize":return e7(t,e,n);case"pow":return Wg(t,e,n);case"log":return J8(t,e,n);case"symlog":return Q8(t,e,n);case"utc":return y7(t,e,n);case"time":return _7(t,e,n);case"point":return v7(t,e,n);case"band":return x7(t,e,n);case"identity":return i7(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Oi(t){return typeof t=="symbol"?t.description:t}function Rh(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Ph={toString:()=>"projection"};function $7(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:l}){if(n=Rh(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=Ph);for(const s of e){const u=Rh(s.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===Ph)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const f=Yt.get(t);if(f===Co)return"sqrt";if(f===Eo||f===Ao)return"linear";if(f===$l)return"ordinal";if((i||r||[]).length>2)return Mf(f);if(i!==void 0){if(yh(i))return Mf(f);if(Se(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(yh))return Mf(f);if(s.some(Se))return"utc"}if(f===Fn){if(a!=null||X8(o))return"diverging";if(H8(o))return"categorical"}return"linear"}function Mf(t){switch(t){case sn:return"point";case Fn:return Do;default:return"ordinal"}}function Di({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Do}function Qg({type:t}){return t==="threshold"}function N7({type:t}){return t==="point"||t==="band"}function sr(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Zo(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function D7(t){return jt(t,Su)}function F7(t){return e=>{if(!Yt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function L7({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:l,pivot:f}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:to(n),...i!==void 0&&{range:to(i)},...a!==void 0&&{transform:a},...l&&{percent:l},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...f!==void 0&&{pivot:f,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function I7(t,e,n={}){let i=.5-ye,r=.5+ye,o=.5+ye,a=.5-ye;for(const{marginTop:m,marginRight:b,marginBottom:_,marginLeft:g}of e)m>i&&(i=m),b>r&&(r=b),_>o&&(o=_),g>a&&(a=g);let{margin:l,marginTop:f=l!==void 0?l:i,marginRight:s=l!==void 0?l:r,marginBottom:u=l!==void 0?l:o,marginLeft:c=l!==void 0?l:a}=n;f=+f,s=+s,u=+u,c=+c;let{width:h=640,height:p=R7(t,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,f-i+u-o)}=n;h=+h,p=+p;const d={width:h,height:p,marginTop:f,marginRight:s,marginBottom:u,marginLeft:c};if(t.fx||t.fy){let{margin:m,marginTop:b=m!==void 0?m:f,marginRight:_=m!==void 0?m:s,marginBottom:g=m!==void 0?m:u,marginLeft:v=m!==void 0?m:c}=n.facet??{};b=+b,_=+_,g=+g,v=+v,d.facet={marginTop:b,marginRight:_,marginBottom:g,marginLeft:v}}return d}function R7({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:l,marginRightDefault:f,marginBottomDefault:s,marginLeftDefault:u}){const c=n?n.scale.domain().length:1,h=q8(r);if(h){const d=i?i.scale.domain().length:1,m=(1.1*c-.1)/(1.1*d-.1)*h,b=Math.max(.1,Math.min(10,m));return Math.round((a-u-f)*b+l+s)}const p=e?Di(e)?e.scale.domain().length:Math.max(7,17/c):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const d=Oh("y",e)/(Oh("x",t)*o),m=i?i.scale.bandwidth():1,b=n?n.scale.bandwidth():1,_=m*(a-u-f)-t.insetLeft-t.insetRight;return(d*_+e.insetTop+e.insetBottom)/b+l+s}return!!(e||n)*Math.max(1,Math.min(60,p*c))*20+!!i*30+60}function Oh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const l=e.scale.exponent();r=f=>Math.pow(f,l);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=Re(i);return Math.abs(r(a)-r(o))}function P7(t,e){const{fx:n,fy:i}=Ds(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?Kb(r,o).map(([a,l],f)=>({x:a,y:l,i:f})):r?r.map((a,l)=>({x:a,i:l})):o?o.map((a,l)=>({y:a,i:l})):void 0}function O7(t,{x:e,y:n}){return e&&(e=Fs(e)),n&&(n=Fs(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Ru(t,{fx:e,fy:n}){const i=Dn(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Yi(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Yi(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Yi(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function U7(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function z7(t){const e=[],n=new Uint32Array(Zn(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const B7=new Map([["top",Sf],["right",Af],["bottom",Tf],["left",Cf],["top-left",Ko(Sf,Cf)],["top-right",Ko(Sf,Af)],["bottom-left",Ko(Tf,Cf)],["bottom-right",Ko(Tf,Af)],["top-empty",Y7],["right-empty",G7],["bottom-empty",H7],["left-empty",V7],["empty",X7]]);function q7(t){if(t==null)return null;const e=B7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Uh=new WeakMap;function Fs(t){let e=Uh.get(t);return e||Uh.set(t,e=new yi(jt(t,(n,i)=>[n,i]))),e}function oi(t,e){return Fs(t).get(e)}function W7(t,e,n){return e=hi(e),n=hi(n),t.find(i=>Object.is(hi(i.x),e)&&Object.is(hi(i.y),n))}function Ll(t,e,n){var i;return(i=W7(t,e,n))==null?void 0:i.empty}function Sf(t,{y:e},{y:n}){return e?oi(e,n)===0:!0}function Tf(t,{y:e},{y:n}){return e?oi(e,n)===e.length-1:!0}function Cf(t,{x:e},{x:n}){return e?oi(e,n)===0:!0}function Af(t,{x:e},{x:n}){return e?oi(e,n)===e.length-1:!0}function Y7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=oi(e,i);if(o>0)return Ll(t,n,e[o-1])}function H7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=oi(e,i);if(o<e.length-1)return Ll(t,n,e[o+1])}function V7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=oi(e,n);if(o>0)return Ll(t,e[o-1],i)}function G7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=oi(e,n);if(o<e.length-1)return Ll(t,e[o+1],i)}function X7(t,e,{empty:n}){return n}function Ko(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Ef(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class he{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:l,fy:f,sort:s,dx:u=0,dy:c=0,margin:h=0,marginTop:p=h,marginRight:d=h,marginBottom:m=h,marginLeft:b=h,clip:_=r==null?void 0:r.clip,channels:g,tip:v,render:w}=i;if(this.data=e,this.sort=ar(s)?s:null,this.initializer=fr(i).initializer,this.transform=this.initializer?i.transform:Nl(i).transform,o===null||o===!1?this.facet=null:(this.facet=en(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===ua&&typeof l=="string"?[l]:l,this.fy=e===ua&&typeof f=="string"?[f]:f),this.facetAnchor=q7(a),n=xg(n),g!==void 0&&(n={...j7(g),...n}),r!==void 0&&(n={...C8(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([k,x])=>{if(Cl(x.value)){const{value:S,label:T=x.label,scale:E=x.scale}=x.value;x={...x,label:T,scale:E,value:S}}if(e===ua&&typeof x.value=="string"){const{value:S}=x;x={...x,value:[S]}}return[k,x]}).filter(([k,{value:x,optional:S}])=>{if(x!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${k}`)})),this.dx=+u,this.dy=+c,this.marginTop=+p,this.marginRight=+d,this.marginBottom=+m,this.marginLeft=+b,this.clip=Lg(_),this.tip=Z7(v),this.facet==="super"){if(l||f)throw new Error("super-faceting cannot use fx or fy");for(const k in this.channels){const{scale:x}=n[k];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=e2(w,this.render))}initialize(e,n,i){let r=Ee(this.data);e===void 0&&r!=null&&(e=[Dn(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=Ee(r)),e!==void 0&&(e.original=o);const a=p8(this.channels,r);return this.sort!=null&&g8(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=Qn}=n[r];if(o!==null){const a=i[r];e=e.filter(l=>o(a[l]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&z8(r,o,n,i.projection)}}scale(e,n,i){const r=m8(e,n);return i.projection&&this.project(e,r,i),r}}function t2(...t){return t.plot=he.prototype.plot,t}function e2(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,l){return t.call(this,n,i,r,o,a,(f,s,u,c,h)=>e.call(this,f,s,u,c,h,l))}}function j7(t){return Object.fromEntries(Object.entries(xg(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:To(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function Z7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?en(t,"tip",["x","y","xy"]):t}function Il(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:ii(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const zh=new WeakMap;function Pu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:l,render:f,...s}={}){return a=+a,r!=null&&(n??(n=null),l={...l,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),l={...l,py:{value:o,scale:"y"}}),{x:n,y:i,channels:l,...s,render:e2(function(u,c,h,p,d,m){d={...d,pointerSticky:!1};const b=d.ownerSVGElement,{data:_}=d.getMarkState(this);let g=zh.get(b);g||zh.set(b,g={sticky:!1,roots:[],renders:[]});let v=g.renders.push(Q)-1;const{x:w,y:k,fx:x,fy:S}=c;let T=x?x(u.fx)-p.marginLeft:0,E=S?S(u.fy)-p.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),k!=null&&k.bandwidth&&(E+=k.bandwidth()/2);const F=u.fi!=null;let C;if(F){let q=g.facetStates;q||(g.facetStates=q=new Map),C=q.get(this),C||q.set(this,C=new Map)}const[L,R]=$o(this,p),{px:W,py:A}=h,B=W?q=>W[q]:i2(h,L),z=A?q=>A[q]:r2(h,R);let J,j,X,O;function H(q,N){if(F)if(O&&(O=cancelAnimationFrame(O)),q==null)C.delete(u.fi);else{C.set(u.fi,N),O=requestAnimationFrame(()=>{O=null;for(const[$,P]of C)if(P<N||P===N&&$<u.fi){q=null;break}Q(q)});return}Q(q)}function Q(q){if(J===q&&X===g.sticky)return;J=q,X=d.pointerSticky=g.sticky;const N=J==null?[]:[J];F&&(N.fx=u.fx,N.fy=u.fy,N.fi=u.fi);const $=m(N,c,h,p,d);if(j){if(F){const P=j.parentNode,tt=j.getAttribute("transform"),U=$.getAttribute("transform");tt?$.setAttribute("transform",tt):$.removeAttribute("transform"),U?P.setAttribute("transform",U):P.removeAttribute("transform"),$.removeAttribute("aria-label"),$.removeAttribute("aria-description"),$.removeAttribute("aria-hidden")}j.replaceWith($)}return g.roots[v]=j=$,J==null&&(C==null?void 0:C.size)>1||d.dispatchValue(J==null?null:_[J]),$}function at(q){if(g.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[N,$]=iw(q);N-=T,$-=E;const P=N<p.marginLeft||N>p.width-p.marginRight?1:t,tt=$<p.marginTop||$>p.height-p.marginBottom?1:e;let U=null,mt=a*a;for(const rt of u){const pt=P*(B(rt)-N),ft=tt*(z(rt)-$),dt=pt*pt+ft*ft;dt<=mt&&(U=rt,mt=dt)}if(U!=null&&(t!==1||e!==1)){const rt=B(U)-N,pt=z(U)-$;mt=rt*rt+pt*pt}H(U,mt)}function nt(q){q.pointerType==="mouse"&&J!=null&&(g.sticky&&g.roots.some(N=>N==null?void 0:N.contains(q.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(N=>N(null))):(g.sticky=!0,Q(J)),q.stopImmediatePropagation()))}function Z(q){q.pointerType==="mouse"&&(g.sticky||H(null))}return b.addEventListener("pointerenter",at),b.addEventListener("pointermove",at),b.addEventListener("pointerdown",nt),b.addEventListener("pointerleave",Z),Q(null)},f)}}function n2(t){return Pu(1,1,t)}function K7(t){return Pu(1,.01,t)}function Bh(t){return Pu(.01,1,t)}function i2({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function r2({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function o2(t){return Di(t)&&t.interval===void 0?void 0:"tabular-nums"}function J7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:l=0,marginBottom:f=16+i,marginLeft:s=0,style:u,ticks:c=(r-s-l)/64,tickFormat:h,fontVariant:p=o2(t),round:d=!0,opacity:m,className:b}=e;const _=Nu(e);b=Eu(b),m=ce(m)[1],h===null&&(h=()=>null);const g=Ht("svg",_).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(L=>L.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call($u,u);let v=L=>L.selectAll(".tick line").attr("y1",a+f-o),w;const k=d?(L,R)=>L.rangeRound(R):(L,R)=>L.range(R),{type:x,domain:S,range:T,interpolate:E,scale:F,pivot:C}=t;if(E){const L=T===void 0?E:ll(E.length===1?Lu(E):E,T);w=k(F.copy(),Ze(ae(s,r-l),Math.min(S.length+(C!==void 0),T===void 0?1/0:T.length)));const R=256,W=_.document.createElement("canvas");W.width=R,W.height=1;const A=W.getContext("2d");for(let B=0,z=R-1;B<R;++B)A.fillStyle=L(B/z),A.fillRect(B,0,1,1);g.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-l).attr("height",o-a-f).attr("preserveAspectRatio","none").attr("xlink:href",W.toDataURL())}else if(x==="threshold"){const L=S,R=h===void 0?W=>W:typeof h=="string"?dr(h):h;w=k(ru().domain([-1,T.length-1]),[s,r-l]),g.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",(W,A)=>w(A-1)).attr("y",a).attr("width",(W,A)=>w(A)-w(A-1)).attr("height",o-a-f).attr("fill",W=>W),c=jt(L,(W,A)=>A),h=W=>R(L[W],W)}else w=k(pl().domain(S),[s,r-l]),g.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-f).attr("fill",F),v=()=>{};return g.append("g").attr("transform",`translate(0,${o-f})`).call(w_(w).ticks(Array.isArray(c)?null:c,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(c)?c:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",re(p,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&g.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),g.node()}const a2=Math.PI/180;function Fo(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=$f(n),t.markerMid=$f(i),t.markerEnd=$f(r)}function $f(t){if(t==null||t===!1)return null;if(t===!0)return Wh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return qh("auto");case"arrow-reverse":return qh("auto-start-reverse");case"dot":return Q7;case"circle":case"circle-fill":return Wh;case"circle-stroke":return t9;case"tick":return Nf("auto");case"tick-x":return Nf(90);case"tick-y":return Nf(0)}throw new Error(`invalid marker: ${t}`)}function qh(t){return(e,n)=>Ht("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function Q7(t,e){return Ht("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Wh(t,e){return Ht("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function t9(t,e){return Ht("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Nf(t){return(e,n)=>Ht("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let e9=0;function Rl(t,e,{stroke:n},i){return l2(t,e,n&&(r=>n[r]),i)}function n9(t,e,{stroke:n},i){return l2(t,e,n&&(([r])=>n[r]),i)}function l2(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const l=new Map;function f(s){return function(u){const c=o(u);let h=l.get(s);h||l.set(s,h=new Map);let p=h.get(c);if(!p){const d=this.parentNode.insertBefore(s(c,a),this),m=`plot-marker-${++e9}`;d.setAttribute("id",m),h.set(c,p=`url(#${m})`)}return p}}e&&t.attr("marker-start",f(e)),n&&t.attr("marker-mid",f(n)),i&&t.attr("marker-end",f(i))}function Ou({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=s2(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function f2({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=s2(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function s2(t,e,n){return t===void 0&&e===void 0&&n===void 0?ye?[1,0]:[.5,.5]:[e,n]}function u2(t,{interval:e}){return t={...To(t)},t.interval=xu(t.interval===void 0?e:t.interval),t}function c2(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:l,interval:f}=u2(r,n);if(l==null||f==null&&!i)return n;const s=Ni(r);if(f==null){let p;const d={transform:m=>p||(p=ee(m,l)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?d:o,[`${t}2`]:a===void 0&&!(o===a&&i)?d:a}}let u,c;function h(p){return c!==void 0&&p===u?c:c=jt(ee(u=p,l),d=>f.floor(d))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:h,label:s}:o,[`${t}2`]:a===void 0?{transform:p=>h(p).map(d=>f.offset(d)),label:s}:a})}function h2(t,e,n){const{[t]:i}=n,{value:r,interval:o}=u2(i,n);return r==null||o==null?n:e({...n,[t]:{label:Ni(i),transform:a=>{const l=jt(ee(a,r),s=>o.floor(s)),f=l.map(s=>o.offset(s));return l.map(Se(l)?(s,u)=>s==null||isNaN(s=+s)||(u=f[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=f[u],u==null)?NaN:(+s+ +u)/2)}}})}function i9(t={}){return c2("x",Ou,t)}function d2(t={}){return c2("y",f2,t)}function r9(t={}){return h2("x",Ou,t)}function o9(t={}){return h2("y",f2,t)}const p2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class a9 extends he{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:l=a,insetBottom:f=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Il(n,"x"),p2),this.insetTop=Pt(l),this.insetBottom=Pt(f),Fo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y1:s,y2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:b}=r,{insetTop:_,insetBottom:g}=this;return Ht("svg:g",o).call(We,this,r,o).call(Ne,this,{x:f&&a},ye,0).call(v=>v.selectAll().data(e).enter().append("line").call(Ye,this).attr("x1",f?w=>f[w]:(m+c-d)/2).attr("x2",f?w=>f[w]:(m+c-d)/2).attr("y1",s&&!sr(l)?w=>s[w]+_:p+_).attr("y2",u&&!sr(l)?l.bandwidth?w=>u[w]+l.bandwidth()-g:w=>u[w]-g:h-b-g).call(Ln,this,i).call(Rl,this,i,o)).node()}}class l9 extends he{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:l=a,insetLeft:f=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},Il(n,"y"),p2),this.insetRight=Pt(l),this.insetLeft=Pt(f),Fo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{y:f,x1:s,x2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:b}=r,{insetLeft:_,insetRight:g}=this;return Ht("svg:g",o).call(We,this,r,o).call(Ne,this,{y:f&&l},0,ye).call(v=>v.selectAll().data(e).enter().append("line").call(Ye,this).attr("x1",s&&!sr(a)?w=>s[w]+_:m+_).attr("x2",u&&!sr(a)?a.bandwidth?w=>u[w]+a.bandwidth()-g:w=>u[w]-g:c-d-g).attr("y1",f?w=>f[w]:(p+h-b)/2).attr("y2",f?w=>f[w]:(p+h-b)/2).call(Ln,this,i).call(Rl,this,i,o)).node()}}function Pl(t,e){let{x:n=fe,y:i,y1:r,y2:o,...a}=d2(e);return[r,o]=m2(i,r,o),new a9(t,{...a,x:n,y1:r,y2:o})}function Uu(t,e){let{y:n=fe,x:i,x1:r,x2:o,...a}=i9(e);return[r,o]=m2(i,r,o),new l9(t,{...a,y:n,x1:r,x2:o})}function m2(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function zu(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const f9={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},g2="­";class Bu extends he{constructor(e,n={}){const{x:i,y:r,text:o=ri(e)&&vg(e)?fe:Tl,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:f=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:c,monospace:h,fontFamily:p=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:b,fontWeight:_,rotate:g}=n,[v,w]=ce(g,0),[k,x]=p9(d);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:k,optional:!0},rotate:{value:P4(v),optional:!0},text:{value:o,filter:du,optional:!0}},n,f9),this.rotate=w,this.textAnchor=re(l,"middle"),this.lineAnchor=en(f,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=b2(c),this.monospace=!!h,this.fontFamily=ue(p),this.fontSize=x,this.fontStyle=ue(m),this.fontVariant=ue(b),this.fontWeight=ue(_),this.frameAnchor=El(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=y2(this),this.clipLine=w2(this)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,rotate:u,text:c,title:h,fontSize:p}=i,{rotate:d}=this,[m,b]=$o(this,r);return Ht("svg:g",o).call(We,this,r,o).call(_2,this,c,r).call(Ne,this,{x:f&&a,y:s&&l}).call(_=>_.selectAll().data(e).enter().append("text").call(Ye,this).call(s9,this,c,h).attr("transform",zu`translate(${f?g=>f[g]:m},${s?g=>s[g]:b})${u?g=>` rotate(${u[g]})`:d?` rotate(${d})`:""}`).call(wt,"font-size",p&&(g=>p[g])).call(Ln,this,i)).node()}}function b2(t){return t==null?null:en(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function s9(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:l,clipLine:f}=e;t.each(function(s){const u=l(Ci(n[s])??"").map(f),c=u.length,h=r==="top"?.71:r==="bottom"?1-c:(164-c*100)/200;if(c>1){let p=0;for(let d=0;d<c;++d){if(++p,!u[d])continue;const m=this.ownerDocument.createElementNS(Ki.svg,"tspan");m.setAttribute("x",0),d===p-1?m.setAttribute("y",`${(h+d)*o}em`):m.setAttribute("dy",`${p*o}em`),m.textContent=u[d],this.appendChild(m),p=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const p=this.ownerDocument.createElementNS(Ki.svg,"title");p.textContent=n[s],this.appendChild(p)}})}function Ol(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=So(e,n)),new Bu(t,{...i,x:e,y:n})}function u9(t,{x:e=fe,...n}={}){return new Bu(t,o9({...n,x:e}))}function c9(t,{y:e=fe,...n}={}){return new Bu(t,r9({...n,y:e}))}function _2(t,e,n){wt(t,"text-anchor",e.textAnchor),wt(t,"font-family",e.fontFamily),wt(t,"font-size",e.fontSize),wt(t,"font-style",e.fontStyle),wt(t,"font-variant",e.fontVariant===void 0?h9(n):e.fontVariant),wt(t,"font-weight",e.fontWeight)}function h9(t){return t&&(z4(t)||Se(t))?"tabular-nums":void 0}const d9=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function p9(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),d9.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function m9(t,e,n){const i=[];let r,o=0;for(const[a,l,f]of g9(t)){if(r===void 0&&(r=a),o>r&&n(t,r,l)>e&&(i.push(t.slice(r,o)+(t[o-1]===g2?"-":"")),r=a),f){i.push(t.slice(r,l)),r=void 0;continue}o=l}return i}function*g9(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case g2:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Yh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function qu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=gr(t,r))i+=Yh[t[r]]??(x2(t,r)?120:Yh.e);return i}function Wu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=gr(t,r))i+=x2(t,r)?126:63;return i}function y2({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?Wu:qu,r=e*100;return o=>m9(o,r,i)}function w2({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?Wu:qu,r=e*100;switch(n){case"clip-start":return o=>Vh(o,r,i,"");case"clip-end":return o=>Hh(o,r,i,"");case"ellipsis-start":return o=>Vh(o,r,i,Gi);case"ellipsis-middle":return o=>b9(o,r,i,Gi);case"ellipsis-end":return o=>Hh(o,r,i,Gi)}}const Gi="…";function ur(t,e,n,i){const r=[];let o=0;for(let a=0,l=0,f=t.length;a<f;a=l){l=gr(t,a);const s=n(t,a,l);if(o+s>e){for(o+=i;o>e&&a>0;)l=a,a=r.pop(),o-=n(t,a,l);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function Hh(t,e,n,i){t=t.trim();const r=n(i),[o]=ur(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function b9(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,l]=ur(t,e/2,n,o),[f]=ur(t,r-e/2-l+o,n,-o);return f<0?i:t.slice(0,a).trimEnd()+i+t.slice(gr(t,f)).trimStart()}function Vh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=ur(t,r-e+o,n,-o);return a<0?i:i+t.slice(gr(t,a)).trimStart()}const Ls=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Gh=new RegExp("\\p{Extended_Pictographic}","uy");function gr(t,e){return e+=_9(t,e)?2:1,w9(t,e)&&(e=Ls.lastIndex),y9(t,e)?gr(t,e+1):e}function v2(t,e){return t.charCodeAt(e)<128}function _9(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function y9(t,e){return t.charCodeAt(e)===8205}function w9(t,e){return v2(t,e)?!1:(Ls.lastIndex=e,Ls.test(t))}function x2(t,e){return v2(t,e)?!1:(Gh.lastIndex=e,Gh.test(t))}const v9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},k2=3.5,x9=k2*5,M2={draw(t,e,n){const i=e*n/x9;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},k9={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},M9=new Map([["arrow",M2],["spike",k9]]);function S9(t){return t&&typeof t.draw=="function"}function T9(t){if(S9(t))return t;const e=M9.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class S2 extends he{constructor(e,n={}){const{x:i,y:r,r:o=k2,length:a,rotate:l,shape:f=M2,anchor:s="middle",frameAnchor:u}=n,[c,h]=ce(a,12),[p,d]=ce(l,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,v9),this.r=+o,this.length=h,this.rotate=d,this.shape=T9(f),this.anchor=en(s,"anchor",["start","middle","end"]),this.frameAnchor=El(u)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,length:u,rotate:c}=i,{length:h,rotate:p,anchor:d,shape:m,r:b}=this,[_,g]=$o(this,r);return Ht("svg:g",o).call(We,this,r,o).call(Ne,this,{x:f&&a,y:s&&l}).call(v=>v.selectAll().data(e).enter().append("path").call(Ye,this).attr("transform",zu`translate(${f?w=>f[w]:_},${s?w=>s[w]:g})${c?w=>` rotate(${c[w]})`:p?` rotate(${p})`:""}${d==="start"?"":d==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const k=Bn();return m.draw(k,u[w],b),k}:(()=>{const w=Bn();return m.draw(w,h,b),w})()).call(Ln,this,i)).node()}}function C9(t,e={}){const{x:n=fe,...i}=e;return new S2(t,{...i,x:n})}function A9(t,e={}){const{y:n=fe,...i}=e;return new S2(t,{...i,y:n})}function ai(t,e){return arguments.length<2&&!ri(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Ul({anchor:t}={},e){return t===void 0?e[0]:en(t,"anchor",e)}function T2(t){return Ul(t,["left","right"])}function C2(t){return Ul(t,["right","left"])}function A2(t){return Ul(t,["bottom","top"])}function E2(t){return Ul(t,["top","bottom"])}function $2(){const[t,e]=ai(...arguments);return D2("y",T2(e),t,e)}function E9(){const[t,e]=ai(...arguments);return D2("fy",C2(e),t,e)}function N2(){const[t,e]=ai(...arguments);return F2("x",A2(e),t,e)}function $9(){const[t,e]=ai(...arguments);return F2("fx",E2(e),t,e)}function D2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="y"?6:0,tickPadding:m,tickRotate:b,x:_,margin:g,marginTop:v=g===void 0?20:g,marginRight:w=g===void 0?e==="right"?40:0:g,marginBottom:k=g===void 0?20:g,marginLeft:x=g===void 0?e==="left"?40:0:g,label:S,labelAnchor:T,labelArrow:E,labelOffset:F,...C}){return d=Pt(d),m=Pt(m),b=Pt(b),T!==void 0&&(T=en(T,"labelAnchor",["center","top","bottom"])),E=B2(E),t2(d&&!be(o)?N9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:b,x:_,...C}):null,be(f)?null:F9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:b,x:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...C}),!be(f)&&S!==null?Ol([],P2({fill:f,fillOpacity:s,...C},function(L,R,W,A,B){const z=A[t],{marginTop:J,marginRight:j,marginBottom:X,marginLeft:O}=t==="y"&&B.inset||B,H=T??(z.bandwidth?"center":"top"),Q=F??(e==="right"?j:O)-3;return H==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=H,this.frameAnchor=`${H}-${e}`,this.rotate=0),this.dy=H==="top"?3-J:H==="bottom"?X-3:0,this.dx=e==="right"?Q:-Q,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[z2(t,z,{anchor:e,label:S,labelAnchor:H,labelArrow:E})]}}}})):null)}function F2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="x"?6:0,tickPadding:m,tickRotate:b,y:_,margin:g,marginTop:v=g===void 0?e==="top"?30:0:g,marginRight:w=g===void 0?20:g,marginBottom:k=g===void 0?e==="bottom"?30:0:g,marginLeft:x=g===void 0?20:g,label:S,labelAnchor:T,labelArrow:E,labelOffset:F,...C}){return d=Pt(d),m=Pt(m),b=Pt(b),T!==void 0&&(T=en(T,"labelAnchor",["center","left","right"])),E=B2(E),t2(d&&!be(o)?D9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:b,y:_,...C}):null,be(f)?null:L9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:b,y:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...C}),!be(f)&&S!==null?Ol([],P2({fill:f,fillOpacity:s,...C},function(L,R,W,A,B){const z=A[t],{marginTop:J,marginRight:j,marginBottom:X,marginLeft:O}=t==="x"&&B.inset||B,H=T??(z.bandwidth?"center":"right"),Q=F??(e==="top"?J:X)-3;return H==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${H}`,this.textAnchor=H==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-Q:Q,this.dx=H==="right"?j-3:H==="left"?3-O:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[z2(t,z,{anchor:e,label:S,labelAnchor:H,labelArrow:E})]}}}})):null)}function N9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetLeft:u=s,insetRight:c=s,dx:h=0,y:p=t==="y"?void 0:null,...d}){return br(A9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:l,y:p,...d,dx:e==="left"?+h-ye+ +u:+h+ye-c,anchor:"start",length:f,shape:e==="left"?q9:W9})}function D9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetTop:u=s,insetBottom:c=s,dy:h=0,x:p=t==="x"?void 0:null,...d}){return br(C9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:l,x:p,...d,dy:e==="bottom"?+h-ye-c:+h+ye+ +u,anchor:"start",length:f,shape:e==="bottom"?z9:B9})}function F9(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*a2):0),text:f,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:c,inset:h=0,insetLeft:p=h,insetRight:d=h,dx:m=0,y:b=t==="y"?void 0:null,..._}){return br(c9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,y:b,..._,dx:e==="left"?+m-o-l+ +p:+m+ +o+ +l-d},function(g,v,w,k,x){c===void 0&&(this.fontVariant=U2(g)),f===void 0&&(x.text=O2(g,v,w,k,e))})}function L9(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*a2):0),text:f,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:c,inset:h=0,insetTop:p=h,insetBottom:d=h,dy:m=0,x:b=t==="x"?void 0:null,..._}){return br(u9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f===void 0?null:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,x:b,..._,dy:e==="bottom"?+m+ +o+ +l-d:+m-o-l+ +p},function(g,v,w,k,x){c===void 0&&(this.fontVariant=U2(g)),f===void 0&&(x.text=O2(g,v,w,k,e))})}function I9(){const[t,e]=ai(...arguments);return L2("y",T2(e),t,e)}function R9(){const[t,e]=ai(...arguments);return L2("fy",C2(e),t,e)}function P9(){const[t,e]=ai(...arguments);return I2("x",A2(e),t,e)}function O9(){const[t,e]=ai(...arguments);return I2("fx",E2(e),t,e)}function L2(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...l}){return br(Uu,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...R2(l)})}function I2(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...l}){return br(Pl,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...R2(l)})}function R2({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function P2({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u=!1},c){return[,t]=Nn(t),[,e]=ce(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u,initializer:c}}function br(t,e,n,i,r,o,a){let l;function f(c,h,p,d,m,b){const _=c==null&&(e==="fx"||e==="fy"),{[e]:g}=d;if(!g)throw new Error(`missing scale: ${e}`);const v=g.domain();let{interval:w,ticks:k,tickFormat:x,tickSpacing:S=e==="x"?80:35}=o;if(typeof k=="string"&&q2(g)&&(w=k,k=void 0),k===void 0&&(k=mr(w,g.type)??U9(g,S)),c==null){if(ri(k))c=Ee(k);else if(qi(k))c=Df(k,...Re(v));else if(g.interval){let E=g.interval;if(g.ticks){const[F,C]=Re(v),L=(C-F)/E[ko];E=mh(E,L/k)??E,c=Df(E,F,C)}else{c=v;const F=c.length;E=mh(E,F/k)??E,E!==g.interval&&(c=Df(E,...Re(c)))}if(E===g.interval){const F=Math.round(c.length/k);F>1&&(c=c.filter((C,L)=>L%F===0))}}else g.ticks?c=g.ticks(k):c=v;if(!g.ticks&&c.length&&c!==v){const E=new tl(v);c=c.filter(F=>E.has(F)),c.length||Yn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?h=[Dn(c)]:l[e]={scale:e,value:fe}}a==null||a.call(this,g,c,k,x,l);const T=Object.fromEntries(Object.entries(l).map(([E,F])=>[E,{...F,value:ee(c,F.value)}]));return _&&(h=b.filterFacets(c,T)),{data:c,facets:h,channels:T}}const s=fr(o).initializer,u=t(r,fr({...o,initializer:f},s));return r==null?(l=u.channels,u.channels={}):l={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function U9(t,e){const[n,i]=Re(t.range());return(i-n)/e}function O2(t,e,n,i,r){return{value:Yu(t,e,n,i,r)}}function Yu(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&Se(e)?x4(t.type,e,r)??Ci:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?Ci:typeof i=="string"?(Se(t.domain())?vo:dr)(i):Mo(i)}function Df(t,e,n){return t.range(e,t.offset(t.floor(n)))}const z9={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},B9={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},q9={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},W9={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function U2(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function z2(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&q2(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!o)return i;if(o===!0){const a=C7(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function B2(t="auto"){return be(t)?!1:typeof t=="boolean"?t:en(t,"labelArrow",["auto","up","right","down","left"])}function q2(t){return Se(t.domain())}function Xh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function Y9(t,{opacity:e,...n}={}){if(!Di(t)&&!Qg(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return W2(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",ce(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function H9(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:be(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...l}={},f){const[c,h]=Nn(e),[p,d]=Nn(i),m=Xh(f,c),b=Xh(f,p),_=a*a*Math.PI;return n=ce(n)[1],r=ce(r)[1],o=ce(o)[1],W2(t,l,(g,v,w,k)=>g.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",k).attr("fill",c==="color"?x=>m.scale(x):h).attr("fill-opacity",n).attr("stroke",p==="color"?x=>b.scale(x):d).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",x=>{const S=Bn();return t.scale(x).draw(S,_),S}))}function W2(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=o2(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:f=a,marginLeft:s=0,className:u,style:c,width:h}=e;const p=Nu(e);u=Eu(u),r=Yu(t.scale,t.domain,void 0,r);const d=Ht("div",p).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,l,f).call(b=>b.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,l,f).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),d.call(b=>b.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",re(o,"normal")).call($u,c).node()}const Is=new Map([["symbol",H9],["color",H2],["opacity",G9]]);function V9(t,e,n={}){return(i,r)=>{if(!Is.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return Is.get(i)(t[i],Y2(e,n[i],r),o=>t[o])}}function Y2({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return Y4(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function H2(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return Y9(t,n);case"ramp":return J7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function G9({type:t,interpolate:e,...n},{legend:i=!0,color:r=Kn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return H2({type:t,...n,interpolate:X9(r)},{legend:i,...o})}function X9(t){const{r:e,g:n,b:i}=Kn(t)||Kn(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function j9(t,e,n){const i=[];for(const[r,o]of Is){const a=n[r];if(a!=null&&a.legend&&r in t){const l=o(t[r],Y2(e,t[r],a),f=>t[f]);l!=null&&i.push(l)}}return i}const Z9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},K9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class J9 extends he{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:l=i,rx:f,ry:s}=e;super(ua,void 0,e,n==null?Z9:K9),this.anchor=bg(n,"anchor",["top","right","bottom","left"]),this.insetTop=Pt(r),this.insetRight=Pt(o),this.insetBottom=Pt(a),this.insetLeft=Pt(l),this.rx=Pt(f),this.ry=Pt(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:l,marginBottom:f,marginLeft:s,width:u,height:c}=r,{anchor:h,insetTop:p,insetRight:d,insetBottom:m,insetLeft:b,rx:_,ry:g}=this,v=s+b,w=u-l-d,k=a+p,x=c-f-m;return Ht(h?"svg:line":"svg:rect",o).datum(0).call(We,this,r,o).call(Ye,this).call(Ln,this,i).call(Ne,this,{}).call(h==="left"?S=>S.attr("x1",v).attr("x2",v).attr("y1",k).attr("y2",x):h==="right"?S=>S.attr("x1",w).attr("x2",w).attr("y1",k).attr("y2",x):h==="top"?S=>S.attr("x1",v).attr("x2",w).attr("y1",k).attr("y2",k):h==="bottom"?S=>S.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):S=>S.attr("x",v).attr("y",k).attr("width",w-v).attr("height",x-k).attr("rx",_).attr("ry",g)).node()}}function Q9(t){return new J9(t)}const Ff={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},tx=new Set(["geometry","href","src","ariaLabel","scales"]);class ex extends he{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ri(e)&&vg(e)&&(n={...n,title:fe});const{x:i,y:r,x1:o,x2:a,y1:l,y2:f,anchor:s,preferredAnchor:u="bottom",monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:d,fontVariant:m,fontWeight:b,lineHeight:_=1,lineWidth:g=20,frameAnchor:v,format:w,textAnchor:k="start",textOverflow:x,textPadding:S=8,title:T,pointerSize:E=12,pathFilter:F="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:l!=null&&f!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:f==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:f,scale:"y",optional:l==null},title:{value:T,optional:!0}},n,Ff),this.anchor=As(s,"anchor"),this.preferredAnchor=As(u,"preferredAnchor"),this.frameAnchor=El(v),this.textAnchor=re(k,"middle"),this.textPadding=+S,this.pointerSize=+E,this.pathFilter=ue(F),this.lineHeight=+_,this.lineWidth=+g,this.textOverflow=b2(x),this.monospace=!!c,this.fontFamily=ue(h),this.fontSize=Pt(p),this.fontStyle=ue(d),this.fontVariant=ue(m),this.fontWeight=ue(b);for(const C in Ff)C in this.channels&&(this[C]=Ff[C]);this.splitLines=y2(this),this.clipLine=w2(this),this.format={...w}}render(e,n,i,r,o){const a=this,{x:l,y:f,fx:s,fy:u}=n,{ownerSVGElement:c,document:h}=o,{anchor:p,monospace:d,lineHeight:m,lineWidth:b}=this,{textPadding:_,pointerSize:g,pathFilter:v}=this,{marginTop:w,marginLeft:k}=r,{x1:x,y1:S,x2:T,y2:E,x:F=x??T,y:C=S??E}=i,L=s?s(e.fx)-k:0,R=u?u(e.fy)-w:0,[W,A]=$o(this,r),B=i2(i,W),z=r2(i,A),J=d?Wu:qu,j=J(Gi);let X,O;"title"in i?(X=i.channels,O=ax):(X=ox.call(this,i,n),O=lx);const H=Ht("svg:g",o).call(We,this,r,o).call(_2,this).call(Ne,this,{x:F&&l,y:C&&f}).call(nt=>nt.selectAll().data(e).enter().append("g").attr("transform",Z=>`translate(${Math.round(B(Z))},${Math.round(z(Z))})`).call(Ye,this).call(Z=>Z.append("path").attr("filter",v)).call(Z=>Z.append("text").each(function(q){const N=Pr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const $=O.call(a,q,e,X,n,i);if(typeof $=="string")for(const P of a.splitLines($))Q(N,{value:a.clipLine(P)});else{const P=new Set;for(const tt of $){const{label:U=""}=tt;U&&P.has(U)||(P.add(U),Q(N,tt))}}})));function Q(nt,{label:Z,value:q,color:N,opacity:$}){Z??(Z=""),q??(q="");const P=N!=null||$!=null;let tt,U=b*100;const[mt]=ur(Z,U,J,j);if(mt>=0)Z=Z.slice(0,mt).trimEnd()+Gi,tt=q.trim(),q="";else{(Z||!q&&!P)&&(q=" "+q);const[pt]=ur(q,U-J(Z),J,j);pt>=0&&(tt=q.trim(),q=q.slice(0,pt).trimEnd()+Gi)}const rt=nt.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");Z&&rt.append("tspan").attr("font-weight","bold").text(Z),q&&rt.append(()=>h.createTextNode(q)),P&&rt.append("tspan").text(" ■").attr("fill",N).attr("fill-opacity",$).style("user-select","none"),tt&&rt.append("title").text(tt)}function at(){const{width:nt,height:Z}=r.facet??r;H.selectChildren().each(function(q){let{x:N,width:$,height:P}=this.getBBox();$=Math.round($),P=Math.round(P);let tt=p;if(tt===void 0){const rt=B(q)+L,pt=z(q)+R,ft=rt+$+g+_*2<nt,dt=rt-$-g-_*2>0,Rt=pt+P+g+_*2<Z,Et=pt-P-g-_*2>0;tt=ft&&dt?Rt&&Et?a.preferredAnchor:Et?"bottom":"top":Rt&&Et?ft?"left":"right":(ft||dt)&&(Rt||Et)?`${Et?"bottom":"top"}-${ft?"left":"right"}`:a.preferredAnchor}const U=this.firstChild,mt=this.lastChild;if(U.setAttribute("d",rx(tt,g,_,$,P)),N)for(const rt of mt.childNodes)rt.setAttribute("x",-N);mt.setAttribute("y",`${+nx(tt,mt.childNodes.length,m).toFixed(6)}em`),mt.setAttribute("transform",`translate(${ix(tt,g,_,$,P)})`)}),H.attr("visibility",null)}return e.length&&(H.attr("visibility","hidden"),c.isConnected?Promise.resolve().then(at):typeof requestAnimationFrame<"u"&&requestAnimationFrame(at)),H.node()}}function V2(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=So(e,n)),new ex(t,{...i,x:e,y:n})}function nx(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function ix(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function rx(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function ox({channels:t},e){var r,o;const n={};let i=this.format;i=jh(i,t,"x"),i=jh(i,t,"y"),this.format=i;for(const a in i){const l=i[a];if(!(l===null||l===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const f=Mh(t,a);f&&(n[a]=f)}}for(const a in t){if(a in n||a in i||tx.has(a))continue;const l=Mh(t,a);l&&(n[a]=l)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const l=this.format[a];if(typeof l=="string"){const f=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(Se(f)?vo:dr)(l)}else if(l===void 0||l===!0){const f=e[a];this.format[a]=f!=null&&f.bandwidth?Yu(f,f.domain()):Ci}}return n}function jh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([l])=>l===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function ax(t,e,{title:n}){return Ci(n.value[t],t)}function*lx(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:ja(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Kh(i,n,"x"),value:Zh(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Kh(i,n,"y"),value:Zh(this.format.y2,n.y1,a,t)};else{const l=a.value[t],f=a.scale;if(!Qn(l)&&f==null)continue;yield{label:ja(i,n,o),value:this.format[o](l,t),color:f==="color"?r[o][t]:null,opacity:f==="opacity"?r[o][t]:null}}}}function Zh(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}–${t(n.value[i],i)}`}function Kh(t,e,n){const i=ja(t,e,`${n}1`,n),r=ja(t,e,`${n}2`,n);return i===r?i:`${i}–${r}`}function ja(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function De(t={}){var j;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:l}=t,f=Eu(t.className),s=t.marks===void 0?[]:Qh(t.marks);s.push(...mx(s));const u=dx(e,t),c=new Map;for(const X of s){const O=td(X,u,t);O&&c.set(X,O)}const h=new Map;u&&Tr(h,[u],t),Tr(h,c,t);const p=Qh(gx(s,h,t));for(const X of p){const O=td(X,u,t);O&&c.set(X,O)}s.unshift(...p);let d=P7(h,t);if(d!==void 0){const X=u?Ef(d,u):void 0;for(const H of s){if(H.facet===null||H.facet==="super")continue;const Q=c.get(H);Q!==void 0&&(Q.facetsIndex=H.fx!=null||H.fy!=null?Ef(d,Q):X)}const O=new Set;for(const{facetsIndex:H}of c.values())H==null||H.forEach((Q,at)=>{(Q==null?void 0:Q.length)>0&&O.add(at)});d.forEach(0<O.size&&O.size<d.length?(H,Q)=>H.empty=!O.has(Q):H=>H.empty=!1);for(const H of s)if(H.facet==="exclude"){const Q=c.get(H);Q!==void 0&&(Q.facetsIndex=z7(Q.facetsIndex))}}for(const X of Yt.keys())Ts(t[X])&&X!=="fx"&&X!=="fy"&&h.set(X,[]);const m=new Map;for(const X of s){if(m.has(X))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:O,channels:H}=c.get(X)??{},{data:Q,facets:at,channels:nt}=X.initialize(O,H,t);Hu(nt,t),m.set(X,{data:Q,facets:at,channels:nt})}const b=Ds(Tr(h,m,t),t),_=I7(b,s,t);S7(b,_);const g=Fh(b),{fx:v,fy:w}=g,k=v||w?Zg(b,_):_,x=v||w?kx(g,_):_,S=Nu(t),T=S.document,E=rl("svg").call(T.documentElement);let F=E;S.ownerSVGElement=E,S.className=f,S.projection=P8(t,k),S.filterFacets=(X,O)=>Ef(d,{channels:O,groups:Ru(X,O)}),S.getMarkState=X=>{const O=m.get(X),H=c.get(X);return{...O,channels:{...O.channels,...H==null?void 0:H.channels}}},S.dispatchValue=X=>{F.value!==X&&(F.value=X,F.dispatchEvent(new Event("input",{bubbles:!0})))};const C=new Set;for(const[X,O]of m)if(X.initializer!=null){const H=X.facet==="super"?x:k,Q=X.initializer(O.data,O.facets,O.channels,g,H,S);if(Q.data!==void 0&&(O.data=Q.data),Q.facets!==void 0&&(O.facets=Q.facets),Q.channels!==void 0){const{fx:at,fy:nt,...Z}=Q.channels;hx(Z),Object.assign(O.channels,Z);for(const q of Object.values(Z)){const{scale:N}=q;N!=null&&!V4(Yt.get(N))&&(G2(q,t),C.add(N))}(at!=null||nt!=null)&&c.set(X,!0)}}if(C.size){const X=new Map;Tr(X,m,t,at=>C.has(at)),Tr(h,m,t,at=>C.has(at));const O=xx(Ds(X,t),b),{scales:H,...Q}=Fh(O);Object.assign(b,O),Object.assign(g,Q),Object.assign(g.scales,H)}let L,R;d!==void 0&&(L={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},d=O7(d,L),R=U7(v,w,_));for(const[X,O]of m)O.values=X.scale(O.channels,g,S);const{width:W,height:A}=_;Pr(E).attr("class",f).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",W).attr("height",A).attr("viewBox",`0 0 ${W} ${A}`).attr("aria-label",a).attr("aria-description",l).call(X=>X.append("style").text(`:where(.${f}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${f} text),
:where(.${f} tspan) {
  white-space: pre;
}`)).call($u,n);for(const X of s){const{channels:O,values:H,facets:Q}=m.get(X);if(d===void 0||X.facet==="super"){let at=null;if(Q&&(at=Q[0],at=X.filter(at,O,H),at.length===0))continue;const nt=X.render(at,g,H,x,S);if(nt==null)continue;E.appendChild(nt)}else{let at;for(const nt of d){if(!(((j=X.facetAnchor)==null?void 0:j.call(X,d,L,nt))??!nt.empty))continue;let Z=null;if(Q){const N=c.has(X);if(Z=Q[N?nt.i:0],Z=X.filter(Z,O,H),Z.length===0)continue;!N&&Z===Q[0]&&(Z=F4(Z)),Z.fx=nt.x,Z.fy=nt.y,Z.fi=nt.i}const q=X.render(Z,g,H,k,S);if(q!=null){(at??(at=Pr(E).append("g"))).append(()=>q).datum(nt);for(const N of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(N)&&(at.attr(N,q.getAttribute(N)),q.removeAttribute(N))}}at==null||at.selectChildren().attr("transform",R)}}const B=j9(b,S,t),{figure:z=i!=null||r!=null||o!=null||B.length>0}=t;z&&(F=T.createElement("figure"),F.className=`${f}-figure`,F.style.maxWidth="initial",i!=null&&F.append(Jh(T,i,"h2")),r!=null&&F.append(Jh(T,r,"h3")),F.append(...B,E),o!=null&&F.append(fx(T,o))),F.scale=F7(g.scales),F.legend=V9(b,S,t);const J=S8();return J>0&&Pr(E).append("text").attr("x",W).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${J.toLocaleString("en-US")} warning${J===1?"":"s"}. Please check the console.`),F}function Jh(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function fx(t,e){const n=t.createElement("figcaption");return n.append(e),n}function sx({marks:t=[],...e}={}){return De({...e,marks:[...t,this]})}he.prototype.plot=sx;function Qh(t){return t.flat(1/0).filter(e=>e!=null).map(ux)}function ux(t){return typeof t.render=="function"?t:new cx(t)}class cx extends he{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Hu(t,e){for(const n in t)G2(t[n],e);return t}function G2(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:l=o?f=>f*100:wg(a,r)}=e[n]??{};l!=null&&(t.value=jt(t.value,l),t.transform=!1)}function hx(t){for(const e in t)Eg(e,t[e])}function Tr(t,e,n,i=C4){var r,o;for(const{channels:a}of e.values())for(const l in a){const f=a[l],{scale:s}=f;if(s!=null&&i(s))if(s==="projection"){if(!B8(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,c=((o=n.y)==null?void 0:o.domain)===void 0;if(u||c){const[h,p]=W8(f);u&&Lf(t,"x",h),c&&Lf(t,"y",p)}}}else Lf(t,s,f)}return t}function Lf(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function dx(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=Ee(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=no(r,{value:n,scale:"fx"})),i!=null&&(o.fy=no(r,{value:i,scale:"fy"})),Hu(o,e);const a=Ru(r,o);return{channels:o,groups:a,data:t.data}}function td(t,e,n){var f;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=Ee(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=no(s,{value:i,scale:"fx"})),r!=null&&(u.fy=no(s,{value:r,scale:"fy"})),Hu(u,n),{channels:u,groups:Ru(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:o,groups:a};l.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((f=Ee(t.data))==null?void 0:f.length)===l.length&&Yn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function px(t,e={}){return fr({...e,x:null,y:null},(n,i,r,o,a,l)=>l.getMarkState(t))}function mx(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?K7:/^y$/i.test(r)?Bh:n2,i=r(px(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===Bh?"left":"bottom");const a=V2(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function gx(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:l={},axis:f,grid:s,facet:u={},facet:{axis:c=f,grid:h}=u,x:{axis:p=f,grid:d=p===null?null:s}=r,y:{axis:m=f,grid:b=m===null?null:s}=o,fx:{axis:_=c,grid:g=_===null?null:h}=a,fy:{axis:v=c,grid:w=v===null?null:h}=l}=n;(i||!Ts(r)&&!ed("x",t))&&(p=d=null),(i||!Ts(o)&&!ed("y",t))&&(m=b=null),e.has("fx")||(_=g=null),e.has("fy")||(v=w=null),p===void 0&&(p=!ta(t,"x")),m===void 0&&(m=!ta(t,"y")),_===void 0&&(_=!ta(t,"fx")),v===void 0&&(v=!ta(t,"fy")),p===!0&&(p="bottom"),m===!0&&(m="left"),_===!0&&(_=p==="top"||p===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const k=[];return Qo(k,w,R9,l),Jo(k,v,E9,"right","left",u,l),Qo(k,g,O9,a),Jo(k,_,$9,"top","bottom",u,a),Qo(k,b,I9,o),Jo(k,m,$2,"left","right",n,o),Qo(k,d,P9,r),Jo(k,p,N2,"bottom","top",n,r),k}function Jo(t,e,n,i,r,o,a){if(!e)return;const l=bx(e);a=_x(l?i:e,o,a);const{line:f}=a;(n===$2||n===N2)&&f&&!eo(f)&&t.push(Q9(yx(a))),t.push(n(a)),l&&t.push(n({...a,anchor:r,label:null}))}function Qo(t,e,n,i){!e||eo(e)||t.push(n(wx(e,i)))}function bx(t){return/^\s*both\s*$/i.test(t)}function _x(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h=e.label,labelAnchor:p,labelArrow:d=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h,labelAnchor:p,labelArrow:d,labelOffset:m}}function yx(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function wx(t,{stroke:e=Al(t)?t:void 0,ticks:n=vx(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function vx(t){switch(typeof t){case"number":return!0;case"string":return!Al(t)}return ri(t)||typeof(t==null?void 0:t.range)=="function"}function ta(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function ed(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function xx(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function kx({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Iu(n),s=t&&nd(t),u=e&&nd(e);return{marginTop:e?u[0]:i,marginRight:t?l-s[1]:r,marginBottom:e?f-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:f}}function nd(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const Mx=new Map([["basis",Q5],["basis-closed",t4],["basis-open",e4],["bundle",n4],["bump-x",q5],["bump-y",W5],["cardinal",i4],["cardinal-closed",r4],["cardinal-open",o4],["catmull-rom",a4],["catmull-rom-closed",l4],["catmull-rom-open",f4],["linear",xo],["linear-closed",s4],["monotone-x",u4],["monotone-y",c4],["natural",h4],["step",d4],["step-after",m4],["step-before",p4]]);function X2(t=xo,e){if(typeof t=="function")return t;const n=Mx.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function j2(t=cr,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?cr:X2(t,e)}function cr(t){return xo(t)}function Sx(t={y:"count"},e={}){[t,e]=Ax(t,e);const{x:n,y:i}=e;return Cx(Ex(n,e,fe),null,null,i,t,Ou(e))}function Tx(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=Au}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function Z2(t={}){return Tx(Sx,"y",Il(t,"x"))}function Cx(t,e,n,i,{data:r=Ag,filter:o=Xa,sort:a,reverse:l,...f}={},s={}){t=id(t),e=id(e),f=Nx(f,s),r=Q2(r,fe),a=a==null?void 0:K2("sort",a,s),o=o==null?void 0:J2("filter",o,s),n!=null&&Xo(f,"x","x1","x2")&&(n=null),i!=null&&Xo(f,"y","y1","y2")&&(i=null);const[u,c]=vn(t),[h,p]=vn(t),[d,m]=vn(e),[b,_]=vn(e),[g,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,k]=vn(g),{x,y:S,z:T,fill:E,stroke:F,x1:C,x2:L,y1:R,y2:W,domain:A,cumulative:B,thresholds:z,interval:J,...j}=s,[X,O]=vn(T),[H]=Nn(E),[Q]=Nn(F),[at,nt]=vn(H),[Z,q]=vn(Q);return{..."z"in s&&{z:X||T},..."fill"in s&&{fill:at||E},..."stroke"in s&&{stroke:Z||F},...Nl(j,(N,$,P)=>{const tt=yg(ee(N,g),P==null?void 0:P[v]),U=ee(N,T),mt=ee(N,H),rt=ee(N,Q),pt=a8(f,{z:U,fill:mt,stroke:rt}),ft=[],dt=[],Rt=tt&&k([]),Et=U&&O([]),Nt=mt&&nt([]),yt=rt&&q([]),Vt=t&&c([]),Fe=t&&p([]),Dt=e&&m([]),Gl=e&&_([]),In=Lx(t,e,N);let ie=0;for(const de of f)de.initialize(N);a&&a.initialize(N),o&&o.initialize(N);for(const de of $){const Ft=[];for(const li of f)li.scope("facet",de);a&&a.scope("facet",de),o&&o.scope("facet",de);for(const[li,et]of wh(de,pt))for(const[bt,Tt]of wh(et,tt))for(const[Te,nn]of In(Tt))if(!(o&&!o.reduce(Te,nn))){Ft.push(ie++),dt.push(r.reduceIndex(Te,N,nn)),tt&&Rt.push(bt),U&&Et.push(pt===U?li:U[(Te.length>0?Te:Tt)[0]]),mt&&Nt.push(pt===mt?li:mt[(Te.length>0?Te:Tt)[0]]),rt&&yt.push(pt===rt?li:rt[(Te.length>0?Te:Tt)[0]]),Vt&&(Vt.push(nn.x1),Fe.push(nn.x2)),Dt&&(Dt.push(nn.y1),Gl.push(nn.y2));for(const Lo of f)Lo.reduce(Te,nn);a&&a.reduce(Te)}ft.push(Ft)}return l8(ft,a,l),{data:dt,facets:ft}}),...!Xo(f,"x")&&(u?{x1:u,x2:h,x:Cs(u,h)}:{x,x1:C,x2:L}),...!Xo(f,"y")&&(d?{y1:d,y2:b,y:Cs(d,b)}:{y:S,y1:R,y2:W}),...w&&{[v]:w},...Object.fromEntries(f.map(({name:N,output:$})=>[N,$]))}}function Ax({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function Ex(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...To(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=$x(t.thresholds,t.interval),t}function id(t){if(t==null)return;const{value:e,cumulative:n,domain:i=Re,thresholds:r}=t,o=a=>{let l=ee(a,e),f;if(Se(l)||Fx(r)){l=jt(l,gg,Float64Array);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!qi(r)?r(l,u,c):r;typeof h=="number"&&(h=pp(u,c,h)),qi(h)&&(i===Re&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c))),f=h}else{l=fn(l);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!qi(r)?r(l,u,c):r;if(typeof h=="number")if(i===Re){let p=ga(u,c,h);if(isFinite(p))if(p>0){let d=Math.round(u/p),m=Math.round(c/p);d*p<=u||--d,m*p>c||++m;let b=m-d+1;h=new Float64Array(b);for(let _=0;_<b;++_)h[_]=(d+_)*p}else if(p<0){p=-p;let d=Math.round(u*p),m=Math.round(c*p);d/p<=u||--d,m/p>c||++m;let b=m-d+1;h=new Float64Array(b);for(let _=0;_<b;++_)h[_]=(d+_)/p}else h=[u];else h=[u]}else h=Yr(u,c,h);else qi(h)&&(i===Re&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c)));f=h}const s=[];if(f.length===1)s.push([f[0],f[0]]);else for(let u=1;u<f.length;++u)s.push([f[u-1],f[u]]);return s.bin=(n<0?Rx:n>0?Ix:Vu)(s,f,l),s};return o.label=Ni(e),o}function $x(t,e,n=rd){if(t===void 0)return e===void 0?n:mr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return f_;case"scott":return T0;case"sturges":return r_;case"auto":return rd}return bu(t)}return t}function Nx(t,e){return i8(t,e,K2)}function K2(t,e,n){return Tg(t,e,n,J2)}function J2(t,e,n){return Cg(t,e,n,Q2)}function Q2(t,e){return Cu(t,e,Dx)}function Dx(t){switch(`${t}`.toLowerCase()){case"x":return Px;case"x1":return Ux;case"x2":return zx;case"y":return Ox;case"y1":return Bx;case"y2":return qx}throw new Error(`invalid bin reduce: ${t}`)}function rd(t,e,n){return Math.min(200,T0(t,e,n))}function Fx(t){return R4(t)||ri(t)&&Se(t)}function Lx(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries()){const u=r.bin(a[l]);for(const[c,[h,p]]of r.entries())yield[u[c],{data:n,x1:f,y1:h,x2:s,y2:p}]}}:i?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries())yield[a[l],{data:n,x1:f,x2:s}]}:function*(o){const a=r.bin(o);for(const[l,[f,s]]of r.entries())yield[a[l],{data:n,y1:f,y2:s}]}}function Vu(t,e,n){return e=fn(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[Qa(e,n[a])-1])==null||o.push(a);return r}}function Ix(t,e,n){const i=Vu(t,e,n);return r=>{const o=i(r);for(let a=1,l=o.length;a<l;++a){const f=o[a-1],s=o[a];for(const u of f)s.push(u)}return o}}function Rx(t,e,n){const i=Vu(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const l=o[a+1],f=o[a];for(const s of l)f.push(s)}return o}}function tb(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const Px={reduceIndex(t,e,{x1:n,x2:i}){return tb(n,i)}},Ox={reduceIndex(t,e,{y1:n,y2:i}){return tb(n,i)}},Ux={reduceIndex(t,e,{x1:n}){return n}},zx={reduceIndex(t,e,{x2:n}){return n}},Bx={reduceIndex(t,e,{y1:n}){return n}},qx={reduceIndex(t,e,{y2:n}){return n}};function eb(t={}){return _g(t)?t:{...t,y:fe}}function Wx(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const l of e)for(const f of l)i[f]&&++r,i[f]=1;if(r===0)return{data:t,facets:e};t=to(t);const o=t[pg]=new Uint32Array(n+r);e=e.map(l=>to(l,Uint32Array));let a=n;i.fill(0);for(const l of e)for(let f=0,s=l.length;f<s;++f){const u=l[f];i[u]?(l[f]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function Yx(t={},e={}){arguments.length===1&&([t,e]=Hx(t));const{x1:n,x:i=n,y:r,...o}=e,[a,l,f,s]=Gx(i,r,"x","y",t,o);return{...a,x1:n,x:l,y1:f,y2:s,y:Cs(f,s)}}function nb({y:t,y1:e,y2:n,...i}={}){return i=Il(i,"x"),e===void 0&&n===void 0?Yx({y:t,...i}):([e,n]=D4(t,e,n),{...i,y1:e,y2:n})}function Hx(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const Vx={length:!0};function Gx(t,e=T4,n,i,{offset:r,order:o,reverse:a},l){if(e===null)throw new Error(`stack requires ${i}`);const f=wu(l),[s,u]=vn(t),[c,h]=Ga(e),[p,d]=Ga(e);return c.hint=p.hint=Vx,r=Xx(r),o=Kx(o,r,i),[Nl(l,(m,b,_)=>{({data:m,facets:b}=Wx(m,b));const g=t==null?void 0:u(yg(ee(m,t),_==null?void 0:_[n])),v=ee(m,e,Float64Array),w=ee(m,f),k=o&&o(m,g,v,w),x=m.length,S=h(new Float64Array(x)),T=d(new Float64Array(x)),E=[];for(const F of b){const C=g?Array.from(el(F,L=>g[L]).values()):[F];if(k)for(const L of C)L.sort(k);for(const L of C){let R=0,W=0;a&&L.reverse();for(const A of L){const B=v[A];B<0?R=T[A]=(S[A]=R)+B:B>0?W=T[A]=(S[A]=W)+B:T[A]=S[A]=W}}E.push(C)}return r&&r(E,S,T,w),{data:m,facets:b}}),s,c,p]}function Xx(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return jx;case"center":case"silhouette":return Zx;case"wiggle":return rb}throw new Error(`unknown offset: ${t}`)}}function ib(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function jx(t,e,n){for(const i of t)for(const r of i){const[o,a]=ib(r,n);for(const l of r){const f=1/(a-o||1);e[l]=f*(e[l]-o),n[l]=f*(n[l]-o)}}}function Zx(t,e,n){for(const i of t){for(const r of i){const[o,a]=ib(r,n);for(const l of r){const f=(a+o)/2;e[l]-=f,n[l]-=f}}ob(i,e,n)}ab(t,e,n)}function rb(t,e,n,i){for(const r of t){const o=new yi;let a=0;for(const l of r){let f=-1;const s=l.map(p=>Math.abs(n[p]-e[p])),u=l.map(p=>{f=i?i[p]:++f;const d=n[p]-e[p],m=o.has(f)?d-o.get(f):0;return o.set(f,d),m}),c=[0,...Jb(u)];for(const p of l)e[p]+=a,n[p]+=a;const h=Zn(s);h&&(a-=Zn(s,(p,d)=>(u[d]/2+c[d])*p)/h)}ob(r,e,n)}ab(t,e,n)}function ob(t,e,n){const i=Cn(t,r=>Cn(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function ab(t,e,n){const i=t.length;if(i===1)return;const r=t.map(l=>l.flat()),o=r.map(l=>(Cn(l,f=>e[f])+ke(l,f=>n[f]))/2),a=Cn(o);for(let l=0;l<i;l++){const f=a-o[l];for(const s of r[l])e[s]+=f,n[s]+=f}}function Kx(t,e,n){if(t===void 0&&e===rb)return od(Qe);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Va:Qe;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return Jx(r);case"z":return Qx(r);case"sum":return tk(r);case"appearance":return ek(r);case"inside-out":return od(r)}return ad(mg(t))}if(typeof t=="function")return(t.length===1?ad:nk)(t);if(Array.isArray(t))return ik(t);throw new Error(`invalid order: ${t}`)}}function Jx(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function Qx(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function tk(t){return zl(t,(e,n,i,r)=>zs(Dn(e),o=>Zn(o,a=>i[a]),o=>r[o]))}function ek(t){return zl(t,(e,n,i,r)=>zs(Dn(e),o=>n[S0(o,a=>i[a])],o=>r[o]))}function od(t){return zl(t,(e,n,i,r)=>{const o=Dn(e),a=zs(o,c=>n[S0(c,h=>i[h])],c=>r[c]),l=Yi(o,c=>Zn(c,h=>i[h]),c=>r[c]),f=[],s=[];let u=0;for(const c of a)u<0?(u+=l.get(c),f.push(c)):(u-=l.get(c),s.push(c));return s.reverse().concat(f)})}function ad(t){return e=>{const n=ee(e,t);return(i,r)=>Qe(n[i],n[r])}}function nk(t){return e=>(n,i)=>t(e[n],e[i])}function ik(t){return zl(Qe,()=>t)}function zl(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new yi(e(n,i,r,o).map((l,f)=>[l,f]));return(l,f)=>t(a.get(o[l]),a.get(o[f]))}}const rk={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class ok extends he{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,z:l,curve:f,tension:s}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:wu(n),optional:!0}},n,rk),this.z=l,this.curve=X2(f,s)}filter(e){return e}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i;return Ht("svg:g",o).call(We,this,r,o).call(Ne,this,n,0,0).call(u=>u.selectAll().data(Fg(e,[a,l,f,s],this,i)).enter().append("path").call(Ye,this).call(Dg,this,i).attr("d",B5().curve(this.curve).defined(c=>c>=0).x0(c=>a[c]).y0(c=>l[c]).x1(c=>f[c]).y1(c=>s[c]))).node()}}function ak(t,e){const{x:n=Tl,...i}=Z2(e);return new ok(t,nb(eb({...i,x1:n,x2:void 0})))}const lk={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class fk extends he{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:l,tension:f}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,lk),this.curve=j2(l,f),Fo(this,n)}project(e,n,i){this.curve!==cr&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i,{curve:u}=this;return Ht("svg:g",o).call(We,this,r,o).call(Ne,this,n).call(c=>c.selectAll().data(e).enter().append("path").call(Ye,this).attr("d",u===cr&&o.projection?sk(o.projection,a,l,f,s):h=>{const p=Bn(),d=u(p);return d.lineStart(),d.point(a[h],l[h]),d.point(f[h],s[h]),d.lineEnd(),p}).call(Ln,this,i).call(Rl,this,i,o)).node()}}function sk(t,e,n,i,r){const o=ul(t);return e=fn(e),n=fn(n),i=fn(i),r=fn(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Bl(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...l}={}){return[n,i]=ld(e,n,i),[o,a]=ld(r,o,a),new fk(t,{...l,x1:n,x2:i,y1:o,y2:a})}function ld(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class lb extends he{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:l=o,insetBottom:f=o,insetLeft:s=o,rx:u,ry:c}=i;this.insetTop=Pt(a),this.insetRight=Pt(l),this.insetBottom=Pt(f),this.insetLeft=Pt(s),this.rx=re(u,"auto"),this.ry=re(c,"auto")}render(e,n,i,r,o){const{rx:a,ry:l}=this;return Ht("svg:g",o).call(We,this,r,o).call(this._transform,this,n).call(f=>f.selectAll().data(e).enter().append("rect").call(Ye,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(wt,"rx",a).call(wt,"ry",l).call(Ln,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}}const uk={ariaLabel:"bar"};class ck extends lb{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,uk)}_transform(e,n,{y:i}){e.call(Ne,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return sr(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:l,insetBottom:f}=this;return sr(e)?a-r-o-l-f:s=>Math.max(0,Math.abs(i[s]-n[s])-l-f)}}function hk(t,e={}){return N4(e)||(e={...e,x:Tl,y2:fe}),new ck(t,nb(d2(eb(e))))}const dk={ariaLabel:"cell"};class pk extends lb{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,dk)}_transform(e,n){e.call(Ne,n,{},0,0)}}function mk(t,{x:e,y:n,...i}={}){return[e,n]=So(e,n),new pk(t,{...i,x:e,y:n})}const gk={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function bk(t){return t.sort===void 0&&t.reverse===void 0?t8({channel:"-r"},t):t}class _k extends he{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:l=Jr,frameAnchor:f}=n,[s,u]=ce(a,0),[c,h]=J4(l),[p,d]=ce(o,c==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:Ml,optional:!0},rotate:{value:s,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},bk(n),gk),this.r=d,this.rotate=u,this.symbol=h,this.frameAnchor=El(f);const{channels:m}=this,{symbol:b}=m;if(b){const{fill:_,stroke:g}=m;b.hint={fill:_?_.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:g?g.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,r:u,rotate:c,symbol:h}=i,{r:p,rotate:d,symbol:m}=this,[b,_]=$o(this,r),g=m===Jr,v=u?void 0:p*p*Math.PI;return pu(p)&&(e=[]),Ht("svg:g",o).call(We,this,r,o).call(Ne,this,{x:f&&a,y:s&&l}).call(w=>w.selectAll().data(e).enter().append(g?"circle":"path").call(Ye,this).call(g?k=>{k.attr("cx",f?x=>f[x]:b).attr("cy",s?x=>s[x]:_).attr("r",u?x=>u[x]:p)}:k=>{k.attr("transform",zu`translate(${f?x=>f[x]:b},${s?x=>s[x]:_})${c?x=>` rotate(${c[x]})`:d?` rotate(${d})`:""}`).attr("d",u&&h?x=>{const S=Bn();return h[x].draw(S,u[x]*u[x]*Math.PI),S}:u?x=>{const S=Bn();return m.draw(S,u[x]*u[x]*Math.PI),S}:h?x=>{const S=Bn();return h[x].draw(S,v),S}:(()=>{const x=Bn();return m.draw(x,v),x})())}).call(Ln,this,i)).node()}}function ro(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=So(e,n)),new _k(t,{...i,x:e,y:n})}const yk={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class fb extends he{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:l}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:wu(n),optional:!0}},n,yk),this.z=o,this.curve=j2(a,l),Fo(this,n)}filter(e){return e}project(e,n,i){this.curve!==cr&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:l}=i,{curve:f}=this;return Ht("svg:g",o).call(We,this,r,o).call(Ne,this,n).call(s=>s.selectAll().data(Fg(e,[a,l],this,i)).enter().append("path").call(Ye,this).call(Dg,this,i).call(n9,this,i,o).attr("d",f===cr&&o.projection?wk(o.projection,a,l):Rm().curve(f).defined(u=>u>=0).x(u=>a[u]).y(u=>l[u]))).node()}}function wk(t,e,n){const i=ul(t);return e=fn(e),n=fn(n),r=>{let o=[];const a=[o];for(const l of r)l===-1?(o=[],a.push(o)):o.push([e[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function vk(t,{x:e,y:n,...i}={}){return[e,n]=So(e,n),new fb(t,{...i,x:e,y:n})}function xk(t,{x:e=Tl,y:n=fe,...i}={}){return new fb(t,Z2({...i,x:e,y:n}))}const kk={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Mk extends he{constructor(e,n,i){super(e,n,i,kk),Fo(this,i)}render(e,n,i,r,o){return Ht("svg:g",o).call(We,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Ye,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(Ln,this,i).call(Rl,this,i,o)).node()}}class Sk extends Mk{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Pt(a),this.insetBottom=Pt(l)}_transform(e,n,{x:i}){e.call(Ne,n,{x:i},ye,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function ql(t,{x:e=fe,...n}={}){return new Sk(t,{...n,x:e})}function Tk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&V(e),t[4](null)}}}function Ck(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;qe(()=>{const f=De({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[ql(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(f)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Hn extends zt{constructor(e){super(),Ut(this,e,Ck,Tk,Ot,{pattern:3,width:0,height:1})}}function Ak(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&V(e),t[4](null)}}}function Ek(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;qe(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=De({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[hk(f,{x:(u,c)=>c+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Vn extends zt{constructor(e){super(),Ut(this,e,Ek,Ak,Ot,{pattern:3,width:0,height:1})}}function $k(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&V(e),t[4](null)}}}function Nk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;qe(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=De({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[mk(f,{x:(u,c)=>c+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Gn extends zt{constructor(e){super(),Ut(this,e,Nk,$k,Ot,{pattern:3,width:0,height:1})}}function Dk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){G(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&V(e),t[7](null)}}}function Fk(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{width:a=800}=e,{height:l=50}=e,f,s=null,u;const c=async m=>{o?n(6,s=o):(n(6,s=await Rs(m)),console.log(`Loaded ${m}, sr= ${s.sampleRate}`)),u=s.sampleRate};let h=null;const p=(m,b)=>{b&&(h=Ka(b,m,.5))};qe(()=>{if(n(2,f.textContent="",f),!h)return;const m=De({width:a,height:l,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[xk(h,{x:(b,_)=>_/u,y:b=>b})]});f.appendChild(m)});function d(m){oe[m?"unshift":"push"](()=>{f=m,n(2,f)})}return t.$$set=m=>{"pattern"in m&&n(3,i=m.pattern),"audioFile"in m&&n(4,r=m.audioFile),"cachedAudio"in m&&n(5,o=m.cachedAudio),"width"in m&&n(0,a=m.width),"height"in m&&n(1,l=m.height)},t.$$.update=()=>{t.$$.dirty&16&&c(r),t.$$.dirty&72&&p(i,s)},[a,l,f,i,r,o,s,d]}class Xn extends zt{constructor(e){super(),Ut(this,e,Fk,Dk,Ot,{pattern:3,audioFile:4,cachedAudio:5,width:0,height:1})}}function Lk(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){G(l,e,f),y(e,n),t[7](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&V(e),t[7](null),o=!1,a()}}}function Ik(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{currentTrialNumber:a=-1}=e,l=null;const f=async d=>{o?(n(6,l=o),console.log("used cached audio")):(n(6,l=await Rs(d)),console.log(`loaded ${d}, sr= ${l.sampleRate}`))};let s=null,u;const c=(d,m)=>{m&&u&&(s=Ka(m,d),Ps(s,m.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};bi(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function p(d){oe[d?"unshift":"push"](()=>{u=d,n(0,u)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"cachedAudio"in d&&n(4,o=d.cachedAudio),"currentTrialNumber"in d&&n(5,a=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&32&&a>-1&&window.setTimeout(h,200),t.$$.dirty&68&&c(i,l)},[u,h,i,r,o,a,l,p]}class oo extends zt{constructor(e){super(),Ut(this,e,Ik,Lk,Ot,{pattern:2,audioFile:3,cachedAudio:4,currentTrialNumber:5})}}function fd(t,e,n){const i=t.slice();return i[8]=e[n],i}function sd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=ot(n),e.__value=t[8],st(e,e.__value)},m(r,o){G(r,e,o),y(e,i)},p:_t,d(r){r&&V(e)}}}function Rk(t){let e,n,i,r,o,a,l,f=(ca*1e3).toFixed(0)+"",s,u,c,h,p,d,m,b,_=t[0].toFixed(1)+"",g,v,w=(t[2]*1e3).toFixed(1)+"",k,x,S,T,E,F,C,L,R,W,A,B,z,J,j,X,O,H,Q,at,nt=Bt(t[5]),Z=[];for(let q=0;q<nt.length;q+=1)Z[q]=sd(fd(t,nt,q));return R=new oo({props:{pattern:t[1],audioFile:t[3]}}),A=new Xn({props:{pattern:t[1],audioFile:t[3],width:ea,height:na}}),z=new Hn({props:{pattern:t[1],width:ea,height:na}}),j=new Vn({props:{pattern:t[1],width:ea,height:na}}),O=new Gn({props:{pattern:t[1],width:ea,height:na}}),{c(){e=M("main"),n=M("h2"),n.textContent="Playground",i=D(),r=M("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=D(),a=M("div"),l=ot("inter-onset interval (IOI): "),s=ot(f),u=ot(" milliseconds ("),c=ot(t[4]),h=ot(` bpm)
    `),p=M("label"),d=ot(`deviation as percent of IOI
      `),m=M("input"),b=D(),g=ot(_),v=ot(`
      (`),k=ot(w),x=ot(" milliseconds)"),S=D(),T=M("label"),E=ot(`instrument sample:
      `),F=M("select");for(let q=0;q<Z.length;q+=1)Z[q].c();C=D(),L=M("div"),ht(R.$$.fragment),W=D(),ht(A.$$.fragment),B=D(),ht(z.$$.fragment),J=D(),ht(j.$$.fragment),X=D(),ht(O.$$.fragment),I(m,"type","range"),I(m,"min","-20"),I(m,"max","20"),I(m,"step","1"),I(p,"class","svelte-1sot113"),t[3]===void 0&&hn(()=>t[7].call(F)),I(T,"class","svelte-1sot113"),I(L,"class","stimuli svelte-1sot113")},m(q,N){G(q,e,N),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,s),y(a,u),y(a,c),y(a,h),y(a,p),y(p,d),y(p,m),st(m,t[0]),y(p,b),y(p,g),y(p,v),y(p,k),y(p,x),y(a,S),y(a,T),y(T,E),y(T,F);for(let $=0;$<Z.length;$+=1)Z[$]&&Z[$].m(F,null);_e(F,t[3],!0),y(e,C),y(e,L),ut(R,L,null),y(L,W),ut(A,L,null),y(L,B),ut(z,L,null),y(L,J),ut(j,L,null),y(L,X),ut(O,L,null),H=!0,Q||(at=[gt(m,"change",t[6]),gt(m,"input",t[6]),gt(F,"change",t[7])],Q=!0)},p(q,[N]){if((!H||N&16)&&Lt(c,q[4]),N&1&&st(m,q[0]),(!H||N&1)&&_!==(_=q[0].toFixed(1)+"")&&Lt(g,_),(!H||N&4)&&w!==(w=(q[2]*1e3).toFixed(1)+"")&&Lt(k,w),N&32){nt=Bt(q[5]);let rt;for(rt=0;rt<nt.length;rt+=1){const pt=fd(q,nt,rt);Z[rt]?Z[rt].p(pt,N):(Z[rt]=sd(pt),Z[rt].c(),Z[rt].m(F,null))}for(;rt<Z.length;rt+=1)Z[rt].d(1);Z.length=nt.length}N&40&&_e(F,q[3]);const $={};N&2&&($.pattern=q[1]),N&8&&($.audioFile=q[3]),R.$set($);const P={};N&2&&(P.pattern=q[1]),N&8&&(P.audioFile=q[3]),A.$set(P);const tt={};N&2&&(tt.pattern=q[1]),z.$set(tt);const U={};N&2&&(U.pattern=q[1]),j.$set(U);const mt={};N&2&&(mt.pattern=q[1]),O.$set(mt)},i(q){H||(Y(R.$$.fragment,q),Y(A.$$.fragment,q),Y(z.$$.fragment,q),Y(j.$$.fragment,q),Y(O.$$.fragment,q),H=!0)},o(q){K(R.$$.fragment,q),K(A.$$.fragment,q),K(z.$$.fragment,q),K(j.$$.fragment,q),K(O.$$.fragment,q),H=!1},d(q){q&&V(e),Ve(Z,q),ct(R),ct(A),ct(z),ct(j),ct(O),Q=!1,$e(at)}}}let ea=600,na=100,ca=.5,Pk=6,Ok=3,Uk=!0,zk=0;function Bk(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],l=5,f=[];function s(){l=xe(this.value),n(0,l)}function u(){a=gi(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=l/100*ca),t.$$.dirty&6&&(n(1,f=Xi(Pk,ca,Ok,r,Uk,zk)),console.log("generated pattern",f))},n(4,i=1/ca*60),[l,f,r,a,i,o,s,u]}class qk extends zt{constructor(e){super(),Ut(this,e,Bk,Rk,Ot,{})}}var sb={exports:{}};(function(t,e){(function(n,i){i()})(_r,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,c){var h=new XMLHttpRequest;h.open("GET",s),h.responseType="blob",h.onload=function(){f(h.response,u,c)},h.onerror=function(){console.error("could not download file")},h.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _r=="object"&&_r.global===_r?_r:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(s,u,c){var h=a.URL||a.webkitURL,p=document.createElement("a");u=u||s.name||"download",p.download=u,p.rel="noopener",typeof s=="string"?(p.href=s,p.origin===location.origin?o(p):r(p.href)?i(s,u,c):o(p,p.target="_blank")):(p.href=h.createObjectURL(s),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,c){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,c),u);else if(r(s))i(s,u,c);else{var h=document.createElement("a");h.href=s,h.target="_blank",setTimeout(function(){o(h)})}}:function(s,u,c,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,c);var p=s.type==="application/octet-stream",d=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||l)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var v=b.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},b.readAsDataURL(s)}else{var _=a.URL||a.webkitURL,g=_.createObjectURL(s);h?h.location=g:location.href=g,h=null,setTimeout(function(){_.revokeObjectURL(g)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(sb);var Wk=sb.exports;const Za=_0(Wk);function It(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}It.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};It.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};It.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};It.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=ub(0,t.length-1);return this.activate(t[e]),this};It.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=ub(0,t.length-1);this.activate(t[e])};It.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};It.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};It.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};It.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};It.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};It.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};It.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};It.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};It.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};It.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};It.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};It.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};It.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};It.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};It.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};It.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const Gu=function(){};Gu.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};Gu.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};It.prototype.checkErr=new Gu;function ub(t,e){return Math.floor(Math.random()*(e-t+1))+t}function ud(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,W,A,B,z,J,j,X,O,H,Q,at,nt,Z,q;return{c(){e=M("div"),n=M("label"),i=ot(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=ot(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",b=M("option"),b.textContent="55-60",_=D(),g=M("label"),v=ot(`Gender:
        `),w=M("input"),k=D(),x=M("label"),S=ot(`Highest finished education (select the best fitting one):
        `),T=M("select"),E=M("option"),E.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",W=D(),A=M("label"),B=ot(`Which music instruments do you play?
        `),z=M("input"),J=D(),j=M("label"),X=ot(`For how many years do you roughly play it/them?
        `),O=M("input"),H=D(),Q=M("label"),at=ot(`How many years of experience do you have with visualization?
        `),nt=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",st(s,s.__value),u.__value="25-29",st(u,u.__value),c.__value="30-34",st(c,c.__value),h.__value="35-39",st(h,h.__value),p.__value="40-44",st(p,p.__value),d.__value="45-49",st(d,d.__value),m.__value="50-54",st(m,m.__value),b.__value="55-60",st(b,b.__value),t[6]===void 0&&hn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(g,"class","svelte-u6a8gr"),E.__value="none",st(E,E.__value),F.__value="highs",st(F,F.__value),C.__value="bachelor",st(C,C.__value),L.__value="master",st(L,L.__value),R.__value="phd",st(R,R.__value),t[8]===void 0&&hn(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(A,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(j,"class","svelte-u6a8gr"),I(nt,"type","number"),I(nt,"min","0"),I(nt,"step","1"),I(Q,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,$){G(N,e,$),y(e,n),y(n,i),y(n,r),st(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,b),_e(f,t[6],!0),y(e,_),y(e,g),y(g,v),y(g,w),st(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,E),y(T,F),y(T,C),y(T,L),y(T,R),_e(T,t[8],!0),y(e,W),y(e,A),y(A,B),y(A,z),st(z,t[9]),y(e,J),y(e,j),y(j,X),y(j,O),st(O,t[10]),y(e,H),y(e,Q),y(Q,at),y(Q,nt),st(nt,t[11]),Z||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(nt,"input",t[28])],Z=!0)},p(N,$){$[0]&32&&r.value!==N[5]&&st(r,N[5]),$[0]&64&&_e(f,N[6]),$[0]&128&&w.value!==N[7]&&st(w,N[7]),$[0]&256&&_e(T,N[8]),$[0]&512&&z.value!==N[9]&&st(z,N[9]),$[0]&1024&&xe(O.value)!==N[10]&&st(O,N[10]),$[0]&2048&&xe(nt.value)!==N[11]&&st(nt,N[11])},d(N){N&&V(e),Z=!1,$e(q)}}}function cd(t){let e,n,i,r,o=t[14]&&hd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=ti()},m(a,l){G(a,e,l),G(a,n,l),o&&o.m(a,l),G(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&Y(o,1)):(o=hd(a),o.c(),Y(o,1),o.m(i.parentNode,i)):o&&(Gt(),K(o,1,1,()=>{o=null}),Xt())},i(a){r||(Y(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function hd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,b,_,g,v;const w=[Hk,Yk],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(b=x(t))&&(_=k[b]=w[b](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=ot("Test number "),a=ot(o),l=ot(" / "),s=ot(f),u=D(),c=M("p"),h=ot("Trial number "),d=ot(p),m=D(),_&&_.c(),g=ti()},m(S,T){G(S,e,T),G(S,n,T),G(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),G(S,u,T),G(S,c,T),y(c,h),y(c,d),G(S,m,T),~b&&k[b].m(S,T),G(S,g,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Lt(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Lt(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Lt(d,p);let E=b;b=x(S),b===E?~b&&k[b].p(S,T):(_&&(Gt(),K(k[E],1,1,()=>{k[E]=null}),Xt()),~b?(_=k[b],_?_.p(S,T):(_=k[b]=w[b](S),_.c()),Y(_,1),_.m(g.parentNode,g)):_=null)},i(S){v||(Y(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(g)),~b&&k[b].d(S)}}}function Yk(t){let e,n,i,r;const o=[jk,Xk,Gk,Vk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=ti()},m(f,s){~e&&a[e].m(f,s),G(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Gt(),K(a[u],1,1,()=>{a[u]=null}),Xt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),Y(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(Y(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function Hk(t){let e,n,i,r;return e=new oo({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),G(o,n,a),G(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(Y(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ct(e,o)}}}function Vk(t){let e,n;return e=new Gn({props:{pattern:t[0],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Gk(t){let e,n;return e=new Vn({props:{pattern:t[0],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Xk(t){let e,n;return e=new Hn({props:{pattern:t[0],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function jk(t){let e,n;return e=new Xn({props:{pattern:t[0],audioFile:t[1],width:Wl,height:Yl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function dd(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=ot(`Any final feedback?
        `),r=M("textarea")},m(l,f){G(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&st(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function pd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){G(l,e,f),G(l,n,f),G(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:_t,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function md(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){G(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:_t,d(r){r&&V(e),n=!1,i()}}}function Zk(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&ud(t),u=t[3]==="tests"&&cd(t),c=t[3]==="feedback"&&dd(t),h=t[3]==="done"&&pd(t),p=!t[15]&&t[3]!=="done"&&md(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){G(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=ud(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&Y(u,1)):(u=cd(d),u.c(),Y(u,1),u.m(e,o)):u&&(Gt(),K(u,1,1,()=>{u=null}),Xt()),d[3]==="feedback"?c?c.p(d,m):(c=dd(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=pd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=md(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(Y(u),f=!0)},o(d){K(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let gd=.5;const If=20;let Kk=6,Jk=!0,Qk=0,Wl=600,Yl=100;function tM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,b=0,_="",g=0,v,w={},k=[],x,S,T=!1,E=!1,F=!1,C="tick",L=If,R=3,W=[],A=[],B=0;const z=[];bi(()=>{document.querySelector("html").addEventListener("keyup",nt)});const J=()=>{S=new It({ratio:{firstVal:If,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,If],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function j(){l==="start"?(n(2,a=Os(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),X()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function X(){J(),n(13,g=0),v=0,x=0,n(14,T=!0),A=[],k=[],s=new Date,O()}function O(){console.log("Starting trial "+g),w={},n(15,E=!0),H()}function H(){let dt=Math.round(S.getLast("ratio"));dt=Math.random()<.5?dt:-dt,w.deviation=dt,n(20,L=dt),console.log("generated pattern",W),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function Q(ft){if(!E)return;n(15,E=!1),w.decisionChoice=ft,w.errorCode=0;const dt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(dt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,g++,g),S.reversalLimitReached("ratio")?at():O()}function at(){n(14,T=!1),Z(),A=[],B=S.getFinalVal("ratio");for(let dt=0;dt<k.length;dt++)A[dt]=k[dt].deviation;console.log(A);const ft=new Date;z.push({encoding:C,audioFile:o,final:B,data:A,score:x,testNumber:f,trialCount:g+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ft-s)/1e3}),n(4,f++,f)}function nt(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":Q(0);break;case"ArrowRight":Q(1);break;case"PageDown":!E&&l!=="done"&&j()}}function Z(){`${x}`,g+1,`${(x/(g+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:b,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ft);const dt=JSON.stringify(ft,void 0,2),Rt=new Blob([dt],{type:"text/plain;charset=utf-8"});Za(Rt,"results.json")}function N(){u=this.value,n(5,u)}function $(){c=gi(this),n(6,c)}function P(){h=this.value,n(7,h)}function tt(){p=gi(this),n(8,p)}function U(){d=this.value,n(9,d)}function mt(){m=xe(this.value),n(10,m)}function rt(){b=xe(this.value),n(11,b)}function pt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*gd),t.$$.dirty[0]&2097153&&(n(0,W=Xi(Kk,gd,R,i,Jk,Qk)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,p,d,m,b,_,g,T,E,F,C,j,q,L,i,N,$,P,tt,U,mt,rt,pt]}class eM extends zt{constructor(e){super(),Ut(this,e,tM,Zk,Ot,{},null,[-1,-1])}}function bd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,W,A,B,z,J,j,X,O,H,Q,at,nt,Z,q;return{c(){e=M("div"),n=M("label"),i=ot(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=ot(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",b=M("option"),b.textContent="55-60",_=D(),g=M("label"),v=ot(`Gender:
        `),w=M("input"),k=D(),x=M("label"),S=ot(`Highest finished education (select the best fitting one):
        `),T=M("select"),E=M("option"),E.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",W=D(),A=M("label"),B=ot(`Which music instruments do you play?
        `),z=M("input"),J=D(),j=M("label"),X=ot(`For how many years do you roughly play it/them?
        `),O=M("input"),H=D(),Q=M("label"),at=ot(`How many years of experience do you have with visualization?
        `),nt=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",st(s,s.__value),u.__value="25-29",st(u,u.__value),c.__value="30-34",st(c,c.__value),h.__value="35-39",st(h,h.__value),p.__value="40-44",st(p,p.__value),d.__value="45-49",st(d,d.__value),m.__value="50-54",st(m,m.__value),b.__value="55-60",st(b,b.__value),t[6]===void 0&&hn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(g,"class","svelte-u6a8gr"),E.__value="none",st(E,E.__value),F.__value="highs",st(F,F.__value),C.__value="bachelor",st(C,C.__value),L.__value="master",st(L,L.__value),R.__value="phd",st(R,R.__value),t[8]===void 0&&hn(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(A,"class","svelte-u6a8gr"),I(O,"type","number"),I(O,"min","0"),I(O,"step","1"),I(j,"class","svelte-u6a8gr"),I(nt,"type","number"),I(nt,"min","0"),I(nt,"step","1"),I(Q,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(N,$){G(N,e,$),y(e,n),y(n,i),y(n,r),st(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,b),_e(f,t[6],!0),y(e,_),y(e,g),y(g,v),y(g,w),st(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,E),y(T,F),y(T,C),y(T,L),y(T,R),_e(T,t[8],!0),y(e,W),y(e,A),y(A,B),y(A,z),st(z,t[9]),y(e,J),y(e,j),y(j,X),y(j,O),st(O,t[10]),y(e,H),y(e,Q),y(Q,at),y(Q,nt),st(nt,t[11]),Z||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(O,"input",t[27]),gt(nt,"input",t[28])],Z=!0)},p(N,$){$[0]&32&&r.value!==N[5]&&st(r,N[5]),$[0]&64&&_e(f,N[6]),$[0]&128&&w.value!==N[7]&&st(w,N[7]),$[0]&256&&_e(T,N[8]),$[0]&512&&z.value!==N[9]&&st(z,N[9]),$[0]&1024&&xe(O.value)!==N[10]&&st(O,N[10]),$[0]&2048&&xe(nt.value)!==N[11]&&st(nt,N[11])},d(N){N&&V(e),Z=!1,$e(q)}}}function _d(t){let e,n,i,r,o=t[14]&&yd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=ti()},m(a,l){G(a,e,l),G(a,n,l),o&&o.m(a,l),G(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&Y(o,1)):(o=yd(a),o.c(),Y(o,1),o.m(i.parentNode,i)):o&&(Gt(),K(o,1,1,()=>{o=null}),Xt())},i(a){r||(Y(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function yd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,b,_,g,v;const w=[iM,nM],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(b=x(t))&&(_=k[b]=w[b](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=ot("Test number "),a=ot(o),l=ot(" / "),s=ot(f),u=D(),c=M("p"),h=ot("Trial number "),d=ot(p),m=D(),_&&_.c(),g=ti()},m(S,T){G(S,e,T),G(S,n,T),G(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),G(S,u,T),G(S,c,T),y(c,h),y(c,d),G(S,m,T),~b&&k[b].m(S,T),G(S,g,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Lt(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Lt(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Lt(d,p);let E=b;b=x(S),b===E?~b&&k[b].p(S,T):(_&&(Gt(),K(k[E],1,1,()=>{k[E]=null}),Xt()),~b?(_=k[b],_?_.p(S,T):(_=k[b]=w[b](S),_.c()),Y(_,1),_.m(g.parentNode,g)):_=null)},i(S){v||(Y(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(g)),~b&&k[b].d(S)}}}function nM(t){let e,n,i,r;const o=[lM,aM,oM,rM],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=ti()},m(f,s){~e&&a[e].m(f,s),G(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Gt(),K(a[u],1,1,()=>{a[u]=null}),Xt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),Y(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(Y(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function iM(t){let e,n,i,r;return e=new oo({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),G(o,n,a),G(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(Y(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ct(e,o)}}}function rM(t){let e,n;return e=new Gn({props:{pattern:t[0],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function oM(t){let e,n;return e=new Vn({props:{pattern:t[0],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function aM(t){let e,n;return e=new Hn({props:{pattern:t[0],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function lM(t){let e,n;return e=new Xn({props:{pattern:t[0],audioFile:t[1],width:Hl,height:Vl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function wd(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=ot(`Any final feedback?
        `),r=M("textarea")},m(l,f){G(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&st(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function vd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){G(l,e,f),G(l,n,f),G(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:_t,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function xd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){G(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:_t,d(r){r&&V(e),n=!1,i()}}}function fM(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&bd(t),u=t[3]==="tests"&&_d(t),c=t[3]==="feedback"&&wd(t),h=t[3]==="done"&&vd(t),p=!t[15]&&t[3]!=="done"&&xd(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study (Within-Participant Variance)",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){G(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=bd(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&Y(u,1)):(u=_d(d),u.c(),Y(u,1),u.m(e,o)):u&&(Gt(),K(u,1,1,()=>{u=null}),Xt()),d[3]==="feedback"?c?c.p(d,m):(c=wd(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=vd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=xd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(Y(u),f=!0)},o(d){K(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let kd=.5;const Rf=20;let sM=6,uM=!0,cM=0,Hl=600,Vl=100;function hM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,b=0,_="",g=0,v,w={},k=[],x,S,T=!1,E=!1,F=!1,C="tick",L=Rf,R=3,W=[],A=[],B=0;const z=[];bi(()=>{document.querySelector("html").addEventListener("keyup",nt)});const J=()=>{S=new It({ratio:{firstVal:Rf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Rf],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function j(){l==="start"?(n(2,a=Os(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),X()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function X(){J(),n(13,g=0),v=0,x=0,n(14,T=!0),A=[],k=[],s=new Date,O()}function O(){console.log("Starting trial "+g),w={},n(15,E=!0),H()}function H(){let dt=Math.round(S.getLast("ratio"));dt=Math.random()<.5?dt:-dt,w.deviation=dt,n(20,L=dt),console.log("generated pattern",W),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function Q(ft){if(!E)return;n(15,E=!1),w.decisionChoice=ft,w.errorCode=0;const dt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(dt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,g++,g),S.reversalLimitReached("ratio")?at():O()}function at(){n(14,T=!1),Z(),A=[],B=S.getFinalVal("ratio");for(let dt=0;dt<k.length;dt++)A[dt]=k[dt].deviation;console.log(A);const ft=new Date;z.push({encoding:C,audioFile:o,final:B,data:A,score:x,testNumber:f,trialCount:g+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ft-s)/1e3}),n(4,f++,f)}function nt(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":Q(0);break;case"ArrowRight":Q(1);break;case"PageDown":!E&&l!=="done"&&j()}}function Z(){`${x}`,g+1,`${(x/(g+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:b,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ft);const dt=JSON.stringify(ft,void 0,2),Rt=new Blob([dt],{type:"text/plain;charset=utf-8"});Za(Rt,"results.json")}function N(){u=this.value,n(5,u)}function $(){c=gi(this),n(6,c)}function P(){h=this.value,n(7,h)}function tt(){p=gi(this),n(8,p)}function U(){d=this.value,n(9,d)}function mt(){m=xe(this.value),n(10,m)}function rt(){b=xe(this.value),n(11,b)}function pt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*kd),t.$$.dirty[0]&2097153&&(n(0,W=Xi(sM,kd,R,i,uM,cM)),console.log("generated pattern",W))},[W,o,a,l,f,u,c,h,p,d,m,b,_,g,T,E,F,C,j,q,L,i,N,$,P,tt,U,mt,rt,pt]}class dM extends zt{constructor(e){super(),Ut(this,e,hM,fM,Ot,{},null,[-1,-1])}}function pM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&V(e),t[6](null)}}}function mM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=100}=e,f;qe(()=>{const u=De({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[ql(i,{x:c=>c}),Ol(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${h+1}`})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){oe[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class cb extends zt{constructor(e){super(),Ut(this,e,mM,pM,Ot,{data:3,domain:4,title:5,width:0,height:1})}}function gM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&V(e),t[5](null)}}}function bM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;qe(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.finals)})),u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[ro(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Bl(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Pl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=jn(s),d=1.96*(lo(s)/Math.sqrt(u)),m=c-d,b=c+d;return{mean:c,low:m,high:b}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Xu extends zt{constructor(e){super(),Ut(this,e,bM,gM,Ot,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function _M(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&V(e),t[5](null)}}}function yM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;qe(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.trialCounts)})),u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[ro(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Bl(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Pl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=jn(s),d=1.96*(lo(s)/Math.sqrt(u)),m=c-d,b=c+d;return{mean:c,low:m,high:b}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class ju extends zt{constructor(e){super(),Ut(this,e,yM,_M,Ot,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Md(t,e,n){const i=t.slice();return i[8]=e[n],i}function Sd(t,e,n){const i=t.slice();return i[11]=e[n],i}function Td(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new cb({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=M("b"),i=ot(n),r=D(),ht(o.$$.fragment)},m(l,f){G(l,e,f),y(e,i),G(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&4)&&n!==(n=l[11].encoding+"")&&Lt(i,n);const s={};f&4&&(s.data=l[11].finals),f&4&&(s.title=l[11].encoding),f&2&&(s.domain=[0,l[1]]),o.$set(s)},i(l){a||(Y(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function Cd(t){let e,n,i,r=t[8].demographics.partID+"",o,a,l,f,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=M("div"),n=M("b"),i=ot("P"),o=ot(r),a=ot(":"),l=D(),f=new gb(!1),u=D(),f.a=u,we(e,"text-align","left")},m(c,h){G(c,e,h),y(e,n),y(n,i),y(n,o),y(n,a),y(e,l),f.m(s,e),y(e,u)},p(c,h){h&1&&r!==(r=c[8].demographics.partID+"")&&Lt(o,r),h&1&&s!==(s=c[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&f.p(s)},d(c){c&&V(e)}}}function wM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C;c=new Xu({props:{stimuli:t[2]}}),b=new ju({props:{stimuli:t[2]}});let L=Bt(t[2]),R=[];for(let z=0;z<L.length;z+=1)R[z]=Td(Sd(t,L,z));const W=z=>K(R[z],1,1,()=>{R[z]=null});let A=Bt(t[0]),B=[];for(let z=0;z<A.length;z+=1)B[z]=Cd(Md(t,A,z));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values",u=D(),ht(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts",m=D(),ht(b.$$.fragment),_=D(),g=M("div"),v=M("h3"),v.textContent="Final Values for Each Stimulus and All Participants",w=D();for(let z=0;z<R.length;z+=1)R[z].c();k=D(),x=M("div"),S=M("h3"),S.textContent="Feedback",T=D();for(let z=0;z<B.length;z+=1)B[z].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(z,J){G(z,e,J),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(b,p,null),y(e,_),y(e,g),y(g,v),y(g,w);for(let j=0;j<R.length;j+=1)R[j]&&R[j].m(g,null);y(e,k),y(e,x),y(x,S),y(x,T);for(let j=0;j<B.length;j+=1)B[j]&&B[j].m(x,null);E=!0,F||(C=gt(a,"input",t[3]),F=!0)},p(z,[J]){const j={};J&4&&(j.stimuli=z[2]),c.$set(j);const X={};if(J&4&&(X.stimuli=z[2]),b.$set(X),J&6){L=Bt(z[2]);let O;for(O=0;O<L.length;O+=1){const H=Sd(z,L,O);R[O]?(R[O].p(H,J),Y(R[O],1)):(R[O]=Td(H),R[O].c(),Y(R[O],1),R[O].m(g,null))}for(Gt(),O=L.length;O<R.length;O+=1)W(O);Xt()}if(J&1){A=Bt(z[0]);let O;for(O=0;O<A.length;O+=1){const H=Md(z,A,O);B[O]?B[O].p(H,J):(B[O]=Cd(H),B[O].c(),B[O].m(x,null))}for(;O<B.length;O+=1)B[O].d(1);B.length=A.length}},i(z){if(!E){Y(c.$$.fragment,z),Y(b.$$.fragment,z);for(let J=0;J<L.length;J+=1)Y(R[J]);E=!0}},o(z){K(c.$$.fragment,z),K(b.$$.fragment,z),R=R.filter(Boolean);for(let J=0;J<R.length;J+=1)K(R[J]);E=!1},d(z){z&&V(e),ct(c),ct(b),Ve(R,z),Ve(B,z),F=!1,C()}}}function vM(t,e,n){let i,r,o,a=[];const l=async u=>{const c=[],h=[];for(const p of u.target.files){const d=await p.text();c.push(JSON.parse(d)),h.push(p.name)}n(0,a=c),console.log(a)},f=u=>{if(u.lenght===0)return[];const c=[];for(const h of u)for(const p of h.tests){let d=p.encoding;(p.encoding==="audio"||p.encoding==="waveform")&&(d=`${p.encoding} + ${p.audioFile.startsWith("./Fluid")?"piano":"drums"}`),c.push({...h.demographics,...p,date:h.date,testType:d})}return console.log(c),c},s=u=>{if(u.length===0)return[];const c=ln(u,h=>h.testType).map(([h,p])=>{const d=p.map(m=>m.final);return{encoding:h,finals:d,finalMean:jn(d),finalVar:ji(d),trialCounts:p.map(m=>m.trialCount)}});return console.log(c),c};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=f(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ke(i.map(u=>Math.abs(u.final))))},[a,o,r,l,i]}class xM extends zt{constructor(e){super(),Ut(this,e,vM,wM,Ot,{})}}function kM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&V(e),t[6](null)}}}function MM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=300}=e,f;qe(()=>{console.log(o),console.log(i);const u=De({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[ql(i,{x:c=>c,strokeWidth:.5}),Ol(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${Math.floor(h/3)+1}-${h%3+1}`,fill:"black",stroke:"white"})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){oe[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class SM extends zt{constructor(e){super(),Ut(this,e,MM,kM,Ot,{data:3,domain:4,title:5,width:0,height:1})}}function TM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){G(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&V(e),t[5](null)}}}function CM(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;qe(()=>{const s=i.map(c=>({partID:c.partID,...l(c.finals)}));console.log(i,s);const u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.partID)},marks:[ro(s,{x:c=>c.mean,y:c=>c.partID,symbol:"diamond"}),ro(i,{x:c=>c.mean,y:c=>c.partID}),Bl(s,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),Pl([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=jn(s),d=1.96*(lo(s)/Math.sqrt(u)),m=c-d,b=c+d;return{mean:c,low:m,high:b}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"partis"in s&&n(3,i=s.partis),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class ia extends zt{constructor(e){super(),Ut(this,e,CM,TM,Ot,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Ad(t,e,n){const i=t.slice();return i[13]=e[n],i}function Ed(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new SM({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=M("b"),i=ot(n),r=D(),ht(o.$$.fragment)},m(l,f){G(l,e,f),y(e,i),G(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&32)&&n!==(n=l[13].encoding+"")&&Lt(i,n);const s={};f&32&&(s.data=l[13].finals),f&32&&(s.title=l[13].encoding),f&16&&(s.domain=[0,l[4]]),o.$set(s)},i(l){a||(Y(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function AM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,W,A,B,z,J,j,X,O,H,Q,at;c=new Xu({props:{stimuli:t[5]}}),b=new ju({props:{stimuli:t[5]}}),k=new ia({props:{partis:t[3]}}),E=new ia({props:{partis:t[2]}}),R=new ia({props:{partis:t[0]}}),z=new ia({props:{partis:t[1]}});let nt=Bt(t[5]),Z=[];for(let N=0;N<nt.length;N+=1)Z[N]=Ed(Ad(t,nt,N));const q=N=>K(Z[N],1,1,()=>{Z[N]=null});return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis (Within-Participant Variance)",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values per Stimulus",u=D(),ht(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts per Stimulus",m=D(),ht(b.$$.fragment),_=D(),g=M("div"),v=M("h3"),v.textContent="Mean and CI of Final Values per Participant",w=D(),ht(k.$$.fragment),x=D(),S=M("h4"),S.textContent="Only Audio",T=D(),ht(E.$$.fragment),F=D(),C=M("h4"),C.textContent="Only Color",L=D(),ht(R.$$.fragment),W=D(),A=M("h4"),A.textContent="Only Waveform",B=D(),ht(z.$$.fragment),J=D(),j=M("div"),X=M("h3"),X.textContent="Final Values for Each Stimulus and All Participants",O=D();for(let N=0;N<Z.length;N+=1)Z[N].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(N,$){G(N,e,$),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(b,p,null),y(e,_),y(e,g),y(g,v),y(g,w),ut(k,g,null),y(g,x),y(g,S),y(g,T),ut(E,g,null),y(g,F),y(g,C),y(g,L),ut(R,g,null),y(g,W),y(g,A),y(g,B),ut(z,g,null),y(e,J),y(e,j),y(j,X),y(j,O);for(let P=0;P<Z.length;P+=1)Z[P]&&Z[P].m(j,null);H=!0,Q||(at=gt(a,"input",t[6]),Q=!0)},p(N,[$]){const P={};$&32&&(P.stimuli=N[5]),c.$set(P);const tt={};$&32&&(tt.stimuli=N[5]),b.$set(tt);const U={};$&8&&(U.partis=N[3]),k.$set(U);const mt={};$&4&&(mt.partis=N[2]),E.$set(mt);const rt={};$&1&&(rt.partis=N[0]),R.$set(rt);const pt={};if($&2&&(pt.partis=N[1]),z.$set(pt),$&48){nt=Bt(N[5]);let ft;for(ft=0;ft<nt.length;ft+=1){const dt=Ad(N,nt,ft);Z[ft]?(Z[ft].p(dt,$),Y(Z[ft],1)):(Z[ft]=Ed(dt),Z[ft].c(),Y(Z[ft],1),Z[ft].m(j,null))}for(Gt(),ft=nt.length;ft<Z.length;ft+=1)q(ft);Xt()}},i(N){if(!H){Y(c.$$.fragment,N),Y(b.$$.fragment,N),Y(k.$$.fragment,N),Y(E.$$.fragment,N),Y(R.$$.fragment,N),Y(z.$$.fragment,N);for(let $=0;$<nt.length;$+=1)Y(Z[$]);H=!0}},o(N){K(c.$$.fragment,N),K(b.$$.fragment,N),K(k.$$.fragment,N),K(E.$$.fragment,N),K(R.$$.fragment,N),K(z.$$.fragment,N),Z=Z.filter(Boolean);for(let $=0;$<Z.length;$+=1)K(Z[$]);H=!1},d(N){N&&V(e),ct(c),ct(b),ct(k),ct(E),ct(R),ct(z),Ve(Z,N),Q=!1,at()}}}function EM(t,e,n){let i,r,o,a,l,f,s,u=[];const c=async m=>{const b=[],_=[];for(const g of m.target.files){const v=await g.text();b.push(JSON.parse(v)),_.push(g.name)}n(7,u=b),console.log(u)},h=m=>{if(m.lenght===0)return[];const b=[];for(const _ of m)for(const g of _.tests){let v=g.encoding;(g.encoding==="audio"||g.encoding==="waveform")&&(v=`${g.encoding} + ${g.audioFile.startsWith("./Fluid")?"piano":"drums"}`),b.push({..._.demographics,...g,date:_.date,testType:v})}return console.log(b),b},p=m=>{if(m.length===0)return[];const b=ln(m,_=>_.testType).map(([_,g])=>{const v=g.map(w=>w.final);return{encoding:_,finals:v,finalMean:jn(v),finalVar:ji(v),trialCounts:g.map(w=>w.trialCount)}});return console.log(b),b},d=(m,b)=>{if(m.length===0)return[];b&&(m=m.filter(g=>g.testType===b));const _=ln(m,g=>g.partID).map(([g,v])=>{const w=v.map(k=>k.final);return{partID:g,finals:w,finalMean:jn(w),finalVar:ji(w),trialCounts:v.map(k=>k.trialCount)}});return console.log(_),_};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=h(u)),t.$$.dirty&256&&n(5,r=p(i)),t.$$.dirty&256&&n(4,o=ke(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=d(i)),t.$$.dirty&256&&n(2,l=d(i,"audio + piano")),t.$$.dirty&256&&n(1,f=d(i,"waveform + piano")),t.$$.dirty&256&&n(0,s=d(i,"color"))},[s,f,l,a,o,r,c,u,i]}class $M extends zt{constructor(e){super(),Ut(this,e,EM,AM,Ot,{})}}function NM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){G(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&V(e),t[7](null)}}}function DM(t,e,n){let{title:i=void 0}=e,{width:r=600}=e,{height:o=200}=e,{data:a}=e,{x:l="x"}=e,{y:f="y"}=e,s;qe(()=>{n(2,s.textContent="",s);const c=De({title:i,width:r,height:o,x:{domain:[0,70]},marks:[vk(a,{x:l,y:f,stroke:"#ccc"}),Uu([0])]});s.appendChild(c)});function u(c){oe[c?"unshift":"push"](()=>{s=c,n(2,s)})}return t.$$set=c=>{"title"in c&&n(3,i=c.title),"width"in c&&n(0,r=c.width),"height"in c&&n(1,o=c.height),"data"in c&&n(4,a=c.data),"x"in c&&n(5,l=c.x),"y"in c&&n(6,f=c.y)},[r,o,s,i,a,l,f,u]}class FM extends zt{constructor(e){super(),Ut(this,e,DM,NM,Ot,{title:3,width:0,height:1,data:4,x:5,y:6})}}function $d(t,e){return t==null?e:typeof t=="function"?t:n=>n[t]}function LM(t,e,n,i,r,o){const a=new Float64Array(o),l=(o-1)/(r-i);for(let f=0;f<t.length;++f){const s=t[f],u=e(s,f,t),c=n(s,f,t);if(!(Number.isFinite(u)&&Number.isFinite(c)))continue;const h=(u-i)*l,p=Math.floor(h),d=p+1;0<=p&&d<o?(a[p]+=(d-h)*c,a[d]+=(h-p)*c):p===-1?a[d]+=(h-p)*c:d===o&&(a[p]+=(d-h)*c)}return a}function Nd(t,e=!1){const n=new Float64Array(5),i=new Float64Array(4);IM(n,i,t);const r=Float64Array.of(0,i[1]-n[1]*i[0],i[2]-n[2]*i[0],i[3]-n[3]*i[0],-n[4]*i[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(i[0]+i[1]+i[2]+i[3])/o,l=(r[1]+r[2]+r[3]+r[4])/o;return{sigma:t,negative:e,a:n,b_causal:i,b_anticausal:r,sum_causal:a,sum_anticausal:l}}function IM(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),l=.6318/n,f=1.997/n,s=Float64Array.of(-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l),-a*Math.cos(f),a*Math.sin(f),-a*Math.cos(-f),a*Math.sin(-f)),u=n*2.5066282746310007,c=Float64Array.of(r[0],r[1],0,0,0,0,0,0),h=Float64Array.of(1,0,s[0],s[1],0,0,0,0,0,0);let p,d;for(d=2;d<8;d+=2){for(c[d]=s[d]*c[d-2]-s[d+1]*c[d-1],c[d+1]=s[d]*c[d-1]+s[d+1]*c[d-2],p=d-2;p>0;p-=2)c[p]+=s[d]*c[p-2]-s[d+1]*c[p-1],c[p+1]+=s[d]*c[p-1]+s[d+1]*c[p-2];for(p=0;p<=d;p+=2)c[p]+=r[d]*h[p]-r[d+1]*h[p+1],c[p+1]+=r[d]*h[p+1]+r[d+1]*h[p];for(h[d+2]=s[d]*h[d]-s[d+1]*h[d+1],h[d+3]=s[d]*h[d+1]+s[d+1]*h[d],p=d;p>0;p-=2)h[p]+=s[d]*h[p-2]-s[d+1]*h[p-1],h[p+1]+=s[d]*h[p-1]+s[d+1]*h[p-2]}for(d=0;d<4;++d)p=d<<1,e[d]=c[p]/u,t[d+1]=h[p+2]}function RM(t,e,n,i=1,r=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),l=r,f=PM){const s=i*2,u=i*3,c=i*4,h=i*n;let p,d;for(f(r,e,n,i,t.b_causal,3,t.a,4,t.sum_causal,a,t.sigma),d=4,p=c;d<n;++d,p+=i)r[d]=t.b_causal[0]*e[p]+t.b_causal[1]*e[p-i]+t.b_causal[2]*e[p-s]+t.b_causal[3]*e[p-u]-t.a[1]*r[d-1]-t.a[2]*r[d-2]-t.a[3]*r[d-3]-t.a[4]*r[d-4];for(f(o,e,n,-i,t.b_anticausal,4,t.a,4,t.sum_anticausal,a,t.sigma),d=4,p=h-i*5;d<n;++d,p-=i)o[d]=t.b_anticausal[1]*e[p+i]+t.b_anticausal[2]*e[p+s]+t.b_anticausal[3]*e[p+u]+t.b_anticausal[4]*e[p+c]-t.a[1]*o[d-1]-t.a[2]*o[d-2]-t.a[3]*o[d-3]-t.a[4]*o[d-4];if(t.negative)for(d=0,p=0;d<n;++d,p+=i)l[p]=r[d]+o[n-d-1];else for(d=0,p=0;d<n;++d,p+=i)l[p]=Math.max(0,r[d]+o[n-d-1]);return l}function PM(t,e,n,i,r,o,a,l,f,s){const u=Math.abs(i)*n,c=i<0?u+i:0;let h,p,d;for(p=0;p<l;++p)for(s[p]=p<=o?r[p]:0,d=1;d<=l&&d<=p;++d)s[p]-=a[d]*s[p-d];for(d=0;d<l;++d)for(t[d]=0,p=1;p<=d;++p)h=c+i*p,h>=0&&h<u&&(t[d]+=s[d-p]*e[h]);const m=e[c];if(m>0)for(d=0;d<l;++d)t[d]+=s[d]*m}function OM(t,e,n=0){const i=t.length;let r,o;for(let a=0;a<i;++a){const l=e(t[a],a,t);l!=null&&(r===void 0?l>=l&&(r=o=l):(l<r&&(r=l),l>o&&(o=l)))}return[r-n,o+n]}function UM(t,e){const n=t.map(e).filter(s=>s!=null&&s>=s);n.sort((s,u)=>s-u);const i=zM(n),r=Dd(n,.25),o=Dd(n,.75),a=n.length,l=(o-r)/1.34;return 1.06*(Math.min(i,l)||i||Math.abs(r)||1)*Math.pow(a,-.2)}function zM(t){const e=t.length;let n=0,i,r=0,o=0;for(let a=0;a<e;++a){const l=t[a];i=l-r,r+=i/++n,o+=i*(l-r)}return n>1?Math.sqrt(o/(n-1)):NaN}function Dd(t,e){const n=t.length;if(!n)return NaN;if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];const i=(n-1)*e,r=Math.floor(i),o=t[r];return o+(t[r+1]-o)*(i-r)}function BM(t,e={}){const{adjust:n=1,pad:i=3,bins:r=512}=e,o=$d(e.x,_=>_),a=$d(e.weight,()=>1/t.length);let l=e.bandwidth??n*UM(t,o);const[f,s]=e.extent??OM(t,o,i*l),u=LM(t,o,a,f,s,r),c=(s-f)/(r-1),h=u.some(_=>_<0);let p=Nd(l/c,h),d;function*m(_="x",g="y"){const v=b.grid(),w=1/c;for(let k=0;k<r;++k)yield{[_]:f+k*c,[g]:v[k]*w}}const b={[Symbol.iterator]:m,points:m,grid:()=>d||(d=RM(p,u,r)),extent:()=>[f,s],bandwidth(_){return arguments.length?(_!==l&&(l=_,d=null,p=Nd(l/c,h)),b):l}};return b}function qM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){G(o,e,a),y(e,n),t[10](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&V(e),t[10](null)}}}function WM(t,e,n){let i,{values:r}=e,{title:o=""}=e,{xLabel:a="some value"}=e,{xDomain:l=void 0}=e,{width:f=1e3}=e,{height:s=100}=e,{bandwidth:u=.25}=e,{bins:c=256}=e,{pad:h=4}=e,p;qe(()=>{const m=[...i.bandwidth(u)];n(2,p.textContent="",p);const b=De({width:f,height:s,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:l},y:{label:"density",type:"linear"},marks:[ak(m,{x:"x",y:"y",fill:"#ccc"}),ql(r,{x:_=>_,strokeWidth:.5}),Uu([0])]});p.appendChild(b)});function d(m){oe[m?"unshift":"push"](()=>{p=m,n(2,p)})}return t.$$set=m=>{"values"in m&&n(3,r=m.values),"title"in m&&n(4,o=m.title),"xLabel"in m&&n(5,a=m.xLabel),"xDomain"in m&&n(6,l=m.xDomain),"width"in m&&n(0,f=m.width),"height"in m&&n(1,s=m.height),"bandwidth"in m&&n(7,u=m.bandwidth),"bins"in m&&n(8,c=m.bins),"pad"in m&&n(9,h=m.pad)},t.$$.update=()=>{t.$$.dirty&904&&(i=BM(r,{bandwidth:u,pad:h,bins:c}))},[f,s,p,r,o,a,l,u,c,h,d]}class YM extends zt{constructor(e){super(),Ut(this,e,WM,qM,Ot,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function HM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){G(o,e,a),y(e,n),t[13](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&V(e),t[13](null)}}}function VM(t,e,n){let{title:i=""}=e,{data:r}=e,{x:o="x"}=e,{y:a="y"}=e,{tipTitle:l=null}=e,{xLabel:f=null}=e,{yLabel:s=null}=e,{xDomain:u=void 0}=e,{yDomain:c=void 0}=e,{grid:h=!1}=e,{width:p=300}=e,{height:d=300}=e,m;qe(()=>{console.log(r,o,a),n(2,m.textContent="",m);const _=De({width:p,height:d,title:i,grid:h,style:{background:"none"},x:{label:f||(typeof o=="string"?o:"x"),domain:u},y:{label:s||(typeof a=="string"?a:"y"),domain:c},marks:[ro(r,{x:o,y:a}),V2(r,n2({x:o,y:a,title:l})),Bl({length:1},{x1:u[0],x2:u[1],y1:c[0],y2:c[1],stroke:"#ccc"})]});m.appendChild(_)});function b(_){oe[_?"unshift":"push"](()=>{m=_,n(2,m)})}return t.$$set=_=>{"title"in _&&n(3,i=_.title),"data"in _&&n(4,r=_.data),"x"in _&&n(5,o=_.x),"y"in _&&n(6,a=_.y),"tipTitle"in _&&n(7,l=_.tipTitle),"xLabel"in _&&n(8,f=_.xLabel),"yLabel"in _&&n(9,s=_.yLabel),"xDomain"in _&&n(10,u=_.xDomain),"yDomain"in _&&n(11,c=_.yDomain),"grid"in _&&n(12,h=_.grid),"width"in _&&n(0,p=_.width),"height"in _&&n(1,d=_.height)},[p,d,m,i,r,o,a,l,f,s,u,c,h,b]}class Fd extends zt{constructor(e){super(),Ut(this,e,VM,HM,Ot,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function Ld(t,e,n){const i=t.slice();return i[12]=e[n],i}function Id(t,e,n){const i=t.slice();return i[15]=e[n],i}function Rd(t,e,n){const i=t.slice();return i[18]=e[n],i}function Pd(t,e,n){const i=t.slice();return i[21]=e[n],i}function Od(t,e,n){const i=t.slice();return i[24]=e[n],i}function Ud(t,e,n){const i=t.slice();return i[27]=e[n][0],i[28]=e[n][1],i}function zd(t){let e,n=t[27]+"",i,r,o=t[28].length+"",a,l;return{c(){e=M("p"),i=ot(n),r=ot(": "),a=ot(o),l=ot(" times")},m(f,s){G(f,e,s),y(e,i),y(e,r),y(e,a),y(e,l)},p(f,s){s&1&&n!==(n=f[27]+"")&&Lt(i,n),s&1&&o!==(o=f[28].length+"")&&Lt(a,o)},d(f){f&&V(e)}}}function Bd(t){let e,n;return e=new YM({props:{title:`Density of final values for ${t[24][0]}`,values:t[24][1].map(jd),xLabel:"final values",xDomain:[-1,20],bandwidth:jM}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=`Density of final values for ${i[24][0]}`),r&2&&(o.values=i[24][1].map(jd)),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function qd(t){let e,n=t[21].encoding+"",i,r,o,a;return o=new cb({props:{data:t[21].finals,title:t[21].encoding,domain:[0,t[2]]}}),{c(){e=M("b"),i=ot(n),r=D(),ht(o.$$.fragment)},m(l,f){G(l,e,f),y(e,i),G(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&8)&&n!==(n=l[21].encoding+"")&&Lt(i,n);const s={};f&8&&(s.data=l[21].finals),f&8&&(s.title=l[21].encoding),f&4&&(s.domain=[0,l[2]]),o.$set(s)},i(l){a||(Y(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ct(o,l)}}}function Wd(t){let e,n=t[18]+"",i;return{c(){e=M("p"),i=ot(n)},m(r,o){G(r,e,o),y(e,i)},p(r,o){o&1&&n!==(n=r[18]+"")&&Lt(i,n)},d(r){r&&V(e)}}}function Yd(t){let e,n,i,r=t[15].demographics.internalPID+"",o,a,l=t[15].demographics.partID+"",f,s,u,c=Bt(t[15].demographics.partFeedback.split(`
`)),h=[];for(let p=0;p<c.length;p+=1)h[p]=Wd(Rd(t,c,p));return{c(){e=M("div"),n=M("b"),i=ot("P"),o=ot(r),a=D(),f=ot(l),s=ot(`:
        `);for(let p=0;p<h.length;p+=1)h[p].c();u=D(),we(e,"text-align","left")},m(p,d){G(p,e,d),y(e,n),y(n,i),y(n,o),y(e,a),y(e,f),y(e,s);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(e,null);y(e,u)},p(p,d){if(d&1&&r!==(r=p[15].demographics.internalPID+"")&&Lt(o,r),d&1&&l!==(l=p[15].demographics.partID+"")&&Lt(f,l),d&1){c=Bt(p[15].demographics.partFeedback.split(`
`));let m;for(m=0;m<c.length;m+=1){const b=Rd(p,c,m);h[m]?h[m].p(b,d):(h[m]=Wd(b),h[m].c(),h[m].m(e,u))}for(;m<h.length;m+=1)h[m].d(1);h.length=c.length}},d(p){p&&V(e),Ve(h,p)}}}function Hd(t){let e,n;return e=new FM({props:{title:t[12].encoding,width:XM,height:150,data:t[12].data,x:KM,y:t[7]}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=i[12].encoding),r&2&&(o.data=i[12].data),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function GM(t){let e,n,i,r,o,a,l,f,s,u,c,h=t[0].length+"",p,d,m=t[1].length+"",b,_,g=t[4].length+"",v,w,k,x,S,T,E,F,C,L,R,W,A,B,z,J,j,X,O,H,Q,at,nt,Z,q,N,$,P,tt,U,mt,rt,pt,ft,dt,Rt=Bt(ln(t[0],Vd).sort(Gd)),Et=[];for(let et=0;et<Rt.length;et+=1)Et[et]=zd(Ud(t,Rt,et));let Nt=Bt(ln(t[1],Xd)),yt=[];for(let et=0;et<Nt.length;et+=1)yt[et]=Bd(Od(t,Nt,et));const Vt=et=>K(yt[et],1,1,()=>{yt[et]=null});L=new Fd({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),W=new Fd({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),j=new Xu({props:{stimuli:t[3]}}),at=new ju({props:{stimuli:t[3]}});let Fe=Bt(t[3]),Dt=[];for(let et=0;et<Fe.length;et+=1)Dt[et]=qd(Pd(t,Fe,et));const Gl=et=>K(Dt[et],1,1,()=>{Dt[et]=null});let In=Bt(t[0].filter(Zd)),ie=[];for(let et=0;et<In.length;et+=1)ie[et]=Yd(Id(t,In,et));let de=Bt(t[1]),Ft=[];for(let et=0;et<de.length;et+=1)Ft[et]=Hd(Ld(t,de,et));const li=et=>K(Ft[et],1,1,()=>{Ft[et]=null});return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("div"),o=M("label"),a=ot(`Results JSONs and Prolific demographics CSV
      `),l=M("input"),f=D(),s=M("button"),s.textContent="export JSON",u=D(),c=M("div"),p=ot(h),d=ot(` participants completed -
    `),b=ot(m),_=ot(` tests -
    `),v=ot(g),w=ot(" filtered tests"),k=D(),x=M("div"),S=M("h3"),S.textContent="Encoding order",T=D();for(let et=0;et<Et.length;et+=1)Et[et].c();E=D(),F=M("div");for(let et=0;et<yt.length;et+=1)yt[et].c();C=D(),ht(L.$$.fragment),R=D(),ht(W.$$.fragment),A=D(),B=M("div"),z=M("h3"),z.textContent="Mean and CI of Final Values",J=D(),ht(j.$$.fragment),X=D(),O=M("div"),H=M("h3"),H.textContent="Mean and CI of Trial Counts",Q=D(),ht(at.$$.fragment),nt=D(),Z=M("div"),q=M("h3"),q.textContent="Final Values for Each Stimulus and All Participants",N=D();for(let et=0;et<Dt.length;et+=1)Dt[et].c();$=D(),P=M("div"),tt=M("h3"),tt.textContent="Feedback",U=D();for(let et=0;et<ie.length;et+=1)ie[et].c();mt=D(),rt=M("div");for(let et=0;et<Ft.length;et+=1)Ft[et].c();I(l,"type","file"),I(l,"accept",".json,.csv"),l.multiple=!0},m(et,bt){G(et,e,bt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),y(r,f),y(r,s),y(e,u),y(e,c),y(c,p),y(c,d),y(c,b),y(c,_),y(c,v),y(c,w),y(e,k),y(e,x),y(x,S),y(x,T);for(let Tt=0;Tt<Et.length;Tt+=1)Et[Tt]&&Et[Tt].m(x,null);y(e,E),y(e,F);for(let Tt=0;Tt<yt.length;Tt+=1)yt[Tt]&&yt[Tt].m(F,null);y(e,C),ut(L,e,null),y(e,R),ut(W,e,null),y(e,A),y(e,B),y(B,z),y(B,J),ut(j,B,null),y(e,X),y(e,O),y(O,H),y(O,Q),ut(at,O,null),y(e,nt),y(e,Z),y(Z,q),y(Z,N);for(let Tt=0;Tt<Dt.length;Tt+=1)Dt[Tt]&&Dt[Tt].m(Z,null);y(e,$),y(e,P),y(P,tt),y(P,U);for(let Tt=0;Tt<ie.length;Tt+=1)ie[Tt]&&ie[Tt].m(P,null);y(e,mt),y(e,rt);for(let Tt=0;Tt<Ft.length;Tt+=1)Ft[Tt]&&Ft[Tt].m(rt,null);pt=!0,ft||(dt=[gt(l,"input",t[5]),gt(s,"click",t[6])],ft=!0)},p(et,[bt]){if((!pt||bt&1)&&h!==(h=et[0].length+"")&&Lt(p,h),(!pt||bt&2)&&m!==(m=et[1].length+"")&&Lt(b,m),(!pt||bt&16)&&g!==(g=et[4].length+"")&&Lt(v,g),bt&1){Rt=Bt(ln(et[0],Vd).sort(Gd));let lt;for(lt=0;lt<Rt.length;lt+=1){const pe=Ud(et,Rt,lt);Et[lt]?Et[lt].p(pe,bt):(Et[lt]=zd(pe),Et[lt].c(),Et[lt].m(x,null))}for(;lt<Et.length;lt+=1)Et[lt].d(1);Et.length=Rt.length}if(bt&2){Nt=Bt(ln(et[1],Xd));let lt;for(lt=0;lt<Nt.length;lt+=1){const pe=Od(et,Nt,lt);yt[lt]?(yt[lt].p(pe,bt),Y(yt[lt],1)):(yt[lt]=Bd(pe),yt[lt].c(),Y(yt[lt],1),yt[lt].m(F,null))}for(Gt(),lt=Nt.length;lt<yt.length;lt+=1)Vt(lt);Xt()}const Tt={};bt&1&&(Tt.data=et[0]),L.$set(Tt);const Te={};bt&1&&(Te.data=et[0]),W.$set(Te);const nn={};bt&8&&(nn.stimuli=et[3]),j.$set(nn);const Lo={};if(bt&8&&(Lo.stimuli=et[3]),at.$set(Lo),bt&12){Fe=Bt(et[3]);let lt;for(lt=0;lt<Fe.length;lt+=1){const pe=Pd(et,Fe,lt);Dt[lt]?(Dt[lt].p(pe,bt),Y(Dt[lt],1)):(Dt[lt]=qd(pe),Dt[lt].c(),Y(Dt[lt],1),Dt[lt].m(Z,null))}for(Gt(),lt=Fe.length;lt<Dt.length;lt+=1)Gl(lt);Xt()}if(bt&1){In=Bt(et[0].filter(Zd));let lt;for(lt=0;lt<In.length;lt+=1){const pe=Id(et,In,lt);ie[lt]?ie[lt].p(pe,bt):(ie[lt]=Yd(pe),ie[lt].c(),ie[lt].m(P,null))}for(;lt<ie.length;lt+=1)ie[lt].d(1);ie.length=In.length}if(bt&2){de=Bt(et[1]);let lt;for(lt=0;lt<de.length;lt+=1){const pe=Ld(et,de,lt);Ft[lt]?(Ft[lt].p(pe,bt),Y(Ft[lt],1)):(Ft[lt]=Hd(pe),Ft[lt].c(),Y(Ft[lt],1),Ft[lt].m(rt,null))}for(Gt(),lt=de.length;lt<Ft.length;lt+=1)li(lt);Xt()}},i(et){if(!pt){for(let bt=0;bt<Nt.length;bt+=1)Y(yt[bt]);Y(L.$$.fragment,et),Y(W.$$.fragment,et),Y(j.$$.fragment,et),Y(at.$$.fragment,et);for(let bt=0;bt<Fe.length;bt+=1)Y(Dt[bt]);for(let bt=0;bt<de.length;bt+=1)Y(Ft[bt]);pt=!0}},o(et){yt=yt.filter(Boolean);for(let bt=0;bt<yt.length;bt+=1)K(yt[bt]);K(L.$$.fragment,et),K(W.$$.fragment,et),K(j.$$.fragment,et),K(at.$$.fragment,et),Dt=Dt.filter(Boolean);for(let bt=0;bt<Dt.length;bt+=1)K(Dt[bt]);Ft=Ft.filter(Boolean);for(let bt=0;bt<Ft.length;bt+=1)K(Ft[bt]);pt=!1},d(et){et&&V(e),Ve(Et,et),Ve(yt,et),ct(L),ct(W),ct(j),ct(at),Ve(Dt,et),Ve(ie,et),Ve(Ft,et),ft=!1,$e(dt)}}}const XM=800;let jM=1,ZM=20;const Vd=t=>t.encodingOrder,Gd=(t,e)=>t[1].lenght-e[1].length,Xd=t=>t.testType,jd=t=>t.final,Zd=t=>t.demographics.partFeedback.trim().length>0,KM=(t,e)=>e;function JM(t,e,n){let i,r,o,a,l=[],f=null;const s=async m=>{const b=[];for(const g of m.target.files)if(g.name.endsWith(".csv")){const v=await g.text();f=r3(v),console.log("p demo",f)}else{const v=await g.text();b.push(JSON.parse(v))}const _=ln(b,g=>g.demographics.partID);console.log(`${_.length} participants`,_),n(0,l=b.filter(g=>g.studyStep==="feedback").map((g,v)=>({...g,demographics:{...g.demographics,internalPID:v+1},prolificDemogr:f.filter(w=>w["Participant id"]===g.demographics.partID)[0],finalAudio:g.tests.filter(w=>w.encoding.startsWith("audio"))[0].final,finalColor:g.tests.filter(w=>w.encoding.startsWith("color"))[0].final,finalWaveform:g.tests.filter(w=>w.encoding.startsWith("waveform"))[0].final,encodingOrder:g.tests.map(w=>w.encoding).join(", ")}))),console.log("participants",l)},u=m=>{if(m.lenght===0)return[];const b=(g,v=5)=>{const w=Math.floor(g/v)*v;return`${w}-${w+v-1}`},_=[];for(const g of m)for(const[v,w]of g.tests.entries()){let k=w.encoding;(w.encoding==="audio"||w.encoding==="waveform")&&(k=`${w.encoding} + ${w.audioFile.startsWith("./Fluid")?"piano":"drums"}`),_.push({...g.demographics,partAge:g.demographics.partAge?g.demographics.partAge:b(g.prolificDemogr.Age),partSex:g.demographics.partGender?g.demographics.partGender:g.prolificDemogr.Sex,countryBirth:g.prolificDemogr["Country of birth"],countryResidence:g.prolificDemogr["Country of residence"],prolificApprovals:g.prolificDemogr["Total approvals"],...w,date:g.date,testType:k,testOrder:v})}return console.log("tests",_),_},c=(m,b)=>m.filter(_=>_.final<b),h=m=>m.length===0?[]:ln(m,_=>_.testType).map(([_,g])=>{const v=g.map(w=>w.final);return{encoding:_,testType:_,finals:v,finalMean:jn(v),finalVar:ji(v),trialCounts:g.map(w=>w.trialCount)}}),p=()=>{const m=JSON.stringify(l,void 0,2),b=new Blob([m],{type:"text/plain;charset=utf-8"});Za(b,"participants.json");const _=JSON.stringify(i,void 0,2),g=new Blob([_],{type:"text/plain;charset=utf-8"});Za(g,"tests.json")},d=m=>Math.abs(m);return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=u(l)),t.$$.dirty&2&&n(4,r=c(i,ZM)),t.$$.dirty&2&&n(3,o=h(i)),t.$$.dirty&2&&n(2,a=ke(i.map(m=>Math.abs(m.final)))),t.$$.dirty&2&&console.log("tests by enc",ln(i,m=>m.testType))},[l,i,a,o,r,s,p,d]}class QM extends zt{constructor(e){super(),Ut(this,e,JM,GM,Ot,{})}}function Kd(t,e,n){const i=t.slice();return i[8]=e[n],i}function Jd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=ot(n),e.__value=t[8],st(e,e.__value)},m(r,o){G(r,e,o),y(e,i)},p:_t,d(r){r&&V(e)}}}function tS(t){let e,n,i,r,o,a,l,f,s=(t[1]*1e3).toFixed(1)+"",u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,W,A,B,z,J,j,X,O,H,Q,at,nt,Z,q,N=Bt(t[5]),$=[];for(let P=0;P<N.length;P+=1)$[P]=Jd(Kd(t,N,P));return x=new oo({props:{pattern:t[3],audioFile:t[2]}}),T=new oo({props:{pattern:t[4],audioFile:t[2]}}),F=new Xn({props:{pattern:t[3],audioFile:t[2],width:Pn,height:On}}),L=new Xn({props:{pattern:t[4],audioFile:t[2],width:Pn,height:On}}),W=new Hn({props:{pattern:t[3],width:Pn,height:On}}),B=new Hn({props:{pattern:t[4],width:Pn,height:On}}),J=new Vn({props:{pattern:t[3],width:Pn,height:On}}),X=new Vn({props:{pattern:t[4],width:Pn,height:On}}),H=new Gn({props:{pattern:t[3],width:Pn,height:On}}),at=new Gn({props:{pattern:t[4],width:Pn,height:On}}),{c(){e=M("main"),n=M("h2"),n.textContent="Examples",i=D(),r=M("div"),o=M("label"),a=ot(`deviation
      `),l=M("input"),f=ot(`
      (`),u=ot(s),c=ot(" milliseconds)"),h=D(),p=M("label"),d=ot(`instrument sample:
      `),m=M("select");for(let P=0;P<$.length;P+=1)$[P].c();b=D(),_=M("div"),g=M("h2"),g.textContent="early fourth note",v=D(),w=M("h2"),w.textContent="late fourth note",k=D(),ht(x.$$.fragment),S=D(),ht(T.$$.fragment),E=D(),ht(F.$$.fragment),C=D(),ht(L.$$.fragment),R=D(),ht(W.$$.fragment),A=D(),ht(B.$$.fragment),z=D(),ht(J.$$.fragment),j=D(),ht(X.$$.fragment),O=D(),ht(H.$$.fragment),Q=D(),ht(at.$$.fragment),I(l,"type","range"),I(l,"min","0"),I(l,"max","20"),I(l,"step","1"),I(o,"class","svelte-1kjj0oz"),t[2]===void 0&&hn(()=>t[7].call(m)),I(p,"class","svelte-1kjj0oz"),I(_,"class","stimuli svelte-1kjj0oz")},m(P,tt){G(P,e,tt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),st(l,t[0]),y(o,f),y(o,u),y(o,c),y(r,h),y(r,p),y(p,d),y(p,m);for(let U=0;U<$.length;U+=1)$[U]&&$[U].m(m,null);_e(m,t[2],!0),y(e,b),y(e,_),y(_,g),y(_,v),y(_,w),y(_,k),ut(x,_,null),y(_,S),ut(T,_,null),y(_,E),ut(F,_,null),y(_,C),ut(L,_,null),y(_,R),ut(W,_,null),y(_,A),ut(B,_,null),y(_,z),ut(J,_,null),y(_,j),ut(X,_,null),y(_,O),ut(H,_,null),y(_,Q),ut(at,_,null),nt=!0,Z||(q=[gt(l,"change",t[6]),gt(l,"input",t[6]),gt(m,"change",t[7])],Z=!0)},p(P,[tt]){if(tt&1&&st(l,P[0]),(!nt||tt&2)&&s!==(s=(P[1]*1e3).toFixed(1)+"")&&Lt(u,s),tt&32){N=Bt(P[5]);let Vt;for(Vt=0;Vt<N.length;Vt+=1){const Fe=Kd(P,N,Vt);$[Vt]?$[Vt].p(Fe,tt):($[Vt]=Jd(Fe),$[Vt].c(),$[Vt].m(m,null))}for(;Vt<$.length;Vt+=1)$[Vt].d(1);$.length=N.length}tt&36&&_e(m,P[2]);const U={};tt&8&&(U.pattern=P[3]),tt&4&&(U.audioFile=P[2]),x.$set(U);const mt={};tt&16&&(mt.pattern=P[4]),tt&4&&(mt.audioFile=P[2]),T.$set(mt);const rt={};tt&8&&(rt.pattern=P[3]),tt&4&&(rt.audioFile=P[2]),F.$set(rt);const pt={};tt&16&&(pt.pattern=P[4]),tt&4&&(pt.audioFile=P[2]),L.$set(pt);const ft={};tt&8&&(ft.pattern=P[3]),W.$set(ft);const dt={};tt&16&&(dt.pattern=P[4]),B.$set(dt);const Rt={};tt&8&&(Rt.pattern=P[3]),J.$set(Rt);const Et={};tt&16&&(Et.pattern=P[4]),X.$set(Et);const Nt={};tt&8&&(Nt.pattern=P[3]),H.$set(Nt);const yt={};tt&16&&(yt.pattern=P[4]),at.$set(yt)},i(P){nt||(Y(x.$$.fragment,P),Y(T.$$.fragment,P),Y(F.$$.fragment,P),Y(L.$$.fragment,P),Y(W.$$.fragment,P),Y(B.$$.fragment,P),Y(J.$$.fragment,P),Y(X.$$.fragment,P),Y(H.$$.fragment,P),Y(at.$$.fragment,P),nt=!0)},o(P){K(x.$$.fragment,P),K(T.$$.fragment,P),K(F.$$.fragment,P),K(L.$$.fragment,P),K(W.$$.fragment,P),K(B.$$.fragment,P),K(J.$$.fragment,P),K(X.$$.fragment,P),K(H.$$.fragment,P),K(at.$$.fragment,P),nt=!1},d(P){P&&V(e),Ve($,P),ct(x),ct(T),ct(F),ct(L),ct(W),ct(B),ct(J),ct(X),ct(H),ct(at),Z=!1,$e(q)}}}let Pn=600,On=100,Pf=.5,Qd=6,t0=3,e0=!0,n0=0;function eS(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,l=[],f=[];function s(){a=xe(this.value),n(0,a)}function u(){o=gi(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*Pf),t.$$.dirty&2&&n(3,l=Xi(Qd,Pf,t0,-i,e0,n0)),t.$$.dirty&2&&n(4,f=Xi(Qd,Pf,t0,i,e0,n0))},[a,i,o,l,f,r,s,u]}class nS extends zt{constructor(e){super(),Ut(this,e,eS,tS,Ot,{})}}function iS(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){G(l,e,f),y(e,n),t[5](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&V(e),t[5](null),o=!1,a()}}}function rS(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,{currentTrialNumber:o=-1}=e,a=null,l;const f=()=>{r&&l&&(a=Ka(r,i),Ps(a,r.sampleRate,l))};bi(f);const s=()=>{l&&(n(0,l.currentTime=0,l),l.play())};bi(()=>{document.querySelector("html").addEventListener("keyup",c=>{c.key==="p"&&s()})});function u(c){oe[c?"unshift":"push"](()=>{l=c,n(0,l)})}return t.$$set=c=>{"pattern"in c&&n(2,i=c.pattern),"cachedAudio"in c&&n(3,r=c.cachedAudio),"currentTrialNumber"in c&&n(4,o=c.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&16&&o>-1&&(f(),window.setTimeout(s,200))},[l,s,i,r,o,u]}class oS extends zt{constructor(e){super(),Ut(this,e,rS,iS,Ot,{pattern:2,cachedAudio:3,currentTrialNumber:4})}}function ha(t,e){return new URLSearchParams(t.location.search).get(e)}function aS(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio",n.controls=!1},m(l,f){G(l,e,f),y(e,n),t[4](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&V(e),t[4](null),o=!1,a()}}}function lS(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,o=null,a;const l=(u,c)=>{c&&a&&(o=Ka(c,u),Ps(o,c.sampleRate,a))};bi(()=>l(i,r));const f=async()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(u){oe[u?"unshift":"push"](()=>{a=u,n(0,a)})}return t.$$set=u=>{"pattern"in u&&n(2,i=u.pattern),"cachedAudio"in u&&n(3,r=u.cachedAudio)},[a,f,i,r,s]}class fS extends zt{constructor(e){super(),Ut(this,e,lS,aS,Ot,{pattern:2,cachedAudio:3})}}function i0(t){let e;return{c(){e=M("div"),e.innerHTML=`<p>In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p>For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p>By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p>If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do NOT consent and will not participate</button></a>`},m(n,i){G(n,e,i)},d(n){n&&V(e)}}}function r0(t){let e,n,i,r,o,a,l,f,s;return r=new fS({props:{pattern:[.1,.6,1.1],cachedAudio:t[3]}}),{c(){e=M("div"),n=M("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,i=D(),ht(r.$$.fragment),o=D(),a=M("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=D(),f=M("a"),f.innerHTML="<button>I cannot hear the audio and will not participate in this study</button>",I(f,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(u,c){G(u,e,c),y(e,n),y(e,i),ut(r,e,null),y(e,o),y(e,a),y(e,l),y(e,f),s=!0},p(u,c){const h={};c[0]&8&&(h.cachedAudio=u[3]),r.$set(h)},i(u){s||(Y(r.$$.fragment,u),s=!0)},o(u){K(r.$$.fragment,u),s=!1},d(u){u&&V(e),ct(r)}}}function o0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g;return{c(){e=M("div"),n=M("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",i=D(),r=M("p"),o=M("button"),o.textContent="+",a=D(),l=M("button"),l.textContent="-",f=D(),s=Uf("svg"),u=Uf("rect"),m=D(),b=M("p"),b.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,I(u,"width",c=t[0]*.52),I(u,"height",h=t[17]*2),I(u,"fill","#ccc"),I(u,"rx","8"),I(s,"width",p=t[0]*.52+"px"),I(s,"height",d=t[17]*2+"px")},m(v,w){G(v,e,w),y(e,n),y(e,i),y(e,r),y(r,o),y(r,a),y(r,l),y(e,f),y(e,s),y(s,u),y(e,m),y(e,b),_||(g=[gt(o,"click",t[23]),gt(l,"click",t[24])],_=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&I(u,"width",c),w[0]&131072&&h!==(h=v[17]*2)&&I(u,"height",h),w[0]&1&&p!==(p=v[0]*.52+"px")&&I(s,"width",p),w[0]&131072&&d!==(d=v[17]*2+"px")&&I(s,"height",d)},d(v){v&&V(e),_=!1,$e(g)}}}function a0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C;return{c(){e=M("div"),n=M("label"),i=M("span"),i.textContent="Highest finished education (select the best fitting one):",r=D(),o=M("select"),a=M("option"),a.textContent="none",l=M("option"),l.textContent="high school",f=M("option"),f.textContent="bachelor",s=M("option"),s.textContent="master",u=M("option"),u.textContent="phd",c=D(),h=M("label"),p=M("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,d=D(),m=M("input"),b=D(),_=M("label"),g=M("span"),g.textContent="For how many years do you roughly play it/them?",v=D(),w=M("input"),k=D(),x=M("label"),S=M("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,T=D(),E=M("input"),a.__value="none",st(a,a.__value),l.__value="highs",st(l,l.__value),f.__value="bachelor",st(f,f.__value),s.__value="master",st(s,s.__value),u.__value="phd",st(u,u.__value),t[7]===void 0&&hn(()=>t[25].call(o)),I(n,"class","svelte-1u8tzxr"),I(m,"type","text"),I(m,"placeholder","free text"),I(h,"class","svelte-1u8tzxr"),I(w,"type","number"),I(w,"min","0"),I(w,"step","1"),I(_,"class","svelte-1u8tzxr"),I(E,"type","number"),I(E,"min","0"),I(E,"step","1"),I(x,"class","svelte-1u8tzxr"),I(e,"class","demo-form svelte-1u8tzxr")},m(L,R){G(L,e,R),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,l),y(o,f),y(o,s),y(o,u),_e(o,t[7],!0),y(e,c),y(e,h),y(h,p),y(h,d),y(h,m),st(m,t[8]),y(e,b),y(e,_),y(_,g),y(_,v),y(_,w),st(w,t[9]),y(e,k),y(e,x),y(x,S),y(x,T),y(x,E),st(E,t[10]),F||(C=[gt(o,"change",t[25]),gt(m,"input",t[26]),gt(w,"input",t[27]),gt(E,"input",t[28])],F=!0)},p(L,R){R[0]&128&&_e(o,L[7]),R[0]&256&&m.value!==L[8]&&st(m,L[8]),R[0]&512&&xe(w.value)!==L[9]&&st(w,L[9]),R[0]&1024&&xe(E.value)!==L[10]&&st(E,L[10])},d(L){L&&V(e),F=!1,$e(C)}}}function l0(t){let e,n,i,r,o=t[13]&&f0(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=D(),o&&o.c(),i=ti()},m(a,l){G(a,e,l),G(a,n,l),o&&o.m(a,l),G(a,i,l),r=!0},p(a,l){a[13]?o?(o.p(a,l),l[0]&8192&&Y(o,1)):(o=f0(a),o.c(),Y(o,1),o.m(i.parentNode,i)):o&&(Gt(),K(o,1,1,()=>{o=null}),Xt())},i(a){r||(Y(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function f0(t){let e,n,i=t[6]+1+"",r,o,a=t[4].length+"",l,f,s=t[12]+1+"",u,c,h,p,d,m,b;const _=[uS,sS],g=[];function v(w,k){return w[16]==="audio"?0:w[15]===!1?1:-1}return~(h=v(t))&&(p=g[h]=_[h](t)),{c(){e=M("p"),n=ot("Test number "),r=ot(i),o=ot(" / "),l=ot(a),f=ot(", trial number "),u=ot(s),c=D(),p&&p.c(),d=D(),m=M("p"),m.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`},m(w,k){G(w,e,k),y(e,n),y(e,r),y(e,o),y(e,l),y(e,f),y(e,u),G(w,c,k),~h&&g[h].m(w,k),G(w,d,k),G(w,m,k),b=!0},p(w,k){(!b||k[0]&64)&&i!==(i=w[6]+1+"")&&Lt(r,i),(!b||k[0]&16)&&a!==(a=w[4].length+"")&&Lt(l,a),(!b||k[0]&4096)&&s!==(s=w[12]+1+"")&&Lt(u,s);let x=h;h=v(w),h===x?~h&&g[h].p(w,k):(p&&(Gt(),K(g[x],1,1,()=>{g[x]=null}),Xt()),~h?(p=g[h],p?p.p(w,k):(p=g[h]=_[h](w),p.c()),Y(p,1),p.m(d.parentNode,d)):p=null)},i(w){b||(Y(p),b=!0)},o(w){K(p),b=!1},d(w){w&&(V(e),V(c),V(d),V(m)),~h&&g[h].d(w)}}}function sS(t){let e,n,i,r;const o=[pS,dS,hS,cS],a=[];function l(f,s){return f[16]==="waveform"?0:f[16]==="tick"?1:f[16]==="bar"?2:f[16]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=ti()},m(f,s){~e&&a[e].m(f,s),G(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Gt(),K(a[u],1,1,()=>{a[u]=null}),Xt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),Y(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(Y(n),r=!0)},o(f){K(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function uS(t){let e,n,i,r;return i=new oS({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],cachedAudio:t[3],currentTrialNumber:t[12]}}),{c(){e=M("div"),e.innerHTML=`Listen to the audio, the forth note comes either too soon or too late.
          Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=D(),ht(i.$$.fragment)},m(o,a){G(o,e,a),G(o,n,a),ut(i,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.pattern=[...o[1].slice(0,o[1].length-1),o[1].at(-1)+Math.random()*1e-4]),a[0]&8&&(l.cachedAudio=o[3]),a[0]&4096&&(l.currentTrialNumber=o[12]),i.$set(l)},i(o){r||(Y(i.$$.fragment,o),r=!0)},o(o){K(i.$$.fragment,o),r=!1},d(o){o&&(V(e),V(n)),ct(i,o)}}}function cS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Gn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Gn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Gn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function hS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Vn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Vn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Vn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The bar chart shows the size of the gaps between notes in the bars'
            height (example: the bar at 2 shows the gap between the first and
            second note). Look at the third bar, it is either lower (early) or
            higher (late) than the others.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function dS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Hn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Hn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Hn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`Look at the peaks, the gap between the third and forth tick is
            either smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function pS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Xn({props:{pattern:t[18],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),a=new Xn({props:{pattern:t[19],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),h=new Xn({props:{pattern:t[1],audioFile:t[2],cachedAudio:t[3],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the peaks, the gap between the third and forth peaks is either
            smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ht(r.$$.fragment),o=D(),ht(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){G(d,e,m),G(d,n,m),G(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),G(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&4&&(b.audioFile=d[2]),m[0]&8&&(b.cachedAudio=d[3]),m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&4&&(_.audioFile=d[2]),m[0]&8&&(_.cachedAudio=d[3]),m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&4&&(g.audioFile=d[2]),m[0]&8&&(g.cachedAudio=d[3]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ct(r),ct(a),ct(h,d)}}}function s0(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=ot(`Do you have any final feedback/comments?
        `),r=M("textarea")},m(l,f){G(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[11]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&2048&&st(r,l[11])},d(l){l&&V(e),o=!1,a()}}}function u0(t){let e,n,i;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("a"),i.textContent="click here to get your compensation",I(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){G(r,e,o),G(r,n,o),G(r,i,o)},d(r){r&&(V(e),V(n),V(i))}}}function c0(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step",I(e,"class","next-btn svelte-1u8tzxr")},m(r,o){G(r,e,o),n||(i=gt(e,"click",t[20]),n=!0)},p:_t,d(r){r&&V(e),n=!1,i()}}}function mS(t){let e,n,i,r,o,a,l,f,s,u=t[5]==="consent"&&i0(),c=t[5]==="start1"&&r0(t),h=t[5]==="start2"&&o0(t),p=t[5]==="demo"&&a0(t),d=t[5]==="tests"&&l0(t),m=t[5]==="feedback"&&s0(t),b=t[5]==="done"&&u0(),_=!t[14]&&t[5]!=="done"&&c0(t);return{c(){e=M("main"),u&&u.c(),n=D(),c&&c.c(),i=D(),h&&h.c(),r=D(),p&&p.c(),o=D(),d&&d.c(),a=D(),m&&m.c(),l=D(),b&&b.c(),f=D(),_&&_.c(),I(e,"class","svelte-1u8tzxr")},m(g,v){G(g,e,v),u&&u.m(e,null),y(e,n),c&&c.m(e,null),y(e,i),h&&h.m(e,null),y(e,r),p&&p.m(e,null),y(e,o),d&&d.m(e,null),y(e,a),m&&m.m(e,null),y(e,l),b&&b.m(e,null),y(e,f),_&&_.m(e,null),s=!0},p(g,v){g[5]==="consent"?u||(u=i0(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),g[5]==="start1"?c?(c.p(g,v),v[0]&32&&Y(c,1)):(c=r0(g),c.c(),Y(c,1),c.m(e,i)):c&&(Gt(),K(c,1,1,()=>{c=null}),Xt()),g[5]==="start2"?h?h.p(g,v):(h=o0(g),h.c(),h.m(e,r)):h&&(h.d(1),h=null),g[5]==="demo"?p?p.p(g,v):(p=a0(g),p.c(),p.m(e,o)):p&&(p.d(1),p=null),g[5]==="tests"?d?(d.p(g,v),v[0]&32&&Y(d,1)):(d=l0(g),d.c(),Y(d,1),d.m(e,a)):d&&(Gt(),K(d,1,1,()=>{d=null}),Xt()),g[5]==="feedback"?m?m.p(g,v):(m=s0(g),m.c(),m.m(e,l)):m&&(m.d(1),m=null),g[5]==="done"?b||(b=u0(),b.c(),b.m(e,f)):b&&(b.d(1),b=null),!g[14]&&g[5]!=="done"?_?_.p(g,v):(_=c0(g),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i(g){s||(Y(c),Y(d),s=!0)},o(g){K(c),K(d),s=!1},d(g){g&&V(e),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d(),d&&d.d(),m&&m.d(),b&&b.d(),_&&_.d()}}}const gS="/store";let h0=.5;const Of=20;let bS=6,_S=!0,yS=0;function wS(t,e,n){let i,r,o=ha(window,"PROLIFIC_PID"),a=ha(window,"STUDY_ID"),l=ha(window,"SESSION_ID");const f=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let s=f[0],u;Rs(s).then(Nt=>{n(3,u=Nt),console.log("Audio fetched",Nt)});let c=[{stimulus:"audio",audioFile:f[0]},{stimulus:"waveform",audioFile:f[0]},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],p=[0,.5,1,1.6,2.1,2.6];let d="consent",m=0,b,_="",g="",v=0,w=0,k="",x=0,S,T={},E=[],F,C,L=!1,R=!1,W=!1,A="tick",B=Of,z=3,J=600,j=[],X=[],O=0;const H=[];bi(()=>{document.querySelector("html").addEventListener("keyup",P)});const Q=()=>{C=new It({ratio:{firstVal:Of,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Of],direction:-1,reversalLimit:5,verbosity:0}}),C.init()};function at(){d==="consent"?n(5,d="start1"):d==="start1"?n(5,d="start2"):d==="start2"?(n(4,c=Os(c)),n(5,d="demo")):d==="demo"?_==""||g==""?alert("please fill the form first"):(n(5,d="tests"),n(6,m=0)):d==="tests"?(U(),m<c.length?(n(16,A=c[m].stimulus),n(2,s=c[m].audioFile),nt()):n(5,d="feedback")):d==="feedback"&&(U(),n(5,d="done"))}function nt(){Q(),n(12,x=0),S=0,F=0,n(13,L=!0),X=[],E=[],b=new Date,Z()}function Z(){console.log("Starting trial "+x),T={},n(14,R=!0),q()}function q(){let yt=C.getLast("ratio");yt=Math.random()<.5?yt:-yt,T.deviation=yt,n(21,B=yt),T.startTime=new Date,n(15,W=!0),window.setTimeout(()=>{n(15,W=!1)},1e3)}function N(Nt){if(!R)return;n(14,R=!1),T.decisionChoice=Nt,T.errorCode=0,T.timeTaken=(new Date-T.startTime)/1e3;const yt=F;(T.decisionChoice==0&&T.deviation<0||T.decisionChoice==1&&T.deviation>0)&&T.errorCode==0&&F++,T.errorCode==0&&(C.next(yt!=F),E[E.length]=T),T.errorCode==0&&S++,n(12,x++,x),C.reversalLimitReached("ratio")?$():Z()}function $(){n(13,L=!1),n(14,R=!1),tt(),X=[],O=C.getFinalVal("ratio");for(let yt=0;yt<E.length;yt++)X[yt]=E[yt].deviation;console.log(X);const Nt=new Date;H.push({encoding:A,audioFile:s,final:O,data:X,score:F,testNumber:m,trialCount:x+1,trials:E,validTrialCount:S+1,testTimeSeconds:(Nt-b)/1e3}),n(6,m++,m)}function P(Nt){if(!W)switch(Nt.key){case"ArrowLeft":R&&N(0);break;case"ArrowRight":R&&N(1);break;case"PageDown":!R&&d!=="done"&&at()}}function tt(){`${F}`,x+1,`${(F/(x+1)*100).toFixed(1)}${C.getFinalVal("ratio")}`}function U(){const Nt={studyStep:d,demographics:{partID:o,studyID:a,sessionID:l,partEduation:_,partMusicInstr:g,partMusicInstrYears:v,partVisExperienceYears:w,partFeedback:k,visWidth:J},date:new Date().toISOString(),tests:H};console.log("saving data",Nt);const yt=JSON.stringify(Nt,void 0,2);fetch(gS,{method:"POST",headers:{"Content-Type":"application/json"},body:yt}).then(Vt=>{console.log("Data saved:",Vt)})}const mt=()=>n(0,J*=1.05),rt=()=>n(0,J*=.95);function pt(){_=gi(this),n(7,_)}function ft(){g=this.value,n(8,g)}function dt(){v=xe(this.value),n(9,v)}function Rt(){w=xe(this.value),n(10,w)}function Et(){k=this.value,n(11,k)}return t.$$.update=()=>{t.$$.dirty[0]&2097152&&n(22,i=B/100*h0),t.$$.dirty[0]&1&&n(17,r=J/6),t.$$.dirty[0]&4194306&&(n(1,j=Xi(bS,h0,z,i,_S,yS)),console.log("generated pattern",j))},[J,j,s,u,c,d,m,_,g,v,w,k,x,L,R,W,A,r,h,p,at,B,i,mt,rt,pt,ft,dt,Rt,Et]}class vS extends zt{constructor(e){super(),Ut(this,e,wS,mS,Ot,{},null,[-1,-1])}}function d0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g;return{c(){e=M("div"),n=M("button"),n.textContent="Playground",i=D(),r=M("button"),r.textContent="Examples",o=D(),a=M("button"),a.textContent="Study",l=D(),f=M("button"),f.textContent="Analysis",s=D(),u=M("button"),u.textContent="Study (variance)",c=D(),h=M("button"),h.textContent="Analysis (variance)",p=D(),d=M("button"),d.textContent="Study (Prolific)",m=D(),b=M("button"),b.textContent="Analysis (Prolific)"},m(v,w){G(v,e,w),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(e,s),y(e,u),y(e,c),y(e,h),y(e,p),y(e,d),y(e,m),y(e,b),_||(g=[gt(n,"click",t[1]),gt(r,"click",t[2]),gt(a,"click",t[3]),gt(f,"click",t[4]),gt(u,"click",t[5]),gt(h,"click",t[6]),gt(d,"click",t[7]),gt(b,"click",t[8])],_=!0)},p:_t,d(v){v&&V(e),_=!1,$e(g)}}}function xS(t){let e,n;return e=new QM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function kS(t){let e,n;return e=new vS({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function MS(t){let e,n;return e=new $M({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function SS(t){let e,n;return e=new dM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function TS(t){let e,n;return e=new xM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function CS(t){let e,n;return e=new eM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function AS(t){let e,n;return e=new nS({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function ES(t){let e,n;return e=new qk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function $S(t){let e,n,i,r,o,a,l,f=t[0]!=="study_prolific"&&d0(t);const s=[ES,AS,CS,TS,SS,MS,kS,xS],u=[];function c(h,p){return h[0]==="playground"?0:h[0]==="examples"?1:h[0]==="study"?2:h[0]==="analysis"?3:h[0]==="study_variance"?4:h[0]==="analysis_variance"?5:h[0]==="study_prolific"?6:h[0]==="analysis_prolific"?7:-1}return~(o=c(t))&&(a=u[o]=s[o](t)),{c(){e=M("main"),n=M("h1"),n.textContent="Rhythm Error Sensitivity Study",i=D(),f&&f.c(),r=D(),a&&a.c()},m(h,p){G(h,e,p),y(e,n),y(e,i),f&&f.m(e,null),y(e,r),~o&&u[o].m(e,null),l=!0},p(h,[p]){h[0]!=="study_prolific"?f?f.p(h,p):(f=d0(h),f.c(),f.m(e,r)):f&&(f.d(1),f=null);let d=o;o=c(h),o!==d&&(a&&(Gt(),K(u[d],1,1,()=>{u[d]=null}),Xt()),~o?(a=u[o],a||(a=u[o]=s[o](h),a.c()),Y(a,1),a.m(e,null)):a=null)},i(h){l||(Y(a),l=!0)},o(h){K(a),l=!1},d(h){h&&V(e),f&&f.d(),~o&&u[o].d()}}}function NS(t,e,n){let i=ha(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific"),()=>n(0,i="analysis_prolific")]}class DS extends zt{constructor(e){super(),Ut(this,e,NS,$S,Ot,{})}}new DS({target:document.getElementById("app")});export{_0 as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-J64GgcWy.js","assets/utilities-NGvWvY-A.js","assets/index-TlZAmOeR.js","assets/index-er59X76W.js","assets/index-ng9yjEI3.js","assets/index-pWTx6dyo.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var m2=Object.defineProperty;var g2=(t,e,n)=>e in t?m2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var vn=(t,e,n)=>(g2(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function xt(){}function xd(t){return t()}function Au(){return Object.create(null)}function ke(t){t.forEach(xd)}function $d(t){return typeof t=="function"}function Pt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function b2(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function K(t,e,n){t.insertBefore(e,n||null)}function j(t){t.parentNode&&t.parentNode.removeChild(t)}function Er(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function wl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ft(t){return document.createTextNode(t)}function U(){return ft(" ")}function gn(){return ft("")}function dt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function B(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ae(t){return t===""?null:+t}function _2(t){return Array.from(t.childNodes)}function Xt(t,e){e=""+e,t.data!==e&&(t.data=e)}function rt(t,e){t.value=e??""}function ue(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function Vt(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ln(t){const e=t.querySelector(":checked");return e&&e.__value}class y2{constructor(e=!1){vn(this,"is_svg",!1);vn(this,"e");vn(this,"n");vn(this,"t");vn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=wl(n.nodeName):this.e=k(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)K(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(j)}}let Ar;function $r(t){Ar=t}function Md(){if(!Ar)throw new Error("Function called outside component initialization");return Ar}function Ra(t){Md().$$.on_mount.push(t)}function bn(t){Md().$$.after_update.push(t)}const Si=[],$e=[];let Ai=[];const Nu=[],w2=Promise.resolve();let vl=!1;function v2(){vl||(vl=!0,w2.then(kd))}function Ne(t){Ai.push(t)}const Ff=new Set;let yi=0;function kd(){if(yi!==0)return;const t=Ar;do{try{for(;yi<Si.length;){const e=Si[yi];yi++,$r(e),x2(e.$$)}}catch(e){throw Si.length=0,yi=0,e}for($r(null),Si.length=0,yi=0;$e.length;)$e.pop()();for(let e=0;e<Ai.length;e+=1){const n=Ai[e];Ff.has(n)||(Ff.add(n),n())}Ai.length=0}while(Si.length);for(;Nu.length;)Nu.pop()();vl=!1,Ff.clear(),$r(t)}function x2(t){if(t.fragment!==null){t.update(),ke(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}function $2(t){const e=[],n=[];Ai.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ai=e}const Yo=new Set;let Xn;function Jt(){Xn={r:0,c:[],p:Xn}}function te(){Xn.r||ke(Xn.c),Xn=Xn.p}function Z(t,e){t&&t.i&&(Yo.delete(t),t.i(e))}function et(t,e,n,i){if(t&&t.o){if(Yo.has(t))return;Yo.add(t),Xn.c.push(()=>{Yo.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function We(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ut(t){t&&t.c()}function lt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Ne(()=>{const o=t.$$.on_mount.map(xd).filter($d);t.$$.on_destroy?t.$$.on_destroy.push(...o):ke(o),t.$$.on_mount=[]}),r.forEach(Ne)}function st(t,e){const n=t.$$;n.fragment!==null&&($2(n.after_update),ke(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function M2(t,e){t.$$.dirty[0]===-1&&(Si.push(t),v2(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ot(t,e,n,i,r,o,a=null,f=[-1]){const l=Ar;$r(t);const s=t.$$={fragment:null,ctx:[],props:o,update:xt,not_equal:r,bound:Au(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Au(),dirty:f,skip_bound:!1,root:e.target||l.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(h,c,...d)=>{const p=d.length?d[0]:c;return s.ctx&&r(s.ctx[h],s.ctx[h]=p)&&(!s.skip_bound&&s.bound[h]&&s.bound[h](p),u&&M2(t,h)),c}):[],s.update(),u=!0,ke(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const h=_2(e.target);s.fragment&&s.fragment.l(h),h.forEach(j)}else s.fragment&&s.fragment.c();e.intro&&Z(t.$$.fragment),lt(t,e.target,e.anchor),kd()}$r(l)}class Ut{constructor(){vn(this,"$$");vn(this,"$$set")}$destroy(){st(this,1),this.$destroy=xt}$on(e,n){if(!$d(n))return xt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!b2(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const k2="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(k2);const S2="modulepreload",T2=function(t){return"/rhythm-vis/"+t},Du={},wi=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=T2(a),a in Du)return;Du[a]=!0;const f=a.endsWith(".css"),l=f?'[rel="stylesheet"]':"";if(!!i)for(let h=o.length-1;h>=0;h--){const c=o[h];if(c.href===a&&(!f||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=f?"stylesheet":S2,f||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),f)return new Promise((h,c)=>{u.addEventListener("load",h),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function C2(t){if(t){if(t=new Uint8Array(t.buffer||t),A2(t))return"wav";if(E2(t))return"mp3";if(D2(t))return"flac";if(F2(t))return"m4a";if(L2(t))return"opus";if(N2(t))return"oga";if(I2(t))return"qoa"}}function E2(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function A2(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function N2(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function D2(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function F2(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function L2(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function I2(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let R2=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const P2=globalThis.AudioBuffer||R2;async function O2(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=C2(t);if(!e)throw Error("Cannot detect audio format");if(!ne[e])throw Error("Missing decoder for "+e+" format");return ne[e](t)}const ne={async oga(t){let{decoder:e}=ne.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await wi(()=>import("./index-2snpwCTj.js"),__vite__mapDeps([0,1,2]));await(ne.oga.decoder=e=new n).ready}return t&&vi(await e.decodeFile(t))},async mp3(t){let{decoder:e}=ne.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await wi(()=>import("./index-PYmv6CRN.js"),__vite__mapDeps([3,1]));await(ne.mp3.decoder=e=new n).ready}return t&&vi(await e.decode(t))},async flac(t){let{decoder:e}=ne.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await wi(()=>import("./index-QvhMxcwr.js"),__vite__mapDeps([4,1,2]));await(ne.flac.decoder=e=new n).ready}return t&&vi(await e.decode(t))},async opus(t){let{decoder:e}=ne.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await wi(()=>import("./index-7NZEHSVb.js"),__vite__mapDeps([5,1,2]));await(ne.opus.decoder=e=new n).ready}return t&&vi(await e.decodeFile(t))},async wav(t){let{decode:e}=ne.wav;if(!e){let n=await wi(()=>import("./index-Y_H8kSmp.js").then(i=>i.i),__vite__mapDeps([]));e=ne.wav.decode=n.default.decode}return t&&vi(await e(t))},async qoa(t){let{decode:e}=ne.qoa;return e||(ne.qoa.decode=e=(await wi(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&vi(await e(t))}};function vi({channelData:t,sampleRate:e}){let n=new P2({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var ar=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var U2=B2;function B2(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=q2(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),z2(a,r,i,n,o)}function z2(t,e,n,i,r){var o=r/8,a=i*o,f=new ArrayBuffer(44+t.length*o),l=new DataView(f);return wo(l,0,"RIFF"),l.setUint32(4,36+t.length*o,!0),wo(l,8,"WAVE"),wo(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,e,!0),l.setUint16(22,i,!0),l.setUint32(24,n,!0),l.setUint32(28,n*a,!0),l.setUint16(32,a,!0),l.setUint16(34,r,!0),wo(l,36,"data"),l.setUint32(40,t.length*o,!0),e===1?W2(l,44,t):Y2(l,44,t),f}function q2(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function Y2(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function W2(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function wo(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const H2=Sd(U2);function Ii(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let f=0;f<t;++f){let l;r?l=f>=n?i:0:l=f===n?i:0,a.push(f*e+o+l)}return a}async function Td(t){const n=await(await fetch(t)).arrayBuffer();return await O2(n)}function Cd(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const f=Math.round(a*t.sampleRate);let l=1;for(let s=0;s<r.length;++s)l=Math.max(0,l-2/40100),o[f+s]=r[s]*l}return o}function V2(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([H2(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function _s(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function oe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pa(t){let e,n,i;t.length!==2?(e=oe,n=(f,l)=>oe(t(f),l),i=(f,l)=>t(f)-l):(e=t===oe||t===Gr?t:G2,n=t,i=t);function r(f,l,s=0,u=f.length){if(s<u){if(e(l,l)!==0)return u;do{const h=s+u>>>1;n(f[h],l)<0?s=h+1:u=h}while(s<u)}return s}function o(f,l,s=0,u=f.length){if(s<u){if(e(l,l)!==0)return u;do{const h=s+u>>>1;n(f[h],l)<=0?s=h+1:u=h}while(s<u)}return s}function a(f,l,s=0,u=f.length){const h=r(f,l,s,u-1);return h>s&&i(f[h-1],l)>-i(f[h],l)?h-1:h}return{left:r,center:a,right:o}}function G2(){return 0}function Ed(t){return t===null?NaN:+t}function*X2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const j2=Pa(oe),Z2=j2.right;Pa(Ed).center;const Oa=Z2;function ys(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function K2(t){return t.length|0}function Q2(t){return!(t>0)}function J2(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function tb(t){return e=>t(...e)}function eb(...t){const e=typeof t[t.length-1]=="function"&&tb(t.pop());t=t.map(J2);const n=t.map(K2),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(Q2))return o;for(;;){o.push(r.map((f,l)=>t[l][f]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function nb(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Nr(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let f of t)(f=e(f,++a,t))!=null&&(f=+f)>=f&&(i=f-r,r+=i/++n,o+=i*(f-r))}if(n>1)return o/(n-1)}function Xr(t,e){const n=Nr(t,e);return n&&Math.sqrt(n)}function _e(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class ti{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,f=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);f&&(n[i++]=f),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class ei extends Map{constructor(e,n=Dd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(xl(this,e))}has(e){return super.has(xl(this,e))}set(e,n){return super.set(Ad(this,e),n)}delete(e){return super.delete(Nd(this,e))}}class Ua extends Set{constructor(e,n=Dd){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(xl(this,e))}add(e){return super.add(Ad(this,e))}delete(e){return super.delete(Nd(this,e))}}function xl({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Ad({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Nd({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Dd(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Qo(t){return t}function Ba(t,...e){return za(t,Qo,Qo,e)}function $l(t,...e){return za(t,Array.from,Qo,e)}function Ni(t,e,...n){return za(t,Qo,e,n)}function ib(t,e,...n){return za(t,Array.from,e,n)}function za(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const f=new ei,l=i[a++];let s=-1;for(const u of o){const h=l(u,++s,o),c=f.get(h);c?c.push(u):f.set(h,[u])}for(const[u,h]of f)f.set(u,r(h,a));return e(f)}(t,0)}function rb(t,e){return Array.from(e,n=>t[n])}function Dr(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const f=Jo(a[r],a[o]);if(f)return f}})):(n=t.map(n),i.sort((r,o)=>Jo(n[r],n[o]))),rb(t,i)}return t.sort(Fd(n))}function Fd(t=oe){if(t===oe)return Jo;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Jo(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function ws(t,e,n){return(e.length!==2?Dr(Ni(t,e,n),([i,r],[o,a])=>oe(r,a)||oe(i,o)):Dr(Ba(t,n),([i,r],[o,a])=>e(r,a)||oe(i,o))).map(([i])=>i)}const ob=Math.sqrt(50),ab=Math.sqrt(10),fb=Math.sqrt(2);function ta(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=ob?10:o>=ab?5:o>=fb?2:1;let f,l,s;return r<0?(s=Math.pow(10,-r)/a,f=Math.round(t*s),l=Math.round(e*s),f/s<t&&++f,l/s>e&&--l,s=-s):(s=Math.pow(10,r)*a,f=Math.round(t/s),l=Math.round(e/s),f*s<t&&++f,l*s>e&&--l),l<f&&.5<=n&&n<2?ta(t,e,n*2):[f,l,s]}function Fr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?ta(e,t,n):ta(t,e,n);if(!(o>=r))return[];const f=o-r+1,l=new Array(f);if(i)if(a<0)for(let s=0;s<f;++s)l[s]=(o-s)/-a;else for(let s=0;s<f;++s)l[s]=(o-s)*a;else if(a<0)for(let s=0;s<f;++s)l[s]=(r+s)/-a;else for(let s=0;s<f;++s)l[s]=(r+s)*a;return l}function ea(t,e,n){return e=+e,t=+t,n=+n,ta(t,e,n)[2]}function Ml(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?ea(e,t,n):ea(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function lb(t){return Math.max(1,Math.ceil(Math.log(ys(t))/Math.LN2)+1)}function ce(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function sb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function cn(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function ub(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function Ld(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Jo:Fd(r);i>n;){if(i-n>600){const l=i-n+1,s=e-n+1,u=Math.log(l),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(l-h)/l)*(s-l/2<0?-1:1),d=Math.max(n,Math.floor(e-s*h/l+c)),p=Math.min(i,Math.floor(e+(l-s)*h/l+c));Ld(t,e,d,p,r)}const o=t[e];let a=n,f=i;for(fr(t,n,e),r(t[i],o)>0&&fr(t,n,i);a<f;){for(fr(t,a,f),++a,--f;r(t[a],o)<0;)++a;for(;r(t[f],o)>0;)--f}r(t[n],o)===0?fr(t,n,f):(++f,fr(t,f,i)),f<=e&&(n=f+1),e<=f&&(i=f-1)}return t}function fr(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Id(t,e=oe){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?oe(a,r)>0:oe(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Ri(t,e,n){if(t=Float64Array.from(X2(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return cn(t);if(e>=1)return ce(t);var i,r=(i-1)*e,o=Math.floor(r),a=ce(Ld(t,o).subarray(0,o+1)),f=cn(t.subarray(o+1));return a+(f-a)*(r-o)}}function cb(t,e,n=Ed){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),f=+n(t[o+1],o+1,t);return a+(f-a)*(r-o)}}function hb(t,e,n){const i=ys(t),r=Ri(t,.75)-Ri(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function Rd(t,e,n){const i=ys(t),r=Xr(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function ni(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function kl(t,e){return Ri(t,.5,e)}function*db(t){for(const e of t)yield*e}function Pd(t){return Array.from(db(t))}function pb(t,e){const n=new ei;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function mb(t,e=gb){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function gb(t,e){return[t,e]}function Sl(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function In(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function na(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function bb(t){return t}var Lf=1,If=2,Tl=3,vo=4,Fu=1e-6;function _b(t){return"translate("+t+",0)"}function yb(t){return"translate(0,"+t+")"}function wb(t){return e=>+t(e)}function vb(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function xb(){return!this.__axis}function $b(t,e){var n=[],i=null,r=null,o=6,a=6,f=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Lf||t===vo?-1:1,u=t===vo||t===If?"x":"y",h=t===Lf||t===Tl?_b:yb;function c(d){var p=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):bb),g=Math.max(o,0)+f,w=e.range(),b=+w[0]+l,v=+w[w.length-1]+l,_=(e.bandwidth?vb:wb)(e.copy(),l),x=d.selection?d.selection():d,M=x.selectAll(".domain").data([null]),$=x.selectAll(".tick").data(p,e).order(),S=$.exit(),C=$.enter().append("g").attr("class","tick"),D=$.select("line"),T=$.select("text");M=M.merge(M.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),$=$.merge(C),D=D.merge(C.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),T=T.merge(C.append("text").attr("fill","currentColor").attr(u,s*g).attr("dy",t===Lf?"0em":t===Tl?"0.71em":"0.32em")),d!==x&&(M=M.transition(d),$=$.transition(d),D=D.transition(d),T=T.transition(d),S=S.transition(d).attr("opacity",Fu).attr("transform",function(L){return isFinite(L=_(L))?h(L+l):this.getAttribute("transform")}),C.attr("opacity",Fu).attr("transform",function(L){var I=this.parentNode.__axis;return h((I&&isFinite(I=I(L))?I:_(L))+l)})),S.remove(),M.attr("d",t===vo||t===If?a?"M"+s*a+","+b+"H"+l+"V"+v+"H"+s*a:"M"+l+","+b+"V"+v:a?"M"+b+","+s*a+"V"+l+"H"+v+"V"+s*a:"M"+b+","+l+"H"+v),$.attr("opacity",1).attr("transform",function(L){return h(_(L)+l)}),D.attr(u+"2",s*o),T.attr(u,s*g).text(m),x.filter(xb).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===If?"start":t===vo?"end":"middle"),x.each(function(){this.__axis=_})}return c.scale=function(d){return arguments.length?(e=d,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),c):n.slice()},c.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),c):i&&i.slice()},c.tickFormat=function(d){return arguments.length?(r=d,c):r},c.tickSize=function(d){return arguments.length?(o=a=+d,c):o},c.tickSizeInner=function(d){return arguments.length?(o=+d,c):o},c.tickSizeOuter=function(d){return arguments.length?(a=+d,c):a},c.tickPadding=function(d){return arguments.length?(f=+d,c):f},c.offset=function(d){return arguments.length?(l=+d,c):l},c}function Mb(t){return $b(Tl,t)}var kb={value:()=>{}};function Od(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Wo(n)}function Wo(t){this._=t}function Sb(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Wo.prototype=Od.prototype={constructor:Wo,on:function(t,e){var n=this._,i=Sb(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=Tb(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=Lu(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Lu(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Wo(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Tb(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Lu(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=kb,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Cl="http://www.w3.org/1999/xhtml";const Pi={svg:"http://www.w3.org/2000/svg",xhtml:Cl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qa(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pi.hasOwnProperty(e)?{space:Pi[e],local:t}:t}function Cb(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Cl&&e.documentElement.namespaceURI===Cl?e.createElement(t):e.createElementNS(n,t)}}function Eb(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ya(t){var e=qa(t);return(e.local?Eb:Cb)(e)}function Ab(){}function vs(t){return t==null?Ab:function(){return this.querySelector(t)}}function Nb(t){typeof t!="function"&&(t=vs(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=new Array(a),l,s,u=0;u<a;++u)(l=o[u])&&(s=t.call(l,l.__data__,u,o))&&("__data__"in l&&(s.__data__=l.__data__),f[u]=s);return new he(i,this._parents)}function Db(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Fb(){return[]}function Ud(t){return t==null?Fb:function(){return this.querySelectorAll(t)}}function Lb(t){return function(){return Db(t.apply(this,arguments))}}function Ib(t){typeof t=="function"?t=Lb(t):t=Ud(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],f=a.length,l,s=0;s<f;++s)(l=a[s])&&(i.push(t.call(l,l.__data__,s,a)),r.push(l));return new he(i,r)}function Bd(t){return function(){return this.matches(t)}}function zd(t){return function(e){return e.matches(t)}}var Rb=Array.prototype.find;function Pb(t){return function(){return Rb.call(this.children,t)}}function Ob(){return this.firstElementChild}function Ub(t){return this.select(t==null?Ob:Pb(typeof t=="function"?t:zd(t)))}var Bb=Array.prototype.filter;function zb(){return Array.from(this.children)}function qb(t){return function(){return Bb.call(this.children,t)}}function Yb(t){return this.selectAll(t==null?zb:qb(typeof t=="function"?t:zd(t)))}function Wb(t){typeof t!="function"&&(t=Bd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&f.push(l);return new he(i,this._parents)}function qd(t){return new Array(t.length)}function Hb(){return new he(this._enter||this._groups.map(qd),this._parents)}function ia(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ia.prototype={constructor:ia,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Vb(t){return function(){return t}}function Gb(t,e,n,i,r,o){for(var a=0,f,l=e.length,s=o.length;a<s;++a)(f=e[a])?(f.__data__=o[a],i[a]=f):n[a]=new ia(t,o[a]);for(;a<l;++a)(f=e[a])&&(r[a]=f)}function Xb(t,e,n,i,r,o,a){var f,l,s=new Map,u=e.length,h=o.length,c=new Array(u),d;for(f=0;f<u;++f)(l=e[f])&&(c[f]=d=a.call(l,l.__data__,f,e)+"",s.has(d)?r[f]=l:s.set(d,l));for(f=0;f<h;++f)d=a.call(t,o[f],f,o)+"",(l=s.get(d))?(i[f]=l,l.__data__=o[f],s.delete(d)):n[f]=new ia(t,o[f]);for(f=0;f<u;++f)(l=e[f])&&s.get(c[f])===l&&(r[f]=l)}function jb(t){return t.__data__}function Zb(t,e){if(!arguments.length)return Array.from(this,jb);var n=e?Xb:Gb,i=this._parents,r=this._groups;typeof t!="function"&&(t=Vb(t));for(var o=r.length,a=new Array(o),f=new Array(o),l=new Array(o),s=0;s<o;++s){var u=i[s],h=r[s],c=h.length,d=Kb(t.call(u,u&&u.__data__,s,i)),p=d.length,m=f[s]=new Array(p),g=a[s]=new Array(p),w=l[s]=new Array(c);n(u,h,m,g,w,d,e);for(var b=0,v=0,_,x;b<p;++b)if(_=m[b]){for(b>=v&&(v=b+1);!(x=g[v])&&++v<p;);_._next=x||null}}return a=new he(a,i),a._enter=f,a._exit=l,a}function Kb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Qb(){return new he(this._exit||this._groups.map(qd),this._parents)}function Jb(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function t_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),f=new Array(r),l=0;l<a;++l)for(var s=n[l],u=i[l],h=s.length,c=f[l]=new Array(h),d,p=0;p<h;++p)(d=s[p]||u[p])&&(c[p]=d);for(;l<r;++l)f[l]=n[l];return new he(f,this._parents)}function e_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function n_(t){t||(t=i_);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],f=a.length,l=r[o]=new Array(f),s,u=0;u<f;++u)(s=a[u])&&(l[u]=s);l.sort(e)}return new he(r,this._parents).order()}function i_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r_(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function o_(){return Array.from(this)}function a_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function f_(){let t=0;for(const e of this)++t;return t}function l_(){return!this.node()}function s_(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,f;o<a;++o)(f=r[o])&&t.call(f,f.__data__,o,r);return this}function u_(t){return function(){this.removeAttribute(t)}}function c_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function h_(t,e){return function(){this.setAttribute(t,e)}}function d_(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function p_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function m_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function g_(t,e){var n=qa(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?c_:u_:typeof e=="function"?n.local?m_:p_:n.local?d_:h_)(n,e))}function Yd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function b_(t){return function(){this.style.removeProperty(t)}}function __(t,e,n){return function(){this.style.setProperty(t,e,n)}}function y_(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function w_(t,e,n){return arguments.length>1?this.each((e==null?b_:typeof e=="function"?y_:__)(t,e,n??"")):Oi(this.node(),t)}function Oi(t,e){return t.style.getPropertyValue(e)||Yd(t).getComputedStyle(t,null).getPropertyValue(e)}function v_(t){return function(){delete this[t]}}function x_(t,e){return function(){this[t]=e}}function $_(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function M_(t,e){return arguments.length>1?this.each((e==null?v_:typeof e=="function"?$_:x_)(t,e)):this.node()[t]}function Wd(t){return t.trim().split(/^|\s+/)}function xs(t){return t.classList||new Hd(t)}function Hd(t){this._node=t,this._names=Wd(t.getAttribute("class")||"")}Hd.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Vd(t,e){for(var n=xs(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Gd(t,e){for(var n=xs(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function k_(t){return function(){Vd(this,t)}}function S_(t){return function(){Gd(this,t)}}function T_(t,e){return function(){(e.apply(this,arguments)?Vd:Gd)(this,t)}}function C_(t,e){var n=Wd(t+"");if(arguments.length<2){for(var i=xs(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?T_:e?k_:S_)(n,e))}function E_(){this.textContent=""}function A_(t){return function(){this.textContent=t}}function N_(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function D_(t){return arguments.length?this.each(t==null?E_:(typeof t=="function"?N_:A_)(t)):this.node().textContent}function F_(){this.innerHTML=""}function L_(t){return function(){this.innerHTML=t}}function I_(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function R_(t){return arguments.length?this.each(t==null?F_:(typeof t=="function"?I_:L_)(t)):this.node().innerHTML}function P_(){this.nextSibling&&this.parentNode.appendChild(this)}function O_(){return this.each(P_)}function U_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B_(){return this.each(U_)}function z_(t){var e=typeof t=="function"?t:Ya(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function q_(){return null}function Y_(t,e){var n=typeof t=="function"?t:Ya(t),i=e==null?q_:typeof e=="function"?e:vs(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function W_(){var t=this.parentNode;t&&t.removeChild(this)}function H_(){return this.each(W_)}function V_(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function G_(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function X_(t){return this.select(t?G_:V_)}function j_(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Z_(t){return function(e){t.call(this,e,this.__data__)}}function K_(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Q_(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function J_(t,e,n){return function(){var i=this.__on,r,o=Z_(e);if(i){for(var a=0,f=i.length;a<f;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ty(t,e,n){var i=K_(t+""),r,o=i.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var l=0,s=f.length,u;l<s;++l)for(r=0,u=f[l];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(f=e?J_:Q_,r=0;r<o;++r)this.each(f(i[r],e,n));return this}function Xd(t,e,n){var i=Yd(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ey(t,e){return function(){return Xd(this,t,e)}}function ny(t,e){return function(){return Xd(this,t,e.apply(this,arguments))}}function iy(t,e){return this.each((typeof e=="function"?ny:ey)(t,e))}function*ry(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var jd=[null];function he(t,e){this._groups=t,this._parents=e}function jr(){return new he([[document.documentElement]],jd)}function oy(){return this}he.prototype=jr.prototype={constructor:he,select:Nb,selectAll:Ib,selectChild:Ub,selectChildren:Yb,filter:Wb,data:Zb,enter:Hb,exit:Qb,join:Jb,merge:t_,selection:oy,order:e_,sort:n_,call:r_,nodes:o_,node:a_,size:f_,empty:l_,each:s_,attr:g_,style:w_,property:M_,classed:C_,text:D_,html:R_,raise:O_,lower:B_,append:z_,insert:Y_,remove:H_,clone:X_,datum:j_,on:ty,dispatch:iy,[Symbol.iterator]:ry};function Mr(t){return typeof t=="string"?new he([[document.querySelector(t)]],[document.documentElement]):new he([[t]],jd)}function ay(t){let e;for(;e=t.sourceEvent;)t=e;return t}function fy(t,e){if(t=ay(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function Ji(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Zr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Un(){}var ii=.7,Ui=1/ii,Di="\\s*([+-]?\\d+)\\s*",Lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ly=/^#([0-9a-f]{3,8})$/,sy=new RegExp(`^rgb\\(${Di},${Di},${Di}\\)$`),uy=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),cy=new RegExp(`^rgba\\(${Di},${Di},${Di},${Lr}\\)$`),hy=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${Lr}\\)$`),dy=new RegExp(`^hsl\\(${Lr},${Ge},${Ge}\\)$`),py=new RegExp(`^hsla\\(${Lr},${Ge},${Ge},${Lr}\\)$`),Iu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ji(Un,ri,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ru,formatHex:Ru,formatHex8:my,formatHsl:gy,formatRgb:Pu,toString:Pu});function Ru(){return this.rgb().formatHex()}function my(){return this.rgb().formatHex8()}function gy(){return Zd(this).formatHsl()}function Pu(){return this.rgb().formatRgb()}function ri(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ly.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ou(e):n===3?new It(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?xo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?xo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=sy.exec(t))?new It(e[1],e[2],e[3],1):(e=uy.exec(t))?new It(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=cy.exec(t))?xo(e[1],e[2],e[3],e[4]):(e=hy.exec(t))?xo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dy.exec(t))?zu(e[1],e[2]/100,e[3]/100,1):(e=py.exec(t))?zu(e[1],e[2]/100,e[3]/100,e[4]):Iu.hasOwnProperty(t)?Ou(Iu[t]):t==="transparent"?new It(NaN,NaN,NaN,0):null}function Ou(t){return new It(t>>16&255,t>>8&255,t&255,1)}function xo(t,e,n,i){return i<=0&&(t=e=n=NaN),new It(t,e,n,i)}function $s(t){return t instanceof Un||(t=ri(t)),t?(t=t.rgb(),new It(t.r,t.g,t.b,t.opacity)):new It}function Rn(t,e,n,i){return arguments.length===1?$s(t):new It(t,e,n,i??1)}function It(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Ji(It,Rn,Zr(Un,{brighter(t){return t=t==null?Ui:Math.pow(Ui,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ii:Math.pow(ii,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new It(Kn(this.r),Kn(this.g),Kn(this.b),ra(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Uu,formatHex:Uu,formatHex8:by,formatRgb:Bu,toString:Bu}));function Uu(){return`#${jn(this.r)}${jn(this.g)}${jn(this.b)}`}function by(){return`#${jn(this.r)}${jn(this.g)}${jn(this.b)}${jn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bu(){const t=ra(this.opacity);return`${t===1?"rgb(":"rgba("}${Kn(this.r)}, ${Kn(this.g)}, ${Kn(this.b)}${t===1?")":`, ${t})`}`}function ra(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function jn(t){return t=Kn(t),(t<16?"0":"")+t.toString(16)}function zu(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ce(t,e,n,i)}function Zd(t){if(t instanceof Ce)return new Ce(t.h,t.s,t.l,t.opacity);if(t instanceof Un||(t=ri(t)),!t)return new Ce;if(t instanceof Ce)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,f=o-r,l=(o+r)/2;return f?(e===o?a=(n-i)/f+(n<i)*6:n===o?a=(i-e)/f+2:a=(e-n)/f+4,f/=l<.5?o+r:2-o-r,a*=60):f=l>0&&l<1?0:a,new Ce(a,f,l,t.opacity)}function El(t,e,n,i){return arguments.length===1?Zd(t):new Ce(t,e,n,i??1)}function Ce(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ji(Ce,El,Zr(Un,{brighter(t){return t=t==null?Ui:Math.pow(Ui,t),new Ce(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ii:Math.pow(ii,t),new Ce(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new It(Rf(t>=240?t-240:t+120,r,i),Rf(t,r,i),Rf(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ce(qu(this.h),$o(this.s),$o(this.l),ra(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ra(this.opacity);return`${t===1?"hsl(":"hsla("}${qu(this.h)}, ${$o(this.s)*100}%, ${$o(this.l)*100}%${t===1?")":`, ${t})`}`}}));function qu(t){return t=(t||0)%360,t<0?t+360:t}function $o(t){return Math.max(0,Math.min(1,t||0))}function Rf(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Kd=Math.PI/180,Qd=180/Math.PI,oa=18,Jd=.96422,t0=1,e0=.82521,n0=4/29,Fi=6/29,i0=3*Fi*Fi,_y=Fi*Fi*Fi;function r0(t){if(t instanceof Xe)return new Xe(t.l,t.a,t.b,t.opacity);if(t instanceof ln)return o0(t);t instanceof It||(t=$s(t));var e=Bf(t.r),n=Bf(t.g),i=Bf(t.b),r=Pf((.2225045*e+.7168786*n+.0606169*i)/t0),o,a;return e===n&&n===i?o=a=r:(o=Pf((.4360747*e+.3850649*n+.1430804*i)/Jd),a=Pf((.0139322*e+.0971045*n+.7141733*i)/e0)),new Xe(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Al(t,e,n,i){return arguments.length===1?r0(t):new Xe(t,e,n,i??1)}function Xe(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}Ji(Xe,Al,Zr(Un,{brighter(t){return new Xe(this.l+oa*(t??1),this.a,this.b,this.opacity)},darker(t){return new Xe(this.l-oa*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Jd*Of(e),t=t0*Of(t),n=e0*Of(n),new It(Uf(3.1338561*e-1.6168667*t-.4906146*n),Uf(-.9787684*e+1.9161415*t+.033454*n),Uf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Pf(t){return t>_y?Math.pow(t,1/3):t/i0+n0}function Of(t){return t>Fi?t*t*t:i0*(t-n0)}function Uf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Bf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yy(t){if(t instanceof ln)return new ln(t.h,t.c,t.l,t.opacity);if(t instanceof Xe||(t=r0(t)),t.a===0&&t.b===0)return new ln(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Qd;return new ln(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Nl(t,e,n,i){return arguments.length===1?yy(t):new ln(t,e,n,i??1)}function ln(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function o0(t){if(isNaN(t.h))return new Xe(t.l,0,0,t.opacity);var e=t.h*Kd;return new Xe(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}Ji(ln,Nl,Zr(Un,{brighter(t){return new ln(this.h,this.c,this.l+oa*(t??1),this.opacity)},darker(t){return new ln(this.h,this.c,this.l-oa*(t??1),this.opacity)},rgb(){return o0(this).rgb()}}));var a0=-.14861,Ms=1.78277,ks=-.29227,Wa=-.90649,Ir=1.97294,Yu=Ir*Wa,Wu=Ir*Ms,Hu=Ms*ks-Wa*a0;function wy(t){if(t instanceof Qn)return new Qn(t.h,t.s,t.l,t.opacity);t instanceof It||(t=$s(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Hu*i+Yu*e-Wu*n)/(Hu+Yu-Wu),o=i-r,a=(Ir*(n-r)-ks*o)/Wa,f=Math.sqrt(a*a+o*o)/(Ir*r*(1-r)),l=f?Math.atan2(a,o)*Qd-120:NaN;return new Qn(l<0?l+360:l,f,r,t.opacity)}function je(t,e,n,i){return arguments.length===1?wy(t):new Qn(t,e,n,i??1)}function Qn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Ji(Qn,je,Zr(Un,{brighter(t){return t=t==null?Ui:Math.pow(Ui,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ii:Math.pow(ii,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Kd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new It(255*(e+n*(a0*i+Ms*r)),255*(e+n*(ks*i+Wa*r)),255*(e+n*(Ir*i)),this.opacity)}}));function vy(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function xy(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,f=i<e-1?t[i+2]:2*o-r;return vy((n-i/e)*e,a,r,o,f)}}const Ha=t=>()=>t;function f0(t,e){return function(n){return t+n*e}}function $y(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Ss(t,e){var n=e-t;return n?f0(t,n>180||n<-180?n-360*Math.round(n/360):n):Ha(isNaN(t)?e:t)}function My(t){return(t=+t)==1?Gt:function(e,n){return n-e?$y(e,n,t):Ha(isNaN(e)?n:e)}}function Gt(t,e){var n=e-t;return n?f0(t,n):Ha(isNaN(t)?e:t)}const oi=function t(e){var n=My(e);function i(r,o){var a=n((r=Rn(r)).r,(o=Rn(o)).r),f=n(r.g,o.g),l=n(r.b,o.b),s=Gt(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=f(u),r.b=l(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function ky(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=Rn(e[a]),i[a]=f.r||0,r[a]=f.g||0,o[a]=f.b||0;return i=t(i),r=t(r),o=t(o),f.opacity=1,function(l){return f.r=i(l),f.g=r(l),f.b=o(l),f+""}}}var Sy=ky(xy);function Ty(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function Cy(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ey(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=Kr(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(f){for(a=0;a<i;++a)o[a]=r[a](f);return o}}function Ay(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ny(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Kr(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Dl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zf=new RegExp(Dl.source,"g");function Dy(t){return function(){return t}}function Fy(t){return function(e){return t(e)+""}}function l0(t,e){var n=Dl.lastIndex=zf.lastIndex=0,i,r,o,a=-1,f=[],l=[];for(t=t+"",e=e+"";(i=Dl.exec(t))&&(r=zf.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(i=i[0])===(r=r[0])?f[a]?f[a]+=r:f[++a]=r:(f[++a]=null,l.push({i:a,x:Ht(i,r)})),n=zf.lastIndex;return n<e.length&&(o=e.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?l[0]?Fy(l[0].x):Dy(e):(e=l.length,function(s){for(var u=0,h;u<e;++u)f[(h=l[u]).i]=h.x(s);return f.join("")})}function Kr(t,e){var n=typeof e,i;return e==null||n==="boolean"?Ha(e):(n==="number"?Ht:n==="string"?(i=ri(e))?(e=i,oi):l0:e instanceof ri?oi:e instanceof Date?Ay:Cy(e)?Ty:Array.isArray(e)?Ey:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ny:Ht)(t,e)}function Ts(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Vu=180/Math.PI,Fl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function s0(t,e,n,i,r,o){var a,f,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,l/=f),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Vu,skewX:Math.atan(l)*Vu,scaleX:a,scaleY:f}}var Mo;function Ly(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Fl:s0(e.a,e.b,e.c,e.d,e.e,e.f)}function Iy(t){return t==null||(Mo||(Mo=document.createElementNS("http://www.w3.org/2000/svg","g")),Mo.setAttribute("transform",t),!(t=Mo.transform.baseVal.consolidate()))?Fl:(t=t.matrix,s0(t.a,t.b,t.c,t.d,t.e,t.f))}function u0(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,h,c,d,p){if(s!==h||u!==c){var m=d.push("translate(",null,e,null,n);p.push({i:m-4,x:Ht(s,h)},{i:m-2,x:Ht(u,c)})}else(h||c)&&d.push("translate("+h+e+c+n)}function a(s,u,h,c){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),c.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Ht(s,u)})):u&&h.push(r(h)+"rotate("+u+i)}function f(s,u,h,c){s!==u?c.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Ht(s,u)}):u&&h.push(r(h)+"skewX("+u+i)}function l(s,u,h,c,d,p){if(s!==h||u!==c){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:Ht(s,h)},{i:m-2,x:Ht(u,c)})}else(h!==1||c!==1)&&d.push(r(d)+"scale("+h+","+c+")")}return function(s,u){var h=[],c=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,h,c),a(s.rotate,u.rotate,h,c),f(s.skewX,u.skewX,h,c),l(s.scaleX,s.scaleY,u.scaleX,u.scaleY,h,c),s=u=null,function(d){for(var p=-1,m=c.length,g;++p<m;)h[(g=c[p]).i]=g.x(d);return h.join("")}}}var Ry=u0(Ly,"px, ","px)","deg)"),Py=u0(Iy,", ",")",")");function Oy(t){return function(e,n){var i=t((e=El(e)).h,(n=El(n)).h),r=Gt(e.s,n.s),o=Gt(e.l,n.l),a=Gt(e.opacity,n.opacity);return function(f){return e.h=i(f),e.s=r(f),e.l=o(f),e.opacity=a(f),e+""}}}const Uy=Oy(Ss);function By(t,e){var n=Gt((t=Al(t)).l,(e=Al(e)).l),i=Gt(t.a,e.a),r=Gt(t.b,e.b),o=Gt(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function zy(t){return function(e,n){var i=t((e=Nl(e)).h,(n=Nl(n)).h),r=Gt(e.c,n.c),o=Gt(e.l,n.l),a=Gt(e.opacity,n.opacity);return function(f){return e.h=i(f),e.c=r(f),e.l=o(f),e.opacity=a(f),e+""}}}const qy=zy(Ss);function c0(t){return function e(n){n=+n;function i(r,o){var a=t((r=je(r)).h,(o=je(o)).h),f=Gt(r.s,o.s),l=Gt(r.l,o.l),s=Gt(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=f(u),r.l=l(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}c0(Ss);var Cs=c0(Gt);function Va(t,e){e===void 0&&(e=t,t=Kr);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var f=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[f](a-f)}}function De(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Bi=0,pr=0,lr=0,h0=1e3,aa,mr,fa=0,ai=0,Ga=0,Rr=typeof performance=="object"&&performance.now?performance:Date,d0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Es(){return ai||(d0(Yy),ai=Rr.now()+Ga)}function Yy(){ai=0}function la(){this._call=this._time=this._next=null}la.prototype=p0.prototype={constructor:la,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Es():+n)+(e==null?0:+e),!this._next&&mr!==this&&(mr?mr._next=this:aa=this,mr=this),this._call=t,this._time=n,Ll()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ll())}};function p0(t,e,n){var i=new la;return i.restart(t,e,n),i}function Wy(){Es(),++Bi;for(var t=aa,e;t;)(e=ai-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Bi}function Gu(){ai=(fa=Rr.now())+Ga,Bi=pr=0;try{Wy()}finally{Bi=0,Vy(),ai=0}}function Hy(){var t=Rr.now(),e=t-fa;e>h0&&(Ga-=e,fa=t)}function Vy(){for(var t,e=aa,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:aa=n);mr=t,Ll(i)}function Ll(t){if(!Bi){pr&&(pr=clearTimeout(pr));var e=t-ai;e>24?(t<1/0&&(pr=setTimeout(Gu,t-Rr.now()-Ga)),lr&&(lr=clearInterval(lr))):(lr||(fa=Rr.now(),lr=setInterval(Hy,h0)),Bi=1,d0(Gu))}}function Xu(t,e,n){var i=new la;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Gy=Od("start","end","cancel","interrupt"),Xy=[],m0=0,ju=1,Il=2,Ho=3,Zu=4,Rl=5,Vo=6;function Xa(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;jy(t,n,{name:e,index:i,group:r,on:Gy,tween:Xy,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:m0})}function As(t,e){var n=Re(t,e);if(n.state>m0)throw new Error("too late; already scheduled");return n}function Ke(t,e){var n=Re(t,e);if(n.state>Ho)throw new Error("too late; already running");return n}function Re(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function jy(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=p0(o,0,n.time);function o(s){n.state=ju,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,h,c,d;if(n.state!==ju)return l();for(u in i)if(d=i[u],d.name===n.name){if(d.state===Ho)return Xu(a);d.state===Zu?(d.state=Vo,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=Vo,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(Xu(function(){n.state===Ho&&(n.state=Zu,n.timer.restart(f,n.delay,n.time),f(s))}),n.state=Il,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Il){for(n.state=Ho,r=new Array(c=n.tween.length),u=0,h=-1;u<c;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function f(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(l),n.state=Rl,1),h=-1,c=r.length;++h<c;)r[h].call(t,u);n.state===Rl&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Vo,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function Zy(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>Il&&i.state<Rl,i.state=Vo,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function Ky(t){return this.each(function(){Zy(this,t)})}function Qy(t,e){var n,i;return function(){var r=Ke(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,f=i.length;a<f;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Jy(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Ke(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var f={name:e,value:n},l=0,s=r.length;l<s;++l)if(r[l].name===e){r[l]=f;break}l===s&&r.push(f)}o.tween=r}}function tw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Re(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Qy:Jy)(n,t,e))}function Ns(t,e,n){var i=t._id;return t.each(function(){var r=Ke(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Re(r,i).value[e]}}function g0(t,e){var n;return(typeof e=="number"?Ht:e instanceof ri?oi:(n=ri(e))?(e=n,oi):l0)(t,e)}function ew(t){return function(){this.removeAttribute(t)}}function nw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function rw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function ow(t,e,n){var i,r,o;return function(){var a,f=n(this),l;return f==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=f+"",a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f)))}}function aw(t,e,n){var i,r,o;return function(){var a,f=n(this),l;return f==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=f+"",a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f)))}}function fw(t,e){var n=qa(t),i=n==="transform"?Py:g0;return this.attrTween(t,typeof e=="function"?(n.local?aw:ow)(n,i,Ns(this,"attr."+t,e)):e==null?(n.local?nw:ew)(n):(n.local?rw:iw)(n,i,e))}function lw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function sw(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function uw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&sw(t,o)),n}return r._value=e,r}function cw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&lw(t,o)),n}return r._value=e,r}function hw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=qa(t);return this.tween(n,(i.local?uw:cw)(i,e))}function dw(t,e){return function(){As(this,t).delay=+e.apply(this,arguments)}}function pw(t,e){return e=+e,function(){As(this,t).delay=e}}function mw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?dw:pw)(e,t)):Re(this.node(),e).delay}function gw(t,e){return function(){Ke(this,t).duration=+e.apply(this,arguments)}}function bw(t,e){return e=+e,function(){Ke(this,t).duration=e}}function _w(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?gw:bw)(e,t)):Re(this.node(),e).duration}function yw(t,e){if(typeof e!="function")throw new Error;return function(){Ke(this,t).ease=e}}function ww(t){var e=this._id;return arguments.length?this.each(yw(e,t)):Re(this.node(),e).ease}function vw(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,t).ease=n}}function xw(t){if(typeof t!="function")throw new Error;return this.each(vw(this._id,t))}function $w(t){typeof t!="function"&&(t=Bd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=[],l,s=0;s<a;++s)(l=o[s])&&t.call(l,l.__data__,s,o)&&f.push(l);return new hn(i,this._parents,this._name,this._id)}function Mw(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),f=0;f<o;++f)for(var l=e[f],s=n[f],u=l.length,h=a[f]=new Array(u),c,d=0;d<u;++d)(c=l[d]||s[d])&&(h[d]=c);for(;f<i;++f)a[f]=e[f];return new hn(a,this._parents,this._name,this._id)}function kw(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Sw(t,e,n){var i,r,o=kw(e)?As:Ke;return function(){var a=o(this,t),f=a.on;f!==i&&(r=(i=f).copy()).on(e,n),a.on=r}}function Tw(t,e){var n=this._id;return arguments.length<2?Re(this.node(),n).on.on(t):this.each(Sw(n,t,e))}function Cw(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ew(){return this.on("end.remove",Cw(this._id))}function Aw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=vs(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var f=i[a],l=f.length,s=o[a]=new Array(l),u,h,c=0;c<l;++c)(u=f[c])&&(h=t.call(u,u.__data__,c,f))&&("__data__"in u&&(h.__data__=u.__data__),s[c]=h,Xa(s[c],e,n,c,s,Re(u,n)));return new hn(o,this._parents,e,n)}function Nw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ud(t));for(var i=this._groups,r=i.length,o=[],a=[],f=0;f<r;++f)for(var l=i[f],s=l.length,u,h=0;h<s;++h)if(u=l[h]){for(var c=t.call(u,u.__data__,h,l),d,p=Re(u,n),m=0,g=c.length;m<g;++m)(d=c[m])&&Xa(d,e,n,m,c,p);o.push(c),a.push(u)}return new hn(o,a,e,n)}var Dw=jr.prototype.constructor;function Fw(){return new Dw(this._groups,this._parents)}function Lw(t,e){var n,i,r;return function(){var o=Oi(this,t),a=(this.style.removeProperty(t),Oi(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function b0(t){return function(){this.style.removeProperty(t)}}function Iw(t,e,n){var i,r=n+"",o;return function(){var a=Oi(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function Rw(t,e,n){var i,r,o;return function(){var a=Oi(this,t),f=n(this),l=f+"";return f==null&&(l=f=(this.style.removeProperty(t),Oi(this,t))),a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f))}}function Pw(t,e){var n,i,r,o="style."+e,a="end."+o,f;return function(){var l=Ke(this,t),s=l.on,u=l.value[o]==null?f||(f=b0(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),l.on=i}}function Ow(t,e,n){var i=(t+="")=="transform"?Ry:g0;return e==null?this.styleTween(t,Lw(t,i)).on("end.style."+t,b0(t)):typeof e=="function"?this.styleTween(t,Rw(t,i,Ns(this,"style."+t,e))).each(Pw(this._id,t)):this.styleTween(t,Iw(t,i,e),n).on("end.style."+t,null)}function Uw(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Bw(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Uw(t,a,n)),i}return o._value=e,o}function zw(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Bw(t,e,n??""))}function qw(t){return function(){this.textContent=t}}function Yw(t){return function(){var e=t(this);this.textContent=e??""}}function Ww(t){return this.tween("text",typeof t=="function"?Yw(Ns(this,"text",t)):qw(t==null?"":t+""))}function Hw(t){return function(e){this.textContent=t.call(this,e)}}function Vw(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Hw(r)),e}return i._value=t,i}function Gw(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Vw(t))}function Xw(){for(var t=this._name,e=this._id,n=_0(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],f=a.length,l,s=0;s<f;++s)if(l=a[s]){var u=Re(l,e);Xa(l,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new hn(i,this._parents,t,n)}function jw(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var f={value:a},l={value:function(){--r===0&&o()}};n.each(function(){var s=Ke(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(l)),s.on=e}),r===0&&o()})}var Zw=0;function hn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function _0(){return++Zw}var tn=jr.prototype;hn.prototype={constructor:hn,select:Aw,selectAll:Nw,selectChild:tn.selectChild,selectChildren:tn.selectChildren,filter:$w,merge:Mw,selection:Fw,transition:Xw,call:tn.call,nodes:tn.nodes,node:tn.node,size:tn.size,empty:tn.empty,each:tn.each,on:Tw,attr:fw,attrTween:hw,style:Ow,styleTween:zw,text:Ww,textTween:Gw,remove:Ew,tween:tw,delay:mw,duration:_w,ease:ww,easeVarying:xw,end:jw,[Symbol.iterator]:tn[Symbol.iterator]};function Kw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Qw={time:null,delay:0,duration:250,ease:Kw};function Jw(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function tv(t){var e,n;t instanceof hn?(e=t._id,t=t._name):(e=_0(),(n=Qw).time=Es(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],f=a.length,l,s=0;s<f;++s)(l=a[s])&&Xa(l,t,e,s,a,n||Jw(l,e));return new hn(i,this._parents,t,e)}jr.prototype.interrupt=Ky;jr.prototype.transition=tv;const Pl=Math.PI,Ol=2*Pl,Vn=1e-6,ev=Ol-Vn;function y0(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function nv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return y0;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class w0{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?y0:nv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,l=i-e,s=r-n,u=a-e,h=f-n,c=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(c>Vn)if(!(Math.abs(h*l-s*u)>Vn)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let d=i-a,p=r-f,m=l*l+s*s,g=d*d+p*p,w=Math.sqrt(m),b=Math.sqrt(c),v=o*Math.tan((Pl-Math.acos((m+c-g)/(2*w*b)))/2),_=v/b,x=v/w;Math.abs(_-1)>Vn&&this._append`L${e+_*u},${n+_*h}`,this._append`A${o},${o},0,0,${+(h*d>u*p)},${this._x1=e+x*l},${this._y1=n+x*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let f=i*Math.cos(r),l=i*Math.sin(r),s=e+f,u=n+l,h=1^a,c=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>Vn||Math.abs(this._y1-u)>Vn)&&this._append`L${s},${u}`,i&&(c<0&&(c=c%Ol+Ol),c>ev?this._append`A${i},${i},0,1,${h},${e-f},${n-l}A${i},${i},0,1,${h},${this._x1=s},${this._y1=u}`:c>Vn&&this._append`A${i},${i},0,${+(c>=Pl)},${h},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Sn(t=3){return new w0(+t)}function iv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function sa(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function zi(t){return t=sa(Math.abs(t)),t?t[1]:NaN}function rv(t,e){return function(n,i){for(var r=n.length,o=[],a=0,f=t[0],l=0;r>0&&f>0&&(l+f+1>i&&(f=Math.max(1,i-l)),o.push(n.substring(r-=f,r+f)),!((l+=f+1)>i));)f=t[a=(a+1)%t.length];return o.reverse().join(e)}}function ov(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var av=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pr(t){if(!(e=av.exec(t)))throw new Error("invalid format: "+t);var e;return new Ds({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Pr.prototype=Ds.prototype;function Ds(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ds.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fv(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var v0;function lv(t,e){var n=sa(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(v0=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+sa(t,Math.max(0,e+o-1))[0]}function Ku(t,e){var n=sa(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const Qu={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:iv,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ku(t*100,e),r:Ku,s:lv,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ju(t){return t}var tc=Array.prototype.map,ec=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function sv(t){var e=t.grouping===void 0||t.thousands===void 0?Ju:rv(tc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ju:ov(tc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function s(h){h=Pr(h);var c=h.fill,d=h.align,p=h.sign,m=h.symbol,g=h.zero,w=h.width,b=h.comma,v=h.precision,_=h.trim,x=h.type;x==="n"?(b=!0,x="g"):Qu[x]||(v===void 0&&(v=12),_=!0,x="g"),(g||c==="0"&&d==="=")&&(g=!0,c="0",d="=");var M=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",$=m==="$"?i:/[%p]/.test(x)?a:"",S=Qu[x],C=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function D(T){var L=M,I=$,Y,E,z;if(x==="c")I=S(T)+I,T="";else{T=+T;var R=T<0||1/T<0;if(T=isNaN(T)?l:S(Math.abs(T),v),_&&(T=fv(T)),R&&+T==0&&p!=="+"&&(R=!1),L=(R?p==="("?p:f:p==="-"||p==="("?"":p)+L,I=(x==="s"?ec[8+v0/3]:"")+I+(R&&p==="("?")":""),C){for(Y=-1,E=T.length;++Y<E;)if(z=T.charCodeAt(Y),48>z||z>57){I=(z===46?r+T.slice(Y+1):T.slice(Y))+I,T=T.slice(0,Y);break}}}b&&!g&&(T=e(T,1/0));var Q=L.length+T.length+I.length,V=Q<w?new Array(w-Q+1).join(c):"";switch(b&&g&&(T=e(V+T,V.length?w-I.length:1/0),V=""),d){case"<":T=L+T+I+V;break;case"=":T=L+V+T+I;break;case"^":T=V.slice(0,Q=V.length>>1)+L+T+I+V.slice(Q);break;default:T=V+L+T+I;break}return o(T)}return D.toString=function(){return h+""},D}function u(h,c){var d=s((h=Pr(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(zi(c)/3)))*3,m=Math.pow(10,-p),g=ec[8+p/3];return function(w){return d(m*w)+g}}return{format:s,formatPrefix:u}}var ko,tr,x0;uv({thousands:",",grouping:[3],currency:["$",""]});function uv(t){return ko=sv(t),tr=ko.format,x0=ko.formatPrefix,ko}function cv(t){return Math.max(0,-zi(Math.abs(t)))}function hv(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zi(e)/3)))*3-zi(Math.abs(t)))}function dv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,zi(e)-zi(t))+1}var bt=1e-6,$0=1e-12,wt=Math.PI,Ct=wt/2,nc=wt/4,de=wt*2,Zt=180/wt,Tt=wt/180,$t=Math.abs,er=Math.atan,dn=Math.atan2,yt=Math.cos,M0=Math.exp,ua=Math.log,qf=Math.pow,gt=Math.sin,ye=Math.sign||function(t){return t>0?1:t<0?-1:0},fe=Math.sqrt,Fs=Math.tan;function k0(t){return t>1?0:t<-1?wt:Math.acos(t)}function Me(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function we(){}function ca(t,e){t&&rc.hasOwnProperty(t.type)&&rc[t.type](t,e)}var ic={Feature:function(t,e){ca(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ca(n[i].geometry,e)}},rc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ul(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ul(n[i],e,0)},Polygon:function(t,e){oc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)oc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ca(n[i],e)}};function Ul(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function oc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ul(t[n],e,1);e.polygonEnd()}function Gn(t,e){t&&ic.hasOwnProperty(t.type)?ic[t.type](t,e):ca(t,e)}function Bl(t){return[dn(t[1],t[0]),Me(t[2])]}function qi(t){var e=t[0],n=t[1],i=yt(n);return[i*yt(e),i*gt(e),gt(n)]}function So(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ha(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Yf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function To(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function zl(t){var e=fe(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ql(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function Yl(t,e){return $t(t)>wt&&(t-=Math.round(t/de)*de),[t,e]}Yl.invert=Yl;function S0(t,e,n){return(t%=de)?e||n?ql(fc(t),lc(e,n)):fc(t):e||n?lc(e,n):Yl}function ac(t){return function(e,n){return e+=t,$t(e)>wt&&(e-=Math.round(e/de)*de),[e,n]}}function fc(t){var e=ac(t);return e.invert=ac(-t),e}function lc(t,e){var n=yt(t),i=gt(t),r=yt(e),o=gt(e);function a(f,l){var s=yt(l),u=yt(f)*s,h=gt(f)*s,c=gt(l),d=c*n+u*i;return[dn(h*r-d*o,u*n-c*i),Me(d*r+h*o)]}return a.invert=function(f,l){var s=yt(l),u=yt(f)*s,h=gt(f)*s,c=gt(l),d=c*r-h*o;return[dn(h*r+c*o,u*n+d*i),Me(d*n-u*i)]},a}function pv(t){t=S0(t[0]*Tt,t[1]*Tt,t.length>2?t[2]*Tt:0);function e(n){return n=t(n[0]*Tt,n[1]*Tt),n[0]*=Zt,n[1]*=Zt,n}return e.invert=function(n){return n=t.invert(n[0]*Tt,n[1]*Tt),n[0]*=Zt,n[1]*=Zt,n},e}function mv(t,e,n,i,r,o){if(n){var a=yt(e),f=gt(e),l=i*n;r==null?(r=e+i*de,o=e-l/2):(r=sc(a,r),o=sc(a,o),(i>0?r<o:r>o)&&(r+=i*de));for(var s,u=r;i>0?u>o:u<o;u-=l)s=Bl([a,-f*yt(u),-f*gt(u)]),t.point(s[0],s[1])}}function sc(t,e){e=qi(e),e[0]-=t,zl(e);var n=k0(-e[1]);return((-e[2]<0?-n:n)+de-bt)%de}function T0(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:we,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function Go(t,e){return $t(t[0]-e[0])<bt&&$t(t[1]-e[1])<bt}function Co(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function C0(t,e,n,i,r){var o=[],a=[],f,l;if(t.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],w=p[m],b;if(Go(g,w)){if(!g[2]&&!w[2]){for(r.lineStart(),f=0;f<m;++f)r.point((g=p[f])[0],g[1]);r.lineEnd();return}w[0]+=2*bt}o.push(b=new Co(g,p,null,!0)),a.push(b.o=new Co(g,null,b,!1)),o.push(b=new Co(w,p,null,!1)),a.push(b.o=new Co(w,null,b,!0))}}),!!o.length){for(a.sort(e),uc(o),uc(a),f=0,l=a.length;f<l;++f)a[f].e=n=!n;for(var s=o[0],u,h;;){for(var c=s,d=!0;c.v;)if((c=c.n)===s)return;u=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(d)for(f=0,l=u.length;f<l;++f)r.point((h=u[f])[0],h[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(d)for(u=c.p.z,f=u.length-1;f>=0;--f)r.point((h=u[f])[0],h[1]);else i(c.x,c.p.x,-1,r);c=c.p}c=c.o,u=c.z,d=!d}while(!c.v);r.lineEnd()}}}function uc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Wf(t){return $t(t[0])<=wt?t[0]:ye(t[0])*(($t(t[0])+wt)%de-wt)}function gv(t,e){var n=Wf(e),i=e[1],r=gt(i),o=[gt(n),-yt(n),0],a=0,f=0,l=new ti;r===1?i=Ct+bt:r===-1&&(i=-Ct-bt);for(var s=0,u=t.length;s<u;++s)if(c=(h=t[s]).length)for(var h,c,d=h[c-1],p=Wf(d),m=d[1]/2+nc,g=gt(m),w=yt(m),b=0;b<c;++b,p=_,g=M,w=$,d=v){var v=h[b],_=Wf(v),x=v[1]/2+nc,M=gt(x),$=yt(x),S=_-p,C=S>=0?1:-1,D=C*S,T=D>wt,L=g*M;if(l.add(dn(L*C*gt(D),w*$+L*yt(D))),a+=T?S+C*de:S,T^p>=n^_>=n){var I=ha(qi(d),qi(v));zl(I);var Y=ha(o,I);zl(Y);var E=(T^S>=0?-1:1)*Me(Y[2]);(i>E||i===E&&(I[0]||I[1]))&&(f+=T^S>=0?1:-1)}}return(a<-bt||a<bt&&l<-$0)^f&1}function E0(t,e,n,i){return function(r){var o=e(r),a=T0(),f=e(a),l=!1,s,u,h,c={point:d,lineStart:m,lineEnd:g,polygonStart:function(){c.point=w,c.lineStart=b,c.lineEnd=v,u=[],s=[]},polygonEnd:function(){c.point=d,c.lineStart=m,c.lineEnd=g,u=Pd(u);var _=gv(s,i);u.length?(l||(r.polygonStart(),l=!0),C0(u,_v,_,n,r)):_&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(_,x){t(_,x)&&r.point(_,x)}function p(_,x){o.point(_,x)}function m(){c.point=p,o.lineStart()}function g(){c.point=d,o.lineEnd()}function w(_,x){h.push([_,x]),f.point(_,x)}function b(){f.lineStart(),h=[]}function v(){w(h[0][0],h[0][1]),f.lineEnd();var _=f.clean(),x=a.result(),M,$=x.length,S,C,D;if(h.pop(),s.push(h),h=null,!!$){if(_&1){if(C=x[0],(S=C.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),M=0;M<S;++M)r.point((D=C[M])[0],D[1]);r.lineEnd()}return}$>1&&_&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(bv))}}return c}}function bv(t){return t.length>1}function _v(t,e){return((t=t.x)[0]<0?t[1]-Ct-bt:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-bt:Ct-e[1])}const cc=E0(function(){return!0},yv,vv,[-wt,-Ct]);function yv(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var f=o>0?wt:-wt,l=$t(o-e);$t(l-wt)<bt?(t.point(e,n=(n+a)/2>0?Ct:-Ct),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(o,n),r=0):i!==f&&l>=wt&&($t(e-i)<bt&&(e-=i*bt),$t(o-f)<bt&&(o-=f*bt),n=wv(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(f,n),r=0),t.point(e=o,n=a),i=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function wv(t,e,n,i){var r,o,a=gt(t-n);return $t(a)>bt?er((gt(e)*(o=yt(i))*gt(n)-gt(i)*(r=yt(e))*gt(t))/(r*o*a)):(e+i)/2}function vv(t,e,n,i){var r;if(t==null)r=n*Ct,i.point(-wt,r),i.point(0,r),i.point(wt,r),i.point(wt,0),i.point(wt,-r),i.point(0,-r),i.point(-wt,-r),i.point(-wt,0),i.point(-wt,r);else if($t(t[0]-e[0])>bt){var o=t[0]<e[0]?wt:-wt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function xv(t){var e=yt(t),n=6*Tt,i=e>0,r=$t(e)>bt;function o(u,h,c,d){mv(d,t,n,c,u,h)}function a(u,h){return yt(u)*yt(h)>e}function f(u){var h,c,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(g,w){var b=[g,w],v,_=a(g,w),x=i?_?0:s(g,w):_?s(g+(g<0?wt:-wt),w):0;if(!h&&(p=d=_)&&u.lineStart(),_!==d&&(v=l(h,b),(!v||Go(h,v)||Go(b,v))&&(b[2]=1)),_!==d)m=0,_?(u.lineStart(),v=l(b,h),u.point(v[0],v[1])):(v=l(h,b),u.point(v[0],v[1],2),u.lineEnd()),h=v;else if(r&&h&&i^_){var M;!(x&c)&&(M=l(b,h,!0))&&(m=0,i?(u.lineStart(),u.point(M[0][0],M[0][1]),u.point(M[1][0],M[1][1]),u.lineEnd()):(u.point(M[1][0],M[1][1]),u.lineEnd(),u.lineStart(),u.point(M[0][0],M[0][1],3)))}_&&(!h||!Go(h,b))&&u.point(b[0],b[1]),h=b,d=_,c=x},lineEnd:function(){d&&u.lineEnd(),h=null},clean:function(){return m|(p&&d)<<1}}}function l(u,h,c){var d=qi(u),p=qi(h),m=[1,0,0],g=ha(d,p),w=So(g,g),b=g[0],v=w-b*b;if(!v)return!c&&u;var _=e*w/v,x=-e*b/v,M=ha(m,g),$=To(m,_),S=To(g,x);Yf($,S);var C=M,D=So($,C),T=So(C,C),L=D*D-T*(So($,$)-1);if(!(L<0)){var I=fe(L),Y=To(C,(-D-I)/T);if(Yf(Y,$),Y=Bl(Y),!c)return Y;var E=u[0],z=h[0],R=u[1],Q=h[1],V;z<E&&(V=E,E=z,z=V);var H=z-E,F=$t(H-wt)<bt,W=F||H<bt;if(!F&&Q<R&&(V=R,R=Q,Q=V),W?F?R+Q>0^Y[1]<($t(Y[0]-E)<bt?R:Q):R<=Y[1]&&Y[1]<=Q:H>wt^(E<=Y[0]&&Y[0]<=z)){var G=To(C,(-D+I)/T);return Yf(G,$),[Y,Bl(G)]}}}function s(u,h){var c=i?t:wt-t,d=0;return u<-c?d|=1:u>c&&(d|=2),h<-c?d|=4:h>c&&(d|=8),d}return E0(a,f,o,i?[0,-t]:[-wt,t-wt])}function $v(t,e,n,i,r,o){var a=t[0],f=t[1],l=e[0],s=e[1],u=0,h=1,c=l-a,d=s-f,p;if(p=n-a,!(!c&&p>0)){if(p/=c,c<0){if(p<u)return;p<h&&(h=p)}else if(c>0){if(p>h)return;p>u&&(u=p)}if(p=r-a,!(!c&&p<0)){if(p/=c,c<0){if(p>h)return;p>u&&(u=p)}else if(c>0){if(p<u)return;p<h&&(h=p)}if(p=i-f,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<h&&(h=p)}else if(d>0){if(p>h)return;p>u&&(u=p)}if(p=o-f,!(!d&&p<0)){if(p/=d,d<0){if(p>h)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<h&&(h=p)}return u>0&&(t[0]=a+u*c,t[1]=f+u*d),h<1&&(e[0]=a+h*c,e[1]=f+h*d),!0}}}}}var gr=1e9,Eo=-gr;function A0(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,h,c){var d=0,p=0;if(s==null||(d=a(s,h))!==(p=a(u,h))||l(s,u)<0^h>0)do c.point(d===0||d===3?t:n,d>1?i:e);while((d=(d+h+4)%4)!==p);else c.point(u[0],u[1])}function a(s,u){return $t(s[0]-t)<bt?u>0?0:3:$t(s[0]-n)<bt?u>0?2:1:$t(s[1]-e)<bt?u>0?1:0:u>0?3:2}function f(s,u){return l(s.x,u.x)}function l(s,u){var h=a(s,1),c=a(u,1);return h!==c?h-c:h===0?u[1]-s[1]:h===1?s[0]-u[0]:h===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,h=T0(),c,d,p,m,g,w,b,v,_,x,M,$={point:S,lineStart:L,lineEnd:I,polygonStart:D,polygonEnd:T};function S(E,z){r(E,z)&&u.point(E,z)}function C(){for(var E=0,z=0,R=d.length;z<R;++z)for(var Q=d[z],V=1,H=Q.length,F=Q[0],W,G,nt=F[0],J=F[1];V<H;++V)W=nt,G=J,F=Q[V],nt=F[0],J=F[1],G<=i?J>i&&(nt-W)*(i-G)>(J-G)*(t-W)&&++E:J<=i&&(nt-W)*(i-G)<(J-G)*(t-W)&&--E;return E}function D(){u=h,c=[],d=[],M=!0}function T(){var E=C(),z=M&&E,R=(c=Pd(c)).length;(z||R)&&(s.polygonStart(),z&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),R&&C0(c,f,E,o,s),s.polygonEnd()),u=s,c=d=p=null}function L(){$.point=Y,d&&d.push(p=[]),x=!0,_=!1,b=v=NaN}function I(){c&&(Y(m,g),w&&_&&h.rejoin(),c.push(h.result())),$.point=S,_&&u.lineEnd()}function Y(E,z){var R=r(E,z);if(d&&p.push([E,z]),x)m=E,g=z,w=R,x=!1,R&&(u.lineStart(),u.point(E,z));else if(R&&_)u.point(E,z);else{var Q=[b=Math.max(Eo,Math.min(gr,b)),v=Math.max(Eo,Math.min(gr,v))],V=[E=Math.max(Eo,Math.min(gr,E)),z=Math.max(Eo,Math.min(gr,z))];$v(Q,V,t,e,n,i)?(_||(u.lineStart(),u.point(Q[0],Q[1])),u.point(V[0],V[1]),R||u.lineEnd(),M=!1):R&&(u.lineStart(),u.point(E,z),M=!1)}b=E,v=z,_=R}return $}}const Wl=t=>t;var Hf=new ti,Hl=new ti,N0,D0,Vl,Gl,kn={point:we,lineStart:we,lineEnd:we,polygonStart:function(){kn.lineStart=Mv,kn.lineEnd=Sv},polygonEnd:function(){kn.lineStart=kn.lineEnd=kn.point=we,Hf.add($t(Hl)),Hl=new ti},result:function(){var t=Hf/2;return Hf=new ti,t}};function Mv(){kn.point=kv}function kv(t,e){kn.point=F0,N0=Vl=t,D0=Gl=e}function F0(t,e){Hl.add(Gl*t-Vl*e),Vl=t,Gl=e}function Sv(){F0(N0,D0)}const hc=kn;var Yi=1/0,da=Yi,Or=-Yi,pa=Or,Tv={point:Cv,lineStart:we,lineEnd:we,polygonStart:we,polygonEnd:we,result:function(){var t=[[Yi,da],[Or,pa]];return Or=pa=-(da=Yi=1/0),t}};function Cv(t,e){t<Yi&&(Yi=t),t>Or&&(Or=t),e<da&&(da=e),e>pa&&(pa=e)}const ma=Tv;var Xl=0,jl=0,br=0,ga=0,ba=0,Ti=0,Zl=0,Kl=0,_r=0,L0,I0,qe,Ye,Ee={point:fi,lineStart:dc,lineEnd:pc,polygonStart:function(){Ee.lineStart=Nv,Ee.lineEnd=Dv},polygonEnd:function(){Ee.point=fi,Ee.lineStart=dc,Ee.lineEnd=pc},result:function(){var t=_r?[Zl/_r,Kl/_r]:Ti?[ga/Ti,ba/Ti]:br?[Xl/br,jl/br]:[NaN,NaN];return Xl=jl=br=ga=ba=Ti=Zl=Kl=_r=0,t}};function fi(t,e){Xl+=t,jl+=e,++br}function dc(){Ee.point=Ev}function Ev(t,e){Ee.point=Av,fi(qe=t,Ye=e)}function Av(t,e){var n=t-qe,i=e-Ye,r=fe(n*n+i*i);ga+=r*(qe+t)/2,ba+=r*(Ye+e)/2,Ti+=r,fi(qe=t,Ye=e)}function pc(){Ee.point=fi}function Nv(){Ee.point=Fv}function Dv(){R0(L0,I0)}function Fv(t,e){Ee.point=R0,fi(L0=qe=t,I0=Ye=e)}function R0(t,e){var n=t-qe,i=e-Ye,r=fe(n*n+i*i);ga+=r*(qe+t)/2,ba+=r*(Ye+e)/2,Ti+=r,r=Ye*t-qe*e,Zl+=r*(qe+t),Kl+=r*(Ye+e),_r+=r*3,fi(qe=t,Ye=e)}const mc=Ee;function P0(t){this._context=t}P0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,de);break}}},result:we};var Ql=new ti,Vf,O0,U0,yr,wr,_a={point:we,lineStart:function(){_a.point=Lv},lineEnd:function(){Vf&&B0(O0,U0),_a.point=we},polygonStart:function(){Vf=!0},polygonEnd:function(){Vf=null},result:function(){var t=+Ql;return Ql=new ti,t}};function Lv(t,e){_a.point=B0,O0=yr=t,U0=wr=e}function B0(t,e){yr-=t,wr-=e,Ql.add(fe(yr*yr+wr*wr)),yr=t,wr=e}const gc=_a;let bc,ya,_c,yc;class wc{constructor(e){this._append=e==null?z0:Iv(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==_c||this._append!==ya){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,_c=i,ya=this._append,yc=this._,this._=r}this._+=yc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function z0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Iv(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return z0;if(e!==bc){const n=10**e;bc=e,ya=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return ya}function ja(t,e){let n=3,i=4.5,r,o;function a(f){return f&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Gn(f,r(o))),o.result()}return a.area=function(f){return Gn(f,r(hc)),hc.result()},a.measure=function(f){return Gn(f,r(gc)),gc.result()},a.bounds=function(f){return Gn(f,r(ma)),ma.result()},a.centroid=function(f){return Gn(f,r(mc)),mc.result()},a.projection=function(f){return arguments.length?(r=f==null?(t=null,Wl):(t=f).stream,a):t},a.context=function(f){return arguments.length?(o=f==null?(e=null,new wc(n)):new P0(e=f),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(o.pointRadius(+f),+f),a):i},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const l=Math.floor(f);if(!(l>=0))throw new RangeError(`invalid digits: ${f}`);n=l}return e===null&&(o=new wc(n)),a},a.projection(t).digits(n).context(e)}function Jl(t){return{stream:Za(t)}}function Za(t){return function(e){var n=new ts;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ts(){}ts.prototype={constructor:ts,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Ls(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Gn(n,t.stream(ma)),e(ma.result()),i!=null&&t.clipExtent(i),t}function Is(t,e,n){return Ls(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),f=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([f,l])},n)}function q0(t,e,n){return Is(t,[[0,0],e],n)}function Y0(t,e,n){return Ls(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,f=-o*i[0][1];t.scale(150*o).translate([a,f])},n)}function W0(t,e,n){return Ls(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],f=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,f])},n)}var vc=16,Rv=yt(30*Tt);function xc(t,e){return+e?Ov(t,e):Pv(t)}function Pv(t){return Za({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Ov(t,e){function n(i,r,o,a,f,l,s,u,h,c,d,p,m,g){var w=s-i,b=u-r,v=w*w+b*b;if(v>4*e&&m--){var _=a+c,x=f+d,M=l+p,$=fe(_*_+x*x+M*M),S=Me(M/=$),C=$t($t(M)-1)<bt||$t(o-h)<bt?(o+h)/2:dn(x,_),D=t(C,S),T=D[0],L=D[1],I=T-i,Y=L-r,E=b*I-w*Y;(E*E/v>e||$t((w*I+b*Y)/v-.5)>.3||a*c+f*d+l*p<Rv)&&(n(i,r,o,a,f,l,T,L,C,_/=$,x/=$,M,m,g),g.point(T,L),n(T,L,C,_,x,M,s,u,h,c,d,p,m,g))}}return function(i){var r,o,a,f,l,s,u,h,c,d,p,m,g={point:w,lineStart:b,lineEnd:_,polygonStart:function(){i.polygonStart(),g.lineStart=x},polygonEnd:function(){i.polygonEnd(),g.lineStart=b}};function w(S,C){S=t(S,C),i.point(S[0],S[1])}function b(){h=NaN,g.point=v,i.lineStart()}function v(S,C){var D=qi([S,C]),T=t(S,C);n(h,c,u,d,p,m,h=T[0],c=T[1],u=S,d=D[0],p=D[1],m=D[2],vc,i),i.point(h,c)}function _(){g.point=w,i.lineEnd()}function x(){b(),g.point=M,g.lineEnd=$}function M(S,C){v(r=S,C),o=h,a=c,f=d,l=p,s=m,g.point=v}function $(){n(h,c,u,d,p,m,o,a,r,f,l,s,vc,i),g.lineEnd=_,_()}return g}}var Uv=Za({point:function(t,e){this.stream.point(t*Tt,e*Tt)}});function Bv(t){return Za({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function zv(t,e,n,i,r){function o(a,f){return a*=i,f*=r,[e+t*a,n-t*f]}return o.invert=function(a,f){return[(a-e)/t*i,(n-f)/t*r]},o}function $c(t,e,n,i,r,o){if(!o)return zv(t,e,n,i,r);var a=yt(o),f=gt(o),l=a*t,s=f*t,u=a/t,h=f/t,c=(f*n-a*e)/t,d=(f*e+a*n)/t;function p(m,g){return m*=i,g*=r,[l*m-s*g+e,n-s*m-l*g]}return p.invert=function(m,g){return[i*(u*m-h*g+c),r*(d-h*m-u*g)]},p}function Bn(t){return H0(function(){return t})()}function H0(t){var e,n=150,i=480,r=250,o=0,a=0,f=0,l=0,s=0,u,h=0,c=1,d=1,p=null,m=cc,g=null,w,b,v,_=Wl,x=.5,M,$,S,C,D;function T(E){return S(E[0]*Tt,E[1]*Tt)}function L(E){return E=S.invert(E[0],E[1]),E&&[E[0]*Zt,E[1]*Zt]}T.stream=function(E){return C&&D===E?C:C=Uv(Bv(u)(m(M(_(D=E)))))},T.preclip=function(E){return arguments.length?(m=E,p=void 0,Y()):m},T.postclip=function(E){return arguments.length?(_=E,g=w=b=v=null,Y()):_},T.clipAngle=function(E){return arguments.length?(m=+E?xv(p=E*Tt):(p=null,cc),Y()):p*Zt},T.clipExtent=function(E){return arguments.length?(_=E==null?(g=w=b=v=null,Wl):A0(g=+E[0][0],w=+E[0][1],b=+E[1][0],v=+E[1][1]),Y()):g==null?null:[[g,w],[b,v]]},T.scale=function(E){return arguments.length?(n=+E,I()):n},T.translate=function(E){return arguments.length?(i=+E[0],r=+E[1],I()):[i,r]},T.center=function(E){return arguments.length?(o=E[0]%360*Tt,a=E[1]%360*Tt,I()):[o*Zt,a*Zt]},T.rotate=function(E){return arguments.length?(f=E[0]%360*Tt,l=E[1]%360*Tt,s=E.length>2?E[2]%360*Tt:0,I()):[f*Zt,l*Zt,s*Zt]},T.angle=function(E){return arguments.length?(h=E%360*Tt,I()):h*Zt},T.reflectX=function(E){return arguments.length?(c=E?-1:1,I()):c<0},T.reflectY=function(E){return arguments.length?(d=E?-1:1,I()):d<0},T.precision=function(E){return arguments.length?(M=xc($,x=E*E),Y()):fe(x)},T.fitExtent=function(E,z){return Is(T,E,z)},T.fitSize=function(E,z){return q0(T,E,z)},T.fitWidth=function(E,z){return Y0(T,E,z)},T.fitHeight=function(E,z){return W0(T,E,z)};function I(){var E=$c(n,0,0,c,d,h).apply(null,e(o,a)),z=$c(n,i-E[0],r-E[1],c,d,h);return u=S0(f,l,s),$=ql(e,z),S=ql(u,$),M=xc($,x),Y()}function Y(){return C=D=null,T}return function(){return e=t.apply(this,arguments),T.invert=e.invert&&L,I()}}function Rs(t){var e=0,n=wt/3,i=H0(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*Tt,n=o[1]*Tt):[e*Zt,n*Zt]},r}function qv(t){var e=yt(t);function n(i,r){return[i*e,gt(r)/e]}return n.invert=function(i,r){return[i/e,Me(r*e)]},n}function Yv(t,e){var n=gt(t),i=(n+gt(e))/2;if($t(i)<bt)return qv(t);var r=1+n*(2*i-n),o=fe(r)/i;function a(f,l){var s=fe(r-2*i*gt(l))/i;return[s*gt(f*=i),o-s*yt(f)]}return a.invert=function(f,l){var s=o-l,u=dn(f,$t(s))*ye(s);return s*i<0&&(u-=wt*ye(f)*ye(s)),[u/i,Me((r-(f*f+s*s)*i*i)/(2*i))]},a}function wa(){return Rs(Yv).scale(155.424).center([0,33.6442])}function V0(){return wa().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wv(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Hv(){var t,e,n=V0(),i,r=wa().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=wa().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,l,s={point:function(c,d){l=[c,d]}};function u(c){var d=c[0],p=c[1];return l=null,i.point(d,p),l||(o.point(d,p),l)||(f.point(d,p),l)}u.invert=function(c){var d=n.scale(),p=n.translate(),m=(c[0]-p[0])/d,g=(c[1]-p[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?r:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(c)},u.stream=function(c){return t&&e===c?t:t=Wv([n.stream(e=c),r.stream(c),a.stream(c)])},u.precision=function(c){return arguments.length?(n.precision(c),r.precision(c),a.precision(c),h()):n.precision()},u.scale=function(c){return arguments.length?(n.scale(c),r.scale(c*.35),a.scale(c),u.translate(n.translate())):n.scale()},u.translate=function(c){if(!arguments.length)return n.translate();var d=n.scale(),p=+c[0],m=+c[1];return i=n.translate(c).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(s),o=r.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+bt,m+.12*d+bt],[p-.214*d-bt,m+.234*d-bt]]).stream(s),f=a.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+bt,m+.166*d+bt],[p-.115*d-bt,m+.234*d-bt]]).stream(s),h()},u.fitExtent=function(c,d){return Is(u,c,d)},u.fitSize=function(c,d){return q0(u,c,d)},u.fitWidth=function(c,d){return Y0(u,c,d)},u.fitHeight=function(c,d){return W0(u,c,d)};function h(){return t=e=null,u}return u.scale(1070)}function G0(t){return function(e,n){var i=yt(e),r=yt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*gt(e),o*gt(n)]}}function Qr(t){return function(e,n){var i=fe(e*e+n*n),r=t(i),o=gt(r),a=yt(r);return[dn(e*o,i*a),Me(i&&n*o/i)]}}var X0=G0(function(t){return fe(2/(1+t))});X0.invert=Qr(function(t){return 2*Me(t/2)});function Vv(){return Bn(X0).scale(124.75).clipAngle(180-.001)}var j0=G0(function(t){return(t=k0(t))&&t/gt(t)});j0.invert=Qr(function(t){return t});function Gv(){return Bn(j0).scale(79.4188).clipAngle(180-.001)}function Ka(t,e){return[t,ua(Fs((Ct+e)/2))]}Ka.invert=function(t,e){return[t,2*er(M0(e))-Ct]};function Xv(){return Z0(Ka).scale(961/de)}function Z0(t){var e=Bn(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,f,l,s;e.scale=function(h){return arguments.length?(i(h),u()):i()},e.translate=function(h){return arguments.length?(r(h),u()):r()},e.center=function(h){return arguments.length?(n(h),u()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=f=l=s=null:(a=+h[0][0],f=+h[0][1],l=+h[1][0],s=+h[1][1]),u()):a==null?null:[[a,f],[l,s]]};function u(){var h=wt*i(),c=e(pv(e.rotate()).invert([0,0]));return o(a==null?[[c[0]-h,c[1]-h],[c[0]+h,c[1]+h]]:t===Ka?[[Math.max(c[0]-h,a),f],[Math.min(c[0]+h,l),s]]:[[a,Math.max(c[1]-h,f)],[l,Math.min(c[1]+h,s)]])}return u()}function Ao(t){return Fs((Ct+t)/2)}function jv(t,e){var n=yt(t),i=t===e?gt(t):ua(n/yt(e))/ua(Ao(e)/Ao(t)),r=n*qf(Ao(t),i)/i;if(!i)return Ka;function o(a,f){r>0?f<-Ct+bt&&(f=-Ct+bt):f>Ct-bt&&(f=Ct-bt);var l=r/qf(Ao(f),i);return[l*gt(i*a),r-l*yt(i*a)]}return o.invert=function(a,f){var l=r-f,s=ye(i)*fe(a*a+l*l),u=dn(a,$t(l))*ye(l);return l*i<0&&(u-=wt*ye(a)*ye(l)),[u/i,2*er(qf(r/s,1/i))-Ct]},o}function Zv(){return Rs(jv).scale(109.5).parallels([30,30])}function va(t,e){return[t,e]}va.invert=va;function Kv(){return Bn(va).scale(152.63)}function Qv(t,e){var n=yt(t),i=t===e?gt(t):(n-yt(e))/(e-t),r=n/i+t;if($t(i)<bt)return va;function o(a,f){var l=r-f,s=i*a;return[l*gt(s),r-l*yt(s)]}return o.invert=function(a,f){var l=r-f,s=dn(a,$t(l))*ye(l);return l*i<0&&(s-=wt*ye(a)*ye(l)),[s/i,r-ye(i)*fe(a*a+l*l)]},o}function Jv(){return Rs(Qv).scale(131.154).center([0,13.9389])}var kr=1.340264,Sr=-.081106,Tr=893e-6,Cr=.003796,xa=fe(3)/2,t3=12;function K0(t,e){var n=Me(xa*gt(e)),i=n*n,r=i*i*i;return[t*yt(n)/(xa*(kr+3*Sr*i+r*(7*Tr+9*Cr*i))),n*(kr+Sr*i+r*(Tr+Cr*i))]}K0.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,f,l;o<t3&&(f=n*(kr+Sr*i+r*(Tr+Cr*i))-e,l=kr+3*Sr*i+r*(7*Tr+9*Cr*i),n-=a=f/l,i=n*n,r=i*i*i,!($t(a)<$0));++o);return[xa*t*(kr+3*Sr*i+r*(7*Tr+9*Cr*i))/yt(n),Me(gt(n)/xa)]};function e3(){return Bn(K0).scale(177.158)}function Q0(t,e){var n=yt(e),i=yt(t)*n;return[n*gt(t)/i,gt(e)/i]}Q0.invert=Qr(er);function n3(){return Bn(Q0).scale(144.049).clipAngle(60)}function J0(t,e){return[yt(e)*gt(t),gt(e)]}J0.invert=Qr(Me);function i3(){return Bn(J0).scale(249.5).clipAngle(90+bt)}function tp(t,e){var n=yt(e),i=1+yt(t)*n;return[n*gt(t)/i,gt(e)/i]}tp.invert=Qr(function(t){return 2*er(t)});function r3(){return Bn(tp).scale(250).clipAngle(142)}function ep(t,e){return[ua(Fs((Ct+e)/2)),-t]}ep.invert=function(t,e){return[-e,2*er(M0(t))-Ct]};function o3(){var t=Z0(ep),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function Qe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Qa(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const es=Symbol("implicit");function Ps(){var t=new ei,e=[],n=[],i=es;function r(o){let a=t.get(o);if(a===void 0){if(i!==es)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new ei;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Ps(e,n).unknown(i)},Qe.apply(r,arguments),r}function Ja(){var t=Ps().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,f=!1,l=0,s=0,u=.5;delete t.unknown;function h(){var c=e().length,d=r<i,p=d?r:i,m=d?i:r;o=(m-p)/Math.max(1,c-l+s*2),f&&(o=Math.floor(o)),p+=(m-p-o*(c-l))*u,a=o*(1-l),f&&(p=Math.round(p),a=Math.round(a));var g=Sl(c).map(function(w){return p+o*w});return n(d?g.reverse():g)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([i,r]=c,i=+i,r=+r,h()):[i,r]},t.rangeRound=function(c){return[i,r]=c,i=+i,r=+r,f=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(c){return arguments.length?(f=!!c,h()):f},t.padding=function(c){return arguments.length?(l=Math.min(1,s=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(s=+c,h()):s},t.align=function(c){return arguments.length?(u=Math.max(0,Math.min(1,c)),h()):u},t.copy=function(){return Ja(e(),[i,r]).round(f).paddingInner(l).paddingOuter(s).align(u)},Qe.apply(h(),arguments)}function np(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return np(e())},t}function a3(){return np(Ja.apply(null,arguments).paddingInner(1))}function f3(t){return function(){return t}}function ns(t){return+t}var Mc=[0,1];function ve(t){return t}function is(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:f3(isNaN(e)?NaN:.5)}function l3(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function s3(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=is(r,i),o=n(a,o)):(i=is(i,r),o=n(o,a)),function(f){return o(i(f))}}function u3(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=is(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(f){var l=Oa(t,f,1,i)-1;return o[l](r[l](f))}}function Jr(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function tf(){var t=Mc,e=Mc,n=Kr,i,r,o,a=ve,f,l,s;function u(){var c=Math.min(t.length,e.length);return a!==ve&&(a=l3(t[0],t[c-1])),f=c>2?u3:s3,l=s=null,h}function h(c){return c==null||isNaN(c=+c)?o:(l||(l=f(t.map(i),e,n)))(i(a(c)))}return h.invert=function(c){return a(r((s||(s=f(e,t.map(i),Ht)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,ns),u()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),u()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),n=Ts,u()},h.clamp=function(c){return arguments.length?(a=c?!0:ve,u()):a!==ve},h.interpolate=function(c){return arguments.length?(n=c,u()):n},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,d){return i=c,r=d,u()}}function ip(){return tf()(ve,ve)}function c3(t,e,n,i){var r=Ml(t,e,n),o;switch(i=Pr(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=hv(r,a))&&(i.precision=o),x0(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=dv(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=cv(r))&&(i.precision=o-(i.type==="%")*2);break}}return tr(i)}function to(t){var e=t.domain;return t.ticks=function(n){var i=e();return Fr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return c3(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],f=i[o],l,s,u=10;for(f<a&&(s=a,a=f,f=s,s=r,r=o,o=s);u-- >0;){if(s=ea(a,f,n),s===l)return i[r]=a,i[o]=f,e(i);if(s>0)a=Math.floor(a/s)*s,f=Math.ceil(f/s)*s;else if(s<0)a=Math.ceil(a*s)/s,f=Math.floor(f*s)/s;else break;l=s}return t},t}function Os(){var t=ip();return t.copy=function(){return Jr(t,Os())},Qe.apply(t,arguments),to(t)}function rp(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,ns),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return rp(t).unknown(e)},t=arguments.length?Array.from(t,ns):[0,1],to(n)}function op(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function kc(t){return Math.log(t)}function Sc(t){return Math.exp(t)}function h3(t){return-Math.log(-t)}function d3(t){return-Math.exp(-t)}function p3(t){return isFinite(t)?+("1e"+t):t<0?0:t}function m3(t){return t===10?p3:t===Math.E?Math.exp:e=>Math.pow(t,e)}function g3(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Tc(t){return(e,n)=>-t(-e,n)}function ap(t){const e=t(kc,Sc),n=e.domain;let i=10,r,o;function a(){return r=g3(i),o=m3(i),n()[0]<0?(r=Tc(r),o=Tc(o),t(h3,d3)):t(kc,Sc),e}return e.base=function(f){return arguments.length?(i=+f,a()):i},e.domain=function(f){return arguments.length?(n(f),a()):n()},e.ticks=f=>{const l=n();let s=l[0],u=l[l.length-1];const h=u<s;h&&([s,u]=[u,s]);let c=r(s),d=r(u),p,m;const g=f==null?10:+f;let w=[];if(!(i%1)&&d-c<g){if(c=Math.floor(c),d=Math.ceil(d),s>0){for(;c<=d;++c)for(p=1;p<i;++p)if(m=c<0?p/o(-c):p*o(c),!(m<s)){if(m>u)break;w.push(m)}}else for(;c<=d;++c)for(p=i-1;p>=1;--p)if(m=c>0?p/o(-c):p*o(c),!(m<s)){if(m>u)break;w.push(m)}w.length*2<g&&(w=Fr(s,u,g))}else w=Fr(c,d,Math.min(d-c,g)).map(o);return h?w.reverse():w},e.tickFormat=(f,l)=>{if(f==null&&(f=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Pr(l)).precision==null&&(l.trim=!0),l=tr(l)),f===1/0)return l;const s=Math.max(1,i*f/e.ticks().length);return u=>{let h=u/o(Math.round(r(u)));return h*i<i-.5&&(h*=i),h<=s?l(u):""}},e.nice=()=>n(op(n(),{floor:f=>o(Math.floor(r(f))),ceil:f=>o(Math.ceil(r(f)))})),e}function fp(){const t=ap(tf()).domain([1,10]);return t.copy=()=>Jr(t,fp()).base(t.base()),Qe.apply(t,arguments),t}function Cc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Ec(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lp(t){var e=1,n=t(Cc(e),Ec(e));return n.constant=function(i){return arguments.length?t(Cc(e=+i),Ec(e)):e},to(n)}function sp(){var t=lp(tf());return t.copy=function(){return Jr(t,sp()).constant(t.constant())},Qe.apply(t,arguments)}function Ac(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function b3(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _3(t){return t<0?-t*t:t*t}function up(t){var e=t(ve,ve),n=1;function i(){return n===1?t(ve,ve):n===.5?t(b3,_3):t(Ac(n),Ac(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},to(e)}function cp(){var t=up(tf());return t.copy=function(){return Jr(t,cp()).exponent(t.exponent())},Qe.apply(t,arguments),t}function hp(){var t=[],e=[],n=[],i;function r(){var a=0,f=Math.max(1,e.length);for(n=new Array(f-1);++a<f;)n[a-1]=cb(t,a/f);return o}function o(a){return a==null||isNaN(a=+a)?i:e[Oa(n,a)]}return o.invertExtent=function(a){var f=e.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let f of a)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(oe),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return hp().domain(t).range(e).unknown(i)},Qe.apply(o,arguments)}function dp(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[Oa(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return dp().domain(t).range(e).unknown(n)},Qe.apply(r,arguments)}const Gf=new Date,Xf=new Date;function Nt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),f=r.ceil(o);return o-a<f-o?a:f},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,f)=>{const l=[];if(o=r.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return l;let s;do l.push(s=new Date(+o)),e(o,f),t(o);while(s<o&&o<a);return l},r.filter=o=>Nt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;e(a,-1),!o(a););else for(;--f>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(Gf.setTime(+o),Xf.setTime(+a),t(Gf),t(Xf),Math.floor(n(Gf,Xf))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const $a=Nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);$a.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):$a);$a.range;const sn=1e3,xe=sn*60,un=xe*60,pn=un*24,Us=pn*7,Nc=pn*30,jf=pn*365,Ae=Nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*sn)},(t,e)=>(e-t)/sn,t=>t.getUTCSeconds());Ae.range;const eo=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sn)},(t,e)=>{t.setTime(+t+e*xe)},(t,e)=>(e-t)/xe,t=>t.getMinutes());eo.range;const no=Nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*xe)},(t,e)=>(e-t)/xe,t=>t.getUTCMinutes());no.range;const io=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sn-t.getMinutes()*xe)},(t,e)=>{t.setTime(+t+e*un)},(t,e)=>(e-t)/un,t=>t.getHours());io.range;const ro=Nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*un)},(t,e)=>(e-t)/un,t=>t.getUTCHours());ro.range;const ci=Nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xe)/pn,t=>t.getDate()-1);ci.range;const ef=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pn,t=>t.getUTCDate()-1);ef.range;const nf=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pn,t=>Math.floor(t/pn));nf.range;function hi(t){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*xe)/Us)}const Wi=hi(0),Ur=hi(1),pp=hi(2),mp=hi(3),li=hi(4),gp=hi(5),bp=hi(6);Wi.range;Ur.range;pp.range;mp.range;li.range;gp.range;bp.range;function di(t){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/Us)}const Hi=di(0),Br=di(1),_p=di(2),yp=di(3),si=di(4),wp=di(5),vp=di(6);Hi.range;Br.range;_p.range;yp.range;si.range;wp.range;vp.range;const oo=Nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());oo.range;const ao=Nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());ao.range;const Fe=Nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fe.range;const Le=Nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Le.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Le.range;function xp(t,e,n,i,r,o){const a=[[Ae,1,sn],[Ae,5,5*sn],[Ae,15,15*sn],[Ae,30,30*sn],[o,1,xe],[o,5,5*xe],[o,15,15*xe],[o,30,30*xe],[r,1,un],[r,3,3*un],[r,6,6*un],[r,12,12*un],[i,1,pn],[i,2,2*pn],[n,1,Us],[e,1,Nc],[e,3,3*Nc],[t,1,jf]];function f(s,u,h){const c=u<s;c&&([s,u]=[u,s]);const d=h&&typeof h.range=="function"?h:l(s,u,h),p=d?d.range(s,+u+1):[];return c?p.reverse():p}function l(s,u,h){const c=Math.abs(u-s)/h,d=Pa(([,,g])=>g).right(a,c);if(d===a.length)return t.every(Ml(s/jf,u/jf,h));if(d===0)return $a.every(Math.max(Ml(s,u,h),1));const[p,m]=a[c/a[d-1][2]<a[d][2]/c?d-1:d];return p.every(m)}return[f,l]}const[y3,$p]=xp(Le,ao,Hi,nf,ro,no),[w3,v3]=xp(Fe,oo,Wi,ci,io,eo);function Zf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Kf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function sr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function x3(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,f=t.months,l=t.shortMonths,s=ur(r),u=cr(r),h=ur(o),c=cr(o),d=ur(a),p=cr(a),m=ur(f),g=cr(f),w=ur(l),b=cr(l),v={a:R,A:Q,b:V,B:H,c:null,d:Pc,e:Pc,f:H3,g:e6,G:i6,H:q3,I:Y3,j:W3,L:Mp,m:V3,M:G3,p:F,q:W,Q:Bc,s:zc,S:X3,u:j3,U:Z3,V:K3,w:Q3,W:J3,x:null,X:null,y:t6,Y:n6,Z:r6,"%":Uc},_={a:G,A:nt,b:J,B:X,c:null,d:Oc,e:Oc,f:l6,g:_6,G:w6,H:o6,I:a6,j:f6,L:Sp,m:s6,M:u6,p:q,q:N,Q:Bc,s:zc,S:c6,u:h6,U:d6,V:p6,w:m6,W:g6,x:null,X:null,y:b6,Y:y6,Z:v6,"%":Uc},x={a:D,A:T,b:L,B:I,c:Y,d:Ic,e:Ic,f:O3,g:Lc,G:Fc,H:Rc,I:Rc,j:L3,L:P3,m:F3,M:I3,p:C,q:D3,Q:B3,s:z3,S:R3,u:T3,U:C3,V:E3,w:S3,W:A3,x:E,X:z,y:Lc,Y:Fc,Z:N3,"%":U3};v.x=M(n,v),v.X=M(i,v),v.c=M(e,v),_.x=M(n,_),_.X=M(i,_),_.c=M(e,_);function M(A,P){return function(tt){var O=[],ht=-1,ot=0,pt=A.length,at,ct,zt;for(tt instanceof Date||(tt=new Date(+tt));++ht<pt;)A.charCodeAt(ht)===37&&(O.push(A.slice(ot,ht)),(ct=Dc[at=A.charAt(++ht)])!=null?at=A.charAt(++ht):ct=at==="e"?" ":"0",(zt=P[at])&&(at=zt(tt,ct)),O.push(at),ot=ht+1);return O.push(A.slice(ot,ht)),O.join("")}}function $(A,P){return function(tt){var O=sr(1900,void 0,1),ht=S(O,A,tt+="",0),ot,pt;if(ht!=tt.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(P&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(ot=Kf(sr(O.y,0,1)),pt=ot.getUTCDay(),ot=pt>4||pt===0?Br.ceil(ot):Br(ot),ot=ef.offset(ot,(O.V-1)*7),O.y=ot.getUTCFullYear(),O.m=ot.getUTCMonth(),O.d=ot.getUTCDate()+(O.w+6)%7):(ot=Zf(sr(O.y,0,1)),pt=ot.getDay(),ot=pt>4||pt===0?Ur.ceil(ot):Ur(ot),ot=ci.offset(ot,(O.V-1)*7),O.y=ot.getFullYear(),O.m=ot.getMonth(),O.d=ot.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),pt="Z"in O?Kf(sr(O.y,0,1)).getUTCDay():Zf(sr(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(pt+5)%7:O.w+O.U*7-(pt+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,Kf(O)):Zf(O)}}function S(A,P,tt,O){for(var ht=0,ot=P.length,pt=tt.length,at,ct;ht<ot;){if(O>=pt)return-1;if(at=P.charCodeAt(ht++),at===37){if(at=P.charAt(ht++),ct=x[at in Dc?P.charAt(ht++):at],!ct||(O=ct(A,tt,O))<0)return-1}else if(at!=tt.charCodeAt(O++))return-1}return O}function C(A,P,tt){var O=s.exec(P.slice(tt));return O?(A.p=u.get(O[0].toLowerCase()),tt+O[0].length):-1}function D(A,P,tt){var O=d.exec(P.slice(tt));return O?(A.w=p.get(O[0].toLowerCase()),tt+O[0].length):-1}function T(A,P,tt){var O=h.exec(P.slice(tt));return O?(A.w=c.get(O[0].toLowerCase()),tt+O[0].length):-1}function L(A,P,tt){var O=w.exec(P.slice(tt));return O?(A.m=b.get(O[0].toLowerCase()),tt+O[0].length):-1}function I(A,P,tt){var O=m.exec(P.slice(tt));return O?(A.m=g.get(O[0].toLowerCase()),tt+O[0].length):-1}function Y(A,P,tt){return S(A,e,P,tt)}function E(A,P,tt){return S(A,n,P,tt)}function z(A,P,tt){return S(A,i,P,tt)}function R(A){return a[A.getDay()]}function Q(A){return o[A.getDay()]}function V(A){return l[A.getMonth()]}function H(A){return f[A.getMonth()]}function F(A){return r[+(A.getHours()>=12)]}function W(A){return 1+~~(A.getMonth()/3)}function G(A){return a[A.getUTCDay()]}function nt(A){return o[A.getUTCDay()]}function J(A){return l[A.getUTCMonth()]}function X(A){return f[A.getUTCMonth()]}function q(A){return r[+(A.getUTCHours()>=12)]}function N(A){return 1+~~(A.getUTCMonth()/3)}return{format:function(A){var P=M(A+="",v);return P.toString=function(){return A},P},parse:function(A){var P=$(A+="",!1);return P.toString=function(){return A},P},utcFormat:function(A){var P=M(A+="",_);return P.toString=function(){return A},P},utcParse:function(A){var P=$(A+="",!0);return P.toString=function(){return A},P}}}var Dc={"-":"",_:" ",0:"0"},Bt=/^\s*\d+/,$3=/^%/,M3=/[\\^$*+?|[\]().{}]/g;function vt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function k3(t){return t.replace(M3,"\\$&")}function ur(t){return new RegExp("^(?:"+t.map(k3).join("|")+")","i")}function cr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function S3(t,e,n){var i=Bt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function T3(t,e,n){var i=Bt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function C3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function E3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function A3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Fc(t,e,n){var i=Bt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Lc(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function N3(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function D3(t,e,n){var i=Bt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function F3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Ic(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function L3(t,e,n){var i=Bt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Rc(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function I3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function R3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function P3(t,e,n){var i=Bt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function O3(t,e,n){var i=Bt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function U3(t,e,n){var i=$3.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function B3(t,e,n){var i=Bt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function z3(t,e,n){var i=Bt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Pc(t,e){return vt(t.getDate(),e,2)}function q3(t,e){return vt(t.getHours(),e,2)}function Y3(t,e){return vt(t.getHours()%12||12,e,2)}function W3(t,e){return vt(1+ci.count(Fe(t),t),e,3)}function Mp(t,e){return vt(t.getMilliseconds(),e,3)}function H3(t,e){return Mp(t,e)+"000"}function V3(t,e){return vt(t.getMonth()+1,e,2)}function G3(t,e){return vt(t.getMinutes(),e,2)}function X3(t,e){return vt(t.getSeconds(),e,2)}function j3(t){var e=t.getDay();return e===0?7:e}function Z3(t,e){return vt(Wi.count(Fe(t)-1,t),e,2)}function kp(t){var e=t.getDay();return e>=4||e===0?li(t):li.ceil(t)}function K3(t,e){return t=kp(t),vt(li.count(Fe(t),t)+(Fe(t).getDay()===4),e,2)}function Q3(t){return t.getDay()}function J3(t,e){return vt(Ur.count(Fe(t)-1,t),e,2)}function t6(t,e){return vt(t.getFullYear()%100,e,2)}function e6(t,e){return t=kp(t),vt(t.getFullYear()%100,e,2)}function n6(t,e){return vt(t.getFullYear()%1e4,e,4)}function i6(t,e){var n=t.getDay();return t=n>=4||n===0?li(t):li.ceil(t),vt(t.getFullYear()%1e4,e,4)}function r6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vt(e/60|0,"0",2)+vt(e%60,"0",2)}function Oc(t,e){return vt(t.getUTCDate(),e,2)}function o6(t,e){return vt(t.getUTCHours(),e,2)}function a6(t,e){return vt(t.getUTCHours()%12||12,e,2)}function f6(t,e){return vt(1+ef.count(Le(t),t),e,3)}function Sp(t,e){return vt(t.getUTCMilliseconds(),e,3)}function l6(t,e){return Sp(t,e)+"000"}function s6(t,e){return vt(t.getUTCMonth()+1,e,2)}function u6(t,e){return vt(t.getUTCMinutes(),e,2)}function c6(t,e){return vt(t.getUTCSeconds(),e,2)}function h6(t){var e=t.getUTCDay();return e===0?7:e}function d6(t,e){return vt(Hi.count(Le(t)-1,t),e,2)}function Tp(t){var e=t.getUTCDay();return e>=4||e===0?si(t):si.ceil(t)}function p6(t,e){return t=Tp(t),vt(si.count(Le(t),t)+(Le(t).getUTCDay()===4),e,2)}function m6(t){return t.getUTCDay()}function g6(t,e){return vt(Br.count(Le(t)-1,t),e,2)}function b6(t,e){return vt(t.getUTCFullYear()%100,e,2)}function _6(t,e){return t=Tp(t),vt(t.getUTCFullYear()%100,e,2)}function y6(t,e){return vt(t.getUTCFullYear()%1e4,e,4)}function w6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?si(t):si.ceil(t),vt(t.getUTCFullYear()%1e4,e,4)}function v6(){return"+0000"}function Uc(){return"%"}function Bc(t){return+t}function zc(t){return Math.floor(+t/1e3)}var xi,Bs,fo;x6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function x6(t){return xi=x3(t),Bs=xi.format,xi.parse,fo=xi.utcFormat,xi.utcParse,xi}function $6(t){return new Date(t)}function M6(t){return t instanceof Date?+t:+new Date(+t)}function zs(t,e,n,i,r,o,a,f,l,s){var u=ip(),h=u.invert,c=u.domain,d=s(".%L"),p=s(":%S"),m=s("%I:%M"),g=s("%I %p"),w=s("%a %d"),b=s("%b %d"),v=s("%B"),_=s("%Y");function x(M){return(l(M)<M?d:f(M)<M?p:a(M)<M?m:o(M)<M?g:i(M)<M?r(M)<M?w:b:n(M)<M?v:_)(M)}return u.invert=function(M){return new Date(h(M))},u.domain=function(M){return arguments.length?c(Array.from(M,M6)):c().map($6)},u.ticks=function(M){var $=c();return t($[0],$[$.length-1],M??10)},u.tickFormat=function(M,$){return $==null?x:s($)},u.nice=function(M){var $=c();return(!M||typeof M.range!="function")&&(M=e($[0],$[$.length-1],M??10)),M?c(op($,M)):u},u.copy=function(){return Jr(u,zs(t,e,n,i,r,o,a,f,l,s))},u}function k6(){return Qe.apply(zs(w3,v3,Fe,oo,Wi,ci,io,eo,Ae,Bs).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function S6(){return Qe.apply(zs(y3,$p,Le,ao,Hi,ef,ro,no,Ae,fo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rf(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function of(){var t=0,e=.5,n=1,i=1,r,o,a,f,l,s=ve,u,h=!1,c;function d(m){return isNaN(m=+m)?c:(m=.5+((m=+u(m))-o)*(i*m<i*o?f:l),s(h?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),f=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,d):[t,e,n]},d.clamp=function(m){return arguments.length?(h=!!m,d):h},d.interpolator=function(m){return arguments.length?(s=m,d):s};function p(m){return function(g){var w,b,v;return arguments.length?([w,b,v]=g,s=Va(m,[w,b,v]),d):[s(0),s(.5),s(1)]}}return d.range=p(Kr),d.rangeRound=p(Ts),d.unknown=function(m){return arguments.length?(c=m,d):c},function(m){return u=m,r=m(t),o=m(e),a=m(n),f=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,d}}function Cp(){var t=to(of()(ve));return t.copy=function(){return rf(t,Cp())},Qa.apply(t,arguments)}function Ep(){var t=ap(of()).domain([.1,1,10]);return t.copy=function(){return rf(t,Ep()).base(t.base())},Qa.apply(t,arguments)}function Ap(){var t=lp(of());return t.copy=function(){return rf(t,Ap()).constant(t.constant())},Qa.apply(t,arguments)}function Np(){var t=up(of());return t.copy=function(){return rf(t,Np()).exponent(t.exponent())},Qa.apply(t,arguments)}function _t(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const T6=_t("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),C6=_t("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),E6=_t("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),A6=_t("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),N6=_t("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),D6=_t("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),F6=_t("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),L6=_t("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),I6=_t("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),R6=_t("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Mt=t=>Sy(t[t.length-1]);var Dp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(_t);const Fp=Mt(Dp);var Lp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(_t);const Ip=Mt(Lp);var Rp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(_t);const Pp=Mt(Rp);var Op=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(_t);const Up=Mt(Op);var rs=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(_t);const Ma=Mt(rs);var Bp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(_t);const zp=Mt(Bp);var os=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(_t);const ka=Mt(os);var qp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(_t);const Yp=Mt(qp);var Wp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(_t);const Hp=Mt(Wp);var Vp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(_t);const Gp=Mt(Vp);var Xp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(_t);const jp=Mt(Xp);var Zp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(_t);const Kp=Mt(Zp);var Qp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(_t);const Jp=Mt(Qp);var t1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(_t);const e1=Mt(t1);var n1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(_t);const i1=Mt(n1);var r1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(_t);const o1=Mt(r1);var a1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(_t);const f1=Mt(a1);var l1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(_t);const s1=Mt(l1);var u1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(_t);const c1=Mt(u1);var h1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(_t);const d1=Mt(h1);var p1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(_t);const m1=Mt(p1);var g1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(_t);const b1=Mt(g1);var _1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(_t);const y1=Mt(_1);var w1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(_t);const v1=Mt(w1);var x1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(_t);const $1=Mt(x1);var M1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(_t);const k1=Mt(M1);var S1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(_t);const T1=Mt(S1);function C1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const E1=Cs(je(300,.5,0),je(-240,.5,1));var A1=Cs(je(-100,.75,.35),je(80,1.5,.8)),N1=Cs(je(260,.75,.35),je(80,1.5,.8)),No=je();function D1(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return No.h=360*t-100,No.s=1.5-1.5*e,No.l=.8-.9*e,No+""}var Do=Rn(),P6=Math.PI/3,O6=Math.PI*2/3;function F1(t){var e;return t=(.5-t)*Math.PI,Do.r=255*(e=Math.sin(t))*e,Do.g=255*(e=Math.sin(t+P6))*e,Do.b=255*(e=Math.sin(t+O6))*e,Do+""}function L1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function af(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const I1=af(_t("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var R1=af(_t("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),P1=af(_t("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),O1=af(_t("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function $i(t){return function(){return t}}const U1=Math.cos,qs=Math.min,Sa=Math.sin,Dt=Math.sqrt,qc=1e-12,Ta=Math.PI,ff=2*Ta;function U6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new w0(e)}function B6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function B1(t){this._context=t}B1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function lf(t){return new B1(t)}function z6(t){return t[0]}function q6(t){return t[1]}function Y6(t,e){var n=$i(!0),i=null,r=lf,o=null,a=U6(f);t=typeof t=="function"?t:t===void 0?z6:$i(t),e=typeof e=="function"?e:e===void 0?q6:$i(e);function f(l){var s,u=(l=B6(l)).length,h,c=!1,d;for(i==null&&(o=r(d=a())),s=0;s<=u;++s)!(s<u&&n(h=l[s],s,l))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,s,l),+e(h,s,l));if(d)return o=null,d+""||null}return f.x=function(l){return arguments.length?(t=typeof l=="function"?l:$i(+l),f):t},f.y=function(l){return arguments.length?(e=typeof l=="function"?l:$i(+l),f):e},f.defined=function(l){return arguments.length?(n=typeof l=="function"?l:$i(!!l),f):n},f.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),f):r},f.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),f):i},f}class z1{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function W6(t){return new z1(t,!0)}function H6(t){return new z1(t,!1)}const V6=Dt(3),q1={draw(t,e){const n=Dt(e+qs(e/28,.75))*.59436,i=n/2,r=i*V6;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},zr={draw(t,e){const n=Dt(e/Ta);t.moveTo(n,0),t.arc(0,0,n,0,ff)}},Y1={draw(t,e){const n=Dt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},W1=Dt(1/3),G6=W1*2,H1={draw(t,e){const n=Dt(e/G6),i=n*W1;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},V1={draw(t,e){const n=Dt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},G1={draw(t,e){const n=Dt(e-qs(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},X1={draw(t,e){const n=Dt(e),i=-n/2;t.rect(i,i,n,n)}},j1={draw(t,e){const n=Dt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},X6=.8908130915292852,Z1=Sa(Ta/10)/Sa(7*Ta/10),j6=Sa(ff/10)*Z1,Z6=-U1(ff/10)*Z1,K1={draw(t,e){const n=Dt(e*X6),i=j6*n,r=Z6*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=ff*o/5,f=U1(a),l=Sa(a);t.lineTo(l*n,-f*n),t.lineTo(f*i-l*r,l*i+f*r)}t.closePath()}},Qf=Dt(3),Q1={draw(t,e){const n=-Dt(e/(Qf*3));t.moveTo(0,n*2),t.lineTo(-Qf*n,-n),t.lineTo(Qf*n,-n),t.closePath()}},K6=Dt(3),J1={draw(t,e){const n=Dt(e)*.6824,i=n/2,r=n*K6/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},ge=-.5,be=Dt(3)/2,as=1/Dt(12),Q6=(as/2+1)*3,tm={draw(t,e){const n=Dt(e/Q6),i=n/2,r=n*as,o=i,a=n*as+n,f=-o,l=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(f,l),t.lineTo(ge*i-be*r,be*i+ge*r),t.lineTo(ge*o-be*a,be*o+ge*a),t.lineTo(ge*f-be*l,be*f+ge*l),t.lineTo(ge*i+be*r,ge*r-be*i),t.lineTo(ge*o+be*a,ge*a-be*o),t.lineTo(ge*f+be*l,ge*l-be*f),t.closePath()}},em={draw(t,e){const n=Dt(e-qs(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},J6=[zr,Y1,H1,X1,K1,Q1,tm],t4=[zr,G1,em,J1,q1,j1,V1];function Pn(){}function Ca(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function sf(t){this._context=t}sf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ca(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ca(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function e4(t){return new sf(t)}function nm(t){this._context=t}nm.prototype={areaStart:Pn,areaEnd:Pn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ca(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function n4(t){return new nm(t)}function im(t){this._context=t}im.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Ca(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i4(t){return new im(t)}function rm(t,e){this._basis=new sf(t),this._beta=e}rm.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,f=-1,l;++f<=n;)l=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(i+l*o),this._beta*e[f]+(1-this._beta)*(r+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const r4=function t(e){function n(i){return e===1?new sf(i):new rm(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Ea(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ys(t,e){this._context=t,this._k=(1-e)/6}Ys.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ea(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ea(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const o4=function t(e){function n(i){return new Ys(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Ws(t,e){this._context=t,this._k=(1-e)/6}Ws.prototype={areaStart:Pn,areaEnd:Pn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ea(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const a4=function t(e){function n(i){return new Ws(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Hs(t,e){this._context=t,this._k=(1-e)/6}Hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ea(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const f4=function t(e){function n(i){return new Hs(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Vs(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>qc){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>qc){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function om(t,e){this._context=t,this._alpha=e}om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Vs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l4=function t(e){function n(i){return e?new om(i,e):new Ys(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function am(t,e){this._context=t,this._alpha=e}am.prototype={areaStart:Pn,areaEnd:Pn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Vs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const s4=function t(e){function n(i){return e?new am(i,e):new Ws(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function fm(t,e){this._context=t,this._alpha=e}fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vs(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const u4=function t(e){function n(i){return e?new fm(i,e):new Hs(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function lm(t){this._context=t}lm.prototype={areaStart:Pn,areaEnd:Pn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function c4(t){return new lm(t)}function Yc(t){return t<0?-1:1}function Wc(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),f=(o*r+a*i)/(i+r);return(Yc(o)+Yc(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function Hc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Jf(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,f=(o-i)/3;t._context.bezierCurveTo(i+f,r+f*e,o-f,a-f*n,o,a)}function Aa(t){this._context=t}Aa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jf(this,this._t0,Hc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Jf(this,Hc(this,n=Wc(this,t,e)),n);break;default:Jf(this,this._t0,n=Wc(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function sm(t){this._context=new um(t)}(sm.prototype=Object.create(Aa.prototype)).point=function(t,e){Aa.prototype.point.call(this,e,t)};function um(t){this._context=t}um.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function h4(t){return new Aa(t)}function d4(t){return new sm(t)}function cm(t){this._context=t}cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=Vc(t),r=Vc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function Vc(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function p4(t){return new cm(t)}function uf(t,e){this._context=t,this._t=e}uf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function m4(t){return new uf(t,.5)}function g4(t){return new uf(t,0)}function b4(t){return new uf(t,1)}function vr(t,e,n){this.k=t,this.x=e,this.y=n}vr.prototype={constructor:vr,scale:function(t){return t===1?this:new vr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new vr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};vr.prototype;function On(t){return t!=null&&!Number.isNaN(t)}function Ie(t,e){return+On(e)-+On(t)||oe(t,e)}function Na(t,e){return+On(e)-+On(t)||Gr(t,e)}function Gs(t){return t!=null&&`${t}`!=""}function hm(t){return isFinite(t)?t:NaN}function cf(t){return t>0&&isFinite(t)?t:NaN}function Xs(t){return t<0&&isFinite(t)?t:NaN}function _4(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${y4(t.getUTCFullYear())}-${fn(t.getUTCMonth()+1,2)}-${fn(t.getUTCDate(),2)}${n||i||r||o?`T${fn(n,2)}:${fn(i,2)}${r||o?`:${fn(r,2)}${o?`.${fn(o,3)}`:""}`:""}Z`:""}`}function y4(t){return t<0?`-${fn(-t,6)}`:t>9999?`+${fn(t,6)}`:fn(t,4)}function fn(t,e){return`${t}`.padStart(e,"0")}const w4=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function dm(t,e){return w4.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Ci=1e3,Tn=Ci*60,Cn=Tn*60,Ze=Cn*24,ze=Ze*7,Jn=Ze*30,Mn=Ze*365,tl=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ci],["5 seconds",5*Ci],["15 seconds",15*Ci],["30 seconds",30*Ci],["minute",Tn],["5 minutes",5*Tn],["15 minutes",15*Tn],["30 minutes",30*Tn],["hour",Cn],["3 hours",3*Cn],["6 hours",6*Cn],["12 hours",12*Cn],["day",Ze],["2 days",2*Ze],["week",ze],["2 weeks",2*ze],["month",Jn],["3 months",3*Jn],["6 months",6*Jn],["year",Mn],["2 years",2*Mn],["5 years",5*Mn],["10 years",10*Mn],["20 years",20*Mn],["50 years",50*Mn],["100 years",100*Mn]],js=new Map([["second",Ci],["minute",Tn],["hour",Cn],["day",Ze],["monday",ze],["tuesday",ze],["wednesday",ze],["thursday",ze],["friday",ze],["saturday",ze],["sunday",ze],["week",ze],["month",Jn],["year",Mn]]),pm=new Map([["second",Ae],["minute",eo],["hour",io],["day",ci],["monday",Ur],["tuesday",pp],["wednesday",mp],["thursday",li],["friday",gp],["saturday",bp],["sunday",Wi],["week",Wi],["month",oo],["year",Fe]]),Zs=new Map([["second",Ae],["minute",no],["hour",ro],["day",nf],["monday",Br],["tuesday",_p],["wednesday",yp],["thursday",si],["friday",wp],["saturday",vp],["sunday",Hi],["week",Hi],["month",ao],["year",Le]]),lo=Symbol("intervalDuration"),hf=Symbol("intervalType");for(const[t,e]of pm)e[lo]=js.get(t),e[hf]="time";for(const[t,e]of Zs)e[lo]=js.get(t),e[hf]="utc";const xr=[["year",Le,"utc"],["month",ao,"utc"],["day",nf,"utc",6*Jn],["hour",ro,"utc",3*Ze],["minute",no,"utc",6*Cn],["second",Ae,"utc",30*Tn]],Xo=[["year",Fe,"time"],["month",oo,"time"],["day",ci,"time",6*Jn],["hour",io,"time",3*Ze],["minute",eo,"time",6*Cn],["second",Ae,"time",30*Tn]],v4=[xr[0],Xo[0],xr[1],Xo[1],xr[2],Xo[2],...xr.slice(3)];function mm(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=Zs.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function gm(t){return bm(mm(t),"time")}function Ks(t){return bm(mm(t),"utc")}function bm([t,e],n){let i=(n==="time"?pm:Zs).get(t);return e>1&&(i=i.every(e),i[lo]=js.get(t)*e,i[hf]=n),i}function Gc(t,e){if(!(e>1))return;const n=t[lo];if(!tl.some(([,r])=>r===n)||n%Ze===0&&Ze<n&&n<Jn)return;const[i]=tl[Pa(([,r])=>Math.log(r)).center(tl,Math.log(n*e))];return(t[hf]==="time"?gm:Ks)(i)}function Xc(t,e,n){const i=e==="time"?Bs:fo;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=x4(n);switch(t){case"millisecond":return Mi(i(".%L"),i(":%M:%S"),r);case"second":return Mi(i(":%S"),i("%-I:%M"),r);case"minute":return Mi(i("%-I:%M"),i("%p"),r);case"hour":return Mi(i("%-I %p"),i("%b %-d"),r);case"day":return Mi(i("%-d"),i("%b"),r);case"month":return Mi(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function x4(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function $4(t){return t==="time"?Xo:t==="utc"?xr:v4}function M4(t,e,n){const i=ce(mb(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return Xc("millisecond","utc",n);for(const[r,o,a,f]of $4(t)){if(i>f||r==="hour"&&!i)break;if(e.every(l=>o.floor(l)>=l))return Xc(r,a,n)}}function Mi(t,e,n){return(i,r,o)=>{const a=t(i,r),f=e(i,r),l=r-Gi(o);return r!==l&&o[l]!==void 0&&f===e(o[l],l)?a:n(a,f)}}const qr=Object.getPrototypeOf(Uint8Array),k4=Object.prototype.toString,_m=Symbol("reindex");function Rt(t,e,n){const i=typeof e;return i==="string"?jc(t,ym(e),n):i==="function"?jc(t,e,n):i==="number"||e instanceof Date||i==="boolean"?At(t,so(e),n):typeof(e==null?void 0:e.transform)=="function"?Zc(e.transform(t),n):S4(Zc(e,n),t==null?void 0:t[_m])}function S4(t,e){return e?eu(t,e):t}function jc(t,e,n){return At(t,(n==null?void 0:n.prototype)instanceof qr?T4(e):e,n)}function Zc(t,e){return e===void 0?pe(t):t instanceof e?t:e.prototype instanceof qr&&!(t instanceof qr)?e.from(t,tu):e.from(t)}function T4(t){return(e,n)=>tu(t(e,n))}const jo=[null],ym=t=>e=>e[t],Qs={transform:_n},jt={transform:t=>t},C4=()=>1,E4=()=>!0,Kt=t=>t==null?t:`${t}`,St=t=>t==null?t:+t,Js=t=>t?t[0]:void 0,fs=t=>t?t[1]:void 0,so=t=>()=>t;function A4(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Ri(n,e,i)}function He(t){return t instanceof qr?t:At(t,tu,Float64Array)}function tu(t){return t==null?NaN:Number(t)}function N4(t){return At(t,wm)}function wm(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?dm(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function mn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:mf(t)?[void 0,t]:[t,void 0]}function Qt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function vm(t,e,n){if(t!=null)return Pe(t,e,n)}function Pe(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function pe(t){return t==null||t instanceof Array||t instanceof qr?t:Array.from(t)}function At(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Yr(t,e=Array){return t instanceof e?t.slice():e.from(t)}function D4({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function xm({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function F4(t){return D4(t)||xm(t)||t.interval!==void 0}function zn(t){return(t==null?void 0:t.toString)===k4}function ls(t){return zn(t)&&(t.type!==void 0||t.domain!==void 0)}function df(t){return zn(t)&&typeof t.transform!="function"}function Vi(t){return df(t)&&t.value===void 0&&t.channel===void 0}function L4(t,e,n,i=jt){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function pf(t,e){return t===void 0&&e===void 0?[Js,fs]:[t,e]}function $m({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=mn(e)),t===void 0&&([t]=mn(n)),t}function _n(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function eu(t,e){return At(e,n=>t[n],t.constructor)}function I4(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function Zn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function R4(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Da(t){let e;return[{transform:()=>e,label:pi(t)},n=>e=n]}function on(t){return t==null?[t]:Da(t)}function pi(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function ss(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return le(i)||le(r)?At(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):At(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function Mm(t,e){const n=km(e==null?void 0:e.interval,e==null?void 0:e.type);return n?At(t,n):t}function km(t,e){const n=nu(t,e);return n&&(i=>On(i)?n.floor(i):i)}function nu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Sl(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Sl(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?gm:Ks)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function nr(t,e){if(t=nu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function P4(t,e){if(t=nr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function O4(t){return Ei(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Ei(t){return typeof(t==null?void 0:t.range)=="function"}function uo(t){return t===void 0||df(t)?t:{value:t}}function U4(t){return t==null?null:{transform:e=>Rt(e,t,Float64Array),label:pi(t)}}function qn(t){return t&&typeof t[Symbol.iterator]=="function"}function Sm(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Kc(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function le(t){for(const e of t)if(e!=null)return e instanceof Date}function B4(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&dm(e)}function z4(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function q4(t){for(const e of t)if(e!=null)return typeof e=="number"}function el(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const Y4=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function mf(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||Y4.has(t))}function W4(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function ie(t){return t==null||Wr(t)}function Wr(t){return/^\s*none\s*$/i.test(t)}function H4(t){return/^\s*round\s*$/i.test(t)}function us(t,e){return vm(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function gf(t="middle"){return us(t,"frameAnchor")}function Gi(t){if(t==null)return;const e=t[0],n=t[t.length-1];return Gr(e,n)}function V4(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function G4(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function Tm(t){return qn(t)?G4(t):t}const Ve=Symbol("position"),yn=Symbol("color"),co=Symbol("radius"),ho=Symbol("length"),po=Symbol("opacity"),bf=Symbol("symbol"),Cm=Symbol("projection"),Et=new Map([["x",Ve],["y",Ve],["fx",Ve],["fy",Ve],["r",co],["color",yn],["opacity",po],["symbol",bf],["length",ho],["projection",Cm]]);function X4(t){return t===Ve||t===Cm}function j4(t){return t===Ve||t===co||t===ho||t===po}const Z4=Math.sqrt(3),K4=2/Z4,Q4={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*K4,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},iu=new Map([["asterisk",q1],["circle",zr],["cross",Y1],["diamond",H1],["diamond2",V1],["hexagon",Q4],["plus",G1],["square",X1],["square2",j1],["star",K1],["times",em],["triangle",Q1],["triangle2",J1],["wye",tm]]);function ru(t){return t&&typeof t.draw=="function"}function J4(t){return ru(t)?!0:typeof t!="string"?!1:iu.has(t.toLowerCase())}function ou(t){if(t==null||ru(t))return t;const e=iu.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function t5(t){if(t==null||ru(t))return[void 0,t];if(typeof t=="string"){const e=iu.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function _f({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=Em(t)),e!=null&&!Vi(e)&&(i=nl(i,au(e))),n&&(i=nl(i,Am))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||Vi(e))&&{sort:e},transform:nl(i,a)}}function Xi({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=Em(t)),e!=null&&!Vi(e)&&(i=il(i,au(e))),n&&(i=il(i,Am))),{...r,...(e===null||Vi(e))&&{sort:e},initializer:il(i,o)}}function nl(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,pe(n),i,r)}}function il(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,f,l,s,u,h;return{data:f=n,facets:l=i,channels:a}=t.call(this,n,i,r,...o),{data:u=f,facets:h=l,channels:s}=e.call(this,f,l,{...r,...a},...o),{data:u,facets:h,channels:{...a,...s}}}}function e5(t,e){return(t.initializer!=null?Xi:_f)(t,e)}function Em(t){return(e,n)=>{const i=Rt(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function Am(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function n5(t,{sort:e,...n}={}){return{...(df(t)&&t.channel!==void 0?Xi:e5)(n,au(t)),sort:Vi(e)?e:null}}function au(t){return(typeof t=="function"&&t.length!==1?i5:r5)(t)}function i5(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function r5(t){let e,n;({channel:e,value:t,order:n}={...uo(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Na:Ie),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ie;break;case"descending":n=Na;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let f;if(e===void 0)f=Rt(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[e],!f)return{};f=f.value}const l=(s,u)=>n(f[s],f[u]);return{data:r,facets:o.map(s=>s.slice().sort(l))}}}function Fo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function o5(t,e,n=Nm){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",h5]),e.href!=null&&t.href===void 0&&i.push(["href",lu]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?a5(r):n(r,o,e))}function Nm(t,e,n,i=Dm){let r;zn(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,f]=Da(o.label);let l;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),l=f([])},scope(s,u){o.scope(s,u)},reduce(s,u){l.push(o.reduce(s,u))}}}function a5(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Dm(t,e,n,i=fu){const r=R4(t,n),o=i(e,r);let a,f;return{label:pi(o===Fa?null:r,o.label),initialize(l){a=r===void 0?l:Rt(l,r),o.scope==="data"&&(f=o.reduceIndex(_n(l),a))},scope(l,s){o.scope===l&&(f=o.reduceIndex(s,a))},reduce(l,s){return o.scope==null?o.reduceIndex(l,a,s):o.reduceIndex(l,a,f,s)}}}function Qc(t,e){return e?Dr(Ba(t,n=>e[n]),Js):[[,t]]}function fu(t,e,n=f5){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&zn(t))return u5(t);if(typeof t=="function")return c5(t);if(/^p\d{2}$/i.test(t))return an(A4(t));switch(`${t}`.toLowerCase()){case"first":return lu;case"last":return d5;case"identity":return Fm;case"count":return Fa;case"distinct":return p5;case"sum":return e==null?Fa:m5;case"proportion":return th(e,"data");case"proportion-facet":return th(e,"facet");case"deviation":return an(Xr);case"min":return an(cn);case"min-index":return an(ub);case"max":return an(ce);case"max-index":return an(sb);case"mean":return Jc(ni);case"median":return Jc(kl);case"variance":return an(Nr);case"mode":return an(pb)}return n(t)}function f5(t){throw new Error(`invalid reduce: ${t}`)}function l5(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function s5(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>Ie(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function u5(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function c5(t){return{reduceIndex(e,n,i){return t(eu(n,e),i)}}}function an(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function Jc(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return le(n)?new Date(i):i}}}const Fm={reduceIndex(t,e){return eu(e,t)}},lu={reduceIndex(t,e){return e[t[0]]}},h5={reduceIndex(t,e){const i=Dr(Ni(t,o=>o.length,o=>e[o]),fs),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[`… ${o.length.toLocaleString("en-US")} more`,In(o,fs)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},d5={reduceIndex(t,e){return e[t[t.length-1]]}},Fa={label:"Frequency",reduceIndex(t){return t.length}},p5={label:"Distinct",reduceIndex(t,e){const n=new Ua;for(const i of t)n.add(e[i]);return n.size}},m5=an(In);function th(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>In(n,o=>i[o])/r}}function Hr(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=pi(i)},f){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),Lm(f,{scale:e,type:n,value:Rt(t,i),label:a,filter:r,hint:o})}function g5(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Hr(e,i,n)]))}function b5(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:At(o,a)]}));return n.channels=t,n}function Lm(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&el(i,mf)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&el(i,W4)?null:"opacity";break;case"symbol":n!==!0&&el(i,J4)?(e.scale=null,e.value=At(i,ou)):e.scale="symbol";break;default:e.scale=Et.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Et.has(n))throw new Error(`unknown scale: ${n}`);return e}function _5(t,e,n,i,r){const{order:o,reverse:a,reduce:f=!0,limit:l}=r;for(const s in r){if(!Et.has(s))continue;let{value:u,order:h=o,reverse:c=a,reduce:d=f,limit:p=l}=uo(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),h=h===void 0?m!==(u==="width"||u==="height")?Rm:Im:v5(h),d==null||d===!1)continue;const g=s==="fx"||s==="fy"?w5(e,i[s]):y5(n,s);if(!g)throw new Error(`missing channel for scale: ${s}`);const w=g.value,[b=0,v=1/0]=qn(p)?p:p<0?[p]:[0,p];if(u==null)g.domain=()=>{let _=Array.from(new Ua(w));return c&&(_=_.reverse()),(b!==0||v!==1/0)&&(_=_.slice(b,v)),_};else{const _=u==="data"?t:u==="height"?eh(n,"y1","y2"):u==="width"?eh(n,"x1","x2"):cs(n,u,u==="y"?"y2":u==="x"?"x2":void 0),x=fu(d===!0?"max":d,_);g.domain=()=>{let M=ib(_n(w),$=>x.reduceIndex($,_),$=>w[$]);return h&&M.sort(h),c&&M.reverse(),(b!==0||v!==1/0)&&(M=M.slice(b,v)),M.map(Js)}}}}function y5(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function w5(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const f of t[o])r[f]=a}return e}function eh(t,e,n){const i=cs(t,e),r=cs(t,n);return At(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function cs(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function v5(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Im;case"descending":return Rm}throw new Error(`invalid order: ${t}`)}function Im([t,e],[n,i]){return Ie(e,i)||Ie(t,n)}function Rm([t,e],[n,i]){return Na(e,i)||Ie(t,n)}function nh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function x5(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const $5=x5(t=>new Intl.NumberFormat(t));function M5(t="en-US"){const e=$5(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function k5(t){return _4(t,"Invalid Date")}function S5(t="en-US"){const e=M5(t);return n=>(n instanceof Date?k5:typeof n=="number"?e:Kt)(n)}const ui=S5();let hs=0,ds;function T5(){const t=hs;return hs=0,ds=void 0,t}function En(t){t!==ds&&(ds=t,console.warn(t),++hs)}const re=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let C5=0;function ih(){return`plot-clip-${++C5}`}function E5(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:f,fillOpacity:l,stroke:s,strokeWidth:u,strokeOpacity:h,strokeLinejoin:c,strokeLinecap:d,strokeMiterlimit:p,strokeDasharray:m,strokeDashoffset:g,opacity:w,mixBlendMode:b,imageFilter:v,paintOrder:_,pointerEvents:x,shapeRendering:M,channels:$},{ariaLabel:S,fill:C="currentColor",fillOpacity:D,stroke:T="none",strokeOpacity:L,strokeWidth:I,strokeLinecap:Y,strokeLinejoin:E,strokeMiterlimit:z,paintOrder:R}){C===null&&(f=null,l=null),T===null&&(s=null,h=null),ie(C)?!ie(T)&&(!ie(f)||$!=null&&$.fill)&&(T="none"):ie(T)&&(!ie(s)||$!=null&&$.stroke)&&(C="none");const[Q,V]=mn(f,C),[H,F]=Qt(l,D),[W,G]=mn(s,T),[nt,J]=Qt(h,L),[X,q]=Qt(w);Wr(G)||(u===void 0&&(u=I),d===void 0&&(d=Y),c===void 0&&(c=E),p===void 0&&!H4(c)&&(p=z),!Wr(V)&&_===void 0&&(_=R));const[N,A]=Qt(u);return C!==null&&(t.fill=Wt(V,"currentColor"),t.fillOpacity=hr(F,1)),T!==null&&(t.stroke=Wt(G,"none"),t.strokeWidth=hr(A,1),t.strokeOpacity=hr(J,1),t.strokeLinejoin=Wt(c,"miter"),t.strokeLinecap=Wt(d,"butt"),t.strokeMiterlimit=hr(p,4),t.strokeDasharray=Wt(m,"none"),t.strokeDashoffset=Wt(g,"0")),t.target=Kt(a),t.ariaLabel=Kt(S),t.ariaDescription=Kt(r),t.ariaHidden=Kt(o),t.opacity=hr(q,1),t.mixBlendMode=Wt(b,"normal"),t.imageFilter=Wt(v,"none"),t.paintOrder=Wt(_,"normal"),t.pointerEvents=Wt(x,"auto"),t.shapeRendering=Wt(M,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:Q,scale:"auto",optional:!0},fillOpacity:{value:H,scale:"auto",optional:!0},stroke:{value:W,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:N,optional:!0},opacity:{value:X,scale:"auto",optional:!0}}}function A5(t,e){e&&t.filter(n=>Gs(e[n])).append("title").call(D5,e)}function N5(t,e){e&&t.filter(([n])=>Gs(e[n])).append("title").call(F5,e)}function D5(t,e){e&&t.text(n=>ui(e[n]))}function F5(t,e){e&&t.text(([n])=>ui(e[n]))}function wn(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:f,strokeOpacity:l,strokeWidth:s,opacity:u,href:h}){i&&mt(t,"aria-label",c=>i[c]),o&&mt(t,"fill",c=>o[c]),a&&mt(t,"fill-opacity",c=>a[c]),f&&mt(t,"stroke",c=>f[c]),l&&mt(t,"stroke-opacity",c=>l[c]),s&&mt(t,"stroke-width",c=>s[c]),u&&mt(t,"opacity",c=>u[c]),h&&Om(t,c=>h[c],e),n||A5(t,r)}function L5(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:f,strokeOpacity:l,strokeWidth:s,opacity:u,href:h}){i&&mt(t,"aria-label",([c])=>i[c]),o&&mt(t,"fill",([c])=>o[c]),a&&mt(t,"fill-opacity",([c])=>a[c]),f&&mt(t,"stroke",([c])=>f[c]),l&&mt(t,"stroke-opacity",([c])=>l[c]),s&&mt(t,"stroke-width",([c])=>s[c]),u&&mt(t,"opacity",([c])=>u[c]),h&&Om(t,([c])=>h[c],e),n||N5(t,r)}function I5({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:f,href:l},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,f,l].filter(u=>u!==void 0)}function R5(t,e,n){const i=Ba(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&En("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*P5(t,e,n,i){const{z:r}=n,{z:o}=i,a=I5(i,n),f=[...e,...a];for(const l of o?R5(t,o,r):[t]){let s,u;t:for(const h of l){for(const c of f)if(!On(c[h])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(c=>Zn(c[h])),u=[h];continue}u.push(h);for(let c=0;c<a.length;++c)if(Zn(a[c][h])!==s[c]){yield u,s=a.map(p=>Zn(p[h])),u=[h];continue t}}u&&(yield u)}}function Pm(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Pe(t,"clip",["frame","sphere"])),t}function O5(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:f,marginLeft:l,marginRight:s,marginTop:u,marginBottom:h}=n,c=ih();r=`url(#${c})`,t=Ft("svg:g",i).call(d=>d.append("svg:clipPath").attr("id",c).append("rect").attr("x",l).attr("y",u).attr("width",a-s-l).attr("height",f-u-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const f=ih();r=`url(#${f})`,t.append("clipPath").attr("id",f).append("path").attr("d",ja(a)({type:"Sphere"}));break}}mt(t,"aria-label",e.ariaLabel),mt(t,"aria-description",e.ariaDescription),mt(t,"aria-hidden",e.ariaHidden),mt(t,"clip-path",r)}function Oe(t,e,n,i){O5(t,e,n,i),mt(t,"fill",e.fill),mt(t,"fill-opacity",e.fillOpacity),mt(t,"stroke",e.stroke),mt(t,"stroke-width",e.strokeWidth),mt(t,"stroke-opacity",e.strokeOpacity),mt(t,"stroke-linejoin",e.strokeLinejoin),mt(t,"stroke-linecap",e.strokeLinecap),mt(t,"stroke-miterlimit",e.strokeMiterlimit),mt(t,"stroke-dasharray",e.strokeDasharray),mt(t,"stroke-dashoffset",e.strokeDashoffset),mt(t,"shape-rendering",e.shapeRendering),mt(t,"filter",e.imageFilter),mt(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;mt(t,"pointer-events",r)}function Ue(t,e){U5(t,"mix-blend-mode",e.mixBlendMode),mt(t,"opacity",e.opacity)}function Om(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Pi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Pi.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function mt(t,e,n){n!=null&&t.attr(e,n)}function U5(t,e,n){n!=null&&t.style(e,n)}function Se(t,e,{x:n,y:i},r=re,o=re){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function Wt(t,e){if((t=Kt(t))!==e)return t}function hr(t,e){if((t=St(t))!==e)return t}const B5=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function su(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!B5.test(t))throw new Error(`invalid class name: ${t}`);return t}function uu(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function mo({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function cu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Pm(n)}}function Ft(t,{document:e}){return Mr(Ya(t).call(e.documentElement))}const Um=Math.PI,en=2*Um,rh=.618;function z5({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let f,l,s="frame";if(zn(t)){let x;if({type:t,domain:l,inset:x,insetTop:n=x!==void 0?x:n,insetRight:i=x!==void 0?x:i,insetBottom:r=x!==void 0?x:r,insetLeft:o=x!==void 0?x:o,clip:s=s,...f}=t,t==null)return}typeof t!="function"&&({type:t}=Bm(t));const{width:u,height:h,marginLeft:c,marginRight:d,marginTop:p,marginBottom:m}=a,g=u-c-d-o-i,w=h-p-m-n-r;if(t=t==null?void 0:t({width:g,height:w,clip:s,...f}),t==null)return;s=q5(s,c,p,u-d,h-m);let b=c+o,v=p+n,_;if(l!=null){const[[x,M],[$,S]]=ja(t).bounds(l),C=Math.min(g/($-x),w/(S-M));C>0?(b-=(C*(x+$)-g)/2,v-=(C*(M+S)-w)/2,_=Jl({point(D,T){this.stream.point(D*C+b,T*C+v)}})):En("Warning: the projection could not be fit to the specified domain; using the default scale.")}return _??(_=b===0&&v===0?zm():Jl({point(x,M){this.stream.point(x+b,M+v)}})),{stream:x=>t.stream(_.stream(s(x)))}}function Bm(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Te(Hv,.7463,.4673);case"albers":return Lo(V0,.7463,.4673);case"azimuthal-equal-area":return Te(Vv,4,4);case"azimuthal-equidistant":return Te(Gv,en,en);case"conic-conformal":return Lo(Zv,en,en);case"conic-equal-area":return Lo(wa,6.1702,2.9781);case"conic-equidistant":return Lo(Jv,7.312,3.6282);case"equal-earth":return Te(e3,5.4133,2.6347);case"equirectangular":return Te(Kv,en,Um);case"gnomonic":return Te(n3,3.4641,3.4641);case"identity":return{type:zm};case"reflect-y":return{type:Y5};case"mercator":return Te(Xv,en,en);case"orthographic":return Te(i3,2,2);case"stereographic":return Te(r3,2,2);case"transverse-mercator":return Te(o3,en,en);default:throw new Error(`unknown projection type: ${t}`)}}function q5(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return A0(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function Te(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:f})=>{var s,u,h;const l=t();return a!=null&&((s=l.precision)==null||s.call(l,a)),o!=null&&((u=l.rotate)==null||u.call(l,o)),typeof f=="number"&&((h=l.clipAngle)==null||h.call(l,f)),l.scale(Math.min(i/e,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/e}}function Lo(t,e,n){const{type:i,aspectRatio:r}=Te(t,e,n);return{type:o=>{const{parallels:a,domain:f,width:l,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),f===void 0&&u.fitSize([l,s],{type:"Sphere"})),u},aspectRatio:r}}const zm=so({stream:t=>t}),Y5=so(Jl({point(t,e){this.stream.point(t,-e)}}));function W5(t,e,n,i){const r=n[t],o=n[e],a=r.length,f=n[t]=new Float64Array(a).fill(NaN),l=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(h,c){f[s]=h,l[s]=c}});for(s=0;s<a;++s)u.point(r[s],o[s])}function H5({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(zn(t)&&(t=t.type),t!=null)}function V5(t){if(typeof(t==null?void 0:t.stream)=="function")return rh;if(zn(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Bm(t);if(e)return e}return rh}}function G5(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,f){e.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Gn(a,o);return[i,r]}const X5=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],qm=new Map([["accent",C6],["category10",T6],["dark2",E6],["observable10",X5],["paired",A6],["pastel1",N6],["pastel2",D6],["set1",F6],["set2",L6],["set3",I6],["tableau10",R6]]);function j5(t){return t!=null&&qm.has(`${t}`.toLowerCase())}const oh=new Map([...qm,["brbg",nn(Dp,Fp)],["prgn",nn(Lp,Ip)],["piyg",nn(Rp,Pp)],["puor",nn(Op,Up)],["rdbu",nn(rs,Ma)],["rdgy",nn(Bp,zp)],["rdylbu",nn(os,ka)],["rdylgn",nn(qp,Yp)],["spectral",nn(Wp,Hp)],["burd",ah(rs,Ma)],["buylrd",ah(os,ka)],["blues",Lt(g1,b1)],["greens",Lt(_1,y1)],["greys",Lt(w1,v1)],["oranges",Lt(S1,T1)],["purples",Lt(x1,$1)],["reds",Lt(M1,k1)],["turbo",rn(L1)],["viridis",rn(I1)],["magma",rn(R1)],["inferno",rn(P1)],["plasma",rn(O1)],["cividis",rn(C1)],["cubehelix",rn(E1)],["warm",rn(A1)],["cool",rn(N1)],["bugn",Lt(Vp,Gp)],["bupu",Lt(Xp,jp)],["gnbu",Lt(Zp,Kp)],["orrd",Lt(Qp,Jp)],["pubu",Lt(n1,i1)],["pubugn",Lt(t1,e1)],["purd",Lt(r1,o1)],["rdpu",Lt(a1,f1)],["ylgn",Lt(u1,c1)],["ylgnbu",Lt(l1,s1)],["ylorbr",Lt(h1,d1)],["ylorrd",Lt(p1,m1)],["rainbow",fh(D1)],["sinebow",fh(F1)]]);function Lt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?De(e,n):t[n])}function nn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?De(e,n):t[n])}function ah(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?De(i=>e(1-i),n):t[n].slice().reverse())}function rn(t){return({length:e})=>De(t,Math.max(2,Math.floor(e)))}function fh(t){return({length:e})=>De(t,Math.floor(e)+1).slice(0,-1)}function Ym(t){const e=`${t}`.toLowerCase();if(!oh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return oh.get(e)}function yf(t,e){const n=Ym(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function Z5(t,e="greys"){const n=new Set,[i,r]=yf(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const lh=new Map([["brbg",Fp],["prgn",Ip],["piyg",Pp],["puor",Up],["rdbu",Ma],["rdgy",zp],["rdylbu",ka],["rdylgn",Yp],["spectral",Hp],["burd",t=>Ma(1-t)],["buylrd",t=>ka(1-t)],["blues",b1],["greens",y1],["greys",v1],["purples",$1],["reds",k1],["oranges",T1],["turbo",L1],["viridis",I1],["magma",R1],["inferno",P1],["plasma",O1],["cividis",C1],["cubehelix",E1],["warm",A1],["cool",N1],["bugn",Gp],["bupu",jp],["gnbu",Kp],["orrd",Jp],["pubugn",e1],["pubu",i1],["purd",o1],["rdpu",f1],["ylgnbu",s1],["ylgn",c1],["ylorbr",d1],["ylorrd",m1],["rainbow",D1],["sinebow",F1]]);function hu(t){const e=`${t}`.toLowerCase();if(!lh.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return lh.get(e)}const K5=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function Q5(t){return t!=null&&K5.has(`${t}`.toLowerCase())}const Wm=t=>e=>t(1-e),rl=[0,1],sh=new Map([["number",Ht],["rgb",oi],["hsl",Uy],["hcl",qy],["lab",By]]);function Hm(t){const e=`${t}`.toLowerCase();if(!sh.has(e))throw new Error(`unknown interpolator: ${e}`);return sh.get(e)}function go(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:f=Gm(t,n),unknown:l,round:s,scheme:u,interval:h,range:c=Et.get(t)===co?s8(n,f):Et.get(t)===ho?u8(n,f):Et.get(t)===po?rl:void 0,interpolate:d=Et.get(t)===yn?u==null&&c!==void 0?oi:hu(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?Ts:Ht,reverse:p}){if(h=nr(h,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof d!="function"&&(d=Hm(d)),p=!!p,c!==void 0){const m=(f=pe(f)).length,g=(c=pe(c)).length;if(m!==g){if(d.length===1)throw new Error("invalid piecewise interpolator");d=Va(d,c),c=void 0}}if(d.length===1?(p&&(d=Wm(d),p=!1),c===void 0&&(c=Float64Array.from(f,(m,g)=>g/(f.length-1)),c.length===2&&(c=rl)),e.interpolate((c===rl?so:pu)(d))):e.interpolate(d),a){const[m,g]=_e(f);(m>0||g<0)&&(f=Yr(f),Gi(f)!==Math.sign(m)?f[f.length-1]=0:f[0]=0)}return p&&(f=na(f)),e.domain(f).unknown(l),r&&(e.nice(J5(r,i)),f=e.domain()),c!==void 0&&e.range(c),o&&e.clamp(o),{type:i,domain:f,range:c,scale:e,interpolate:d,interval:h}}function J5(t,e){return t===!0?void 0:typeof t=="number"?t:P4(t,e)}function t8(t,e,n){return go(t,Os(),e,n)}function e8(t,e,n){return Vm(t,e,{...n,exponent:.5})}function Vm(t,e,{exponent:n=1,...i}){return go(t,cp().exponent(n),e,{...i,type:"pow"})}function n8(t,e,{base:n=10,domain:i=c8(e),...r}){return go(t,fp().base(n),e,{...r,domain:i})}function i8(t,e,{constant:n=1,...i}){return go(t,sp().constant(n),e,i)}function r8(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=h8(e),unknown:f,interpolate:l,reverse:s}){return n===void 0&&(n=l!==void 0?De(l,r):Et.get(t)===yn?yf(o,r):void 0),a.length>0&&(a=hp(a,n===void 0?{length:r}:n).quantiles()),du(t,e,{domain:a,range:n,reverse:s,unknown:f})}function o8(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Gm(t,e),unknown:a,interpolate:f,reverse:l}){const[s,u]=_e(o);let h;return n===void 0?(h=Fr(s,u,i),h[0]<=s&&h.splice(0,1),h[h.length-1]>=u&&h.pop(),i=h.length+1,n=f!==void 0?De(f,i):Et.get(t)===yn?yf(r,i):void 0):(h=De(Ht(s,u),i+1).slice(1,-1),s instanceof Date&&(h=h.map(c=>new Date(c)))),Gi(pe(o))<0&&h.reverse(),du(t,e,{domain:h,range:n,reverse:l,unknown:a})}function du(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?De(o,n.length+1):Et.get(t)===yn?yf(r,n.length+1):void 0,reverse:f}){n=pe(n);const l=Gi(n);if(!isNaN(l)&&!a8(n,l))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(a=na(a)),{type:"threshold",scale:dp(l<0?na(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function a8(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=Gr(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function f8(t){return{type:"identity",scale:j4(Et.get(t))?rp():e=>e}}function Vr(t,e=hm){return t.length?[cn(t,({value:n})=>n===void 0?n:cn(n,e)),ce(t,({value:n})=>n===void 0?n:ce(n,e))]:[0,1]}function Gm(t,e){const n=Et.get(t);return(n===co||n===po||n===ho?l8:Vr)(e)}function l8(t){return[0,t.length?ce(t,({value:e})=>e===void 0?e:ce(e,hm)):1]}function s8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Ri(t,.5,({value:a})=>a===void 0?NaN:Ri(a,.25,cf)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ce(r);return o<1?r.map(a=>a*o):r}function u8(t,e){const n=kl(t,({value:o})=>o===void 0?NaN:kl(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ce(i);return r<1?i.map(o=>o*r):i}function c8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Vr(t,cf);if(n<0)return Vr(t,Xs)}return[1,10]}function h8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function pu(t){return(e,n)=>i=>t(e+i*(n-e))}function wf(t,e,n,i,{type:r,nice:o,clamp:a,domain:f=Vr(i),unknown:l,pivot:s=0,scheme:u,range:h,symmetric:c=!0,interpolate:d=Et.get(t)===yn?u==null&&h!==void 0?oi:hu(u!==void 0?u:"rdbu"):Ht,reverse:p}){s=+s,f=pe(f);let[m,g]=f;if(f.length>2&&En(`Warning: the diverging ${t} scale domain contains extra elements.`),Gr(m,g)<0&&([m,g]=[g,m],p=!p),m=Math.min(m,s),g=Math.max(g,s),typeof d!="function"&&(d=Hm(d)),h!==void 0&&(d=d.length===1?pu(d)(...h):Va(d,h)),p&&(d=Wm(d)),c){const w=n.apply(s),b=w-n.apply(m),v=n.apply(g)-w;b<v?m=n.invert(w-v):b>v&&(g=n.invert(w+b))}return e.domain([m,s,g]).unknown(l).interpolator(d),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,g],pivot:s,interpolate:d,scale:e}}function d8(t,e,n){return wf(t,Cp(),b8,e,n)}function p8(t,e,n){return Xm(t,e,{...n,exponent:.5})}function Xm(t,e,{exponent:n=1,...i}){return wf(t,Np().exponent(n=+n),w8(n),e,{...i,type:"diverging-pow"})}function m8(t,e,{base:n=10,pivot:i=1,domain:r=Vr(e,i<0?Xs:cf),...o}){return wf(t,Ep().base(n=+n),_8,e,{domain:r,pivot:i,...o})}function g8(t,e,{constant:n=1,...i}){return wf(t,Ap().constant(n=+n),v8(n),e,i)}const b8={apply(t){return t},invert(t){return t}},_8={apply:Math.log,invert:Math.exp},y8={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function w8(t){return t===.5?y8:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function v8(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function jm(t,e,n,i){return go(t,e,n,i)}function x8(t,e,n){return jm(t,k6(),e,n)}function $8(t,e,n){return jm(t,S6(),e,n)}const bo=Symbol("ordinal");function Zm(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:f,hint:l}){return r=nr(r,i),o===void 0&&(o=Qm(n,r,t)),(i==="categorical"||i===bo)&&(i="ordinal"),f&&(o=na(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:l,interval:r}}function M8(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:f,...l}){i=nr(i,n),r===void 0&&(r=Qm(e,i,t));let s;if(Et.get(t)===bf)s=T8(e),o=o===void 0?C8(s):At(o,ou);else if(Et.get(t)===yn&&(o===void 0&&(n==="ordinal"||n===bo)&&(o=Z5(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const u=hu(a),h=o[0],c=o[1]-o[0];o=({length:d})=>De(p=>u(h+c*p),d)}else o=Ym(a);if(f===es)throw new Error(`implicit unknown on ${t} scale is not supported`);return Zm(t,Ps().unknown(f),e,{...l,type:n,domain:r,range:o,hint:s})}function k8(t,e,{align:n=.5,padding:i=.5,...r}){return Km(a3().align(n).padding(i),e,r,t)}function S8(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Km(Ja().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Km(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=Zm(i,t,e,n),t.round=r,t}function Qm(t,e,n){const i=new Ua;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=_e(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&Et.get(n)===Ve)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Dr(i,Ie)}function uh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function T8(t){return{fill:uh(t,"fill"),stroke:uh(t,"stroke")}}function C8(t){return ie(t.fill)?t4:J6}function ps(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:l,clamp:s,zero:u,align:h,padding:c,projection:d,facet:{label:p=e}={},...m}={}){const g={};for(const[w,b]of t){const v=m[w],_=F8(w,b,{round:Et.get(w)===Ve?f:void 0,nice:l,clamp:s,zero:u,align:h,padding:c,projection:d,...v});if(_){let{label:x=w==="fx"||w==="fy"?p:e,percent:M,transform:$,inset:S,insetTop:C=S!==void 0?S:w==="y"?i:0,insetRight:D=S!==void 0?S:w==="x"?r:0,insetBottom:T=S!==void 0?S:w==="y"?o:0,insetLeft:L=S!==void 0?S:w==="x"?a:0}=v||{};if($==null)$=void 0;else if(typeof $!="function")throw new Error("invalid scale transform; not a function");_.percent=!!M,_.label=x===void 0?A8(b,_):x,_.transform=$,w==="x"||w==="fx"?(_.insetLeft=+L,_.insetRight=+D):(w==="y"||w==="fy")&&(_.insetTop=+C,_.insetBottom=+T),g[w]=_}}return g}function ch(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:f,label:l}=r;e[i]=O8(r),n[i]=o,o.type=a,f!=null&&(o.interval=f),l!=null&&(o.label=l)}return n}function E8(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?mu(e):e;r&&hh(r,a),o&&dh(o,a);const f=r||o?Jm(t,e):e;n&&hh(n,f),i&&dh(i,f)}function A8(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!mi(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function N8(t){return Math.sign(Gi(t.domain()))*Math.sign(Gi(t.range()))}function mu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:f,marginRight:l,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,l),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function Jm({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:f,height:l}=mu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:f,height:e?e.scale.bandwidth()+i+o:l,facet:{width:f,height:l}}}function hh(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,f=o+n,l=r-a-i;t.range=[f,Math.max(f,l)],mi(t)||(t.range=eg(t)),t.scale.range(t.range)}tg(t)}function dh(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,f=o+n,l=r-a-i;t.range=[Math.max(f,l),f],mi(t)?t.range.reverse():t.range=eg(t),t.scale.range(t.range)}tg(t)}function tg(t){t.round===void 0&&I8(t)&&D8(t)<=30&&t.scale.round(!0)}function D8({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,f=Math.abs(i-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function eg(t){const e=t.scale.domain().length+ng(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function F8(t,e=[],n={}){const i=L8(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&mi({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(le)?En(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${ki(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${ki(i)}".`):r.some(B4)?En(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${ki(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${ki(i)}".`):r.some(z4)&&En(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${ki(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${ki(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Io(e,n,He);break;case"identity":switch(Et.get(t)){case Ve:n=Io(e,n,He);break;case bf:n=Io(e,n,R8);break}break;case"utc":case"time":n=Io(e,n,N4);break}switch(i){case"diverging":return d8(t,e,n);case"diverging-sqrt":return p8(t,e,n);case"diverging-pow":return Xm(t,e,n);case"diverging-log":return m8(t,e,n);case"diverging-symlog":return g8(t,e,n);case"categorical":case"ordinal":case bo:return M8(t,e,n);case"cyclical":case"sequential":case"linear":return t8(t,e,n);case"sqrt":return e8(t,e,n);case"threshold":return du(t,e,n);case"quantile":return r8(t,e,n);case"quantize":return o8(t,e,n);case"pow":return Vm(t,e,n);case"log":return n8(t,e,n);case"symlog":return i8(t,e,n);case"utc":return $8(t,e,n);case"time":return x8(t,e,n);case"point":return k8(t,e,n);case"band":return S8(t,e,n);case"identity":return f8(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function ki(t){return typeof t=="symbol"?t.description:t}function ph(t){return typeof t=="string"?`${t}`.toLowerCase():t}const mh={toString:()=>"projection"};function L8(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:f}){if(n=ph(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=mh);for(const s of e){const u=ph(s.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===mh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const l=Et.get(t);if(l===co)return"sqrt";if(l===po||l===ho)return"linear";if(l===bf)return"ordinal";if((i||r||[]).length>2)return ol(l);if(i!==void 0){if(Kc(i))return ol(l);if(le(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(Kc))return ol(l);if(s.some(le))return"utc"}if(l===yn){if(a!=null||Q5(o))return"diverging";if(j5(o))return"categorical"}return"linear"}function ol(t){switch(t){case Ve:return"point";case yn:return bo;default:return"ordinal"}}function mi({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===bo}function ng({type:t}){return t==="threshold"}function I8({type:t}){return t==="point"||t==="band"}function ji(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Io(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function R8(t){return At(t,ou)}function P8(t){return e=>{if(!Et.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function O8({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:f,pivot:l}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:Yr(n),...i!==void 0&&{range:Yr(i)},...a!==void 0&&{transform:a},...f&&{percent:f},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function U8(t,e,n={}){let i=.5-re,r=.5+re,o=.5+re,a=.5-re;for(const{marginTop:m,marginRight:g,marginBottom:w,marginLeft:b}of e)m>i&&(i=m),g>r&&(r=g),w>o&&(o=w),b>a&&(a=b);let{margin:f,marginTop:l=f!==void 0?f:i,marginRight:s=f!==void 0?f:r,marginBottom:u=f!==void 0?f:o,marginLeft:h=f!==void 0?f:a}=n;l=+l,s=+s,u=+u,h=+h;let{width:c=640,height:d=B8(t,n,{width:c,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,l-i+u-o)}=n;c=+c,d=+d;const p={width:c,height:d,marginTop:l,marginRight:s,marginBottom:u,marginLeft:h};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:l,marginRight:w=m!==void 0?m:s,marginBottom:b=m!==void 0?m:u,marginLeft:v=m!==void 0?m:h}=n.facet??{};g=+g,w=+w,b=+b,v=+v,p.facet={marginTop:g,marginRight:w,marginBottom:b,marginLeft:v}}return p}function B8({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:l,marginBottomDefault:s,marginLeftDefault:u}){const h=n?n.scale.domain().length:1,c=V5(r);if(c){const p=i?i.scale.domain().length:1,m=(1.1*h-.1)/(1.1*p-.1)*c,g=Math.max(.1,Math.min(10,m));return Math.round((a-u-l)*g+f+s)}const d=e?mi(e)?e.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const p=gh("y",e)/(gh("x",t)*o),m=i?i.scale.bandwidth():1,g=n?n.scale.bandwidth():1,w=m*(a-u-l)-t.insetLeft-t.insetRight;return(p*w+e.insetTop+e.insetBottom)/g+f+s}return!!(e||n)*Math.max(1,Math.min(60,d*h))*20+!!i*30+60}function gh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const f=e.scale.exponent();r=l=>Math.pow(l,f);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=_e(i);return Math.abs(r(a)-r(o))}function z8(t,e){const{fx:n,fy:i}=ps(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?eb(r,o).map(([a,f],l)=>({x:a,y:f,i:l})):r?r.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function q8(t,{x:e,y:n}){return e&&(e=ms(e)),n&&(n=ms(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function gu(t,{fx:e,fy:n}){const i=_n(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Ni(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Ni(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Ni(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function Y8(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function W8(t){const e=[],n=new Uint32Array(In(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const H8=new Map([["top",al],["right",sl],["bottom",fl],["left",ll],["top-left",Ro(al,ll)],["top-right",Ro(al,sl)],["bottom-left",Ro(fl,ll)],["bottom-right",Ro(fl,sl)],["top-empty",X8],["right-empty",K8],["bottom-empty",j8],["left-empty",Z8],["empty",Q8]]);function V8(t){if(t==null)return null;const e=H8.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const bh=new WeakMap;function ms(t){let e=bh.get(t);return e||bh.set(t,e=new ei(At(t,(n,i)=>[n,i]))),e}function Yn(t,e){return ms(t).get(e)}function G8(t,e,n){return e=Zn(e),n=Zn(n),t.find(i=>Object.is(Zn(i.x),e)&&Object.is(Zn(i.y),n))}function vf(t,e,n){var i;return(i=G8(t,e,n))==null?void 0:i.empty}function al(t,{y:e},{y:n}){return e?Yn(e,n)===0:!0}function fl(t,{y:e},{y:n}){return e?Yn(e,n)===e.length-1:!0}function ll(t,{x:e},{x:n}){return e?Yn(e,n)===0:!0}function sl(t,{x:e},{x:n}){return e?Yn(e,n)===e.length-1:!0}function X8(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,i);if(o>0)return vf(t,n,e[o-1])}function j8(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,i);if(o<e.length-1)return vf(t,n,e[o+1])}function Z8(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,n);if(o>0)return vf(t,e[o-1],i)}function K8(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,n);if(o<e.length-1)return vf(t,e[o+1],i)}function Q8(t,e,{empty:n}){return n}function Ro(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function ul(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class se{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:f,fy:l,sort:s,dx:u=0,dy:h=0,margin:c=0,marginTop:d=c,marginRight:p=c,marginBottom:m=c,marginLeft:g=c,clip:w=r==null?void 0:r.clip,channels:b,tip:v,render:_}=i;if(this.data=e,this.sort=Vi(s)?s:null,this.initializer=Xi(i).initializer,this.transform=this.initializer?i.transform:_f(i).transform,o===null||o===!1?this.facet=null:(this.facet=Pe(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===jo&&typeof f=="string"?[f]:f,this.fy=e===jo&&typeof l=="string"?[l]:l),this.facetAnchor=V8(a),n=Tm(n),b!==void 0&&(n={...J8(b),...n}),r!==void 0&&(n={...E5(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,M])=>{if(df(M.value)){const{value:$,label:S=M.label,scale:C=M.scale}=M.value;M={...M,label:S,scale:C,value:$}}if(e===jo&&typeof M.value=="string"){const{value:$}=M;M={...M,value:[$]}}return[x,M]}).filter(([x,{value:M,optional:$}])=>{if(M!=null)return!0;if($)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+h,this.marginTop=+d,this.marginRight=+p,this.marginBottom=+m,this.marginLeft=+g,this.clip=Pm(w),this.tip=t7(v),this.facet==="super"){if(f||l)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:M}=n[x];if(!(M!=="x"&&M!=="y"))throw new Error("super-faceting cannot use x or y")}}_!=null&&(this.render=rg(_,this.render))}initialize(e,n,i){let r=pe(this.data);e===void 0&&r!=null&&(e=[_n(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=pe(r)),e!==void 0&&(e.original=o);const a=g5(this.channels,r);return this.sort!=null&&_5(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=On}=n[r];if(o!==null){const a=i[r];e=e.filter(f=>o(a[f]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&W5(r,o,n,i.projection)}}scale(e,n,i){const r=b5(e,n);return i.projection&&this.project(e,r,i),r}}function ig(...t){return t.plot=se.prototype.plot,t}function rg(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,f){return t.call(this,n,i,r,o,a,(l,s,u,h,c)=>e.call(this,l,s,u,h,c,f))}}function J8(t){return Object.fromEntries(Object.entries(Tm(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:uo(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function t7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Pe(t,"tip",["x","y","xy"]):t}function xf(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:zn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const _h=new WeakMap;function bu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:f,render:l,...s}={}){return a=+a,r!=null&&(n??(n=null),f={...f,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:i,channels:f,...s,render:rg(function(u,h,c,d,p,m){p={...p,pointerSticky:!1};const g=p.ownerSVGElement,{data:w}=p.getMarkState(this);let b=_h.get(g);b||_h.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(G)-1;const{x:_,y:x,fx:M,fy:$}=h;let S=M?M(u.fx)-d.marginLeft:0,C=$?$(u.fy)-d.marginTop:0;_!=null&&_.bandwidth&&(S+=_.bandwidth()/2),x!=null&&x.bandwidth&&(C+=x.bandwidth()/2);const D=u.fi!=null;let T;if(D){let q=b.facetStates;q||(b.facetStates=q=new Map),T=q.get(this),T||q.set(this,T=new Map)}const[L,I]=mo(this,d),{px:Y,py:E}=c,z=Y?q=>Y[q]:og(c,L),R=E?q=>E[q]:ag(c,I);let Q,V,H,F;function W(q,N){if(D)if(F&&(F=cancelAnimationFrame(F)),q==null)T.delete(u.fi);else{T.set(u.fi,N),F=requestAnimationFrame(()=>{F=null;for(const[A,P]of T)if(P<N||P===N&&A<u.fi){q=null;break}G(q)});return}G(q)}function G(q){if(Q===q&&H===b.sticky)return;Q=q,H=p.pointerSticky=b.sticky;const N=Q==null?[]:[Q];D&&(N.fx=u.fx,N.fy=u.fy,N.fi=u.fi);const A=m(N,h,c,d,p);if(V){if(D){const P=V.parentNode,tt=V.getAttribute("transform"),O=A.getAttribute("transform");tt?A.setAttribute("transform",tt):A.removeAttribute("transform"),O?P.setAttribute("transform",O):P.removeAttribute("transform"),A.removeAttribute("aria-label"),A.removeAttribute("aria-description"),A.removeAttribute("aria-hidden")}V.replaceWith(A)}return b.roots[v]=V=A,Q==null&&(T==null?void 0:T.size)>1||p.dispatchValue(Q==null?null:w[Q]),A}function nt(q){if(b.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[N,A]=fy(q);N-=S,A-=C;const P=N<d.marginLeft||N>d.width-d.marginRight?1:t,tt=A<d.marginTop||A>d.height-d.marginBottom?1:e;let O=null,ht=a*a;for(const ot of u){const pt=P*(z(ot)-N),at=tt*(R(ot)-A),ct=pt*pt+at*at;ct<=ht&&(O=ot,ht=ct)}if(O!=null&&(t!==1||e!==1)){const ot=z(O)-N,pt=R(O)-A;ht=ot*ot+pt*pt}W(O,ht)}function J(q){q.pointerType==="mouse"&&Q!=null&&(b.sticky&&b.roots.some(N=>N==null?void 0:N.contains(q.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(N=>N(null))):(b.sticky=!0,G(Q)),q.stopImmediatePropagation()))}function X(q){q.pointerType==="mouse"&&(b.sticky||W(null))}return g.addEventListener("pointerenter",nt),g.addEventListener("pointermove",nt),g.addEventListener("pointerdown",J),g.addEventListener("pointerleave",X),G(null)},l)}}function e7(t){return bu(1,1,t)}function n7(t){return bu(1,.01,t)}function yh(t){return bu(.01,1,t)}function og({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function ag({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function fg(t){return mi(t)&&t.interval===void 0?void 0:"tabular-nums"}function i7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:f=0,marginBottom:l=16+i,marginLeft:s=0,style:u,ticks:h=(r-s-f)/64,tickFormat:c,fontVariant:d=fg(t),round:p=!0,opacity:m,className:g}=e;const w=cu(e);g=su(g),m=Qt(m)[1],c===null&&(c=()=>null);const b=Ft("svg",w).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(L=>L.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(uu,u);let v=L=>L.selectAll(".tick line").attr("y1",a+l-o),_;const x=p?(L,I)=>L.rangeRound(I):(L,I)=>L.range(I),{type:M,domain:$,range:S,interpolate:C,scale:D,pivot:T}=t;if(C){const L=S===void 0?C:Va(C.length===1?pu(C):C,S);_=x(D.copy(),De(Ht(s,r-f),Math.min($.length+(T!==void 0),S===void 0?1/0:S.length)));const I=256,Y=w.document.createElement("canvas");Y.width=I,Y.height=1;const E=Y.getContext("2d");for(let z=0,R=I-1;z<I;++z)E.fillStyle=L(z/R),E.fillRect(z,0,1,1);b.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-f).attr("height",o-a-l).attr("preserveAspectRatio","none").attr("xlink:href",Y.toDataURL())}else if(M==="threshold"){const L=$,I=c===void 0?Y=>Y:typeof c=="string"?tr(c):c;_=x(Os().domain([-1,S.length-1]),[s,r-f]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",(Y,E)=>_(E-1)).attr("y",a).attr("width",(Y,E)=>_(E)-_(E-1)).attr("height",o-a-l).attr("fill",Y=>Y),h=At(L,(Y,E)=>E),c=Y=>I(L[Y],Y)}else _=x(Ja().domain($),[s,r-f]),b.append("g").attr("fill-opacity",m).selectAll().data($).enter().append("rect").attr("x",_).attr("y",a).attr("width",Math.max(0,_.bandwidth()-1)).attr("height",o-a-l).attr("fill",D),v=()=>{};return b.append("g").attr("transform",`translate(0,${o-l})`).call(Mb(_).ticks(Array.isArray(h)?null:h,typeof c=="string"?c:void 0).tickFormat(typeof c=="function"?c:void 0).tickSize(i).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Wt(d,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const lg=Math.PI/180;function _o(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=cl(n),t.markerMid=cl(i),t.markerEnd=cl(r)}function cl(t){if(t==null||t===!1)return null;if(t===!0)return vh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return wh("auto");case"arrow-reverse":return wh("auto-start-reverse");case"dot":return r7;case"circle":case"circle-fill":return vh;case"circle-stroke":return o7;case"tick":return hl("auto");case"tick-x":return hl(90);case"tick-y":return hl(0)}throw new Error(`invalid marker: ${t}`)}function wh(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function r7(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function vh(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function o7(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function hl(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let a7=0;function $f(t,e,{stroke:n},i){return sg(t,e,n&&(r=>n[r]),i)}function f7(t,e,{stroke:n},i){return sg(t,e,n&&(([r])=>n[r]),i)}function sg(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const f=new Map;function l(s){return function(u){const h=o(u);let c=f.get(s);c||f.set(s,c=new Map);let d=c.get(h);if(!d){const p=this.parentNode.insertBefore(s(h,a),this),m=`plot-marker-${++a7}`;p.setAttribute("id",m),c.set(h,d=`url(#${m})`)}return d}}e&&t.attr("marker-start",l(e)),n&&t.attr("marker-mid",l(n)),i&&t.attr("marker-end",l(i))}function _u({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=cg(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function ug({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=cg(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function cg(t,e,n){return t===void 0&&e===void 0&&n===void 0?re?[1,0]:[.5,.5]:[e,n]}function hg(t,{interval:e}){return t={...uo(t)},t.interval=nu(t.interval===void 0?e:t.interval),t}function dg(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:f,interval:l}=hg(r,n);if(f==null||l==null&&!i)return n;const s=pi(r);if(l==null){let d;const p={transform:m=>d||(d=Rt(m,f)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?p:o,[`${t}2`]:a===void 0&&!(o===a&&i)?p:a}}let u,h;function c(d){return h!==void 0&&d===u?h:h=At(Rt(u=d,f),p=>l.floor(p))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:c,label:s}:o,[`${t}2`]:a===void 0?{transform:d=>c(d).map(p=>l.offset(p)),label:s}:a})}function pg(t,e,n){const{[t]:i}=n,{value:r,interval:o}=hg(i,n);return r==null||o==null?n:e({...n,[t]:{label:pi(i),transform:a=>{const f=At(Rt(a,r),s=>o.floor(s)),l=f.map(s=>o.offset(s));return f.map(le(f)?(s,u)=>s==null||isNaN(s=+s)||(u=l[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=l[u],u==null)?NaN:(+s+ +u)/2)}}})}function l7(t={}){return dg("x",_u,t)}function mg(t={}){return dg("y",ug,t)}function s7(t={}){return pg("x",_u,t)}function u7(t={}){return pg("y",ug,t)}const gg={ariaLabel:"rule",fill:null,stroke:"currentColor"};class c7 extends se{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:f=a,insetBottom:l=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},xf(n,"x"),gg),this.insetTop=St(f),this.insetBottom=St(l),_o(this,n)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y1:s,y2:u}=i,{width:h,height:c,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=r,{insetTop:w,insetBottom:b}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a},re,0).call(v=>v.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",l?_=>l[_]:(m+h-p)/2).attr("x2",l?_=>l[_]:(m+h-p)/2).attr("y1",s&&!ji(f)?_=>s[_]+w:d+w).attr("y2",u&&!ji(f)?f.bandwidth?_=>u[_]+f.bandwidth()-b:_=>u[_]-b:c-g-b).call(wn,this,i).call($f,this,i,o)).node()}}class h7 extends se{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:f=a,insetLeft:l=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},xf(n,"y"),gg),this.insetRight=St(f),this.insetLeft=St(l),_o(this,n)}render(e,n,i,r,o){const{x:a,y:f}=n,{y:l,x1:s,x2:u}=i,{width:h,height:c,marginTop:d,marginRight:p,marginLeft:m,marginBottom:g}=r,{insetLeft:w,insetRight:b}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{y:l&&f},0,re).call(v=>v.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",s&&!ji(a)?_=>s[_]+w:m+w).attr("x2",u&&!ji(a)?a.bandwidth?_=>u[_]+a.bandwidth()-b:_=>u[_]-b:h-p-b).attr("y1",l?_=>l[_]:(d+c-g)/2).attr("y2",l?_=>l[_]:(d+c-g)/2).call(wn,this,i).call($f,this,i,o)).node()}}function Mf(t,e){let{x:n=jt,y:i,y1:r,y2:o,...a}=mg(e);return[r,o]=bg(i,r,o),new c7(t,{...a,x:n,y1:r,y2:o})}function d7(t,e){let{y:n=jt,x:i,x1:r,x2:o,...a}=l7(e);return[r,o]=bg(i,r,o),new h7(t,{...a,y:n,x1:r,x2:o})}function bg(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function yu(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const p7={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},_g="­";class wu extends se{constructor(e,n={}){const{x:i,y:r,text:o=qn(e)&&Sm(e)?jt:Qs,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:l=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:h,monospace:c,fontFamily:d=c?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:m,fontVariant:g,fontWeight:w,rotate:b}=n,[v,_]=Qt(b,0),[x,M]=w7(p);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:U4(v),optional:!0},text:{value:o,filter:Gs,optional:!0}},n,p7),this.rotate=_,this.textAnchor=Wt(f,"middle"),this.lineAnchor=Pe(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=yg(h),this.monospace=!!c,this.fontFamily=Kt(d),this.fontSize=M,this.fontStyle=Kt(m),this.fontVariant=Kt(g),this.fontWeight=Kt(w),this.frameAnchor=gf(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=vg(this),this.clipLine=xg(this)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:s,rotate:u,text:h,title:c,fontSize:d}=i,{rotate:p}=this,[m,g]=mo(this,r);return Ft("svg:g",o).call(Oe,this,r,o).call(wg,this,h,r).call(Se,this,{x:l&&a,y:s&&f}).call(w=>w.selectAll().data(e).enter().append("text").call(Ue,this).call(m7,this,h,c).attr("transform",yu`translate(${l?b=>l[b]:m},${s?b=>s[b]:g})${u?b=>` rotate(${u[b]})`:p?` rotate(${p})`:""}`).call(mt,"font-size",d&&(b=>d[b])).call(wn,this,i)).node()}}function yg(t){return t==null?null:Pe(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function m7(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:f,clipLine:l}=e;t.each(function(s){const u=f(ui(n[s])??"").map(l),h=u.length,c=r==="top"?.71:r==="bottom"?1-h:(164-h*100)/200;if(h>1){let d=0;for(let p=0;p<h;++p){if(++d,!u[p])continue;const m=this.ownerDocument.createElementNS(Pi.svg,"tspan");m.setAttribute("x",0),p===d-1?m.setAttribute("y",`${(c+p)*o}em`):m.setAttribute("dy",`${d*o}em`),m.textContent=u[p],this.appendChild(m),d=0}}else c&&this.setAttribute("y",`${c*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const d=this.ownerDocument.createElementNS(Pi.svg,"title");d.textContent=n[s],this.appendChild(d)}})}function kf(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=pf(e,n)),new wu(t,{...i,x:e,y:n})}function g7(t,{x:e=jt,...n}={}){return new wu(t,u7({...n,x:e}))}function b7(t,{y:e=jt,...n}={}){return new wu(t,s7({...n,y:e}))}function wg(t,e,n){mt(t,"text-anchor",e.textAnchor),mt(t,"font-family",e.fontFamily),mt(t,"font-size",e.fontSize),mt(t,"font-style",e.fontStyle),mt(t,"font-variant",e.fontVariant===void 0?_7(n):e.fontVariant),mt(t,"font-weight",e.fontWeight)}function _7(t){return t&&(q4(t)||le(t))?"tabular-nums":void 0}const y7=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function w7(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),y7.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function v7(t,e,n){const i=[];let r,o=0;for(const[a,f,l]of x7(t)){if(r===void 0&&(r=a),o>r&&n(t,r,f)>e&&(i.push(t.slice(r,o)+(t[o-1]===_g?"-":"")),r=a),l){i.push(t.slice(r,f)),r=void 0;continue}o=f}return i}function*x7(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case _g:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const xh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function vu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=ir(t,r))i+=xh[t[r]]??(Mg(t,r)?120:xh.e);return i}function xu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=ir(t,r))i+=Mg(t,r)?126:63;return i}function vg({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?xu:vu,r=e*100;return o=>v7(o,r,i)}function xg({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?xu:vu,r=e*100;switch(n){case"clip-start":return o=>Mh(o,r,i,"");case"clip-end":return o=>$h(o,r,i,"");case"ellipsis-start":return o=>Mh(o,r,i,Li);case"ellipsis-middle":return o=>$7(o,r,i,Li);case"ellipsis-end":return o=>$h(o,r,i,Li)}}const Li="…";function Zi(t,e,n,i){const r=[];let o=0;for(let a=0,f=0,l=t.length;a<l;a=f){f=ir(t,a);const s=n(t,a,f);if(o+s>e){for(o+=i;o>e&&a>0;)f=a,a=r.pop(),o-=n(t,a,f);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function $h(t,e,n,i){t=t.trim();const r=n(i),[o]=Zi(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function $7(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,f]=Zi(t,e/2,n,o),[l]=Zi(t,r-e/2-f+o,n,-o);return l<0?i:t.slice(0,a).trimEnd()+i+t.slice(ir(t,l)).trimStart()}function Mh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=Zi(t,r-e+o,n,-o);return a<0?i:i+t.slice(ir(t,a)).trimStart()}const gs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,kh=new RegExp("\\p{Extended_Pictographic}","uy");function ir(t,e){return e+=M7(t,e)?2:1,S7(t,e)&&(e=gs.lastIndex),k7(t,e)?ir(t,e+1):e}function $g(t,e){return t.charCodeAt(e)<128}function M7(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function k7(t,e){return t.charCodeAt(e)===8205}function S7(t,e){return $g(t,e)?!1:(gs.lastIndex=e,gs.test(t))}function Mg(t,e){return $g(t,e)?!1:(kh.lastIndex=e,kh.test(t))}const T7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},kg=3.5,C7=kg*5,Sg={draw(t,e,n){const i=e*n/C7;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},E7={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},A7=new Map([["arrow",Sg],["spike",E7]]);function N7(t){return t&&typeof t.draw=="function"}function D7(t){if(N7(t))return t;const e=A7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class Tg extends se{constructor(e,n={}){const{x:i,y:r,r:o=kg,length:a,rotate:f,shape:l=Sg,anchor:s="middle",frameAnchor:u}=n,[h,c]=Qt(a,12),[d,p]=Qt(f,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:d,optional:!0}},n,T7),this.r=+o,this.length=c,this.rotate=p,this.shape=D7(l),this.anchor=Pe(s,"anchor",["start","middle","end"]),this.frameAnchor=gf(u)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:s,length:u,rotate:h}=i,{length:c,rotate:d,anchor:p,shape:m,r:g}=this,[w,b]=mo(this,r);return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a,y:s&&f}).call(v=>v.selectAll().data(e).enter().append("path").call(Ue,this).attr("transform",yu`translate(${l?_=>l[_]:w},${s?_=>s[_]:b})${h?_=>` rotate(${h[_]})`:d?` rotate(${d})`:""}${p==="start"?"":p==="end"?u?_=>` translate(0,${u[_]})`:` translate(0,${c})`:u?_=>` translate(0,${u[_]/2})`:` translate(0,${c/2})`}`).attr("d",u?_=>{const x=Sn();return m.draw(x,u[_],g),x}:(()=>{const _=Sn();return m.draw(_,c,g),_})()).call(wn,this,i)).node()}}function F7(t,e={}){const{x:n=jt,...i}=e;return new Tg(t,{...i,x:n})}function L7(t,e={}){const{y:n=jt,...i}=e;return new Tg(t,{...i,y:n})}function Wn(t,e){return arguments.length<2&&!qn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Sf({anchor:t}={},e){return t===void 0?e[0]:Pe(t,"anchor",e)}function Cg(t){return Sf(t,["left","right"])}function Eg(t){return Sf(t,["right","left"])}function Ag(t){return Sf(t,["bottom","top"])}function Ng(t){return Sf(t,["top","bottom"])}function Dg(){const[t,e]=Wn(...arguments);return Lg("y",Cg(e),t,e)}function I7(){const[t,e]=Wn(...arguments);return Lg("fy",Eg(e),t,e)}function Fg(){const[t,e]=Wn(...arguments);return Ig("x",Ag(e),t,e)}function R7(){const[t,e]=Wn(...arguments);return Ig("fx",Ng(e),t,e)}function Lg(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:f=1,fill:l=i,fillOpacity:s=r,textAnchor:u,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:p=t==="y"?6:0,tickPadding:m,tickRotate:g,x:w,margin:b,marginTop:v=b===void 0?20:b,marginRight:_=b===void 0?e==="right"?40:0:b,marginBottom:x=b===void 0?20:b,marginLeft:M=b===void 0?e==="left"?40:0:b,label:$,labelAnchor:S,labelArrow:C,labelOffset:D,...T}){return p=St(p),m=St(m),g=St(g),S!==void 0&&(S=Pe(S,"labelAnchor",["center","top","bottom"])),C=Yg(C),ig(p&&!ie(o)?P7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,x:w,...T}):null,ie(l)?null:U7(t,e,n,{fill:l,fillOpacity:s,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:g,x:w,marginTop:v,marginRight:_,marginBottom:x,marginLeft:M,...T}),!ie(l)&&$!==null?kf([],Ug({fill:l,fillOpacity:s,...T},function(L,I,Y,E,z){const R=E[t],{marginTop:Q,marginRight:V,marginBottom:H,marginLeft:F}=t==="y"&&z.inset||z,W=S??(R.bandwidth?"center":"top"),G=D??(e==="right"?V:F)-3;return W==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=W,this.frameAnchor=`${W}-${e}`,this.rotate=0),this.dy=W==="top"?3-Q:W==="bottom"?H-3:0,this.dx=e==="right"?G:-G,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[qg(t,R,{anchor:e,label:$,labelAnchor:W,labelArrow:C})]}}}})):null)}function Ig(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:f=1,fill:l=i,fillOpacity:s=r,textAnchor:u,textStroke:h,textStrokeOpacity:c,textStrokeWidth:d,tickSize:p=t==="x"?6:0,tickPadding:m,tickRotate:g,y:w,margin:b,marginTop:v=b===void 0?e==="top"?30:0:b,marginRight:_=b===void 0?20:b,marginBottom:x=b===void 0?e==="bottom"?30:0:b,marginLeft:M=b===void 0?20:b,label:$,labelAnchor:S,labelArrow:C,labelOffset:D,...T}){return p=St(p),m=St(m),g=St(g),S!==void 0&&(S=Pe(S,"labelAnchor",["center","left","right"])),C=Yg(C),ig(p&&!ie(o)?O7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:p,tickPadding:m,tickRotate:g,y:w,...T}):null,ie(l)?null:B7(t,e,n,{fill:l,fillOpacity:s,stroke:h,strokeOpacity:c,strokeWidth:d,textAnchor:u,tickSize:p,tickPadding:m,tickRotate:g,y:w,marginTop:v,marginRight:_,marginBottom:x,marginLeft:M,...T}),!ie(l)&&$!==null?kf([],Ug({fill:l,fillOpacity:s,...T},function(L,I,Y,E,z){const R=E[t],{marginTop:Q,marginRight:V,marginBottom:H,marginLeft:F}=t==="x"&&z.inset||z,W=S??(R.bandwidth?"center":"right"),G=D??(e==="top"?Q:H)-3;return W==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${W}`,this.textAnchor=W==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-G:G,this.dx=W==="right"?V-3:W==="left"?3-F:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[qg(t,R,{anchor:e,label:$,labelAnchor:W,labelArrow:C})]}}}})):null)}function P7(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:l,inset:s=0,insetLeft:u=s,insetRight:h=s,dx:c=0,y:d=t==="y"?void 0:null,...p}){return rr(L7,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:d,...p,dx:e==="left"?+c-re+ +u:+c+re-h,anchor:"start",length:l,shape:e==="left"?X7:j7})}function O7(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:l,inset:s=0,insetTop:u=s,insetBottom:h=s,dy:c=0,x:d=t==="x"?void 0:null,...p}){return rr(F7,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:f,x:d,...p,dy:e==="bottom"?+c-re-h:+c+re+ +u,anchor:"start",length:l,shape:e==="bottom"?V7:G7})}function U7(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*lg):0),text:l,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:c=0,insetLeft:d=c,insetRight:p=c,dx:m=0,y:g=t==="y"?void 0:null,...w}){return rr(b7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:s,lineAnchor:u,fontVariant:h,rotate:a,y:g,...w,dx:e==="left"?+m-o-f+ +d:+m+ +o+ +f-p},function(b,v,_,x,M){h===void 0&&(this.fontVariant=zg(b)),l===void 0&&(M.text=Bg(b,v,_,x,e))})}function B7(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*lg):0),text:l,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:c=0,insetTop:d=c,insetBottom:p=c,dy:m=0,x:g=t==="x"?void 0:null,...w}){return rr(g7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:s,lineAnchor:u,fontVariant:h,rotate:a,x:g,...w,dy:e==="bottom"?+m+ +o+ +f-p:+m-o-f+ +d},function(b,v,_,x,M){h===void 0&&(this.fontVariant=zg(b)),l===void 0&&(M.text=Bg(b,v,_,x,e))})}function z7(){const[t,e]=Wn(...arguments);return Rg("y",Cg(e),t,e)}function q7(){const[t,e]=Wn(...arguments);return Rg("fy",Eg(e),t,e)}function Y7(){const[t,e]=Wn(...arguments);return Pg("x",Ag(e),t,e)}function W7(){const[t,e]=Wn(...arguments);return Pg("fx",Ng(e),t,e)}function Rg(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...f}){return rr(d7,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...Og(f)})}function Pg(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...f}){return rr(Mf,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...Og(f)})}function Og({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function Ug({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:l,shapeRendering:s,clip:u=!1},h){return[,t]=mn(t),[,e]=Qt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:l,shapeRendering:s,clip:u,initializer:h}}function rr(t,e,n,i,r,o,a){let f;function l(h,c,d,p,m,g){const w=h==null&&(e==="fx"||e==="fy"),{[e]:b}=p;if(!b)throw new Error(`missing scale: ${e}`);const v=b.domain();let{interval:_,ticks:x,tickFormat:M,tickSpacing:$=e==="x"?80:35}=o;if(typeof x=="string"&&Wg(b)&&(_=x,x=void 0),x===void 0&&(x=nr(_,b.type)??H7(b,$)),h==null){if(qn(x))h=pe(x);else if(Ei(x))h=dl(x,..._e(v));else if(b.interval){let C=b.interval;if(b.ticks){const[D,T]=_e(v),L=(T-D)/C[lo];C=Gc(C,L/x)??C,h=dl(C,D,T)}else{h=v;const D=h.length;C=Gc(C,D/x)??C,C!==b.interval&&(h=dl(C,..._e(h)))}if(C===b.interval){const D=Math.round(h.length/x);D>1&&(h=h.filter((T,L)=>L%D===0))}}else b.ticks?h=b.ticks(x):h=v;if(!b.ticks&&h.length&&h!==v){const C=new Ua(v);h=h.filter(D=>C.has(D)),h.length||En(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?c=[_n(h)]:f[e]={scale:e,value:jt}}a==null||a.call(this,b,h,x,M,f);const S=Object.fromEntries(Object.entries(f).map(([C,D])=>[C,{...D,value:Rt(h,D.value)}]));return w&&(c=g.filterFacets(h,S)),{data:h,facets:c,channels:S}}const s=Xi(o).initializer,u=t(r,Xi({...o,initializer:l},s));return r==null?(f=u.channels,u.channels={}):f={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function H7(t,e){const[n,i]=_e(t.range());return(i-n)/e}function Bg(t,e,n,i,r){return{value:$u(t,e,n,i,r)}}function $u(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&le(e)?M4(t.type,e,r)??ui:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?ui:typeof i=="string"?(le(t.domain())?fo:tr)(i):so(i)}function dl(t,e,n){return t.range(e,t.offset(t.floor(n)))}const V7={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},G7={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},X7={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},j7={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function zg(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function qg(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&Wg(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!o)return i;if(o===!0){const a=N8(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function Yg(t="auto"){return ie(t)?!1:typeof t=="boolean"?t:Pe(t,"labelArrow",["auto","up","right","down","left"])}function Wg(t){return le(t.domain())}function Sh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function Z7(t,{opacity:e,...n}={}){if(!mi(t)&&!ng(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return Hg(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",Qt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function K7(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:ie(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...f}={},l){const[h,c]=mn(e),[d,p]=mn(i),m=Sh(l,h),g=Sh(l,d),w=a*a*Math.PI;return n=Qt(n)[1],r=Qt(r)[1],o=Qt(o)[1],Hg(t,f,(b,v,_,x)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",_).attr("height",x).attr("fill",h==="color"?M=>m.scale(M):c).attr("fill-opacity",n).attr("stroke",d==="color"?M=>g.scale(M):p).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",M=>{const $=Sn();return t.scale(M).draw($,w),$}))}function Hg(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=fg(t),swatchSize:a=15,swatchWidth:f=a,swatchHeight:l=a,marginLeft:s=0,className:u,style:h,width:c}=e;const d=cu(e);u=su(u),r=$u(t.scale,t.domain,void 0,r);const p=Ft("div",d).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,p.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,f,l).call(g=>g.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,p.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,f,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),p.call(g=>g.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",c===void 0?null:`${+c}px`).style("font-variant",Wt(o,"normal")).call(uu,h).node()}const bs=new Map([["symbol",K7],["color",Gg],["opacity",J7]]);function Q7(t,e,n={}){return(i,r)=>{if(!bs.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return bs.get(i)(t[i],Vg(e,n[i],r),o=>t[o])}}function Vg({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return V4(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function Gg(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return Z7(t,n);case"ramp":return i7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function J7({type:t,interpolate:e,...n},{legend:i=!0,color:r=Rn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return Gg({type:t,...n,interpolate:t9(r)},{legend:i,...o})}function t9(t){const{r:e,g:n,b:i}=Rn(t)||Rn(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function e9(t,e,n){const i=[];for(const[r,o]of bs){const a=n[r];if(a!=null&&a.legend&&r in t){const f=o(t[r],Vg(e,t[r],a),l=>t[l]);f!=null&&i.push(f)}}return i}const n9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},i9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class r9 extends se{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:f=i,rx:l,ry:s}=e;super(jo,void 0,e,n==null?n9:i9),this.anchor=vm(n,"anchor",["top","right","bottom","left"]),this.insetTop=St(r),this.insetRight=St(o),this.insetBottom=St(a),this.insetLeft=St(f),this.rx=St(l),this.ry=St(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:f,marginBottom:l,marginLeft:s,width:u,height:h}=r,{anchor:c,insetTop:d,insetRight:p,insetBottom:m,insetLeft:g,rx:w,ry:b}=this,v=s+g,_=u-f-p,x=a+d,M=h-l-m;return Ft(c?"svg:line":"svg:rect",o).datum(0).call(Oe,this,r,o).call(Ue,this).call(wn,this,i).call(Se,this,{}).call(c==="left"?$=>$.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",M):c==="right"?$=>$.attr("x1",_).attr("x2",_).attr("y1",x).attr("y2",M):c==="top"?$=>$.attr("x1",v).attr("x2",_).attr("y1",x).attr("y2",x):c==="bottom"?$=>$.attr("x1",v).attr("x2",_).attr("y1",M).attr("y2",M):$=>$.attr("x",v).attr("y",x).attr("width",_-v).attr("height",M-x).attr("rx",w).attr("ry",b)).node()}}function o9(t){return new r9(t)}const pl={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},a9=new Set(["geometry","href","src","ariaLabel","scales"]);class f9 extends se{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&qn(e)&&Sm(e)&&(n={...n,title:jt});const{x:i,y:r,x1:o,x2:a,y1:f,y2:l,anchor:s,preferredAnchor:u="bottom",monospace:h,fontFamily:c=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:p,fontVariant:m,fontWeight:g,lineHeight:w=1,lineWidth:b=20,frameAnchor:v,format:_,textAnchor:x="start",textOverflow:M,textPadding:$=8,title:S,pointerSize:C=12,pathFilter:D="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:f!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:l==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:l,scale:"y",optional:f==null},title:{value:S,optional:!0}},n,pl),this.anchor=us(s,"anchor"),this.preferredAnchor=us(u,"preferredAnchor"),this.frameAnchor=gf(v),this.textAnchor=Wt(x,"middle"),this.textPadding=+$,this.pointerSize=+C,this.pathFilter=Kt(D),this.lineHeight=+w,this.lineWidth=+b,this.textOverflow=yg(M),this.monospace=!!h,this.fontFamily=Kt(c),this.fontSize=St(d),this.fontStyle=Kt(p),this.fontVariant=Kt(m),this.fontWeight=Kt(g);for(const T in pl)T in this.channels&&(this[T]=pl[T]);this.splitLines=vg(this),this.clipLine=xg(this),this.format={..._}}render(e,n,i,r,o){const a=this,{x:f,y:l,fx:s,fy:u}=n,{ownerSVGElement:h,document:c}=o,{anchor:d,monospace:p,lineHeight:m,lineWidth:g}=this,{textPadding:w,pointerSize:b,pathFilter:v}=this,{marginTop:_,marginLeft:x}=r,{x1:M,y1:$,x2:S,y2:C,x:D=M??S,y:T=$??C}=i,L=s?s(e.fx)-x:0,I=u?u(e.fy)-_:0,[Y,E]=mo(this,r),z=og(i,Y),R=ag(i,E),Q=p?xu:vu,V=Q(Li);let H,F;"title"in i?(H=i.channels,F=d9):(H=h9.call(this,i,n),F=p9);const W=Ft("svg:g",o).call(Oe,this,r,o).call(wg,this).call(Se,this,{x:D&&f,y:T&&l}).call(J=>J.selectAll().data(e).enter().append("g").attr("transform",X=>`translate(${Math.round(z(X))},${Math.round(R(X))})`).call(Ue,this).call(X=>X.append("path").attr("filter",v)).call(X=>X.append("text").each(function(q){const N=Mr(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const A=F.call(a,q,e,H,n,i);if(typeof A=="string")for(const P of a.splitLines(A))G(N,{value:a.clipLine(P)});else{const P=new Set;for(const tt of A){const{label:O=""}=tt;O&&P.has(O)||(P.add(O),G(N,tt))}}})));function G(J,{label:X,value:q,color:N,opacity:A}){X??(X=""),q??(q="");const P=N!=null||A!=null;let tt,O=g*100;const[ht]=Zi(X,O,Q,V);if(ht>=0)X=X.slice(0,ht).trimEnd()+Li,tt=q.trim(),q="";else{(X||!q&&!P)&&(q=" "+q);const[pt]=Zi(q,O-Q(X),Q,V);pt>=0&&(tt=q.trim(),q=q.slice(0,pt).trimEnd()+Li)}const ot=J.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");X&&ot.append("tspan").attr("font-weight","bold").text(X),q&&ot.append(()=>c.createTextNode(q)),P&&ot.append("tspan").text(" ■").attr("fill",N).attr("fill-opacity",A).style("user-select","none"),tt&&ot.append("title").text(tt)}function nt(){const{width:J,height:X}=r.facet??r;W.selectChildren().each(function(q){let{x:N,width:A,height:P}=this.getBBox();A=Math.round(A),P=Math.round(P);let tt=d;if(tt===void 0){const ot=z(q)+L,pt=R(q)+I,at=ot+A+b+w*2<J,ct=ot-A-b-w*2>0,zt=pt+P+b+w*2<X,me=pt-P-b-w*2>0;tt=at&&ct?zt&&me?a.preferredAnchor:me?"bottom":"top":zt&&me?at?"left":"right":(at||ct)&&(zt||me)?`${me?"bottom":"top"}-${at?"left":"right"}`:a.preferredAnchor}const O=this.firstChild,ht=this.lastChild;if(O.setAttribute("d",c9(tt,b,w,A,P)),N)for(const ot of ht.childNodes)ot.setAttribute("x",-N);ht.setAttribute("y",`${+s9(tt,ht.childNodes.length,m).toFixed(6)}em`),ht.setAttribute("transform",`translate(${u9(tt,b,w,A,P)})`)}),W.attr("visibility",null)}return e.length&&(W.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),W.node()}}function l9(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=pf(e,n)),new f9(t,{...i,x:e,y:n})}function s9(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function u9(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function c9(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function h9({channels:t},e){var r,o;const n={};let i=this.format;i=Th(i,t,"x"),i=Th(i,t,"y"),this.format=i;for(const a in i){const f=i[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const l=nh(t,a);l&&(n[a]=l)}}for(const a in t){if(a in n||a in i||a9.has(a))continue;const f=nh(t,a);f&&(n[a]=f)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const l=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(le(l)?fo:tr)(f)}else if(f===void 0||f===!0){const l=e[a];this.format[a]=l!=null&&l.bandwidth?$u(l,l.domain()):ui}}return n}function Th(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function d9(t,e,{title:n}){return ui(n.value[t],t)}function*p9(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:La(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Eh(i,n,"x"),value:Ch(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Eh(i,n,"y"),value:Ch(this.format.y2,n.y1,a,t)};else{const f=a.value[t],l=a.scale;if(!On(f)&&l==null)continue;yield{label:La(i,n,o),value:this.format[o](f,t),color:l==="color"?r[o][t]:null,opacity:l==="opacity"?r[o][t]:null}}}}function Ch(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}–${t(n.value[i],i)}`}function Eh(t,e,n){const i=La(t,e,`${n}1`,n),r=La(t,e,`${n}2`,n);return i===r?i:`${i}–${r}`}function La(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function Je(t={}){var V;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:f}=t,l=su(t.className),s=t.marks===void 0?[]:Nh(t.marks);s.push(...x9(s));const u=w9(e,t),h=new Map;for(const H of s){const F=Dh(H,u,t);F&&h.set(H,F)}const c=new Map;u&&dr(c,[u],t),dr(c,h,t);const d=Nh($9(s,c,t));for(const H of d){const F=Dh(H,u,t);F&&h.set(H,F)}s.unshift(...d);let p=z8(c,t);if(p!==void 0){const H=u?ul(p,u):void 0;for(const W of s){if(W.facet===null||W.facet==="super")continue;const G=h.get(W);G!==void 0&&(G.facetsIndex=W.fx!=null||W.fy!=null?ul(p,G):H)}const F=new Set;for(const{facetsIndex:W}of h.values())W==null||W.forEach((G,nt)=>{(G==null?void 0:G.length)>0&&F.add(nt)});p.forEach(0<F.size&&F.size<p.length?(W,G)=>W.empty=!F.has(G):W=>W.empty=!1);for(const W of s)if(W.facet==="exclude"){const G=h.get(W);G!==void 0&&(G.facetsIndex=W8(G.facetsIndex))}}for(const H of Et.keys())ls(t[H])&&H!=="fx"&&H!=="fy"&&c.set(H,[]);const m=new Map;for(const H of s){if(m.has(H))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:F,channels:W}=h.get(H)??{},{data:G,facets:nt,channels:J}=H.initialize(F,W,t);Mu(J,t),m.set(H,{data:G,facets:nt,channels:J})}const g=ps(dr(c,m,t),t),w=U8(g,s,t);E8(g,w);const b=ch(g),{fx:v,fy:_}=b,x=v||_?Jm(g,w):w,M=v||_?A9(b,w):w,$=cu(t),S=$.document,C=Ya("svg").call(S.documentElement);let D=C;$.ownerSVGElement=C,$.className=l,$.projection=z5(t,x),$.filterFacets=(H,F)=>ul(p,{channels:F,groups:gu(H,F)}),$.getMarkState=H=>{const F=m.get(H),W=h.get(H);return{...F,channels:{...F.channels,...W==null?void 0:W.channels}}},$.dispatchValue=H=>{D.value!==H&&(D.value=H,D.dispatchEvent(new Event("input",{bubbles:!0})))};const T=new Set;for(const[H,F]of m)if(H.initializer!=null){const W=H.facet==="super"?M:x,G=H.initializer(F.data,F.facets,F.channels,b,W,$);if(G.data!==void 0&&(F.data=G.data),G.facets!==void 0&&(F.facets=G.facets),G.channels!==void 0){const{fx:nt,fy:J,...X}=G.channels;y9(X),Object.assign(F.channels,X);for(const q of Object.values(X)){const{scale:N}=q;N!=null&&!X4(Et.get(N))&&(Xg(q,t),T.add(N))}(nt!=null||J!=null)&&h.set(H,!0)}}if(T.size){const H=new Map;dr(H,m,t,nt=>T.has(nt)),dr(c,m,t,nt=>T.has(nt));const F=E9(ps(H,t),g),{scales:W,...G}=ch(F);Object.assign(g,F),Object.assign(b,G),Object.assign(b.scales,W)}let L,I;p!==void 0&&(L={x:v==null?void 0:v.domain(),y:_==null?void 0:_.domain()},p=q8(p,L),I=Y8(v,_,w));for(const[H,F]of m)F.values=H.scale(F.channels,b,$);const{width:Y,height:E}=w;Mr(C).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",Y).attr("height",E).attr("viewBox",`0 0 ${Y} ${E}`).attr("aria-label",a).attr("aria-description",f).call(H=>H.append("style").text(`:where(.${l}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${l} text),
:where(.${l} tspan) {
  white-space: pre;
}`)).call(uu,n);for(const H of s){const{channels:F,values:W,facets:G}=m.get(H);if(p===void 0||H.facet==="super"){let nt=null;if(G&&(nt=G[0],nt=H.filter(nt,F,W),nt.length===0))continue;const J=H.render(nt,b,W,M,$);if(J==null)continue;C.appendChild(J)}else{let nt;for(const J of p){if(!(((V=H.facetAnchor)==null?void 0:V.call(H,p,L,J))??!J.empty))continue;let X=null;if(G){const N=h.has(H);if(X=G[N?J.i:0],X=H.filter(X,F,W),X.length===0)continue;!N&&X===G[0]&&(X=I4(X)),X.fx=J.x,X.fy=J.y,X.fi=J.i}const q=H.render(X,b,W,x,$);if(q!=null){(nt??(nt=Mr(C).append("g"))).append(()=>q).datum(J);for(const N of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(N)&&(nt.attr(N,q.getAttribute(N)),q.removeAttribute(N))}}nt==null||nt.selectChildren().attr("transform",I)}}const z=e9(g,$,t),{figure:R=i!=null||r!=null||o!=null||z.length>0}=t;R&&(D=S.createElement("figure"),D.className=`${l}-figure`,D.style.maxWidth="initial",i!=null&&D.append(Ah(S,i,"h2")),r!=null&&D.append(Ah(S,r,"h3")),D.append(...z,C),o!=null&&D.append(m9(S,o))),D.scale=P8(b.scales),D.legend=Q7(g,$,t);const Q=T5();return Q>0&&Mr(C).append("text").attr("x",Y).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${Q.toLocaleString("en-US")} warning${Q===1?"":"s"}. Please check the console.`),D}function Ah(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function m9(t,e){const n=t.createElement("figcaption");return n.append(e),n}function g9({marks:t=[],...e}={}){return Je({...e,marks:[...t,this]})}se.prototype.plot=g9;function Nh(t){return t.flat(1/0).filter(e=>e!=null).map(b9)}function b9(t){return typeof t.render=="function"?t:new _9(t)}class _9 extends se{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Mu(t,e){for(const n in t)Xg(t[n],e);return t}function Xg(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:f=o?l=>l*100:km(a,r)}=e[n]??{};f!=null&&(t.value=At(t.value,f),t.transform=!1)}function y9(t){for(const e in t)Lm(e,t[e])}function dr(t,e,n,i=E4){var r,o;for(const{channels:a}of e.values())for(const f in a){const l=a[f],{scale:s}=l;if(s!=null&&i(s))if(s==="projection"){if(!H5(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(u||h){const[c,d]=G5(l);u&&ml(t,"x",c),h&&ml(t,"y",d)}}}else ml(t,s,l)}return t}function ml(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function w9(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=pe(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Hr(r,{value:n,scale:"fx"})),i!=null&&(o.fy=Hr(r,{value:i,scale:"fy"})),Mu(o,e);const a=gu(r,o);return{channels:o,groups:a,data:t.data}}function Dh(t,e,n){var l;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=pe(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=Hr(s,{value:i,scale:"fx"})),r!=null&&(u.fy=Hr(s,{value:r,scale:"fy"})),Mu(u,n),{channels:u,groups:gu(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((l=pe(t.data))==null?void 0:l.length)===f.length&&En(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function v9(t,e={}){return Xi({...e,x:null,y:null},(n,i,r,o,a,f)=>f.getMarkState(t))}function x9(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?n7:/^y$/i.test(r)?yh:e7,i=r(v9(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===yh?"left":"bottom");const a=l9(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function $9(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:f={},axis:l,grid:s,facet:u={},facet:{axis:h=l,grid:c}=u,x:{axis:d=l,grid:p=d===null?null:s}=r,y:{axis:m=l,grid:g=m===null?null:s}=o,fx:{axis:w=h,grid:b=w===null?null:c}=a,fy:{axis:v=h,grid:_=v===null?null:c}=f}=n;(i||!ls(r)&&!Fh("x",t))&&(d=p=null),(i||!ls(o)&&!Fh("y",t))&&(m=g=null),e.has("fx")||(w=b=null),e.has("fy")||(v=_=null),d===void 0&&(d=!Uo(t,"x")),m===void 0&&(m=!Uo(t,"y")),w===void 0&&(w=!Uo(t,"fx")),v===void 0&&(v=!Uo(t,"fy")),d===!0&&(d="bottom"),m===!0&&(m="left"),w===!0&&(w=d==="top"||d===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const x=[];return Oo(x,_,q7,f),Po(x,v,I7,"right","left",u,f),Oo(x,b,W7,a),Po(x,w,R7,"top","bottom",u,a),Oo(x,g,z7,o),Po(x,m,Dg,"left","right",n,o),Oo(x,p,Y7,r),Po(x,d,Fg,"bottom","top",n,r),x}function Po(t,e,n,i,r,o,a){if(!e)return;const f=M9(e);a=k9(f?i:e,o,a);const{line:l}=a;(n===Dg||n===Fg)&&l&&!Wr(l)&&t.push(o9(S9(a))),t.push(n(a)),f&&t.push(n({...a,anchor:r,label:null}))}function Oo(t,e,n,i){!e||Wr(e)||t.push(n(T9(e,i)))}function M9(t){return/^\s*both\s*$/i.test(t)}function k9(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:l,fontVariant:s,ariaLabel:u,ariaDescription:h,label:c=e.label,labelAnchor:d,labelArrow:p=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:l,fontVariant:s,ariaLabel:u,ariaDescription:h,label:c,labelAnchor:d,labelArrow:p,labelOffset:m}}function S9(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function T9(t,{stroke:e=mf(t)?t:void 0,ticks:n=C9(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function C9(t){switch(typeof t){case"number":return!0;case"string":return!mf(t)}return qn(t)||typeof(t==null?void 0:t.range)=="function"}function Uo(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Fh(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function E9(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function A9({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:f,height:l}=mu(n),s=t&&Lh(t),u=e&&Lh(e);return{marginTop:e?u[0]:i,marginRight:t?f-s[1]:r,marginBottom:e?l-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:l}}function Lh(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const N9=new Map([["basis",e4],["basis-closed",n4],["basis-open",i4],["bundle",r4],["bump-x",W6],["bump-y",H6],["cardinal",o4],["cardinal-closed",a4],["cardinal-open",f4],["catmull-rom",l4],["catmull-rom-closed",s4],["catmull-rom-open",u4],["linear",lf],["linear-closed",c4],["monotone-x",h4],["monotone-y",d4],["natural",p4],["step",m4],["step-after",b4],["step-before",g4]]);function D9(t=lf,e){if(typeof t=="function")return t;const n=N9.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function jg(t=Ki,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Ki:D9(t,e)}function Ki(t){return lf(t)}function F9(t={y:"count"},e={}){[t,e]=P9(t,e);const{x:n,y:i}=e;return R9(O9(n,e,jt),null,null,i,t,_u(e))}function L9(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=lu}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function I9(t={}){return L9(F9,"y",xf(t,"x"))}function R9(t,e,n,i,{data:r=Fm,filter:o=Fa,sort:a,reverse:f,...l}={},s={}){t=Ih(t),e=Ih(e),l=B9(l,s),r=Qg(r,jt),a=a==null?void 0:Zg("sort",a,s),o=o==null?void 0:Kg("filter",o,s),n!=null&&Fo(l,"x","x1","x2")&&(n=null),i!=null&&Fo(l,"y","y1","y2")&&(i=null);const[u,h]=on(t),[c,d]=on(t),[p,m]=on(e),[g,w]=on(e),[b,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[_,x]=on(b),{x:M,y:$,z:S,fill:C,stroke:D,x1:T,x2:L,y1:I,y2:Y,domain:E,cumulative:z,thresholds:R,interval:Q,...V}=s,[H,F]=on(S),[W]=mn(C),[G]=mn(D),[nt,J]=on(W),[X,q]=on(G);return{..."z"in s&&{z:H||S},..."fill"in s&&{fill:nt||C},..."stroke"in s&&{stroke:X||D},..._f(V,(N,A,P)=>{const tt=Mm(Rt(N,b),P==null?void 0:P[v]),O=Rt(N,S),ht=Rt(N,W),ot=Rt(N,G),pt=l5(l,{z:O,fill:ht,stroke:ot}),at=[],ct=[],zt=tt&&x([]),me=O&&F([]),gi=ht&&J([]),bi=ot&&q([]),qt=t&&h([]),ee=t&&d([]),Yt=e&&m([]),Df=e&&w([]),u2=Y9(t,e,N);let c2=0;for(const _i of l)_i.initialize(N);a&&a.initialize(N),o&&o.initialize(N);for(const _i of A){const Eu=[];for(const or of l)or.scope("facet",_i);a&&a.scope("facet",_i),o&&o.scope("facet",_i);for(const[or,h2]of Qc(_i,pt))for(const[d2,yo]of Qc(h2,tt))for(const[Be,Hn]of u2(yo))if(!(o&&!o.reduce(Be,Hn))){Eu.push(c2++),ct.push(r.reduceIndex(Be,N,Hn)),tt&&zt.push(d2),O&&me.push(pt===O?or:O[(Be.length>0?Be:yo)[0]]),ht&&gi.push(pt===ht?or:ht[(Be.length>0?Be:yo)[0]]),ot&&bi.push(pt===ot?or:ot[(Be.length>0?Be:yo)[0]]),qt&&(qt.push(Hn.x1),ee.push(Hn.x2)),Yt&&(Yt.push(Hn.y1),Df.push(Hn.y2));for(const p2 of l)p2.reduce(Be,Hn);a&&a.reduce(Be)}at.push(Eu)}return s5(at,a,f),{data:ct,facets:at}}),...!Fo(l,"x")&&(u?{x1:u,x2:c,x:ss(u,c)}:{x:M,x1:T,x2:L}),...!Fo(l,"y")&&(p?{y1:p,y2:g,y:ss(p,g)}:{y:$,y1:I,y2:Y}),..._&&{[v]:_},...Object.fromEntries(l.map(({name:N,output:A})=>[N,A]))}}function P9({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function O9(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...uo(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=U9(t.thresholds,t.interval),t}function Ih(t){if(t==null)return;const{value:e,cumulative:n,domain:i=_e,thresholds:r}=t,o=a=>{let f=Rt(a,e),l;if(le(f)||q9(r)){f=At(f,wm,Float64Array);let[u,h]=typeof i=="function"?i(f):i,c=typeof r=="function"&&!Ei(r)?r(f,u,h):r;typeof c=="number"&&(c=$p(u,h,c)),Ei(c)&&(i===_e&&(u=c.floor(u),h=c.offset(c.floor(h))),c=c.range(u,c.offset(h))),l=c}else{f=He(f);let[u,h]=typeof i=="function"?i(f):i,c=typeof r=="function"&&!Ei(r)?r(f,u,h):r;if(typeof c=="number")if(i===_e){let d=ea(u,h,c);if(isFinite(d))if(d>0){let p=Math.round(u/d),m=Math.round(h/d);p*d<=u||--p,m*d>h||++m;let g=m-p+1;c=new Float64Array(g);for(let w=0;w<g;++w)c[w]=(p+w)*d}else if(d<0){d=-d;let p=Math.round(u*d),m=Math.round(h*d);p/d<=u||--p,m/d>h||++m;let g=m-p+1;c=new Float64Array(g);for(let w=0;w<g;++w)c[w]=(p+w)/d}else c=[u];else c=[u]}else c=Fr(u,h,c);else Ei(c)&&(i===_e&&(u=c.floor(u),h=c.offset(c.floor(h))),c=c.range(u,c.offset(h)));l=c}const s=[];if(l.length===1)s.push([l[0],l[0]]);else for(let u=1;u<l.length;++u)s.push([l[u-1],l[u]]);return s.bin=(n<0?H9:n>0?W9:ku)(s,l,f),s};return o.label=pi(e),o}function U9(t,e,n=Rh){if(t===void 0)return e===void 0?n:nr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return hb;case"scott":return Rd;case"sturges":return lb;case"auto":return Rh}return Ks(t)}return t}function B9(t,e){return o5(t,e,Zg)}function Zg(t,e,n){return Nm(t,e,n,Kg)}function Kg(t,e,n){return Dm(t,e,n,Qg)}function Qg(t,e){return fu(t,e,z9)}function z9(t){switch(`${t}`.toLowerCase()){case"x":return V9;case"x1":return X9;case"x2":return j9;case"y":return G9;case"y1":return Z9;case"y2":return K9}throw new Error(`invalid bin reduce: ${t}`)}function Rh(t,e,n){return Math.min(200,Rd(t,e,n))}function q9(t){return O4(t)||qn(t)&&le(t)}function Y9(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[f,[l,s]]of i.entries()){const u=r.bin(a[f]);for(const[h,[c,d]]of r.entries())yield[u[h],{data:n,x1:l,y1:c,x2:s,y2:d}]}}:i?function*(o){const a=i.bin(o);for(const[f,[l,s]]of i.entries())yield[a[f],{data:n,x1:l,x2:s}]}:function*(o){const a=r.bin(o);for(const[f,[l,s]]of r.entries())yield[a[f],{data:n,y1:l,y2:s}]}}function ku(t,e,n){return e=He(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[Oa(e,n[a])-1])==null||o.push(a);return r}}function W9(t,e,n){const i=ku(t,e,n);return r=>{const o=i(r);for(let a=1,f=o.length;a<f;++a){const l=o[a-1],s=o[a];for(const u of l)s.push(u)}return o}}function H9(t,e,n){const i=ku(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const f=o[a+1],l=o[a];for(const s of f)l.push(s)}return o}}function Jg(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const V9={reduceIndex(t,e,{x1:n,x2:i}){return Jg(n,i)}},G9={reduceIndex(t,e,{y1:n,y2:i}){return Jg(n,i)}},X9={reduceIndex(t,e,{x1:n}){return n}},j9={reduceIndex(t,e,{x2:n}){return n}},Z9={reduceIndex(t,e,{y1:n}){return n}},K9={reduceIndex(t,e,{y2:n}){return n}};function Q9(t={}){return xm(t)?t:{...t,y:jt}}function J9(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const f of e)for(const l of f)i[l]&&++r,i[l]=1;if(r===0)return{data:t,facets:e};t=Yr(t);const o=t[_m]=new Uint32Array(n+r);e=e.map(f=>Yr(f,Uint32Array));let a=n;i.fill(0);for(const f of e)for(let l=0,s=f.length;l<s;++l){const u=f[l];i[u]?(f[l]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function tx(t={},e={}){arguments.length===1&&([t,e]=nx(t));const{x1:n,x:i=n,y:r,...o}=e,[a,f,l,s]=rx(i,r,"x","y",t,o);return{...a,x1:n,x:f,y1:l,y2:s,y:ss(l,s)}}function ex({y:t,y1:e,y2:n,...i}={}){return i=xf(i,"x"),e===void 0&&n===void 0?tx({y:t,...i}):([e,n]=L4(t,e,n),{...i,y1:e,y2:n})}function nx(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const ix={length:!0};function rx(t,e=C4,n,i,{offset:r,order:o,reverse:a},f){if(e===null)throw new Error(`stack requires ${i}`);const l=$m(f),[s,u]=on(t),[h,c]=Da(e),[d,p]=Da(e);return h.hint=d.hint=ix,r=ox(r),o=lx(o,r,i),[_f(f,(m,g,w)=>{({data:m,facets:g}=J9(m,g));const b=t==null?void 0:u(Mm(Rt(m,t),w==null?void 0:w[n])),v=Rt(m,e,Float64Array),_=Rt(m,l),x=o&&o(m,b,v,_),M=m.length,$=c(new Float64Array(M)),S=p(new Float64Array(M)),C=[];for(const D of g){const T=b?Array.from(Ba(D,L=>b[L]).values()):[D];if(x)for(const L of T)L.sort(x);for(const L of T){let I=0,Y=0;a&&L.reverse();for(const E of L){const z=v[E];z<0?I=S[E]=($[E]=I)+z:z>0?Y=S[E]=($[E]=Y)+z:S[E]=$[E]=Y}}C.push(T)}return r&&r(C,$,S,_),{data:m,facets:g}}),s,h,d]}function ox(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return ax;case"center":case"silhouette":return fx;case"wiggle":return e2}throw new Error(`unknown offset: ${t}`)}}function t2(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function ax(t,e,n){for(const i of t)for(const r of i){const[o,a]=t2(r,n);for(const f of r){const l=1/(a-o||1);e[f]=l*(e[f]-o),n[f]=l*(n[f]-o)}}}function fx(t,e,n){for(const i of t){for(const r of i){const[o,a]=t2(r,n);for(const f of r){const l=(a+o)/2;e[f]-=l,n[f]-=l}}n2(i,e,n)}i2(t,e,n)}function e2(t,e,n,i){for(const r of t){const o=new ei;let a=0;for(const f of r){let l=-1;const s=f.map(d=>Math.abs(n[d]-e[d])),u=f.map(d=>{l=i?i[d]:++l;const p=n[d]-e[d],m=o.has(l)?p-o.get(l):0;return o.set(l,p),m}),h=[0,...nb(u)];for(const d of f)e[d]+=a,n[d]+=a;const c=In(s);c&&(a-=In(s,(d,p)=>(u[p]/2+h[p])*d)/c)}n2(r,e,n)}i2(t,e,n)}function n2(t,e,n){const i=cn(t,r=>cn(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function i2(t,e,n){const i=t.length;if(i===1)return;const r=t.map(f=>f.flat()),o=r.map(f=>(cn(f,l=>e[l])+ce(f,l=>n[l]))/2),a=cn(o);for(let f=0;f<i;f++){const l=a-o[f];for(const s of r[f])e[s]+=l,n[s]+=l}}function lx(t,e,n){if(t===void 0&&e===e2)return Ph(Ie);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Na:Ie;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return sx(r);case"z":return ux(r);case"sum":return cx(r);case"appearance":return hx(r);case"inside-out":return Ph(r)}return Oh(ym(t))}if(typeof t=="function")return(t.length===1?Oh:dx)(t);if(Array.isArray(t))return px(t);throw new Error(`invalid order: ${t}`)}}function sx(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function ux(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function cx(t){return Tf(t,(e,n,i,r)=>ws(_n(e),o=>In(o,a=>i[a]),o=>r[o]))}function hx(t){return Tf(t,(e,n,i,r)=>ws(_n(e),o=>n[Id(o,a=>i[a])],o=>r[o]))}function Ph(t){return Tf(t,(e,n,i,r)=>{const o=_n(e),a=ws(o,h=>n[Id(h,c=>i[c])],h=>r[h]),f=Ni(o,h=>In(h,c=>i[c]),h=>r[h]),l=[],s=[];let u=0;for(const h of a)u<0?(u+=f.get(h),l.push(h)):(u-=f.get(h),s.push(h));return s.reverse().concat(l)})}function Oh(t){return e=>{const n=Rt(e,t);return(i,r)=>Ie(n[i],n[r])}}function dx(t){return e=>(n,i)=>t(e[n],e[i])}function px(t){return Tf(Ie,()=>t)}function Tf(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new ei(e(n,i,r,o).map((f,l)=>[f,l]));return(f,l)=>t(a.get(o[f]),a.get(o[l]))}}const mx={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class gx extends se{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:f,tension:l}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,mx),this.curve=jg(f,l),_o(this,n)}project(e,n,i){this.curve!==Ki&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:f,x2:l=a,y2:s=f}=i,{curve:u}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(Ue,this).attr("d",u===Ki&&o.projection?bx(o.projection,a,f,l,s):c=>{const d=Sn(),p=u(d);return p.lineStart(),p.point(a[c],f[c]),p.point(l[c],s[c]),p.lineEnd(),d}).call(wn,this,i).call($f,this,i,o)).node()}}function bx(t,e,n,i,r){const o=ja(t);return e=He(e),n=He(n),i=He(i),r=He(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Su(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...f}={}){return[n,i]=Uh(e,n,i),[o,a]=Uh(r,o,a),new gx(t,{...f,x1:n,x2:i,y1:o,y2:a})}function Uh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class r2 extends se{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:f=o,insetBottom:l=o,insetLeft:s=o,rx:u,ry:h}=i;this.insetTop=St(a),this.insetRight=St(f),this.insetBottom=St(l),this.insetLeft=St(s),this.rx=Wt(u,"auto"),this.ry=Wt(h,"auto")}render(e,n,i,r,o){const{rx:a,ry:f}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(this._transform,this,n).call(l=>l.selectAll().data(e).enter().append("rect").call(Ue,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(mt,"rx",a).call(mt,"ry",f).call(wn,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:f}=this,l=n&&e?e.bandwidth():o-i-r;return Math.max(0,l-a-f)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:f}=this,l=n&&e?e.bandwidth():o-i-r;return Math.max(0,l-a-f)}}const _x={ariaLabel:"bar"};class yx extends r2{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,_x)}_transform(e,n,{y:i}){e.call(Se,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return ji(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:f,insetBottom:l}=this;return ji(e)?a-r-o-f-l:s=>Math.max(0,Math.abs(i[s]-n[s])-f-l)}}function wx(t,e={}){return F4(e)||(e={...e,x:Qs,y2:jt}),new yx(t,ex(mg(Q9(e))))}const vx={ariaLabel:"cell"};class xx extends r2{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,vx)}_transform(e,n){e.call(Se,n,{},0,0)}}function $x(t,{x:e,y:n,...i}={}){return[e,n]=pf(e,n),new xx(t,{...i,x:e,y:n})}const Mx={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function kx(t){return t.sort===void 0&&t.reverse===void 0?n5({channel:"-r"},t):t}class Sx extends se{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:f=zr,frameAnchor:l}=n,[s,u]=Qt(a,0),[h,c]=t5(f),[d,p]=Qt(o,h==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:d,scale:"r",filter:cf,optional:!0},rotate:{value:s,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},kx(n),Mx),this.r=p,this.rotate=u,this.symbol=c,this.frameAnchor=gf(l);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:w,stroke:b}=m;g.hint={fill:w?w.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:s,r:u,rotate:h,symbol:c}=i,{r:d,rotate:p,symbol:m}=this,[g,w]=mo(this,r),b=m===zr,v=u?void 0:d*d*Math.PI;return Xs(d)&&(e=[]),Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a,y:s&&f}).call(_=>_.selectAll().data(e).enter().append(b?"circle":"path").call(Ue,this).call(b?x=>{x.attr("cx",l?M=>l[M]:g).attr("cy",s?M=>s[M]:w).attr("r",u?M=>u[M]:d)}:x=>{x.attr("transform",yu`translate(${l?M=>l[M]:g},${s?M=>s[M]:w})${h?M=>` rotate(${h[M]})`:p?` rotate(${p})`:""}`).attr("d",u&&c?M=>{const $=Sn();return c[M].draw($,u[M]*u[M]*Math.PI),$}:u?M=>{const $=Sn();return m.draw($,u[M]*u[M]*Math.PI),$}:c?M=>{const $=Sn();return c[M].draw($,v),$}:(()=>{const M=Sn();return m.draw(M,v),M})())}).call(wn,this,i)).node()}}function Ia(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=pf(e,n)),new Sx(t,{...i,x:e,y:n})}const Tx={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Cx extends se{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:f}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:$m(n),optional:!0}},n,Tx),this.z=o,this.curve=jg(a,f),_o(this,n)}filter(e){return e}project(e,n,i){this.curve!==Ki&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:f}=i,{curve:l}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,n).call(s=>s.selectAll().data(P5(e,[a,f],this,i)).enter().append("path").call(Ue,this).call(L5,this,i).call(f7,this,i,o).attr("d",l===Ki&&o.projection?Ex(o.projection,a,f):Y6().curve(l).defined(u=>u>=0).x(u=>a[u]).y(u=>f[u]))).node()}}function Ex(t,e,n){const i=ja(t);return e=He(e),n=He(n),r=>{let o=[];const a=[o];for(const f of r)f===-1?(o=[],a.push(o)):o.push([e[f],n[f]]);return i({type:"MultiLineString",coordinates:a})}}function Ax(t,{x:e=Qs,y:n=jt,...i}={}){return new Cx(t,I9({...i,x:e,y:n}))}const Nx={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Dx extends se{constructor(e,n,i){super(e,n,i,Nx),_o(this,i)}render(e,n,i,r,o){return Ft("svg:g",o).call(Oe,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(wn,this,i).call($f,this,i,o)).node()}}class Fx extends Dx{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:f=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=St(a),this.insetBottom=St(f)}_transform(e,n,{x:i}){e.call(Se,n,{x:i},re,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function Tu(t,{x:e=jt,...n}={}){return new Fx(t,{...n,x:e})}function Lx(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){K(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:xt,o:xt,d(o){o&&j(e),t[4](null)}}}function Ix(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;bn(()=>{const l=Je({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Tu(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(l)});function f(l){$e[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class An extends Ut{constructor(e){super(),Ot(this,e,Ix,Lx,Pt,{pattern:3,width:0,height:1})}}function Rx(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){K(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:xt,o:xt,d(o){o&&j(e),t[4](null)}}}function Px(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;bn(()=>{const l=i.map((u,h)=>h===0?0:u-i[h-1]),s=Je({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[wx(l,{x:(u,h)=>h+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(l){$e[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class Nn extends Ut{constructor(e){super(),Ot(this,e,Px,Rx,Pt,{pattern:3,width:0,height:1})}}function Ox(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){K(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:xt,o:xt,d(o){o&&j(e),t[4](null)}}}function Ux(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;bn(()=>{const l=i.map((u,h)=>h===0?0:u-i[h-1]),s=Je({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[$x(l,{x:(u,h)=>h+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function f(l){$e[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class Dn extends Ut{constructor(e){super(),Ot(this,e,Ux,Ox,Pt,{pattern:3,width:0,height:1})}}function Bx(t){let e,n,i,r;return{c(){e=k("main"),n=k("div"),B(n,"width",i=t[0]+"px"),B(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){K(o,e,a),y(e,n),t[6](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&B(n,"width",i),a&2&&r!==(r=o[1]+"px")&&B(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:xt,o:xt,d(o){o&&j(e),t[6](null)}}}function zx(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{width:o=800}=e,{height:a=50}=e,f,l=null,s;const u=async p=>{n(5,l=await Td(p)),console.log(`Loaded ${p}, sr= ${l.sampleRate}`),s=l.sampleRate};let h=null;const c=(p,m)=>{m&&(h=Cd(m,p,.5))};bn(()=>{if(n(2,f.textContent="",f),!h)return;const p=Je({width:o,height:a,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[Ax(h,{x:(m,g)=>g/s,y:m=>m})]});f.appendChild(p)});function d(p){$e[p?"unshift":"push"](()=>{f=p,n(2,f)})}return t.$$set=p=>{"pattern"in p&&n(3,i=p.pattern),"audioFile"in p&&n(4,r=p.audioFile),"width"in p&&n(0,o=p.width),"height"in p&&n(1,a=p.height)},t.$$.update=()=>{t.$$.dirty&16&&u(r),t.$$.dirty&40&&c(i,l)},[o,a,f,i,r,l,d]}class Fn extends Ut{constructor(e){super(),Ot(this,e,zx,Bx,Pt,{pattern:3,audioFile:4,width:0,height:1})}}function qx(t){let e,n,i,r,o,a;return{c(){e=k("main"),n=k("audio"),i=U(),r=k("button"),r.textContent="play audio (p)",n.controls=!1},m(f,l){K(f,e,l),y(e,n),t[6](n),y(e,i),y(e,r),o||(a=dt(r,"click",t[1]),o=!0)},p:xt,i:xt,o:xt,d(f){f&&j(e),t[6](null),o=!1,a()}}}function Yx(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{currentTrialNumber:o=-1}=e,a=null;const f=async d=>{n(5,a=await Td(d)),console.log(`Loaded ${d}, sr= ${a.sampleRate}`)};let l=null,s;const u=(d,p)=>{p&&s&&(l=Cd(p,d),V2(l,p.sampleRate,s))},h=()=>{s&&(s.pause(),n(0,s.currentTime=0,s),s.play())};Ra(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function c(d){$e[d?"unshift":"push"](()=>{s=d,n(0,s)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"currentTrialNumber"in d&&n(4,o=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&16&&o>-1&&window.setTimeout(h,200),t.$$.dirty&36&&u(i,a)},[s,h,i,r,o,a,c]}class Qi extends Ut{constructor(e){super(),Ot(this,e,Yx,qx,Pt,{pattern:2,audioFile:3,currentTrialNumber:4})}}function Bh(t,e,n){const i=t.slice();return i[8]=e[n],i}function zh(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=k("option"),i=ft(n),e.__value=t[8],rt(e,e.__value)},m(r,o){K(r,e,o),y(e,i)},p:xt,d(r){r&&j(e)}}}function Wx(t){let e,n,i,r,o,a,f,l=(Zo*1e3).toFixed(0)+"",s,u,h,c,d,p,m,g,w=t[0].toFixed(1)+"",b,v,_=(t[2]*1e3).toFixed(1)+"",x,M,$,S,C,D,T,L,I,Y,E,z,R,Q,V,H,F,W,G,nt,J=We(t[5]),X=[];for(let q=0;q<J.length;q+=1)X[q]=zh(Bh(t,J,q));return I=new Qi({props:{pattern:t[1],audioFile:t[3]}}),E=new Fn({props:{pattern:t[1],audioFile:t[3],width:Bo,height:zo}}),R=new An({props:{pattern:t[1],width:Bo,height:zo}}),V=new Nn({props:{pattern:t[1],width:Bo,height:zo}}),F=new Dn({props:{pattern:t[1],width:Bo,height:zo}}),{c(){e=k("main"),n=k("h2"),n.textContent="Playground",i=U(),r=k("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=U(),a=k("div"),f=ft("inter-onset interval (IOI): "),s=ft(l),u=ft(" milliseconds ("),h=ft(t[4]),c=ft(` bpm)
    `),d=k("label"),p=ft(`deviation as percent of IOI
      `),m=k("input"),g=U(),b=ft(w),v=ft(`
      (`),x=ft(_),M=ft(" milliseconds)"),$=U(),S=k("label"),C=ft(`instrument sample:
      `),D=k("select");for(let q=0;q<X.length;q+=1)X[q].c();T=U(),L=k("div"),ut(I.$$.fragment),Y=U(),ut(E.$$.fragment),z=U(),ut(R.$$.fragment),Q=U(),ut(V.$$.fragment),H=U(),ut(F.$$.fragment),B(m,"type","range"),B(m,"min","-20"),B(m,"max","20"),B(m,"step","1"),B(d,"class","svelte-1sot113"),t[3]===void 0&&Ne(()=>t[7].call(D)),B(S,"class","svelte-1sot113"),B(L,"class","stimuli svelte-1sot113")},m(q,N){K(q,e,N),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,f),y(a,s),y(a,u),y(a,h),y(a,c),y(a,d),y(d,p),y(d,m),rt(m,t[0]),y(d,g),y(d,b),y(d,v),y(d,x),y(d,M),y(a,$),y(a,S),y(S,C),y(S,D);for(let A=0;A<X.length;A+=1)X[A]&&X[A].m(D,null);Vt(D,t[3],!0),y(e,T),y(e,L),lt(I,L,null),y(L,Y),lt(E,L,null),y(L,z),lt(R,L,null),y(L,Q),lt(V,L,null),y(L,H),lt(F,L,null),W=!0,G||(nt=[dt(m,"change",t[6]),dt(m,"input",t[6]),dt(D,"change",t[7])],G=!0)},p(q,[N]){if((!W||N&16)&&Xt(h,q[4]),N&1&&rt(m,q[0]),(!W||N&1)&&w!==(w=q[0].toFixed(1)+"")&&Xt(b,w),(!W||N&4)&&_!==(_=(q[2]*1e3).toFixed(1)+"")&&Xt(x,_),N&32){J=We(q[5]);let ot;for(ot=0;ot<J.length;ot+=1){const pt=Bh(q,J,ot);X[ot]?X[ot].p(pt,N):(X[ot]=zh(pt),X[ot].c(),X[ot].m(D,null))}for(;ot<X.length;ot+=1)X[ot].d(1);X.length=J.length}N&40&&Vt(D,q[3]);const A={};N&2&&(A.pattern=q[1]),N&8&&(A.audioFile=q[3]),I.$set(A);const P={};N&2&&(P.pattern=q[1]),N&8&&(P.audioFile=q[3]),E.$set(P);const tt={};N&2&&(tt.pattern=q[1]),R.$set(tt);const O={};N&2&&(O.pattern=q[1]),V.$set(O);const ht={};N&2&&(ht.pattern=q[1]),F.$set(ht)},i(q){W||(Z(I.$$.fragment,q),Z(E.$$.fragment,q),Z(R.$$.fragment,q),Z(V.$$.fragment,q),Z(F.$$.fragment,q),W=!0)},o(q){et(I.$$.fragment,q),et(E.$$.fragment,q),et(R.$$.fragment,q),et(V.$$.fragment,q),et(F.$$.fragment,q),W=!1},d(q){q&&j(e),Er(X,q),st(I),st(E),st(R),st(V),st(F),G=!1,ke(nt)}}}let Bo=600,zo=100,Zo=.5,Hx=6,Vx=3,Gx=!0,Xx=0;function jx(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],f=5,l=[];function s(){f=ae(this.value),n(0,f)}function u(){a=Ln(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=f/100*Zo),t.$$.dirty&6&&(n(1,l=Ii(Hx,Zo,Vx,r,Gx,Xx)),console.log("generated pattern",l))},n(4,i=1/Zo*60),[f,l,r,a,i,o,s,u]}class Zx extends Ut{constructor(e){super(),Ot(this,e,jx,Wx,Pt,{})}}var o2={exports:{}};(function(t,e){(function(n,i){i()})(ar,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,h){var c=new XMLHttpRequest;c.open("GET",s),c.responseType="blob",c.onload=function(){l(c.response,u,h)},c.onerror=function(){console.error("could not download file")},c.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ar=="object"&&ar.global===ar?ar:void 0,f=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(s,u,h){var c=a.URL||a.webkitURL,d=document.createElement("a");u=u||s.name||"download",d.download=u,d.rel="noopener",typeof s=="string"?(d.href=s,d.origin===location.origin?o(d):r(d.href)?i(s,u,h):o(d,d.target="_blank")):(d.href=c.createObjectURL(s),setTimeout(function(){c.revokeObjectURL(d.href)},4e4),setTimeout(function(){o(d)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,h){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,h),u);else if(r(s))i(s,u,h);else{var c=document.createElement("a");c.href=s,c.target="_blank",setTimeout(function(){o(c)})}}:function(s,u,h,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,h);var d=s.type==="application/octet-stream",p=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||d&&p||f)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=v:location=v,c=null},g.readAsDataURL(s)}else{var w=a.URL||a.webkitURL,b=w.createObjectURL(s);c?c.location=b:location.href=b,c=null,setTimeout(function(){w.revokeObjectURL(b)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(o2);var Kx=o2.exports;const a2=Sd(Kx);function kt(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}kt.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};kt.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};kt.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};kt.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=f2(0,t.length-1);return this.activate(t[e]),this};kt.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=f2(0,t.length-1);this.activate(t[e])};kt.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};kt.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};kt.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};kt.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};kt.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};kt.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};kt.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};kt.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};kt.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};kt.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};kt.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};kt.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};kt.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};kt.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};kt.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};kt.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const Cu=function(){};Cu.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};Cu.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};kt.prototype.checkErr=new Cu;function f2(t,e){return Math.floor(Math.random()*(e-t+1))+t}function qh(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,b,v,_,x,M,$,S,C,D,T,L,I,Y,E,z,R,Q,V,H,F,W,G,nt,J,X,q;return{c(){e=k("div"),n=k("label"),i=ft(`ID:
        `),r=k("input"),o=U(),a=k("label"),f=ft(`Age:
        `),l=k("select"),s=k("option"),s.textContent="20-24",u=k("option"),u.textContent="25-29",h=k("option"),h.textContent="30-34",c=k("option"),c.textContent="35-39",d=k("option"),d.textContent="40-44",p=k("option"),p.textContent="45-49",m=k("option"),m.textContent="50-54",g=k("option"),g.textContent="55-60",w=U(),b=k("label"),v=ft(`Gender:
        `),_=k("input"),x=U(),M=k("label"),$=ft(`Highest finished education (select the best fitting one):
        `),S=k("select"),C=k("option"),C.textContent="none",D=k("option"),D.textContent="high school",T=k("option"),T.textContent="bachelor",L=k("option"),L.textContent="master",I=k("option"),I.textContent="phd",Y=U(),E=k("label"),z=ft(`Which music instruments do you play?
        `),R=k("input"),Q=U(),V=k("label"),H=ft(`For how many years do you roughly play it/them?
        `),F=k("input"),W=U(),G=k("label"),nt=ft(`How many years of experience do you have with visualization?
        `),J=k("input"),B(r,"type","text"),B(r,"placeholder","ID"),B(n,"class","svelte-u6a8gr"),s.__value="20-24",rt(s,s.__value),u.__value="25-29",rt(u,u.__value),h.__value="30-34",rt(h,h.__value),c.__value="35-39",rt(c,c.__value),d.__value="40-44",rt(d,d.__value),p.__value="45-49",rt(p,p.__value),m.__value="50-54",rt(m,m.__value),g.__value="55-60",rt(g,g.__value),t[6]===void 0&&Ne(()=>t[23].call(l)),B(a,"class","svelte-u6a8gr"),B(_,"type","text"),B(_,"placeholder","m, f, d, or self-describe"),B(b,"class","svelte-u6a8gr"),C.__value="none",rt(C,C.__value),D.__value="highs",rt(D,D.__value),T.__value="bachelor",rt(T,T.__value),L.__value="master",rt(L,L.__value),I.__value="phd",rt(I,I.__value),t[8]===void 0&&Ne(()=>t[25].call(S)),B(M,"class","svelte-u6a8gr"),B(R,"type","text"),B(R,"placeholder","free text"),B(E,"class","svelte-u6a8gr"),B(F,"type","number"),B(F,"min","0"),B(F,"step","1"),B(V,"class","svelte-u6a8gr"),B(J,"type","number"),B(J,"min","0"),B(J,"step","1"),B(G,"class","svelte-u6a8gr"),B(e,"class","demo-form svelte-u6a8gr")},m(N,A){K(N,e,A),y(e,n),y(n,i),y(n,r),rt(r,t[5]),y(e,o),y(e,a),y(a,f),y(a,l),y(l,s),y(l,u),y(l,h),y(l,c),y(l,d),y(l,p),y(l,m),y(l,g),Vt(l,t[6],!0),y(e,w),y(e,b),y(b,v),y(b,_),rt(_,t[7]),y(e,x),y(e,M),y(M,$),y(M,S),y(S,C),y(S,D),y(S,T),y(S,L),y(S,I),Vt(S,t[8],!0),y(e,Y),y(e,E),y(E,z),y(E,R),rt(R,t[9]),y(e,Q),y(e,V),y(V,H),y(V,F),rt(F,t[10]),y(e,W),y(e,G),y(G,nt),y(G,J),rt(J,t[11]),X||(q=[dt(r,"input",t[22]),dt(l,"change",t[23]),dt(_,"input",t[24]),dt(S,"change",t[25]),dt(R,"input",t[26]),dt(F,"input",t[27]),dt(J,"input",t[28])],X=!0)},p(N,A){A[0]&32&&r.value!==N[5]&&rt(r,N[5]),A[0]&64&&Vt(l,N[6]),A[0]&128&&_.value!==N[7]&&rt(_,N[7]),A[0]&256&&Vt(S,N[8]),A[0]&512&&R.value!==N[9]&&rt(R,N[9]),A[0]&1024&&ae(F.value)!==N[10]&&rt(F,N[10]),A[0]&2048&&ae(J.value)!==N[11]&&rt(J,N[11])},d(N){N&&j(e),X=!1,ke(q)}}}function Yh(t){let e,n,i,r,o=t[14]&&Wh(t);return{c(){e=k("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=U(),o&&o.c(),i=gn()},m(a,f){K(a,e,f),K(a,n,f),o&&o.m(a,f),K(a,i,f),r=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&Z(o,1)):(o=Wh(a),o.c(),Z(o,1),o.m(i.parentNode,i)):o&&(Jt(),et(o,1,1,()=>{o=null}),te())},i(a){r||(Z(o),r=!0)},o(a){et(o),r=!1},d(a){a&&(j(e),j(n),j(i)),o&&o.d(a)}}}function Wh(t){let e,n,i,r,o=t[4]+1+"",a,f,l=t[2].length+"",s,u,h,c,d=t[13]+1+"",p,m,g,w,b,v;const _=[Jx,Qx],x=[];function M($,S){return $[17]==="audio"?0:$[16]===!1?1:-1}return~(g=M(t))&&(w=x[g]=_[g](t)),{c(){e=k("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=U(),i=k("p"),r=ft("Test number "),a=ft(o),f=ft(" / "),s=ft(l),u=U(),h=k("p"),c=ft("Trial number "),p=ft(d),m=U(),w&&w.c(),b=gn()},m($,S){K($,e,S),K($,n,S),K($,i,S),y(i,r),y(i,a),y(i,f),y(i,s),K($,u,S),K($,h,S),y(h,c),y(h,p),K($,m,S),~g&&x[g].m($,S),K($,b,S),v=!0},p($,S){(!v||S[0]&16)&&o!==(o=$[4]+1+"")&&Xt(a,o),(!v||S[0]&4)&&l!==(l=$[2].length+"")&&Xt(s,l),(!v||S[0]&8192)&&d!==(d=$[13]+1+"")&&Xt(p,d);let C=g;g=M($),g===C?~g&&x[g].p($,S):(w&&(Jt(),et(x[C],1,1,()=>{x[C]=null}),te()),~g?(w=x[g],w?w.p($,S):(w=x[g]=_[g]($),w.c()),Z(w,1),w.m(b.parentNode,b)):w=null)},i($){v||(Z(w),v=!0)},o($){et(w),v=!1},d($){$&&(j(e),j(n),j(i),j(u),j(h),j(m),j(b)),~g&&x[g].d($)}}}function Qx(t){let e,n,i,r;const o=[i$,n$,e$,t$],a=[];function f(l,s){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=gn()},m(l,s){~e&&a[e].m(l,s),K(l,i,s),r=!0},p(l,s){let u=e;e=f(l),e===u?~e&&a[e].p(l,s):(n&&(Jt(),et(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(l,s):(n=a[e]=o[e](l),n.c()),Z(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(Z(n),r=!0)},o(l){et(n),r=!1},d(l){l&&j(i),~e&&a[e].d(l)}}}function Jx(t){let e,n,i,r;return e=new Qi({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ut(e.$$.fragment),n=U(),i=k("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),K(o,n,a),K(o,i,a),r=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(Z(e.$$.fragment,o),r=!0)},o(o){et(e.$$.fragment,o),r=!1},d(o){o&&(j(n),j(i)),st(e,o)}}}function t$(t){let e,n;return e=new Dn({props:{pattern:t[0],width:Cf,height:Ef}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function e$(t){let e,n;return e=new Nn({props:{pattern:t[0],width:Cf,height:Ef}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function n$(t){let e,n;return e=new An({props:{pattern:t[0],width:Cf,height:Ef}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function i$(t){let e,n;return e=new Fn({props:{pattern:t[0],audioFile:t[1],width:Cf,height:Ef}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function Hh(t){let e,n,i,r,o,a;return{c(){e=k("div"),n=k("label"),i=ft(`Any final feedback?
        `),r=k("textarea")},m(f,l){K(f,e,l),y(e,n),y(n,i),y(n,r),rt(r,t[12]),o||(a=dt(r,"input",t[29]),o=!0)},p(f,l){l[0]&4096&&rt(r,f[12])},d(f){f&&j(e),o=!1,a()}}}function Vh(t){let e,n,i,r,o,a;return{c(){e=k("div"),e.textContent="Thanks for participating!",n=U(),i=k("div"),r=k("button"),r.textContent="Download results"},m(f,l){K(f,e,l),K(f,n,l),K(f,i,l),y(i,r),o||(a=dt(r,"click",t[19]),o=!0)},p:xt,d(f){f&&(j(e),j(n),j(i)),o=!1,a()}}}function Gh(t){let e,n,i;return{c(){e=k("button"),e.textContent="next step (PageDown)"},m(r,o){K(r,e,o),n||(i=dt(e,"click",t[18]),n=!0)},p:xt,d(r){r&&j(e),n=!1,i()}}}function r$(t){let e,n,i,r,o,a,f,l,s=t[3]==="demo"&&qh(t),u=t[3]==="tests"&&Yh(t),h=t[3]==="feedback"&&Hh(t),c=t[3]==="done"&&Vh(t),d=!t[15]&&t[3]!=="done"&&Gh(t);return{c(){e=k("main"),n=k("h2"),n.textContent="Study",i=U(),s&&s.c(),r=U(),u&&u.c(),o=U(),h&&h.c(),a=U(),c&&c.c(),f=U(),d&&d.c(),B(e,"class","svelte-u6a8gr")},m(p,m){K(p,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),h&&h.m(e,null),y(e,a),c&&c.m(e,null),y(e,f),d&&d.m(e,null),l=!0},p(p,m){p[3]==="demo"?s?s.p(p,m):(s=qh(p),s.c(),s.m(e,r)):s&&(s.d(1),s=null),p[3]==="tests"?u?(u.p(p,m),m[0]&8&&Z(u,1)):(u=Yh(p),u.c(),Z(u,1),u.m(e,o)):u&&(Jt(),et(u,1,1,()=>{u=null}),te()),p[3]==="feedback"?h?h.p(p,m):(h=Hh(p),h.c(),h.m(e,a)):h&&(h.d(1),h=null),p[3]==="done"?c?c.p(p,m):(c=Vh(p),c.c(),c.m(e,f)):c&&(c.d(1),c=null),!p[15]&&p[3]!=="done"?d?d.p(p,m):(d=Gh(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){l||(Z(u),l=!0)},o(p){et(u),l=!1},d(p){p&&j(e),s&&s.d(),u&&u.d(),h&&h.d(),c&&c.d(),d&&d.d()}}}let Xh=.5;const gl=20;let o$=6,a$=!0,f$=0,Cf=600,Ef=100;function l$(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],f="start",l=0,s,u="",h="20-24",c="m",d="master",p="",m=0,g=0,w="",b=0,v,_={},x=[],M,$,S=!1,C=!1,D=!1,T="tick",L=gl,I=3,Y=[],E=[],z=0;const R=[];Ra(()=>{document.querySelector("html").addEventListener("keyup",J)});const Q=()=>{$=new kt({ratio:{firstVal:gl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,gl],direction:-1,reversalLimit:5,verbosity:1}}),$.init()};function V(){f==="start"?(n(2,a=_s(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,l=0)):f==="tests"?l<a.length?(n(17,T=a[l].stimulus),n(1,o=a[l].audioFile),H()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function H(){Q(),n(13,b=0),v=0,M=0,n(14,S=!0),E=[],x=[],s=new Date,F()}function F(){console.log("Starting trial "+b),_={},n(15,C=!0),W()}function W(){let ct=Math.round($.getLast("ratio"));ct=Math.random()<.5?ct:-ct,_.deviation=ct,n(20,L=ct),console.log("generated pattern",Y),n(16,D=!0),window.setTimeout(()=>{n(16,D=!1)},1e3)}function G(at){if(!C)return;n(15,C=!1),_.decisionChoice=at,_.errorCode=0;const ct=M;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&M++,_.errorCode==0&&($.next(ct!=M),x[x.length]=_),_.errorCode==0&&v++,n(13,b++,b),$.reversalLimitReached("ratio")?nt():F()}function nt(){n(14,S=!1),X(),E=[],z=$.getFinalVal("ratio");for(let ct=0;ct<x.length;ct++)E[ct]=x[ct].deviation;console.log(E);const at=new Date;R.push({encoding:T,audioFile:o,final:z,data:E,score:M,testNumber:l,trialCount:b+1,trials:x,validTrialCount:v+1,testTimeSeconds:(at-s)/1e3}),n(4,l++,l)}function J(at){switch(console.log(at.key),at.key){case"ArrowLeft":G(0);break;case"ArrowRight":G(1);break;case"PageDown":!C&&f!=="done"&&V()}}function X(){`${M}`,b+1,`${(M/(b+1)*100).toFixed(1)}${$.getFinalVal("ratio")}`}function q(){const at={demographics:{partID:u,partAge:h,partGender:c,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:w},date:new Date().toISOString(),tests:R};console.log(at);const ct=JSON.stringify(at,void 0,2),zt=new Blob([ct],{type:"text/plain;charset=utf-8"});a2(zt,"results.json")}function N(){u=this.value,n(5,u)}function A(){h=Ln(this),n(6,h)}function P(){c=this.value,n(7,c)}function tt(){d=Ln(this),n(8,d)}function O(){p=this.value,n(9,p)}function ht(){m=ae(this.value),n(10,m)}function ot(){g=ae(this.value),n(11,g)}function pt(){w=this.value,n(12,w)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*Xh),t.$$.dirty[0]&2097153&&(n(0,Y=Ii(o$,Xh,I,i,a$,f$)),console.log("generated pattern",Y))},[Y,o,a,f,l,u,h,c,d,p,m,g,w,b,S,C,D,T,V,q,L,i,N,A,P,tt,O,ht,ot,pt]}class s$ extends Ut{constructor(e){super(),Ot(this,e,l$,r$,Pt,{},null,[-1,-1])}}function jh(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,b,v,_,x,M,$,S,C,D,T,L,I,Y,E,z,R,Q,V,H,F,W,G,nt,J,X,q;return{c(){e=k("div"),n=k("label"),i=ft(`ID:
        `),r=k("input"),o=U(),a=k("label"),f=ft(`Age:
        `),l=k("select"),s=k("option"),s.textContent="20-24",u=k("option"),u.textContent="25-29",h=k("option"),h.textContent="30-34",c=k("option"),c.textContent="35-39",d=k("option"),d.textContent="40-44",p=k("option"),p.textContent="45-49",m=k("option"),m.textContent="50-54",g=k("option"),g.textContent="55-60",w=U(),b=k("label"),v=ft(`Gender:
        `),_=k("input"),x=U(),M=k("label"),$=ft(`Highest finished education (select the best fitting one):
        `),S=k("select"),C=k("option"),C.textContent="none",D=k("option"),D.textContent="high school",T=k("option"),T.textContent="bachelor",L=k("option"),L.textContent="master",I=k("option"),I.textContent="phd",Y=U(),E=k("label"),z=ft(`Which music instruments do you play?
        `),R=k("input"),Q=U(),V=k("label"),H=ft(`For how many years do you roughly play it/them?
        `),F=k("input"),W=U(),G=k("label"),nt=ft(`How many years of experience do you have with visualization?
        `),J=k("input"),B(r,"type","text"),B(r,"placeholder","ID"),B(n,"class","svelte-u6a8gr"),s.__value="20-24",rt(s,s.__value),u.__value="25-29",rt(u,u.__value),h.__value="30-34",rt(h,h.__value),c.__value="35-39",rt(c,c.__value),d.__value="40-44",rt(d,d.__value),p.__value="45-49",rt(p,p.__value),m.__value="50-54",rt(m,m.__value),g.__value="55-60",rt(g,g.__value),t[6]===void 0&&Ne(()=>t[23].call(l)),B(a,"class","svelte-u6a8gr"),B(_,"type","text"),B(_,"placeholder","m, f, d, or self-describe"),B(b,"class","svelte-u6a8gr"),C.__value="none",rt(C,C.__value),D.__value="highs",rt(D,D.__value),T.__value="bachelor",rt(T,T.__value),L.__value="master",rt(L,L.__value),I.__value="phd",rt(I,I.__value),t[8]===void 0&&Ne(()=>t[25].call(S)),B(M,"class","svelte-u6a8gr"),B(R,"type","text"),B(R,"placeholder","free text"),B(E,"class","svelte-u6a8gr"),B(F,"type","number"),B(F,"min","0"),B(F,"step","1"),B(V,"class","svelte-u6a8gr"),B(J,"type","number"),B(J,"min","0"),B(J,"step","1"),B(G,"class","svelte-u6a8gr"),B(e,"class","demo-form svelte-u6a8gr")},m(N,A){K(N,e,A),y(e,n),y(n,i),y(n,r),rt(r,t[5]),y(e,o),y(e,a),y(a,f),y(a,l),y(l,s),y(l,u),y(l,h),y(l,c),y(l,d),y(l,p),y(l,m),y(l,g),Vt(l,t[6],!0),y(e,w),y(e,b),y(b,v),y(b,_),rt(_,t[7]),y(e,x),y(e,M),y(M,$),y(M,S),y(S,C),y(S,D),y(S,T),y(S,L),y(S,I),Vt(S,t[8],!0),y(e,Y),y(e,E),y(E,z),y(E,R),rt(R,t[9]),y(e,Q),y(e,V),y(V,H),y(V,F),rt(F,t[10]),y(e,W),y(e,G),y(G,nt),y(G,J),rt(J,t[11]),X||(q=[dt(r,"input",t[22]),dt(l,"change",t[23]),dt(_,"input",t[24]),dt(S,"change",t[25]),dt(R,"input",t[26]),dt(F,"input",t[27]),dt(J,"input",t[28])],X=!0)},p(N,A){A[0]&32&&r.value!==N[5]&&rt(r,N[5]),A[0]&64&&Vt(l,N[6]),A[0]&128&&_.value!==N[7]&&rt(_,N[7]),A[0]&256&&Vt(S,N[8]),A[0]&512&&R.value!==N[9]&&rt(R,N[9]),A[0]&1024&&ae(F.value)!==N[10]&&rt(F,N[10]),A[0]&2048&&ae(J.value)!==N[11]&&rt(J,N[11])},d(N){N&&j(e),X=!1,ke(q)}}}function Zh(t){let e,n,i,r,o=t[14]&&Kh(t);return{c(){e=k("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=U(),o&&o.c(),i=gn()},m(a,f){K(a,e,f),K(a,n,f),o&&o.m(a,f),K(a,i,f),r=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&Z(o,1)):(o=Kh(a),o.c(),Z(o,1),o.m(i.parentNode,i)):o&&(Jt(),et(o,1,1,()=>{o=null}),te())},i(a){r||(Z(o),r=!0)},o(a){et(o),r=!1},d(a){a&&(j(e),j(n),j(i)),o&&o.d(a)}}}function Kh(t){let e,n,i,r,o=t[4]+1+"",a,f,l=t[2].length+"",s,u,h,c,d=t[13]+1+"",p,m,g,w,b,v;const _=[c$,u$],x=[];function M($,S){return $[17]==="audio"?0:$[16]===!1?1:-1}return~(g=M(t))&&(w=x[g]=_[g](t)),{c(){e=k("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=U(),i=k("p"),r=ft("Test number "),a=ft(o),f=ft(" / "),s=ft(l),u=U(),h=k("p"),c=ft("Trial number "),p=ft(d),m=U(),w&&w.c(),b=gn()},m($,S){K($,e,S),K($,n,S),K($,i,S),y(i,r),y(i,a),y(i,f),y(i,s),K($,u,S),K($,h,S),y(h,c),y(h,p),K($,m,S),~g&&x[g].m($,S),K($,b,S),v=!0},p($,S){(!v||S[0]&16)&&o!==(o=$[4]+1+"")&&Xt(a,o),(!v||S[0]&4)&&l!==(l=$[2].length+"")&&Xt(s,l),(!v||S[0]&8192)&&d!==(d=$[13]+1+"")&&Xt(p,d);let C=g;g=M($),g===C?~g&&x[g].p($,S):(w&&(Jt(),et(x[C],1,1,()=>{x[C]=null}),te()),~g?(w=x[g],w?w.p($,S):(w=x[g]=_[g]($),w.c()),Z(w,1),w.m(b.parentNode,b)):w=null)},i($){v||(Z(w),v=!0)},o($){et(w),v=!1},d($){$&&(j(e),j(n),j(i),j(u),j(h),j(m),j(b)),~g&&x[g].d($)}}}function u$(t){let e,n,i,r;const o=[m$,p$,d$,h$],a=[];function f(l,s){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=gn()},m(l,s){~e&&a[e].m(l,s),K(l,i,s),r=!0},p(l,s){let u=e;e=f(l),e===u?~e&&a[e].p(l,s):(n&&(Jt(),et(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(l,s):(n=a[e]=o[e](l),n.c()),Z(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(Z(n),r=!0)},o(l){et(n),r=!1},d(l){l&&j(i),~e&&a[e].d(l)}}}function c$(t){let e,n,i,r;return e=new Qi({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ut(e.$$.fragment),n=U(),i=k("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),K(o,n,a),K(o,i,a),r=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(Z(e.$$.fragment,o),r=!0)},o(o){et(e.$$.fragment,o),r=!1},d(o){o&&(j(n),j(i)),st(e,o)}}}function h$(t){let e,n;return e=new Dn({props:{pattern:t[0],width:Af,height:Nf}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function d$(t){let e,n;return e=new Nn({props:{pattern:t[0],width:Af,height:Nf}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function p$(t){let e,n;return e=new An({props:{pattern:t[0],width:Af,height:Nf}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function m$(t){let e,n;return e=new Fn({props:{pattern:t[0],audioFile:t[1],width:Af,height:Nf}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function Qh(t){let e,n,i,r,o,a;return{c(){e=k("div"),n=k("label"),i=ft(`Any final feedback?
        `),r=k("textarea")},m(f,l){K(f,e,l),y(e,n),y(n,i),y(n,r),rt(r,t[12]),o||(a=dt(r,"input",t[29]),o=!0)},p(f,l){l[0]&4096&&rt(r,f[12])},d(f){f&&j(e),o=!1,a()}}}function Jh(t){let e,n,i,r,o,a;return{c(){e=k("div"),e.textContent="Thanks for participating!",n=U(),i=k("div"),r=k("button"),r.textContent="Download results"},m(f,l){K(f,e,l),K(f,n,l),K(f,i,l),y(i,r),o||(a=dt(r,"click",t[19]),o=!0)},p:xt,d(f){f&&(j(e),j(n),j(i)),o=!1,a()}}}function td(t){let e,n,i;return{c(){e=k("button"),e.textContent="next step (PageDown)"},m(r,o){K(r,e,o),n||(i=dt(e,"click",t[18]),n=!0)},p:xt,d(r){r&&j(e),n=!1,i()}}}function g$(t){let e,n,i,r,o,a,f,l,s=t[3]==="demo"&&jh(t),u=t[3]==="tests"&&Zh(t),h=t[3]==="feedback"&&Qh(t),c=t[3]==="done"&&Jh(t),d=!t[15]&&t[3]!=="done"&&td(t);return{c(){e=k("main"),n=k("h2"),n.textContent="Study (Within-Participant Variance)",i=U(),s&&s.c(),r=U(),u&&u.c(),o=U(),h&&h.c(),a=U(),c&&c.c(),f=U(),d&&d.c(),B(e,"class","svelte-u6a8gr")},m(p,m){K(p,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),h&&h.m(e,null),y(e,a),c&&c.m(e,null),y(e,f),d&&d.m(e,null),l=!0},p(p,m){p[3]==="demo"?s?s.p(p,m):(s=jh(p),s.c(),s.m(e,r)):s&&(s.d(1),s=null),p[3]==="tests"?u?(u.p(p,m),m[0]&8&&Z(u,1)):(u=Zh(p),u.c(),Z(u,1),u.m(e,o)):u&&(Jt(),et(u,1,1,()=>{u=null}),te()),p[3]==="feedback"?h?h.p(p,m):(h=Qh(p),h.c(),h.m(e,a)):h&&(h.d(1),h=null),p[3]==="done"?c?c.p(p,m):(c=Jh(p),c.c(),c.m(e,f)):c&&(c.d(1),c=null),!p[15]&&p[3]!=="done"?d?d.p(p,m):(d=td(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},i(p){l||(Z(u),l=!0)},o(p){et(u),l=!1},d(p){p&&j(e),s&&s.d(),u&&u.d(),h&&h.d(),c&&c.d(),d&&d.d()}}}let ed=.5;const bl=20;let b$=6,_$=!0,y$=0,Af=600,Nf=100;function w$(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],f="start",l=0,s,u="",h="20-24",c="m",d="master",p="",m=0,g=0,w="",b=0,v,_={},x=[],M,$,S=!1,C=!1,D=!1,T="tick",L=bl,I=3,Y=[],E=[],z=0;const R=[];Ra(()=>{document.querySelector("html").addEventListener("keyup",J)});const Q=()=>{$=new kt({ratio:{firstVal:bl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,bl],direction:-1,reversalLimit:5,verbosity:1}}),$.init()};function V(){f==="start"?(n(2,a=_s(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,l=0)):f==="tests"?l<a.length?(n(17,T=a[l].stimulus),n(1,o=a[l].audioFile),H()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function H(){Q(),n(13,b=0),v=0,M=0,n(14,S=!0),E=[],x=[],s=new Date,F()}function F(){console.log("Starting trial "+b),_={},n(15,C=!0),W()}function W(){let ct=Math.round($.getLast("ratio"));ct=Math.random()<.5?ct:-ct,_.deviation=ct,n(20,L=ct),console.log("generated pattern",Y),n(16,D=!0),window.setTimeout(()=>{n(16,D=!1)},1e3)}function G(at){if(!C)return;n(15,C=!1),_.decisionChoice=at,_.errorCode=0;const ct=M;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&M++,_.errorCode==0&&($.next(ct!=M),x[x.length]=_),_.errorCode==0&&v++,n(13,b++,b),$.reversalLimitReached("ratio")?nt():F()}function nt(){n(14,S=!1),X(),E=[],z=$.getFinalVal("ratio");for(let ct=0;ct<x.length;ct++)E[ct]=x[ct].deviation;console.log(E);const at=new Date;R.push({encoding:T,audioFile:o,final:z,data:E,score:M,testNumber:l,trialCount:b+1,trials:x,validTrialCount:v+1,testTimeSeconds:(at-s)/1e3}),n(4,l++,l)}function J(at){switch(console.log(at.key),at.key){case"ArrowLeft":G(0);break;case"ArrowRight":G(1);break;case"PageDown":!C&&f!=="done"&&V()}}function X(){`${M}`,b+1,`${(M/(b+1)*100).toFixed(1)}${$.getFinalVal("ratio")}`}function q(){const at={demographics:{partID:u,partAge:h,partGender:c,partEduation:d,partMusicInstr:p,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:w},date:new Date().toISOString(),tests:R};console.log(at);const ct=JSON.stringify(at,void 0,2),zt=new Blob([ct],{type:"text/plain;charset=utf-8"});a2(zt,"results.json")}function N(){u=this.value,n(5,u)}function A(){h=Ln(this),n(6,h)}function P(){c=this.value,n(7,c)}function tt(){d=Ln(this),n(8,d)}function O(){p=this.value,n(9,p)}function ht(){m=ae(this.value),n(10,m)}function ot(){g=ae(this.value),n(11,g)}function pt(){w=this.value,n(12,w)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*ed),t.$$.dirty[0]&2097153&&(n(0,Y=Ii(b$,ed,I,i,_$,y$)),console.log("generated pattern",Y))},[Y,o,a,f,l,u,h,c,d,p,m,g,w,b,S,C,D,T,V,q,L,i,N,A,P,tt,O,ht,ot,pt]}class v$ extends Ut{constructor(e){super(),Ot(this,e,w$,g$,Pt,{},null,[-1,-1])}}function x$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){K(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:xt,o:xt,d(r){r&&j(e),t[6](null)}}}function $$(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:f=100}=e,l;bn(()=>{console.log(o),console.log(i);const u=Je({width:a,height:f,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Tu(i,{x:h=>h}),kf(i,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${c+1}`})]});n(2,l.textContent="",l),l.appendChild(u)});function s(u){$e[u?"unshift":"push"](()=>{l=u,n(2,l)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,f=u.height)},[a,f,l,i,r,o,s]}class M$ extends Ut{constructor(e){super(),Ot(this,e,$$,x$,Pt,{data:3,domain:4,title:5,width:0,height:1})}}function k$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){K(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:xt,o:xt,d(r){r&&j(e),t[5](null)}}}function S$(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;bn(()=>{const s=i.map(h=>({encoding:h.encoding,...f(h.finals)})),u=Je({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Ia(s,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),Su(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Mf([0])]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){const u=s.length,h=ni(s),p=1.96*(Xr(s)/Math.sqrt(u)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function l(s){$e[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,f,l]}class l2 extends Ut{constructor(e){super(),Ot(this,e,S$,k$,Pt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function T$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){K(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:xt,o:xt,d(r){r&&j(e),t[5](null)}}}function C$(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;bn(()=>{const s=i.map(h=>({encoding:h.encoding,...f(h.trialCounts)})),u=Je({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Ia(s,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),Su(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Mf([0])]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){const u=s.length,h=ni(s),p=1.96*(Xr(s)/Math.sqrt(u)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function l(s){$e[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,f,l]}class s2 extends Ut{constructor(e){super(),Ot(this,e,C$,T$,Pt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function nd(t,e,n){const i=t.slice();return i[8]=e[n],i}function id(t,e,n){const i=t.slice();return i[11]=e[n],i}function rd(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new M$({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=k("b"),i=ft(n),r=U(),ut(o.$$.fragment)},m(f,l){K(f,e,l),y(e,i),K(f,r,l),lt(o,f,l),a=!0},p(f,l){(!a||l&4)&&n!==(n=f[11].encoding+"")&&Xt(i,n);const s={};l&4&&(s.data=f[11].finals),l&4&&(s.title=f[11].encoding),l&2&&(s.domain=[0,f[1]]),o.$set(s)},i(f){a||(Z(o.$$.fragment,f),a=!0)},o(f){et(o.$$.fragment,f),a=!1},d(f){f&&(j(e),j(r)),st(o,f)}}}function od(t){let e,n,i,r=t[8].demographics.partID+"",o,a,f,l,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=k("div"),n=k("b"),i=ft("P"),o=ft(r),a=ft(":"),f=U(),l=new y2(!1),u=U(),l.a=u,ue(e,"text-align","left")},m(h,c){K(h,e,c),y(e,n),y(n,i),y(n,o),y(n,a),y(e,f),l.m(s,e),y(e,u)},p(h,c){c&1&&r!==(r=h[8].demographics.partID+"")&&Xt(o,r),c&1&&s!==(s=h[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&l.p(s)},d(h){h&&j(e)}}}function E$(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,b,v,_,x,M,$,S,C,D,T;h=new l2({props:{stimuli:t[2]}}),g=new s2({props:{stimuli:t[2]}});let L=We(t[2]),I=[];for(let R=0;R<L.length;R+=1)I[R]=rd(id(t,L,R));const Y=R=>et(I[R],1,1,()=>{I[R]=null});let E=We(t[0]),z=[];for(let R=0;R<E.length;R+=1)z[R]=od(nd(t,E,R));return{c(){e=k("main"),n=k("h2"),n.textContent="Analysis",i=U(),r=k("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=U(),a=k("input"),f=U(),l=k("div"),s=k("h3"),s.textContent="Mean and CI of Final Values",u=U(),ut(h.$$.fragment),c=U(),d=k("div"),p=k("h3"),p.textContent="Mean and CI of Trial Counts",m=U(),ut(g.$$.fragment),w=U(),b=k("div"),v=k("h3"),v.textContent="Final Values for Each Stimulus and All Participants",_=U();for(let R=0;R<I.length;R+=1)I[R].c();x=U(),M=k("div"),$=k("h3"),$.textContent="Feedback",S=U();for(let R=0;R<z.length;R+=1)z[R].c();B(a,"type","file"),B(a,"accept",".json"),a.multiple=!0},m(R,Q){K(R,e,Q),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,f),y(e,l),y(l,s),y(l,u),lt(h,l,null),y(e,c),y(e,d),y(d,p),y(d,m),lt(g,d,null),y(e,w),y(e,b),y(b,v),y(b,_);for(let V=0;V<I.length;V+=1)I[V]&&I[V].m(b,null);y(e,x),y(e,M),y(M,$),y(M,S);for(let V=0;V<z.length;V+=1)z[V]&&z[V].m(M,null);C=!0,D||(T=dt(a,"input",t[3]),D=!0)},p(R,[Q]){const V={};Q&4&&(V.stimuli=R[2]),h.$set(V);const H={};if(Q&4&&(H.stimuli=R[2]),g.$set(H),Q&6){L=We(R[2]);let F;for(F=0;F<L.length;F+=1){const W=id(R,L,F);I[F]?(I[F].p(W,Q),Z(I[F],1)):(I[F]=rd(W),I[F].c(),Z(I[F],1),I[F].m(b,null))}for(Jt(),F=L.length;F<I.length;F+=1)Y(F);te()}if(Q&1){E=We(R[0]);let F;for(F=0;F<E.length;F+=1){const W=nd(R,E,F);z[F]?z[F].p(W,Q):(z[F]=od(W),z[F].c(),z[F].m(M,null))}for(;F<z.length;F+=1)z[F].d(1);z.length=E.length}},i(R){if(!C){Z(h.$$.fragment,R),Z(g.$$.fragment,R);for(let Q=0;Q<L.length;Q+=1)Z(I[Q]);C=!0}},o(R){et(h.$$.fragment,R),et(g.$$.fragment,R),I=I.filter(Boolean);for(let Q=0;Q<I.length;Q+=1)et(I[Q]);C=!1},d(R){R&&j(e),st(h),st(g),Er(I,R),Er(z,R),D=!1,T()}}}function A$(t,e,n){let i,r,o,a=[];const f=async u=>{const h=[],c=[];for(const d of u.target.files){const p=await d.text();h.push(JSON.parse(p)),c.push(d.name)}n(0,a=h),console.log(a)},l=u=>{if(u.lenght===0)return[];const h=[];for(const c of u)for(const d of c.tests){let p=d.encoding;(d.encoding==="audio"||d.encoding==="waveform")&&(p=`${d.encoding} + ${d.audioFile.startsWith("./Fluid")?"piano":"drums"}`),h.push({...c.demographics,...d,date:c.date,testType:p})}return console.log(h),h},s=u=>{if(u.length===0)return[];const h=$l(u,c=>c.testType).map(([c,d])=>{const p=d.map(m=>m.final);return{encoding:c,finals:p,finalMean:ni(p),finalVar:Nr(p),trialCounts:d.map(m=>m.trialCount)}});return console.log(h),h};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=l(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ce(i.map(u=>Math.abs(u.final))))},[a,o,r,f,i]}class N$ extends Ut{constructor(e){super(),Ot(this,e,A$,E$,Pt,{})}}function D$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){K(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:xt,o:xt,d(r){r&&j(e),t[6](null)}}}function F$(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:f=300}=e,l;bn(()=>{console.log(o),console.log(i);const u=Je({width:a,height:f,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Tu(i,{x:h=>h,strokeWidth:.5}),kf(i,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${Math.floor(c/3)+1}-${c%3+1}`,fill:"black",stroke:"white"})]});n(2,l.textContent="",l),l.appendChild(u)});function s(u){$e[u?"unshift":"push"](()=>{l=u,n(2,l)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,f=u.height)},[a,f,l,i,r,o,s]}class L$ extends Ut{constructor(e){super(),Ot(this,e,F$,D$,Pt,{data:3,domain:4,title:5,width:0,height:1})}}function I$(t){let e,n,i;return{c(){e=k("div"),B(e,"width",n=t[0]+"px"),B(e,"height",i=t[1]+"px")},m(r,o){K(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&B(e,"width",n),o&2&&i!==(i=r[1]+"px")&&B(e,"height",i)},i:xt,o:xt,d(r){r&&j(e),t[5](null)}}}function R$(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;bn(()=>{const s=i.map(h=>({partID:h.partID,...f(h.finals)}));console.log(i,s);const u=Je({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((h,c)=>h.mean-c.mean).map(h=>h.partID)},marks:[Ia(s,{x:h=>h.mean,y:h=>h.partID,symbol:"diamond"}),Ia(i,{x:h=>h.mean,y:h=>h.partID}),Su(s,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),Mf([0])]});n(2,a.textContent="",a),a.appendChild(u)});function f(s){const u=s.length,h=ni(s),p=1.96*(Xr(s)/Math.sqrt(u)),m=h-p,g=h+p;return{mean:h,low:m,high:g}}function l(s){$e[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"partis"in s&&n(3,i=s.partis),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,f,l]}class qo extends Ut{constructor(e){super(),Ot(this,e,R$,I$,Pt,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function ad(t,e,n){const i=t.slice();return i[13]=e[n],i}function fd(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new L$({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=k("b"),i=ft(n),r=U(),ut(o.$$.fragment)},m(f,l){K(f,e,l),y(e,i),K(f,r,l),lt(o,f,l),a=!0},p(f,l){(!a||l&32)&&n!==(n=f[13].encoding+"")&&Xt(i,n);const s={};l&32&&(s.data=f[13].finals),l&32&&(s.title=f[13].encoding),l&16&&(s.domain=[0,f[4]]),o.$set(s)},i(f){a||(Z(o.$$.fragment,f),a=!0)},o(f){et(o.$$.fragment,f),a=!1},d(f){f&&(j(e),j(r)),st(o,f)}}}function P$(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,b,v,_,x,M,$,S,C,D,T,L,I,Y,E,z,R,Q,V,H,F,W,G,nt;h=new l2({props:{stimuli:t[5]}}),g=new s2({props:{stimuli:t[5]}}),x=new qo({props:{partis:t[3]}}),C=new qo({props:{partis:t[2]}}),I=new qo({props:{partis:t[0]}}),R=new qo({props:{partis:t[1]}});let J=We(t[5]),X=[];for(let N=0;N<J.length;N+=1)X[N]=fd(ad(t,J,N));const q=N=>et(X[N],1,1,()=>{X[N]=null});return{c(){e=k("main"),n=k("h2"),n.textContent="Analysis (Within-Participant Variance)",i=U(),r=k("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=U(),a=k("input"),f=U(),l=k("div"),s=k("h3"),s.textContent="Mean and CI of Final Values per Stimulus",u=U(),ut(h.$$.fragment),c=U(),d=k("div"),p=k("h3"),p.textContent="Mean and CI of Trial Counts per Stimulus",m=U(),ut(g.$$.fragment),w=U(),b=k("div"),v=k("h3"),v.textContent="Mean and CI of Final Values per Participant",_=U(),ut(x.$$.fragment),M=U(),$=k("h4"),$.textContent="Only Audio",S=U(),ut(C.$$.fragment),D=U(),T=k("h4"),T.textContent="Only Color",L=U(),ut(I.$$.fragment),Y=U(),E=k("h4"),E.textContent="Only Waveform",z=U(),ut(R.$$.fragment),Q=U(),V=k("div"),H=k("h3"),H.textContent="Final Values for Each Stimulus and All Participants",F=U();for(let N=0;N<X.length;N+=1)X[N].c();B(a,"type","file"),B(a,"accept",".json"),a.multiple=!0},m(N,A){K(N,e,A),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,f),y(e,l),y(l,s),y(l,u),lt(h,l,null),y(e,c),y(e,d),y(d,p),y(d,m),lt(g,d,null),y(e,w),y(e,b),y(b,v),y(b,_),lt(x,b,null),y(b,M),y(b,$),y(b,S),lt(C,b,null),y(b,D),y(b,T),y(b,L),lt(I,b,null),y(b,Y),y(b,E),y(b,z),lt(R,b,null),y(e,Q),y(e,V),y(V,H),y(V,F);for(let P=0;P<X.length;P+=1)X[P]&&X[P].m(V,null);W=!0,G||(nt=dt(a,"input",t[6]),G=!0)},p(N,[A]){const P={};A&32&&(P.stimuli=N[5]),h.$set(P);const tt={};A&32&&(tt.stimuli=N[5]),g.$set(tt);const O={};A&8&&(O.partis=N[3]),x.$set(O);const ht={};A&4&&(ht.partis=N[2]),C.$set(ht);const ot={};A&1&&(ot.partis=N[0]),I.$set(ot);const pt={};if(A&2&&(pt.partis=N[1]),R.$set(pt),A&48){J=We(N[5]);let at;for(at=0;at<J.length;at+=1){const ct=ad(N,J,at);X[at]?(X[at].p(ct,A),Z(X[at],1)):(X[at]=fd(ct),X[at].c(),Z(X[at],1),X[at].m(V,null))}for(Jt(),at=J.length;at<X.length;at+=1)q(at);te()}},i(N){if(!W){Z(h.$$.fragment,N),Z(g.$$.fragment,N),Z(x.$$.fragment,N),Z(C.$$.fragment,N),Z(I.$$.fragment,N),Z(R.$$.fragment,N);for(let A=0;A<J.length;A+=1)Z(X[A]);W=!0}},o(N){et(h.$$.fragment,N),et(g.$$.fragment,N),et(x.$$.fragment,N),et(C.$$.fragment,N),et(I.$$.fragment,N),et(R.$$.fragment,N),X=X.filter(Boolean);for(let A=0;A<X.length;A+=1)et(X[A]);W=!1},d(N){N&&j(e),st(h),st(g),st(x),st(C),st(I),st(R),Er(X,N),G=!1,nt()}}}function O$(t,e,n){let i,r,o,a,f,l,s,u=[];const h=async m=>{const g=[],w=[];for(const b of m.target.files){const v=await b.text();g.push(JSON.parse(v)),w.push(b.name)}n(7,u=g),console.log(u)},c=m=>{if(m.lenght===0)return[];const g=[];for(const w of m)for(const b of w.tests){let v=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(v=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({...w.demographics,...b,date:w.date,testType:v})}return console.log(g),g},d=m=>{if(m.length===0)return[];const g=$l(m,w=>w.testType).map(([w,b])=>{const v=b.map(_=>_.final);return{encoding:w,finals:v,finalMean:ni(v),finalVar:Nr(v),trialCounts:b.map(_=>_.trialCount)}});return console.log(g),g},p=(m,g)=>{if(m.length===0)return[];g&&(m=m.filter(b=>b.testType===g));const w=$l(m,b=>b.partID).map(([b,v])=>{const _=v.map(x=>x.final);return{partID:b,finals:_,finalMean:ni(_),finalVar:Nr(_),trialCounts:v.map(x=>x.trialCount)}});return console.log(w),w};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=c(u)),t.$$.dirty&256&&n(5,r=d(i)),t.$$.dirty&256&&n(4,o=ce(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=p(i)),t.$$.dirty&256&&n(2,f=p(i,"audio + piano")),t.$$.dirty&256&&n(1,l=p(i,"waveform + piano")),t.$$.dirty&256&&n(0,s=p(i,"color"))},[s,l,f,a,o,r,h,u,i]}class U$ extends Ut{constructor(e){super(),Ot(this,e,O$,P$,Pt,{})}}function ld(t,e,n){const i=t.slice();return i[8]=e[n],i}function sd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=k("option"),i=ft(n),e.__value=t[8],rt(e,e.__value)},m(r,o){K(r,e,o),y(e,i)},p:xt,d(r){r&&j(e)}}}function B$(t){let e,n,i,r,o,a,f,l,s=(t[1]*1e3).toFixed(1)+"",u,h,c,d,p,m,g,w,b,v,_,x,M,$,S,C,D,T,L,I,Y,E,z,R,Q,V,H,F,W,G,nt,J,X,q,N=We(t[5]),A=[];for(let P=0;P<N.length;P+=1)A[P]=sd(ld(t,N,P));return M=new Qi({props:{pattern:t[3],audioFile:t[2]}}),S=new Qi({props:{pattern:t[4],audioFile:t[2]}}),D=new Fn({props:{pattern:t[3],audioFile:t[2],width:xn,height:$n}}),L=new Fn({props:{pattern:t[4],audioFile:t[2],width:xn,height:$n}}),Y=new An({props:{pattern:t[3],width:xn,height:$n}}),z=new An({props:{pattern:t[4],width:xn,height:$n}}),Q=new Nn({props:{pattern:t[3],width:xn,height:$n}}),H=new Nn({props:{pattern:t[4],width:xn,height:$n}}),W=new Dn({props:{pattern:t[3],width:xn,height:$n}}),nt=new Dn({props:{pattern:t[4],width:xn,height:$n}}),{c(){e=k("main"),n=k("h2"),n.textContent="Examples",i=U(),r=k("div"),o=k("label"),a=ft(`deviation
      `),f=k("input"),l=ft(`
      (`),u=ft(s),h=ft(" milliseconds)"),c=U(),d=k("label"),p=ft(`instrument sample:
      `),m=k("select");for(let P=0;P<A.length;P+=1)A[P].c();g=U(),w=k("div"),b=k("h2"),b.textContent="early fourth note",v=U(),_=k("h2"),_.textContent="late fourth note",x=U(),ut(M.$$.fragment),$=U(),ut(S.$$.fragment),C=U(),ut(D.$$.fragment),T=U(),ut(L.$$.fragment),I=U(),ut(Y.$$.fragment),E=U(),ut(z.$$.fragment),R=U(),ut(Q.$$.fragment),V=U(),ut(H.$$.fragment),F=U(),ut(W.$$.fragment),G=U(),ut(nt.$$.fragment),B(f,"type","range"),B(f,"min","0"),B(f,"max","20"),B(f,"step","1"),B(o,"class","svelte-1kjj0oz"),t[2]===void 0&&Ne(()=>t[7].call(m)),B(d,"class","svelte-1kjj0oz"),B(w,"class","stimuli svelte-1kjj0oz")},m(P,tt){K(P,e,tt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,f),rt(f,t[0]),y(o,l),y(o,u),y(o,h),y(r,c),y(r,d),y(d,p),y(d,m);for(let O=0;O<A.length;O+=1)A[O]&&A[O].m(m,null);Vt(m,t[2],!0),y(e,g),y(e,w),y(w,b),y(w,v),y(w,_),y(w,x),lt(M,w,null),y(w,$),lt(S,w,null),y(w,C),lt(D,w,null),y(w,T),lt(L,w,null),y(w,I),lt(Y,w,null),y(w,E),lt(z,w,null),y(w,R),lt(Q,w,null),y(w,V),lt(H,w,null),y(w,F),lt(W,w,null),y(w,G),lt(nt,w,null),J=!0,X||(q=[dt(f,"change",t[6]),dt(f,"input",t[6]),dt(m,"change",t[7])],X=!0)},p(P,[tt]){if(tt&1&&rt(f,P[0]),(!J||tt&2)&&s!==(s=(P[1]*1e3).toFixed(1)+"")&&Xt(u,s),tt&32){N=We(P[5]);let qt;for(qt=0;qt<N.length;qt+=1){const ee=ld(P,N,qt);A[qt]?A[qt].p(ee,tt):(A[qt]=sd(ee),A[qt].c(),A[qt].m(m,null))}for(;qt<A.length;qt+=1)A[qt].d(1);A.length=N.length}tt&36&&Vt(m,P[2]);const O={};tt&8&&(O.pattern=P[3]),tt&4&&(O.audioFile=P[2]),M.$set(O);const ht={};tt&16&&(ht.pattern=P[4]),tt&4&&(ht.audioFile=P[2]),S.$set(ht);const ot={};tt&8&&(ot.pattern=P[3]),tt&4&&(ot.audioFile=P[2]),D.$set(ot);const pt={};tt&16&&(pt.pattern=P[4]),tt&4&&(pt.audioFile=P[2]),L.$set(pt);const at={};tt&8&&(at.pattern=P[3]),Y.$set(at);const ct={};tt&16&&(ct.pattern=P[4]),z.$set(ct);const zt={};tt&8&&(zt.pattern=P[3]),Q.$set(zt);const me={};tt&16&&(me.pattern=P[4]),H.$set(me);const gi={};tt&8&&(gi.pattern=P[3]),W.$set(gi);const bi={};tt&16&&(bi.pattern=P[4]),nt.$set(bi)},i(P){J||(Z(M.$$.fragment,P),Z(S.$$.fragment,P),Z(D.$$.fragment,P),Z(L.$$.fragment,P),Z(Y.$$.fragment,P),Z(z.$$.fragment,P),Z(Q.$$.fragment,P),Z(H.$$.fragment,P),Z(W.$$.fragment,P),Z(nt.$$.fragment,P),J=!0)},o(P){et(M.$$.fragment,P),et(S.$$.fragment,P),et(D.$$.fragment,P),et(L.$$.fragment,P),et(Y.$$.fragment,P),et(z.$$.fragment,P),et(Q.$$.fragment,P),et(H.$$.fragment,P),et(W.$$.fragment,P),et(nt.$$.fragment,P),J=!1},d(P){P&&j(e),Er(A,P),st(M),st(S),st(D),st(L),st(Y),st(z),st(Q),st(H),st(W),st(nt),X=!1,ke(q)}}}let xn=600,$n=100,_l=.5,ud=6,cd=3,hd=!0,dd=0;function z$(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,f=[],l=[];function s(){a=ae(this.value),n(0,a)}function u(){o=Ln(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*_l),t.$$.dirty&2&&n(3,f=Ii(ud,_l,cd,-i,hd,dd)),t.$$.dirty&2&&n(4,l=Ii(ud,_l,cd,i,hd,dd))},[a,i,o,f,l,r,s,u]}class q$ extends Ut{constructor(e){super(),Ot(this,e,z$,B$,Pt,{})}}function Ko(t,e){return new URLSearchParams(t.location.search).get(e)}function pd(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,b,v;return{c(){e=k("div"),n=k("div"),i=k("p"),i.textContent=`Please click + or - until this rectangle has the size of a credit
          card.`,r=U(),o=k("p"),a=k("button"),a.textContent="+",f=U(),l=k("button"),l.textContent="-",s=U(),u=wl("svg"),h=wl("rect"),g=U(),w=k("div"),w.textContent=`Please also set your screen brightness and audio volume to comfortable
        levels and avoid sunlight or artificial light reflecting from your
        screen.`,B(h,"width",c=t[0]*.52),B(h,"height",d=t[18]*2),B(h,"fill","#ccc"),B(h,"rx","8"),B(u,"width",p=t[0]*.52+"px"),B(u,"height",m=t[18]*2+"px")},m(_,x){K(_,e,x),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,f),y(o,l),y(n,s),y(n,u),y(u,h),y(e,g),y(e,w),b||(v=[dt(a,"click",t[25]),dt(l,"click",t[26])],b=!0)},p(_,x){x[0]&1&&c!==(c=_[0]*.52)&&B(h,"width",c),x[0]&262144&&d!==(d=_[18]*2)&&B(h,"height",d),x[0]&1&&p!==(p=_[0]*.52+"px")&&B(u,"width",p),x[0]&262144&&m!==(m=_[18]*2+"px")&&B(u,"height",m)},d(_){_&&j(e),b=!1,ke(v)}}}function md(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,b,v,_,x,M,$,S,C,D,T,L,I,Y,E,z,R,Q,V,H,F,W,G;return{c(){e=k("div"),n=k("label"),i=ft(`Age in years:
        `),r=k("select"),o=k("option"),o.textContent="20-24",a=k("option"),a.textContent="25-29",f=k("option"),f.textContent="30-34",l=k("option"),l.textContent="35-39",s=k("option"),s.textContent="40-44",u=k("option"),u.textContent="45-49",h=k("option"),h.textContent="50-54",c=k("option"),c.textContent="55-60",d=U(),p=k("label"),m=ft(`Gender:
        `),g=k("input"),w=U(),b=k("label"),v=ft(`Highest finished education (select the best fitting one):
        `),_=k("select"),x=k("option"),x.textContent="none",M=k("option"),M.textContent="high school",$=k("option"),$.textContent="bachelor",S=k("option"),S.textContent="master",C=k("option"),C.textContent="phd",D=U(),T=k("label"),L=ft(`Which music instruments do you play? Please separate by comma, if you do
        not play any, write 'none'.
        `),I=k("input"),Y=U(),E=k("label"),z=ft(`For how many years do you roughly play it/them?
        `),R=k("input"),Q=U(),V=k("label"),H=ft(`How many years of experience do you have with information visualization?
        `),F=k("input"),o.__value="20-24",rt(o,o.__value),a.__value="25-29",rt(a,a.__value),f.__value="30-34",rt(f,f.__value),l.__value="35-39",rt(l,l.__value),s.__value="40-44",rt(s,s.__value),u.__value="45-49",rt(u,u.__value),h.__value="50-54",rt(h,h.__value),c.__value="55-60",rt(c,c.__value),t[6]===void 0&&Ne(()=>t[27].call(r)),B(n,"class","svelte-11tlnfp"),B(g,"type","text"),B(g,"placeholder","m, f, d, or self-describe"),B(p,"class","svelte-11tlnfp"),x.__value="none",rt(x,x.__value),M.__value="highs",rt(M,M.__value),$.__value="bachelor",rt($,$.__value),S.__value="master",rt(S,S.__value),C.__value="phd",rt(C,C.__value),t[8]===void 0&&Ne(()=>t[29].call(_)),B(b,"class","svelte-11tlnfp"),B(I,"type","text"),B(I,"placeholder","free text"),B(T,"class","svelte-11tlnfp"),B(R,"type","number"),B(R,"min","0"),B(R,"step","1"),B(E,"class","svelte-11tlnfp"),B(F,"type","number"),B(F,"min","0"),B(F,"step","1"),B(V,"class","svelte-11tlnfp"),B(e,"class","demo-form svelte-11tlnfp")},m(nt,J){K(nt,e,J),y(e,n),y(n,i),y(n,r),y(r,o),y(r,a),y(r,f),y(r,l),y(r,s),y(r,u),y(r,h),y(r,c),Vt(r,t[6],!0),y(e,d),y(e,p),y(p,m),y(p,g),rt(g,t[7]),y(e,w),y(e,b),y(b,v),y(b,_),y(_,x),y(_,M),y(_,$),y(_,S),y(_,C),Vt(_,t[8],!0),y(e,D),y(e,T),y(T,L),y(T,I),rt(I,t[9]),y(e,Y),y(e,E),y(E,z),y(E,R),rt(R,t[10]),y(e,Q),y(e,V),y(V,H),y(V,F),rt(F,t[11]),W||(G=[dt(r,"change",t[27]),dt(g,"input",t[28]),dt(_,"change",t[29]),dt(I,"input",t[30]),dt(R,"input",t[31]),dt(F,"input",t[32])],W=!0)},p(nt,J){J[0]&64&&Vt(r,nt[6]),J[0]&128&&g.value!==nt[7]&&rt(g,nt[7]),J[0]&256&&Vt(_,nt[8]),J[0]&512&&I.value!==nt[9]&&rt(I,nt[9]),J[0]&1024&&ae(R.value)!==nt[10]&&rt(R,nt[10]),J[0]&2048&&ae(F.value)!==nt[11]&&rt(F,nt[11])},d(nt){nt&&j(e),W=!1,ke(G)}}}function gd(t){let e,n,i,r,o,a,f=t[14]&&bd(t);return{c(){e=k("p"),e.textContent=`You will be presented with a sequence of six piano notes which should have
      equal distances in time.`,n=U(),i=k("p"),i.innerHTML=`The <b>fourth note</b> might be played <b>too early or too late</b>, also
      affecting the ones after.`,r=U(),f&&f.c(),o=gn()},m(l,s){K(l,e,s),K(l,n,s),K(l,i,s),K(l,r,s),f&&f.m(l,s),K(l,o,s),a=!0},p(l,s){l[14]?f?(f.p(l,s),s[0]&16384&&Z(f,1)):(f=bd(l),f.c(),Z(f,1),f.m(o.parentNode,o)):f&&(Jt(),et(f,1,1,()=>{f=null}),te())},i(l){a||(Z(f),a=!0)},o(l){et(f),a=!1},d(l){l&&(j(e),j(n),j(i),j(r),j(o)),f&&f.d(l)}}}function bd(t){let e,n,i,r,o=t[5]+1+"",a,f,l=t[3].length+"",s,u,h,c,d=t[13]+1+"",p,m,g,w,b,v;const _=[W$,Y$],x=[];function M($,S){return $[17]==="audio"?0:$[16]===!1?1:-1}return~(g=M(t))&&(w=x[g]=_[g](t)),{c(){e=k("p"),e.textContent=`Use the arrow keys on your keyboard: left for too early, right for too
        late.`,n=U(),i=k("p"),r=ft("Test number "),a=ft(o),f=ft(" / "),s=ft(l),u=U(),h=k("p"),c=ft("Trial number "),p=ft(d),m=U(),w&&w.c(),b=gn()},m($,S){K($,e,S),K($,n,S),K($,i,S),y(i,r),y(i,a),y(i,f),y(i,s),K($,u,S),K($,h,S),y(h,c),y(h,p),K($,m,S),~g&&x[g].m($,S),K($,b,S),v=!0},p($,S){(!v||S[0]&32)&&o!==(o=$[5]+1+"")&&Xt(a,o),(!v||S[0]&8)&&l!==(l=$[3].length+"")&&Xt(s,l),(!v||S[0]&8192)&&d!==(d=$[13]+1+"")&&Xt(p,d);let C=g;g=M($),g===C?~g&&x[g].p($,S):(w&&(Jt(),et(x[C],1,1,()=>{x[C]=null}),te()),~g?(w=x[g],w?w.p($,S):(w=x[g]=_[g]($),w.c()),Z(w,1),w.m(b.parentNode,b)):w=null)},i($){v||(Z(w),v=!0)},o($){et(w),v=!1},d($){$&&(j(e),j(n),j(i),j(u),j(h),j(m),j(b)),~g&&x[g].d($)}}}function Y$(t){let e,n,i,r;const o=[X$,G$,V$,H$],a=[];function f(l,s){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=gn()},m(l,s){~e&&a[e].m(l,s),K(l,i,s),r=!0},p(l,s){let u=e;e=f(l),e===u?~e&&a[e].p(l,s):(n&&(Jt(),et(a[u],1,1,()=>{a[u]=null}),te()),~e?(n=a[e],n?n.p(l,s):(n=a[e]=o[e](l),n.c()),Z(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(Z(n),r=!0)},o(l){et(n),r=!1},d(l){l&&j(i),~e&&a[e].d(l)}}}function W$(t){let e,n,i,r;return e=new Qi({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],audioFile:t[2],currentTrialNumber:t[13]}}),{c(){ut(e.$$.fragment),n=U(),i=k("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),K(o,n,a),K(o,i,a),r=!0},p(o,a){const f={};a[0]&2&&(f.pattern=[...o[1].slice(0,o[1].length-1),o[1].at(-1)+Math.random()*1e-4]),a[0]&4&&(f.audioFile=o[2]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(Z(e.$$.fragment,o),r=!0)},o(o){et(e.$$.fragment,o),r=!1},d(o){o&&(j(n),j(i)),st(e,o)}}}function H$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new Dn({props:{pattern:t[19],width:t[0]/2,height:t[18]/2}}),r=new Dn({props:{pattern:t[20],width:t[0]/2,height:t[18]/2}}),u=new Dn({props:{pattern:t[1],width:t[0],height:t[18]}}),{c(){e=k("div"),ut(n.$$.fragment),i=U(),ut(r.$$.fragment),o=U(),a=k("div"),a.textContent="Example for early",f=U(),l=k("div"),l.textContent="Example for late",s=U(),ut(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){K(c,e,d),lt(n,e,null),y(e,i),lt(r,e,null),y(e,o),y(e,a),y(e,f),y(e,l),K(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(Z(n.$$.fragment,c),Z(r.$$.fragment,c),Z(u.$$.fragment,c),h=!0)},o(c){et(n.$$.fragment,c),et(r.$$.fragment,c),et(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function V$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new Nn({props:{pattern:t[19],width:t[0]/2,height:t[18]/2}}),r=new Nn({props:{pattern:t[20],width:t[0]/2,height:t[18]/2}}),u=new Nn({props:{pattern:t[1],width:t[0],height:t[18]}}),{c(){e=k("div"),ut(n.$$.fragment),i=U(),ut(r.$$.fragment),o=U(),a=k("div"),a.textContent="Example for early",f=U(),l=k("div"),l.textContent="Example for late",s=U(),ut(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){K(c,e,d),lt(n,e,null),y(e,i),lt(r,e,null),y(e,o),y(e,a),y(e,f),y(e,l),K(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(Z(n.$$.fragment,c),Z(r.$$.fragment,c),Z(u.$$.fragment,c),h=!0)},o(c){et(n.$$.fragment,c),et(r.$$.fragment,c),et(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function G$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new An({props:{pattern:t[19],width:t[0]/2,height:t[18]/2}}),r=new An({props:{pattern:t[20],width:t[0]/2,height:t[18]/2}}),u=new An({props:{pattern:t[1],width:t[0],height:t[18]}}),{c(){e=k("div"),ut(n.$$.fragment),i=U(),ut(r.$$.fragment),o=U(),a=k("div"),a.textContent="Example for early",f=U(),l=k("div"),l.textContent="Example for late",s=U(),ut(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){K(c,e,d),lt(n,e,null),y(e,i),lt(r,e,null),y(e,o),y(e,a),y(e,f),y(e,l),K(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(Z(n.$$.fragment,c),Z(r.$$.fragment,c),Z(u.$$.fragment,c),h=!0)},o(c){et(n.$$.fragment,c),et(r.$$.fragment,c),et(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function X$(t){let e,n,i,r,o,a,f,l,s,u,h;return n=new Fn({props:{pattern:t[19],audioFile:t[2],width:t[0]/2,height:t[18]/2}}),r=new Fn({props:{pattern:t[20],audioFile:t[2],width:t[0]/2,height:t[18]/2}}),u=new Fn({props:{pattern:t[1],audioFile:t[2],width:t[0],height:t[18]}}),{c(){e=k("div"),ut(n.$$.fragment),i=U(),ut(r.$$.fragment),o=U(),a=k("div"),a.textContent="Example for early",f=U(),l=k("div"),l.textContent="Example for late",s=U(),ut(u.$$.fragment),B(e,"class","vis-example svelte-11tlnfp")},m(c,d){K(c,e,d),lt(n,e,null),y(e,i),lt(r,e,null),y(e,o),y(e,a),y(e,f),y(e,l),K(c,s,d),lt(u,c,d),h=!0},p(c,d){const p={};d[0]&4&&(p.audioFile=c[2]),d[0]&1&&(p.width=c[0]/2),d[0]&262144&&(p.height=c[18]/2),n.$set(p);const m={};d[0]&4&&(m.audioFile=c[2]),d[0]&1&&(m.width=c[0]/2),d[0]&262144&&(m.height=c[18]/2),r.$set(m);const g={};d[0]&2&&(g.pattern=c[1]),d[0]&4&&(g.audioFile=c[2]),d[0]&1&&(g.width=c[0]),d[0]&262144&&(g.height=c[18]),u.$set(g)},i(c){h||(Z(n.$$.fragment,c),Z(r.$$.fragment,c),Z(u.$$.fragment,c),h=!0)},o(c){et(n.$$.fragment,c),et(r.$$.fragment,c),et(u.$$.fragment,c),h=!1},d(c){c&&(j(e),j(s)),st(n),st(r),st(u,c)}}}function _d(t){let e,n,i,r,o,a;return{c(){e=k("div"),n=k("label"),i=ft(`Do you have any final feedback/comments?
        `),r=k("textarea")},m(f,l){K(f,e,l),y(e,n),y(n,i),y(n,r),rt(r,t[12]),o||(a=dt(r,"input",t[33]),o=!0)},p(f,l){l[0]&4096&&rt(r,f[12])},d(f){f&&j(e),o=!1,a()}}}function yd(t){let e,n,i;return{c(){e=k("div"),e.textContent="Thanks for participating!",n=U(),i=k("a"),i.textContent="click here to get your compensation",B(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){K(r,e,o),K(r,n,o),K(r,i,o)},d(r){r&&(j(e),j(n),j(i))}}}function wd(t){let e,n,i;return{c(){e=k("button"),e.textContent="next step",B(e,"class","next-btn svelte-11tlnfp")},m(r,o){K(r,e,o),n||(i=dt(e,"click",t[21]),n=!0)},p:xt,d(r){r&&j(e),n=!1,i()}}}function j$(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p=t[4]==="start"&&pd(t),m=t[4]==="demo"&&md(t),g=t[4]==="tests"&&gd(t),w=t[4]==="feedback"&&_d(t),b=t[4]==="done"&&yd(),v=!t[15]&&t[4]!=="done"&&wd(t);return{c(){e=k("main"),n=k("h2"),n.textContent="Study (Prolific)",i=U(),p&&p.c(),r=U(),m&&m.c(),o=U(),g&&g.c(),a=U(),w&&w.c(),f=U(),b&&b.c(),l=U(),v&&v.c(),s=U(),u=k("button"),u.textContent="asdasdsa",B(e,"class","svelte-11tlnfp")},m(_,x){K(_,e,x),y(e,n),y(e,i),p&&p.m(e,null),y(e,r),m&&m.m(e,null),y(e,o),g&&g.m(e,null),y(e,a),w&&w.m(e,null),y(e,f),b&&b.m(e,null),y(e,l),v&&v.m(e,null),y(e,s),y(e,u),h=!0,c||(d=dt(u,"click",t[22]),c=!0)},p(_,x){_[4]==="start"?p?p.p(_,x):(p=pd(_),p.c(),p.m(e,r)):p&&(p.d(1),p=null),_[4]==="demo"?m?m.p(_,x):(m=md(_),m.c(),m.m(e,o)):m&&(m.d(1),m=null),_[4]==="tests"?g?(g.p(_,x),x[0]&16&&Z(g,1)):(g=gd(_),g.c(),Z(g,1),g.m(e,a)):g&&(Jt(),et(g,1,1,()=>{g=null}),te()),_[4]==="feedback"?w?w.p(_,x):(w=_d(_),w.c(),w.m(e,f)):w&&(w.d(1),w=null),_[4]==="done"?b||(b=yd(),b.c(),b.m(e,l)):b&&(b.d(1),b=null),!_[15]&&_[4]!=="done"?v?v.p(_,x):(v=wd(_),v.c(),v.m(e,s)):v&&(v.d(1),v=null)},i(_){h||(Z(g),h=!0)},o(_){et(g),h=!1},d(_){_&&j(e),p&&p.d(),m&&m.d(),g&&g.d(),w&&w.d(),b&&b.d(),v&&v.d(),c=!1,d()}}}const Z$="/store";let vd=.5;const yl=20;let K$=6,Q$=!0,J$=0;function tM(t,e,n){let i,r,o=Ko(window,"PROLIFIC_PID"),a=Ko(window,"STUDY_ID"),f=Ko(window,"SESSION_ID");console.log({partID:o,studyID:a,sessionID:f});const l=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let s=l[0],u=[{stimulus:"audio",audioFile:l[0]},{stimulus:"waveform",audioFile:l[0]},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],c=[0,.5,1,1.6,2.1,2.6];let d="start",p=0,m,g="",w="",b="",v="",_=0,x=0,M="",$=0,S,C={},D=[],T,L,I=!1,Y=!1,E=!1,z="tick",R=yl,Q=3,V=600,H=[],F=[],W=0;const G=[];Ra(()=>{document.querySelector("html").addEventListener("keyup",tt)});const nt=()=>{L=new kt({ratio:{firstVal:yl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,yl],direction:-1,reversalLimit:5,verbosity:1}}),L.init()};function J(){d==="start"?(n(3,u=_s(u)),n(4,d="demo")):d==="demo"?g==""||w==""||b==""||v==""?alert("please fill the form first"):(n(4,d="tests"),n(5,p=0)):d==="tests"?(ht(),p<u.length?(n(17,z=u[p].stimulus),n(2,s=u[p].audioFile),X()):n(4,d="feedback")):d==="feedback"&&(ht(),n(4,d="done"))}function X(){nt(),n(13,$=0),S=0,T=0,n(14,I=!0),F=[],D=[],m=new Date,q()}function q(){console.log("Starting trial "+$),C={},n(15,Y=!0),N()}function N(){let Yt=Math.round(L.getLast("ratio"));Yt=Math.random()<.5?Yt:-Yt,C.deviation=Yt,n(23,R=Yt),console.log("generated pattern",H),n(16,E=!0),window.setTimeout(()=>{n(16,E=!1)},1e3)}function A(ee){if(!Y)return;n(15,Y=!1),C.decisionChoice=ee,C.errorCode=0;const Yt=T;(C.decisionChoice==0&&C.deviation<0||C.decisionChoice==1&&C.deviation>0)&&C.errorCode==0&&T++,C.errorCode==0&&(L.next(Yt!=T),D[D.length]=C),C.errorCode==0&&S++,n(13,$++,$),L.reversalLimitReached("ratio")?P():q()}function P(){n(14,I=!1),O(),F=[],W=L.getFinalVal("ratio");for(let Yt=0;Yt<D.length;Yt++)F[Yt]=D[Yt].deviation;console.log(F);const ee=new Date;G.push({encoding:z,audioFile:s,final:W,data:F,score:T,testNumber:p,trialCount:$+1,trials:D,validTrialCount:S+1,testTimeSeconds:(ee-m)/1e3}),n(5,p++,p)}function tt(ee){switch(ee.key){case"ArrowLeft":Y&&A(0);break;case"ArrowRight":Y&&A(1);break;case"PageDown":!Y&&d!=="done"&&J()}}function O(){`${T}`,$+1,`${(T/($+1)*100).toFixed(1)}${L.getFinalVal("ratio")}`}function ht(){const ee={studyStep:d,demographics:{partID:o,studyID:a,sessionID:f,partAge:g,partGender:w,partEduation:b,partMusicInstr:v,partMusicInstrYears:_,partVisExperienceYears:x,partFeedback:M,visWidth:V},date:new Date().toISOString(),tests:G};console.log("saving data",ee);const Yt=JSON.stringify(ee,void 0,2);fetch(Z$,{method:"POST",headers:{"Content-Type":"application/json"},body:Yt}).then(Df=>{console.log("Data saved:",Df)})}const ot=()=>n(0,V*=1.05),pt=()=>n(0,V*=.95);function at(){g=Ln(this),n(6,g)}function ct(){w=this.value,n(7,w)}function zt(){b=Ln(this),n(8,b)}function me(){v=this.value,n(9,v)}function gi(){_=ae(this.value),n(10,_)}function bi(){x=ae(this.value),n(11,x)}function qt(){M=this.value,n(12,M)}return t.$$.update=()=>{t.$$.dirty[0]&8388608&&n(24,i=R/100*vd),t.$$.dirty[0]&1&&n(18,r=V/6),t.$$.dirty[0]&16777218&&(n(1,H=Ii(K$,vd,Q,i,Q$,J$)),console.log("generated pattern",H))},[V,H,s,u,d,p,g,w,b,v,_,x,M,$,I,Y,E,z,r,h,c,J,ht,R,i,ot,pt,at,ct,zt,me,gi,bi,qt]}class eM extends Ut{constructor(e){super(),Ot(this,e,tM,j$,Pt,{},null,[-1,-1])}}function nM(t){let e,n;return e=new eM({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function iM(t){let e,n;return e=new U$({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function rM(t){let e,n;return e=new v$({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function oM(t){let e,n;return e=new N$({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function aM(t){let e,n;return e=new s$({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function fM(t){let e,n;return e=new q$({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function lM(t){let e,n;return e=new Zx({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Z(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function sM(t){let e,n,i,r,o,a,f,l,s,u,h,c,d,p,m,g,w,b,v,_,x,M,$;const S=[lM,fM,aM,oM,rM,iM,nM],C=[];function D(T,L){return T[0]==="playground"?0:T[0]==="examples"?1:T[0]==="study"?2:T[0]==="analysis"?3:T[0]==="study_variance"?4:T[0]==="analysis_variance"?5:T[0]==="study_prolific"?6:-1}return~(v=D(t))&&(_=C[v]=S[v](t)),{c(){e=k("main"),n=k("h1"),n.textContent="Rhythm Error Sensitivity Study",i=U(),r=k("div"),o=k("button"),o.textContent="Playground",a=U(),f=k("button"),f.textContent="Examples",l=U(),s=k("button"),s.textContent="Study",u=U(),h=k("button"),h.textContent="Analysis",c=U(),d=k("button"),d.textContent="Study (variance)",p=U(),m=k("button"),m.textContent="Analysis (variance)",g=U(),w=k("button"),w.textContent="Study (Prolific)",b=U(),_&&_.c()},m(T,L){K(T,e,L),y(e,n),y(e,i),y(e,r),y(r,o),y(r,a),y(r,f),y(r,l),y(r,s),y(r,u),y(r,h),y(r,c),y(r,d),y(r,p),y(r,m),y(r,g),y(r,w),y(e,b),~v&&C[v].m(e,null),x=!0,M||($=[dt(o,"click",t[1]),dt(f,"click",t[2]),dt(s,"click",t[3]),dt(h,"click",t[4]),dt(d,"click",t[5]),dt(m,"click",t[6]),dt(w,"click",t[7])],M=!0)},p(T,[L]){let I=v;v=D(T),v!==I&&(_&&(Jt(),et(C[I],1,1,()=>{C[I]=null}),te()),~v?(_=C[v],_||(_=C[v]=S[v](T),_.c()),Z(_,1),_.m(e,null)):_=null)},i(T){x||(Z(_),x=!0)},o(T){et(_),x=!1},d(T){T&&j(e),~v&&C[v].d(),M=!1,ke($)}}}function uM(t,e,n){let i=Ko(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific")]}class cM extends Ut{constructor(e){super(),Ot(this,e,uM,sM,Pt,{})}}new cM({target:document.getElementById("app")});export{Sd as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-2snpwCTj.js","assets/utilities-auWVgT72.js","assets/index-TlZAmOeR.js","assets/index-PYmv6CRN.js","assets/index-QvhMxcwr.js","assets/index-7NZEHSVb.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
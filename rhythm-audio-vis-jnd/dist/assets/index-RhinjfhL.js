var g2=Object.defineProperty;var b2=(t,e,n)=>e in t?g2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wn=(t,e,n)=>(b2(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function vt(){}function $d(t){return t()}function Du(){return Object.create(null)}function $e(t){t.forEach($d)}function Sd(t){return typeof t=="function"}function Pt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function _2(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function j(t,e,n){t.insertBefore(e,n||null)}function G(t){t.parentNode&&t.parentNode.removeChild(t)}function Ar(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function $(t){return document.createElement(t)}function vl(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ft(t){return document.createTextNode(t)}function U(){return ft(" ")}function On(){return ft("")}function pt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function O(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ae(t){return t===""?null:+t}function y2(t){return Array.from(t.childNodes)}function jt(t,e){e=""+e,t.data!==e&&(t.data=e)}function rt(t,e){t.value=e??""}function ue(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function Vt(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Fn(t){const e=t.querySelector(":checked");return e&&e.__value}class w2{constructor(e=!1){wn(this,"is_svg",!1);wn(this,"e");wn(this,"n");wn(this,"t");wn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=vl(n.nodeName):this.e=$(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)j(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(G)}}let Nr;function Mr(t){Nr=t}function Td(){if(!Nr)throw new Error("Function called outside component initialization");return Nr}function Pa(t){Td().$$.on_mount.push(t)}function gn(t){Td().$$.after_update.push(t)}const Ti=[],ke=[];let Ni=[];const Fu=[],v2=Promise.resolve();let xl=!1;function x2(){xl||(xl=!0,v2.then(Cd))}function Ne(t){Ni.push(t)}const Lf=new Set;let wi=0;function Cd(){if(wi!==0)return;const t=Nr;do{try{for(;wi<Ti.length;){const e=Ti[wi];wi++,Mr(e),k2(e.$$)}}catch(e){throw Ti.length=0,wi=0,e}for(Mr(null),Ti.length=0,wi=0;ke.length;)ke.pop()();for(let e=0;e<Ni.length;e+=1){const n=Ni[e];Lf.has(n)||(Lf.add(n),n())}Ni.length=0}while(Ti.length);for(;Fu.length;)Fu.pop()();xl=!1,Lf.clear(),Mr(t)}function k2(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ne)}}function M2(t){const e=[],n=[];Ni.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ni=e}const Ho=new Set;let jn;function Jt(){jn={r:0,c:[],p:jn}}function te(){jn.r||$e(jn.c),jn=jn.p}function Q(t,e){t&&t.i&&(Ho.delete(t),t.i(e))}function et(t,e,n,i){if(t&&t.o){if(Ho.has(t))return;Ho.add(t),jn.c.push(()=>{Ho.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function He(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ut(t){t&&t.c()}function lt(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Ne(()=>{const o=t.$$.on_mount.map($d).filter(Sd);t.$$.on_destroy?t.$$.on_destroy.push(...o):$e(o),t.$$.on_mount=[]}),r.forEach(Ne)}function st(t,e){const n=t.$$;n.fragment!==null&&(M2(n.after_update),$e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $2(t,e){t.$$.dirty[0]===-1&&(Ti.push(t),x2(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ot(t,e,n,i,r,o,a=null,f=[-1]){const l=Nr;Mr(t);const u=t.$$={fragment:null,ctx:[],props:o,update:vt,not_equal:r,bound:Du(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Du(),dirty:f,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let s=!1;if(u.ctx=n?n(t,e.props||{},(h,c,...p)=>{const d=p.length?p[0]:c;return u.ctx&&r(u.ctx[h],u.ctx[h]=d)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](d),s&&$2(t,h)),c}):[],u.update(),s=!0,$e(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const h=y2(e.target);u.fragment&&u.fragment.l(h),h.forEach(G)}else u.fragment&&u.fragment.c();e.intro&&Q(t.$$.fragment),lt(t,e.target,e.anchor),Cd()}Mr(l)}class Ut{constructor(){wn(this,"$$");wn(this,"$$set")}$destroy(){st(this,1),this.$destroy=vt}$on(e,n){if(!Sd(n))return vt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!_2(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const S2="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(S2);const T2="modulepreload",C2=function(t){return"/rhythm-vis/"+t},Lu={},vi=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=C2(a),a in Lu)return;Lu[a]=!0;const f=a.endsWith(".css"),l=f?'[rel="stylesheet"]':"";if(!!i)for(let h=o.length-1;h>=0;h--){const c=o[h];if(c.href===a&&(!f||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const s=document.createElement("link");if(s.rel=f?"stylesheet":T2,f||(s.as="script",s.crossOrigin=""),s.href=a,document.head.appendChild(s),f)return new Promise((h,c)=>{s.addEventListener("load",h),s.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function E2(t){if(t){if(t=new Uint8Array(t.buffer||t),N2(t))return"wav";if(A2(t))return"mp3";if(F2(t))return"flac";if(L2(t))return"m4a";if(I2(t))return"opus";if(D2(t))return"oga";if(R2(t))return"qoa"}}function A2(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function N2(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function D2(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function F2(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function L2(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function I2(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function R2(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let P2=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const O2=globalThis.AudioBuffer||P2;async function U2(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=E2(t);if(!e)throw Error("Cannot detect audio format");if(!ne[e])throw Error("Missing decoder for "+e+" format");return ne[e](t)}const ne={async oga(t){let{decoder:e}=ne.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await vi(()=>import("./index-mU2IW54f.js"),__vite__mapDeps([0,1,2]));await(ne.oga.decoder=e=new n).ready}return t&&xi(await e.decodeFile(t))},async mp3(t){let{decoder:e}=ne.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await vi(()=>import("./index-Rzp8pir6.js"),__vite__mapDeps([3,1]));await(ne.mp3.decoder=e=new n).ready}return t&&xi(await e.decode(t))},async flac(t){let{decoder:e}=ne.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await vi(()=>import("./index-G7lhMU6c.js"),__vite__mapDeps([4,1,2]));await(ne.flac.decoder=e=new n).ready}return t&&xi(await e.decode(t))},async opus(t){let{decoder:e}=ne.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await vi(()=>import("./index-rjJTHSb2.js"),__vite__mapDeps([5,1,2]));await(ne.opus.decoder=e=new n).ready}return t&&xi(await e.decodeFile(t))},async wav(t){let{decode:e}=ne.wav;if(!e){let n=await vi(()=>import("./index-VWbEVF8y.js").then(i=>i.i),__vite__mapDeps([]));e=ne.wav.decode=n.default.decode}return t&&xi(await e(t))},async qoa(t){let{decode:e}=ne.qoa;return e||(ne.qoa.decode=e=(await vi(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&xi(await e(t))}};function xi({channelData:t,sampleRate:e}){let n=new O2({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ed(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var B2=z2;function z2(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=Y2(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),q2(a,r,i,n,o)}function q2(t,e,n,i,r){var o=r/8,a=i*o,f=new ArrayBuffer(44+t.length*o),l=new DataView(f);return vo(l,0,"RIFF"),l.setUint32(4,36+t.length*o,!0),vo(l,8,"WAVE"),vo(l,12,"fmt "),l.setUint32(16,16,!0),l.setUint16(20,e,!0),l.setUint16(22,i,!0),l.setUint32(24,n,!0),l.setUint32(28,n*a,!0),l.setUint16(32,a,!0),l.setUint16(34,r,!0),vo(l,36,"data"),l.setUint32(40,t.length*o,!0),e===1?W2(l,44,t):H2(l,44,t),f}function Y2(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function H2(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function W2(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function vo(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const V2=Ed(B2);function Ri(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let f=0;f<t;++f){let l;r?l=f>=n?i:0:l=f===n?i:0,a.push(f*e+o+l)}return a}async function ys(t){const n=await(await fetch(t)).arrayBuffer();return await U2(n)}function Ad(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const f=Math.round(a*t.sampleRate);let l=1;for(let u=0;u<r.length;++u)l=Math.max(0,l-2/40100),o[f+u]=r[u]*l}return o}function G2(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([V2(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function ws(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function oe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jr(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Oa(t){let e,n,i;t.length!==2?(e=oe,n=(f,l)=>oe(t(f),l),i=(f,l)=>t(f)-l):(e=t===oe||t===jr?t:j2,n=t,i=t);function r(f,l,u=0,s=f.length){if(u<s){if(e(l,l)!==0)return s;do{const h=u+s>>>1;n(f[h],l)<0?u=h+1:s=h}while(u<s)}return u}function o(f,l,u=0,s=f.length){if(u<s){if(e(l,l)!==0)return s;do{const h=u+s>>>1;n(f[h],l)<=0?u=h+1:s=h}while(u<s)}return u}function a(f,l,u=0,s=f.length){const h=r(f,l,u,s-1);return h>u&&i(f[h-1],l)>-i(f[h],l)?h-1:h}return{left:r,center:a,right:o}}function j2(){return 0}function Nd(t){return t===null?NaN:+t}function*X2(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const Z2=Oa(oe),K2=Z2.right;Oa(Nd).center;const Ua=K2;function vs(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function Q2(t){return t.length|0}function J2(t){return!(t>0)}function tb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function eb(t){return e=>t(...e)}function nb(...t){const e=typeof t[t.length-1]=="function"&&eb(t.pop());t=t.map(tb);const n=t.map(Q2),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(J2))return o;for(;;){o.push(r.map((f,l)=>t[l][f]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function ib(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Dr(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let f of t)(f=e(f,++a,t))!=null&&(f=+f)>=f&&(i=f-r,r+=i/++n,o+=i*(f-r))}if(n>1)return o/(n-1)}function Xr(t,e){const n=Dr(t,e);return n&&Math.sqrt(n)}function _e(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class ti{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,f=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);f&&(n[i++]=f),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class ei extends Map{constructor(e,n=Ld){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(kl(this,e))}has(e){return super.has(kl(this,e))}set(e,n){return super.set(Dd(this,e),n)}delete(e){return super.delete(Fd(this,e))}}class Ba extends Set{constructor(e,n=Ld){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(kl(this,e))}add(e){return super.add(Dd(this,e))}delete(e){return super.delete(Fd(this,e))}}function kl({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Dd({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Fd({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Ld(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Jo(t){return t}function za(t,...e){return qa(t,Jo,Jo,e)}function Ml(t,...e){return qa(t,Array.from,Jo,e)}function Di(t,e,...n){return qa(t,Jo,e,n)}function rb(t,e,...n){return qa(t,Array.from,e,n)}function qa(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const f=new ei,l=i[a++];let u=-1;for(const s of o){const h=l(s,++u,o),c=f.get(h);c?c.push(s):f.set(h,[s])}for(const[s,h]of f)f.set(s,r(h,a));return e(f)}(t,0)}function ob(t,e){return Array.from(e,n=>t[n])}function Fr(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const f=ta(a[r],a[o]);if(f)return f}})):(n=t.map(n),i.sort((r,o)=>ta(n[r],n[o]))),ob(t,i)}return t.sort(Id(n))}function Id(t=oe){if(t===oe)return ta;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function ta(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function xs(t,e,n){return(e.length!==2?Fr(Di(t,e,n),([i,r],[o,a])=>oe(r,a)||oe(i,o)):Fr(za(t,n),([i,r],[o,a])=>e(r,a)||oe(i,o))).map(([i])=>i)}const ab=Math.sqrt(50),fb=Math.sqrt(10),lb=Math.sqrt(2);function ea(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=ab?10:o>=fb?5:o>=lb?2:1;let f,l,u;return r<0?(u=Math.pow(10,-r)/a,f=Math.round(t*u),l=Math.round(e*u),f/u<t&&++f,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*a,f=Math.round(t/u),l=Math.round(e/u),f*u<t&&++f,l*u>e&&--l),l<f&&.5<=n&&n<2?ea(t,e,n*2):[f,l,u]}function Lr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?ea(e,t,n):ea(t,e,n);if(!(o>=r))return[];const f=o-r+1,l=new Array(f);if(i)if(a<0)for(let u=0;u<f;++u)l[u]=(o-u)/-a;else for(let u=0;u<f;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<f;++u)l[u]=(r+u)/-a;else for(let u=0;u<f;++u)l[u]=(r+u)*a;return l}function na(t,e,n){return e=+e,t=+t,n=+n,ea(t,e,n)[2]}function $l(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?na(e,t,n):na(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function sb(t){return Math.max(1,Math.ceil(Math.log(vs(t))/Math.LN2)+1)}function ce(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function ub(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function cn(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function cb(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function Rd(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?ta:Id(r);i>n;){if(i-n>600){const l=i-n+1,u=e-n+1,s=Math.log(l),h=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*h*(l-h)/l)*(u-l/2<0?-1:1),p=Math.max(n,Math.floor(e-u*h/l+c)),d=Math.min(i,Math.floor(e+(l-u)*h/l+c));Rd(t,e,p,d,r)}const o=t[e];let a=n,f=i;for(lr(t,n,e),r(t[i],o)>0&&lr(t,n,i);a<f;){for(lr(t,a,f),++a,--f;r(t[a],o)<0;)++a;for(;r(t[f],o)>0;)--f}r(t[n],o)===0?lr(t,n,f):(++f,lr(t,f,i)),f<=e&&(n=f+1),e<=f&&(i=f-1)}return t}function lr(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Pd(t,e=oe){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?oe(a,r)>0:oe(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Pi(t,e,n){if(t=Float64Array.from(X2(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return cn(t);if(e>=1)return ce(t);var i,r=(i-1)*e,o=Math.floor(r),a=ce(Rd(t,o).subarray(0,o+1)),f=cn(t.subarray(o+1));return a+(f-a)*(r-o)}}function hb(t,e,n=Nd){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),f=+n(t[o+1],o+1,t);return a+(f-a)*(r-o)}}function db(t,e,n){const i=vs(t),r=Pi(t,.75)-Pi(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function Od(t,e,n){const i=vs(t),r=Xr(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function ni(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function Sl(t,e){return Pi(t,.5,e)}function*pb(t){for(const e of t)yield*e}function Ud(t){return Array.from(pb(t))}function mb(t,e){const n=new ei;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function gb(t,e=bb){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function bb(t,e){return[t,e]}function Tl(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Ln(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function ia(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function _b(t){return t}var If=1,Rf=2,Cl=3,xo=4,Iu=1e-6;function yb(t){return"translate("+t+",0)"}function wb(t){return"translate(0,"+t+")"}function vb(t){return e=>+t(e)}function xb(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function kb(){return!this.__axis}function Mb(t,e){var n=[],i=null,r=null,o=6,a=6,f=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===If||t===xo?-1:1,s=t===xo||t===Rf?"x":"y",h=t===If||t===Cl?yb:wb;function c(p){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):_b),g=Math.max(o,0)+f,_=e.range(),b=+_[0]+l,v=+_[_.length-1]+l,w=(e.bandwidth?xb:vb)(e.copy(),l),x=p.selection?p.selection():p,k=x.selectAll(".domain").data([null]),M=x.selectAll(".tick").data(d,e).order(),S=M.exit(),E=M.enter().append("g").attr("class","tick"),D=M.select("line"),C=M.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(E),D=D.merge(E.append("line").attr("stroke","currentColor").attr(s+"2",u*o)),C=C.merge(E.append("text").attr("fill","currentColor").attr(s,u*g).attr("dy",t===If?"0em":t===Cl?"0.71em":"0.32em")),p!==x&&(k=k.transition(p),M=M.transition(p),D=D.transition(p),C=C.transition(p),S=S.transition(p).attr("opacity",Iu).attr("transform",function(R){return isFinite(R=w(R))?h(R+l):this.getAttribute("transform")}),E.attr("opacity",Iu).attr("transform",function(R){var L=this.parentNode.__axis;return h((L&&isFinite(L=L(R))?L:w(R))+l)})),S.remove(),k.attr("d",t===xo||t===Rf?a?"M"+u*a+","+b+"H"+l+"V"+v+"H"+u*a:"M"+l+","+b+"V"+v:a?"M"+b+","+u*a+"V"+l+"H"+v+"V"+u*a:"M"+b+","+l+"H"+v),M.attr("opacity",1).attr("transform",function(R){return h(w(R)+l)}),D.attr(s+"2",u*o),C.attr(s,u*g).text(m),x.filter(kb).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Rf?"start":t===xo?"end":"middle"),x.each(function(){this.__axis=w})}return c.scale=function(p){return arguments.length?(e=p,c):e},c.ticks=function(){return n=Array.from(arguments),c},c.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),c):n.slice()},c.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),c):i&&i.slice()},c.tickFormat=function(p){return arguments.length?(r=p,c):r},c.tickSize=function(p){return arguments.length?(o=a=+p,c):o},c.tickSizeInner=function(p){return arguments.length?(o=+p,c):o},c.tickSizeOuter=function(p){return arguments.length?(a=+p,c):a},c.tickPadding=function(p){return arguments.length?(f=+p,c):f},c.offset=function(p){return arguments.length?(l=+p,c):l},c}function $b(t){return Mb(Cl,t)}var Sb={value:()=>{}};function Bd(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Wo(n)}function Wo(t){this._=t}function Tb(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Wo.prototype=Bd.prototype={constructor:Wo,on:function(t,e){var n=this._,i=Tb(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=Cb(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=Ru(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ru(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Wo(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Cb(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Ru(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Sb,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var El="http://www.w3.org/1999/xhtml";const Oi={svg:"http://www.w3.org/2000/svg",xhtml:El,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ya(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Oi.hasOwnProperty(e)?{space:Oi[e],local:t}:t}function Eb(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===El&&e.documentElement.namespaceURI===El?e.createElement(t):e.createElementNS(n,t)}}function Ab(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ha(t){var e=Ya(t);return(e.local?Ab:Eb)(e)}function Nb(){}function ks(t){return t==null?Nb:function(){return this.querySelector(t)}}function Db(t){typeof t!="function"&&(t=ks(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=new Array(a),l,u,s=0;s<a;++s)(l=o[s])&&(u=t.call(l,l.__data__,s,o))&&("__data__"in l&&(u.__data__=l.__data__),f[s]=u);return new he(i,this._parents)}function Fb(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Lb(){return[]}function zd(t){return t==null?Lb:function(){return this.querySelectorAll(t)}}function Ib(t){return function(){return Fb(t.apply(this,arguments))}}function Rb(t){typeof t=="function"?t=Ib(t):t=zd(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],f=a.length,l,u=0;u<f;++u)(l=a[u])&&(i.push(t.call(l,l.__data__,u,a)),r.push(l));return new he(i,r)}function qd(t){return function(){return this.matches(t)}}function Yd(t){return function(e){return e.matches(t)}}var Pb=Array.prototype.find;function Ob(t){return function(){return Pb.call(this.children,t)}}function Ub(){return this.firstElementChild}function Bb(t){return this.select(t==null?Ub:Ob(typeof t=="function"?t:Yd(t)))}var zb=Array.prototype.filter;function qb(){return Array.from(this.children)}function Yb(t){return function(){return zb.call(this.children,t)}}function Hb(t){return this.selectAll(t==null?qb:Yb(typeof t=="function"?t:Yd(t)))}function Wb(t){typeof t!="function"&&(t=qd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&f.push(l);return new he(i,this._parents)}function Hd(t){return new Array(t.length)}function Vb(){return new he(this._enter||this._groups.map(Hd),this._parents)}function ra(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ra.prototype={constructor:ra,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Gb(t){return function(){return t}}function jb(t,e,n,i,r,o){for(var a=0,f,l=e.length,u=o.length;a<u;++a)(f=e[a])?(f.__data__=o[a],i[a]=f):n[a]=new ra(t,o[a]);for(;a<l;++a)(f=e[a])&&(r[a]=f)}function Xb(t,e,n,i,r,o,a){var f,l,u=new Map,s=e.length,h=o.length,c=new Array(s),p;for(f=0;f<s;++f)(l=e[f])&&(c[f]=p=a.call(l,l.__data__,f,e)+"",u.has(p)?r[f]=l:u.set(p,l));for(f=0;f<h;++f)p=a.call(t,o[f],f,o)+"",(l=u.get(p))?(i[f]=l,l.__data__=o[f],u.delete(p)):n[f]=new ra(t,o[f]);for(f=0;f<s;++f)(l=e[f])&&u.get(c[f])===l&&(r[f]=l)}function Zb(t){return t.__data__}function Kb(t,e){if(!arguments.length)return Array.from(this,Zb);var n=e?Xb:jb,i=this._parents,r=this._groups;typeof t!="function"&&(t=Gb(t));for(var o=r.length,a=new Array(o),f=new Array(o),l=new Array(o),u=0;u<o;++u){var s=i[u],h=r[u],c=h.length,p=Qb(t.call(s,s&&s.__data__,u,i)),d=p.length,m=f[u]=new Array(d),g=a[u]=new Array(d),_=l[u]=new Array(c);n(s,h,m,g,_,p,e);for(var b=0,v=0,w,x;b<d;++b)if(w=m[b]){for(b>=v&&(v=b+1);!(x=g[v])&&++v<d;);w._next=x||null}}return a=new he(a,i),a._enter=f,a._exit=l,a}function Qb(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Jb(){return new he(this._exit||this._groups.map(Hd),this._parents)}function t_(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function e_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),f=new Array(r),l=0;l<a;++l)for(var u=n[l],s=i[l],h=u.length,c=f[l]=new Array(h),p,d=0;d<h;++d)(p=u[d]||s[d])&&(c[d]=p);for(;l<r;++l)f[l]=n[l];return new he(f,this._parents)}function n_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function i_(t){t||(t=r_);function e(h,c){return h&&c?t(h.__data__,c.__data__):!h-!c}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],f=a.length,l=r[o]=new Array(f),u,s=0;s<f;++s)(u=a[s])&&(l[s]=u);l.sort(e)}return new he(r,this._parents).order()}function r_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function o_(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function a_(){return Array.from(this)}function f_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function l_(){let t=0;for(const e of this)++t;return t}function s_(){return!this.node()}function u_(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,f;o<a;++o)(f=r[o])&&t.call(f,f.__data__,o,r);return this}function c_(t){return function(){this.removeAttribute(t)}}function h_(t){return function(){this.removeAttributeNS(t.space,t.local)}}function d_(t,e){return function(){this.setAttribute(t,e)}}function p_(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function m_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function g_(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function b_(t,e){var n=Ya(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?h_:c_:typeof e=="function"?n.local?g_:m_:n.local?p_:d_)(n,e))}function Wd(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function __(t){return function(){this.style.removeProperty(t)}}function y_(t,e,n){return function(){this.style.setProperty(t,e,n)}}function w_(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function v_(t,e,n){return arguments.length>1?this.each((e==null?__:typeof e=="function"?w_:y_)(t,e,n??"")):Ui(this.node(),t)}function Ui(t,e){return t.style.getPropertyValue(e)||Wd(t).getComputedStyle(t,null).getPropertyValue(e)}function x_(t){return function(){delete this[t]}}function k_(t,e){return function(){this[t]=e}}function M_(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function $_(t,e){return arguments.length>1?this.each((e==null?x_:typeof e=="function"?M_:k_)(t,e)):this.node()[t]}function Vd(t){return t.trim().split(/^|\s+/)}function Ms(t){return t.classList||new Gd(t)}function Gd(t){this._node=t,this._names=Vd(t.getAttribute("class")||"")}Gd.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function jd(t,e){for(var n=Ms(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function Xd(t,e){for(var n=Ms(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function S_(t){return function(){jd(this,t)}}function T_(t){return function(){Xd(this,t)}}function C_(t,e){return function(){(e.apply(this,arguments)?jd:Xd)(this,t)}}function E_(t,e){var n=Vd(t+"");if(arguments.length<2){for(var i=Ms(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?C_:e?S_:T_)(n,e))}function A_(){this.textContent=""}function N_(t){return function(){this.textContent=t}}function D_(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function F_(t){return arguments.length?this.each(t==null?A_:(typeof t=="function"?D_:N_)(t)):this.node().textContent}function L_(){this.innerHTML=""}function I_(t){return function(){this.innerHTML=t}}function R_(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function P_(t){return arguments.length?this.each(t==null?L_:(typeof t=="function"?R_:I_)(t)):this.node().innerHTML}function O_(){this.nextSibling&&this.parentNode.appendChild(this)}function U_(){return this.each(O_)}function B_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function z_(){return this.each(B_)}function q_(t){var e=typeof t=="function"?t:Ha(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Y_(){return null}function H_(t,e){var n=typeof t=="function"?t:Ha(t),i=e==null?Y_:typeof e=="function"?e:ks(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function W_(){var t=this.parentNode;t&&t.removeChild(this)}function V_(){return this.each(W_)}function G_(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function j_(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function X_(t){return this.select(t?j_:G_)}function Z_(t){return arguments.length?this.property("__data__",t):this.node().__data__}function K_(t){return function(e){t.call(this,e,this.__data__)}}function Q_(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function J_(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function ty(t,e,n){return function(){var i=this.__on,r,o=K_(e);if(i){for(var a=0,f=i.length;a<f;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function ey(t,e,n){var i=Q_(t+""),r,o=i.length,a;if(arguments.length<2){var f=this.node().__on;if(f){for(var l=0,u=f.length,s;l<u;++l)for(r=0,s=f[l];r<o;++r)if((a=i[r]).type===s.type&&a.name===s.name)return s.value}return}for(f=e?ty:J_,r=0;r<o;++r)this.each(f(i[r],e,n));return this}function Zd(t,e,n){var i=Wd(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ny(t,e){return function(){return Zd(this,t,e)}}function iy(t,e){return function(){return Zd(this,t,e.apply(this,arguments))}}function ry(t,e){return this.each((typeof e=="function"?iy:ny)(t,e))}function*oy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var Kd=[null];function he(t,e){this._groups=t,this._parents=e}function Zr(){return new he([[document.documentElement]],Kd)}function ay(){return this}he.prototype=Zr.prototype={constructor:he,select:Db,selectAll:Rb,selectChild:Bb,selectChildren:Hb,filter:Wb,data:Kb,enter:Vb,exit:Jb,join:t_,merge:e_,selection:ay,order:n_,sort:i_,call:o_,nodes:a_,node:f_,size:l_,empty:s_,each:u_,attr:b_,style:v_,property:$_,classed:E_,text:F_,html:P_,raise:U_,lower:z_,append:q_,insert:H_,remove:V_,clone:X_,datum:Z_,on:ey,dispatch:ry,[Symbol.iterator]:oy};function $r(t){return typeof t=="string"?new he([[document.querySelector(t)]],[document.documentElement]):new he([[t]],Kd)}function fy(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ly(t,e){if(t=fy(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function tr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Kr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Un(){}var ii=.7,Bi=1/ii,Fi="\\s*([+-]?\\d+)\\s*",Ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sy=/^#([0-9a-f]{3,8})$/,uy=new RegExp(`^rgb\\(${Fi},${Fi},${Fi}\\)$`),cy=new RegExp(`^rgb\\(${Ge},${Ge},${Ge}\\)$`),hy=new RegExp(`^rgba\\(${Fi},${Fi},${Fi},${Ir}\\)$`),dy=new RegExp(`^rgba\\(${Ge},${Ge},${Ge},${Ir}\\)$`),py=new RegExp(`^hsl\\(${Ir},${Ge},${Ge}\\)$`),my=new RegExp(`^hsla\\(${Ir},${Ge},${Ge},${Ir}\\)$`),Pu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tr(Un,ri,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ou,formatHex:Ou,formatHex8:gy,formatHsl:by,formatRgb:Uu,toString:Uu});function Ou(){return this.rgb().formatHex()}function gy(){return this.rgb().formatHex8()}function by(){return Qd(this).formatHsl()}function Uu(){return this.rgb().formatRgb()}function ri(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Bu(e):n===3?new It(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ko(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ko(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uy.exec(t))?new It(e[1],e[2],e[3],1):(e=cy.exec(t))?new It(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=hy.exec(t))?ko(e[1],e[2],e[3],e[4]):(e=dy.exec(t))?ko(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=py.exec(t))?Yu(e[1],e[2]/100,e[3]/100,1):(e=my.exec(t))?Yu(e[1],e[2]/100,e[3]/100,e[4]):Pu.hasOwnProperty(t)?Bu(Pu[t]):t==="transparent"?new It(NaN,NaN,NaN,0):null}function Bu(t){return new It(t>>16&255,t>>8&255,t&255,1)}function ko(t,e,n,i){return i<=0&&(t=e=n=NaN),new It(t,e,n,i)}function $s(t){return t instanceof Un||(t=ri(t)),t?(t=t.rgb(),new It(t.r,t.g,t.b,t.opacity)):new It}function In(t,e,n,i){return arguments.length===1?$s(t):new It(t,e,n,i??1)}function It(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}tr(It,In,Kr(Un,{brighter(t){return t=t==null?Bi:Math.pow(Bi,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ii:Math.pow(ii,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new It(Kn(this.r),Kn(this.g),Kn(this.b),oa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zu,formatHex:zu,formatHex8:_y,formatRgb:qu,toString:qu}));function zu(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}`}function _y(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}${Xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function qu(){const t=oa(this.opacity);return`${t===1?"rgb(":"rgba("}${Kn(this.r)}, ${Kn(this.g)}, ${Kn(this.b)}${t===1?")":`, ${t})`}`}function oa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xn(t){return t=Kn(t),(t<16?"0":"")+t.toString(16)}function Yu(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ce(t,e,n,i)}function Qd(t){if(t instanceof Ce)return new Ce(t.h,t.s,t.l,t.opacity);if(t instanceof Un||(t=ri(t)),!t)return new Ce;if(t instanceof Ce)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,f=o-r,l=(o+r)/2;return f?(e===o?a=(n-i)/f+(n<i)*6:n===o?a=(i-e)/f+2:a=(e-n)/f+4,f/=l<.5?o+r:2-o-r,a*=60):f=l>0&&l<1?0:a,new Ce(a,f,l,t.opacity)}function Al(t,e,n,i){return arguments.length===1?Qd(t):new Ce(t,e,n,i??1)}function Ce(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}tr(Ce,Al,Kr(Un,{brighter(t){return t=t==null?Bi:Math.pow(Bi,t),new Ce(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ii:Math.pow(ii,t),new Ce(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new It(Pf(t>=240?t-240:t+120,r,i),Pf(t,r,i),Pf(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ce(Hu(this.h),Mo(this.s),Mo(this.l),oa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=oa(this.opacity);return`${t===1?"hsl(":"hsla("}${Hu(this.h)}, ${Mo(this.s)*100}%, ${Mo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Hu(t){return t=(t||0)%360,t<0?t+360:t}function Mo(t){return Math.max(0,Math.min(1,t||0))}function Pf(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Jd=Math.PI/180,t0=180/Math.PI,aa=18,e0=.96422,n0=1,i0=.82521,r0=4/29,Li=6/29,o0=3*Li*Li,yy=Li*Li*Li;function a0(t){if(t instanceof je)return new je(t.l,t.a,t.b,t.opacity);if(t instanceof ln)return f0(t);t instanceof It||(t=$s(t));var e=zf(t.r),n=zf(t.g),i=zf(t.b),r=Of((.2225045*e+.7168786*n+.0606169*i)/n0),o,a;return e===n&&n===i?o=a=r:(o=Of((.4360747*e+.3850649*n+.1430804*i)/e0),a=Of((.0139322*e+.0971045*n+.7141733*i)/i0)),new je(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Nl(t,e,n,i){return arguments.length===1?a0(t):new je(t,e,n,i??1)}function je(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}tr(je,Nl,Kr(Un,{brighter(t){return new je(this.l+aa*(t??1),this.a,this.b,this.opacity)},darker(t){return new je(this.l-aa*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=e0*Uf(e),t=n0*Uf(t),n=i0*Uf(n),new It(Bf(3.1338561*e-1.6168667*t-.4906146*n),Bf(-.9787684*e+1.9161415*t+.033454*n),Bf(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Of(t){return t>yy?Math.pow(t,1/3):t/o0+r0}function Uf(t){return t>Li?t*t*t:o0*(t-r0)}function Bf(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function wy(t){if(t instanceof ln)return new ln(t.h,t.c,t.l,t.opacity);if(t instanceof je||(t=a0(t)),t.a===0&&t.b===0)return new ln(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*t0;return new ln(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Dl(t,e,n,i){return arguments.length===1?wy(t):new ln(t,e,n,i??1)}function ln(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function f0(t){if(isNaN(t.h))return new je(t.l,0,0,t.opacity);var e=t.h*Jd;return new je(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}tr(ln,Dl,Kr(Un,{brighter(t){return new ln(this.h,this.c,this.l+aa*(t??1),this.opacity)},darker(t){return new ln(this.h,this.c,this.l-aa*(t??1),this.opacity)},rgb(){return f0(this).rgb()}}));var l0=-.14861,Ss=1.78277,Ts=-.29227,Wa=-.90649,Rr=1.97294,Wu=Rr*Wa,Vu=Rr*Ss,Gu=Ss*Ts-Wa*l0;function vy(t){if(t instanceof Qn)return new Qn(t.h,t.s,t.l,t.opacity);t instanceof It||(t=$s(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Gu*i+Wu*e-Vu*n)/(Gu+Wu-Vu),o=i-r,a=(Rr*(n-r)-Ts*o)/Wa,f=Math.sqrt(a*a+o*o)/(Rr*r*(1-r)),l=f?Math.atan2(a,o)*t0-120:NaN;return new Qn(l<0?l+360:l,f,r,t.opacity)}function Xe(t,e,n,i){return arguments.length===1?vy(t):new Qn(t,e,n,i??1)}function Qn(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}tr(Qn,Xe,Kr(Un,{brighter(t){return t=t==null?Bi:Math.pow(Bi,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ii:Math.pow(ii,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Jd,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new It(255*(e+n*(l0*i+Ss*r)),255*(e+n*(Ts*i+Wa*r)),255*(e+n*(Rr*i)),this.opacity)}}));function xy(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function ky(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,f=i<e-1?t[i+2]:2*o-r;return xy((n-i/e)*e,a,r,o,f)}}const Va=t=>()=>t;function s0(t,e){return function(n){return t+n*e}}function My(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Cs(t,e){var n=e-t;return n?s0(t,n>180||n<-180?n-360*Math.round(n/360):n):Va(isNaN(t)?e:t)}function $y(t){return(t=+t)==1?Gt:function(e,n){return n-e?My(e,n,t):Va(isNaN(e)?n:e)}}function Gt(t,e){var n=e-t;return n?s0(t,n):Va(isNaN(t)?e:t)}const oi=function t(e){var n=$y(e);function i(r,o){var a=n((r=In(r)).r,(o=In(o)).r),f=n(r.g,o.g),l=n(r.b,o.b),u=Gt(r.opacity,o.opacity);return function(s){return r.r=a(s),r.g=f(s),r.b=l(s),r.opacity=u(s),r+""}}return i.gamma=t,i}(1);function Sy(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,f;for(a=0;a<n;++a)f=In(e[a]),i[a]=f.r||0,r[a]=f.g||0,o[a]=f.b||0;return i=t(i),r=t(r),o=t(o),f.opacity=1,function(l){return f.r=i(l),f.g=r(l),f.b=o(l),f+""}}}var Ty=Sy(ky);function Cy(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function Ey(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ay(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=Qr(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(f){for(a=0;a<i;++a)o[a]=r[a](f);return o}}function Ny(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function Wt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Dy(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Qr(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Fl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qf=new RegExp(Fl.source,"g");function Fy(t){return function(){return t}}function Ly(t){return function(e){return t(e)+""}}function u0(t,e){var n=Fl.lastIndex=qf.lastIndex=0,i,r,o,a=-1,f=[],l=[];for(t=t+"",e=e+"";(i=Fl.exec(t))&&(r=qf.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),f[a]?f[a]+=o:f[++a]=o),(i=i[0])===(r=r[0])?f[a]?f[a]+=r:f[++a]=r:(f[++a]=null,l.push({i:a,x:Wt(i,r)})),n=qf.lastIndex;return n<e.length&&(o=e.slice(n),f[a]?f[a]+=o:f[++a]=o),f.length<2?l[0]?Ly(l[0].x):Fy(e):(e=l.length,function(u){for(var s=0,h;s<e;++s)f[(h=l[s]).i]=h.x(u);return f.join("")})}function Qr(t,e){var n=typeof e,i;return e==null||n==="boolean"?Va(e):(n==="number"?Wt:n==="string"?(i=ri(e))?(e=i,oi):u0:e instanceof ri?oi:e instanceof Date?Ny:Ey(e)?Cy:Array.isArray(e)?Ay:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Dy:Wt)(t,e)}function Es(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ju=180/Math.PI,Ll={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function c0(t,e,n,i,r,o){var a,f,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(f=Math.sqrt(n*n+i*i))&&(n/=f,i/=f,l/=f),t*i<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*ju,skewX:Math.atan(l)*ju,scaleX:a,scaleY:f}}var $o;function Iy(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ll:c0(e.a,e.b,e.c,e.d,e.e,e.f)}function Ry(t){return t==null||($o||($o=document.createElementNS("http://www.w3.org/2000/svg","g")),$o.setAttribute("transform",t),!(t=$o.transform.baseVal.consolidate()))?Ll:(t=t.matrix,c0(t.a,t.b,t.c,t.d,t.e,t.f))}function h0(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function o(u,s,h,c,p,d){if(u!==h||s!==c){var m=p.push("translate(",null,e,null,n);d.push({i:m-4,x:Wt(u,h)},{i:m-2,x:Wt(s,c)})}else(h||c)&&p.push("translate("+h+e+c+n)}function a(u,s,h,c){u!==s?(u-s>180?s+=360:s-u>180&&(u+=360),c.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Wt(u,s)})):s&&h.push(r(h)+"rotate("+s+i)}function f(u,s,h,c){u!==s?c.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Wt(u,s)}):s&&h.push(r(h)+"skewX("+s+i)}function l(u,s,h,c,p,d){if(u!==h||s!==c){var m=p.push(r(p)+"scale(",null,",",null,")");d.push({i:m-4,x:Wt(u,h)},{i:m-2,x:Wt(s,c)})}else(h!==1||c!==1)&&p.push(r(p)+"scale("+h+","+c+")")}return function(u,s){var h=[],c=[];return u=t(u),s=t(s),o(u.translateX,u.translateY,s.translateX,s.translateY,h,c),a(u.rotate,s.rotate,h,c),f(u.skewX,s.skewX,h,c),l(u.scaleX,u.scaleY,s.scaleX,s.scaleY,h,c),u=s=null,function(p){for(var d=-1,m=c.length,g;++d<m;)h[(g=c[d]).i]=g.x(p);return h.join("")}}}var Py=h0(Iy,"px, ","px)","deg)"),Oy=h0(Ry,", ",")",")");function Uy(t){return function(e,n){var i=t((e=Al(e)).h,(n=Al(n)).h),r=Gt(e.s,n.s),o=Gt(e.l,n.l),a=Gt(e.opacity,n.opacity);return function(f){return e.h=i(f),e.s=r(f),e.l=o(f),e.opacity=a(f),e+""}}}const By=Uy(Cs);function zy(t,e){var n=Gt((t=Nl(t)).l,(e=Nl(e)).l),i=Gt(t.a,e.a),r=Gt(t.b,e.b),o=Gt(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function qy(t){return function(e,n){var i=t((e=Dl(e)).h,(n=Dl(n)).h),r=Gt(e.c,n.c),o=Gt(e.l,n.l),a=Gt(e.opacity,n.opacity);return function(f){return e.h=i(f),e.c=r(f),e.l=o(f),e.opacity=a(f),e+""}}}const Yy=qy(Cs);function d0(t){return function e(n){n=+n;function i(r,o){var a=t((r=Xe(r)).h,(o=Xe(o)).h),f=Gt(r.s,o.s),l=Gt(r.l,o.l),u=Gt(r.opacity,o.opacity);return function(s){return r.h=a(s),r.s=f(s),r.l=l(Math.pow(s,n)),r.opacity=u(s),r+""}}return i.gamma=e,i}(1)}d0(Cs);var As=d0(Gt);function Ga(t,e){e===void 0&&(e=t,t=Qr);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var f=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[f](a-f)}}function De(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var zi=0,mr=0,sr=0,p0=1e3,fa,gr,la=0,ai=0,ja=0,Pr=typeof performance=="object"&&performance.now?performance:Date,m0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ns(){return ai||(m0(Hy),ai=Pr.now()+ja)}function Hy(){ai=0}function sa(){this._call=this._time=this._next=null}sa.prototype=g0.prototype={constructor:sa,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ns():+n)+(e==null?0:+e),!this._next&&gr!==this&&(gr?gr._next=this:fa=this,gr=this),this._call=t,this._time=n,Il()},stop:function(){this._call&&(this._call=null,this._time=1/0,Il())}};function g0(t,e,n){var i=new sa;return i.restart(t,e,n),i}function Wy(){Ns(),++zi;for(var t=fa,e;t;)(e=ai-t._time)>=0&&t._call.call(void 0,e),t=t._next;--zi}function Xu(){ai=(la=Pr.now())+ja,zi=mr=0;try{Wy()}finally{zi=0,Gy(),ai=0}}function Vy(){var t=Pr.now(),e=t-la;e>p0&&(ja-=e,la=t)}function Gy(){for(var t,e=fa,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:fa=n);gr=t,Il(i)}function Il(t){if(!zi){mr&&(mr=clearTimeout(mr));var e=t-ai;e>24?(t<1/0&&(mr=setTimeout(Xu,t-Pr.now()-ja)),sr&&(sr=clearInterval(sr))):(sr||(la=Pr.now(),sr=setInterval(Vy,p0)),zi=1,m0(Xu))}}function Zu(t,e,n){var i=new sa;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var jy=Bd("start","end","cancel","interrupt"),Xy=[],b0=0,Ku=1,Rl=2,Vo=3,Qu=4,Pl=5,Go=6;function Xa(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Zy(t,n,{name:e,index:i,group:r,on:jy,tween:Xy,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:b0})}function Ds(t,e){var n=Re(t,e);if(n.state>b0)throw new Error("too late; already scheduled");return n}function Ke(t,e){var n=Re(t,e);if(n.state>Vo)throw new Error("too late; already running");return n}function Re(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Zy(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=g0(o,0,n.time);function o(u){n.state=Ku,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var s,h,c,p;if(n.state!==Ku)return l();for(s in i)if(p=i[s],p.name===n.name){if(p.state===Vo)return Zu(a);p.state===Qu?(p.state=Go,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[s]):+s<e&&(p.state=Go,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[s])}if(Zu(function(){n.state===Vo&&(n.state=Qu,n.timer.restart(f,n.delay,n.time),f(u))}),n.state=Rl,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Rl){for(n.state=Vo,r=new Array(c=n.tween.length),s=0,h=-1;s<c;++s)(p=n.tween[s].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=p);r.length=h+1}}function f(u){for(var s=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Pl,1),h=-1,c=r.length;++h<c;)r[h].call(t,s);n.state===Pl&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Go,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Ky(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>Rl&&i.state<Pl,i.state=Go,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function Qy(t){return this.each(function(){Ky(this,t)})}function Jy(t,e){var n,i;return function(){var r=Ke(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,f=i.length;a<f;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function tw(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=Ke(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var f={name:e,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===e){r[l]=f;break}l===u&&r.push(f)}o.tween=r}}function ew(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Re(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Jy:tw)(n,t,e))}function Fs(t,e,n){var i=t._id;return t.each(function(){var r=Ke(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Re(r,i).value[e]}}function _0(t,e){var n;return(typeof e=="number"?Wt:e instanceof ri?oi:(n=ri(e))?(e=n,oi):u0)(t,e)}function nw(t){return function(){this.removeAttribute(t)}}function iw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function ow(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function aw(t,e,n){var i,r,o;return function(){var a,f=n(this),l;return f==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=f+"",a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f)))}}function fw(t,e,n){var i,r,o;return function(){var a,f=n(this),l;return f==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=f+"",a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f)))}}function lw(t,e){var n=Ya(t),i=n==="transform"?Oy:_0;return this.attrTween(t,typeof e=="function"?(n.local?fw:aw)(n,i,Fs(this,"attr."+t,e)):e==null?(n.local?iw:nw)(n):(n.local?ow:rw)(n,i,e))}function sw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function uw(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function cw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&uw(t,o)),n}return r._value=e,r}function hw(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&sw(t,o)),n}return r._value=e,r}function dw(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ya(t);return this.tween(n,(i.local?cw:hw)(i,e))}function pw(t,e){return function(){Ds(this,t).delay=+e.apply(this,arguments)}}function mw(t,e){return e=+e,function(){Ds(this,t).delay=e}}function gw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?pw:mw)(e,t)):Re(this.node(),e).delay}function bw(t,e){return function(){Ke(this,t).duration=+e.apply(this,arguments)}}function _w(t,e){return e=+e,function(){Ke(this,t).duration=e}}function yw(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bw:_w)(e,t)):Re(this.node(),e).duration}function ww(t,e){if(typeof e!="function")throw new Error;return function(){Ke(this,t).ease=e}}function vw(t){var e=this._id;return arguments.length?this.each(ww(e,t)):Re(this.node(),e).ease}function xw(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ke(this,t).ease=n}}function kw(t){if(typeof t!="function")throw new Error;return this.each(xw(this._id,t))}function Mw(t){typeof t!="function"&&(t=qd(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,f=i[r]=[],l,u=0;u<a;++u)(l=o[u])&&t.call(l,l.__data__,u,o)&&f.push(l);return new hn(i,this._parents,this._name,this._id)}function $w(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),f=0;f<o;++f)for(var l=e[f],u=n[f],s=l.length,h=a[f]=new Array(s),c,p=0;p<s;++p)(c=l[p]||u[p])&&(h[p]=c);for(;f<i;++f)a[f]=e[f];return new hn(a,this._parents,this._name,this._id)}function Sw(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Tw(t,e,n){var i,r,o=Sw(e)?Ds:Ke;return function(){var a=o(this,t),f=a.on;f!==i&&(r=(i=f).copy()).on(e,n),a.on=r}}function Cw(t,e){var n=this._id;return arguments.length<2?Re(this.node(),n).on.on(t):this.each(Tw(n,t,e))}function Ew(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Aw(){return this.on("end.remove",Ew(this._id))}function Nw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ks(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var f=i[a],l=f.length,u=o[a]=new Array(l),s,h,c=0;c<l;++c)(s=f[c])&&(h=t.call(s,s.__data__,c,f))&&("__data__"in s&&(h.__data__=s.__data__),u[c]=h,Xa(u[c],e,n,c,u,Re(s,n)));return new hn(o,this._parents,e,n)}function Dw(t){var e=this._name,n=this._id;typeof t!="function"&&(t=zd(t));for(var i=this._groups,r=i.length,o=[],a=[],f=0;f<r;++f)for(var l=i[f],u=l.length,s,h=0;h<u;++h)if(s=l[h]){for(var c=t.call(s,s.__data__,h,l),p,d=Re(s,n),m=0,g=c.length;m<g;++m)(p=c[m])&&Xa(p,e,n,m,c,d);o.push(c),a.push(s)}return new hn(o,a,e,n)}var Fw=Zr.prototype.constructor;function Lw(){return new Fw(this._groups,this._parents)}function Iw(t,e){var n,i,r;return function(){var o=Ui(this,t),a=(this.style.removeProperty(t),Ui(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function y0(t){return function(){this.style.removeProperty(t)}}function Rw(t,e,n){var i,r=n+"",o;return function(){var a=Ui(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function Pw(t,e,n){var i,r,o;return function(){var a=Ui(this,t),f=n(this),l=f+"";return f==null&&(l=f=(this.style.removeProperty(t),Ui(this,t))),a===l?null:a===i&&l===r?o:(r=l,o=e(i=a,f))}}function Ow(t,e){var n,i,r,o="style."+e,a="end."+o,f;return function(){var l=Ke(this,t),u=l.on,s=l.value[o]==null?f||(f=y0(e)):void 0;(u!==n||r!==s)&&(i=(n=u).copy()).on(a,r=s),l.on=i}}function Uw(t,e,n){var i=(t+="")=="transform"?Py:_0;return e==null?this.styleTween(t,Iw(t,i)).on("end.style."+t,y0(t)):typeof e=="function"?this.styleTween(t,Pw(t,i,Fs(this,"style."+t,e))).each(Ow(this._id,t)):this.styleTween(t,Rw(t,i,e),n).on("end.style."+t,null)}function Bw(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function zw(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Bw(t,a,n)),i}return o._value=e,o}function qw(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,zw(t,e,n??""))}function Yw(t){return function(){this.textContent=t}}function Hw(t){return function(){var e=t(this);this.textContent=e??""}}function Ww(t){return this.tween("text",typeof t=="function"?Hw(Fs(this,"text",t)):Yw(t==null?"":t+""))}function Vw(t){return function(e){this.textContent=t.call(this,e)}}function Gw(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Vw(r)),e}return i._value=t,i}function jw(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Gw(t))}function Xw(){for(var t=this._name,e=this._id,n=w0(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],f=a.length,l,u=0;u<f;++u)if(l=a[u]){var s=Re(l,e);Xa(l,t,n,u,a,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new hn(i,this._parents,t,n)}function Zw(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var f={value:a},l={value:function(){--r===0&&o()}};n.each(function(){var u=Ke(this,i),s=u.on;s!==t&&(e=(t=s).copy(),e._.cancel.push(f),e._.interrupt.push(f),e._.end.push(l)),u.on=e}),r===0&&o()})}var Kw=0;function hn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function w0(){return++Kw}var tn=Zr.prototype;hn.prototype={constructor:hn,select:Nw,selectAll:Dw,selectChild:tn.selectChild,selectChildren:tn.selectChildren,filter:Mw,merge:$w,selection:Lw,transition:Xw,call:tn.call,nodes:tn.nodes,node:tn.node,size:tn.size,empty:tn.empty,each:tn.each,on:Cw,attr:lw,attrTween:dw,style:Uw,styleTween:qw,text:Ww,textTween:jw,remove:Aw,tween:ew,delay:gw,duration:yw,ease:vw,easeVarying:kw,end:Zw,[Symbol.iterator]:tn[Symbol.iterator]};function Qw(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Jw={time:null,delay:0,duration:250,ease:Qw};function tv(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function ev(t){var e,n;t instanceof hn?(e=t._id,t=t._name):(e=w0(),(n=Jw).time=Ns(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],f=a.length,l,u=0;u<f;++u)(l=a[u])&&Xa(l,t,e,u,a,n||tv(l,e));return new hn(i,this._parents,t,e)}Zr.prototype.interrupt=Qy;Zr.prototype.transition=ev;const Ol=Math.PI,Ul=2*Ol,Vn=1e-6,nv=Ul-Vn;function v0(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function iv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return v0;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class x0{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?v0:iv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,f=this._y1,l=i-e,u=r-n,s=a-e,h=f-n,c=s*s+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(c>Vn)if(!(Math.abs(h*l-u*s)>Vn)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,d=r-f,m=l*l+u*u,g=p*p+d*d,_=Math.sqrt(m),b=Math.sqrt(c),v=o*Math.tan((Ol-Math.acos((m+c-g)/(2*_*b)))/2),w=v/b,x=v/_;Math.abs(w-1)>Vn&&this._append`L${e+w*s},${n+w*h}`,this._append`A${o},${o},0,0,${+(h*p>s*d)},${this._x1=e+x*l},${this._y1=n+x*u}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let f=i*Math.cos(r),l=i*Math.sin(r),u=e+f,s=n+l,h=1^a,c=a?r-o:o-r;this._x1===null?this._append`M${u},${s}`:(Math.abs(this._x1-u)>Vn||Math.abs(this._y1-s)>Vn)&&this._append`L${u},${s}`,i&&(c<0&&(c=c%Ul+Ul),c>nv?this._append`A${i},${i},0,1,${h},${e-f},${n-l}A${i},${i},0,1,${h},${this._x1=u},${this._y1=s}`:c>Vn&&this._append`A${i},${i},0,${+(c>=Ol)},${h},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function $n(t=3){return new x0(+t)}function rv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ua(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function qi(t){return t=ua(Math.abs(t)),t?t[1]:NaN}function ov(t,e){return function(n,i){for(var r=n.length,o=[],a=0,f=t[0],l=0;r>0&&f>0&&(l+f+1>i&&(f=Math.max(1,i-l)),o.push(n.substring(r-=f,r+f)),!((l+=f+1)>i));)f=t[a=(a+1)%t.length];return o.reverse().join(e)}}function av(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var fv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Or(t){if(!(e=fv.exec(t)))throw new Error("invalid format: "+t);var e;return new Ls({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Or.prototype=Ls.prototype;function Ls(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Ls.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function lv(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var k0;function sv(t,e){var n=ua(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(k0=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+ua(t,Math.max(0,e+o-1))[0]}function Ju(t,e){var n=ua(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const tc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:rv,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ju(t*100,e),r:Ju,s:sv,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ec(t){return t}var nc=Array.prototype.map,ic=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uv(t){var e=t.grouping===void 0||t.thousands===void 0?ec:ov(nc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?ec:av(nc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",f=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Or(h);var c=h.fill,p=h.align,d=h.sign,m=h.symbol,g=h.zero,_=h.width,b=h.comma,v=h.precision,w=h.trim,x=h.type;x==="n"?(b=!0,x="g"):tc[x]||(v===void 0&&(v=12),w=!0,x="g"),(g||c==="0"&&p==="=")&&(g=!0,c="0",p="=");var k=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",M=m==="$"?i:/[%p]/.test(x)?a:"",S=tc[x],E=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function D(C){var R=k,L=M,H,T,z;if(x==="c")L=S(C)+L,C="";else{C=+C;var I=C<0||1/C<0;if(C=isNaN(C)?l:S(Math.abs(C),v),w&&(C=lv(C)),I&&+C==0&&d!=="+"&&(I=!1),R=(I?d==="("?d:f:d==="-"||d==="("?"":d)+R,L=(x==="s"?ic[8+k0/3]:"")+L+(I&&d==="("?")":""),E){for(H=-1,T=C.length;++H<T;)if(z=C.charCodeAt(H),48>z||z>57){L=(z===46?r+C.slice(H+1):C.slice(H))+L,C=C.slice(0,H);break}}}b&&!g&&(C=e(C,1/0));var K=R.length+C.length+L.length,V=K<_?new Array(_-K+1).join(c):"";switch(b&&g&&(C=e(V+C,V.length?_-L.length:1/0),V=""),p){case"<":C=R+C+L+V;break;case"=":C=R+V+C+L;break;case"^":C=V.slice(0,K=V.length>>1)+R+C+L+V.slice(K);break;default:C=V+R+C+L;break}return o(C)}return D.toString=function(){return h+""},D}function s(h,c){var p=u((h=Or(h),h.type="f",h)),d=Math.max(-8,Math.min(8,Math.floor(qi(c)/3)))*3,m=Math.pow(10,-d),g=ic[8+d/3];return function(_){return p(m*_)+g}}return{format:u,formatPrefix:s}}var So,er,M0;cv({thousands:",",grouping:[3],currency:["$",""]});function cv(t){return So=uv(t),er=So.format,M0=So.formatPrefix,So}function hv(t){return Math.max(0,-qi(Math.abs(t)))}function dv(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qi(e)/3)))*3-qi(Math.abs(t)))}function pv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,qi(e)-qi(t))+1}var bt=1e-6,$0=1e-12,wt=Math.PI,Ct=wt/2,rc=wt/4,de=wt*2,Zt=180/wt,Tt=wt/180,kt=Math.abs,nr=Math.atan,dn=Math.atan2,yt=Math.cos,S0=Math.exp,ca=Math.log,Yf=Math.pow,gt=Math.sin,ye=Math.sign||function(t){return t>0?1:t<0?-1:0},fe=Math.sqrt,Is=Math.tan;function T0(t){return t>1?0:t<-1?wt:Math.acos(t)}function Me(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function we(){}function ha(t,e){t&&ac.hasOwnProperty(t.type)&&ac[t.type](t,e)}var oc={Feature:function(t,e){ha(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ha(n[i].geometry,e)}},ac={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Bl(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Bl(n[i],e,0)},Polygon:function(t,e){fc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)fc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ha(n[i],e)}};function Bl(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function fc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Bl(t[n],e,1);e.polygonEnd()}function Gn(t,e){t&&oc.hasOwnProperty(t.type)?oc[t.type](t,e):ha(t,e)}function zl(t){return[dn(t[1],t[0]),Me(t[2])]}function Yi(t){var e=t[0],n=t[1],i=yt(n);return[i*yt(e),i*gt(e),gt(n)]}function To(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function da(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Hf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Co(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ql(t){var e=fe(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Yl(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function Hl(t,e){return kt(t)>wt&&(t-=Math.round(t/de)*de),[t,e]}Hl.invert=Hl;function C0(t,e,n){return(t%=de)?e||n?Yl(sc(t),uc(e,n)):sc(t):e||n?uc(e,n):Hl}function lc(t){return function(e,n){return e+=t,kt(e)>wt&&(e-=Math.round(e/de)*de),[e,n]}}function sc(t){var e=lc(t);return e.invert=lc(-t),e}function uc(t,e){var n=yt(t),i=gt(t),r=yt(e),o=gt(e);function a(f,l){var u=yt(l),s=yt(f)*u,h=gt(f)*u,c=gt(l),p=c*n+s*i;return[dn(h*r-p*o,s*n-c*i),Me(p*r+h*o)]}return a.invert=function(f,l){var u=yt(l),s=yt(f)*u,h=gt(f)*u,c=gt(l),p=c*r-h*o;return[dn(h*r+c*o,s*n+p*i),Me(p*n-s*i)]},a}function mv(t){t=C0(t[0]*Tt,t[1]*Tt,t.length>2?t[2]*Tt:0);function e(n){return n=t(n[0]*Tt,n[1]*Tt),n[0]*=Zt,n[1]*=Zt,n}return e.invert=function(n){return n=t.invert(n[0]*Tt,n[1]*Tt),n[0]*=Zt,n[1]*=Zt,n},e}function gv(t,e,n,i,r,o){if(n){var a=yt(e),f=gt(e),l=i*n;r==null?(r=e+i*de,o=e-l/2):(r=cc(a,r),o=cc(a,o),(i>0?r<o:r>o)&&(r+=i*de));for(var u,s=r;i>0?s>o:s<o;s-=l)u=zl([a,-f*yt(s),-f*gt(s)]),t.point(u[0],u[1])}}function cc(t,e){e=Yi(e),e[0]-=t,ql(e);var n=T0(-e[1]);return((-e[2]<0?-n:n)+de-bt)%de}function E0(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:we,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function jo(t,e){return kt(t[0]-e[0])<bt&&kt(t[1]-e[1])<bt}function Eo(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function A0(t,e,n,i,r){var o=[],a=[],f,l;if(t.forEach(function(d){if(!((m=d.length-1)<=0)){var m,g=d[0],_=d[m],b;if(jo(g,_)){if(!g[2]&&!_[2]){for(r.lineStart(),f=0;f<m;++f)r.point((g=d[f])[0],g[1]);r.lineEnd();return}_[0]+=2*bt}o.push(b=new Eo(g,d,null,!0)),a.push(b.o=new Eo(g,null,b,!1)),o.push(b=new Eo(_,d,null,!1)),a.push(b.o=new Eo(_,null,b,!0))}}),!!o.length){for(a.sort(e),hc(o),hc(a),f=0,l=a.length;f<l;++f)a[f].e=n=!n;for(var u=o[0],s,h;;){for(var c=u,p=!0;c.v;)if((c=c.n)===u)return;s=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(p)for(f=0,l=s.length;f<l;++f)r.point((h=s[f])[0],h[1]);else i(c.x,c.n.x,1,r);c=c.n}else{if(p)for(s=c.p.z,f=s.length-1;f>=0;--f)r.point((h=s[f])[0],h[1]);else i(c.x,c.p.x,-1,r);c=c.p}c=c.o,s=c.z,p=!p}while(!c.v);r.lineEnd()}}}function hc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function Wf(t){return kt(t[0])<=wt?t[0]:ye(t[0])*((kt(t[0])+wt)%de-wt)}function bv(t,e){var n=Wf(e),i=e[1],r=gt(i),o=[gt(n),-yt(n),0],a=0,f=0,l=new ti;r===1?i=Ct+bt:r===-1&&(i=-Ct-bt);for(var u=0,s=t.length;u<s;++u)if(c=(h=t[u]).length)for(var h,c,p=h[c-1],d=Wf(p),m=p[1]/2+rc,g=gt(m),_=yt(m),b=0;b<c;++b,d=w,g=k,_=M,p=v){var v=h[b],w=Wf(v),x=v[1]/2+rc,k=gt(x),M=yt(x),S=w-d,E=S>=0?1:-1,D=E*S,C=D>wt,R=g*k;if(l.add(dn(R*E*gt(D),_*M+R*yt(D))),a+=C?S+E*de:S,C^d>=n^w>=n){var L=da(Yi(p),Yi(v));ql(L);var H=da(o,L);ql(H);var T=(C^S>=0?-1:1)*Me(H[2]);(i>T||i===T&&(L[0]||L[1]))&&(f+=C^S>=0?1:-1)}}return(a<-bt||a<bt&&l<-$0)^f&1}function N0(t,e,n,i){return function(r){var o=e(r),a=E0(),f=e(a),l=!1,u,s,h,c={point:p,lineStart:m,lineEnd:g,polygonStart:function(){c.point=_,c.lineStart=b,c.lineEnd=v,s=[],u=[]},polygonEnd:function(){c.point=p,c.lineStart=m,c.lineEnd=g,s=Ud(s);var w=bv(u,i);s.length?(l||(r.polygonStart(),l=!0),A0(s,yv,w,n,r)):w&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),s=u=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(w,x){t(w,x)&&r.point(w,x)}function d(w,x){o.point(w,x)}function m(){c.point=d,o.lineStart()}function g(){c.point=p,o.lineEnd()}function _(w,x){h.push([w,x]),f.point(w,x)}function b(){f.lineStart(),h=[]}function v(){_(h[0][0],h[0][1]),f.lineEnd();var w=f.clean(),x=a.result(),k,M=x.length,S,E,D;if(h.pop(),u.push(h),h=null,!!M){if(w&1){if(E=x[0],(S=E.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),k=0;k<S;++k)r.point((D=E[k])[0],D[1]);r.lineEnd()}return}M>1&&w&2&&x.push(x.pop().concat(x.shift())),s.push(x.filter(_v))}}return c}}function _v(t){return t.length>1}function yv(t,e){return((t=t.x)[0]<0?t[1]-Ct-bt:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-bt:Ct-e[1])}const dc=N0(function(){return!0},wv,xv,[-wt,-Ct]);function wv(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var f=o>0?wt:-wt,l=kt(o-e);kt(l-wt)<bt?(t.point(e,n=(n+a)/2>0?Ct:-Ct),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(f,n),t.point(o,n),r=0):i!==f&&l>=wt&&(kt(e-i)<bt&&(e-=i*bt),kt(o-f)<bt&&(o-=f*bt),n=vv(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(f,n),r=0),t.point(e=o,n=a),i=f},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function vv(t,e,n,i){var r,o,a=gt(t-n);return kt(a)>bt?nr((gt(e)*(o=yt(i))*gt(n)-gt(i)*(r=yt(e))*gt(t))/(r*o*a)):(e+i)/2}function xv(t,e,n,i){var r;if(t==null)r=n*Ct,i.point(-wt,r),i.point(0,r),i.point(wt,r),i.point(wt,0),i.point(wt,-r),i.point(0,-r),i.point(-wt,-r),i.point(-wt,0),i.point(-wt,r);else if(kt(t[0]-e[0])>bt){var o=t[0]<e[0]?wt:-wt;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function kv(t){var e=yt(t),n=6*Tt,i=e>0,r=kt(e)>bt;function o(s,h,c,p){gv(p,t,n,c,s,h)}function a(s,h){return yt(s)*yt(h)>e}function f(s){var h,c,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(g,_){var b=[g,_],v,w=a(g,_),x=i?w?0:u(g,_):w?u(g+(g<0?wt:-wt),_):0;if(!h&&(d=p=w)&&s.lineStart(),w!==p&&(v=l(h,b),(!v||jo(h,v)||jo(b,v))&&(b[2]=1)),w!==p)m=0,w?(s.lineStart(),v=l(b,h),s.point(v[0],v[1])):(v=l(h,b),s.point(v[0],v[1],2),s.lineEnd()),h=v;else if(r&&h&&i^w){var k;!(x&c)&&(k=l(b,h,!0))&&(m=0,i?(s.lineStart(),s.point(k[0][0],k[0][1]),s.point(k[1][0],k[1][1]),s.lineEnd()):(s.point(k[1][0],k[1][1]),s.lineEnd(),s.lineStart(),s.point(k[0][0],k[0][1],3)))}w&&(!h||!jo(h,b))&&s.point(b[0],b[1]),h=b,p=w,c=x},lineEnd:function(){p&&s.lineEnd(),h=null},clean:function(){return m|(d&&p)<<1}}}function l(s,h,c){var p=Yi(s),d=Yi(h),m=[1,0,0],g=da(p,d),_=To(g,g),b=g[0],v=_-b*b;if(!v)return!c&&s;var w=e*_/v,x=-e*b/v,k=da(m,g),M=Co(m,w),S=Co(g,x);Hf(M,S);var E=k,D=To(M,E),C=To(E,E),R=D*D-C*(To(M,M)-1);if(!(R<0)){var L=fe(R),H=Co(E,(-D-L)/C);if(Hf(H,M),H=zl(H),!c)return H;var T=s[0],z=h[0],I=s[1],K=h[1],V;z<T&&(V=T,T=z,z=V);var W=z-T,F=kt(W-wt)<bt,Y=F||W<bt;if(!F&&K<I&&(V=I,I=K,K=V),Y?F?I+K>0^H[1]<(kt(H[0]-T)<bt?I:K):I<=H[1]&&H[1]<=K:W>wt^(T<=H[0]&&H[0]<=z)){var Z=Co(E,(-D+L)/C);return Hf(Z,M),[H,zl(Z)]}}}function u(s,h){var c=i?t:wt-t,p=0;return s<-c?p|=1:s>c&&(p|=2),h<-c?p|=4:h>c&&(p|=8),p}return N0(a,f,o,i?[0,-t]:[-wt,t-wt])}function Mv(t,e,n,i,r,o){var a=t[0],f=t[1],l=e[0],u=e[1],s=0,h=1,c=l-a,p=u-f,d;if(d=n-a,!(!c&&d>0)){if(d/=c,c<0){if(d<s)return;d<h&&(h=d)}else if(c>0){if(d>h)return;d>s&&(s=d)}if(d=r-a,!(!c&&d<0)){if(d/=c,c<0){if(d>h)return;d>s&&(s=d)}else if(c>0){if(d<s)return;d<h&&(h=d)}if(d=i-f,!(!p&&d>0)){if(d/=p,p<0){if(d<s)return;d<h&&(h=d)}else if(p>0){if(d>h)return;d>s&&(s=d)}if(d=o-f,!(!p&&d<0)){if(d/=p,p<0){if(d>h)return;d>s&&(s=d)}else if(p>0){if(d<s)return;d<h&&(h=d)}return s>0&&(t[0]=a+s*c,t[1]=f+s*p),h<1&&(e[0]=a+h*c,e[1]=f+h*p),!0}}}}}var br=1e9,Ao=-br;function D0(t,e,n,i){function r(u,s){return t<=u&&u<=n&&e<=s&&s<=i}function o(u,s,h,c){var p=0,d=0;if(u==null||(p=a(u,h))!==(d=a(s,h))||l(u,s)<0^h>0)do c.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+h+4)%4)!==d);else c.point(s[0],s[1])}function a(u,s){return kt(u[0]-t)<bt?s>0?0:3:kt(u[0]-n)<bt?s>0?2:1:kt(u[1]-e)<bt?s>0?1:0:s>0?3:2}function f(u,s){return l(u.x,s.x)}function l(u,s){var h=a(u,1),c=a(s,1);return h!==c?h-c:h===0?s[1]-u[1]:h===1?u[0]-s[0]:h===2?u[1]-s[1]:s[0]-u[0]}return function(u){var s=u,h=E0(),c,p,d,m,g,_,b,v,w,x,k,M={point:S,lineStart:R,lineEnd:L,polygonStart:D,polygonEnd:C};function S(T,z){r(T,z)&&s.point(T,z)}function E(){for(var T=0,z=0,I=p.length;z<I;++z)for(var K=p[z],V=1,W=K.length,F=K[0],Y,Z,nt=F[0],J=F[1];V<W;++V)Y=nt,Z=J,F=K[V],nt=F[0],J=F[1],Z<=i?J>i&&(nt-Y)*(i-Z)>(J-Z)*(t-Y)&&++T:J<=i&&(nt-Y)*(i-Z)<(J-Z)*(t-Y)&&--T;return T}function D(){s=h,c=[],p=[],k=!0}function C(){var T=E(),z=k&&T,I=(c=Ud(c)).length;(z||I)&&(u.polygonStart(),z&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),I&&A0(c,f,T,o,u),u.polygonEnd()),s=u,c=p=d=null}function R(){M.point=H,p&&p.push(d=[]),x=!0,w=!1,b=v=NaN}function L(){c&&(H(m,g),_&&w&&h.rejoin(),c.push(h.result())),M.point=S,w&&s.lineEnd()}function H(T,z){var I=r(T,z);if(p&&d.push([T,z]),x)m=T,g=z,_=I,x=!1,I&&(s.lineStart(),s.point(T,z));else if(I&&w)s.point(T,z);else{var K=[b=Math.max(Ao,Math.min(br,b)),v=Math.max(Ao,Math.min(br,v))],V=[T=Math.max(Ao,Math.min(br,T)),z=Math.max(Ao,Math.min(br,z))];Mv(K,V,t,e,n,i)?(w||(s.lineStart(),s.point(K[0],K[1])),s.point(V[0],V[1]),I||s.lineEnd(),k=!1):I&&(s.lineStart(),s.point(T,z),k=!1)}b=T,v=z,w=I}return M}}const Wl=t=>t;var Vf=new ti,Vl=new ti,F0,L0,Gl,jl,Mn={point:we,lineStart:we,lineEnd:we,polygonStart:function(){Mn.lineStart=$v,Mn.lineEnd=Tv},polygonEnd:function(){Mn.lineStart=Mn.lineEnd=Mn.point=we,Vf.add(kt(Vl)),Vl=new ti},result:function(){var t=Vf/2;return Vf=new ti,t}};function $v(){Mn.point=Sv}function Sv(t,e){Mn.point=I0,F0=Gl=t,L0=jl=e}function I0(t,e){Vl.add(jl*t-Gl*e),Gl=t,jl=e}function Tv(){I0(F0,L0)}const pc=Mn;var Hi=1/0,pa=Hi,Ur=-Hi,ma=Ur,Cv={point:Ev,lineStart:we,lineEnd:we,polygonStart:we,polygonEnd:we,result:function(){var t=[[Hi,pa],[Ur,ma]];return Ur=ma=-(pa=Hi=1/0),t}};function Ev(t,e){t<Hi&&(Hi=t),t>Ur&&(Ur=t),e<pa&&(pa=e),e>ma&&(ma=e)}const ga=Cv;var Xl=0,Zl=0,_r=0,ba=0,_a=0,Ci=0,Kl=0,Ql=0,yr=0,R0,P0,qe,Ye,Ee={point:fi,lineStart:mc,lineEnd:gc,polygonStart:function(){Ee.lineStart=Dv,Ee.lineEnd=Fv},polygonEnd:function(){Ee.point=fi,Ee.lineStart=mc,Ee.lineEnd=gc},result:function(){var t=yr?[Kl/yr,Ql/yr]:Ci?[ba/Ci,_a/Ci]:_r?[Xl/_r,Zl/_r]:[NaN,NaN];return Xl=Zl=_r=ba=_a=Ci=Kl=Ql=yr=0,t}};function fi(t,e){Xl+=t,Zl+=e,++_r}function mc(){Ee.point=Av}function Av(t,e){Ee.point=Nv,fi(qe=t,Ye=e)}function Nv(t,e){var n=t-qe,i=e-Ye,r=fe(n*n+i*i);ba+=r*(qe+t)/2,_a+=r*(Ye+e)/2,Ci+=r,fi(qe=t,Ye=e)}function gc(){Ee.point=fi}function Dv(){Ee.point=Lv}function Fv(){O0(R0,P0)}function Lv(t,e){Ee.point=O0,fi(R0=qe=t,P0=Ye=e)}function O0(t,e){var n=t-qe,i=e-Ye,r=fe(n*n+i*i);ba+=r*(qe+t)/2,_a+=r*(Ye+e)/2,Ci+=r,r=Ye*t-qe*e,Kl+=r*(qe+t),Ql+=r*(Ye+e),yr+=r*3,fi(qe=t,Ye=e)}const bc=Ee;function U0(t){this._context=t}U0.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,de);break}}},result:we};var Jl=new ti,Gf,B0,z0,wr,vr,ya={point:we,lineStart:function(){ya.point=Iv},lineEnd:function(){Gf&&q0(B0,z0),ya.point=we},polygonStart:function(){Gf=!0},polygonEnd:function(){Gf=null},result:function(){var t=+Jl;return Jl=new ti,t}};function Iv(t,e){ya.point=q0,B0=wr=t,z0=vr=e}function q0(t,e){wr-=t,vr-=e,Jl.add(fe(wr*wr+vr*vr)),wr=t,vr=e}const _c=ya;let yc,wa,wc,vc;class xc{constructor(e){this._append=e==null?Y0:Rv(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==wc||this._append!==wa){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,wc=i,wa=this._append,vc=this._,this._=r}this._+=vc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Y0(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Rv(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Y0;if(e!==yc){const n=10**e;yc=e,wa=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return wa}function Za(t,e){let n=3,i=4.5,r,o;function a(f){return f&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),Gn(f,r(o))),o.result()}return a.area=function(f){return Gn(f,r(pc)),pc.result()},a.measure=function(f){return Gn(f,r(_c)),_c.result()},a.bounds=function(f){return Gn(f,r(ga)),ga.result()},a.centroid=function(f){return Gn(f,r(bc)),bc.result()},a.projection=function(f){return arguments.length?(r=f==null?(t=null,Wl):(t=f).stream,a):t},a.context=function(f){return arguments.length?(o=f==null?(e=null,new xc(n)):new U0(e=f),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(f){return arguments.length?(i=typeof f=="function"?f:(o.pointRadius(+f),+f),a):i},a.digits=function(f){if(!arguments.length)return n;if(f==null)n=null;else{const l=Math.floor(f);if(!(l>=0))throw new RangeError(`invalid digits: ${f}`);n=l}return e===null&&(o=new xc(n)),a},a.projection(t).digits(n).context(e)}function ts(t){return{stream:Ka(t)}}function Ka(t){return function(e){var n=new es;for(var i in t)n[i]=t[i];return n.stream=e,n}}function es(){}es.prototype={constructor:es,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Rs(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),Gn(n,t.stream(ga)),e(ga.result()),i!=null&&t.clipExtent(i),t}function Ps(t,e,n){return Rs(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),f=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,l=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([f,l])},n)}function H0(t,e,n){return Ps(t,[[0,0],e],n)}function W0(t,e,n){return Rs(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,f=-o*i[0][1];t.scale(150*o).translate([a,f])},n)}function V0(t,e,n){return Rs(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],f=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,f])},n)}var kc=16,Pv=yt(30*Tt);function Mc(t,e){return+e?Uv(t,e):Ov(t)}function Ov(t){return Ka({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Uv(t,e){function n(i,r,o,a,f,l,u,s,h,c,p,d,m,g){var _=u-i,b=s-r,v=_*_+b*b;if(v>4*e&&m--){var w=a+c,x=f+p,k=l+d,M=fe(w*w+x*x+k*k),S=Me(k/=M),E=kt(kt(k)-1)<bt||kt(o-h)<bt?(o+h)/2:dn(x,w),D=t(E,S),C=D[0],R=D[1],L=C-i,H=R-r,T=b*L-_*H;(T*T/v>e||kt((_*L+b*H)/v-.5)>.3||a*c+f*p+l*d<Pv)&&(n(i,r,o,a,f,l,C,R,E,w/=M,x/=M,k,m,g),g.point(C,R),n(C,R,E,w,x,k,u,s,h,c,p,d,m,g))}}return function(i){var r,o,a,f,l,u,s,h,c,p,d,m,g={point:_,lineStart:b,lineEnd:w,polygonStart:function(){i.polygonStart(),g.lineStart=x},polygonEnd:function(){i.polygonEnd(),g.lineStart=b}};function _(S,E){S=t(S,E),i.point(S[0],S[1])}function b(){h=NaN,g.point=v,i.lineStart()}function v(S,E){var D=Yi([S,E]),C=t(S,E);n(h,c,s,p,d,m,h=C[0],c=C[1],s=S,p=D[0],d=D[1],m=D[2],kc,i),i.point(h,c)}function w(){g.point=_,i.lineEnd()}function x(){b(),g.point=k,g.lineEnd=M}function k(S,E){v(r=S,E),o=h,a=c,f=p,l=d,u=m,g.point=v}function M(){n(h,c,s,p,d,m,o,a,r,f,l,u,kc,i),g.lineEnd=w,w()}return g}}var Bv=Ka({point:function(t,e){this.stream.point(t*Tt,e*Tt)}});function zv(t){return Ka({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function qv(t,e,n,i,r){function o(a,f){return a*=i,f*=r,[e+t*a,n-t*f]}return o.invert=function(a,f){return[(a-e)/t*i,(n-f)/t*r]},o}function $c(t,e,n,i,r,o){if(!o)return qv(t,e,n,i,r);var a=yt(o),f=gt(o),l=a*t,u=f*t,s=a/t,h=f/t,c=(f*n-a*e)/t,p=(f*e+a*n)/t;function d(m,g){return m*=i,g*=r,[l*m-u*g+e,n-u*m-l*g]}return d.invert=function(m,g){return[i*(s*m-h*g+c),r*(p-h*m-s*g)]},d}function Bn(t){return G0(function(){return t})()}function G0(t){var e,n=150,i=480,r=250,o=0,a=0,f=0,l=0,u=0,s,h=0,c=1,p=1,d=null,m=dc,g=null,_,b,v,w=Wl,x=.5,k,M,S,E,D;function C(T){return S(T[0]*Tt,T[1]*Tt)}function R(T){return T=S.invert(T[0],T[1]),T&&[T[0]*Zt,T[1]*Zt]}C.stream=function(T){return E&&D===T?E:E=Bv(zv(s)(m(k(w(D=T)))))},C.preclip=function(T){return arguments.length?(m=T,d=void 0,H()):m},C.postclip=function(T){return arguments.length?(w=T,g=_=b=v=null,H()):w},C.clipAngle=function(T){return arguments.length?(m=+T?kv(d=T*Tt):(d=null,dc),H()):d*Zt},C.clipExtent=function(T){return arguments.length?(w=T==null?(g=_=b=v=null,Wl):D0(g=+T[0][0],_=+T[0][1],b=+T[1][0],v=+T[1][1]),H()):g==null?null:[[g,_],[b,v]]},C.scale=function(T){return arguments.length?(n=+T,L()):n},C.translate=function(T){return arguments.length?(i=+T[0],r=+T[1],L()):[i,r]},C.center=function(T){return arguments.length?(o=T[0]%360*Tt,a=T[1]%360*Tt,L()):[o*Zt,a*Zt]},C.rotate=function(T){return arguments.length?(f=T[0]%360*Tt,l=T[1]%360*Tt,u=T.length>2?T[2]%360*Tt:0,L()):[f*Zt,l*Zt,u*Zt]},C.angle=function(T){return arguments.length?(h=T%360*Tt,L()):h*Zt},C.reflectX=function(T){return arguments.length?(c=T?-1:1,L()):c<0},C.reflectY=function(T){return arguments.length?(p=T?-1:1,L()):p<0},C.precision=function(T){return arguments.length?(k=Mc(M,x=T*T),H()):fe(x)},C.fitExtent=function(T,z){return Ps(C,T,z)},C.fitSize=function(T,z){return H0(C,T,z)},C.fitWidth=function(T,z){return W0(C,T,z)},C.fitHeight=function(T,z){return V0(C,T,z)};function L(){var T=$c(n,0,0,c,p,h).apply(null,e(o,a)),z=$c(n,i-T[0],r-T[1],c,p,h);return s=C0(f,l,u),M=Yl(e,z),S=Yl(s,M),k=Mc(M,x),H()}function H(){return E=D=null,C}return function(){return e=t.apply(this,arguments),C.invert=e.invert&&R,L()}}function Os(t){var e=0,n=wt/3,i=G0(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*Tt,n=o[1]*Tt):[e*Zt,n*Zt]},r}function Yv(t){var e=yt(t);function n(i,r){return[i*e,gt(r)/e]}return n.invert=function(i,r){return[i/e,Me(r*e)]},n}function Hv(t,e){var n=gt(t),i=(n+gt(e))/2;if(kt(i)<bt)return Yv(t);var r=1+n*(2*i-n),o=fe(r)/i;function a(f,l){var u=fe(r-2*i*gt(l))/i;return[u*gt(f*=i),o-u*yt(f)]}return a.invert=function(f,l){var u=o-l,s=dn(f,kt(u))*ye(u);return u*i<0&&(s-=wt*ye(f)*ye(u)),[s/i,Me((r-(f*f+u*u)*i*i)/(2*i))]},a}function va(){return Os(Hv).scale(155.424).center([0,33.6442])}function j0(){return va().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Wv(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Vv(){var t,e,n=j0(),i,r=va().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=va().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f,l,u={point:function(c,p){l=[c,p]}};function s(c){var p=c[0],d=c[1];return l=null,i.point(p,d),l||(o.point(p,d),l)||(f.point(p,d),l)}s.invert=function(c){var p=n.scale(),d=n.translate(),m=(c[0]-d[0])/p,g=(c[1]-d[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?r:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(c)},s.stream=function(c){return t&&e===c?t:t=Wv([n.stream(e=c),r.stream(c),a.stream(c)])},s.precision=function(c){return arguments.length?(n.precision(c),r.precision(c),a.precision(c),h()):n.precision()},s.scale=function(c){return arguments.length?(n.scale(c),r.scale(c*.35),a.scale(c),s.translate(n.translate())):n.scale()},s.translate=function(c){if(!arguments.length)return n.translate();var p=n.scale(),d=+c[0],m=+c[1];return i=n.translate(c).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(u),o=r.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+bt,m+.12*p+bt],[d-.214*p-bt,m+.234*p-bt]]).stream(u),f=a.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+bt,m+.166*p+bt],[d-.115*p-bt,m+.234*p-bt]]).stream(u),h()},s.fitExtent=function(c,p){return Ps(s,c,p)},s.fitSize=function(c,p){return H0(s,c,p)},s.fitWidth=function(c,p){return W0(s,c,p)},s.fitHeight=function(c,p){return V0(s,c,p)};function h(){return t=e=null,s}return s.scale(1070)}function X0(t){return function(e,n){var i=yt(e),r=yt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*gt(e),o*gt(n)]}}function Jr(t){return function(e,n){var i=fe(e*e+n*n),r=t(i),o=gt(r),a=yt(r);return[dn(e*o,i*a),Me(i&&n*o/i)]}}var Z0=X0(function(t){return fe(2/(1+t))});Z0.invert=Jr(function(t){return 2*Me(t/2)});function Gv(){return Bn(Z0).scale(124.75).clipAngle(180-.001)}var K0=X0(function(t){return(t=T0(t))&&t/gt(t)});K0.invert=Jr(function(t){return t});function jv(){return Bn(K0).scale(79.4188).clipAngle(180-.001)}function Qa(t,e){return[t,ca(Is((Ct+e)/2))]}Qa.invert=function(t,e){return[t,2*nr(S0(e))-Ct]};function Xv(){return Q0(Qa).scale(961/de)}function Q0(t){var e=Bn(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,f,l,u;e.scale=function(h){return arguments.length?(i(h),s()):i()},e.translate=function(h){return arguments.length?(r(h),s()):r()},e.center=function(h){return arguments.length?(n(h),s()):n()},e.clipExtent=function(h){return arguments.length?(h==null?a=f=l=u=null:(a=+h[0][0],f=+h[0][1],l=+h[1][0],u=+h[1][1]),s()):a==null?null:[[a,f],[l,u]]};function s(){var h=wt*i(),c=e(mv(e.rotate()).invert([0,0]));return o(a==null?[[c[0]-h,c[1]-h],[c[0]+h,c[1]+h]]:t===Qa?[[Math.max(c[0]-h,a),f],[Math.min(c[0]+h,l),u]]:[[a,Math.max(c[1]-h,f)],[l,Math.min(c[1]+h,u)]])}return s()}function No(t){return Is((Ct+t)/2)}function Zv(t,e){var n=yt(t),i=t===e?gt(t):ca(n/yt(e))/ca(No(e)/No(t)),r=n*Yf(No(t),i)/i;if(!i)return Qa;function o(a,f){r>0?f<-Ct+bt&&(f=-Ct+bt):f>Ct-bt&&(f=Ct-bt);var l=r/Yf(No(f),i);return[l*gt(i*a),r-l*yt(i*a)]}return o.invert=function(a,f){var l=r-f,u=ye(i)*fe(a*a+l*l),s=dn(a,kt(l))*ye(l);return l*i<0&&(s-=wt*ye(a)*ye(l)),[s/i,2*nr(Yf(r/u,1/i))-Ct]},o}function Kv(){return Os(Zv).scale(109.5).parallels([30,30])}function xa(t,e){return[t,e]}xa.invert=xa;function Qv(){return Bn(xa).scale(152.63)}function Jv(t,e){var n=yt(t),i=t===e?gt(t):(n-yt(e))/(e-t),r=n/i+t;if(kt(i)<bt)return xa;function o(a,f){var l=r-f,u=i*a;return[l*gt(u),r-l*yt(u)]}return o.invert=function(a,f){var l=r-f,u=dn(a,kt(l))*ye(l);return l*i<0&&(u-=wt*ye(a)*ye(l)),[u/i,r-ye(i)*fe(a*a+l*l)]},o}function t3(){return Os(Jv).scale(131.154).center([0,13.9389])}var Sr=1.340264,Tr=-.081106,Cr=893e-6,Er=.003796,ka=fe(3)/2,e3=12;function J0(t,e){var n=Me(ka*gt(e)),i=n*n,r=i*i*i;return[t*yt(n)/(ka*(Sr+3*Tr*i+r*(7*Cr+9*Er*i))),n*(Sr+Tr*i+r*(Cr+Er*i))]}J0.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,f,l;o<e3&&(f=n*(Sr+Tr*i+r*(Cr+Er*i))-e,l=Sr+3*Tr*i+r*(7*Cr+9*Er*i),n-=a=f/l,i=n*n,r=i*i*i,!(kt(a)<$0));++o);return[ka*t*(Sr+3*Tr*i+r*(7*Cr+9*Er*i))/yt(n),Me(gt(n)/ka)]};function n3(){return Bn(J0).scale(177.158)}function tp(t,e){var n=yt(e),i=yt(t)*n;return[n*gt(t)/i,gt(e)/i]}tp.invert=Jr(nr);function i3(){return Bn(tp).scale(144.049).clipAngle(60)}function ep(t,e){return[yt(e)*gt(t),gt(e)]}ep.invert=Jr(Me);function r3(){return Bn(ep).scale(249.5).clipAngle(90+bt)}function np(t,e){var n=yt(e),i=1+yt(t)*n;return[n*gt(t)/i,gt(e)/i]}np.invert=Jr(function(t){return 2*nr(t)});function o3(){return Bn(np).scale(250).clipAngle(142)}function ip(t,e){return[ca(Is((Ct+e)/2)),-t]}ip.invert=function(t,e){return[-e,2*nr(S0(t))-Ct]};function a3(){var t=Q0(ip),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function Qe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Ja(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ns=Symbol("implicit");function Us(){var t=new ei,e=[],n=[],i=ns;function r(o){let a=t.get(o);if(a===void 0){if(i!==ns)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new ei;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Us(e,n).unknown(i)},Qe.apply(r,arguments),r}function tf(){var t=Us().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,f=!1,l=0,u=0,s=.5;delete t.unknown;function h(){var c=e().length,p=r<i,d=p?r:i,m=p?i:r;o=(m-d)/Math.max(1,c-l+u*2),f&&(o=Math.floor(o)),d+=(m-d-o*(c-l))*s,a=o*(1-l),f&&(d=Math.round(d),a=Math.round(a));var g=Tl(c).map(function(_){return d+o*_});return n(p?g.reverse():g)}return t.domain=function(c){return arguments.length?(e(c),h()):e()},t.range=function(c){return arguments.length?([i,r]=c,i=+i,r=+r,h()):[i,r]},t.rangeRound=function(c){return[i,r]=c,i=+i,r=+r,f=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(c){return arguments.length?(f=!!c,h()):f},t.padding=function(c){return arguments.length?(l=Math.min(1,u=+c),h()):l},t.paddingInner=function(c){return arguments.length?(l=Math.min(1,c),h()):l},t.paddingOuter=function(c){return arguments.length?(u=+c,h()):u},t.align=function(c){return arguments.length?(s=Math.max(0,Math.min(1,c)),h()):s},t.copy=function(){return tf(e(),[i,r]).round(f).paddingInner(l).paddingOuter(u).align(s)},Qe.apply(h(),arguments)}function rp(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return rp(e())},t}function f3(){return rp(tf.apply(null,arguments).paddingInner(1))}function l3(t){return function(){return t}}function is(t){return+t}var Sc=[0,1];function ve(t){return t}function rs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:l3(isNaN(e)?NaN:.5)}function s3(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function u3(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=rs(r,i),o=n(a,o)):(i=rs(i,r),o=n(o,a)),function(f){return o(i(f))}}function c3(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=rs(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(f){var l=Ua(t,f,1,i)-1;return o[l](r[l](f))}}function to(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ef(){var t=Sc,e=Sc,n=Qr,i,r,o,a=ve,f,l,u;function s(){var c=Math.min(t.length,e.length);return a!==ve&&(a=s3(t[0],t[c-1])),f=c>2?c3:u3,l=u=null,h}function h(c){return c==null||isNaN(c=+c)?o:(l||(l=f(t.map(i),e,n)))(i(a(c)))}return h.invert=function(c){return a(r((u||(u=f(e,t.map(i),Wt)))(c)))},h.domain=function(c){return arguments.length?(t=Array.from(c,is),s()):t.slice()},h.range=function(c){return arguments.length?(e=Array.from(c),s()):e.slice()},h.rangeRound=function(c){return e=Array.from(c),n=Es,s()},h.clamp=function(c){return arguments.length?(a=c?!0:ve,s()):a!==ve},h.interpolate=function(c){return arguments.length?(n=c,s()):n},h.unknown=function(c){return arguments.length?(o=c,h):o},function(c,p){return i=c,r=p,s()}}function op(){return ef()(ve,ve)}function h3(t,e,n,i){var r=$l(t,e,n),o;switch(i=Or(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=dv(r,a))&&(i.precision=o),M0(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=pv(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=hv(r))&&(i.precision=o-(i.type==="%")*2);break}}return er(i)}function eo(t){var e=t.domain;return t.ticks=function(n){var i=e();return Lr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return h3(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],f=i[o],l,u,s=10;for(f<a&&(u=a,a=f,f=u,u=r,r=o,o=u);s-- >0;){if(u=na(a,f,n),u===l)return i[r]=a,i[o]=f,e(i);if(u>0)a=Math.floor(a/u)*u,f=Math.ceil(f/u)*u;else if(u<0)a=Math.ceil(a*u)/u,f=Math.floor(f*u)/u;else break;l=u}return t},t}function Bs(){var t=op();return t.copy=function(){return to(t,Bs())},Qe.apply(t,arguments),eo(t)}function ap(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,is),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return ap(t).unknown(e)},t=arguments.length?Array.from(t,is):[0,1],eo(n)}function fp(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function Tc(t){return Math.log(t)}function Cc(t){return Math.exp(t)}function d3(t){return-Math.log(-t)}function p3(t){return-Math.exp(-t)}function m3(t){return isFinite(t)?+("1e"+t):t<0?0:t}function g3(t){return t===10?m3:t===Math.E?Math.exp:e=>Math.pow(t,e)}function b3(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Ec(t){return(e,n)=>-t(-e,n)}function lp(t){const e=t(Tc,Cc),n=e.domain;let i=10,r,o;function a(){return r=b3(i),o=g3(i),n()[0]<0?(r=Ec(r),o=Ec(o),t(d3,p3)):t(Tc,Cc),e}return e.base=function(f){return arguments.length?(i=+f,a()):i},e.domain=function(f){return arguments.length?(n(f),a()):n()},e.ticks=f=>{const l=n();let u=l[0],s=l[l.length-1];const h=s<u;h&&([u,s]=[s,u]);let c=r(u),p=r(s),d,m;const g=f==null?10:+f;let _=[];if(!(i%1)&&p-c<g){if(c=Math.floor(c),p=Math.ceil(p),u>0){for(;c<=p;++c)for(d=1;d<i;++d)if(m=c<0?d/o(-c):d*o(c),!(m<u)){if(m>s)break;_.push(m)}}else for(;c<=p;++c)for(d=i-1;d>=1;--d)if(m=c>0?d/o(-c):d*o(c),!(m<u)){if(m>s)break;_.push(m)}_.length*2<g&&(_=Lr(u,s,g))}else _=Lr(c,p,Math.min(p-c,g)).map(o);return h?_.reverse():_},e.tickFormat=(f,l)=>{if(f==null&&(f=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Or(l)).precision==null&&(l.trim=!0),l=er(l)),f===1/0)return l;const u=Math.max(1,i*f/e.ticks().length);return s=>{let h=s/o(Math.round(r(s)));return h*i<i-.5&&(h*=i),h<=u?l(s):""}},e.nice=()=>n(fp(n(),{floor:f=>o(Math.floor(r(f))),ceil:f=>o(Math.ceil(r(f)))})),e}function sp(){const t=lp(ef()).domain([1,10]);return t.copy=()=>to(t,sp()).base(t.base()),Qe.apply(t,arguments),t}function Ac(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Nc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function up(t){var e=1,n=t(Ac(e),Nc(e));return n.constant=function(i){return arguments.length?t(Ac(e=+i),Nc(e)):e},eo(n)}function cp(){var t=up(ef());return t.copy=function(){return to(t,cp()).constant(t.constant())},Qe.apply(t,arguments)}function Dc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function _3(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function y3(t){return t<0?-t*t:t*t}function hp(t){var e=t(ve,ve),n=1;function i(){return n===1?t(ve,ve):n===.5?t(_3,y3):t(Dc(n),Dc(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},eo(e)}function dp(){var t=hp(ef());return t.copy=function(){return to(t,dp()).exponent(t.exponent())},Qe.apply(t,arguments),t}function pp(){var t=[],e=[],n=[],i;function r(){var a=0,f=Math.max(1,e.length);for(n=new Array(f-1);++a<f;)n[a-1]=hb(t,a/f);return o}function o(a){return a==null||isNaN(a=+a)?i:e[Ua(n,a)]}return o.invertExtent=function(a){var f=e.indexOf(a);return f<0?[NaN,NaN]:[f>0?n[f-1]:t[0],f<n.length?n[f]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let f of a)f!=null&&!isNaN(f=+f)&&t.push(f);return t.sort(oe),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return pp().domain(t).range(e).unknown(i)},Qe.apply(o,arguments)}function mp(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[Ua(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return mp().domain(t).range(e).unknown(n)},Qe.apply(r,arguments)}const jf=new Date,Xf=new Date;function Nt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),f=r.ceil(o);return o-a<f-o?a:f},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,f)=>{const l=[];if(o=r.ceil(o),f=f==null?1:Math.floor(f),!(o<a)||!(f>0))return l;let u;do l.push(u=new Date(+o)),e(o,f),t(o);while(u<o&&o<a);return l},r.filter=o=>Nt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,f)=>{if(a>=a)if(f<0)for(;++f<=0;)for(;e(a,-1),!o(a););else for(;--f>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(jf.setTime(+o),Xf.setTime(+a),t(jf),t(Xf),Math.floor(n(jf,Xf))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Ma=Nt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ma.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Nt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ma);Ma.range;const sn=1e3,xe=sn*60,un=xe*60,pn=un*24,zs=pn*7,Fc=pn*30,Zf=pn*365,Ae=Nt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*sn)},(t,e)=>(e-t)/sn,t=>t.getUTCSeconds());Ae.range;const no=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sn)},(t,e)=>{t.setTime(+t+e*xe)},(t,e)=>(e-t)/xe,t=>t.getMinutes());no.range;const io=Nt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*xe)},(t,e)=>(e-t)/xe,t=>t.getUTCMinutes());io.range;const ro=Nt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*sn-t.getMinutes()*xe)},(t,e)=>{t.setTime(+t+e*un)},(t,e)=>(e-t)/un,t=>t.getHours());ro.range;const oo=Nt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*un)},(t,e)=>(e-t)/un,t=>t.getUTCHours());oo.range;const ci=Nt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xe)/pn,t=>t.getDate()-1);ci.range;const nf=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pn,t=>t.getUTCDate()-1);nf.range;const rf=Nt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/pn,t=>Math.floor(t/pn));rf.range;function hi(t){return Nt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*xe)/zs)}const Wi=hi(0),Br=hi(1),gp=hi(2),bp=hi(3),li=hi(4),_p=hi(5),yp=hi(6);Wi.range;Br.range;gp.range;bp.range;li.range;_p.range;yp.range;function di(t){return Nt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/zs)}const Vi=di(0),zr=di(1),wp=di(2),vp=di(3),si=di(4),xp=di(5),kp=di(6);Vi.range;zr.range;wp.range;vp.range;si.range;xp.range;kp.range;const ao=Nt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ao.range;const fo=Nt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());fo.range;const Fe=Nt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Fe.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Fe.range;const Le=Nt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Le.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Nt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Le.range;function Mp(t,e,n,i,r,o){const a=[[Ae,1,sn],[Ae,5,5*sn],[Ae,15,15*sn],[Ae,30,30*sn],[o,1,xe],[o,5,5*xe],[o,15,15*xe],[o,30,30*xe],[r,1,un],[r,3,3*un],[r,6,6*un],[r,12,12*un],[i,1,pn],[i,2,2*pn],[n,1,zs],[e,1,Fc],[e,3,3*Fc],[t,1,Zf]];function f(u,s,h){const c=s<u;c&&([u,s]=[s,u]);const p=h&&typeof h.range=="function"?h:l(u,s,h),d=p?p.range(u,+s+1):[];return c?d.reverse():d}function l(u,s,h){const c=Math.abs(s-u)/h,p=Oa(([,,g])=>g).right(a,c);if(p===a.length)return t.every($l(u/Zf,s/Zf,h));if(p===0)return Ma.every(Math.max($l(u,s,h),1));const[d,m]=a[c/a[p-1][2]<a[p][2]/c?p-1:p];return d.every(m)}return[f,l]}const[w3,$p]=Mp(Le,fo,Vi,rf,oo,io),[v3,x3]=Mp(Fe,ao,Wi,ci,ro,no);function Kf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Qf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ur(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function k3(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,f=t.months,l=t.shortMonths,u=cr(r),s=hr(r),h=cr(o),c=hr(o),p=cr(a),d=hr(a),m=cr(f),g=hr(f),_=cr(l),b=hr(l),v={a:I,A:K,b:V,B:W,c:null,d:Uc,e:Uc,f:V3,g:n6,G:r6,H:Y3,I:H3,j:W3,L:Sp,m:G3,M:j3,p:F,q:Y,Q:qc,s:Yc,S:X3,u:Z3,U:K3,V:Q3,w:J3,W:t6,x:null,X:null,y:e6,Y:i6,Z:o6,"%":zc},w={a:Z,A:nt,b:J,B:X,c:null,d:Bc,e:Bc,f:s6,g:y6,G:v6,H:a6,I:f6,j:l6,L:Cp,m:u6,M:c6,p:q,q:N,Q:qc,s:Yc,S:h6,u:d6,U:p6,V:m6,w:g6,W:b6,x:null,X:null,y:_6,Y:w6,Z:x6,"%":zc},x={a:D,A:C,b:R,B:L,c:H,d:Pc,e:Pc,f:U3,g:Rc,G:Ic,H:Oc,I:Oc,j:I3,L:O3,m:L3,M:R3,p:E,q:F3,Q:z3,s:q3,S:P3,u:C3,U:E3,V:A3,w:T3,W:N3,x:T,X:z,y:Rc,Y:Ic,Z:D3,"%":B3};v.x=k(n,v),v.X=k(i,v),v.c=k(e,v),w.x=k(n,w),w.X=k(i,w),w.c=k(e,w);function k(A,P){return function(tt){var B=[],ht=-1,ot=0,dt=A.length,at,ct,zt;for(tt instanceof Date||(tt=new Date(+tt));++ht<dt;)A.charCodeAt(ht)===37&&(B.push(A.slice(ot,ht)),(ct=Lc[at=A.charAt(++ht)])!=null?at=A.charAt(++ht):ct=at==="e"?" ":"0",(zt=P[at])&&(at=zt(tt,ct)),B.push(at),ot=ht+1);return B.push(A.slice(ot,ht)),B.join("")}}function M(A,P){return function(tt){var B=ur(1900,void 0,1),ht=S(B,A,tt+="",0),ot,dt;if(ht!=tt.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(B.s*1e3+("L"in B?B.L:0));if(P&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+B.p*12),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(ot=Qf(ur(B.y,0,1)),dt=ot.getUTCDay(),ot=dt>4||dt===0?zr.ceil(ot):zr(ot),ot=nf.offset(ot,(B.V-1)*7),B.y=ot.getUTCFullYear(),B.m=ot.getUTCMonth(),B.d=ot.getUTCDate()+(B.w+6)%7):(ot=Kf(ur(B.y,0,1)),dt=ot.getDay(),ot=dt>4||dt===0?Br.ceil(ot):Br(ot),ot=ci.offset(ot,(B.V-1)*7),B.y=ot.getFullYear(),B.m=ot.getMonth(),B.d=ot.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),dt="Z"in B?Qf(ur(B.y,0,1)).getUTCDay():Kf(ur(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(dt+5)%7:B.w+B.U*7-(dt+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,Qf(B)):Kf(B)}}function S(A,P,tt,B){for(var ht=0,ot=P.length,dt=tt.length,at,ct;ht<ot;){if(B>=dt)return-1;if(at=P.charCodeAt(ht++),at===37){if(at=P.charAt(ht++),ct=x[at in Lc?P.charAt(ht++):at],!ct||(B=ct(A,tt,B))<0)return-1}else if(at!=tt.charCodeAt(B++))return-1}return B}function E(A,P,tt){var B=u.exec(P.slice(tt));return B?(A.p=s.get(B[0].toLowerCase()),tt+B[0].length):-1}function D(A,P,tt){var B=p.exec(P.slice(tt));return B?(A.w=d.get(B[0].toLowerCase()),tt+B[0].length):-1}function C(A,P,tt){var B=h.exec(P.slice(tt));return B?(A.w=c.get(B[0].toLowerCase()),tt+B[0].length):-1}function R(A,P,tt){var B=_.exec(P.slice(tt));return B?(A.m=b.get(B[0].toLowerCase()),tt+B[0].length):-1}function L(A,P,tt){var B=m.exec(P.slice(tt));return B?(A.m=g.get(B[0].toLowerCase()),tt+B[0].length):-1}function H(A,P,tt){return S(A,e,P,tt)}function T(A,P,tt){return S(A,n,P,tt)}function z(A,P,tt){return S(A,i,P,tt)}function I(A){return a[A.getDay()]}function K(A){return o[A.getDay()]}function V(A){return l[A.getMonth()]}function W(A){return f[A.getMonth()]}function F(A){return r[+(A.getHours()>=12)]}function Y(A){return 1+~~(A.getMonth()/3)}function Z(A){return a[A.getUTCDay()]}function nt(A){return o[A.getUTCDay()]}function J(A){return l[A.getUTCMonth()]}function X(A){return f[A.getUTCMonth()]}function q(A){return r[+(A.getUTCHours()>=12)]}function N(A){return 1+~~(A.getUTCMonth()/3)}return{format:function(A){var P=k(A+="",v);return P.toString=function(){return A},P},parse:function(A){var P=M(A+="",!1);return P.toString=function(){return A},P},utcFormat:function(A){var P=k(A+="",w);return P.toString=function(){return A},P},utcParse:function(A){var P=M(A+="",!0);return P.toString=function(){return A},P}}}var Lc={"-":"",_:" ",0:"0"},Bt=/^\s*\d+/,M3=/^%/,$3=/[\\^$*+?|[\]().{}]/g;function xt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function S3(t){return t.replace($3,"\\$&")}function cr(t){return new RegExp("^(?:"+t.map(S3).join("|")+")","i")}function hr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function T3(t,e,n){var i=Bt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function C3(t,e,n){var i=Bt.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function E3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function A3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function N3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Ic(t,e,n){var i=Bt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Rc(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function D3(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function F3(t,e,n){var i=Bt.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function L3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Pc(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function I3(t,e,n){var i=Bt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Oc(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function R3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function P3(t,e,n){var i=Bt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function O3(t,e,n){var i=Bt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function U3(t,e,n){var i=Bt.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function B3(t,e,n){var i=M3.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function z3(t,e,n){var i=Bt.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function q3(t,e,n){var i=Bt.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Uc(t,e){return xt(t.getDate(),e,2)}function Y3(t,e){return xt(t.getHours(),e,2)}function H3(t,e){return xt(t.getHours()%12||12,e,2)}function W3(t,e){return xt(1+ci.count(Fe(t),t),e,3)}function Sp(t,e){return xt(t.getMilliseconds(),e,3)}function V3(t,e){return Sp(t,e)+"000"}function G3(t,e){return xt(t.getMonth()+1,e,2)}function j3(t,e){return xt(t.getMinutes(),e,2)}function X3(t,e){return xt(t.getSeconds(),e,2)}function Z3(t){var e=t.getDay();return e===0?7:e}function K3(t,e){return xt(Wi.count(Fe(t)-1,t),e,2)}function Tp(t){var e=t.getDay();return e>=4||e===0?li(t):li.ceil(t)}function Q3(t,e){return t=Tp(t),xt(li.count(Fe(t),t)+(Fe(t).getDay()===4),e,2)}function J3(t){return t.getDay()}function t6(t,e){return xt(Br.count(Fe(t)-1,t),e,2)}function e6(t,e){return xt(t.getFullYear()%100,e,2)}function n6(t,e){return t=Tp(t),xt(t.getFullYear()%100,e,2)}function i6(t,e){return xt(t.getFullYear()%1e4,e,4)}function r6(t,e){var n=t.getDay();return t=n>=4||n===0?li(t):li.ceil(t),xt(t.getFullYear()%1e4,e,4)}function o6(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+xt(e/60|0,"0",2)+xt(e%60,"0",2)}function Bc(t,e){return xt(t.getUTCDate(),e,2)}function a6(t,e){return xt(t.getUTCHours(),e,2)}function f6(t,e){return xt(t.getUTCHours()%12||12,e,2)}function l6(t,e){return xt(1+nf.count(Le(t),t),e,3)}function Cp(t,e){return xt(t.getUTCMilliseconds(),e,3)}function s6(t,e){return Cp(t,e)+"000"}function u6(t,e){return xt(t.getUTCMonth()+1,e,2)}function c6(t,e){return xt(t.getUTCMinutes(),e,2)}function h6(t,e){return xt(t.getUTCSeconds(),e,2)}function d6(t){var e=t.getUTCDay();return e===0?7:e}function p6(t,e){return xt(Vi.count(Le(t)-1,t),e,2)}function Ep(t){var e=t.getUTCDay();return e>=4||e===0?si(t):si.ceil(t)}function m6(t,e){return t=Ep(t),xt(si.count(Le(t),t)+(Le(t).getUTCDay()===4),e,2)}function g6(t){return t.getUTCDay()}function b6(t,e){return xt(zr.count(Le(t)-1,t),e,2)}function _6(t,e){return xt(t.getUTCFullYear()%100,e,2)}function y6(t,e){return t=Ep(t),xt(t.getUTCFullYear()%100,e,2)}function w6(t,e){return xt(t.getUTCFullYear()%1e4,e,4)}function v6(t,e){var n=t.getUTCDay();return t=n>=4||n===0?si(t):si.ceil(t),xt(t.getUTCFullYear()%1e4,e,4)}function x6(){return"+0000"}function zc(){return"%"}function qc(t){return+t}function Yc(t){return Math.floor(+t/1e3)}var ki,qs,lo;k6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function k6(t){return ki=k3(t),qs=ki.format,ki.parse,lo=ki.utcFormat,ki.utcParse,ki}function M6(t){return new Date(t)}function $6(t){return t instanceof Date?+t:+new Date(+t)}function Ys(t,e,n,i,r,o,a,f,l,u){var s=op(),h=s.invert,c=s.domain,p=u(".%L"),d=u(":%S"),m=u("%I:%M"),g=u("%I %p"),_=u("%a %d"),b=u("%b %d"),v=u("%B"),w=u("%Y");function x(k){return(l(k)<k?p:f(k)<k?d:a(k)<k?m:o(k)<k?g:i(k)<k?r(k)<k?_:b:n(k)<k?v:w)(k)}return s.invert=function(k){return new Date(h(k))},s.domain=function(k){return arguments.length?c(Array.from(k,$6)):c().map(M6)},s.ticks=function(k){var M=c();return t(M[0],M[M.length-1],k??10)},s.tickFormat=function(k,M){return M==null?x:u(M)},s.nice=function(k){var M=c();return(!k||typeof k.range!="function")&&(k=e(M[0],M[M.length-1],k??10)),k?c(fp(M,k)):s},s.copy=function(){return to(s,Ys(t,e,n,i,r,o,a,f,l,u))},s}function S6(){return Qe.apply(Ys(v3,x3,Fe,ao,Wi,ci,ro,no,Ae,qs).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T6(){return Qe.apply(Ys(w3,$p,Le,fo,Vi,nf,oo,io,Ae,lo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function of(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function af(){var t=0,e=.5,n=1,i=1,r,o,a,f,l,u=ve,s,h=!1,c;function p(m){return isNaN(m=+m)?c:(m=.5+((m=+s(m))-o)*(i*m<i*o?f:l),u(h?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,r=s(t=+t),o=s(e=+e),a=s(n=+n),f=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(h=!!m,p):h},p.interpolator=function(m){return arguments.length?(u=m,p):u};function d(m){return function(g){var _,b,v;return arguments.length?([_,b,v]=g,u=Ga(m,[_,b,v]),p):[u(0),u(.5),u(1)]}}return p.range=d(Qr),p.rangeRound=d(Es),p.unknown=function(m){return arguments.length?(c=m,p):c},function(m){return s=m,r=m(t),o=m(e),a=m(n),f=r===o?0:.5/(o-r),l=o===a?0:.5/(a-o),i=o<r?-1:1,p}}function Ap(){var t=eo(af()(ve));return t.copy=function(){return of(t,Ap())},Ja.apply(t,arguments)}function Np(){var t=lp(af()).domain([.1,1,10]);return t.copy=function(){return of(t,Np()).base(t.base())},Ja.apply(t,arguments)}function Dp(){var t=up(af());return t.copy=function(){return of(t,Dp()).constant(t.constant())},Ja.apply(t,arguments)}function Fp(){var t=hp(af());return t.copy=function(){return of(t,Fp()).exponent(t.exponent())},Ja.apply(t,arguments)}function _t(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const C6=_t("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),E6=_t("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),A6=_t("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),N6=_t("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),D6=_t("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),F6=_t("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),L6=_t("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),I6=_t("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),R6=_t("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),P6=_t("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Mt=t=>Ty(t[t.length-1]);var Lp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(_t);const Ip=Mt(Lp);var Rp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(_t);const Pp=Mt(Rp);var Op=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(_t);const Up=Mt(Op);var Bp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(_t);const zp=Mt(Bp);var os=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(_t);const $a=Mt(os);var qp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(_t);const Yp=Mt(qp);var as=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(_t);const Sa=Mt(as);var Hp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(_t);const Wp=Mt(Hp);var Vp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(_t);const Gp=Mt(Vp);var jp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(_t);const Xp=Mt(jp);var Zp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(_t);const Kp=Mt(Zp);var Qp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(_t);const Jp=Mt(Qp);var t1=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(_t);const e1=Mt(t1);var n1=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(_t);const i1=Mt(n1);var r1=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(_t);const o1=Mt(r1);var a1=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(_t);const f1=Mt(a1);var l1=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(_t);const s1=Mt(l1);var u1=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(_t);const c1=Mt(u1);var h1=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(_t);const d1=Mt(h1);var p1=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(_t);const m1=Mt(p1);var g1=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(_t);const b1=Mt(g1);var _1=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(_t);const y1=Mt(_1);var w1=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(_t);const v1=Mt(w1);var x1=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(_t);const k1=Mt(x1);var M1=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(_t);const $1=Mt(M1);var S1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(_t);const T1=Mt(S1);var C1=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(_t);const E1=Mt(C1);function A1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const N1=As(Xe(300,.5,0),Xe(-240,.5,1));var D1=As(Xe(-100,.75,.35),Xe(80,1.5,.8)),F1=As(Xe(260,.75,.35),Xe(80,1.5,.8)),Do=Xe();function L1(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Do.h=360*t-100,Do.s=1.5-1.5*e,Do.l=.8-.9*e,Do+""}var Fo=In(),O6=Math.PI/3,U6=Math.PI*2/3;function I1(t){var e;return t=(.5-t)*Math.PI,Fo.r=255*(e=Math.sin(t))*e,Fo.g=255*(e=Math.sin(t+O6))*e,Fo.b=255*(e=Math.sin(t+U6))*e,Fo+""}function R1(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function ff(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const P1=ff(_t("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var O1=ff(_t("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),U1=ff(_t("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),B1=ff(_t("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Mi(t){return function(){return t}}const z1=Math.cos,Hs=Math.min,Ta=Math.sin,Dt=Math.sqrt,Hc=1e-12,Ca=Math.PI,lf=2*Ca;function B6(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new x0(e)}function z6(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function q1(t){this._context=t}q1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function sf(t){return new q1(t)}function q6(t){return t[0]}function Y6(t){return t[1]}function H6(t,e){var n=Mi(!0),i=null,r=sf,o=null,a=B6(f);t=typeof t=="function"?t:t===void 0?q6:Mi(t),e=typeof e=="function"?e:e===void 0?Y6:Mi(e);function f(l){var u,s=(l=z6(l)).length,h,c=!1,p;for(i==null&&(o=r(p=a())),u=0;u<=s;++u)!(u<s&&n(h=l[u],u,l))===c&&((c=!c)?o.lineStart():o.lineEnd()),c&&o.point(+t(h,u,l),+e(h,u,l));if(p)return o=null,p+""||null}return f.x=function(l){return arguments.length?(t=typeof l=="function"?l:Mi(+l),f):t},f.y=function(l){return arguments.length?(e=typeof l=="function"?l:Mi(+l),f):e},f.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Mi(!!l),f):n},f.curve=function(l){return arguments.length?(r=l,i!=null&&(o=r(i)),f):r},f.context=function(l){return arguments.length?(l==null?i=o=null:o=r(i=l),f):i},f}class Y1{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function W6(t){return new Y1(t,!0)}function V6(t){return new Y1(t,!1)}const G6=Dt(3),H1={draw(t,e){const n=Dt(e+Hs(e/28,.75))*.59436,i=n/2,r=i*G6;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},qr={draw(t,e){const n=Dt(e/Ca);t.moveTo(n,0),t.arc(0,0,n,0,lf)}},W1={draw(t,e){const n=Dt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},V1=Dt(1/3),j6=V1*2,G1={draw(t,e){const n=Dt(e/j6),i=n*V1;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},j1={draw(t,e){const n=Dt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},X1={draw(t,e){const n=Dt(e-Hs(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Z1={draw(t,e){const n=Dt(e),i=-n/2;t.rect(i,i,n,n)}},K1={draw(t,e){const n=Dt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},X6=.8908130915292852,Q1=Ta(Ca/10)/Ta(7*Ca/10),Z6=Ta(lf/10)*Q1,K6=-z1(lf/10)*Q1,J1={draw(t,e){const n=Dt(e*X6),i=Z6*n,r=K6*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=lf*o/5,f=z1(a),l=Ta(a);t.lineTo(l*n,-f*n),t.lineTo(f*i-l*r,l*i+f*r)}t.closePath()}},Jf=Dt(3),tm={draw(t,e){const n=-Dt(e/(Jf*3));t.moveTo(0,n*2),t.lineTo(-Jf*n,-n),t.lineTo(Jf*n,-n),t.closePath()}},Q6=Dt(3),em={draw(t,e){const n=Dt(e)*.6824,i=n/2,r=n*Q6/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},ge=-.5,be=Dt(3)/2,fs=1/Dt(12),J6=(fs/2+1)*3,nm={draw(t,e){const n=Dt(e/J6),i=n/2,r=n*fs,o=i,a=n*fs+n,f=-o,l=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(f,l),t.lineTo(ge*i-be*r,be*i+ge*r),t.lineTo(ge*o-be*a,be*o+ge*a),t.lineTo(ge*f-be*l,be*f+ge*l),t.lineTo(ge*i+be*r,ge*r-be*i),t.lineTo(ge*o+be*a,ge*a-be*o),t.lineTo(ge*f+be*l,ge*l-be*f),t.closePath()}},im={draw(t,e){const n=Dt(e-Hs(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},t5=[qr,W1,G1,Z1,J1,tm,nm],e5=[qr,X1,im,em,H1,K1,j1];function Rn(){}function Ea(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function uf(t){this._context=t}uf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ea(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ea(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function n5(t){return new uf(t)}function rm(t){this._context=t}rm.prototype={areaStart:Rn,areaEnd:Rn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ea(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function i5(t){return new rm(t)}function om(t){this._context=t}om.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Ea(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function r5(t){return new om(t)}function am(t,e){this._basis=new uf(t),this._beta=e}am.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,f=-1,l;++f<=n;)l=f/n,this._basis.point(this._beta*t[f]+(1-this._beta)*(i+l*o),this._beta*e[f]+(1-this._beta)*(r+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const o5=function t(e){function n(i){return e===1?new uf(i):new am(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Aa(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Ws(t,e){this._context=t,this._k=(1-e)/6}Ws.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Aa(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Aa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const a5=function t(e){function n(i){return new Ws(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Vs(t,e){this._context=t,this._k=(1-e)/6}Vs.prototype={areaStart:Rn,areaEnd:Rn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Aa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const f5=function t(e){function n(i){return new Vs(i,e)}return n.tension=function(i){return t(+i)},n}(0);function Gs(t,e){this._context=t,this._k=(1-e)/6}Gs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Aa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const l5=function t(e){function n(i){return new Gs(i,e)}return n.tension=function(i){return t(+i)},n}(0);function js(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Hc){var f=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*f-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*f-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Hc){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-e*t._l12_2a)/s,a=(a*u+t._y1*t._l23_2a-n*t._l12_2a)/s}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function fm(t,e){this._context=t,this._alpha=e}fm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:js(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const s5=function t(e){function n(i){return e?new fm(i,e):new Ws(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function lm(t,e){this._context=t,this._alpha=e}lm.prototype={areaStart:Rn,areaEnd:Rn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:js(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const u5=function t(e){function n(i){return e?new lm(i,e):new Vs(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function sm(t,e){this._context=t,this._alpha=e}sm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:js(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const c5=function t(e){function n(i){return e?new sm(i,e):new Gs(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function um(t){this._context=t}um.prototype={areaStart:Rn,areaEnd:Rn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function h5(t){return new um(t)}function Wc(t){return t<0?-1:1}function Vc(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),f=(o*r+a*i)/(i+r);return(Wc(o)+Wc(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(f))||0}function Gc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function tl(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,f=(o-i)/3;t._context.bezierCurveTo(i+f,r+f*e,o-f,a-f*n,o,a)}function Na(t){this._context=t}Na.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tl(this,this._t0,Gc(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,tl(this,Gc(this,n=Vc(this,t,e)),n);break;default:tl(this,this._t0,n=Vc(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function cm(t){this._context=new hm(t)}(cm.prototype=Object.create(Na.prototype)).point=function(t,e){Na.prototype.point.call(this,e,t)};function hm(t){this._context=t}hm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function d5(t){return new Na(t)}function p5(t){return new cm(t)}function dm(t){this._context=t}dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=jc(t),r=jc(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function jc(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function m5(t){return new dm(t)}function cf(t,e){this._context=t,this._t=e}cf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function g5(t){return new cf(t,.5)}function b5(t){return new cf(t,0)}function _5(t){return new cf(t,1)}function xr(t,e,n){this.k=t,this.x=e,this.y=n}xr.prototype={constructor:xr,scale:function(t){return t===1?this:new xr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new xr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};xr.prototype;function Pn(t){return t!=null&&!Number.isNaN(t)}function Ie(t,e){return+Pn(e)-+Pn(t)||oe(t,e)}function Da(t,e){return+Pn(e)-+Pn(t)||jr(t,e)}function Xs(t){return t!=null&&`${t}`!=""}function pm(t){return isFinite(t)?t:NaN}function hf(t){return t>0&&isFinite(t)?t:NaN}function Zs(t){return t<0&&isFinite(t)?t:NaN}function y5(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${w5(t.getUTCFullYear())}-${fn(t.getUTCMonth()+1,2)}-${fn(t.getUTCDate(),2)}${n||i||r||o?`T${fn(n,2)}:${fn(i,2)}${r||o?`:${fn(r,2)}${o?`.${fn(o,3)}`:""}`:""}Z`:""}`}function w5(t){return t<0?`-${fn(-t,6)}`:t>9999?`+${fn(t,6)}`:fn(t,4)}function fn(t,e){return`${t}`.padStart(e,"0")}const v5=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function mm(t,e){return v5.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Ei=1e3,Sn=Ei*60,Tn=Sn*60,Ze=Tn*24,ze=Ze*7,Jn=Ze*30,kn=Ze*365,el=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Ei],["5 seconds",5*Ei],["15 seconds",15*Ei],["30 seconds",30*Ei],["minute",Sn],["5 minutes",5*Sn],["15 minutes",15*Sn],["30 minutes",30*Sn],["hour",Tn],["3 hours",3*Tn],["6 hours",6*Tn],["12 hours",12*Tn],["day",Ze],["2 days",2*Ze],["week",ze],["2 weeks",2*ze],["month",Jn],["3 months",3*Jn],["6 months",6*Jn],["year",kn],["2 years",2*kn],["5 years",5*kn],["10 years",10*kn],["20 years",20*kn],["50 years",50*kn],["100 years",100*kn]],Ks=new Map([["second",Ei],["minute",Sn],["hour",Tn],["day",Ze],["monday",ze],["tuesday",ze],["wednesday",ze],["thursday",ze],["friday",ze],["saturday",ze],["sunday",ze],["week",ze],["month",Jn],["year",kn]]),gm=new Map([["second",Ae],["minute",no],["hour",ro],["day",ci],["monday",Br],["tuesday",gp],["wednesday",bp],["thursday",li],["friday",_p],["saturday",yp],["sunday",Wi],["week",Wi],["month",ao],["year",Fe]]),Qs=new Map([["second",Ae],["minute",io],["hour",oo],["day",rf],["monday",zr],["tuesday",wp],["wednesday",vp],["thursday",si],["friday",xp],["saturday",kp],["sunday",Vi],["week",Vi],["month",fo],["year",Le]]),so=Symbol("intervalDuration"),df=Symbol("intervalType");for(const[t,e]of gm)e[so]=Ks.get(t),e[df]="time";for(const[t,e]of Qs)e[so]=Ks.get(t),e[df]="utc";const kr=[["year",Le,"utc"],["month",fo,"utc"],["day",rf,"utc",6*Jn],["hour",oo,"utc",3*Ze],["minute",io,"utc",6*Tn],["second",Ae,"utc",30*Sn]],Xo=[["year",Fe,"time"],["month",ao,"time"],["day",ci,"time",6*Jn],["hour",ro,"time",3*Ze],["minute",no,"time",6*Tn],["second",Ae,"time",30*Sn]],x5=[kr[0],Xo[0],kr[1],Xo[1],kr[2],Xo[2],...kr.slice(3)];function bm(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=Qs.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function _m(t){return ym(bm(t),"time")}function Js(t){return ym(bm(t),"utc")}function ym([t,e],n){let i=(n==="time"?gm:Qs).get(t);return e>1&&(i=i.every(e),i[so]=Ks.get(t)*e,i[df]=n),i}function Xc(t,e){if(!(e>1))return;const n=t[so];if(!el.some(([,r])=>r===n)||n%Ze===0&&Ze<n&&n<Jn)return;const[i]=el[Oa(([,r])=>Math.log(r)).center(el,Math.log(n*e))];return(t[df]==="time"?_m:Js)(i)}function Zc(t,e,n){const i=e==="time"?qs:lo;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=k5(n);switch(t){case"millisecond":return $i(i(".%L"),i(":%M:%S"),r);case"second":return $i(i(":%S"),i("%-I:%M"),r);case"minute":return $i(i("%-I:%M"),i("%p"),r);case"hour":return $i(i("%-I %p"),i("%b %-d"),r);case"day":return $i(i("%-d"),i("%b"),r);case"month":return $i(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function k5(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function M5(t){return t==="time"?Xo:t==="utc"?kr:x5}function $5(t,e,n){const i=ce(gb(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return Zc("millisecond","utc",n);for(const[r,o,a,f]of M5(t)){if(i>f||r==="hour"&&!i)break;if(e.every(l=>o.floor(l)>=l))return Zc(r,a,n)}}function $i(t,e,n){return(i,r,o)=>{const a=t(i,r),f=e(i,r),l=r-ji(o);return r!==l&&o[l]!==void 0&&f===e(o[l],l)?a:n(a,f)}}const Yr=Object.getPrototypeOf(Uint8Array),S5=Object.prototype.toString,wm=Symbol("reindex");function Rt(t,e,n){const i=typeof e;return i==="string"?Kc(t,vm(e),n):i==="function"?Kc(t,e,n):i==="number"||e instanceof Date||i==="boolean"?At(t,uo(e),n):typeof(e==null?void 0:e.transform)=="function"?Qc(e.transform(t),n):T5(Qc(e,n),t==null?void 0:t[wm])}function T5(t,e){return e?iu(t,e):t}function Kc(t,e,n){return At(t,(n==null?void 0:n.prototype)instanceof Yr?C5(e):e,n)}function Qc(t,e){return e===void 0?pe(t):t instanceof e?t:e.prototype instanceof Yr&&!(t instanceof Yr)?e.from(t,nu):e.from(t)}function C5(t){return(e,n)=>nu(t(e,n))}const Zo=[null],vm=t=>e=>e[t],tu={transform:bn},Xt={transform:t=>t},E5=()=>1,A5=()=>!0,Kt=t=>t==null?t:`${t}`,St=t=>t==null?t:+t,eu=t=>t?t[0]:void 0,ls=t=>t?t[1]:void 0,uo=t=>()=>t;function N5(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Pi(n,e,i)}function We(t){return t instanceof Yr?t:At(t,nu,Float64Array)}function nu(t){return t==null?NaN:Number(t)}function D5(t){return At(t,xm)}function xm(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?mm(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function mn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:gf(t)?[void 0,t]:[t,void 0]}function Qt(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function km(t,e,n){if(t!=null)return Pe(t,e,n)}function Pe(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function pe(t){return t==null||t instanceof Array||t instanceof Yr?t:Array.from(t)}function At(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Hr(t,e=Array){return t instanceof e?t.slice():e.from(t)}function F5({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function Mm({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function L5(t){return F5(t)||Mm(t)||t.interval!==void 0}function zn(t){return(t==null?void 0:t.toString)===S5}function ss(t){return zn(t)&&(t.type!==void 0||t.domain!==void 0)}function pf(t){return zn(t)&&typeof t.transform!="function"}function Gi(t){return pf(t)&&t.value===void 0&&t.channel===void 0}function I5(t,e,n,i=Xt){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function mf(t,e){return t===void 0&&e===void 0?[eu,ls]:[t,e]}function $m({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=mn(e)),t===void 0&&([t]=mn(n)),t}function bn(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function iu(t,e){return At(e,n=>t[n],t.constructor)}function R5(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function Zn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function P5(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Fa(t){let e;return[{transform:()=>e,label:pi(t)},n=>e=n]}function on(t){return t==null?[t]:Fa(t)}function pi(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function us(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return le(i)||le(r)?At(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):At(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function Sm(t,e){const n=Tm(e==null?void 0:e.interval,e==null?void 0:e.type);return n?At(t,n):t}function Tm(t,e){const n=ru(t,e);return n&&(i=>Pn(i)?n.floor(i):i)}function ru(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Tl(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Tl(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?_m:Js)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function ir(t,e){if(t=ru(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function O5(t,e){if(t=ir(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function U5(t){return Ai(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Ai(t){return typeof(t==null?void 0:t.range)=="function"}function co(t){return t===void 0||pf(t)?t:{value:t}}function B5(t){return t==null?null:{transform:e=>Rt(e,t,Float64Array),label:pi(t)}}function qn(t){return t&&typeof t[Symbol.iterator]=="function"}function Cm(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function Jc(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function le(t){for(const e of t)if(e!=null)return e instanceof Date}function z5(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&mm(e)}function q5(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function Y5(t){for(const e of t)if(e!=null)return typeof e=="number"}function nl(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const H5=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function gf(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||H5.has(t))}function W5(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function ie(t){return t==null||Wr(t)}function Wr(t){return/^\s*none\s*$/i.test(t)}function V5(t){return/^\s*round\s*$/i.test(t)}function cs(t,e){return km(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function bf(t="middle"){return cs(t,"frameAnchor")}function ji(t){if(t==null)return;const e=t[0],n=t[t.length-1];return jr(e,n)}function G5(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function j5(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function Em(t){return qn(t)?j5(t):t}const Ve=Symbol("position"),_n=Symbol("color"),ho=Symbol("radius"),po=Symbol("length"),mo=Symbol("opacity"),_f=Symbol("symbol"),Am=Symbol("projection"),Et=new Map([["x",Ve],["y",Ve],["fx",Ve],["fy",Ve],["r",ho],["color",_n],["opacity",mo],["symbol",_f],["length",po],["projection",Am]]);function X5(t){return t===Ve||t===Am}function Z5(t){return t===Ve||t===ho||t===po||t===mo}const K5=Math.sqrt(3),Q5=2/K5,J5={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*Q5,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},ou=new Map([["asterisk",H1],["circle",qr],["cross",W1],["diamond",G1],["diamond2",j1],["hexagon",J5],["plus",X1],["square",Z1],["square2",K1],["star",J1],["times",im],["triangle",tm],["triangle2",em],["wye",nm]]);function au(t){return t&&typeof t.draw=="function"}function t4(t){return au(t)?!0:typeof t!="string"?!1:ou.has(t.toLowerCase())}function fu(t){if(t==null||au(t))return t;const e=ou.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function e4(t){if(t==null||au(t))return[void 0,t];if(typeof t=="string"){const e=ou.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function yf({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=Nm(t)),e!=null&&!Gi(e)&&(i=il(i,lu(e))),n&&(i=il(i,Dm))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||Gi(e))&&{sort:e},transform:il(i,a)}}function Xi({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=Nm(t)),e!=null&&!Gi(e)&&(i=rl(i,lu(e))),n&&(i=rl(i,Dm))),{...r,...(e===null||Gi(e))&&{sort:e},initializer:rl(i,o)}}function il(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,pe(n),i,r)}}function rl(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,f,l,u,s,h;return{data:f=n,facets:l=i,channels:a}=t.call(this,n,i,r,...o),{data:s=f,facets:h=l,channels:u}=e.call(this,f,l,{...r,...a},...o),{data:s,facets:h,channels:{...a,...u}}}}function n4(t,e){return(t.initializer!=null?Xi:yf)(t,e)}function Nm(t){return(e,n)=>{const i=Rt(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function Dm(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function i4(t,{sort:e,...n}={}){return{...(pf(t)&&t.channel!==void 0?Xi:n4)(n,lu(t)),sort:Gi(e)?e:null}}function lu(t){return(typeof t=="function"&&t.length!==1?r4:o4)(t)}function r4(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function o4(t){let e,n;({channel:e,value:t,order:n}={...co(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Da:Ie),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ie;break;case"descending":n=Da;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let f;if(e===void 0)f=Rt(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(f=a[e],!f)return{};f=f.value}const l=(u,s)=>n(f[u],f[s]);return{data:r,facets:o.map(u=>u.slice().sort(l))}}}function Lo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function a4(t,e,n=Fm){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",d4]),e.href!=null&&t.href===void 0&&i.push(["href",uu]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?f4(r):n(r,o,e))}function Fm(t,e,n,i=Lm){let r;zn(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,f]=Fa(o.label);let l;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(u){o.initialize(u),l=f([])},scope(u,s){o.scope(u,s)},reduce(u,s){l.push(o.reduce(u,s))}}}function f4(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Lm(t,e,n,i=su){const r=P5(t,n),o=i(e,r);let a,f;return{label:pi(o===La?null:r,o.label),initialize(l){a=r===void 0?l:Rt(l,r),o.scope==="data"&&(f=o.reduceIndex(bn(l),a))},scope(l,u){o.scope===l&&(f=o.reduceIndex(u,a))},reduce(l,u){return o.scope==null?o.reduceIndex(l,a,u):o.reduceIndex(l,a,f,u)}}}function th(t,e){return e?Fr(za(t,n=>e[n]),eu):[[,t]]}function su(t,e,n=l4){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&zn(t))return c4(t);if(typeof t=="function")return h4(t);if(/^p\d{2}$/i.test(t))return an(N5(t));switch(`${t}`.toLowerCase()){case"first":return uu;case"last":return p4;case"identity":return Im;case"count":return La;case"distinct":return m4;case"sum":return e==null?La:g4;case"proportion":return nh(e,"data");case"proportion-facet":return nh(e,"facet");case"deviation":return an(Xr);case"min":return an(cn);case"min-index":return an(cb);case"max":return an(ce);case"max-index":return an(ub);case"mean":return eh(ni);case"median":return eh(Sl);case"variance":return an(Dr);case"mode":return an(mb)}return n(t)}function l4(t){throw new Error(`invalid reduce: ${t}`)}function s4(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function u4(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>Ie(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function c4(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function h4(t){return{reduceIndex(e,n,i){return t(iu(n,e),i)}}}function an(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function eh(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return le(n)?new Date(i):i}}}const Im={reduceIndex(t,e){return iu(e,t)}},uu={reduceIndex(t,e){return e[t[0]]}},d4={reduceIndex(t,e){const i=Fr(Di(t,o=>o.length,o=>e[o]),ls),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[` ${o.length.toLocaleString("en-US")} more`,Ln(o,ls)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},p4={reduceIndex(t,e){return e[t[t.length-1]]}},La={label:"Frequency",reduceIndex(t){return t.length}},m4={label:"Distinct",reduceIndex(t,e){const n=new Ba;for(const i of t)n.add(e[i]);return n.size}},g4=an(Ln);function nh(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>Ln(n,o=>i[o])/r}}function Vr(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=pi(i)},f){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),Rm(f,{scale:e,type:n,value:Rt(t,i),label:a,filter:r,hint:o})}function b4(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,Vr(e,i,n)]))}function _4(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:At(o,a)]}));return n.channels=t,n}function Rm(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&nl(i,gf)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&nl(i,W5)?null:"opacity";break;case"symbol":n!==!0&&nl(i,t4)?(e.scale=null,e.value=At(i,fu)):e.scale="symbol";break;default:e.scale=Et.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Et.has(n))throw new Error(`unknown scale: ${n}`);return e}function y4(t,e,n,i,r){const{order:o,reverse:a,reduce:f=!0,limit:l}=r;for(const u in r){if(!Et.has(u))continue;let{value:s,order:h=o,reverse:c=a,reduce:p=f,limit:d=l}=co(r[u]);const m=s==null?void 0:s.startsWith("-");if(m&&(s=s.slice(1)),h=h===void 0?m!==(s==="width"||s==="height")?Om:Pm:x4(h),p==null||p===!1)continue;const g=u==="fx"||u==="fy"?v4(e,i[u]):w4(n,u);if(!g)throw new Error(`missing channel for scale: ${u}`);const _=g.value,[b=0,v=1/0]=qn(d)?d:d<0?[d]:[0,d];if(s==null)g.domain=()=>{let w=Array.from(new Ba(_));return c&&(w=w.reverse()),(b!==0||v!==1/0)&&(w=w.slice(b,v)),w};else{const w=s==="data"?t:s==="height"?ih(n,"y1","y2"):s==="width"?ih(n,"x1","x2"):hs(n,s,s==="y"?"y2":s==="x"?"x2":void 0),x=su(p===!0?"max":p,w);g.domain=()=>{let k=rb(bn(_),M=>x.reduceIndex(M,w),M=>_[M]);return h&&k.sort(h),c&&k.reverse(),(b!==0||v!==1/0)&&(k=k.slice(b,v)),k.map(eu)}}}}function w4(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function v4(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const f of t[o])r[f]=a}return e}function ih(t,e,n){const i=hs(t,e),r=hs(t,n);return At(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function hs(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function x4(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Pm;case"descending":return Om}throw new Error(`invalid order: ${t}`)}function Pm([t,e],[n,i]){return Ie(e,i)||Ie(t,n)}function Om([t,e],[n,i]){return Da(e,i)||Ie(t,n)}function rh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function k4(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const M4=k4(t=>new Intl.NumberFormat(t));function $4(t="en-US"){const e=M4(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function S4(t){return y5(t,"Invalid Date")}function T4(t="en-US"){const e=$4(t);return n=>(n instanceof Date?S4:typeof n=="number"?e:Kt)(n)}const ui=T4();let ds=0,ps;function C4(){const t=ds;return ds=0,ps=void 0,t}function Cn(t){t!==ps&&(ps=t,console.warn(t),++ds)}const re=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let E4=0;function oh(){return`plot-clip-${++E4}`}function A4(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:f,fillOpacity:l,stroke:u,strokeWidth:s,strokeOpacity:h,strokeLinejoin:c,strokeLinecap:p,strokeMiterlimit:d,strokeDasharray:m,strokeDashoffset:g,opacity:_,mixBlendMode:b,imageFilter:v,paintOrder:w,pointerEvents:x,shapeRendering:k,channels:M},{ariaLabel:S,fill:E="currentColor",fillOpacity:D,stroke:C="none",strokeOpacity:R,strokeWidth:L,strokeLinecap:H,strokeLinejoin:T,strokeMiterlimit:z,paintOrder:I}){E===null&&(f=null,l=null),C===null&&(u=null,h=null),ie(E)?!ie(C)&&(!ie(f)||M!=null&&M.fill)&&(C="none"):ie(C)&&(!ie(u)||M!=null&&M.stroke)&&(E="none");const[K,V]=mn(f,E),[W,F]=Qt(l,D),[Y,Z]=mn(u,C),[nt,J]=Qt(h,R),[X,q]=Qt(_);Wr(Z)||(s===void 0&&(s=L),p===void 0&&(p=H),c===void 0&&(c=T),d===void 0&&!V5(c)&&(d=z),!Wr(V)&&w===void 0&&(w=I));const[N,A]=Qt(s);return E!==null&&(t.fill=Yt(V,"currentColor"),t.fillOpacity=dr(F,1)),C!==null&&(t.stroke=Yt(Z,"none"),t.strokeWidth=dr(A,1),t.strokeOpacity=dr(J,1),t.strokeLinejoin=Yt(c,"miter"),t.strokeLinecap=Yt(p,"butt"),t.strokeMiterlimit=dr(d,4),t.strokeDasharray=Yt(m,"none"),t.strokeDashoffset=Yt(g,"0")),t.target=Kt(a),t.ariaLabel=Kt(S),t.ariaDescription=Kt(r),t.ariaHidden=Kt(o),t.opacity=dr(q,1),t.mixBlendMode=Yt(b,"normal"),t.imageFilter=Yt(v,"none"),t.paintOrder=Yt(w,"normal"),t.pointerEvents=Yt(x,"auto"),t.shapeRendering=Yt(k,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:K,scale:"auto",optional:!0},fillOpacity:{value:W,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:nt,scale:"auto",optional:!0},strokeWidth:{value:N,optional:!0},opacity:{value:X,scale:"auto",optional:!0}}}function N4(t,e){e&&t.filter(n=>Xs(e[n])).append("title").call(F4,e)}function D4(t,e){e&&t.filter(([n])=>Xs(e[n])).append("title").call(L4,e)}function F4(t,e){e&&t.text(n=>ui(e[n]))}function L4(t,e){e&&t.text(([n])=>ui(e[n]))}function yn(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:f,strokeOpacity:l,strokeWidth:u,opacity:s,href:h}){i&&mt(t,"aria-label",c=>i[c]),o&&mt(t,"fill",c=>o[c]),a&&mt(t,"fill-opacity",c=>a[c]),f&&mt(t,"stroke",c=>f[c]),l&&mt(t,"stroke-opacity",c=>l[c]),u&&mt(t,"stroke-width",c=>u[c]),s&&mt(t,"opacity",c=>s[c]),h&&Bm(t,c=>h[c],e),n||N4(t,r)}function I4(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:f,strokeOpacity:l,strokeWidth:u,opacity:s,href:h}){i&&mt(t,"aria-label",([c])=>i[c]),o&&mt(t,"fill",([c])=>o[c]),a&&mt(t,"fill-opacity",([c])=>a[c]),f&&mt(t,"stroke",([c])=>f[c]),l&&mt(t,"stroke-opacity",([c])=>l[c]),u&&mt(t,"stroke-width",([c])=>u[c]),s&&mt(t,"opacity",([c])=>s[c]),h&&Bm(t,([c])=>h[c],e),n||D4(t,r)}function R4({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:f,href:l},{tip:u}){return[t,u?void 0:e,n,i,r,o,a,f,l].filter(s=>s!==void 0)}function P4(t,e,n){const i=za(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Cn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*O4(t,e,n,i){const{z:r}=n,{z:o}=i,a=R4(i,n),f=[...e,...a];for(const l of o?P4(t,o,r):[t]){let u,s;t:for(const h of l){for(const c of f)if(!Pn(c[h])){s&&s.push(-1);continue t}if(u===void 0){s&&(yield s),u=a.map(c=>Zn(c[h])),s=[h];continue}s.push(h);for(let c=0;c<a.length;++c)if(Zn(a[c][h])!==u[c]){yield s,u=a.map(d=>Zn(d[h])),s=[h];continue t}}s&&(yield s)}}function Um(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Pe(t,"clip",["frame","sphere"])),t}function U4(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:f,marginLeft:l,marginRight:u,marginTop:s,marginBottom:h}=n,c=oh();r=`url(#${c})`,t=Ft("svg:g",i).call(p=>p.append("svg:clipPath").attr("id",c).append("rect").attr("x",l).attr("y",s).attr("width",a-u-l).attr("height",f-s-h)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const f=oh();r=`url(#${f})`,t.append("clipPath").attr("id",f).append("path").attr("d",Za(a)({type:"Sphere"}));break}}mt(t,"aria-label",e.ariaLabel),mt(t,"aria-description",e.ariaDescription),mt(t,"aria-hidden",e.ariaHidden),mt(t,"clip-path",r)}function Oe(t,e,n,i){U4(t,e,n,i),mt(t,"fill",e.fill),mt(t,"fill-opacity",e.fillOpacity),mt(t,"stroke",e.stroke),mt(t,"stroke-width",e.strokeWidth),mt(t,"stroke-opacity",e.strokeOpacity),mt(t,"stroke-linejoin",e.strokeLinejoin),mt(t,"stroke-linecap",e.strokeLinecap),mt(t,"stroke-miterlimit",e.strokeMiterlimit),mt(t,"stroke-dasharray",e.strokeDasharray),mt(t,"stroke-dashoffset",e.strokeDashoffset),mt(t,"shape-rendering",e.shapeRendering),mt(t,"filter",e.imageFilter),mt(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;mt(t,"pointer-events",r)}function Ue(t,e){B4(t,"mix-blend-mode",e.mixBlendMode),mt(t,"opacity",e.opacity)}function Bm(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Oi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Oi.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function mt(t,e,n){n!=null&&t.attr(e,n)}function B4(t,e,n){n!=null&&t.style(e,n)}function Se(t,e,{x:n,y:i},r=re,o=re){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function Yt(t,e){if((t=Kt(t))!==e)return t}function dr(t,e){if((t=St(t))!==e)return t}const z4=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function cu(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!z4.test(t))throw new Error(`invalid class name: ${t}`);return t}function hu(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function go({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function du(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Um(n)}}function Ft(t,{document:e}){return $r(Ha(t).call(e.documentElement))}const zm=Math.PI,en=2*zm,ah=.618;function q4({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let f,l,u="frame";if(zn(t)){let x;if({type:t,domain:l,inset:x,insetTop:n=x!==void 0?x:n,insetRight:i=x!==void 0?x:i,insetBottom:r=x!==void 0?x:r,insetLeft:o=x!==void 0?x:o,clip:u=u,...f}=t,t==null)return}typeof t!="function"&&({type:t}=qm(t));const{width:s,height:h,marginLeft:c,marginRight:p,marginTop:d,marginBottom:m}=a,g=s-c-p-o-i,_=h-d-m-n-r;if(t=t==null?void 0:t({width:g,height:_,clip:u,...f}),t==null)return;u=Y4(u,c,d,s-p,h-m);let b=c+o,v=d+n,w;if(l!=null){const[[x,k],[M,S]]=Za(t).bounds(l),E=Math.min(g/(M-x),_/(S-k));E>0?(b-=(E*(x+M)-g)/2,v-=(E*(k+S)-_)/2,w=ts({point(D,C){this.stream.point(D*E+b,C*E+v)}})):Cn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&v===0?Ym():ts({point(x,k){this.stream.point(x+b,k+v)}})),{stream:x=>t.stream(w.stream(u(x)))}}function qm(t){switch(`${t}`.toLowerCase()){case"albers-usa":return Te(Vv,.7463,.4673);case"albers":return Io(j0,.7463,.4673);case"azimuthal-equal-area":return Te(Gv,4,4);case"azimuthal-equidistant":return Te(jv,en,en);case"conic-conformal":return Io(Kv,en,en);case"conic-equal-area":return Io(va,6.1702,2.9781);case"conic-equidistant":return Io(t3,7.312,3.6282);case"equal-earth":return Te(n3,5.4133,2.6347);case"equirectangular":return Te(Qv,en,zm);case"gnomonic":return Te(i3,3.4641,3.4641);case"identity":return{type:Ym};case"reflect-y":return{type:H4};case"mercator":return Te(Xv,en,en);case"orthographic":return Te(r3,2,2);case"stereographic":return Te(o3,2,2);case"transverse-mercator":return Te(a3,en,en);default:throw new Error(`unknown projection type: ${t}`)}}function Y4(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return D0(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function Te(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:f})=>{var u,s,h;const l=t();return a!=null&&((u=l.precision)==null||u.call(l,a)),o!=null&&((s=l.rotate)==null||s.call(l,o)),typeof f=="number"&&((h=l.clipAngle)==null||h.call(l,f)),l.scale(Math.min(i/e,r/n)),l.translate([i/2,r/2]),l},aspectRatio:n/e}}function Io(t,e,n){const{type:i,aspectRatio:r}=Te(t,e,n);return{type:o=>{const{parallels:a,domain:f,width:l,height:u}=o,s=i(o);return a!=null&&(s.parallels(a),f===void 0&&s.fitSize([l,u],{type:"Sphere"})),s},aspectRatio:r}}const Ym=uo({stream:t=>t}),H4=uo(ts({point(t,e){this.stream.point(t,-e)}}));function W4(t,e,n,i){const r=n[t],o=n[e],a=r.length,f=n[t]=new Float64Array(a).fill(NaN),l=n[e]=new Float64Array(a).fill(NaN);let u;const s=i.stream({point(h,c){f[u]=h,l[u]=c}});for(u=0;u<a;++u)s.point(r[u],o[u])}function V4({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(zn(t)&&(t=t.type),t!=null)}function G4(t){if(typeof(t==null?void 0:t.stream)=="function")return ah;if(zn(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=qm(t);if(e)return e}return ah}}function j4(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,f){e.push(a),n.push(f)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)Gn(a,o);return[i,r]}const X4=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Hm=new Map([["accent",E6],["category10",C6],["dark2",A6],["observable10",X4],["paired",N6],["pastel1",D6],["pastel2",F6],["set1",L6],["set2",I6],["set3",R6],["tableau10",P6]]);function Z4(t){return t!=null&&Hm.has(`${t}`.toLowerCase())}const fh=new Map([...Hm,["brbg",nn(Lp,Ip)],["prgn",nn(Rp,Pp)],["piyg",nn(Op,Up)],["puor",nn(Bp,zp)],["rdbu",nn(os,$a)],["rdgy",nn(qp,Yp)],["rdylbu",nn(as,Sa)],["rdylgn",nn(Hp,Wp)],["spectral",nn(Vp,Gp)],["burd",lh(os,$a)],["buylrd",lh(as,Sa)],["blues",Lt(_1,y1)],["greens",Lt(w1,v1)],["greys",Lt(x1,k1)],["oranges",Lt(C1,E1)],["purples",Lt(M1,$1)],["reds",Lt(S1,T1)],["turbo",rn(R1)],["viridis",rn(P1)],["magma",rn(O1)],["inferno",rn(U1)],["plasma",rn(B1)],["cividis",rn(A1)],["cubehelix",rn(N1)],["warm",rn(D1)],["cool",rn(F1)],["bugn",Lt(jp,Xp)],["bupu",Lt(Zp,Kp)],["gnbu",Lt(Qp,Jp)],["orrd",Lt(t1,e1)],["pubu",Lt(r1,o1)],["pubugn",Lt(n1,i1)],["purd",Lt(a1,f1)],["rdpu",Lt(l1,s1)],["ylgn",Lt(h1,d1)],["ylgnbu",Lt(u1,c1)],["ylorbr",Lt(p1,m1)],["ylorrd",Lt(g1,b1)],["rainbow",sh(L1)],["sinebow",sh(I1)]]);function Lt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?De(e,n):t[n])}function nn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?De(e,n):t[n])}function lh(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?De(i=>e(1-i),n):t[n].slice().reverse())}function rn(t){return({length:e})=>De(t,Math.max(2,Math.floor(e)))}function sh(t){return({length:e})=>De(t,Math.floor(e)+1).slice(0,-1)}function Wm(t){const e=`${t}`.toLowerCase();if(!fh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return fh.get(e)}function wf(t,e){const n=Wm(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function K4(t,e="greys"){const n=new Set,[i,r]=wf(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const uh=new Map([["brbg",Ip],["prgn",Pp],["piyg",Up],["puor",zp],["rdbu",$a],["rdgy",Yp],["rdylbu",Sa],["rdylgn",Wp],["spectral",Gp],["burd",t=>$a(1-t)],["buylrd",t=>Sa(1-t)],["blues",y1],["greens",v1],["greys",k1],["purples",$1],["reds",T1],["oranges",E1],["turbo",R1],["viridis",P1],["magma",O1],["inferno",U1],["plasma",B1],["cividis",A1],["cubehelix",N1],["warm",D1],["cool",F1],["bugn",Xp],["bupu",Kp],["gnbu",Jp],["orrd",e1],["pubugn",i1],["pubu",o1],["purd",f1],["rdpu",s1],["ylgnbu",c1],["ylgn",d1],["ylorbr",m1],["ylorrd",b1],["rainbow",L1],["sinebow",I1]]);function pu(t){const e=`${t}`.toLowerCase();if(!uh.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return uh.get(e)}const Q4=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function J4(t){return t!=null&&Q4.has(`${t}`.toLowerCase())}const Vm=t=>e=>t(1-e),ol=[0,1],ch=new Map([["number",Wt],["rgb",oi],["hsl",By],["hcl",Yy],["lab",zy]]);function Gm(t){const e=`${t}`.toLowerCase();if(!ch.has(e))throw new Error(`unknown interpolator: ${e}`);return ch.get(e)}function bo(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:f=Xm(t,n),unknown:l,round:u,scheme:s,interval:h,range:c=Et.get(t)===ho?u8(n,f):Et.get(t)===po?c8(n,f):Et.get(t)===mo?ol:void 0,interpolate:p=Et.get(t)===_n?s==null&&c!==void 0?oi:pu(s!==void 0?s:i==="cyclical"?"rainbow":"turbo"):u?Es:Wt,reverse:d}){if(h=ir(h,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof p!="function"&&(p=Gm(p)),d=!!d,c!==void 0){const m=(f=pe(f)).length,g=(c=pe(c)).length;if(m!==g){if(p.length===1)throw new Error("invalid piecewise interpolator");p=Ga(p,c),c=void 0}}if(p.length===1?(d&&(p=Vm(p),d=!1),c===void 0&&(c=Float64Array.from(f,(m,g)=>g/(f.length-1)),c.length===2&&(c=ol)),e.interpolate((c===ol?uo:gu)(p))):e.interpolate(p),a){const[m,g]=_e(f);(m>0||g<0)&&(f=Hr(f),ji(f)!==Math.sign(m)?f[f.length-1]=0:f[0]=0)}return d&&(f=ia(f)),e.domain(f).unknown(l),r&&(e.nice(t8(r,i)),f=e.domain()),c!==void 0&&e.range(c),o&&e.clamp(o),{type:i,domain:f,range:c,scale:e,interpolate:p,interval:h}}function t8(t,e){return t===!0?void 0:typeof t=="number"?t:O5(t,e)}function e8(t,e,n){return bo(t,Bs(),e,n)}function n8(t,e,n){return jm(t,e,{...n,exponent:.5})}function jm(t,e,{exponent:n=1,...i}){return bo(t,dp().exponent(n),e,{...i,type:"pow"})}function i8(t,e,{base:n=10,domain:i=h8(e),...r}){return bo(t,sp().base(n),e,{...r,domain:i})}function r8(t,e,{constant:n=1,...i}){return bo(t,cp().constant(n),e,i)}function o8(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=d8(e),unknown:f,interpolate:l,reverse:u}){return n===void 0&&(n=l!==void 0?De(l,r):Et.get(t)===_n?wf(o,r):void 0),a.length>0&&(a=pp(a,n===void 0?{length:r}:n).quantiles()),mu(t,e,{domain:a,range:n,reverse:u,unknown:f})}function a8(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Xm(t,e),unknown:a,interpolate:f,reverse:l}){const[u,s]=_e(o);let h;return n===void 0?(h=Lr(u,s,i),h[0]<=u&&h.splice(0,1),h[h.length-1]>=s&&h.pop(),i=h.length+1,n=f!==void 0?De(f,i):Et.get(t)===_n?wf(r,i):void 0):(h=De(Wt(u,s),i+1).slice(1,-1),u instanceof Date&&(h=h.map(c=>new Date(c)))),ji(pe(o))<0&&h.reverse(),mu(t,e,{domain:h,range:n,reverse:l,unknown:a})}function mu(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?De(o,n.length+1):Et.get(t)===_n?wf(r,n.length+1):void 0,reverse:f}){n=pe(n);const l=ji(n);if(!isNaN(l)&&!f8(n,l))throw new Error(`the ${t} scale has a non-monotonic domain`);return f&&(a=ia(a)),{type:"threshold",scale:mp(l<0?ia(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function f8(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=jr(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function l8(t){return{type:"identity",scale:Z5(Et.get(t))?ap():e=>e}}function Gr(t,e=pm){return t.length?[cn(t,({value:n})=>n===void 0?n:cn(n,e)),ce(t,({value:n})=>n===void 0?n:ce(n,e))]:[0,1]}function Xm(t,e){const n=Et.get(t);return(n===ho||n===mo||n===po?s8:Gr)(e)}function s8(t){return[0,t.length?ce(t,({value:e})=>e===void 0?e:ce(e,pm)):1]}function u8(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Pi(t,.5,({value:a})=>a===void 0?NaN:Pi(a,.25,hf)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ce(r);return o<1?r.map(a=>a*o):r}function c8(t,e){const n=Sl(t,({value:o})=>o===void 0?NaN:Sl(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ce(i);return r<1?i.map(o=>o*r):i}function h8(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return Gr(t,hf);if(n<0)return Gr(t,Zs)}return[1,10]}function d8(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function gu(t){return(e,n)=>i=>t(e+i*(n-e))}function vf(t,e,n,i,{type:r,nice:o,clamp:a,domain:f=Gr(i),unknown:l,pivot:u=0,scheme:s,range:h,symmetric:c=!0,interpolate:p=Et.get(t)===_n?s==null&&h!==void 0?oi:pu(s!==void 0?s:"rdbu"):Wt,reverse:d}){u=+u,f=pe(f);let[m,g]=f;if(f.length>2&&Cn(`Warning: the diverging ${t} scale domain contains extra elements.`),jr(m,g)<0&&([m,g]=[g,m],d=!d),m=Math.min(m,u),g=Math.max(g,u),typeof p!="function"&&(p=Gm(p)),h!==void 0&&(p=p.length===1?gu(p)(...h):Ga(p,h)),d&&(p=Vm(p)),c){const _=n.apply(u),b=_-n.apply(m),v=n.apply(g)-_;b<v?m=n.invert(_-v):b>v&&(g=n.invert(_+b))}return e.domain([m,u,g]).unknown(l).interpolator(p),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,g],pivot:u,interpolate:p,scale:e}}function p8(t,e,n){return vf(t,Ap(),_8,e,n)}function m8(t,e,n){return Zm(t,e,{...n,exponent:.5})}function Zm(t,e,{exponent:n=1,...i}){return vf(t,Fp().exponent(n=+n),v8(n),e,{...i,type:"diverging-pow"})}function g8(t,e,{base:n=10,pivot:i=1,domain:r=Gr(e,i<0?Zs:hf),...o}){return vf(t,Np().base(n=+n),y8,e,{domain:r,pivot:i,...o})}function b8(t,e,{constant:n=1,...i}){return vf(t,Dp().constant(n=+n),x8(n),e,i)}const _8={apply(t){return t},invert(t){return t}},y8={apply:Math.log,invert:Math.exp},w8={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function v8(t){return t===.5?w8:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function x8(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Km(t,e,n,i){return bo(t,e,n,i)}function k8(t,e,n){return Km(t,S6(),e,n)}function M8(t,e,n){return Km(t,T6(),e,n)}const _o=Symbol("ordinal");function Qm(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:f,hint:l}){return r=ir(r,i),o===void 0&&(o=tg(n,r,t)),(i==="categorical"||i===_o)&&(i="ordinal"),f&&(o=ia(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:l,interval:r}}function $8(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:f,...l}){i=ir(i,n),r===void 0&&(r=tg(e,i,t));let u;if(Et.get(t)===_f)u=C8(e),o=o===void 0?E8(u):At(o,fu);else if(Et.get(t)===_n&&(o===void 0&&(n==="ordinal"||n===_o)&&(o=K4(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const s=pu(a),h=o[0],c=o[1]-o[0];o=({length:p})=>De(d=>s(h+c*d),p)}else o=Wm(a);if(f===ns)throw new Error(`implicit unknown on ${t} scale is not supported`);return Qm(t,Us().unknown(f),e,{...l,type:n,domain:r,range:o,hint:u})}function S8(t,e,{align:n=.5,padding:i=.5,...r}){return Jm(f3().align(n).padding(i),e,r,t)}function T8(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Jm(tf().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Jm(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=Qm(i,t,e,n),t.round=r,t}function tg(t,e,n){const i=new Ba;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=_e(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&Et.get(n)===Ve)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Fr(i,Ie)}function hh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function C8(t){return{fill:hh(t,"fill"),stroke:hh(t,"stroke")}}function E8(t){return ie(t.fill)?e5:t5}function ms(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:f,nice:l,clamp:u,zero:s,align:h,padding:c,projection:p,facet:{label:d=e}={},...m}={}){const g={};for(const[_,b]of t){const v=m[_],w=L8(_,b,{round:Et.get(_)===Ve?f:void 0,nice:l,clamp:u,zero:s,align:h,padding:c,projection:p,...v});if(w){let{label:x=_==="fx"||_==="fy"?d:e,percent:k,transform:M,inset:S,insetTop:E=S!==void 0?S:_==="y"?i:0,insetRight:D=S!==void 0?S:_==="x"?r:0,insetBottom:C=S!==void 0?S:_==="y"?o:0,insetLeft:R=S!==void 0?S:_==="x"?a:0}=v||{};if(M==null)M=void 0;else if(typeof M!="function")throw new Error("invalid scale transform; not a function");w.percent=!!k,w.label=x===void 0?N8(b,w):x,w.transform=M,_==="x"||_==="fx"?(w.insetLeft=+R,w.insetRight=+D):(_==="y"||_==="fy")&&(w.insetTop=+E,w.insetBottom=+C),g[_]=w}}return g}function dh(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:f,label:l}=r;e[i]=U8(r),n[i]=o,o.type=a,f!=null&&(o.interval=f),l!=null&&(o.label=l)}return n}function A8(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?bu(e):e;r&&ph(r,a),o&&mh(o,a);const f=r||o?eg(t,e):e;n&&ph(n,f),i&&mh(i,f)}function N8(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!mi(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function D8(t){return Math.sign(ji(t.domain()))*Math.sign(ji(t.range()))}function bu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:f,marginRight:l,marginBottom:u,marginLeft:s}}=t;return{marginTop:Math.max(e,f),marginRight:Math.max(n,l),marginBottom:Math.max(i,u),marginLeft:Math.max(r,s),width:o,height:a}}function eg({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:f,height:l}=bu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:f,height:e?e.scale.bandwidth()+i+o:l,facet:{width:f,height:l}}}function ph(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,f=o+n,l=r-a-i;t.range=[f,Math.max(f,l)],mi(t)||(t.range=ig(t)),t.scale.range(t.range)}ng(t)}function mh(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,f=o+n,l=r-a-i;t.range=[Math.max(f,l),f],mi(t)?t.range.reverse():t.range=ig(t),t.scale.range(t.range)}ng(t)}function ng(t){t.round===void 0&&R8(t)&&F8(t)<=30&&t.scale.round(!0)}function F8({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,f=Math.abs(i-n)/Math.max(1,a+o*2);return(f-Math.floor(f))*a}function ig(t){const e=t.scale.domain().length+rg(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function L8(t,e=[],n={}){const i=I8(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&mi({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(le)?Cn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Si(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Si(i)}".`):r.some(z5)?Cn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Si(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Si(i)}".`):r.some(q5)&&Cn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Si(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Si(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Ro(e,n,We);break;case"identity":switch(Et.get(t)){case Ve:n=Ro(e,n,We);break;case _f:n=Ro(e,n,P8);break}break;case"utc":case"time":n=Ro(e,n,D5);break}switch(i){case"diverging":return p8(t,e,n);case"diverging-sqrt":return m8(t,e,n);case"diverging-pow":return Zm(t,e,n);case"diverging-log":return g8(t,e,n);case"diverging-symlog":return b8(t,e,n);case"categorical":case"ordinal":case _o:return $8(t,e,n);case"cyclical":case"sequential":case"linear":return e8(t,e,n);case"sqrt":return n8(t,e,n);case"threshold":return mu(t,e,n);case"quantile":return o8(t,e,n);case"quantize":return a8(t,e,n);case"pow":return jm(t,e,n);case"log":return i8(t,e,n);case"symlog":return r8(t,e,n);case"utc":return M8(t,e,n);case"time":return k8(t,e,n);case"point":return S8(t,e,n);case"band":return T8(t,e,n);case"identity":return l8(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Si(t){return typeof t=="symbol"?t.description:t}function gh(t){return typeof t=="string"?`${t}`.toLowerCase():t}const bh={toString:()=>"projection"};function I8(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:f}){if(n=gh(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&f!=null&&(n=bh);for(const u of e){const s=gh(u.type);if(s!==void 0){if(n===void 0)n=s;else if(n!==s)throw new Error(`scale incompatible with channel: ${n} !== ${s}`)}}if(n===bh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:u})=>u!==void 0))return;const l=Et.get(t);if(l===ho)return"sqrt";if(l===mo||l===po)return"linear";if(l===_f)return"ordinal";if((i||r||[]).length>2)return al(l);if(i!==void 0){if(Jc(i))return al(l);if(le(i))return"utc"}else{const u=e.map(({value:s})=>s).filter(s=>s!==void 0);if(u.some(Jc))return al(l);if(u.some(le))return"utc"}if(l===_n){if(a!=null||J4(o))return"diverging";if(Z4(o))return"categorical"}return"linear"}function al(t){switch(t){case Ve:return"point";case _n:return _o;default:return"ordinal"}}function mi({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===_o}function rg({type:t}){return t==="threshold"}function R8({type:t}){return t==="point"||t==="band"}function Zi(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Ro(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function P8(t){return At(t,fu)}function O8(t){return e=>{if(!Et.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function U8({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:f,pivot:l}){if(e==="identity")return{type:"identity",apply:s=>s,invert:s=>s};const u=t.unknown?t.unknown():void 0;return{type:e,domain:Hr(n),...i!==void 0&&{range:Hr(i)},...a!==void 0&&{transform:a},...f&&{percent:f},...u!==void 0&&{unknown:u},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...l!==void 0&&{pivot:l,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:s=>t(s),...t.invert&&{invert:s=>t.invert(s)}}}function B8(t,e,n={}){let i=.5-re,r=.5+re,o=.5+re,a=.5-re;for(const{marginTop:m,marginRight:g,marginBottom:_,marginLeft:b}of e)m>i&&(i=m),g>r&&(r=g),_>o&&(o=_),b>a&&(a=b);let{margin:f,marginTop:l=f!==void 0?f:i,marginRight:u=f!==void 0?f:r,marginBottom:s=f!==void 0?f:o,marginLeft:h=f!==void 0?f:a}=n;l=+l,u=+u,s=+s,h=+h;let{width:c=640,height:p=z8(t,n,{width:c,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,l-i+s-o)}=n;c=+c,p=+p;const d={width:c,height:p,marginTop:l,marginRight:u,marginBottom:s,marginLeft:h};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:l,marginRight:_=m!==void 0?m:u,marginBottom:b=m!==void 0?m:s,marginLeft:v=m!==void 0?m:h}=n.facet??{};g=+g,_=+_,b=+b,v=+v,d.facet={marginTop:g,marginRight:_,marginBottom:b,marginLeft:v}}return d}function z8({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:f,marginRightDefault:l,marginBottomDefault:u,marginLeftDefault:s}){const h=n?n.scale.domain().length:1,c=G4(r);if(c){const d=i?i.scale.domain().length:1,m=(1.1*h-.1)/(1.1*d-.1)*c,g=Math.max(.1,Math.min(10,m));return Math.round((a-s-l)*g+f+u)}const p=e?mi(e)?e.scale.domain().length:Math.max(7,17/h):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const d=_h("y",e)/(_h("x",t)*o),m=i?i.scale.bandwidth():1,g=n?n.scale.bandwidth():1,_=m*(a-s-l)-t.insetLeft-t.insetRight;return(d*_+e.insetTop+e.insetBottom)/g+f+u}return!!(e||n)*Math.max(1,Math.min(60,p*h))*20+!!i*30+60}function _h(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const f=e.scale.exponent();r=l=>Math.pow(l,f);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=_e(i);return Math.abs(r(a)-r(o))}function q8(t,e){const{fx:n,fy:i}=ms(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?nb(r,o).map(([a,f],l)=>({x:a,y:f,i:l})):r?r.map((a,f)=>({x:a,i:f})):o?o.map((a,f)=>({y:a,i:f})):void 0}function Y8(t,{x:e,y:n}){return e&&(e=gs(e)),n&&(n=gs(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function _u(t,{fx:e,fy:n}){const i=bn(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Di(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Di(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Di(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function H8(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function W8(t){const e=[],n=new Uint32Array(Ln(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const V8=new Map([["top",fl],["right",ul],["bottom",ll],["left",sl],["top-left",Po(fl,sl)],["top-right",Po(fl,ul)],["bottom-left",Po(ll,sl)],["bottom-right",Po(ll,ul)],["top-empty",X8],["right-empty",Q8],["bottom-empty",Z8],["left-empty",K8],["empty",J8]]);function G8(t){if(t==null)return null;const e=V8.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const yh=new WeakMap;function gs(t){let e=yh.get(t);return e||yh.set(t,e=new ei(At(t,(n,i)=>[n,i]))),e}function Yn(t,e){return gs(t).get(e)}function j8(t,e,n){return e=Zn(e),n=Zn(n),t.find(i=>Object.is(Zn(i.x),e)&&Object.is(Zn(i.y),n))}function xf(t,e,n){var i;return(i=j8(t,e,n))==null?void 0:i.empty}function fl(t,{y:e},{y:n}){return e?Yn(e,n)===0:!0}function ll(t,{y:e},{y:n}){return e?Yn(e,n)===e.length-1:!0}function sl(t,{x:e},{x:n}){return e?Yn(e,n)===0:!0}function ul(t,{x:e},{x:n}){return e?Yn(e,n)===e.length-1:!0}function X8(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,i);if(o>0)return xf(t,n,e[o-1])}function Z8(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,i);if(o<e.length-1)return xf(t,n,e[o+1])}function K8(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,n);if(o>0)return xf(t,e[o-1],i)}function Q8(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=Yn(e,n);if(o<e.length-1)return xf(t,e[o+1],i)}function J8(t,e,{empty:n}){return n}function Po(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function cl(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class se{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:f,fy:l,sort:u,dx:s=0,dy:h=0,margin:c=0,marginTop:p=c,marginRight:d=c,marginBottom:m=c,marginLeft:g=c,clip:_=r==null?void 0:r.clip,channels:b,tip:v,render:w}=i;if(this.data=e,this.sort=Gi(u)?u:null,this.initializer=Xi(i).initializer,this.transform=this.initializer?i.transform:yf(i).transform,o===null||o===!1?this.facet=null:(this.facet=Pe(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===Zo&&typeof f=="string"?[f]:f,this.fy=e===Zo&&typeof l=="string"?[l]:l),this.facetAnchor=G8(a),n=Em(n),b!==void 0&&(n={...t7(b),...n}),r!==void 0&&(n={...A4(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,k])=>{if(pf(k.value)){const{value:M,label:S=k.label,scale:E=k.scale}=k.value;k={...k,label:S,scale:E,value:M}}if(e===Zo&&typeof k.value=="string"){const{value:M}=k;k={...k,value:[M]}}return[x,k]}).filter(([x,{value:k,optional:M}])=>{if(k!=null)return!0;if(M)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+s,this.dy=+h,this.marginTop=+p,this.marginRight=+d,this.marginBottom=+m,this.marginLeft=+g,this.clip=Um(_),this.tip=e7(v),this.facet==="super"){if(f||l)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:k}=n[x];if(!(k!=="x"&&k!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=ag(w,this.render))}initialize(e,n,i){let r=pe(this.data);e===void 0&&r!=null&&(e=[bn(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=pe(r)),e!==void 0&&(e.original=o);const a=b4(this.channels,r);return this.sort!=null&&y4(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=Pn}=n[r];if(o!==null){const a=i[r];e=e.filter(f=>o(a[f]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&W4(r,o,n,i.projection)}}scale(e,n,i){const r=_4(e,n);return i.projection&&this.project(e,r,i),r}}function og(...t){return t.plot=se.prototype.plot,t}function ag(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,f){return t.call(this,n,i,r,o,a,(l,u,s,h,c)=>e.call(this,l,u,s,h,c,f))}}function t7(t){return Object.fromEntries(Object.entries(Em(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:co(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function e7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Pe(t,"tip",["x","y","xy"]):t}function kf(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:zn(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const wh=new WeakMap;function yu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:f,render:l,...u}={}){return a=+a,r!=null&&(n??(n=null),f={...f,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),f={...f,py:{value:o,scale:"y"}}),{x:n,y:i,channels:f,...u,render:ag(function(s,h,c,p,d,m){d={...d,pointerSticky:!1};const g=d.ownerSVGElement,{data:_}=d.getMarkState(this);let b=wh.get(g);b||wh.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(Z)-1;const{x:w,y:x,fx:k,fy:M}=h;let S=k?k(s.fx)-p.marginLeft:0,E=M?M(s.fy)-p.marginTop:0;w!=null&&w.bandwidth&&(S+=w.bandwidth()/2),x!=null&&x.bandwidth&&(E+=x.bandwidth()/2);const D=s.fi!=null;let C;if(D){let q=b.facetStates;q||(b.facetStates=q=new Map),C=q.get(this),C||q.set(this,C=new Map)}const[R,L]=go(this,p),{px:H,py:T}=c,z=H?q=>H[q]:fg(c,R),I=T?q=>T[q]:lg(c,L);let K,V,W,F;function Y(q,N){if(D)if(F&&(F=cancelAnimationFrame(F)),q==null)C.delete(s.fi);else{C.set(s.fi,N),F=requestAnimationFrame(()=>{F=null;for(const[A,P]of C)if(P<N||P===N&&A<s.fi){q=null;break}Z(q)});return}Z(q)}function Z(q){if(K===q&&W===b.sticky)return;K=q,W=d.pointerSticky=b.sticky;const N=K==null?[]:[K];D&&(N.fx=s.fx,N.fy=s.fy,N.fi=s.fi);const A=m(N,h,c,p,d);if(V){if(D){const P=V.parentNode,tt=V.getAttribute("transform"),B=A.getAttribute("transform");tt?A.setAttribute("transform",tt):A.removeAttribute("transform"),B?P.setAttribute("transform",B):P.removeAttribute("transform"),A.removeAttribute("aria-label"),A.removeAttribute("aria-description"),A.removeAttribute("aria-hidden")}V.replaceWith(A)}return b.roots[v]=V=A,K==null&&(C==null?void 0:C.size)>1||d.dispatchValue(K==null?null:_[K]),A}function nt(q){if(b.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[N,A]=ly(q);N-=S,A-=E;const P=N<p.marginLeft||N>p.width-p.marginRight?1:t,tt=A<p.marginTop||A>p.height-p.marginBottom?1:e;let B=null,ht=a*a;for(const ot of s){const dt=P*(z(ot)-N),at=tt*(I(ot)-A),ct=dt*dt+at*at;ct<=ht&&(B=ot,ht=ct)}if(B!=null&&(t!==1||e!==1)){const ot=z(B)-N,dt=I(B)-A;ht=ot*ot+dt*dt}Y(B,ht)}function J(q){q.pointerType==="mouse"&&K!=null&&(b.sticky&&b.roots.some(N=>N==null?void 0:N.contains(q.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(N=>N(null))):(b.sticky=!0,Z(K)),q.stopImmediatePropagation()))}function X(q){q.pointerType==="mouse"&&(b.sticky||Y(null))}return g.addEventListener("pointerenter",nt),g.addEventListener("pointermove",nt),g.addEventListener("pointerdown",J),g.addEventListener("pointerleave",X),Z(null)},l)}}function n7(t){return yu(1,1,t)}function i7(t){return yu(1,.01,t)}function vh(t){return yu(.01,1,t)}function fg({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function lg({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function sg(t){return mi(t)&&t.interval===void 0?void 0:"tabular-nums"}function r7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:f=0,marginBottom:l=16+i,marginLeft:u=0,style:s,ticks:h=(r-u-f)/64,tickFormat:c,fontVariant:p=sg(t),round:d=!0,opacity:m,className:g}=e;const _=du(e);g=cu(g),m=Qt(m)[1],c===null&&(c=()=>null);const b=Ft("svg",_).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(R=>R.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(hu,s);let v=R=>R.selectAll(".tick line").attr("y1",a+l-o),w;const x=d?(R,L)=>R.rangeRound(L):(R,L)=>R.range(L),{type:k,domain:M,range:S,interpolate:E,scale:D,pivot:C}=t;if(E){const R=S===void 0?E:Ga(E.length===1?gu(E):E,S);w=x(D.copy(),De(Wt(u,r-f),Math.min(M.length+(C!==void 0),S===void 0?1/0:S.length)));const L=256,H=_.document.createElement("canvas");H.width=L,H.height=1;const T=H.getContext("2d");for(let z=0,I=L-1;z<L;++z)T.fillStyle=R(z/I),T.fillRect(z,0,1,1);b.append("image").attr("opacity",m).attr("x",u).attr("y",a).attr("width",r-u-f).attr("height",o-a-l).attr("preserveAspectRatio","none").attr("xlink:href",H.toDataURL())}else if(k==="threshold"){const R=M,L=c===void 0?H=>H:typeof c=="string"?er(c):c;w=x(Bs().domain([-1,S.length-1]),[u,r-f]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",(H,T)=>w(T-1)).attr("y",a).attr("width",(H,T)=>w(T)-w(T-1)).attr("height",o-a-l).attr("fill",H=>H),h=At(R,(H,T)=>T),c=H=>L(R[H],H)}else w=x(tf().domain(M),[u,r-f]),b.append("g").attr("fill-opacity",m).selectAll().data(M).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-l).attr("fill",D),v=()=>{};return b.append("g").attr("transform",`translate(0,${o-l})`).call($b(w).ticks(Array.isArray(h)?null:h,typeof c=="string"?c:void 0).tickFormat(typeof c=="function"?c:void 0).tickSize(i).tickValues(Array.isArray(h)?h:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",Yt(p,"normal")).call(v).call(R=>R.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",u).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const ug=Math.PI/180;function yo(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=hl(n),t.markerMid=hl(i),t.markerEnd=hl(r)}function hl(t){if(t==null||t===!1)return null;if(t===!0)return kh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return xh("auto");case"arrow-reverse":return xh("auto-start-reverse");case"dot":return o7;case"circle":case"circle-fill":return kh;case"circle-stroke":return a7;case"tick":return dl("auto");case"tick-x":return dl(90);case"tick-y":return dl(0)}throw new Error(`invalid marker: ${t}`)}function xh(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function o7(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function kh(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function a7(t,e){return Ft("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function dl(t){return(e,n)=>Ft("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let f7=0;function Mf(t,e,{stroke:n},i){return cg(t,e,n&&(r=>n[r]),i)}function l7(t,e,{stroke:n},i){return cg(t,e,n&&(([r])=>n[r]),i)}function cg(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const f=new Map;function l(u){return function(s){const h=o(s);let c=f.get(u);c||f.set(u,c=new Map);let p=c.get(h);if(!p){const d=this.parentNode.insertBefore(u(h,a),this),m=`plot-marker-${++f7}`;d.setAttribute("id",m),c.set(h,p=`url(#${m})`)}return p}}e&&t.attr("marker-start",l(e)),n&&t.attr("marker-mid",l(n)),i&&t.attr("marker-end",l(i))}function wu({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=dg(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function hg({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=dg(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function dg(t,e,n){return t===void 0&&e===void 0&&n===void 0?re?[1,0]:[.5,.5]:[e,n]}function pg(t,{interval:e}){return t={...co(t)},t.interval=ru(t.interval===void 0?e:t.interval),t}function mg(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:f,interval:l}=pg(r,n);if(f==null||l==null&&!i)return n;const u=pi(r);if(l==null){let p;const d={transform:m=>p||(p=Rt(m,f)),label:u};return{...n,[t]:void 0,[`${t}1`]:o===void 0?d:o,[`${t}2`]:a===void 0&&!(o===a&&i)?d:a}}let s,h;function c(p){return h!==void 0&&p===s?h:h=At(Rt(s=p,f),d=>l.floor(d))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:c,label:u}:o,[`${t}2`]:a===void 0?{transform:p=>c(p).map(d=>l.offset(d)),label:u}:a})}function gg(t,e,n){const{[t]:i}=n,{value:r,interval:o}=pg(i,n);return r==null||o==null?n:e({...n,[t]:{label:pi(i),transform:a=>{const f=At(Rt(a,r),u=>o.floor(u)),l=f.map(u=>o.offset(u));return f.map(le(f)?(u,s)=>u==null||isNaN(u=+u)||(s=l[s],s==null)||isNaN(s=+s)?void 0:new Date((u+s)/2):(u,s)=>u==null||(s=l[s],s==null)?NaN:(+u+ +s)/2)}}})}function s7(t={}){return mg("x",wu,t)}function bg(t={}){return mg("y",hg,t)}function u7(t={}){return gg("x",wu,t)}function c7(t={}){return gg("y",hg,t)}const _g={ariaLabel:"rule",fill:null,stroke:"currentColor"};class h7 extends se{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:f=a,insetBottom:l=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},kf(n,"x"),_g),this.insetTop=St(f),this.insetBottom=St(l),yo(this,n)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y1:u,y2:s}=i,{width:h,height:c,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetTop:_,insetBottom:b}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a},re,0).call(v=>v.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",l?w=>l[w]:(m+h-d)/2).attr("x2",l?w=>l[w]:(m+h-d)/2).attr("y1",u&&!Zi(f)?w=>u[w]+_:p+_).attr("y2",s&&!Zi(f)?f.bandwidth?w=>s[w]+f.bandwidth()-b:w=>s[w]-b:c-g-b).call(yn,this,i).call(Mf,this,i,o)).node()}}class d7 extends se{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:f=a,insetLeft:l=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},kf(n,"y"),_g),this.insetRight=St(f),this.insetLeft=St(l),yo(this,n)}render(e,n,i,r,o){const{x:a,y:f}=n,{y:l,x1:u,x2:s}=i,{width:h,height:c,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetLeft:_,insetRight:b}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{y:l&&f},0,re).call(v=>v.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",u&&!Zi(a)?w=>u[w]+_:m+_).attr("x2",s&&!Zi(a)?a.bandwidth?w=>s[w]+a.bandwidth()-b:w=>s[w]-b:h-d-b).attr("y1",l?w=>l[w]:(p+c-g)/2).attr("y2",l?w=>l[w]:(p+c-g)/2).call(yn,this,i).call(Mf,this,i,o)).node()}}function $f(t,e){let{x:n=Xt,y:i,y1:r,y2:o,...a}=bg(e);return[r,o]=yg(i,r,o),new h7(t,{...a,x:n,y1:r,y2:o})}function p7(t,e){let{y:n=Xt,x:i,x1:r,x2:o,...a}=s7(e);return[r,o]=yg(i,r,o),new d7(t,{...a,y:n,x1:r,x2:o})}function yg(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function vu(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const m7={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},wg="";class xu extends se{constructor(e,n={}){const{x:i,y:r,text:o=qn(e)&&Cm(e)?Xt:tu,frameAnchor:a,textAnchor:f=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:l=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:u=1,lineWidth:s=1/0,textOverflow:h,monospace:c,fontFamily:p=c?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:g,fontWeight:_,rotate:b}=n,[v,w]=Qt(b,0),[x,k]=v7(d);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:B5(v),optional:!0},text:{value:o,filter:Xs,optional:!0}},n,m7),this.rotate=w,this.textAnchor=Yt(f,"middle"),this.lineAnchor=Pe(l,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+u,this.lineWidth=+s,this.textOverflow=vg(h),this.monospace=!!c,this.fontFamily=Kt(p),this.fontSize=k,this.fontStyle=Kt(m),this.fontVariant=Kt(g),this.fontWeight=Kt(_),this.frameAnchor=bf(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${s}`);this.splitLines=kg(this),this.clipLine=Mg(this)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:u,rotate:s,text:h,title:c,fontSize:p}=i,{rotate:d}=this,[m,g]=go(this,r);return Ft("svg:g",o).call(Oe,this,r,o).call(xg,this,h,r).call(Se,this,{x:l&&a,y:u&&f}).call(_=>_.selectAll().data(e).enter().append("text").call(Ue,this).call(g7,this,h,c).attr("transform",vu`translate(${l?b=>l[b]:m},${u?b=>u[b]:g})${s?b=>` rotate(${s[b]})`:d?` rotate(${d})`:""}`).call(mt,"font-size",p&&(b=>p[b])).call(yn,this,i)).node()}}function vg(t){return t==null?null:Pe(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function g7(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:f,clipLine:l}=e;t.each(function(u){const s=f(ui(n[u])??"").map(l),h=s.length,c=r==="top"?.71:r==="bottom"?1-h:(164-h*100)/200;if(h>1){let p=0;for(let d=0;d<h;++d){if(++p,!s[d])continue;const m=this.ownerDocument.createElementNS(Oi.svg,"tspan");m.setAttribute("x",0),d===p-1?m.setAttribute("y",`${(c+d)*o}em`):m.setAttribute("dy",`${p*o}em`),m.textContent=s[d],this.appendChild(m),p=0}}else c&&this.setAttribute("y",`${c*o}em`),this.textContent=s[0];if(a&&!i&&s[0]!==n[u]){const p=this.ownerDocument.createElementNS(Oi.svg,"title");p.textContent=n[u],this.appendChild(p)}})}function Sf(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=mf(e,n)),new xu(t,{...i,x:e,y:n})}function b7(t,{x:e=Xt,...n}={}){return new xu(t,c7({...n,x:e}))}function _7(t,{y:e=Xt,...n}={}){return new xu(t,u7({...n,y:e}))}function xg(t,e,n){mt(t,"text-anchor",e.textAnchor),mt(t,"font-family",e.fontFamily),mt(t,"font-size",e.fontSize),mt(t,"font-style",e.fontStyle),mt(t,"font-variant",e.fontVariant===void 0?y7(n):e.fontVariant),mt(t,"font-weight",e.fontWeight)}function y7(t){return t&&(Y5(t)||le(t))?"tabular-nums":void 0}const w7=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function v7(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),w7.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function x7(t,e,n){const i=[];let r,o=0;for(const[a,f,l]of k7(t)){if(r===void 0&&(r=a),o>r&&n(t,r,f)>e&&(i.push(t.slice(r,o)+(t[o-1]===wg?"-":"")),r=a),l){i.push(t.slice(r,f)),r=void 0;continue}o=f}return i}function*k7(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case wg:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Mh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function ku(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=rr(t,r))i+=Mh[t[r]]??(Sg(t,r)?120:Mh.e);return i}function Mu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=rr(t,r))i+=Sg(t,r)?126:63;return i}function kg({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?Mu:ku,r=e*100;return o=>x7(o,r,i)}function Mg({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?Mu:ku,r=e*100;switch(n){case"clip-start":return o=>Sh(o,r,i,"");case"clip-end":return o=>$h(o,r,i,"");case"ellipsis-start":return o=>Sh(o,r,i,Ii);case"ellipsis-middle":return o=>M7(o,r,i,Ii);case"ellipsis-end":return o=>$h(o,r,i,Ii)}}const Ii="";function Ki(t,e,n,i){const r=[];let o=0;for(let a=0,f=0,l=t.length;a<l;a=f){f=rr(t,a);const u=n(t,a,f);if(o+u>e){for(o+=i;o>e&&a>0;)f=a,a=r.pop(),o-=n(t,a,f);return[a,e-o]}o+=u,r.push(a)}return[-1,0]}function $h(t,e,n,i){t=t.trim();const r=n(i),[o]=Ki(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function M7(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,f]=Ki(t,e/2,n,o),[l]=Ki(t,r-e/2-f+o,n,-o);return l<0?i:t.slice(0,a).trimEnd()+i+t.slice(rr(t,l)).trimStart()}function Sh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=Ki(t,r-e+o,n,-o);return a<0?i:i+t.slice(rr(t,a)).trimStart()}const bs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Th=new RegExp("\\p{Extended_Pictographic}","uy");function rr(t,e){return e+=$7(t,e)?2:1,T7(t,e)&&(e=bs.lastIndex),S7(t,e)?rr(t,e+1):e}function $g(t,e){return t.charCodeAt(e)<128}function $7(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function S7(t,e){return t.charCodeAt(e)===8205}function T7(t,e){return $g(t,e)?!1:(bs.lastIndex=e,bs.test(t))}function Sg(t,e){return $g(t,e)?!1:(Th.lastIndex=e,Th.test(t))}const C7={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},Tg=3.5,E7=Tg*5,Cg={draw(t,e,n){const i=e*n/E7;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},A7={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},N7=new Map([["arrow",Cg],["spike",A7]]);function D7(t){return t&&typeof t.draw=="function"}function F7(t){if(D7(t))return t;const e=N7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class Eg extends se{constructor(e,n={}){const{x:i,y:r,r:o=Tg,length:a,rotate:f,shape:l=Cg,anchor:u="middle",frameAnchor:s}=n,[h,c]=Qt(a,12),[p,d]=Qt(f,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:h,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,C7),this.r=+o,this.length=c,this.rotate=d,this.shape=F7(l),this.anchor=Pe(u,"anchor",["start","middle","end"]),this.frameAnchor=bf(s)}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:u,length:s,rotate:h}=i,{length:c,rotate:p,anchor:d,shape:m,r:g}=this,[_,b]=go(this,r);return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a,y:u&&f}).call(v=>v.selectAll().data(e).enter().append("path").call(Ue,this).attr("transform",vu`translate(${l?w=>l[w]:_},${u?w=>u[w]:b})${h?w=>` rotate(${h[w]})`:p?` rotate(${p})`:""}${d==="start"?"":d==="end"?s?w=>` translate(0,${s[w]})`:` translate(0,${c})`:s?w=>` translate(0,${s[w]/2})`:` translate(0,${c/2})`}`).attr("d",s?w=>{const x=$n();return m.draw(x,s[w],g),x}:(()=>{const w=$n();return m.draw(w,c,g),w})()).call(yn,this,i)).node()}}function L7(t,e={}){const{x:n=Xt,...i}=e;return new Eg(t,{...i,x:n})}function I7(t,e={}){const{y:n=Xt,...i}=e;return new Eg(t,{...i,y:n})}function Hn(t,e){return arguments.length<2&&!qn(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Tf({anchor:t}={},e){return t===void 0?e[0]:Pe(t,"anchor",e)}function Ag(t){return Tf(t,["left","right"])}function Ng(t){return Tf(t,["right","left"])}function Dg(t){return Tf(t,["bottom","top"])}function Fg(t){return Tf(t,["top","bottom"])}function Lg(){const[t,e]=Hn(...arguments);return Rg("y",Ag(e),t,e)}function R7(){const[t,e]=Hn(...arguments);return Rg("fy",Ng(e),t,e)}function Ig(){const[t,e]=Hn(...arguments);return Pg("x",Dg(e),t,e)}function P7(){const[t,e]=Hn(...arguments);return Pg("fx",Fg(e),t,e)}function Rg(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:f=1,fill:l=i,fillOpacity:u=r,textAnchor:s,textStroke:h,textStrokeOpacity:c,textStrokeWidth:p,tickSize:d=t==="y"?6:0,tickPadding:m,tickRotate:g,x:_,margin:b,marginTop:v=b===void 0?20:b,marginRight:w=b===void 0?e==="right"?40:0:b,marginBottom:x=b===void 0?20:b,marginLeft:k=b===void 0?e==="left"?40:0:b,label:M,labelAnchor:S,labelArrow:E,labelOffset:D,...C}){return d=St(d),m=St(m),g=St(g),S!==void 0&&(S=Pe(S,"labelAnchor",["center","top","bottom"])),E=Wg(E),og(d&&!ie(o)?O7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:d,tickPadding:m,tickRotate:g,x:_,...C}):null,ie(l)?null:B7(t,e,n,{fill:l,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:p,textAnchor:s,tickSize:d,tickPadding:m,tickRotate:g,x:_,marginTop:v,marginRight:w,marginBottom:x,marginLeft:k,...C}),!ie(l)&&M!==null?Sf([],zg({fill:l,fillOpacity:u,...C},function(R,L,H,T,z){const I=T[t],{marginTop:K,marginRight:V,marginBottom:W,marginLeft:F}=t==="y"&&z.inset||z,Y=S??(I.bandwidth?"center":"top"),Z=D??(e==="right"?V:F)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${e}`,this.rotate=0),this.dy=Y==="top"?3-K:Y==="bottom"?W-3:0,this.dx=e==="right"?Z:-Z,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Hg(t,I,{anchor:e,label:M,labelAnchor:Y,labelArrow:E})]}}}})):null)}function Pg(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:f=1,fill:l=i,fillOpacity:u=r,textAnchor:s,textStroke:h,textStrokeOpacity:c,textStrokeWidth:p,tickSize:d=t==="x"?6:0,tickPadding:m,tickRotate:g,y:_,margin:b,marginTop:v=b===void 0?e==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:x=b===void 0?e==="bottom"?30:0:b,marginLeft:k=b===void 0?20:b,label:M,labelAnchor:S,labelArrow:E,labelOffset:D,...C}){return d=St(d),m=St(m),g=St(g),S!==void 0&&(S=Pe(S,"labelAnchor",["center","left","right"])),E=Wg(E),og(d&&!ie(o)?U7(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:f,tickSize:d,tickPadding:m,tickRotate:g,y:_,...C}):null,ie(l)?null:z7(t,e,n,{fill:l,fillOpacity:u,stroke:h,strokeOpacity:c,strokeWidth:p,textAnchor:s,tickSize:d,tickPadding:m,tickRotate:g,y:_,marginTop:v,marginRight:w,marginBottom:x,marginLeft:k,...C}),!ie(l)&&M!==null?Sf([],zg({fill:l,fillOpacity:u,...C},function(R,L,H,T,z){const I=T[t],{marginTop:K,marginRight:V,marginBottom:W,marginLeft:F}=t==="x"&&z.inset||z,Y=S??(I.bandwidth?"center":"right"),Z=D??(e==="top"?K:W)-3;return Y==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-Z:Z,this.dx=Y==="right"?V-3:Y==="left"?3-F:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[Hg(t,I,{anchor:e,label:M,labelAnchor:Y,labelArrow:E})]}}}})):null)}function O7(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:f=e,tickSize:l,inset:u=0,insetLeft:s=u,insetRight:h=u,dx:c=0,y:p=t==="y"?void 0:null,...d}){return or(I7,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:f,y:p,...d,dx:e==="left"?+c-re+ +s:+c+re-h,anchor:"start",length:l,shape:e==="left"?X7:Z7})}function U7(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:f=e,tickSize:l,inset:u=0,insetTop:s=u,insetBottom:h=u,dy:c=0,x:p=t==="x"?void 0:null,...d}){return or(L7,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:f,x:p,...d,dy:e==="bottom"?+c-re-h:+c+re+ +s,anchor:"start",length:l,shape:e==="bottom"?G7:j7})}function B7(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*ug):0),text:l,textAnchor:u=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:s=a>60?"top":a<-60?"bottom":"middle",fontVariant:h,inset:c=0,insetLeft:p=c,insetRight:d=c,dx:m=0,y:g=t==="y"?void 0:null,..._}){return or(_7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l,textAnchor:u,lineAnchor:s,fontVariant:h,rotate:a,y:g,..._,dx:e==="left"?+m-o-f+ +p:+m+ +o+ +f-d},function(b,v,w,x,k){h===void 0&&(this.fontVariant=Yg(b)),l===void 0&&(k.text=qg(b,v,w,x,e))})}function z7(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:f=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*ug):0),text:l,textAnchor:u=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:s=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:h,inset:c=0,insetTop:p=c,insetBottom:d=c,dy:m=0,x:g=t==="x"?void 0:null,..._}){return or(b7,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:l===void 0?null:l,textAnchor:u,lineAnchor:s,fontVariant:h,rotate:a,x:g,..._,dy:e==="bottom"?+m+ +o+ +f-d:+m-o-f+ +p},function(b,v,w,x,k){h===void 0&&(this.fontVariant=Yg(b)),l===void 0&&(k.text=qg(b,v,w,x,e))})}function q7(){const[t,e]=Hn(...arguments);return Og("y",Ag(e),t,e)}function Y7(){const[t,e]=Hn(...arguments);return Og("fy",Ng(e),t,e)}function H7(){const[t,e]=Hn(...arguments);return Ug("x",Dg(e),t,e)}function W7(){const[t,e]=Hn(...arguments);return Ug("fx",Fg(e),t,e)}function Og(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...f}){return or(p7,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...Bg(f)})}function Ug(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...f}){return or($f,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...Bg(f)})}function Bg({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function zg({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:l,shapeRendering:u,clip:s=!1},h){return[,t]=mn(t),[,e]=Qt(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:f,pointerEvents:l,shapeRendering:u,clip:s,initializer:h}}function or(t,e,n,i,r,o,a){let f;function l(h,c,p,d,m,g){const _=h==null&&(e==="fx"||e==="fy"),{[e]:b}=d;if(!b)throw new Error(`missing scale: ${e}`);const v=b.domain();let{interval:w,ticks:x,tickFormat:k,tickSpacing:M=e==="x"?80:35}=o;if(typeof x=="string"&&Vg(b)&&(w=x,x=void 0),x===void 0&&(x=ir(w,b.type)??V7(b,M)),h==null){if(qn(x))h=pe(x);else if(Ai(x))h=pl(x,..._e(v));else if(b.interval){let E=b.interval;if(b.ticks){const[D,C]=_e(v),R=(C-D)/E[so];E=Xc(E,R/x)??E,h=pl(E,D,C)}else{h=v;const D=h.length;E=Xc(E,D/x)??E,E!==b.interval&&(h=pl(E,..._e(h)))}if(E===b.interval){const D=Math.round(h.length/x);D>1&&(h=h.filter((C,R)=>R%D===0))}}else b.ticks?h=b.ticks(x):h=v;if(!b.ticks&&h.length&&h!==v){const E=new Ba(v);h=h.filter(D=>E.has(D)),h.length||Cn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?c=[bn(h)]:f[e]={scale:e,value:Xt}}a==null||a.call(this,b,h,x,k,f);const S=Object.fromEntries(Object.entries(f).map(([E,D])=>[E,{...D,value:Rt(h,D.value)}]));return _&&(c=g.filterFacets(h,S)),{data:h,facets:c,channels:S}}const u=Xi(o).initializer,s=t(r,Xi({...o,initializer:l},u));return r==null?(f=s.channels,s.channels={}):f={},s.ariaLabel=i,s.clip===void 0&&(s.clip=!1),s}function V7(t,e){const[n,i]=_e(t.range());return(i-n)/e}function qg(t,e,n,i,r){return{value:$u(t,e,n,i,r)}}function $u(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&le(e)?$5(t.type,e,r)??ui:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?ui:typeof i=="string"?(le(t.domain())?lo:er)(i):uo(i)}function pl(t,e,n){return t.range(e,t.offset(t.floor(n)))}const G7={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},j7={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},X7={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},Z7={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function Yg(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function Hg(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&Vg(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[]/.test(i)),!o)return i;if(o===!0){const a=D8(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${i}`;case"right":return`${i} `;case"up":return n==="right"?`${i} `:` ${i}`;case"down":return n==="right"?`${i} `:` ${i}`}return i}}function Wg(t="auto"){return ie(t)?!1:typeof t=="boolean"?t:Pe(t,"labelArrow",["auto","up","right","down","left"])}function Vg(t){return le(t.domain())}function Ch(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function K7(t,{opacity:e,...n}={}){if(!mi(t)&&!rg(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return Gg(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",Qt(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Q7(t,{fill:e=(u=>(u=t.hint)==null?void 0:u.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(s=>(s=t.hint)==null?void 0:s.stroke)()!==void 0?t.hint.stroke:ie(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...f}={},l){const[h,c]=mn(e),[p,d]=mn(i),m=Ch(l,h),g=Ch(l,p),_=a*a*Math.PI;return n=Qt(n)[1],r=Qt(r)[1],o=Qt(o)[1],Gg(t,f,(b,v,w,x)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",x).attr("fill",h==="color"?k=>m.scale(k):c).attr("fill-opacity",n).attr("stroke",p==="color"?k=>g.scale(k):d).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",k=>{const M=$n();return t.scale(k).draw(M,_),M}))}function Gg(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=sg(t),swatchSize:a=15,swatchWidth:f=a,swatchHeight:l=a,marginLeft:u=0,className:s,style:h,width:c}=e;const p=du(e);s=cu(s),r=$u(t.scale,t.domain,void 0,r);const d=Ft("div",p).attr("class",`${s}-swatches ${s}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${s}-swatches-columns .${s}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${s}-swatches-columns .${s}-swatch::before) {
  flex-shrink: 0;
}
:where(.${s}-swatches-columns .${s}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${s}-swatch`).call(n,t,f,l).call(g=>g.append("div").attr("class",`${s}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${s}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${s}-swatches-wrap .${s}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(t.domain).enter().append("span").attr("class",`${s}-swatch`).call(n,t,f,l).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),d.call(g=>g.insert("style","*").text(`:where(.${s}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${s}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",u?`${+u}px`:null).style("width",c===void 0?null:`${+c}px`).style("font-variant",Yt(o,"normal")).call(hu,h).node()}const _s=new Map([["symbol",Q7],["color",Xg],["opacity",t9]]);function J7(t,e,n={}){return(i,r)=>{if(!_s.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return _s.get(i)(t[i],jg(e,n[i],r),o=>t[o])}}function jg({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return G5(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function Xg(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return K7(t,n);case"ramp":return r7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function t9({type:t,interpolate:e,...n},{legend:i=!0,color:r=In(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return Xg({type:t,...n,interpolate:e9(r)},{legend:i,...o})}function e9(t){const{r:e,g:n,b:i}=In(t)||In(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function n9(t,e,n){const i=[];for(const[r,o]of _s){const a=n[r];if(a!=null&&a.legend&&r in t){const f=o(t[r],jg(e,t[r],a),l=>t[l]);f!=null&&i.push(f)}}return i}const i9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},r9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class o9 extends se{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:f=i,rx:l,ry:u}=e;super(Zo,void 0,e,n==null?i9:r9),this.anchor=km(n,"anchor",["top","right","bottom","left"]),this.insetTop=St(r),this.insetRight=St(o),this.insetBottom=St(a),this.insetLeft=St(f),this.rx=St(l),this.ry=St(u)}render(e,n,i,r,o){const{marginTop:a,marginRight:f,marginBottom:l,marginLeft:u,width:s,height:h}=r,{anchor:c,insetTop:p,insetRight:d,insetBottom:m,insetLeft:g,rx:_,ry:b}=this,v=u+g,w=s-f-d,x=a+p,k=h-l-m;return Ft(c?"svg:line":"svg:rect",o).datum(0).call(Oe,this,r,o).call(Ue,this).call(yn,this,i).call(Se,this,{}).call(c==="left"?M=>M.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",k):c==="right"?M=>M.attr("x1",w).attr("x2",w).attr("y1",x).attr("y2",k):c==="top"?M=>M.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):c==="bottom"?M=>M.attr("x1",v).attr("x2",w).attr("y1",k).attr("y2",k):M=>M.attr("x",v).attr("y",x).attr("width",w-v).attr("height",k-x).attr("rx",_).attr("ry",b)).node()}}function a9(t){return new o9(t)}const ml={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},f9=new Set(["geometry","href","src","ariaLabel","scales"]);class l9 extends se{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&qn(e)&&Cm(e)&&(n={...n,title:Xt});const{x:i,y:r,x1:o,x2:a,y1:f,y2:l,anchor:u,preferredAnchor:s="bottom",monospace:h,fontFamily:c=h?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:d,fontVariant:m,fontWeight:g,lineHeight:_=1,lineWidth:b=20,frameAnchor:v,format:w,textAnchor:x="start",textOverflow:k,textPadding:M=8,title:S,pointerSize:E=12,pathFilter:D="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:f!=null&&l!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:f,scale:"y",optional:l==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:l,scale:"y",optional:f==null},title:{value:S,optional:!0}},n,ml),this.anchor=cs(u,"anchor"),this.preferredAnchor=cs(s,"preferredAnchor"),this.frameAnchor=bf(v),this.textAnchor=Yt(x,"middle"),this.textPadding=+M,this.pointerSize=+E,this.pathFilter=Kt(D),this.lineHeight=+_,this.lineWidth=+b,this.textOverflow=vg(k),this.monospace=!!h,this.fontFamily=Kt(c),this.fontSize=St(p),this.fontStyle=Kt(d),this.fontVariant=Kt(m),this.fontWeight=Kt(g);for(const C in ml)C in this.channels&&(this[C]=ml[C]);this.splitLines=kg(this),this.clipLine=Mg(this),this.format={...w}}render(e,n,i,r,o){const a=this,{x:f,y:l,fx:u,fy:s}=n,{ownerSVGElement:h,document:c}=o,{anchor:p,monospace:d,lineHeight:m,lineWidth:g}=this,{textPadding:_,pointerSize:b,pathFilter:v}=this,{marginTop:w,marginLeft:x}=r,{x1:k,y1:M,x2:S,y2:E,x:D=k??S,y:C=M??E}=i,R=u?u(e.fx)-x:0,L=s?s(e.fy)-w:0,[H,T]=go(this,r),z=fg(i,H),I=lg(i,T),K=d?Mu:ku,V=K(Ii);let W,F;"title"in i?(W=i.channels,F=p9):(W=d9.call(this,i,n),F=m9);const Y=Ft("svg:g",o).call(Oe,this,r,o).call(xg,this).call(Se,this,{x:D&&f,y:C&&l}).call(J=>J.selectAll().data(e).enter().append("g").attr("transform",X=>`translate(${Math.round(z(X))},${Math.round(I(X))})`).call(Ue,this).call(X=>X.append("path").attr("filter",v)).call(X=>X.append("text").each(function(q){const N=$r(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const A=F.call(a,q,e,W,n,i);if(typeof A=="string")for(const P of a.splitLines(A))Z(N,{value:a.clipLine(P)});else{const P=new Set;for(const tt of A){const{label:B=""}=tt;B&&P.has(B)||(P.add(B),Z(N,tt))}}})));function Z(J,{label:X,value:q,color:N,opacity:A}){X??(X=""),q??(q="");const P=N!=null||A!=null;let tt,B=g*100;const[ht]=Ki(X,B,K,V);if(ht>=0)X=X.slice(0,ht).trimEnd()+Ii,tt=q.trim(),q="";else{(X||!q&&!P)&&(q=" "+q);const[dt]=Ki(q,B-K(X),K,V);dt>=0&&(tt=q.trim(),q=q.slice(0,dt).trimEnd()+Ii)}const ot=J.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");X&&ot.append("tspan").attr("font-weight","bold").text(X),q&&ot.append(()=>c.createTextNode(q)),P&&ot.append("tspan").text(" ").attr("fill",N).attr("fill-opacity",A).style("user-select","none"),tt&&ot.append("title").text(tt)}function nt(){const{width:J,height:X}=r.facet??r;Y.selectChildren().each(function(q){let{x:N,width:A,height:P}=this.getBBox();A=Math.round(A),P=Math.round(P);let tt=p;if(tt===void 0){const ot=z(q)+R,dt=I(q)+L,at=ot+A+b+_*2<J,ct=ot-A-b-_*2>0,zt=dt+P+b+_*2<X,me=dt-P-b-_*2>0;tt=at&&ct?zt&&me?a.preferredAnchor:me?"bottom":"top":zt&&me?at?"left":"right":(at||ct)&&(zt||me)?`${me?"bottom":"top"}-${at?"left":"right"}`:a.preferredAnchor}const B=this.firstChild,ht=this.lastChild;if(B.setAttribute("d",h9(tt,b,_,A,P)),N)for(const ot of ht.childNodes)ot.setAttribute("x",-N);ht.setAttribute("y",`${+u9(tt,ht.childNodes.length,m).toFixed(6)}em`),ht.setAttribute("transform",`translate(${c9(tt,b,_,A,P)})`)}),Y.attr("visibility",null)}return e.length&&(Y.attr("visibility","hidden"),h.isConnected?Promise.resolve().then(nt):typeof requestAnimationFrame<"u"&&requestAnimationFrame(nt)),Y.node()}}function s9(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=mf(e,n)),new l9(t,{...i,x:e,y:n})}function u9(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function c9(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function h9(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function d9({channels:t},e){var r,o;const n={};let i=this.format;i=Eh(i,t,"x"),i=Eh(i,t,"y"),this.format=i;for(const a in i){const f=i[a];if(!(f===null||f===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const l=rh(t,a);l&&(n[a]=l)}}for(const a in t){if(a in n||a in i||f9.has(a))continue;const f=rh(t,a);f&&(n[a]=f)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const f=this.format[a];if(typeof f=="string"){const l=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(le(l)?lo:er)(f)}else if(f===void 0||f===!0){const l=e[a];this.format[a]=l!=null&&l.bandwidth?$u(l,l.domain()):ui}}return n}function Eh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([f])=>f===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function p9(t,e,{title:n}){return ui(n.value[t],t)}function*m9(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:Ia(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Nh(i,n,"x"),value:Ah(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Nh(i,n,"y"),value:Ah(this.format.y2,n.y1,a,t)};else{const f=a.value[t],l=a.scale;if(!Pn(f)&&l==null)continue;yield{label:Ia(i,n,o),value:this.format[o](f,t),color:l==="color"?r[o][t]:null,opacity:l==="opacity"?r[o][t]:null}}}}function Ah(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}${t(n.value[i],i)}`}function Nh(t,e,n){const i=Ia(t,e,`${n}1`,n),r=Ia(t,e,`${n}2`,n);return i===r?i:`${i}${r}`}function Ia(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function Je(t={}){var V;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:f}=t,l=cu(t.className),u=t.marks===void 0?[]:Fh(t.marks);u.push(...k9(u));const s=v9(e,t),h=new Map;for(const W of u){const F=Lh(W,s,t);F&&h.set(W,F)}const c=new Map;s&&pr(c,[s],t),pr(c,h,t);const p=Fh(M9(u,c,t));for(const W of p){const F=Lh(W,s,t);F&&h.set(W,F)}u.unshift(...p);let d=q8(c,t);if(d!==void 0){const W=s?cl(d,s):void 0;for(const Y of u){if(Y.facet===null||Y.facet==="super")continue;const Z=h.get(Y);Z!==void 0&&(Z.facetsIndex=Y.fx!=null||Y.fy!=null?cl(d,Z):W)}const F=new Set;for(const{facetsIndex:Y}of h.values())Y==null||Y.forEach((Z,nt)=>{(Z==null?void 0:Z.length)>0&&F.add(nt)});d.forEach(0<F.size&&F.size<d.length?(Y,Z)=>Y.empty=!F.has(Z):Y=>Y.empty=!1);for(const Y of u)if(Y.facet==="exclude"){const Z=h.get(Y);Z!==void 0&&(Z.facetsIndex=W8(Z.facetsIndex))}}for(const W of Et.keys())ss(t[W])&&W!=="fx"&&W!=="fy"&&c.set(W,[]);const m=new Map;for(const W of u){if(m.has(W))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:F,channels:Y}=h.get(W)??{},{data:Z,facets:nt,channels:J}=W.initialize(F,Y,t);Su(J,t),m.set(W,{data:Z,facets:nt,channels:J})}const g=ms(pr(c,m,t),t),_=B8(g,u,t);A8(g,_);const b=dh(g),{fx:v,fy:w}=b,x=v||w?eg(g,_):_,k=v||w?N9(b,_):_,M=du(t),S=M.document,E=Ha("svg").call(S.documentElement);let D=E;M.ownerSVGElement=E,M.className=l,M.projection=q4(t,x),M.filterFacets=(W,F)=>cl(d,{channels:F,groups:_u(W,F)}),M.getMarkState=W=>{const F=m.get(W),Y=h.get(W);return{...F,channels:{...F.channels,...Y==null?void 0:Y.channels}}},M.dispatchValue=W=>{D.value!==W&&(D.value=W,D.dispatchEvent(new Event("input",{bubbles:!0})))};const C=new Set;for(const[W,F]of m)if(W.initializer!=null){const Y=W.facet==="super"?k:x,Z=W.initializer(F.data,F.facets,F.channels,b,Y,M);if(Z.data!==void 0&&(F.data=Z.data),Z.facets!==void 0&&(F.facets=Z.facets),Z.channels!==void 0){const{fx:nt,fy:J,...X}=Z.channels;w9(X),Object.assign(F.channels,X);for(const q of Object.values(X)){const{scale:N}=q;N!=null&&!X5(Et.get(N))&&(Zg(q,t),C.add(N))}(nt!=null||J!=null)&&h.set(W,!0)}}if(C.size){const W=new Map;pr(W,m,t,nt=>C.has(nt)),pr(c,m,t,nt=>C.has(nt));const F=A9(ms(W,t),g),{scales:Y,...Z}=dh(F);Object.assign(g,F),Object.assign(b,Z),Object.assign(b.scales,Y)}let R,L;d!==void 0&&(R={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},d=Y8(d,R),L=H8(v,w,_));for(const[W,F]of m)F.values=W.scale(F.channels,b,M);const{width:H,height:T}=_;$r(E).attr("class",l).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",H).attr("height",T).attr("viewBox",`0 0 ${H} ${T}`).attr("aria-label",a).attr("aria-description",f).call(W=>W.append("style").text(`:where(.${l}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${l} text),
:where(.${l} tspan) {
  white-space: pre;
}`)).call(hu,n);for(const W of u){const{channels:F,values:Y,facets:Z}=m.get(W);if(d===void 0||W.facet==="super"){let nt=null;if(Z&&(nt=Z[0],nt=W.filter(nt,F,Y),nt.length===0))continue;const J=W.render(nt,b,Y,k,M);if(J==null)continue;E.appendChild(J)}else{let nt;for(const J of d){if(!(((V=W.facetAnchor)==null?void 0:V.call(W,d,R,J))??!J.empty))continue;let X=null;if(Z){const N=h.has(W);if(X=Z[N?J.i:0],X=W.filter(X,F,Y),X.length===0)continue;!N&&X===Z[0]&&(X=R5(X)),X.fx=J.x,X.fy=J.y,X.fi=J.i}const q=W.render(X,b,Y,x,M);if(q!=null){(nt??(nt=$r(E).append("g"))).append(()=>q).datum(J);for(const N of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(N)&&(nt.attr(N,q.getAttribute(N)),q.removeAttribute(N))}}nt==null||nt.selectChildren().attr("transform",L)}}const z=n9(g,M,t),{figure:I=i!=null||r!=null||o!=null||z.length>0}=t;I&&(D=S.createElement("figure"),D.className=`${l}-figure`,D.style.maxWidth="initial",i!=null&&D.append(Dh(S,i,"h2")),r!=null&&D.append(Dh(S,r,"h3")),D.append(...z,E),o!=null&&D.append(g9(S,o))),D.scale=O8(b.scales),D.legend=J7(g,M,t);const K=C4();return K>0&&$r(E).append("text").attr("x",H).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${K.toLocaleString("en-US")} warning${K===1?"":"s"}. Please check the console.`),D}function Dh(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function g9(t,e){const n=t.createElement("figcaption");return n.append(e),n}function b9({marks:t=[],...e}={}){return Je({...e,marks:[...t,this]})}se.prototype.plot=b9;function Fh(t){return t.flat(1/0).filter(e=>e!=null).map(_9)}function _9(t){return typeof t.render=="function"?t:new y9(t)}class y9 extends se{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Su(t,e){for(const n in t)Zg(t[n],e);return t}function Zg(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:f=o?l=>l*100:Tm(a,r)}=e[n]??{};f!=null&&(t.value=At(t.value,f),t.transform=!1)}function w9(t){for(const e in t)Rm(e,t[e])}function pr(t,e,n,i=A5){var r,o;for(const{channels:a}of e.values())for(const f in a){const l=a[f],{scale:u}=l;if(u!=null&&i(u))if(u==="projection"){if(!V4(n)){const s=((r=n.x)==null?void 0:r.domain)===void 0,h=((o=n.y)==null?void 0:o.domain)===void 0;if(s||h){const[c,p]=j4(l);s&&gl(t,"x",c),h&&gl(t,"y",p)}}}else gl(t,u,l)}return t}function gl(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function v9(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=pe(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=Vr(r,{value:n,scale:"fx"})),i!=null&&(o.fy=Vr(r,{value:i,scale:"fy"})),Su(o,e);const a=_u(r,o);return{channels:o,groups:a,data:t.data}}function Lh(t,e,n){var l;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const u=pe(t.data??i??r);if(u===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(u===null)return;const s={};return i!=null&&(s.fx=Vr(u,{value:i,scale:"fx"})),r!=null&&(s.fy=Vr(u,{value:r,scale:"fy"})),Su(s,n),{channels:s,groups:_u(u,s)}}if(e===void 0)return;const{channels:o,groups:a,data:f}=e;if(t.facet!=="auto"||t.data===f)return{channels:o,groups:a};f.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((l=pe(t.data))==null?void 0:l.length)===f.length&&Cn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function x9(t,e={}){return Xi({...e,x:null,y:null},(n,i,r,o,a,f)=>f.getMarkState(t))}function k9(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?i7:/^y$/i.test(r)?vh:n7,i=r(x9(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===vh?"left":"bottom");const a=s9(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function M9(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:f={},axis:l,grid:u,facet:s={},facet:{axis:h=l,grid:c}=s,x:{axis:p=l,grid:d=p===null?null:u}=r,y:{axis:m=l,grid:g=m===null?null:u}=o,fx:{axis:_=h,grid:b=_===null?null:c}=a,fy:{axis:v=h,grid:w=v===null?null:c}=f}=n;(i||!ss(r)&&!Ih("x",t))&&(p=d=null),(i||!ss(o)&&!Ih("y",t))&&(m=g=null),e.has("fx")||(_=b=null),e.has("fy")||(v=w=null),p===void 0&&(p=!Bo(t,"x")),m===void 0&&(m=!Bo(t,"y")),_===void 0&&(_=!Bo(t,"fx")),v===void 0&&(v=!Bo(t,"fy")),p===!0&&(p="bottom"),m===!0&&(m="left"),_===!0&&(_=p==="top"||p===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const x=[];return Uo(x,w,Y7,f),Oo(x,v,R7,"right","left",s,f),Uo(x,b,W7,a),Oo(x,_,P7,"top","bottom",s,a),Uo(x,g,q7,o),Oo(x,m,Lg,"left","right",n,o),Uo(x,d,H7,r),Oo(x,p,Ig,"bottom","top",n,r),x}function Oo(t,e,n,i,r,o,a){if(!e)return;const f=$9(e);a=S9(f?i:e,o,a);const{line:l}=a;(n===Lg||n===Ig)&&l&&!Wr(l)&&t.push(a9(T9(a))),t.push(n(a)),f&&t.push(n({...a,anchor:r,label:null}))}function Uo(t,e,n,i){!e||Wr(e)||t.push(n(C9(e,i)))}function $9(t){return/^\s*both\s*$/i.test(t)}function S9(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:l,fontVariant:u,ariaLabel:s,ariaDescription:h,label:c=e.label,labelAnchor:p,labelArrow:d=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:f,tickRotate:l,fontVariant:u,ariaLabel:s,ariaDescription:h,label:c,labelAnchor:p,labelArrow:d,labelOffset:m}}function T9(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function C9(t,{stroke:e=gf(t)?t:void 0,ticks:n=E9(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function E9(t){switch(typeof t){case"number":return!0;case"string":return!gf(t)}return qn(t)||typeof(t==null?void 0:t.range)=="function"}function Bo(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Ih(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function A9(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function N9({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:f,height:l}=bu(n),u=t&&Rh(t),s=e&&Rh(e);return{marginTop:e?s[0]:i,marginRight:t?f-u[1]:r,marginBottom:e?l-s[1]:o,marginLeft:t?u[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:f,height:l}}function Rh(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const D9=new Map([["basis",n5],["basis-closed",i5],["basis-open",r5],["bundle",o5],["bump-x",W6],["bump-y",V6],["cardinal",a5],["cardinal-closed",f5],["cardinal-open",l5],["catmull-rom",s5],["catmull-rom-closed",u5],["catmull-rom-open",c5],["linear",sf],["linear-closed",h5],["monotone-x",d5],["monotone-y",p5],["natural",m5],["step",g5],["step-after",_5],["step-before",b5]]);function F9(t=sf,e){if(typeof t=="function")return t;const n=D9.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function Kg(t=Qi,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?Qi:F9(t,e)}function Qi(t){return sf(t)}function L9(t={y:"count"},e={}){[t,e]=O9(t,e);const{x:n,y:i}=e;return P9(U9(n,e,Xt),null,null,i,t,wu(e))}function I9(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=uu}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function R9(t={}){return I9(L9,"y",kf(t,"x"))}function P9(t,e,n,i,{data:r=Im,filter:o=La,sort:a,reverse:f,...l}={},u={}){t=Ph(t),e=Ph(e),l=z9(l,u),r=t2(r,Xt),a=a==null?void 0:Qg("sort",a,u),o=o==null?void 0:Jg("filter",o,u),n!=null&&Lo(l,"x","x1","x2")&&(n=null),i!=null&&Lo(l,"y","y1","y2")&&(i=null);const[s,h]=on(t),[c,p]=on(t),[d,m]=on(e),[g,_]=on(e),[b,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,x]=on(b),{x:k,y:M,z:S,fill:E,stroke:D,x1:C,x2:R,y1:L,y2:H,domain:T,cumulative:z,thresholds:I,interval:K,...V}=u,[W,F]=on(S),[Y]=mn(E),[Z]=mn(D),[nt,J]=on(Y),[X,q]=on(Z);return{..."z"in u&&{z:W||S},..."fill"in u&&{fill:nt||E},..."stroke"in u&&{stroke:X||D},...yf(V,(N,A,P)=>{const tt=Sm(Rt(N,b),P==null?void 0:P[v]),B=Rt(N,S),ht=Rt(N,Y),ot=Rt(N,Z),dt=s4(l,{z:B,fill:ht,stroke:ot}),at=[],ct=[],zt=tt&&x([]),me=B&&F([]),gi=ht&&J([]),bi=ot&&q([]),qt=t&&h([]),_i=t&&p([]),ee=e&&m([]),Ht=e&&_([]),Ff=H9(t,e,N);let h2=0;for(const yi of l)yi.initialize(N);a&&a.initialize(N),o&&o.initialize(N);for(const yi of A){const Nu=[];for(const ar of l)ar.scope("facet",yi);a&&a.scope("facet",yi),o&&o.scope("facet",yi);for(const[ar,d2]of th(yi,dt))for(const[p2,wo]of th(d2,tt))for(const[Be,Wn]of Ff(wo))if(!(o&&!o.reduce(Be,Wn))){Nu.push(h2++),ct.push(r.reduceIndex(Be,N,Wn)),tt&&zt.push(p2),B&&me.push(dt===B?ar:B[(Be.length>0?Be:wo)[0]]),ht&&gi.push(dt===ht?ar:ht[(Be.length>0?Be:wo)[0]]),ot&&bi.push(dt===ot?ar:ot[(Be.length>0?Be:wo)[0]]),qt&&(qt.push(Wn.x1),_i.push(Wn.x2)),ee&&(ee.push(Wn.y1),Ht.push(Wn.y2));for(const m2 of l)m2.reduce(Be,Wn);a&&a.reduce(Be)}at.push(Nu)}return u4(at,a,f),{data:ct,facets:at}}),...!Lo(l,"x")&&(s?{x1:s,x2:c,x:us(s,c)}:{x:k,x1:C,x2:R}),...!Lo(l,"y")&&(d?{y1:d,y2:g,y:us(d,g)}:{y:M,y1:L,y2:H}),...w&&{[v]:w},...Object.fromEntries(l.map(({name:N,output:A})=>[N,A]))}}function O9({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function U9(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...co(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=B9(t.thresholds,t.interval),t}function Ph(t){if(t==null)return;const{value:e,cumulative:n,domain:i=_e,thresholds:r}=t,o=a=>{let f=Rt(a,e),l;if(le(f)||Y9(r)){f=At(f,xm,Float64Array);let[s,h]=typeof i=="function"?i(f):i,c=typeof r=="function"&&!Ai(r)?r(f,s,h):r;typeof c=="number"&&(c=$p(s,h,c)),Ai(c)&&(i===_e&&(s=c.floor(s),h=c.offset(c.floor(h))),c=c.range(s,c.offset(h))),l=c}else{f=We(f);let[s,h]=typeof i=="function"?i(f):i,c=typeof r=="function"&&!Ai(r)?r(f,s,h):r;if(typeof c=="number")if(i===_e){let p=na(s,h,c);if(isFinite(p))if(p>0){let d=Math.round(s/p),m=Math.round(h/p);d*p<=s||--d,m*p>h||++m;let g=m-d+1;c=new Float64Array(g);for(let _=0;_<g;++_)c[_]=(d+_)*p}else if(p<0){p=-p;let d=Math.round(s*p),m=Math.round(h*p);d/p<=s||--d,m/p>h||++m;let g=m-d+1;c=new Float64Array(g);for(let _=0;_<g;++_)c[_]=(d+_)/p}else c=[s];else c=[s]}else c=Lr(s,h,c);else Ai(c)&&(i===_e&&(s=c.floor(s),h=c.offset(c.floor(h))),c=c.range(s,c.offset(h)));l=c}const u=[];if(l.length===1)u.push([l[0],l[0]]);else for(let s=1;s<l.length;++s)u.push([l[s-1],l[s]]);return u.bin=(n<0?V9:n>0?W9:Tu)(u,l,f),u};return o.label=pi(e),o}function B9(t,e,n=Oh){if(t===void 0)return e===void 0?n:ir(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return db;case"scott":return Od;case"sturges":return sb;case"auto":return Oh}return Js(t)}return t}function z9(t,e){return a4(t,e,Qg)}function Qg(t,e,n){return Fm(t,e,n,Jg)}function Jg(t,e,n){return Lm(t,e,n,t2)}function t2(t,e){return su(t,e,q9)}function q9(t){switch(`${t}`.toLowerCase()){case"x":return G9;case"x1":return X9;case"x2":return Z9;case"y":return j9;case"y1":return K9;case"y2":return Q9}throw new Error(`invalid bin reduce: ${t}`)}function Oh(t,e,n){return Math.min(200,Od(t,e,n))}function Y9(t){return U5(t)||qn(t)&&le(t)}function H9(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[f,[l,u]]of i.entries()){const s=r.bin(a[f]);for(const[h,[c,p]]of r.entries())yield[s[h],{data:n,x1:l,y1:c,x2:u,y2:p}]}}:i?function*(o){const a=i.bin(o);for(const[f,[l,u]]of i.entries())yield[a[f],{data:n,x1:l,x2:u}]}:function*(o){const a=r.bin(o);for(const[f,[l,u]]of r.entries())yield[a[f],{data:n,y1:l,y2:u}]}}function Tu(t,e,n){return e=We(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[Ua(e,n[a])-1])==null||o.push(a);return r}}function W9(t,e,n){const i=Tu(t,e,n);return r=>{const o=i(r);for(let a=1,f=o.length;a<f;++a){const l=o[a-1],u=o[a];for(const s of l)u.push(s)}return o}}function V9(t,e,n){const i=Tu(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const f=o[a+1],l=o[a];for(const u of f)l.push(u)}return o}}function e2(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const G9={reduceIndex(t,e,{x1:n,x2:i}){return e2(n,i)}},j9={reduceIndex(t,e,{y1:n,y2:i}){return e2(n,i)}},X9={reduceIndex(t,e,{x1:n}){return n}},Z9={reduceIndex(t,e,{x2:n}){return n}},K9={reduceIndex(t,e,{y1:n}){return n}},Q9={reduceIndex(t,e,{y2:n}){return n}};function J9(t={}){return Mm(t)?t:{...t,y:Xt}}function tx(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const f of e)for(const l of f)i[l]&&++r,i[l]=1;if(r===0)return{data:t,facets:e};t=Hr(t);const o=t[wm]=new Uint32Array(n+r);e=e.map(f=>Hr(f,Uint32Array));let a=n;i.fill(0);for(const f of e)for(let l=0,u=f.length;l<u;++l){const s=f[l];i[s]?(f[l]=a,t[a]=t[s],o[a]=s,++a):o[s]=s,i[s]=1}return{data:t,facets:e}}function ex(t={},e={}){arguments.length===1&&([t,e]=ix(t));const{x1:n,x:i=n,y:r,...o}=e,[a,f,l,u]=ox(i,r,"x","y",t,o);return{...a,x1:n,x:f,y1:l,y2:u,y:us(l,u)}}function nx({y:t,y1:e,y2:n,...i}={}){return i=kf(i,"x"),e===void 0&&n===void 0?ex({y:t,...i}):([e,n]=I5(t,e,n),{...i,y1:e,y2:n})}function ix(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const rx={length:!0};function ox(t,e=E5,n,i,{offset:r,order:o,reverse:a},f){if(e===null)throw new Error(`stack requires ${i}`);const l=$m(f),[u,s]=on(t),[h,c]=Fa(e),[p,d]=Fa(e);return h.hint=p.hint=rx,r=ax(r),o=sx(o,r,i),[yf(f,(m,g,_)=>{({data:m,facets:g}=tx(m,g));const b=t==null?void 0:s(Sm(Rt(m,t),_==null?void 0:_[n])),v=Rt(m,e,Float64Array),w=Rt(m,l),x=o&&o(m,b,v,w),k=m.length,M=c(new Float64Array(k)),S=d(new Float64Array(k)),E=[];for(const D of g){const C=b?Array.from(za(D,R=>b[R]).values()):[D];if(x)for(const R of C)R.sort(x);for(const R of C){let L=0,H=0;a&&R.reverse();for(const T of R){const z=v[T];z<0?L=S[T]=(M[T]=L)+z:z>0?H=S[T]=(M[T]=H)+z:S[T]=M[T]=H}}E.push(C)}return r&&r(E,M,S,w),{data:m,facets:g}}),u,h,p]}function ax(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return fx;case"center":case"silhouette":return lx;case"wiggle":return i2}throw new Error(`unknown offset: ${t}`)}}function n2(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function fx(t,e,n){for(const i of t)for(const r of i){const[o,a]=n2(r,n);for(const f of r){const l=1/(a-o||1);e[f]=l*(e[f]-o),n[f]=l*(n[f]-o)}}}function lx(t,e,n){for(const i of t){for(const r of i){const[o,a]=n2(r,n);for(const f of r){const l=(a+o)/2;e[f]-=l,n[f]-=l}}r2(i,e,n)}o2(t,e,n)}function i2(t,e,n,i){for(const r of t){const o=new ei;let a=0;for(const f of r){let l=-1;const u=f.map(p=>Math.abs(n[p]-e[p])),s=f.map(p=>{l=i?i[p]:++l;const d=n[p]-e[p],m=o.has(l)?d-o.get(l):0;return o.set(l,d),m}),h=[0,...ib(s)];for(const p of f)e[p]+=a,n[p]+=a;const c=Ln(u);c&&(a-=Ln(u,(p,d)=>(s[d]/2+h[d])*p)/c)}r2(r,e,n)}o2(t,e,n)}function r2(t,e,n){const i=cn(t,r=>cn(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function o2(t,e,n){const i=t.length;if(i===1)return;const r=t.map(f=>f.flat()),o=r.map(f=>(cn(f,l=>e[l])+ce(f,l=>n[l]))/2),a=cn(o);for(let f=0;f<i;f++){const l=a-o[f];for(const u of r[f])e[u]+=l,n[u]+=l}}function sx(t,e,n){if(t===void 0&&e===i2)return Uh(Ie);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Da:Ie;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return ux(r);case"z":return cx(r);case"sum":return hx(r);case"appearance":return dx(r);case"inside-out":return Uh(r)}return Bh(vm(t))}if(typeof t=="function")return(t.length===1?Bh:px)(t);if(Array.isArray(t))return mx(t);throw new Error(`invalid order: ${t}`)}}function ux(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function cx(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function hx(t){return Cf(t,(e,n,i,r)=>xs(bn(e),o=>Ln(o,a=>i[a]),o=>r[o]))}function dx(t){return Cf(t,(e,n,i,r)=>xs(bn(e),o=>n[Pd(o,a=>i[a])],o=>r[o]))}function Uh(t){return Cf(t,(e,n,i,r)=>{const o=bn(e),a=xs(o,h=>n[Pd(h,c=>i[c])],h=>r[h]),f=Di(o,h=>Ln(h,c=>i[c]),h=>r[h]),l=[],u=[];let s=0;for(const h of a)s<0?(s+=f.get(h),l.push(h)):(s-=f.get(h),u.push(h));return u.reverse().concat(l)})}function Bh(t){return e=>{const n=Rt(e,t);return(i,r)=>Ie(n[i],n[r])}}function px(t){return e=>(n,i)=>t(e[n],e[i])}function mx(t){return Cf(Ie,()=>t)}function Cf(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new ei(e(n,i,r,o).map((f,l)=>[f,l]));return(f,l)=>t(a.get(o[f]),a.get(o[l]))}}const gx={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class bx extends se{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:f,tension:l}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,gx),this.curve=Kg(f,l),yo(this,n)}project(e,n,i){this.curve!==Qi&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:f,x2:l=a,y2:u=f}=i,{curve:s}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,n).call(h=>h.selectAll().data(e).enter().append("path").call(Ue,this).attr("d",s===Qi&&o.projection?_x(o.projection,a,f,l,u):c=>{const p=$n(),d=s(p);return d.lineStart(),d.point(a[c],f[c]),d.point(l[c],u[c]),d.lineEnd(),p}).call(yn,this,i).call(Mf,this,i,o)).node()}}function _x(t,e,n,i,r){const o=Za(t);return e=We(e),n=We(n),i=We(i),r=We(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Cu(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...f}={}){return[n,i]=zh(e,n,i),[o,a]=zh(r,o,a),new bx(t,{...f,x1:n,x2:i,y1:o,y2:a})}function zh(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class a2 extends se{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:f=o,insetBottom:l=o,insetLeft:u=o,rx:s,ry:h}=i;this.insetTop=St(a),this.insetRight=St(f),this.insetBottom=St(l),this.insetLeft=St(u),this.rx=Yt(s,"auto"),this.ry=Yt(h,"auto")}render(e,n,i,r,o){const{rx:a,ry:f}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(this._transform,this,n).call(l=>l.selectAll().data(e).enter().append("rect").call(Ue,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(mt,"rx",a).call(mt,"ry",f).call(yn,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:f}=this,l=n&&e?e.bandwidth():o-i-r;return Math.max(0,l-a-f)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:f}=this,l=n&&e?e.bandwidth():o-i-r;return Math.max(0,l-a-f)}}const yx={ariaLabel:"bar"};class wx extends a2{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,yx)}_transform(e,n,{y:i}){e.call(Se,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return Zi(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:f,insetBottom:l}=this;return Zi(e)?a-r-o-f-l:u=>Math.max(0,Math.abs(i[u]-n[u])-f-l)}}function vx(t,e={}){return L5(e)||(e={...e,x:tu,y2:Xt}),new wx(t,nx(bg(J9(e))))}const xx={ariaLabel:"cell"};class kx extends a2{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,xx)}_transform(e,n){e.call(Se,n,{},0,0)}}function Mx(t,{x:e,y:n,...i}={}){return[e,n]=mf(e,n),new kx(t,{...i,x:e,y:n})}const $x={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Sx(t){return t.sort===void 0&&t.reverse===void 0?i4({channel:"-r"},t):t}class Tx extends se{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:f=qr,frameAnchor:l}=n,[u,s]=Qt(a,0),[h,c]=e4(f),[p,d]=Qt(o,h==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:hf,optional:!0},rotate:{value:u,optional:!0},symbol:{value:h,scale:"auto",optional:!0}},Sx(n),$x),this.r=d,this.rotate=s,this.symbol=c,this.frameAnchor=bf(l);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:_,stroke:b}=m;g.hint={fill:_?_.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:f}=n,{x:l,y:u,r:s,rotate:h,symbol:c}=i,{r:p,rotate:d,symbol:m}=this,[g,_]=go(this,r),b=m===qr,v=s?void 0:p*p*Math.PI;return Zs(p)&&(e=[]),Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,{x:l&&a,y:u&&f}).call(w=>w.selectAll().data(e).enter().append(b?"circle":"path").call(Ue,this).call(b?x=>{x.attr("cx",l?k=>l[k]:g).attr("cy",u?k=>u[k]:_).attr("r",s?k=>s[k]:p)}:x=>{x.attr("transform",vu`translate(${l?k=>l[k]:g},${u?k=>u[k]:_})${h?k=>` rotate(${h[k]})`:d?` rotate(${d})`:""}`).attr("d",s&&c?k=>{const M=$n();return c[k].draw(M,s[k]*s[k]*Math.PI),M}:s?k=>{const M=$n();return m.draw(M,s[k]*s[k]*Math.PI),M}:c?k=>{const M=$n();return c[k].draw(M,v),M}:(()=>{const k=$n();return m.draw(k,v),k})())}).call(yn,this,i)).node()}}function Ra(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=mf(e,n)),new Tx(t,{...i,x:e,y:n})}const Cx={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class Ex extends se{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:f}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:$m(n),optional:!0}},n,Cx),this.z=o,this.curve=Kg(a,f),yo(this,n)}filter(e){return e}project(e,n,i){this.curve!==Qi&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:f}=i,{curve:l}=this;return Ft("svg:g",o).call(Oe,this,r,o).call(Se,this,n).call(u=>u.selectAll().data(O4(e,[a,f],this,i)).enter().append("path").call(Ue,this).call(I4,this,i).call(l7,this,i,o).attr("d",l===Qi&&o.projection?Ax(o.projection,a,f):H6().curve(l).defined(s=>s>=0).x(s=>a[s]).y(s=>f[s]))).node()}}function Ax(t,e,n){const i=Za(t);return e=We(e),n=We(n),r=>{let o=[];const a=[o];for(const f of r)f===-1?(o=[],a.push(o)):o.push([e[f],n[f]]);return i({type:"MultiLineString",coordinates:a})}}function Nx(t,{x:e=tu,y:n=Xt,...i}={}){return new Ex(t,R9({...i,x:e,y:n}))}const Dx={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Fx extends se{constructor(e,n,i){super(e,n,i,Dx),yo(this,i)}render(e,n,i,r,o){return Ft("svg:g",o).call(Oe,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Ue,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(yn,this,i).call(Mf,this,i,o)).node()}}class Lx extends Fx{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:f=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=St(a),this.insetBottom=St(f)}_transform(e,n,{x:i}){e.call(Se,n,{x:i},re,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function Eu(t,{x:e=Xt,...n}={}){return new Lx(t,{...n,x:e})}function Ix(t){let e,n,i,r;return{c(){e=$("main"),n=$("div"),O(n,"width",i=t[0]+"px"),O(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){j(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&O(n,"width",i),a&2&&r!==(r=o[1]+"px")&&O(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:vt,o:vt,d(o){o&&G(e),t[4](null)}}}function Rx(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;gn(()=>{const l=Je({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Eu(i,{x:u=>u})]});n(2,a.textContent="",a),a.appendChild(l)});function f(l){ke[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class En extends Ut{constructor(e){super(),Ot(this,e,Rx,Ix,Pt,{pattern:3,width:0,height:1})}}function Px(t){let e,n,i,r;return{c(){e=$("main"),n=$("div"),O(n,"width",i=t[0]+"px"),O(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){j(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&O(n,"width",i),a&2&&r!==(r=o[1]+"px")&&O(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:vt,o:vt,d(o){o&&G(e),t[4](null)}}}function Ox(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;gn(()=>{const l=i.map((s,h)=>h===0?0:s-i[h-1]),u=Je({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[vx(l,{x:(s,h)=>h+1,y:s=>s})]});n(2,a.textContent="",a),a.appendChild(u)});function f(l){ke[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class An extends Ut{constructor(e){super(),Ot(this,e,Ox,Px,Pt,{pattern:3,width:0,height:1})}}function Ux(t){let e,n,i,r;return{c(){e=$("main"),n=$("div"),O(n,"width",i=t[0]+"px"),O(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){j(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&O(n,"width",i),a&2&&r!==(r=o[1]+"px")&&O(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:vt,o:vt,d(o){o&&G(e),t[4](null)}}}function Bx(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;gn(()=>{const l=i.map((s,h)=>h===0?0:s-i[h-1]),u=Je({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[Mx(l,{x:(s,h)=>h+1,fill:s=>s})]});n(2,a.textContent="",a),a.appendChild(u)});function f(l){ke[l?"unshift":"push"](()=>{a=l,n(2,a)})}return t.$$set=l=>{"pattern"in l&&n(3,i=l.pattern),"width"in l&&n(0,r=l.width),"height"in l&&n(1,o=l.height)},[r,o,a,i,f]}class Nn extends Ut{constructor(e){super(),Ot(this,e,Bx,Ux,Pt,{pattern:3,width:0,height:1})}}function zx(t){let e,n,i,r;return{c(){e=$("main"),n=$("div"),O(n,"width",i=t[0]+"px"),O(n,"height",r=t[1]+"px"),ue(e,"width",t[0]+"px"),ue(e,"margin","auto")},m(o,a){j(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&O(n,"width",i),a&2&&r!==(r=o[1]+"px")&&O(n,"height",r),a&1&&ue(e,"width",o[0]+"px")},i:vt,o:vt,d(o){o&&G(e),t[7](null)}}}function qx(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{width:a=800}=e,{height:f=50}=e,l,u=null,s;const h=async m=>{o?n(6,u=o):(n(6,u=await ys(m)),console.log(`Loaded ${m}, sr= ${u.sampleRate}`)),s=u.sampleRate};let c=null;const p=(m,g)=>{g&&(c=Ad(g,m,.5))};gn(()=>{if(n(2,l.textContent="",l),!c)return;const m=Je({width:a,height:f,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[Nx(c,{x:(g,_)=>_/s,y:g=>g})]});l.appendChild(m)});function d(m){ke[m?"unshift":"push"](()=>{l=m,n(2,l)})}return t.$$set=m=>{"pattern"in m&&n(3,i=m.pattern),"audioFile"in m&&n(4,r=m.audioFile),"cachedAudio"in m&&n(5,o=m.cachedAudio),"width"in m&&n(0,a=m.width),"height"in m&&n(1,f=m.height)},t.$$.update=()=>{t.$$.dirty&16&&h(r),t.$$.dirty&72&&p(i,u)},[a,f,l,i,r,o,u,d]}class Dn extends Ut{constructor(e){super(),Ot(this,e,qx,zx,Pt,{pattern:3,audioFile:4,cachedAudio:5,width:0,height:1})}}function Yx(t){let e,n,i,r,o,a;return{c(){e=$("main"),n=$("audio"),i=U(),r=$("button"),r.textContent="play audio (p)",n.controls=!1},m(f,l){j(f,e,l),y(e,n),t[7](n),y(e,i),y(e,r),o||(a=pt(r,"click",t[1]),o=!0)},p:vt,i:vt,o:vt,d(f){f&&G(e),t[7](null),o=!1,a()}}}function Hx(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{currentTrialNumber:a=-1}=e,f=null;const l=async d=>{o?n(6,f=o):(n(6,f=await ys(d)),console.log(`Loaded ${d}, sr= ${f.sampleRate}`))};let u=null,s;const h=(d,m)=>{m&&s&&(u=Ad(m,d),G2(u,m.sampleRate,s))},c=()=>{s&&(s.pause(),n(0,s.currentTime=0,s),s.play())};Pa(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&c()})});function p(d){ke[d?"unshift":"push"](()=>{s=d,n(0,s)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"cachedAudio"in d&&n(4,o=d.cachedAudio),"currentTrialNumber"in d&&n(5,a=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&l(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&32&&a>-1&&window.setTimeout(c,200),t.$$.dirty&68&&h(i,f)},[s,c,i,r,o,a,f,p]}class Ji extends Ut{constructor(e){super(),Ot(this,e,Hx,Yx,Pt,{pattern:2,audioFile:3,cachedAudio:4,currentTrialNumber:5})}}function qh(t,e,n){const i=t.slice();return i[8]=e[n],i}function Yh(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=$("option"),i=ft(n),e.__value=t[8],rt(e,e.__value)},m(r,o){j(r,e,o),y(e,i)},p:vt,d(r){r&&G(e)}}}function Wx(t){let e,n,i,r,o,a,f,l=(Ko*1e3).toFixed(0)+"",u,s,h,c,p,d,m,g,_=t[0].toFixed(1)+"",b,v,w=(t[2]*1e3).toFixed(1)+"",x,k,M,S,E,D,C,R,L,H,T,z,I,K,V,W,F,Y,Z,nt,J=He(t[5]),X=[];for(let q=0;q<J.length;q+=1)X[q]=Yh(qh(t,J,q));return L=new Ji({props:{pattern:t[1],audioFile:t[3]}}),T=new Dn({props:{pattern:t[1],audioFile:t[3],width:zo,height:qo}}),I=new En({props:{pattern:t[1],width:zo,height:qo}}),V=new An({props:{pattern:t[1],width:zo,height:qo}}),F=new Nn({props:{pattern:t[1],width:zo,height:qo}}),{c(){e=$("main"),n=$("h2"),n.textContent="Playground",i=U(),r=$("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=U(),a=$("div"),f=ft("inter-onset interval (IOI): "),u=ft(l),s=ft(" milliseconds ("),h=ft(t[4]),c=ft(` bpm)
    `),p=$("label"),d=ft(`deviation as percent of IOI
      `),m=$("input"),g=U(),b=ft(_),v=ft(`
      (`),x=ft(w),k=ft(" milliseconds)"),M=U(),S=$("label"),E=ft(`instrument sample:
      `),D=$("select");for(let q=0;q<X.length;q+=1)X[q].c();C=U(),R=$("div"),ut(L.$$.fragment),H=U(),ut(T.$$.fragment),z=U(),ut(I.$$.fragment),K=U(),ut(V.$$.fragment),W=U(),ut(F.$$.fragment),O(m,"type","range"),O(m,"min","-20"),O(m,"max","20"),O(m,"step","1"),O(p,"class","svelte-1sot113"),t[3]===void 0&&Ne(()=>t[7].call(D)),O(S,"class","svelte-1sot113"),O(R,"class","stimuli svelte-1sot113")},m(q,N){j(q,e,N),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,f),y(a,u),y(a,s),y(a,h),y(a,c),y(a,p),y(p,d),y(p,m),rt(m,t[0]),y(p,g),y(p,b),y(p,v),y(p,x),y(p,k),y(a,M),y(a,S),y(S,E),y(S,D);for(let A=0;A<X.length;A+=1)X[A]&&X[A].m(D,null);Vt(D,t[3],!0),y(e,C),y(e,R),lt(L,R,null),y(R,H),lt(T,R,null),y(R,z),lt(I,R,null),y(R,K),lt(V,R,null),y(R,W),lt(F,R,null),Y=!0,Z||(nt=[pt(m,"change",t[6]),pt(m,"input",t[6]),pt(D,"change",t[7])],Z=!0)},p(q,[N]){if((!Y||N&16)&&jt(h,q[4]),N&1&&rt(m,q[0]),(!Y||N&1)&&_!==(_=q[0].toFixed(1)+"")&&jt(b,_),(!Y||N&4)&&w!==(w=(q[2]*1e3).toFixed(1)+"")&&jt(x,w),N&32){J=He(q[5]);let ot;for(ot=0;ot<J.length;ot+=1){const dt=qh(q,J,ot);X[ot]?X[ot].p(dt,N):(X[ot]=Yh(dt),X[ot].c(),X[ot].m(D,null))}for(;ot<X.length;ot+=1)X[ot].d(1);X.length=J.length}N&40&&Vt(D,q[3]);const A={};N&2&&(A.pattern=q[1]),N&8&&(A.audioFile=q[3]),L.$set(A);const P={};N&2&&(P.pattern=q[1]),N&8&&(P.audioFile=q[3]),T.$set(P);const tt={};N&2&&(tt.pattern=q[1]),I.$set(tt);const B={};N&2&&(B.pattern=q[1]),V.$set(B);const ht={};N&2&&(ht.pattern=q[1]),F.$set(ht)},i(q){Y||(Q(L.$$.fragment,q),Q(T.$$.fragment,q),Q(I.$$.fragment,q),Q(V.$$.fragment,q),Q(F.$$.fragment,q),Y=!0)},o(q){et(L.$$.fragment,q),et(T.$$.fragment,q),et(I.$$.fragment,q),et(V.$$.fragment,q),et(F.$$.fragment,q),Y=!1},d(q){q&&G(e),Ar(X,q),st(L),st(T),st(I),st(V),st(F),Z=!1,$e(nt)}}}let zo=600,qo=100,Ko=.5,Vx=6,Gx=3,jx=!0,Xx=0;function Zx(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],f=5,l=[];function u(){f=ae(this.value),n(0,f)}function s(){a=Fn(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=f/100*Ko),t.$$.dirty&6&&(n(1,l=Ri(Vx,Ko,Gx,r,jx,Xx)),console.log("generated pattern",l))},n(4,i=1/Ko*60),[f,l,r,a,i,o,u,s]}class Kx extends Ut{constructor(e){super(),Ot(this,e,Zx,Wx,Pt,{})}}var f2={exports:{}};(function(t,e){(function(n,i){i()})(fr,function(){function n(u,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function i(u,s,h){var c=new XMLHttpRequest;c.open("GET",u),c.responseType="blob",c.onload=function(){l(c.response,s,h)},c.onerror=function(){console.error("could not download file")},c.send()}function r(u){var s=new XMLHttpRequest;s.open("HEAD",u,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function o(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(s)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof fr=="object"&&fr.global===fr?fr:void 0,f=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(u,s,h){var c=a.URL||a.webkitURL,p=document.createElement("a");s=s||u.name||"download",p.download=s,p.rel="noopener",typeof u=="string"?(p.href=u,p.origin===location.origin?o(p):r(p.href)?i(u,s,h):o(p,p.target="_blank")):(p.href=c.createObjectURL(u),setTimeout(function(){c.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(u,s,h){if(s=s||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(n(u,h),s);else if(r(u))i(u,s,h);else{var c=document.createElement("a");c.href=u,c.target="_blank",setTimeout(function(){o(c)})}}:function(u,s,h,c){if(c=c||open("","_blank"),c&&(c.document.title=c.document.body.innerText="downloading..."),typeof u=="string")return i(u,s,h);var p=u.type==="application/octet-stream",d=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||f)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=v:location=v,c=null},g.readAsDataURL(u)}else{var _=a.URL||a.webkitURL,b=_.createObjectURL(u);c?c.location=b:location.href=b,c=null,setTimeout(function(){_.revokeObjectURL(b)},4e4)}});a.saveAs=l.saveAs=l,t.exports=l})})(f2);var Qx=f2.exports;const l2=Ed(Qx);function $t(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}$t.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};$t.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};$t.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};$t.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=s2(0,t.length-1);return this.activate(t[e]),this};$t.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=s2(0,t.length-1);this.activate(t[e])};$t.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};$t.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};$t.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};$t.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};$t.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};$t.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};$t.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};$t.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};$t.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};$t.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};$t.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};$t.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};$t.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};$t.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};$t.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};$t.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const Au=function(){};Au.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};Au.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};$t.prototype.checkErr=new Au;function s2(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Hh(t){let e,n,i,r,o,a,f,l,u,s,h,c,p,d,m,g,_,b,v,w,x,k,M,S,E,D,C,R,L,H,T,z,I,K,V,W,F,Y,Z,nt,J,X,q;return{c(){e=$("div"),n=$("label"),i=ft(`ID:
        `),r=$("input"),o=U(),a=$("label"),f=ft(`Age:
        `),l=$("select"),u=$("option"),u.textContent="20-24",s=$("option"),s.textContent="25-29",h=$("option"),h.textContent="30-34",c=$("option"),c.textContent="35-39",p=$("option"),p.textContent="40-44",d=$("option"),d.textContent="45-49",m=$("option"),m.textContent="50-54",g=$("option"),g.textContent="55-60",_=U(),b=$("label"),v=ft(`Gender:
        `),w=$("input"),x=U(),k=$("label"),M=ft(`Highest finished education (select the best fitting one):
        `),S=$("select"),E=$("option"),E.textContent="none",D=$("option"),D.textContent="high school",C=$("option"),C.textContent="bachelor",R=$("option"),R.textContent="master",L=$("option"),L.textContent="phd",H=U(),T=$("label"),z=ft(`Which music instruments do you play?
        `),I=$("input"),K=U(),V=$("label"),W=ft(`For how many years do you roughly play it/them?
        `),F=$("input"),Y=U(),Z=$("label"),nt=ft(`How many years of experience do you have with visualization?
        `),J=$("input"),O(r,"type","text"),O(r,"placeholder","ID"),O(n,"class","svelte-u6a8gr"),u.__value="20-24",rt(u,u.__value),s.__value="25-29",rt(s,s.__value),h.__value="30-34",rt(h,h.__value),c.__value="35-39",rt(c,c.__value),p.__value="40-44",rt(p,p.__value),d.__value="45-49",rt(d,d.__value),m.__value="50-54",rt(m,m.__value),g.__value="55-60",rt(g,g.__value),t[6]===void 0&&Ne(()=>t[23].call(l)),O(a,"class","svelte-u6a8gr"),O(w,"type","text"),O(w,"placeholder","m, f, d, or self-describe"),O(b,"class","svelte-u6a8gr"),E.__value="none",rt(E,E.__value),D.__value="highs",rt(D,D.__value),C.__value="bachelor",rt(C,C.__value),R.__value="master",rt(R,R.__value),L.__value="phd",rt(L,L.__value),t[8]===void 0&&Ne(()=>t[25].call(S)),O(k,"class","svelte-u6a8gr"),O(I,"type","text"),O(I,"placeholder","free text"),O(T,"class","svelte-u6a8gr"),O(F,"type","number"),O(F,"min","0"),O(F,"step","1"),O(V,"class","svelte-u6a8gr"),O(J,"type","number"),O(J,"min","0"),O(J,"step","1"),O(Z,"class","svelte-u6a8gr"),O(e,"class","demo-form svelte-u6a8gr")},m(N,A){j(N,e,A),y(e,n),y(n,i),y(n,r),rt(r,t[5]),y(e,o),y(e,a),y(a,f),y(a,l),y(l,u),y(l,s),y(l,h),y(l,c),y(l,p),y(l,d),y(l,m),y(l,g),Vt(l,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),rt(w,t[7]),y(e,x),y(e,k),y(k,M),y(k,S),y(S,E),y(S,D),y(S,C),y(S,R),y(S,L),Vt(S,t[8],!0),y(e,H),y(e,T),y(T,z),y(T,I),rt(I,t[9]),y(e,K),y(e,V),y(V,W),y(V,F),rt(F,t[10]),y(e,Y),y(e,Z),y(Z,nt),y(Z,J),rt(J,t[11]),X||(q=[pt(r,"input",t[22]),pt(l,"change",t[23]),pt(w,"input",t[24]),pt(S,"change",t[25]),pt(I,"input",t[26]),pt(F,"input",t[27]),pt(J,"input",t[28])],X=!0)},p(N,A){A[0]&32&&r.value!==N[5]&&rt(r,N[5]),A[0]&64&&Vt(l,N[6]),A[0]&128&&w.value!==N[7]&&rt(w,N[7]),A[0]&256&&Vt(S,N[8]),A[0]&512&&I.value!==N[9]&&rt(I,N[9]),A[0]&1024&&ae(F.value)!==N[10]&&rt(F,N[10]),A[0]&2048&&ae(J.value)!==N[11]&&rt(J,N[11])},d(N){N&&G(e),X=!1,$e(q)}}}function Wh(t){let e,n,i,r,o=t[14]&&Vh(t);return{c(){e=$("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=U(),o&&o.c(),i=On()},m(a,f){j(a,e,f),j(a,n,f),o&&o.m(a,f),j(a,i,f),r=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&Q(o,1)):(o=Vh(a),o.c(),Q(o,1),o.m(i.parentNode,i)):o&&(Jt(),et(o,1,1,()=>{o=null}),te())},i(a){r||(Q(o),r=!0)},o(a){et(o),r=!1},d(a){a&&(G(e),G(n),G(i)),o&&o.d(a)}}}function Vh(t){let e,n,i,r,o=t[4]+1+"",a,f,l=t[2].length+"",u,s,h,c,p=t[13]+1+"",d,m,g,_,b,v;const w=[tk,Jx],x=[];function k(M,S){return M[17]==="audio"?0:M[16]===!1?1:-1}return~(g=k(t))&&(_=x[g]=w[g](t)),{c(){e=$("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=U(),i=$("p"),r=ft("Test number "),a=ft(o),f=ft(" / "),u=ft(l),s=U(),h=$("p"),c=ft("Trial number "),d=ft(p),m=U(),_&&_.c(),b=On()},m(M,S){j(M,e,S),j(M,n,S),j(M,i,S),y(i,r),y(i,a),y(i,f),y(i,u),j(M,s,S),j(M,h,S),y(h,c),y(h,d),j(M,m,S),~g&&x[g].m(M,S),j(M,b,S),v=!0},p(M,S){(!v||S[0]&16)&&o!==(o=M[4]+1+"")&&jt(a,o),(!v||S[0]&4)&&l!==(l=M[2].length+"")&&jt(u,l),(!v||S[0]&8192)&&p!==(p=M[13]+1+"")&&jt(d,p);let E=g;g=k(M),g===E?~g&&x[g].p(M,S):(_&&(Jt(),et(x[E],1,1,()=>{x[E]=null}),te()),~g?(_=x[g],_?_.p(M,S):(_=x[g]=w[g](M),_.c()),Q(_,1),_.m(b.parentNode,b)):_=null)},i(M){v||(Q(_),v=!0)},o(M){et(_),v=!1},d(M){M&&(G(e),G(n),G(i),G(s),G(h),G(m),G(b)),~g&&x[g].d(M)}}}function Jx(t){let e,n,i,r;const o=[rk,ik,nk,ek],a=[];function f(l,u){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=On()},m(l,u){~e&&a[e].m(l,u),j(l,i,u),r=!0},p(l,u){let s=e;e=f(l),e===s?~e&&a[e].p(l,u):(n&&(Jt(),et(a[s],1,1,()=>{a[s]=null}),te()),~e?(n=a[e],n?n.p(l,u):(n=a[e]=o[e](l),n.c()),Q(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(Q(n),r=!0)},o(l){et(n),r=!1},d(l){l&&G(i),~e&&a[e].d(l)}}}function tk(t){let e,n,i,r;return e=new Ji({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ut(e.$$.fragment),n=U(),i=$("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),j(o,n,a),j(o,i,a),r=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(Q(e.$$.fragment,o),r=!0)},o(o){et(e.$$.fragment,o),r=!1},d(o){o&&(G(n),G(i)),st(e,o)}}}function ek(t){let e,n;return e=new Nn({props:{pattern:t[0],width:Ef,height:Af}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function nk(t){let e,n;return e=new An({props:{pattern:t[0],width:Ef,height:Af}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function ik(t){let e,n;return e=new En({props:{pattern:t[0],width:Ef,height:Af}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function rk(t){let e,n;return e=new Dn({props:{pattern:t[0],audioFile:t[1],width:Ef,height:Af}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function Gh(t){let e,n,i,r,o,a;return{c(){e=$("div"),n=$("label"),i=ft(`Any final feedback?
        `),r=$("textarea")},m(f,l){j(f,e,l),y(e,n),y(n,i),y(n,r),rt(r,t[12]),o||(a=pt(r,"input",t[29]),o=!0)},p(f,l){l[0]&4096&&rt(r,f[12])},d(f){f&&G(e),o=!1,a()}}}function jh(t){let e,n,i,r,o,a;return{c(){e=$("div"),e.textContent="Thanks for participating!",n=U(),i=$("div"),r=$("button"),r.textContent="Download results"},m(f,l){j(f,e,l),j(f,n,l),j(f,i,l),y(i,r),o||(a=pt(r,"click",t[19]),o=!0)},p:vt,d(f){f&&(G(e),G(n),G(i)),o=!1,a()}}}function Xh(t){let e,n,i;return{c(){e=$("button"),e.textContent="next step (PageDown)"},m(r,o){j(r,e,o),n||(i=pt(e,"click",t[18]),n=!0)},p:vt,d(r){r&&G(e),n=!1,i()}}}function ok(t){let e,n,i,r,o,a,f,l,u=t[3]==="demo"&&Hh(t),s=t[3]==="tests"&&Wh(t),h=t[3]==="feedback"&&Gh(t),c=t[3]==="done"&&jh(t),p=!t[15]&&t[3]!=="done"&&Xh(t);return{c(){e=$("main"),n=$("h2"),n.textContent="Study",i=U(),u&&u.c(),r=U(),s&&s.c(),o=U(),h&&h.c(),a=U(),c&&c.c(),f=U(),p&&p.c(),O(e,"class","svelte-u6a8gr")},m(d,m){j(d,e,m),y(e,n),y(e,i),u&&u.m(e,null),y(e,r),s&&s.m(e,null),y(e,o),h&&h.m(e,null),y(e,a),c&&c.m(e,null),y(e,f),p&&p.m(e,null),l=!0},p(d,m){d[3]==="demo"?u?u.p(d,m):(u=Hh(d),u.c(),u.m(e,r)):u&&(u.d(1),u=null),d[3]==="tests"?s?(s.p(d,m),m[0]&8&&Q(s,1)):(s=Wh(d),s.c(),Q(s,1),s.m(e,o)):s&&(Jt(),et(s,1,1,()=>{s=null}),te()),d[3]==="feedback"?h?h.p(d,m):(h=Gh(d),h.c(),h.m(e,a)):h&&(h.d(1),h=null),d[3]==="done"?c?c.p(d,m):(c=jh(d),c.c(),c.m(e,f)):c&&(c.d(1),c=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=Xh(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){l||(Q(s),l=!0)},o(d){et(s),l=!1},d(d){d&&G(e),u&&u.d(),s&&s.d(),h&&h.d(),c&&c.d(),p&&p.d()}}}let Zh=.5;const bl=20;let ak=6,fk=!0,lk=0,Ef=600,Af=100;function sk(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],f="start",l=0,u,s="",h="20-24",c="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},x=[],k,M,S=!1,E=!1,D=!1,C="tick",R=bl,L=3,H=[],T=[],z=0;const I=[];Pa(()=>{document.querySelector("html").addEventListener("keyup",J)});const K=()=>{M=new $t({ratio:{firstVal:bl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,bl],direction:-1,reversalLimit:5,verbosity:1}}),M.init()};function V(){f==="start"?(n(2,a=ws(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,l=0)):f==="tests"?l<a.length?(n(17,C=a[l].stimulus),n(1,o=a[l].audioFile),W()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function W(){K(),n(13,b=0),v=0,k=0,n(14,S=!0),T=[],x=[],u=new Date,F()}function F(){console.log("Starting trial "+b),w={},n(15,E=!0),Y()}function Y(){let ct=Math.round(M.getLast("ratio"));ct=Math.random()<.5?ct:-ct,w.deviation=ct,n(20,R=ct),console.log("generated pattern",H),n(16,D=!0),window.setTimeout(()=>{n(16,D=!1)},1e3)}function Z(at){if(!E)return;n(15,E=!1),w.decisionChoice=at,w.errorCode=0;const ct=k;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&k++,w.errorCode==0&&(M.next(ct!=k),x[x.length]=w),w.errorCode==0&&v++,n(13,b++,b),M.reversalLimitReached("ratio")?nt():F()}function nt(){n(14,S=!1),X(),T=[],z=M.getFinalVal("ratio");for(let ct=0;ct<x.length;ct++)T[ct]=x[ct].deviation;console.log(T);const at=new Date;I.push({encoding:C,audioFile:o,final:z,data:T,score:k,testNumber:l,trialCount:b+1,trials:x,validTrialCount:v+1,testTimeSeconds:(at-u)/1e3}),n(4,l++,l)}function J(at){switch(console.log(at.key),at.key){case"ArrowLeft":Z(0);break;case"ArrowRight":Z(1);break;case"PageDown":!E&&f!=="done"&&V()}}function X(){`${k}`,b+1,`${(k/(b+1)*100).toFixed(1)}${M.getFinalVal("ratio")}`}function q(){const at={demographics:{partID:s,partAge:h,partGender:c,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:I};console.log(at);const ct=JSON.stringify(at,void 0,2),zt=new Blob([ct],{type:"text/plain;charset=utf-8"});l2(zt,"results.json")}function N(){s=this.value,n(5,s)}function A(){h=Fn(this),n(6,h)}function P(){c=this.value,n(7,c)}function tt(){p=Fn(this),n(8,p)}function B(){d=this.value,n(9,d)}function ht(){m=ae(this.value),n(10,m)}function ot(){g=ae(this.value),n(11,g)}function dt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=R/100*Zh),t.$$.dirty[0]&2097153&&(n(0,H=Ri(ak,Zh,L,i,fk,lk)),console.log("generated pattern",H))},[H,o,a,f,l,s,h,c,p,d,m,g,_,b,S,E,D,C,V,q,R,i,N,A,P,tt,B,ht,ot,dt]}class uk extends Ut{constructor(e){super(),Ot(this,e,sk,ok,Pt,{},null,[-1,-1])}}function Kh(t){let e,n,i,r,o,a,f,l,u,s,h,c,p,d,m,g,_,b,v,w,x,k,M,S,E,D,C,R,L,H,T,z,I,K,V,W,F,Y,Z,nt,J,X,q;return{c(){e=$("div"),n=$("label"),i=ft(`ID:
        `),r=$("input"),o=U(),a=$("label"),f=ft(`Age:
        `),l=$("select"),u=$("option"),u.textContent="20-24",s=$("option"),s.textContent="25-29",h=$("option"),h.textContent="30-34",c=$("option"),c.textContent="35-39",p=$("option"),p.textContent="40-44",d=$("option"),d.textContent="45-49",m=$("option"),m.textContent="50-54",g=$("option"),g.textContent="55-60",_=U(),b=$("label"),v=ft(`Gender:
        `),w=$("input"),x=U(),k=$("label"),M=ft(`Highest finished education (select the best fitting one):
        `),S=$("select"),E=$("option"),E.textContent="none",D=$("option"),D.textContent="high school",C=$("option"),C.textContent="bachelor",R=$("option"),R.textContent="master",L=$("option"),L.textContent="phd",H=U(),T=$("label"),z=ft(`Which music instruments do you play?
        `),I=$("input"),K=U(),V=$("label"),W=ft(`For how many years do you roughly play it/them?
        `),F=$("input"),Y=U(),Z=$("label"),nt=ft(`How many years of experience do you have with visualization?
        `),J=$("input"),O(r,"type","text"),O(r,"placeholder","ID"),O(n,"class","svelte-u6a8gr"),u.__value="20-24",rt(u,u.__value),s.__value="25-29",rt(s,s.__value),h.__value="30-34",rt(h,h.__value),c.__value="35-39",rt(c,c.__value),p.__value="40-44",rt(p,p.__value),d.__value="45-49",rt(d,d.__value),m.__value="50-54",rt(m,m.__value),g.__value="55-60",rt(g,g.__value),t[6]===void 0&&Ne(()=>t[23].call(l)),O(a,"class","svelte-u6a8gr"),O(w,"type","text"),O(w,"placeholder","m, f, d, or self-describe"),O(b,"class","svelte-u6a8gr"),E.__value="none",rt(E,E.__value),D.__value="highs",rt(D,D.__value),C.__value="bachelor",rt(C,C.__value),R.__value="master",rt(R,R.__value),L.__value="phd",rt(L,L.__value),t[8]===void 0&&Ne(()=>t[25].call(S)),O(k,"class","svelte-u6a8gr"),O(I,"type","text"),O(I,"placeholder","free text"),O(T,"class","svelte-u6a8gr"),O(F,"type","number"),O(F,"min","0"),O(F,"step","1"),O(V,"class","svelte-u6a8gr"),O(J,"type","number"),O(J,"min","0"),O(J,"step","1"),O(Z,"class","svelte-u6a8gr"),O(e,"class","demo-form svelte-u6a8gr")},m(N,A){j(N,e,A),y(e,n),y(n,i),y(n,r),rt(r,t[5]),y(e,o),y(e,a),y(a,f),y(a,l),y(l,u),y(l,s),y(l,h),y(l,c),y(l,p),y(l,d),y(l,m),y(l,g),Vt(l,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),rt(w,t[7]),y(e,x),y(e,k),y(k,M),y(k,S),y(S,E),y(S,D),y(S,C),y(S,R),y(S,L),Vt(S,t[8],!0),y(e,H),y(e,T),y(T,z),y(T,I),rt(I,t[9]),y(e,K),y(e,V),y(V,W),y(V,F),rt(F,t[10]),y(e,Y),y(e,Z),y(Z,nt),y(Z,J),rt(J,t[11]),X||(q=[pt(r,"input",t[22]),pt(l,"change",t[23]),pt(w,"input",t[24]),pt(S,"change",t[25]),pt(I,"input",t[26]),pt(F,"input",t[27]),pt(J,"input",t[28])],X=!0)},p(N,A){A[0]&32&&r.value!==N[5]&&rt(r,N[5]),A[0]&64&&Vt(l,N[6]),A[0]&128&&w.value!==N[7]&&rt(w,N[7]),A[0]&256&&Vt(S,N[8]),A[0]&512&&I.value!==N[9]&&rt(I,N[9]),A[0]&1024&&ae(F.value)!==N[10]&&rt(F,N[10]),A[0]&2048&&ae(J.value)!==N[11]&&rt(J,N[11])},d(N){N&&G(e),X=!1,$e(q)}}}function Qh(t){let e,n,i,r,o=t[14]&&Jh(t);return{c(){e=$("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=U(),o&&o.c(),i=On()},m(a,f){j(a,e,f),j(a,n,f),o&&o.m(a,f),j(a,i,f),r=!0},p(a,f){a[14]?o?(o.p(a,f),f[0]&16384&&Q(o,1)):(o=Jh(a),o.c(),Q(o,1),o.m(i.parentNode,i)):o&&(Jt(),et(o,1,1,()=>{o=null}),te())},i(a){r||(Q(o),r=!0)},o(a){et(o),r=!1},d(a){a&&(G(e),G(n),G(i)),o&&o.d(a)}}}function Jh(t){let e,n,i,r,o=t[4]+1+"",a,f,l=t[2].length+"",u,s,h,c,p=t[13]+1+"",d,m,g,_,b,v;const w=[hk,ck],x=[];function k(M,S){return M[17]==="audio"?0:M[16]===!1?1:-1}return~(g=k(t))&&(_=x[g]=w[g](t)),{c(){e=$("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=U(),i=$("p"),r=ft("Test number "),a=ft(o),f=ft(" / "),u=ft(l),s=U(),h=$("p"),c=ft("Trial number "),d=ft(p),m=U(),_&&_.c(),b=On()},m(M,S){j(M,e,S),j(M,n,S),j(M,i,S),y(i,r),y(i,a),y(i,f),y(i,u),j(M,s,S),j(M,h,S),y(h,c),y(h,d),j(M,m,S),~g&&x[g].m(M,S),j(M,b,S),v=!0},p(M,S){(!v||S[0]&16)&&o!==(o=M[4]+1+"")&&jt(a,o),(!v||S[0]&4)&&l!==(l=M[2].length+"")&&jt(u,l),(!v||S[0]&8192)&&p!==(p=M[13]+1+"")&&jt(d,p);let E=g;g=k(M),g===E?~g&&x[g].p(M,S):(_&&(Jt(),et(x[E],1,1,()=>{x[E]=null}),te()),~g?(_=x[g],_?_.p(M,S):(_=x[g]=w[g](M),_.c()),Q(_,1),_.m(b.parentNode,b)):_=null)},i(M){v||(Q(_),v=!0)},o(M){et(_),v=!1},d(M){M&&(G(e),G(n),G(i),G(s),G(h),G(m),G(b)),~g&&x[g].d(M)}}}function ck(t){let e,n,i,r;const o=[gk,mk,pk,dk],a=[];function f(l,u){return l[17]==="waveform"?0:l[17]==="tick"?1:l[17]==="bar"?2:l[17]==="color"?3:-1}return~(e=f(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=On()},m(l,u){~e&&a[e].m(l,u),j(l,i,u),r=!0},p(l,u){let s=e;e=f(l),e===s?~e&&a[e].p(l,u):(n&&(Jt(),et(a[s],1,1,()=>{a[s]=null}),te()),~e?(n=a[e],n?n.p(l,u):(n=a[e]=o[e](l),n.c()),Q(n,1),n.m(i.parentNode,i)):n=null)},i(l){r||(Q(n),r=!0)},o(l){et(n),r=!1},d(l){l&&G(i),~e&&a[e].d(l)}}}function hk(t){let e,n,i,r;return e=new Ji({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ut(e.$$.fragment),n=U(),i=$("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){lt(e,o,a),j(o,n,a),j(o,i,a),r=!0},p(o,a){const f={};a[0]&1&&(f.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(f.audioFile=o[1]),a[0]&8192&&(f.currentTrialNumber=o[13]),e.$set(f)},i(o){r||(Q(e.$$.fragment,o),r=!0)},o(o){et(e.$$.fragment,o),r=!1},d(o){o&&(G(n),G(i)),st(e,o)}}}function dk(t){let e,n;return e=new Nn({props:{pattern:t[0],width:Nf,height:Df}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function pk(t){let e,n;return e=new An({props:{pattern:t[0],width:Nf,height:Df}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function mk(t){let e,n;return e=new En({props:{pattern:t[0],width:Nf,height:Df}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function gk(t){let e,n;return e=new Dn({props:{pattern:t[0],audioFile:t[1],width:Nf,height:Df}}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function td(t){let e,n,i,r,o,a;return{c(){e=$("div"),n=$("label"),i=ft(`Any final feedback?
        `),r=$("textarea")},m(f,l){j(f,e,l),y(e,n),y(n,i),y(n,r),rt(r,t[12]),o||(a=pt(r,"input",t[29]),o=!0)},p(f,l){l[0]&4096&&rt(r,f[12])},d(f){f&&G(e),o=!1,a()}}}function ed(t){let e,n,i,r,o,a;return{c(){e=$("div"),e.textContent="Thanks for participating!",n=U(),i=$("div"),r=$("button"),r.textContent="Download results"},m(f,l){j(f,e,l),j(f,n,l),j(f,i,l),y(i,r),o||(a=pt(r,"click",t[19]),o=!0)},p:vt,d(f){f&&(G(e),G(n),G(i)),o=!1,a()}}}function nd(t){let e,n,i;return{c(){e=$("button"),e.textContent="next step (PageDown)"},m(r,o){j(r,e,o),n||(i=pt(e,"click",t[18]),n=!0)},p:vt,d(r){r&&G(e),n=!1,i()}}}function bk(t){let e,n,i,r,o,a,f,l,u=t[3]==="demo"&&Kh(t),s=t[3]==="tests"&&Qh(t),h=t[3]==="feedback"&&td(t),c=t[3]==="done"&&ed(t),p=!t[15]&&t[3]!=="done"&&nd(t);return{c(){e=$("main"),n=$("h2"),n.textContent="Study (Within-Participant Variance)",i=U(),u&&u.c(),r=U(),s&&s.c(),o=U(),h&&h.c(),a=U(),c&&c.c(),f=U(),p&&p.c(),O(e,"class","svelte-u6a8gr")},m(d,m){j(d,e,m),y(e,n),y(e,i),u&&u.m(e,null),y(e,r),s&&s.m(e,null),y(e,o),h&&h.m(e,null),y(e,a),c&&c.m(e,null),y(e,f),p&&p.m(e,null),l=!0},p(d,m){d[3]==="demo"?u?u.p(d,m):(u=Kh(d),u.c(),u.m(e,r)):u&&(u.d(1),u=null),d[3]==="tests"?s?(s.p(d,m),m[0]&8&&Q(s,1)):(s=Qh(d),s.c(),Q(s,1),s.m(e,o)):s&&(Jt(),et(s,1,1,()=>{s=null}),te()),d[3]==="feedback"?h?h.p(d,m):(h=td(d),h.c(),h.m(e,a)):h&&(h.d(1),h=null),d[3]==="done"?c?c.p(d,m):(c=ed(d),c.c(),c.m(e,f)):c&&(c.d(1),c=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=nd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){l||(Q(s),l=!0)},o(d){et(s),l=!1},d(d){d&&G(e),u&&u.d(),s&&s.d(),h&&h.d(),c&&c.d(),p&&p.d()}}}let id=.5;const _l=20;let _k=6,yk=!0,wk=0,Nf=600,Df=100;function vk(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],f="start",l=0,u,s="",h="20-24",c="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},x=[],k,M,S=!1,E=!1,D=!1,C="tick",R=_l,L=3,H=[],T=[],z=0;const I=[];Pa(()=>{document.querySelector("html").addEventListener("keyup",J)});const K=()=>{M=new $t({ratio:{firstVal:_l,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,_l],direction:-1,reversalLimit:5,verbosity:1}}),M.init()};function V(){f==="start"?(n(2,a=ws(a)),n(3,f="demo")):f==="demo"?(n(3,f="tests"),n(4,l=0)):f==="tests"?l<a.length?(n(17,C=a[l].stimulus),n(1,o=a[l].audioFile),W()):n(3,f="feedback"):f==="feedback"&&n(3,f="done")}function W(){K(),n(13,b=0),v=0,k=0,n(14,S=!0),T=[],x=[],u=new Date,F()}function F(){console.log("Starting trial "+b),w={},n(15,E=!0),Y()}function Y(){let ct=Math.round(M.getLast("ratio"));ct=Math.random()<.5?ct:-ct,w.deviation=ct,n(20,R=ct),console.log("generated pattern",H),n(16,D=!0),window.setTimeout(()=>{n(16,D=!1)},1e3)}function Z(at){if(!E)return;n(15,E=!1),w.decisionChoice=at,w.errorCode=0;const ct=k;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&k++,w.errorCode==0&&(M.next(ct!=k),x[x.length]=w),w.errorCode==0&&v++,n(13,b++,b),M.reversalLimitReached("ratio")?nt():F()}function nt(){n(14,S=!1),X(),T=[],z=M.getFinalVal("ratio");for(let ct=0;ct<x.length;ct++)T[ct]=x[ct].deviation;console.log(T);const at=new Date;I.push({encoding:C,audioFile:o,final:z,data:T,score:k,testNumber:l,trialCount:b+1,trials:x,validTrialCount:v+1,testTimeSeconds:(at-u)/1e3}),n(4,l++,l)}function J(at){switch(console.log(at.key),at.key){case"ArrowLeft":Z(0);break;case"ArrowRight":Z(1);break;case"PageDown":!E&&f!=="done"&&V()}}function X(){`${k}`,b+1,`${(k/(b+1)*100).toFixed(1)}${M.getFinalVal("ratio")}`}function q(){const at={demographics:{partID:s,partAge:h,partGender:c,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:I};console.log(at);const ct=JSON.stringify(at,void 0,2),zt=new Blob([ct],{type:"text/plain;charset=utf-8"});l2(zt,"results.json")}function N(){s=this.value,n(5,s)}function A(){h=Fn(this),n(6,h)}function P(){c=this.value,n(7,c)}function tt(){p=Fn(this),n(8,p)}function B(){d=this.value,n(9,d)}function ht(){m=ae(this.value),n(10,m)}function ot(){g=ae(this.value),n(11,g)}function dt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=R/100*id),t.$$.dirty[0]&2097153&&(n(0,H=Ri(_k,id,L,i,yk,wk)),console.log("generated pattern",H))},[H,o,a,f,l,s,h,c,p,d,m,g,_,b,S,E,D,C,V,q,R,i,N,A,P,tt,B,ht,ot,dt]}class xk extends Ut{constructor(e){super(),Ot(this,e,vk,bk,Pt,{},null,[-1,-1])}}function kk(t){let e,n,i;return{c(){e=$("div"),O(e,"width",n=t[0]+"px"),O(e,"height",i=t[1]+"px")},m(r,o){j(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&O(e,"width",n),o&2&&i!==(i=r[1]+"px")&&O(e,"height",i)},i:vt,o:vt,d(r){r&&G(e),t[6](null)}}}function Mk(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:f=100}=e,l;gn(()=>{console.log(o),console.log(i);const s=Je({width:a,height:f,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Eu(i,{x:h=>h}),Sf(i,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${c+1}`})]});n(2,l.textContent="",l),l.appendChild(s)});function u(s){ke[s?"unshift":"push"](()=>{l=s,n(2,l)})}return t.$$set=s=>{"data"in s&&n(3,i=s.data),"domain"in s&&n(4,r=s.domain),"title"in s&&n(5,o=s.title),"width"in s&&n(0,a=s.width),"height"in s&&n(1,f=s.height)},[a,f,l,i,r,o,u]}class $k extends Ut{constructor(e){super(),Ot(this,e,Mk,kk,Pt,{data:3,domain:4,title:5,width:0,height:1})}}function Sk(t){let e,n,i;return{c(){e=$("div"),O(e,"width",n=t[0]+"px"),O(e,"height",i=t[1]+"px")},m(r,o){j(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&O(e,"width",n),o&2&&i!==(i=r[1]+"px")&&O(e,"height",i)},i:vt,o:vt,d(r){r&&G(e),t[5](null)}}}function Tk(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;gn(()=>{const u=i.map(h=>({encoding:h.encoding,...f(h.finals)})),s=Je({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:u.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Ra(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),Cu(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),$f([0])]});n(2,a.textContent="",a),a.appendChild(s)});function f(u){const s=u.length,h=ni(u),d=1.96*(Xr(u)/Math.sqrt(s)),m=h-d,g=h+d;return{mean:h,low:m,high:g}}function l(u){ke[u?"unshift":"push"](()=>{a=u,n(2,a)})}return t.$$set=u=>{"stimuli"in u&&n(3,i=u.stimuli),"width"in u&&n(0,r=u.width),"height"in u&&n(1,o=u.height)},[r,o,a,i,f,l]}class u2 extends Ut{constructor(e){super(),Ot(this,e,Tk,Sk,Pt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Ck(t){let e,n,i;return{c(){e=$("div"),O(e,"width",n=t[0]+"px"),O(e,"height",i=t[1]+"px")},m(r,o){j(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&O(e,"width",n),o&2&&i!==(i=r[1]+"px")&&O(e,"height",i)},i:vt,o:vt,d(r){r&&G(e),t[5](null)}}}function Ek(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;gn(()=>{const u=i.map(h=>({encoding:h.encoding,...f(h.trialCounts)})),s=Je({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:u.sort((h,c)=>h.mean-c.mean).map(h=>h.encoding)},marks:[Ra(u,{x:h=>h.mean,y:h=>h.encoding,symbol:"diamond"}),Cu(u,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),$f([0])]});n(2,a.textContent="",a),a.appendChild(s)});function f(u){const s=u.length,h=ni(u),d=1.96*(Xr(u)/Math.sqrt(s)),m=h-d,g=h+d;return{mean:h,low:m,high:g}}function l(u){ke[u?"unshift":"push"](()=>{a=u,n(2,a)})}return t.$$set=u=>{"stimuli"in u&&n(3,i=u.stimuli),"width"in u&&n(0,r=u.width),"height"in u&&n(1,o=u.height)},[r,o,a,i,f,l]}class c2 extends Ut{constructor(e){super(),Ot(this,e,Ek,Ck,Pt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function rd(t,e,n){const i=t.slice();return i[8]=e[n],i}function od(t,e,n){const i=t.slice();return i[11]=e[n],i}function ad(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new $k({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=$("b"),i=ft(n),r=U(),ut(o.$$.fragment)},m(f,l){j(f,e,l),y(e,i),j(f,r,l),lt(o,f,l),a=!0},p(f,l){(!a||l&4)&&n!==(n=f[11].encoding+"")&&jt(i,n);const u={};l&4&&(u.data=f[11].finals),l&4&&(u.title=f[11].encoding),l&2&&(u.domain=[0,f[1]]),o.$set(u)},i(f){a||(Q(o.$$.fragment,f),a=!0)},o(f){et(o.$$.fragment,f),a=!1},d(f){f&&(G(e),G(r)),st(o,f)}}}function fd(t){let e,n,i,r=t[8].demographics.partID+"",o,a,f,l,u=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",s;return{c(){e=$("div"),n=$("b"),i=ft("P"),o=ft(r),a=ft(":"),f=U(),l=new w2(!1),s=U(),l.a=s,ue(e,"text-align","left")},m(h,c){j(h,e,c),y(e,n),y(n,i),y(n,o),y(n,a),y(e,f),l.m(u,e),y(e,s)},p(h,c){c&1&&r!==(r=h[8].demographics.partID+"")&&jt(o,r),c&1&&u!==(u=h[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&l.p(u)},d(h){h&&G(e)}}}function Ak(t){let e,n,i,r,o,a,f,l,u,s,h,c,p,d,m,g,_,b,v,w,x,k,M,S,E,D,C;h=new u2({props:{stimuli:t[2]}}),g=new c2({props:{stimuli:t[2]}});let R=He(t[2]),L=[];for(let I=0;I<R.length;I+=1)L[I]=ad(od(t,R,I));const H=I=>et(L[I],1,1,()=>{L[I]=null});let T=He(t[0]),z=[];for(let I=0;I<T.length;I+=1)z[I]=fd(rd(t,T,I));return{c(){e=$("main"),n=$("h2"),n.textContent="Analysis",i=U(),r=$("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=U(),a=$("input"),f=U(),l=$("div"),u=$("h3"),u.textContent="Mean and CI of Final Values",s=U(),ut(h.$$.fragment),c=U(),p=$("div"),d=$("h3"),d.textContent="Mean and CI of Trial Counts",m=U(),ut(g.$$.fragment),_=U(),b=$("div"),v=$("h3"),v.textContent="Final Values for Each Stimulus and All Participants",w=U();for(let I=0;I<L.length;I+=1)L[I].c();x=U(),k=$("div"),M=$("h3"),M.textContent="Feedback",S=U();for(let I=0;I<z.length;I+=1)z[I].c();O(a,"type","file"),O(a,"accept",".json"),a.multiple=!0},m(I,K){j(I,e,K),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,f),y(e,l),y(l,u),y(l,s),lt(h,l,null),y(e,c),y(e,p),y(p,d),y(p,m),lt(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w);for(let V=0;V<L.length;V+=1)L[V]&&L[V].m(b,null);y(e,x),y(e,k),y(k,M),y(k,S);for(let V=0;V<z.length;V+=1)z[V]&&z[V].m(k,null);E=!0,D||(C=pt(a,"input",t[3]),D=!0)},p(I,[K]){const V={};K&4&&(V.stimuli=I[2]),h.$set(V);const W={};if(K&4&&(W.stimuli=I[2]),g.$set(W),K&6){R=He(I[2]);let F;for(F=0;F<R.length;F+=1){const Y=od(I,R,F);L[F]?(L[F].p(Y,K),Q(L[F],1)):(L[F]=ad(Y),L[F].c(),Q(L[F],1),L[F].m(b,null))}for(Jt(),F=R.length;F<L.length;F+=1)H(F);te()}if(K&1){T=He(I[0]);let F;for(F=0;F<T.length;F+=1){const Y=rd(I,T,F);z[F]?z[F].p(Y,K):(z[F]=fd(Y),z[F].c(),z[F].m(k,null))}for(;F<z.length;F+=1)z[F].d(1);z.length=T.length}},i(I){if(!E){Q(h.$$.fragment,I),Q(g.$$.fragment,I);for(let K=0;K<R.length;K+=1)Q(L[K]);E=!0}},o(I){et(h.$$.fragment,I),et(g.$$.fragment,I),L=L.filter(Boolean);for(let K=0;K<L.length;K+=1)et(L[K]);E=!1},d(I){I&&G(e),st(h),st(g),Ar(L,I),Ar(z,I),D=!1,C()}}}function Nk(t,e,n){let i,r,o,a=[];const f=async s=>{const h=[],c=[];for(const p of s.target.files){const d=await p.text();h.push(JSON.parse(d)),c.push(p.name)}n(0,a=h),console.log(a)},l=s=>{if(s.lenght===0)return[];const h=[];for(const c of s)for(const p of c.tests){let d=p.encoding;(p.encoding==="audio"||p.encoding==="waveform")&&(d=`${p.encoding} + ${p.audioFile.startsWith("./Fluid")?"piano":"drums"}`),h.push({...c.demographics,...p,date:c.date,testType:d})}return console.log(h),h},u=s=>{if(s.length===0)return[];const h=Ml(s,c=>c.testType).map(([c,p])=>{const d=p.map(m=>m.final);return{encoding:c,finals:d,finalMean:ni(d),finalVar:Dr(d),trialCounts:p.map(m=>m.trialCount)}});return console.log(h),h};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=l(a)),t.$$.dirty&16&&n(2,r=u(i)),t.$$.dirty&16&&n(1,o=ce(i.map(s=>Math.abs(s.final))))},[a,o,r,f,i]}class Dk extends Ut{constructor(e){super(),Ot(this,e,Nk,Ak,Pt,{})}}function Fk(t){let e,n,i;return{c(){e=$("div"),O(e,"width",n=t[0]+"px"),O(e,"height",i=t[1]+"px")},m(r,o){j(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&O(e,"width",n),o&2&&i!==(i=r[1]+"px")&&O(e,"height",i)},i:vt,o:vt,d(r){r&&G(e),t[6](null)}}}function Lk(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:f=300}=e,l;gn(()=>{console.log(o),console.log(i);const s=Je({width:a,height:f,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Eu(i,{x:h=>h,strokeWidth:.5}),Sf(i,{x:h=>h,dx:7,y:(h,c)=>c,text:(h,c)=>`P${Math.floor(c/3)+1}-${c%3+1}`,fill:"black",stroke:"white"})]});n(2,l.textContent="",l),l.appendChild(s)});function u(s){ke[s?"unshift":"push"](()=>{l=s,n(2,l)})}return t.$$set=s=>{"data"in s&&n(3,i=s.data),"domain"in s&&n(4,r=s.domain),"title"in s&&n(5,o=s.title),"width"in s&&n(0,a=s.width),"height"in s&&n(1,f=s.height)},[a,f,l,i,r,o,u]}class Ik extends Ut{constructor(e){super(),Ot(this,e,Lk,Fk,Pt,{data:3,domain:4,title:5,width:0,height:1})}}function Rk(t){let e,n,i;return{c(){e=$("div"),O(e,"width",n=t[0]+"px"),O(e,"height",i=t[1]+"px")},m(r,o){j(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&O(e,"width",n),o&2&&i!==(i=r[1]+"px")&&O(e,"height",i)},i:vt,o:vt,d(r){r&&G(e),t[5](null)}}}function Pk(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;gn(()=>{const u=i.map(h=>({partID:h.partID,...f(h.finals)}));console.log(i,u);const s=Je({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:u.sort((h,c)=>h.mean-c.mean).map(h=>h.partID)},marks:[Ra(u,{x:h=>h.mean,y:h=>h.partID,symbol:"diamond"}),Ra(i,{x:h=>h.mean,y:h=>h.partID}),Cu(u,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),$f([0])]});n(2,a.textContent="",a),a.appendChild(s)});function f(u){const s=u.length,h=ni(u),d=1.96*(Xr(u)/Math.sqrt(s)),m=h-d,g=h+d;return{mean:h,low:m,high:g}}function l(u){ke[u?"unshift":"push"](()=>{a=u,n(2,a)})}return t.$$set=u=>{"partis"in u&&n(3,i=u.partis),"width"in u&&n(0,r=u.width),"height"in u&&n(1,o=u.height)},[r,o,a,i,f,l]}class Yo extends Ut{constructor(e){super(),Ot(this,e,Pk,Rk,Pt,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function ld(t,e,n){const i=t.slice();return i[13]=e[n],i}function sd(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new Ik({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=$("b"),i=ft(n),r=U(),ut(o.$$.fragment)},m(f,l){j(f,e,l),y(e,i),j(f,r,l),lt(o,f,l),a=!0},p(f,l){(!a||l&32)&&n!==(n=f[13].encoding+"")&&jt(i,n);const u={};l&32&&(u.data=f[13].finals),l&32&&(u.title=f[13].encoding),l&16&&(u.domain=[0,f[4]]),o.$set(u)},i(f){a||(Q(o.$$.fragment,f),a=!0)},o(f){et(o.$$.fragment,f),a=!1},d(f){f&&(G(e),G(r)),st(o,f)}}}function Ok(t){let e,n,i,r,o,a,f,l,u,s,h,c,p,d,m,g,_,b,v,w,x,k,M,S,E,D,C,R,L,H,T,z,I,K,V,W,F,Y,Z,nt;h=new u2({props:{stimuli:t[5]}}),g=new c2({props:{stimuli:t[5]}}),x=new Yo({props:{partis:t[3]}}),E=new Yo({props:{partis:t[2]}}),L=new Yo({props:{partis:t[0]}}),I=new Yo({props:{partis:t[1]}});let J=He(t[5]),X=[];for(let N=0;N<J.length;N+=1)X[N]=sd(ld(t,J,N));const q=N=>et(X[N],1,1,()=>{X[N]=null});return{c(){e=$("main"),n=$("h2"),n.textContent="Analysis (Within-Participant Variance)",i=U(),r=$("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=U(),a=$("input"),f=U(),l=$("div"),u=$("h3"),u.textContent="Mean and CI of Final Values per Stimulus",s=U(),ut(h.$$.fragment),c=U(),p=$("div"),d=$("h3"),d.textContent="Mean and CI of Trial Counts per Stimulus",m=U(),ut(g.$$.fragment),_=U(),b=$("div"),v=$("h3"),v.textContent="Mean and CI of Final Values per Participant",w=U(),ut(x.$$.fragment),k=U(),M=$("h4"),M.textContent="Only Audio",S=U(),ut(E.$$.fragment),D=U(),C=$("h4"),C.textContent="Only Color",R=U(),ut(L.$$.fragment),H=U(),T=$("h4"),T.textContent="Only Waveform",z=U(),ut(I.$$.fragment),K=U(),V=$("div"),W=$("h3"),W.textContent="Final Values for Each Stimulus and All Participants",F=U();for(let N=0;N<X.length;N+=1)X[N].c();O(a,"type","file"),O(a,"accept",".json"),a.multiple=!0},m(N,A){j(N,e,A),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,f),y(e,l),y(l,u),y(l,s),lt(h,l,null),y(e,c),y(e,p),y(p,d),y(p,m),lt(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w),lt(x,b,null),y(b,k),y(b,M),y(b,S),lt(E,b,null),y(b,D),y(b,C),y(b,R),lt(L,b,null),y(b,H),y(b,T),y(b,z),lt(I,b,null),y(e,K),y(e,V),y(V,W),y(V,F);for(let P=0;P<X.length;P+=1)X[P]&&X[P].m(V,null);Y=!0,Z||(nt=pt(a,"input",t[6]),Z=!0)},p(N,[A]){const P={};A&32&&(P.stimuli=N[5]),h.$set(P);const tt={};A&32&&(tt.stimuli=N[5]),g.$set(tt);const B={};A&8&&(B.partis=N[3]),x.$set(B);const ht={};A&4&&(ht.partis=N[2]),E.$set(ht);const ot={};A&1&&(ot.partis=N[0]),L.$set(ot);const dt={};if(A&2&&(dt.partis=N[1]),I.$set(dt),A&48){J=He(N[5]);let at;for(at=0;at<J.length;at+=1){const ct=ld(N,J,at);X[at]?(X[at].p(ct,A),Q(X[at],1)):(X[at]=sd(ct),X[at].c(),Q(X[at],1),X[at].m(V,null))}for(Jt(),at=J.length;at<X.length;at+=1)q(at);te()}},i(N){if(!Y){Q(h.$$.fragment,N),Q(g.$$.fragment,N),Q(x.$$.fragment,N),Q(E.$$.fragment,N),Q(L.$$.fragment,N),Q(I.$$.fragment,N);for(let A=0;A<J.length;A+=1)Q(X[A]);Y=!0}},o(N){et(h.$$.fragment,N),et(g.$$.fragment,N),et(x.$$.fragment,N),et(E.$$.fragment,N),et(L.$$.fragment,N),et(I.$$.fragment,N),X=X.filter(Boolean);for(let A=0;A<X.length;A+=1)et(X[A]);Y=!1},d(N){N&&G(e),st(h),st(g),st(x),st(E),st(L),st(I),Ar(X,N),Z=!1,nt()}}}function Uk(t,e,n){let i,r,o,a,f,l,u,s=[];const h=async m=>{const g=[],_=[];for(const b of m.target.files){const v=await b.text();g.push(JSON.parse(v)),_.push(b.name)}n(7,s=g),console.log(s)},c=m=>{if(m.lenght===0)return[];const g=[];for(const _ of m)for(const b of _.tests){let v=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(v=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({..._.demographics,...b,date:_.date,testType:v})}return console.log(g),g},p=m=>{if(m.length===0)return[];const g=Ml(m,_=>_.testType).map(([_,b])=>{const v=b.map(w=>w.final);return{encoding:_,finals:v,finalMean:ni(v),finalVar:Dr(v),trialCounts:b.map(w=>w.trialCount)}});return console.log(g),g},d=(m,g)=>{if(m.length===0)return[];g&&(m=m.filter(b=>b.testType===g));const _=Ml(m,b=>b.partID).map(([b,v])=>{const w=v.map(x=>x.final);return{partID:b,finals:w,finalMean:ni(w),finalVar:Dr(w),trialCounts:v.map(x=>x.trialCount)}});return console.log(_),_};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=c(s)),t.$$.dirty&256&&n(5,r=p(i)),t.$$.dirty&256&&n(4,o=ce(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=d(i)),t.$$.dirty&256&&n(2,f=d(i,"audio + piano")),t.$$.dirty&256&&n(1,l=d(i,"waveform + piano")),t.$$.dirty&256&&n(0,u=d(i,"color"))},[u,l,f,a,o,r,h,s,i]}class Bk extends Ut{constructor(e){super(),Ot(this,e,Uk,Ok,Pt,{})}}function ud(t,e,n){const i=t.slice();return i[8]=e[n],i}function cd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=$("option"),i=ft(n),e.__value=t[8],rt(e,e.__value)},m(r,o){j(r,e,o),y(e,i)},p:vt,d(r){r&&G(e)}}}function zk(t){let e,n,i,r,o,a,f,l,u=(t[1]*1e3).toFixed(1)+"",s,h,c,p,d,m,g,_,b,v,w,x,k,M,S,E,D,C,R,L,H,T,z,I,K,V,W,F,Y,Z,nt,J,X,q,N=He(t[5]),A=[];for(let P=0;P<N.length;P+=1)A[P]=cd(ud(t,N,P));return k=new Ji({props:{pattern:t[3],audioFile:t[2]}}),S=new Ji({props:{pattern:t[4],audioFile:t[2]}}),D=new Dn({props:{pattern:t[3],audioFile:t[2],width:vn,height:xn}}),R=new Dn({props:{pattern:t[4],audioFile:t[2],width:vn,height:xn}}),H=new En({props:{pattern:t[3],width:vn,height:xn}}),z=new En({props:{pattern:t[4],width:vn,height:xn}}),K=new An({props:{pattern:t[3],width:vn,height:xn}}),W=new An({props:{pattern:t[4],width:vn,height:xn}}),Y=new Nn({props:{pattern:t[3],width:vn,height:xn}}),nt=new Nn({props:{pattern:t[4],width:vn,height:xn}}),{c(){e=$("main"),n=$("h2"),n.textContent="Examples",i=U(),r=$("div"),o=$("label"),a=ft(`deviation
      `),f=$("input"),l=ft(`
      (`),s=ft(u),h=ft(" milliseconds)"),c=U(),p=$("label"),d=ft(`instrument sample:
      `),m=$("select");for(let P=0;P<A.length;P+=1)A[P].c();g=U(),_=$("div"),b=$("h2"),b.textContent="early fourth note",v=U(),w=$("h2"),w.textContent="late fourth note",x=U(),ut(k.$$.fragment),M=U(),ut(S.$$.fragment),E=U(),ut(D.$$.fragment),C=U(),ut(R.$$.fragment),L=U(),ut(H.$$.fragment),T=U(),ut(z.$$.fragment),I=U(),ut(K.$$.fragment),V=U(),ut(W.$$.fragment),F=U(),ut(Y.$$.fragment),Z=U(),ut(nt.$$.fragment),O(f,"type","range"),O(f,"min","0"),O(f,"max","20"),O(f,"step","1"),O(o,"class","svelte-1kjj0oz"),t[2]===void 0&&Ne(()=>t[7].call(m)),O(p,"class","svelte-1kjj0oz"),O(_,"class","stimuli svelte-1kjj0oz")},m(P,tt){j(P,e,tt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,f),rt(f,t[0]),y(o,l),y(o,s),y(o,h),y(r,c),y(r,p),y(p,d),y(p,m);for(let B=0;B<A.length;B+=1)A[B]&&A[B].m(m,null);Vt(m,t[2],!0),y(e,g),y(e,_),y(_,b),y(_,v),y(_,w),y(_,x),lt(k,_,null),y(_,M),lt(S,_,null),y(_,E),lt(D,_,null),y(_,C),lt(R,_,null),y(_,L),lt(H,_,null),y(_,T),lt(z,_,null),y(_,I),lt(K,_,null),y(_,V),lt(W,_,null),y(_,F),lt(Y,_,null),y(_,Z),lt(nt,_,null),J=!0,X||(q=[pt(f,"change",t[6]),pt(f,"input",t[6]),pt(m,"change",t[7])],X=!0)},p(P,[tt]){if(tt&1&&rt(f,P[0]),(!J||tt&2)&&u!==(u=(P[1]*1e3).toFixed(1)+"")&&jt(s,u),tt&32){N=He(P[5]);let qt;for(qt=0;qt<N.length;qt+=1){const _i=ud(P,N,qt);A[qt]?A[qt].p(_i,tt):(A[qt]=cd(_i),A[qt].c(),A[qt].m(m,null))}for(;qt<A.length;qt+=1)A[qt].d(1);A.length=N.length}tt&36&&Vt(m,P[2]);const B={};tt&8&&(B.pattern=P[3]),tt&4&&(B.audioFile=P[2]),k.$set(B);const ht={};tt&16&&(ht.pattern=P[4]),tt&4&&(ht.audioFile=P[2]),S.$set(ht);const ot={};tt&8&&(ot.pattern=P[3]),tt&4&&(ot.audioFile=P[2]),D.$set(ot);const dt={};tt&16&&(dt.pattern=P[4]),tt&4&&(dt.audioFile=P[2]),R.$set(dt);const at={};tt&8&&(at.pattern=P[3]),H.$set(at);const ct={};tt&16&&(ct.pattern=P[4]),z.$set(ct);const zt={};tt&8&&(zt.pattern=P[3]),K.$set(zt);const me={};tt&16&&(me.pattern=P[4]),W.$set(me);const gi={};tt&8&&(gi.pattern=P[3]),Y.$set(gi);const bi={};tt&16&&(bi.pattern=P[4]),nt.$set(bi)},i(P){J||(Q(k.$$.fragment,P),Q(S.$$.fragment,P),Q(D.$$.fragment,P),Q(R.$$.fragment,P),Q(H.$$.fragment,P),Q(z.$$.fragment,P),Q(K.$$.fragment,P),Q(W.$$.fragment,P),Q(Y.$$.fragment,P),Q(nt.$$.fragment,P),J=!0)},o(P){et(k.$$.fragment,P),et(S.$$.fragment,P),et(D.$$.fragment,P),et(R.$$.fragment,P),et(H.$$.fragment,P),et(z.$$.fragment,P),et(K.$$.fragment,P),et(W.$$.fragment,P),et(Y.$$.fragment,P),et(nt.$$.fragment,P),J=!1},d(P){P&&G(e),Ar(A,P),st(k),st(S),st(D),st(R),st(H),st(z),st(K),st(W),st(Y),st(nt),X=!1,$e(q)}}}let vn=600,xn=100,yl=.5,hd=6,dd=3,pd=!0,md=0;function qk(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,f=[],l=[];function u(){a=ae(this.value),n(0,a)}function s(){o=Fn(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*yl),t.$$.dirty&2&&n(3,f=Ri(hd,yl,dd,-i,pd,md)),t.$$.dirty&2&&n(4,l=Ri(hd,yl,dd,i,pd,md))},[a,i,o,f,l,r,u,s]}class Yk extends Ut{constructor(e){super(),Ot(this,e,qk,zk,Pt,{})}}function Qo(t,e){return new URLSearchParams(t.location.search).get(e)}function gd(t){let e,n,i,r,o,a,f,l,u,s,h,c,p,d,m,g,_,b,v;return{c(){e=$("div"),n=$("div"),i=$("p"),i.textContent=`Please click + or - until this rectangle has the size of a credit
          card.`,r=U(),o=$("p"),a=$("button"),a.textContent="+",f=U(),l=$("button"),l.textContent="-",u=U(),s=vl("svg"),h=vl("rect"),g=U(),_=$("div"),_.textContent=`Please also set your screen brightness and audio volume to comfortable
        levels and avoid sunlight or artificial light reflecting from your
        screen.`,O(h,"width",c=t[0]*.52),O(h,"height",p=t[19]*2),O(h,"fill","#ccc"),O(h,"rx","8"),O(s,"width",d=t[0]*.52+"px"),O(s,"height",m=t[19]*2+"px")},m(w,x){j(w,e,x),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,f),y(o,l),y(n,u),y(n,s),y(s,h),y(e,g),y(e,_),b||(v=[pt(a,"click",t[25]),pt(l,"click",t[26])],b=!0)},p(w,x){x[0]&1&&c!==(c=w[0]*.52)&&O(h,"width",c),x[0]&524288&&p!==(p=w[19]*2)&&O(h,"height",p),x[0]&1&&d!==(d=w[0]*.52+"px")&&O(s,"width",d),x[0]&524288&&m!==(m=w[19]*2+"px")&&O(s,"height",m)},d(w){w&&G(e),b=!1,$e(v)}}}function bd(t){let e,n,i,r,o,a,f,l,u,s,h,c,p,d,m,g,_,b,v,w,x,k,M,S,E,D,C,R,L,H,T,z,I,K,V,W,F,Y,Z;return{c(){e=$("div"),n=$("label"),i=ft(`Your age in years:
        `),r=$("select"),o=$("option"),o.textContent="20-24",a=$("option"),a.textContent="25-29",f=$("option"),f.textContent="30-34",l=$("option"),l.textContent="35-39",u=$("option"),u.textContent="40-44",s=$("option"),s.textContent="45-49",h=$("option"),h.textContent="50-54",c=$("option"),c.textContent="55-60",p=U(),d=$("label"),m=ft(`Gender:
        `),g=$("input"),_=U(),b=$("label"),v=ft(`Highest finished education (select the best fitting one):
        `),w=$("select"),x=$("option"),x.textContent="none",k=$("option"),k.textContent="high school",M=$("option"),M.textContent="bachelor",S=$("option"),S.textContent="master",E=$("option"),E.textContent="phd",D=U(),C=$("label"),R=ft(`Which music instruments do you play? Please separate by comma, if you do
        not play any, write 'none'.
        `),L=$("input"),H=U(),T=$("label"),z=ft(`For how many years do you roughly play it/them?
        `),I=$("input"),K=U(),V=$("label"),W=ft(`How many years of experience do you have with information visualization?
        `),F=$("input"),o.__value="20-24",rt(o,o.__value),a.__value="25-29",rt(a,a.__value),f.__value="30-34",rt(f,f.__value),l.__value="35-39",rt(l,l.__value),u.__value="40-44",rt(u,u.__value),s.__value="45-49",rt(s,s.__value),h.__value="50-54",rt(h,h.__value),c.__value="55-60",rt(c,c.__value),t[7]===void 0&&Ne(()=>t[27].call(r)),O(n,"class","svelte-jfwatw"),O(g,"type","text"),O(g,"placeholder","m, f, d, or self-describe"),O(d,"class","svelte-jfwatw"),x.__value="none",rt(x,x.__value),k.__value="highs",rt(k,k.__value),M.__value="bachelor",rt(M,M.__value),S.__value="master",rt(S,S.__value),E.__value="phd",rt(E,E.__value),t[9]===void 0&&Ne(()=>t[29].call(w)),O(b,"class","svelte-jfwatw"),O(L,"type","text"),O(L,"placeholder","free text"),O(C,"class","svelte-jfwatw"),O(I,"type","number"),O(I,"min","0"),O(I,"step","1"),O(T,"class","svelte-jfwatw"),O(F,"type","number"),O(F,"min","0"),O(F,"step","1"),O(V,"class","svelte-jfwatw"),O(e,"class","demo-form svelte-jfwatw")},m(nt,J){j(nt,e,J),y(e,n),y(n,i),y(n,r),y(r,o),y(r,a),y(r,f),y(r,l),y(r,u),y(r,s),y(r,h),y(r,c),Vt(r,t[7],!0),y(e,p),y(e,d),y(d,m),y(d,g),rt(g,t[8]),y(e,_),y(e,b),y(b,v),y(b,w),y(w,x),y(w,k),y(w,M),y(w,S),y(w,E),Vt(w,t[9],!0),y(e,D),y(e,C),y(C,R),y(C,L),rt(L,t[10]),y(e,H),y(e,T),y(T,z),y(T,I),rt(I,t[11]),y(e,K),y(e,V),y(V,W),y(V,F),rt(F,t[12]),Y||(Z=[pt(r,"change",t[27]),pt(g,"input",t[28]),pt(w,"change",t[29]),pt(L,"input",t[30]),pt(I,"input",t[31]),pt(F,"input",t[32])],Y=!0)},p(nt,J){J[0]&128&&Vt(r,nt[7]),J[0]&256&&g.value!==nt[8]&&rt(g,nt[8]),J[0]&512&&Vt(w,nt[9]),J[0]&1024&&L.value!==nt[10]&&rt(L,nt[10]),J[0]&2048&&ae(I.value)!==nt[11]&&rt(I,nt[11]),J[0]&4096&&ae(F.value)!==nt[12]&&rt(F,nt[12])},d(nt){nt&&G(e),Y=!1,$e(Z)}}}function _d(t){let e,n,i,r,o=t[15]&&yd(t);return{c(){e=$("p"),e.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=U(),o&&o.c(),i=On()},m(a,f){j(a,e,f),j(a,n,f),o&&o.m(a,f),j(a,i,f),r=!0},p(a,f){a[15]?o?(o.p(a,f),f[0]&32768&&Q(o,1)):(o=yd(a),o.c(),Q(o,1),o.m(i.parentNode,i)):o&&(Jt(),et(o,1,1,()=>{o=null}),te())},i(a){r||(Q(o),r=!0)},o(a){et(o),r=!1},d(a){a&&(G(e),G(n),G(i)),o&&o.d(a)}}}function yd(t){let e,n,i=t[6]+1+"",r,o,a=t[4].length+"",f,l,u=t[14]+1+"",s,h,c,p,d,m;const g=[Wk,Hk],_=[];function b(v,w){return v[18]==="audio"?0:v[17]===!1?1:-1}return~(c=b(t))&&(p=_[c]=g[c](t)),{c(){e=$("p"),n=ft("Test number "),r=ft(i),o=ft(" / "),f=ft(a),l=ft(", trial number "),s=ft(u),h=U(),p&&p.c(),d=On()},m(v,w){j(v,e,w),y(e,n),y(e,r),y(e,o),y(e,f),y(e,l),y(e,s),j(v,h,w),~c&&_[c].m(v,w),j(v,d,w),m=!0},p(v,w){(!m||w[0]&64)&&i!==(i=v[6]+1+"")&&jt(r,i),(!m||w[0]&16)&&a!==(a=v[4].length+"")&&jt(f,a),(!m||w[0]&16384)&&u!==(u=v[14]+1+"")&&jt(s,u);let x=c;c=b(v),c===x?~c&&_[c].p(v,w):(p&&(Jt(),et(_[x],1,1,()=>{_[x]=null}),te()),~c?(p=_[c],p?p.p(v,w):(p=_[c]=g[c](v),p.c()),Q(p,1),p.m(d.parentNode,d)):p=null)},i(v){m||(Q(p),m=!0)},o(v){et(p),m=!1},d(v){v&&(G(e),G(h),G(d)),~c&&_[c].d(v)}}}function Hk(t){let e,n,i,r,o;const a=[Xk,jk,Gk,Vk],f=[];function l(u,s){return u[18]==="waveform"?0:u[18]==="tick"?1:u[18]==="bar"?2:u[18]==="color"?3:-1}return~(e=l(t))&&(n=f[e]=a[e](t)),{c(){n&&n.c(),i=U(),r=$("p"),r.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
          <b>right for late</b>.`},m(u,s){~e&&f[e].m(u,s),j(u,i,s),j(u,r,s),o=!0},p(u,s){let h=e;e=l(u),e===h?~e&&f[e].p(u,s):(n&&(Jt(),et(f[h],1,1,()=>{f[h]=null}),te()),~e?(n=f[e],n?n.p(u,s):(n=f[e]=a[e](u),n.c()),Q(n,1),n.m(i.parentNode,i)):n=null)},i(u){o||(Q(n),o=!0)},o(u){et(n),o=!1},d(u){u&&(G(i),G(r)),~e&&f[e].d(u)}}}function Wk(t){let e,n,i,r,o,a;return i=new Ji({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],audioFile:t[2],cachedAudio:t[3],currentTrialNumber:t[14]}}),{c(){e=$("div"),e.textContent="Listen to the audio, the forth note comes either too soon or too late.",n=U(),ut(i.$$.fragment),r=U(),o=$("p"),o.textContent="You can play the audio as many times as you like."},m(f,l){j(f,e,l),j(f,n,l),lt(i,f,l),j(f,r,l),j(f,o,l),a=!0},p(f,l){const u={};l[0]&2&&(u.pattern=[...f[1].slice(0,f[1].length-1),f[1].at(-1)+Math.random()*1e-4]),l[0]&4&&(u.audioFile=f[2]),l[0]&8&&(u.cachedAudio=f[3]),l[0]&16384&&(u.currentTrialNumber=f[14]),i.$set(u)},i(f){a||(Q(i.$$.fragment,f),a=!0)},o(f){et(i.$$.fragment,f),a=!1},d(f){f&&(G(e),G(n),G(r),G(o)),st(i,f)}}}function Vk(t){let e,n,i,r,o,a,f,l,u,s,h,c,p;return r=new Nn({props:{pattern:t[20],width:t[0]/2,height:t[19]/2}}),a=new Nn({props:{pattern:t[21],width:t[0]/2,height:t[19]/2}}),c=new Nn({props:{pattern:t[1],width:t[0],height:t[19]}}),{c(){e=$("div"),e.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=U(),i=$("div"),ut(r.$$.fragment),o=U(),ut(a.$$.fragment),f=U(),l=$("div"),l.textContent="Example for early",u=U(),s=$("div"),s.textContent="Example for late",h=U(),ut(c.$$.fragment),O(l,"class","svelte-jfwatw"),O(s,"class","svelte-jfwatw"),O(i,"class","vis-example svelte-jfwatw")},m(d,m){j(d,e,m),j(d,n,m),j(d,i,m),lt(r,i,null),y(i,o),lt(a,i,null),y(i,f),y(i,l),y(i,u),y(i,s),j(d,h,m),lt(c,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&524288&&(g.height=d[19]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&524288&&(_.height=d[19]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&524288&&(b.height=d[19]),c.$set(b)},i(d){p||(Q(r.$$.fragment,d),Q(a.$$.fragment,d),Q(c.$$.fragment,d),p=!0)},o(d){et(r.$$.fragment,d),et(a.$$.fragment,d),et(c.$$.fragment,d),p=!1},d(d){d&&(G(e),G(n),G(i),G(h)),st(r),st(a),st(c,d)}}}function Gk(t){let e,n,i,r,o,a,f,l,u,s,h,c,p;return r=new An({props:{pattern:t[20],width:t[0]/2,height:t[19]/2}}),a=new An({props:{pattern:t[21],width:t[0]/2,height:t[19]/2}}),c=new An({props:{pattern:t[1],width:t[0],height:t[19]}}),{c(){e=$("div"),e.textContent=`The bar chart shows the size of the gaps between notes in the bars'
            height (example: the bar at 2 shows the gap between the first and
            second note). Look at the third bar, it is either lower (early) or
            higher (late) than the others.`,n=U(),i=$("div"),ut(r.$$.fragment),o=U(),ut(a.$$.fragment),f=U(),l=$("div"),l.textContent="Example for early",u=U(),s=$("div"),s.textContent="Example for late",h=U(),ut(c.$$.fragment),O(l,"class","svelte-jfwatw"),O(s,"class","svelte-jfwatw"),O(i,"class","vis-example svelte-jfwatw")},m(d,m){j(d,e,m),j(d,n,m),j(d,i,m),lt(r,i,null),y(i,o),lt(a,i,null),y(i,f),y(i,l),y(i,u),y(i,s),j(d,h,m),lt(c,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&524288&&(g.height=d[19]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&524288&&(_.height=d[19]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&524288&&(b.height=d[19]),c.$set(b)},i(d){p||(Q(r.$$.fragment,d),Q(a.$$.fragment,d),Q(c.$$.fragment,d),p=!0)},o(d){et(r.$$.fragment,d),et(a.$$.fragment,d),et(c.$$.fragment,d),p=!1},d(d){d&&(G(e),G(n),G(i),G(h)),st(r),st(a),st(c,d)}}}function jk(t){let e,n,i,r,o,a,f,l,u,s,h,c,p;return r=new En({props:{pattern:t[20],width:t[0]/2,height:t[19]/2}}),a=new En({props:{pattern:t[21],width:t[0]/2,height:t[19]/2}}),c=new En({props:{pattern:t[1],width:t[0],height:t[19]}}),{c(){e=$("div"),e.textContent=`Look at the peaks, the gap between the third and forth tick is
            either smaller (early) or larger (late) than the other gaps.`,n=U(),i=$("div"),ut(r.$$.fragment),o=U(),ut(a.$$.fragment),f=U(),l=$("div"),l.textContent="Example for early",u=U(),s=$("div"),s.textContent="Example for late",h=U(),ut(c.$$.fragment),O(l,"class","svelte-jfwatw"),O(s,"class","svelte-jfwatw"),O(i,"class","vis-example svelte-jfwatw")},m(d,m){j(d,e,m),j(d,n,m),j(d,i,m),lt(r,i,null),y(i,o),lt(a,i,null),y(i,f),y(i,l),y(i,u),y(i,s),j(d,h,m),lt(c,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&524288&&(g.height=d[19]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&524288&&(_.height=d[19]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&524288&&(b.height=d[19]),c.$set(b)},i(d){p||(Q(r.$$.fragment,d),Q(a.$$.fragment,d),Q(c.$$.fragment,d),p=!0)},o(d){et(r.$$.fragment,d),et(a.$$.fragment,d),et(c.$$.fragment,d),p=!1},d(d){d&&(G(e),G(n),G(i),G(h)),st(r),st(a),st(c,d)}}}function Xk(t){let e,n,i,r,o,a,f,l,u,s,h,c,p;return r=new Dn({props:{pattern:t[20],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[19]/2}}),a=new Dn({props:{pattern:t[21],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[19]/2}}),c=new Dn({props:{pattern:t[1],audioFile:t[2],cachedAudio:t[3],width:t[0],height:t[19]}}),{c(){e=$("div"),e.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the peaks, the gap between the third and forth peaks is either
            smaller (early) or larger (late) than the other gaps.`,n=U(),i=$("div"),ut(r.$$.fragment),o=U(),ut(a.$$.fragment),f=U(),l=$("div"),l.textContent="Example for early",u=U(),s=$("div"),s.textContent="Example for late",h=U(),ut(c.$$.fragment),O(l,"class","svelte-jfwatw"),O(s,"class","svelte-jfwatw"),O(i,"class","vis-example svelte-jfwatw")},m(d,m){j(d,e,m),j(d,n,m),j(d,i,m),lt(r,i,null),y(i,o),lt(a,i,null),y(i,f),y(i,l),y(i,u),y(i,s),j(d,h,m),lt(c,d,m),p=!0},p(d,m){const g={};m[0]&4&&(g.audioFile=d[2]),m[0]&8&&(g.cachedAudio=d[3]),m[0]&1&&(g.width=d[0]/2),m[0]&524288&&(g.height=d[19]/2),r.$set(g);const _={};m[0]&4&&(_.audioFile=d[2]),m[0]&8&&(_.cachedAudio=d[3]),m[0]&1&&(_.width=d[0]/2),m[0]&524288&&(_.height=d[19]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&4&&(b.audioFile=d[2]),m[0]&8&&(b.cachedAudio=d[3]),m[0]&1&&(b.width=d[0]),m[0]&524288&&(b.height=d[19]),c.$set(b)},i(d){p||(Q(r.$$.fragment,d),Q(a.$$.fragment,d),Q(c.$$.fragment,d),p=!0)},o(d){et(r.$$.fragment,d),et(a.$$.fragment,d),et(c.$$.fragment,d),p=!1},d(d){d&&(G(e),G(n),G(i),G(h)),st(r),st(a),st(c,d)}}}function wd(t){let e,n,i,r,o,a;return{c(){e=$("div"),n=$("label"),i=ft(`Do you have any final feedback/comments?
        `),r=$("textarea")},m(f,l){j(f,e,l),y(e,n),y(n,i),y(n,r),rt(r,t[13]),o||(a=pt(r,"input",t[33]),o=!0)},p(f,l){l[0]&8192&&rt(r,f[13])},d(f){f&&G(e),o=!1,a()}}}function vd(t){let e,n,i;return{c(){e=$("div"),e.textContent="Thanks for participating!",n=U(),i=$("a"),i.textContent="click here to get your compensation",O(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){j(r,e,o),j(r,n,o),j(r,i,o)},d(r){r&&(G(e),G(n),G(i))}}}function xd(t){let e,n,i;return{c(){e=$("button"),e.textContent="next step",O(e,"class","next-btn svelte-jfwatw")},m(r,o){j(r,e,o),n||(i=pt(e,"click",t[22]),n=!0)},p:vt,d(r){r&&G(e),n=!1,i()}}}function Zk(t){let e,n,i,r,o,a,f,l=t[5]==="start"&&gd(t),u=t[5]==="demo"&&bd(t),s=t[5]==="tests"&&_d(t),h=t[5]==="feedback"&&wd(t),c=t[5]==="done"&&vd(),p=!t[16]&&t[5]!=="done"&&xd(t);return{c(){e=$("main"),l&&l.c(),n=U(),u&&u.c(),i=U(),s&&s.c(),r=U(),h&&h.c(),o=U(),c&&c.c(),a=U(),p&&p.c(),O(e,"class","svelte-jfwatw")},m(d,m){j(d,e,m),l&&l.m(e,null),y(e,n),u&&u.m(e,null),y(e,i),s&&s.m(e,null),y(e,r),h&&h.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),p&&p.m(e,null),f=!0},p(d,m){d[5]==="start"?l?l.p(d,m):(l=gd(d),l.c(),l.m(e,n)):l&&(l.d(1),l=null),d[5]==="demo"?u?u.p(d,m):(u=bd(d),u.c(),u.m(e,i)):u&&(u.d(1),u=null),d[5]==="tests"?s?(s.p(d,m),m[0]&32&&Q(s,1)):(s=_d(d),s.c(),Q(s,1),s.m(e,r)):s&&(Jt(),et(s,1,1,()=>{s=null}),te()),d[5]==="feedback"?h?h.p(d,m):(h=wd(d),h.c(),h.m(e,o)):h&&(h.d(1),h=null),d[5]==="done"?c||(c=vd(),c.c(),c.m(e,a)):c&&(c.d(1),c=null),!d[16]&&d[5]!=="done"?p?p.p(d,m):(p=xd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(Q(s),f=!0)},o(d){et(s),f=!1},d(d){d&&G(e),l&&l.d(),u&&u.d(),s&&s.d(),h&&h.d(),c&&c.d(),p&&p.d()}}}const Kk="/store";let kd=.5;const wl=20;let Qk=6,Jk=!0,tM=0;function eM(t,e,n){let i,r,o=Qo(window,"PROLIFIC_PID"),a=Qo(window,"STUDY_ID"),f=Qo(window,"SESSION_ID");const l=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let u=l[0],s;ys(u).then(ee=>n(3,s=ee));let h=[{stimulus:"audio",audioFile:l[0]},{stimulus:"waveform",audioFile:l[0]},{stimulus:"color"}];const c=[0,.5,1,1.4,1.9,2.4],p=[0,.5,1,1.6,2.1,2.6];let d="start",m=0,g,_="",b="",v="",w="",x=0,k=0,M="",S=0,E,D={},C=[],R,L,H=!1,T=!1,z=!1,I="tick",K=wl,V=3,W=600,F=[],Y=[],Z=0;const nt=[];Pa(()=>{document.querySelector("html").addEventListener("keyup",B)});const J=()=>{L=new $t({ratio:{firstVal:wl,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,wl],direction:-1,reversalLimit:5,verbosity:1}}),L.init()};function X(){d==="start"?(n(4,h=ws(h)),n(5,d="demo")):d==="demo"?_==""||b==""||v==""||w==""?alert("please fill the form first"):(n(5,d="tests"),n(6,m=0)):d==="tests"?(ot(),m<h.length?(n(18,I=h[m].stimulus),n(2,u=h[m].audioFile),q()):n(5,d="feedback")):d==="feedback"&&(ot(),n(5,d="done"))}function q(){J(),n(14,S=0),E=0,R=0,n(15,H=!0),Y=[],C=[],g=new Date,N()}function N(){console.log("Starting trial "+S),D={},n(16,T=!0),A()}function A(){let Ht=Math.round(L.getLast("ratio"));Ht=Math.random()<.5?Ht:-Ht,D.deviation=Ht,n(23,K=Ht),D.startTime=new Date,console.log("generated pattern",F),n(17,z=!0),window.setTimeout(()=>{n(17,z=!1)},1e3)}function P(ee){if(!T)return;n(16,T=!1),D.decisionChoice=ee,D.errorCode=0,D.timeTaken=(new Date-D.startTime)/1e3;const Ht=R;(D.decisionChoice==0&&D.deviation<0||D.decisionChoice==1&&D.deviation>0)&&D.errorCode==0&&R++,D.errorCode==0&&(L.next(Ht!=R),C[C.length]=D),D.errorCode==0&&E++,n(14,S++,S),L.reversalLimitReached("ratio")?tt():N()}function tt(){n(15,H=!1),ht(),Y=[],Z=L.getFinalVal("ratio");for(let Ht=0;Ht<C.length;Ht++)Y[Ht]=C[Ht].deviation;console.log(Y);const ee=new Date;nt.push({encoding:I,audioFile:u,final:Z,data:Y,score:R,testNumber:m,trialCount:S+1,trials:C,validTrialCount:E+1,testTimeSeconds:(ee-g)/1e3}),n(6,m++,m)}function B(ee){if(!z)switch(ee.key){case"ArrowLeft":T&&P(0);break;case"ArrowRight":T&&P(1);break;case"PageDown":!T&&d!=="done"&&X()}}function ht(){`${R}`,S+1,`${(R/(S+1)*100).toFixed(1)}${L.getFinalVal("ratio")}`}function ot(){const ee={studyStep:d,demographics:{partID:o,studyID:a,sessionID:f,partAge:_,partGender:b,partEduation:v,partMusicInstr:w,partMusicInstrYears:x,partVisExperienceYears:k,partFeedback:M,visWidth:W},date:new Date().toISOString(),tests:nt};console.log("saving data",ee);const Ht=JSON.stringify(ee,void 0,2);fetch(Kk,{method:"POST",headers:{"Content-Type":"application/json"},body:Ht}).then(Ff=>{console.log("Data saved:",Ff)})}const dt=()=>n(0,W*=1.05),at=()=>n(0,W*=.95);function ct(){_=Fn(this),n(7,_)}function zt(){b=this.value,n(8,b)}function me(){v=Fn(this),n(9,v)}function gi(){w=this.value,n(10,w)}function bi(){x=ae(this.value),n(11,x)}function qt(){k=ae(this.value),n(12,k)}function _i(){M=this.value,n(13,M)}return t.$$.update=()=>{t.$$.dirty[0]&8388608&&n(24,i=K/100*kd),t.$$.dirty[0]&1&&n(19,r=W/6),t.$$.dirty[0]&16777218&&(n(1,F=Ri(Qk,kd,V,i,Jk,tM)),console.log("generated pattern",F))},[W,F,u,s,h,d,m,_,b,v,w,x,k,M,S,H,T,z,I,r,c,p,X,K,i,dt,at,ct,zt,me,gi,bi,qt,_i]}class nM extends Ut{constructor(e){super(),Ot(this,e,eM,Zk,Pt,{},null,[-1,-1])}}function Md(t){let e,n,i,r,o,a,f,l,u,s,h,c,p,d,m,g;return{c(){e=$("div"),n=$("button"),n.textContent="Playground",i=U(),r=$("button"),r.textContent="Examples",o=U(),a=$("button"),a.textContent="Study",f=U(),l=$("button"),l.textContent="Analysis",u=U(),s=$("button"),s.textContent="Study (variance)",h=U(),c=$("button"),c.textContent="Analysis (variance)",p=U(),d=$("button"),d.textContent="Study (Prolific)"},m(_,b){j(_,e,b),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,f),y(e,l),y(e,u),y(e,s),y(e,h),y(e,c),y(e,p),y(e,d),m||(g=[pt(n,"click",t[1]),pt(r,"click",t[2]),pt(a,"click",t[3]),pt(l,"click",t[4]),pt(s,"click",t[5]),pt(c,"click",t[6]),pt(d,"click",t[7])],m=!0)},p:vt,d(_){_&&G(e),m=!1,$e(g)}}}function iM(t){let e,n;return e=new nM({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function rM(t){let e,n;return e=new Bk({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function oM(t){let e,n;return e=new xk({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function aM(t){let e,n;return e=new Dk({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function fM(t){let e,n;return e=new uk({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function lM(t){let e,n;return e=new Yk({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function sM(t){let e,n;return e=new Kx({}),{c(){ut(e.$$.fragment)},m(i,r){lt(e,i,r),n=!0},i(i){n||(Q(e.$$.fragment,i),n=!0)},o(i){et(e.$$.fragment,i),n=!1},d(i){st(e,i)}}}function uM(t){let e,n,i,r,o,a,f,l=t[0]!=="study_prolific"&&Md(t);const u=[sM,lM,fM,aM,oM,rM,iM],s=[];function h(c,p){return c[0]==="playground"?0:c[0]==="examples"?1:c[0]==="study"?2:c[0]==="analysis"?3:c[0]==="study_variance"?4:c[0]==="analysis_variance"?5:c[0]==="study_prolific"?6:-1}return~(o=h(t))&&(a=s[o]=u[o](t)),{c(){e=$("main"),n=$("h1"),n.textContent="Rhythm Error Sensitivity Study",i=U(),l&&l.c(),r=U(),a&&a.c()},m(c,p){j(c,e,p),y(e,n),y(e,i),l&&l.m(e,null),y(e,r),~o&&s[o].m(e,null),f=!0},p(c,[p]){c[0]!=="study_prolific"?l?l.p(c,p):(l=Md(c),l.c(),l.m(e,r)):l&&(l.d(1),l=null);let d=o;o=h(c),o!==d&&(a&&(Jt(),et(s[d],1,1,()=>{s[d]=null}),te()),~o?(a=s[o],a||(a=s[o]=u[o](c),a.c()),Q(a,1),a.m(e,null)):a=null)},i(c){f||(Q(a),f=!0)},o(c){et(a),f=!1},d(c){c&&G(e),l&&l.d(),~o&&s[o].d()}}}function cM(t,e,n){let i=Qo(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific")]}class hM extends Ut{constructor(e){super(),Ot(this,e,cM,uM,Pt,{})}}new hM({target:document.getElementById("app")});export{Ed as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-mU2IW54f.js","assets/utilities-KJXQK8J9.js","assets/index-TlZAmOeR.js","assets/index-Rzp8pir6.js","assets/index-G7lhMU6c.js","assets/index-rjJTHSb2.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
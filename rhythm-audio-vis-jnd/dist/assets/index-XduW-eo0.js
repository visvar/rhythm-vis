var wb=Object.defineProperty;var vb=(t,e,n)=>e in t?wb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var On=(t,e,n)=>(vb(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function _t(){}function x0(t){return t()}function Ju(){return Object.create(null)}function $e(t){t.forEach(x0)}function k0(t){return typeof t=="function"}function Rt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function xb(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function H(t,e,n){t.insertBefore(e,n||null)}function W(t){t.parentNode&&t.parentNode.removeChild(t)}function Ve(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function Bf(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function rt(t){return document.createTextNode(t)}function N(){return rt(" ")}function Fn(){return rt("")}function gt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function I(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function xe(t){return t===""?null:+t}function kb(t){return Array.from(t.childNodes)}function $t(t,e){e=""+e,t.data!==e&&(t.data=e)}function st(t,e){t.value=e??""}function we(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function _e(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function _i(t){const e=t.querySelector(":checked");return e&&e.__value}class Mb{constructor(e=!1){On(this,"is_svg",!1);On(this,"e");On(this,"n");On(this,"t");On(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Bf(n.nodeName):this.e=M(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)H(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(W)}}let Yr;function Pr(t){Yr=t}function M0(){if(!Yr)throw new Error("Function called outside component initialization");return Yr}function Zn(t){M0().$$.on_mount.push(t)}function qe(t){M0().$$.after_update.push(t)}const Bi=[],oe=[];let Hi=[];const Qu=[],Sb=Promise.resolve();let qf=!1;function Tb(){qf||(qf=!0,Sb.then(S0))}function hn(t){Hi.push(t)}const Xl=new Set;let Ii=0;function S0(){if(Ii!==0)return;const t=Yr;do{try{for(;Ii<Bi.length;){const e=Bi[Ii];Ii++,Pr(e),Cb(e.$$)}}catch(e){throw Bi.length=0,Ii=0,e}for(Pr(null),Bi.length=0,Ii=0;oe.length;)oe.pop()();for(let e=0;e<Hi.length;e+=1){const n=Hi[e];Xl.has(n)||(Xl.add(n),n())}Hi.length=0}while(Bi.length);for(;Qu.length;)Qu.pop()();qf=!1,Xl.clear(),Pr(t)}function Cb(t){if(t.fragment!==null){t.update(),$e(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(hn)}}function Ab(t){const e=[],n=[];Hi.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Hi=e}const oa=new Set;let ci;function Ht(){ci={r:0,c:[],p:ci}}function Vt(){ci.r||$e(ci.c),ci=ci.p}function Y(t,e){t&&t.i&&(oa.delete(t),t.i(e))}function K(t,e,n,i){if(t&&t.o){if(oa.has(t))return;oa.add(t),ci.c.push(()=>{oa.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Bt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ht(t){t&&t.c()}function ut(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),hn(()=>{const o=t.$$.on_mount.map(x0).filter(k0);t.$$.on_destroy?t.$$.on_destroy.push(...o):$e(o),t.$$.on_mount=[]}),r.forEach(hn)}function ct(t,e){const n=t.$$;n.fragment!==null&&(Ab(n.after_update),$e(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Eb(t,e){t.$$.dirty[0]===-1&&(Bi.push(t),Tb(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Pt(t,e,n,i,r,o,a=null,l=[-1]){const f=Yr;Pr(t);const s=t.$$={fragment:null,ctx:[],props:o,update:_t,not_equal:r,bound:Ju(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ju(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(c,h,...p)=>{const d=p.length?p[0]:h;return s.ctx&&r(s.ctx[c],s.ctx[c]=d)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](d),u&&Eb(t,c)),h}):[],s.update(),u=!0,$e(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const c=kb(e.target);s.fragment&&s.fragment.l(c),c.forEach(W)}else s.fragment&&s.fragment.c();e.intro&&Y(t.$$.fragment),ut(t,e.target,e.anchor),S0()}Pr(f)}class Ot{constructor(){On(this,"$$");On(this,"$$set")}$destroy(){ct(this,1),this.$destroy=_t}$on(e,n){if(!k0(n))return _t;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!xb(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $b="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($b);const Nb="modulepreload",Db=function(t){return"/rhythm-vis/"+t},tc={},Ri=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=Db(a),a in tc)return;tc[a]=!0;const l=a.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(!!i)for(let c=o.length-1;c>=0;c--){const h=o[c];if(h.href===a&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":Nb,l||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),l)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function Fb(t){if(t){if(t=new Uint8Array(t.buffer||t),Ib(t))return"wav";if(Lb(t))return"mp3";if(Pb(t))return"flac";if(Ob(t))return"m4a";if(Ub(t))return"opus";if(Rb(t))return"oga";if(zb(t))return"qoa"}}function Lb(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function Ib(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function Rb(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function Pb(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function Ob(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function Ub(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function zb(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let Bb=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const qb=globalThis.AudioBuffer||Bb;async function Yb(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=Fb(t);if(!e)throw Error("Cannot detect audio format");if(!me[e])throw Error("Missing decoder for "+e+" format");return me[e](t)}const me={async oga(t){let{decoder:e}=me.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await Ri(()=>import("./index-sy0-TYZE.js"),__vite__mapDeps([0,1,2]));await(me.oga.decoder=e=new n).ready}return t&&Pi(await e.decodeFile(t))},async mp3(t){let{decoder:e}=me.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await Ri(()=>import("./index-sw3iqwMj.js"),__vite__mapDeps([3,1]));await(me.mp3.decoder=e=new n).ready}return t&&Pi(await e.decode(t))},async flac(t){let{decoder:e}=me.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await Ri(()=>import("./index-1vG73tlT.js"),__vite__mapDeps([4,1,2]));await(me.flac.decoder=e=new n).ready}return t&&Pi(await e.decode(t))},async opus(t){let{decoder:e}=me.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await Ri(()=>import("./index-pRhnj47k.js"),__vite__mapDeps([5,1,2]));await(me.opus.decoder=e=new n).ready}return t&&Pi(await e.decodeFile(t))},async wav(t){let{decode:e}=me.wav;if(!e){let n=await Ri(()=>import("./index-Qhetk7jC.js").then(i=>i.i),__vite__mapDeps([]));e=me.wav.decode=n.default.decode}return t&&Pi(await e(t))},async qoa(t){let{decode:e}=me.qoa;return e||(me.qoa.decode=e=(await Ri(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&Pi(await e(t))}};function Pi({channelData:t,sampleRate:e}){let n=new qb({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var yr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wb=Hb;function Hb(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=Gb(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Vb(a,r,i,n,o)}function Vb(t,e,n,i,r){var o=r/8,a=i*o,l=new ArrayBuffer(44+t.length*o),f=new DataView(l);return Ro(f,0,"RIFF"),f.setUint32(4,36+t.length*o,!0),Ro(f,8,"WAVE"),Ro(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,e,!0),f.setUint16(22,i,!0),f.setUint32(24,n,!0),f.setUint32(28,n*a,!0),f.setUint16(32,a,!0),f.setUint16(34,r,!0),Ro(f,36,"data"),f.setUint32(40,t.length*o,!0),e===1?Xb(f,44,t):jb(f,44,t),l}function Gb(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function jb(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function Xb(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function Ro(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const Zb=T0(Wb);function yi(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let l=0;l<t;++l){let f;r?f=l>=n?i:0:f=l===n?i:0,a.push(l*e+o+f)}return a}async function Us(t){const n=await(await fetch(t)).arrayBuffer();return await Yb(n)}function Ka(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const l=Math.round(a*t.sampleRate);let f=1;for(let s=0;s<r.length;++s)f=Math.max(0,f-2/40100),o[l+s]=r[s]*f}return o}function zs(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([Zb(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function Ja(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function ve(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lo(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Qa(t){let e,n,i;t.length!==2?(e=ve,n=(l,f)=>ve(t(l),f),i=(l,f)=>t(l)-f):(e=t===ve||t===lo?t:Kb,n=t,i=t);function r(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<0?s=c+1:u=c}while(s<u)}return s}function o(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<=0?s=c+1:u=c}while(s<u)}return s}function a(l,f,s=0,u=l.length){const c=r(l,f,s,u-1);return c>s&&i(l[c-1],f)>-i(l[c],f)?c-1:c}return{left:r,center:a,right:o}}function Kb(){return 0}function C0(t){return t===null?NaN:+t}function*Jb(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const Qb=Qa(ve),t_=Qb.right;Qa(C0).center;const tl=t_;function Bs(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function e_(t){return t.length|0}function n_(t){return!(t>0)}function i_(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function r_(t){return e=>t(...e)}function o_(...t){const e=typeof t[t.length-1]=="function"&&r_(t.pop());t=t.map(i_);const n=t.map(e_),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(n_))return o;for(;;){o.push(r.map((l,f)=>t[f][l]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function a_(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Zi(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,o+=i*(l-r))}if(n>1)return o/(n-1)}function fo(t,e){const n=Zi(t,e);return n&&Math.sqrt(n)}function Re(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class wi{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,l=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);l&&(n[i++]=l),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class vi extends Map{constructor(e,n=$0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Yf(this,e))}has(e){return super.has(Yf(this,e))}set(e,n){return super.set(A0(this,e),n)}delete(e){return super.delete(E0(this,e))}}class el extends Set{constructor(e,n=$0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(Yf(this,e))}add(e){return super.add(A0(this,e))}delete(e){return super.delete(E0(this,e))}}function Yf({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function A0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function E0({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function $0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function da(t){return t}function nl(t,...e){return il(t,da,da,e)}function ln(t,...e){return il(t,Array.from,da,e)}function Vi(t,e,...n){return il(t,da,e,n)}function l_(t,e,...n){return il(t,Array.from,e,n)}function il(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const l=new vi,f=i[a++];let s=-1;for(const u of o){const c=f(u,++s,o),h=l.get(c);h?h.push(u):l.set(c,[u])}for(const[u,c]of l)l.set(u,r(c,a));return e(l)}(t,0)}function f_(t,e){return Array.from(e,n=>t[n])}function Wr(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const l=pa(a[r],a[o]);if(l)return l}})):(n=t.map(n),i.sort((r,o)=>pa(n[r],n[o]))),f_(t,i)}return t.sort(N0(n))}function N0(t=ve){if(t===ve)return pa;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function pa(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function qs(t,e,n){return(e.length!==2?Wr(Vi(t,e,n),([i,r],[o,a])=>ve(r,a)||ve(i,o)):Wr(nl(t,n),([i,r],[o,a])=>e(r,a)||ve(i,o))).map(([i])=>i)}const s_=Math.sqrt(50),u_=Math.sqrt(10),c_=Math.sqrt(2);function ma(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=s_?10:o>=u_?5:o>=c_?2:1;let l,f,s;return r<0?(s=Math.pow(10,-r)/a,l=Math.round(t*s),f=Math.round(e*s),l/s<t&&++l,f/s>e&&--f,s=-s):(s=Math.pow(10,r)*a,l=Math.round(t/s),f=Math.round(e/s),l*s<t&&++l,f*s>e&&--f),f<l&&.5<=n&&n<2?ma(t,e,n*2):[l,f,s]}function Hr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?ma(e,t,n):ma(t,e,n);if(!(o>=r))return[];const l=o-r+1,f=new Array(l);if(i)if(a<0)for(let s=0;s<l;++s)f[s]=(o-s)/-a;else for(let s=0;s<l;++s)f[s]=(o-s)*a;else if(a<0)for(let s=0;s<l;++s)f[s]=(r+s)/-a;else for(let s=0;s<l;++s)f[s]=(r+s)*a;return f}function ga(t,e,n){return e=+e,t=+t,n=+n,ma(t,e,n)[2]}function Wf(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?ga(e,t,n):ga(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function h_(t){return Math.max(1,Math.ceil(Math.log(Bs(t))/Math.LN2)+1)}function ke(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function d_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function An(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function p_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function D0(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?pa:N0(r);i>n;){if(i-n>600){const f=i-n+1,s=e-n+1,u=Math.log(f),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(f-c)/f)*(s-f/2<0?-1:1),p=Math.max(n,Math.floor(e-s*c/f+h)),d=Math.min(i,Math.floor(e+(f-s)*c/f+h));D0(t,e,p,d,r)}const o=t[e];let a=n,l=i;for(wr(t,n,e),r(t[i],o)>0&&wr(t,n,i);a<l;){for(wr(t,a,l),++a,--l;r(t[a],o)<0;)++a;for(;r(t[l],o)>0;)--l}r(t[n],o)===0?wr(t,n,l):(++l,wr(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function wr(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function F0(t,e=ve){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?ve(a,r)>0:ve(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Ki(t,e,n){if(t=Float64Array.from(Jb(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return An(t);if(e>=1)return ke(t);var i,r=(i-1)*e,o=Math.floor(r),a=ke(D0(t,o).subarray(0,o+1)),l=An(t.subarray(o+1));return a+(l-a)*(r-o)}}function m_(t,e,n=C0){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return a+(l-a)*(r-o)}}function g_(t,e,n){const i=Bs(t),r=Ki(t,.75)-Ki(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function L0(t,e,n){const i=Bs(t),r=fo(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function Kn(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function Hf(t,e){return Ki(t,.5,e)}function*b_(t){for(const e of t)yield*e}function I0(t){return Array.from(b_(t))}function __(t,e){const n=new vi;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function y_(t,e=w_){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function w_(t,e){return[t,e]}function Vf(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Jn(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function ba(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function v_(t){return t}var Zl=1,Kl=2,Gf=3,Po=4,ec=1e-6;function x_(t){return"translate("+t+",0)"}function k_(t){return"translate(0,"+t+")"}function M_(t){return e=>+t(e)}function S_(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function T_(){return!this.__axis}function C_(t,e){var n=[],i=null,r=null,o=6,a=6,l=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Zl||t===Po?-1:1,u=t===Po||t===Kl?"x":"y",c=t===Zl||t===Gf?x_:k_;function h(p){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):v_),b=Math.max(o,0)+l,_=e.range(),g=+_[0]+f,v=+_[_.length-1]+f,w=(e.bandwidth?S_:M_)(e.copy(),f),k=p.selection?p.selection():p,x=k.selectAll(".domain").data([null]),S=k.selectAll(".tick").data(d,e).order(),T=S.exit(),E=S.enter().append("g").attr("class","tick"),F=S.select("line"),C=S.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(E),F=F.merge(E.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),C=C.merge(E.append("text").attr("fill","currentColor").attr(u,s*b).attr("dy",t===Zl?"0em":t===Gf?"0.71em":"0.32em")),p!==k&&(x=x.transition(p),S=S.transition(p),F=F.transition(p),C=C.transition(p),T=T.transition(p).attr("opacity",ec).attr("transform",function(L){return isFinite(L=w(L))?c(L+f):this.getAttribute("transform")}),E.attr("opacity",ec).attr("transform",function(L){var R=this.parentNode.__axis;return c((R&&isFinite(R=R(L))?R:w(L))+f)})),T.remove(),x.attr("d",t===Po||t===Kl?a?"M"+s*a+","+g+"H"+f+"V"+v+"H"+s*a:"M"+f+","+g+"V"+v:a?"M"+g+","+s*a+"V"+f+"H"+v+"V"+s*a:"M"+g+","+f+"H"+v),S.attr("opacity",1).attr("transform",function(L){return c(w(L)+f)}),F.attr(u+"2",s*o),C.attr(u,s*b).text(m),k.filter(T_).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Kl?"start":t===Po?"end":"middle"),k.each(function(){this.__axis=w})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),h):i&&i.slice()},h.tickFormat=function(p){return arguments.length?(r=p,h):r},h.tickSize=function(p){return arguments.length?(o=a=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(l=+p,h):l},h.offset=function(p){return arguments.length?(f=+p,h):f},h}function A_(t){return C_(Gf,t)}var E_={value:()=>{}};function R0(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new aa(n)}function aa(t){this._=t}function $_(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}aa.prototype=R0.prototype={constructor:aa,on:function(t,e){var n=this._,i=$_(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=N_(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=nc(n[r],t.name,e);else if(e==null)for(r in n)n[r]=nc(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new aa(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function N_(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function nc(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=E_,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var jf="http://www.w3.org/1999/xhtml";const Ji={svg:"http://www.w3.org/2000/svg",xhtml:jf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rl(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Ji.hasOwnProperty(e)?{space:Ji[e],local:t}:t}function D_(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===jf&&e.documentElement.namespaceURI===jf?e.createElement(t):e.createElementNS(n,t)}}function F_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ol(t){var e=rl(t);return(e.local?F_:D_)(e)}function L_(){}function Ys(t){return t==null?L_:function(){return this.querySelector(t)}}function I_(t){typeof t!="function"&&(t=Ys(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=new Array(a),f,s,u=0;u<a;++u)(f=o[u])&&(s=t.call(f,f.__data__,u,o))&&("__data__"in f&&(s.__data__=f.__data__),l[u]=s);return new Ce(i,this._parents)}function R_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function P_(){return[]}function P0(t){return t==null?P_:function(){return this.querySelectorAll(t)}}function O_(t){return function(){return R_(t.apply(this,arguments))}}function U_(t){typeof t=="function"?t=O_(t):t=P0(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&(i.push(t.call(f,f.__data__,s,a)),r.push(f));return new Ce(i,r)}function O0(t){return function(){return this.matches(t)}}function U0(t){return function(e){return e.matches(t)}}var z_=Array.prototype.find;function B_(t){return function(){return z_.call(this.children,t)}}function q_(){return this.firstElementChild}function Y_(t){return this.select(t==null?q_:B_(typeof t=="function"?t:U0(t)))}var W_=Array.prototype.filter;function H_(){return Array.from(this.children)}function V_(t){return function(){return W_.call(this.children,t)}}function G_(t){return this.selectAll(t==null?H_:V_(typeof t=="function"?t:U0(t)))}function j_(t){typeof t!="function"&&(t=O0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new Ce(i,this._parents)}function z0(t){return new Array(t.length)}function X_(){return new Ce(this._enter||this._groups.map(z0),this._parents)}function _a(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}_a.prototype={constructor:_a,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Z_(t){return function(){return t}}function K_(t,e,n,i,r,o){for(var a=0,l,f=e.length,s=o.length;a<s;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):n[a]=new _a(t,o[a]);for(;a<f;++a)(l=e[a])&&(r[a]=l)}function J_(t,e,n,i,r,o,a){var l,f,s=new Map,u=e.length,c=o.length,h=new Array(u),p;for(l=0;l<u;++l)(f=e[l])&&(h[l]=p=a.call(f,f.__data__,l,e)+"",s.has(p)?r[l]=f:s.set(p,f));for(l=0;l<c;++l)p=a.call(t,o[l],l,o)+"",(f=s.get(p))?(i[l]=f,f.__data__=o[l],s.delete(p)):n[l]=new _a(t,o[l]);for(l=0;l<u;++l)(f=e[l])&&s.get(h[l])===f&&(r[l]=f)}function Q_(t){return t.__data__}function ty(t,e){if(!arguments.length)return Array.from(this,Q_);var n=e?J_:K_,i=this._parents,r=this._groups;typeof t!="function"&&(t=Z_(t));for(var o=r.length,a=new Array(o),l=new Array(o),f=new Array(o),s=0;s<o;++s){var u=i[s],c=r[s],h=c.length,p=ey(t.call(u,u&&u.__data__,s,i)),d=p.length,m=l[s]=new Array(d),b=a[s]=new Array(d),_=f[s]=new Array(h);n(u,c,m,b,_,p,e);for(var g=0,v=0,w,k;g<d;++g)if(w=m[g]){for(g>=v&&(v=g+1);!(k=b[v])&&++v<d;);w._next=k||null}}return a=new Ce(a,i),a._enter=l,a._exit=f,a}function ey(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ny(){return new Ce(this._exit||this._groups.map(z0),this._parents)}function iy(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function ry(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),l=new Array(r),f=0;f<a;++f)for(var s=n[f],u=i[f],c=s.length,h=l[f]=new Array(c),p,d=0;d<c;++d)(p=s[d]||u[d])&&(h[d]=p);for(;f<r;++f)l[f]=n[f];return new Ce(l,this._parents)}function oy(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function ay(t){t||(t=ly);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],l=a.length,f=r[o]=new Array(l),s,u=0;u<l;++u)(s=a[u])&&(f[u]=s);f.sort(e)}return new Ce(r,this._parents).order()}function ly(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function fy(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function sy(){return Array.from(this)}function uy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function cy(){let t=0;for(const e of this)++t;return t}function hy(){return!this.node()}function dy(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,l;o<a;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function py(t){return function(){this.removeAttribute(t)}}function my(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gy(t,e){return function(){this.setAttribute(t,e)}}function by(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function _y(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function yy(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function wy(t,e){var n=rl(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?my:py:typeof e=="function"?n.local?yy:_y:n.local?by:gy)(n,e))}function B0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function vy(t){return function(){this.style.removeProperty(t)}}function xy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function ky(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function My(t,e,n){return arguments.length>1?this.each((e==null?vy:typeof e=="function"?ky:xy)(t,e,n??"")):Qi(this.node(),t)}function Qi(t,e){return t.style.getPropertyValue(e)||B0(t).getComputedStyle(t,null).getPropertyValue(e)}function Sy(t){return function(){delete this[t]}}function Ty(t,e){return function(){this[t]=e}}function Cy(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ay(t,e){return arguments.length>1?this.each((e==null?Sy:typeof e=="function"?Cy:Ty)(t,e)):this.node()[t]}function q0(t){return t.trim().split(/^|\s+/)}function Ws(t){return t.classList||new Y0(t)}function Y0(t){this._node=t,this._names=q0(t.getAttribute("class")||"")}Y0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function W0(t,e){for(var n=Ws(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function H0(t,e){for(var n=Ws(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Ey(t){return function(){W0(this,t)}}function $y(t){return function(){H0(this,t)}}function Ny(t,e){return function(){(e.apply(this,arguments)?W0:H0)(this,t)}}function Dy(t,e){var n=q0(t+"");if(arguments.length<2){for(var i=Ws(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Ny:e?Ey:$y)(n,e))}function Fy(){this.textContent=""}function Ly(t){return function(){this.textContent=t}}function Iy(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Ry(t){return arguments.length?this.each(t==null?Fy:(typeof t=="function"?Iy:Ly)(t)):this.node().textContent}function Py(){this.innerHTML=""}function Oy(t){return function(){this.innerHTML=t}}function Uy(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function zy(t){return arguments.length?this.each(t==null?Py:(typeof t=="function"?Uy:Oy)(t)):this.node().innerHTML}function By(){this.nextSibling&&this.parentNode.appendChild(this)}function qy(){return this.each(By)}function Yy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wy(){return this.each(Yy)}function Hy(t){var e=typeof t=="function"?t:ol(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Vy(){return null}function Gy(t,e){var n=typeof t=="function"?t:ol(t),i=e==null?Vy:typeof e=="function"?e:Ys(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function jy(){var t=this.parentNode;t&&t.removeChild(this)}function Xy(){return this.each(jy)}function Zy(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ky(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Jy(t){return this.select(t?Ky:Zy)}function Qy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function tw(t){return function(e){t.call(this,e,this.__data__)}}function ew(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function nw(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function iw(t,e,n){return function(){var i=this.__on,r,o=tw(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function rw(t,e,n){var i=ew(t+""),r,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,s=l.length,u;f<s;++f)for(r=0,u=l[f];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(l=e?iw:nw,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function V0(t,e,n){var i=B0(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ow(t,e){return function(){return V0(this,t,e)}}function aw(t,e){return function(){return V0(this,t,e.apply(this,arguments))}}function lw(t,e){return this.each((typeof e=="function"?aw:ow)(t,e))}function*fw(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var G0=[null];function Ce(t,e){this._groups=t,this._parents=e}function so(){return new Ce([[document.documentElement]],G0)}function sw(){return this}Ce.prototype=so.prototype={constructor:Ce,select:I_,selectAll:U_,selectChild:Y_,selectChildren:G_,filter:j_,data:ty,enter:X_,exit:ny,join:iy,merge:ry,selection:sw,order:oy,sort:ay,call:fy,nodes:sy,node:uy,size:cy,empty:hy,each:dy,attr:wy,style:My,property:Ay,classed:Dy,text:Ry,html:zy,raise:qy,lower:Wy,append:Hy,insert:Gy,remove:Xy,clone:Jy,datum:Qy,on:rw,dispatch:lw,[Symbol.iterator]:fw};function Or(t){return typeof t=="string"?new Ce([[document.querySelector(t)]],[document.documentElement]):new Ce([[t]],G0)}function uw(t){let e;for(;e=t.sourceEvent;)t=e;return t}function cw(t,e){if(t=uw(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function dr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function uo(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function ni(){}var xi=.7,tr=1/xi,Gi="\\s*([+-]?\\d+)\\s*",Vr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hw=/^#([0-9a-f]{3,8})$/,dw=new RegExp(`^rgb\\(${Gi},${Gi},${Gi}\\)$`),pw=new RegExp(`^rgb\\(${un},${un},${un}\\)$`),mw=new RegExp(`^rgba\\(${Gi},${Gi},${Gi},${Vr}\\)$`),gw=new RegExp(`^rgba\\(${un},${un},${un},${Vr}\\)$`),bw=new RegExp(`^hsl\\(${Vr},${un},${un}\\)$`),_w=new RegExp(`^hsla\\(${Vr},${un},${un},${Vr}\\)$`),ic={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dr(ni,ki,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:rc,formatHex:rc,formatHex8:yw,formatHsl:ww,formatRgb:oc,toString:oc});function rc(){return this.rgb().formatHex()}function yw(){return this.rgb().formatHex8()}function ww(){return j0(this).formatHsl()}function oc(){return this.rgb().formatRgb()}function ki(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hw.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ac(e):n===3?new te(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Oo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Oo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=dw.exec(t))?new te(e[1],e[2],e[3],1):(e=pw.exec(t))?new te(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=mw.exec(t))?Oo(e[1],e[2],e[3],e[4]):(e=gw.exec(t))?Oo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=bw.exec(t))?sc(e[1],e[2]/100,e[3]/100,1):(e=_w.exec(t))?sc(e[1],e[2]/100,e[3]/100,e[4]):ic.hasOwnProperty(t)?ac(ic[t]):t==="transparent"?new te(NaN,NaN,NaN,0):null}function ac(t){return new te(t>>16&255,t>>8&255,t&255,1)}function Oo(t,e,n,i){return i<=0&&(t=e=n=NaN),new te(t,e,n,i)}function Hs(t){return t instanceof ni||(t=ki(t)),t?(t=t.rgb(),new te(t.r,t.g,t.b,t.opacity)):new te}function Qn(t,e,n,i){return arguments.length===1?Hs(t):new te(t,e,n,i??1)}function te(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}dr(te,Qn,uo(ni,{brighter(t){return t=t==null?tr:Math.pow(tr,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?xi:Math.pow(xi,t),new te(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new te(pi(this.r),pi(this.g),pi(this.b),ya(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lc,formatHex:lc,formatHex8:vw,formatRgb:fc,toString:fc}));function lc(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}`}function vw(){return`#${hi(this.r)}${hi(this.g)}${hi(this.b)}${hi((isNaN(this.opacity)?1:this.opacity)*255)}`}function fc(){const t=ya(this.opacity);return`${t===1?"rgb(":"rgba("}${pi(this.r)}, ${pi(this.g)}, ${pi(this.b)}${t===1?")":`, ${t})`}`}function ya(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function pi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hi(t){return t=pi(t),(t<16?"0":"")+t.toString(16)}function sc(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ge(t,e,n,i)}function j0(t){if(t instanceof Ge)return new Ge(t.h,t.s,t.l,t.opacity);if(t instanceof ni||(t=ki(t)),!t)return new Ge;if(t instanceof Ge)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,l=o-r,f=(o+r)/2;return l?(e===o?a=(n-i)/l+(n<i)*6:n===o?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?o+r:2-o-r,a*=60):l=f>0&&f<1?0:a,new Ge(a,l,f,t.opacity)}function Xf(t,e,n,i){return arguments.length===1?j0(t):new Ge(t,e,n,i??1)}function Ge(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}dr(Ge,Xf,uo(ni,{brighter(t){return t=t==null?tr:Math.pow(tr,t),new Ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xi:Math.pow(xi,t),new Ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new te(Jl(t>=240?t-240:t+120,r,i),Jl(t,r,i),Jl(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Ge(uc(this.h),Uo(this.s),Uo(this.l),ya(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ya(this.opacity);return`${t===1?"hsl(":"hsla("}${uc(this.h)}, ${Uo(this.s)*100}%, ${Uo(this.l)*100}%${t===1?")":`, ${t})`}`}}));function uc(t){return t=(t||0)%360,t<0?t+360:t}function Uo(t){return Math.max(0,Math.min(1,t||0))}function Jl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const X0=Math.PI/180,Z0=180/Math.PI,wa=18,K0=.96422,J0=1,Q0=.82521,t1=4/29,ji=6/29,e1=3*ji*ji,xw=ji*ji*ji;function n1(t){if(t instanceof cn)return new cn(t.l,t.a,t.b,t.opacity);if(t instanceof Mn)return i1(t);t instanceof te||(t=Hs(t));var e=nf(t.r),n=nf(t.g),i=nf(t.b),r=Ql((.2225045*e+.7168786*n+.0606169*i)/J0),o,a;return e===n&&n===i?o=a=r:(o=Ql((.4360747*e+.3850649*n+.1430804*i)/K0),a=Ql((.0139322*e+.0971045*n+.7141733*i)/Q0)),new cn(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Zf(t,e,n,i){return arguments.length===1?n1(t):new cn(t,e,n,i??1)}function cn(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}dr(cn,Zf,uo(ni,{brighter(t){return new cn(this.l+wa*(t??1),this.a,this.b,this.opacity)},darker(t){return new cn(this.l-wa*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=K0*tf(e),t=J0*tf(t),n=Q0*tf(n),new te(ef(3.1338561*e-1.6168667*t-.4906146*n),ef(-.9787684*e+1.9161415*t+.033454*n),ef(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Ql(t){return t>xw?Math.pow(t,1/3):t/e1+t1}function tf(t){return t>ji?t*t*t:e1*(t-t1)}function ef(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function nf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function kw(t){if(t instanceof Mn)return new Mn(t.h,t.c,t.l,t.opacity);if(t instanceof cn||(t=n1(t)),t.a===0&&t.b===0)return new Mn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Z0;return new Mn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Kf(t,e,n,i){return arguments.length===1?kw(t):new Mn(t,e,n,i??1)}function Mn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function i1(t){if(isNaN(t.h))return new cn(t.l,0,0,t.opacity);var e=t.h*X0;return new cn(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}dr(Mn,Kf,uo(ni,{brighter(t){return new Mn(this.h,this.c,this.l+wa*(t??1),this.opacity)},darker(t){return new Mn(this.h,this.c,this.l-wa*(t??1),this.opacity)},rgb(){return i1(this).rgb()}}));var r1=-.14861,Vs=1.78277,Gs=-.29227,al=-.90649,Gr=1.97294,cc=Gr*al,hc=Gr*Vs,dc=Vs*Gs-al*r1;function Mw(t){if(t instanceof mi)return new mi(t.h,t.s,t.l,t.opacity);t instanceof te||(t=Hs(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(dc*i+cc*e-hc*n)/(dc+cc-hc),o=i-r,a=(Gr*(n-r)-Gs*o)/al,l=Math.sqrt(a*a+o*o)/(Gr*r*(1-r)),f=l?Math.atan2(a,o)*Z0-120:NaN;return new mi(f<0?f+360:f,l,r,t.opacity)}function dn(t,e,n,i){return arguments.length===1?Mw(t):new mi(t,e,n,i??1)}function mi(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}dr(mi,dn,uo(ni,{brighter(t){return t=t==null?tr:Math.pow(tr,t),new mi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?xi:Math.pow(xi,t),new mi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*X0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new te(255*(e+n*(r1*i+Vs*r)),255*(e+n*(Gs*i+al*r)),255*(e+n*(Gr*i)),this.opacity)}}));function Sw(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function Tw(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return Sw((n-i/e)*e,a,r,o,l)}}const ll=t=>()=>t;function o1(t,e){return function(n){return t+n*e}}function Cw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function js(t,e){var n=e-t;return n?o1(t,n>180||n<-180?n-360*Math.round(n/360):n):ll(isNaN(t)?e:t)}function Aw(t){return(t=+t)==1?le:function(e,n){return n-e?Cw(e,n,t):ll(isNaN(e)?n:e)}}function le(t,e){var n=e-t;return n?o1(t,n):ll(isNaN(t)?e:t)}const Mi=function t(e){var n=Aw(e);function i(r,o){var a=n((r=Qn(r)).r,(o=Qn(o)).r),l=n(r.g,o.g),f=n(r.b,o.b),s=le(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=l(u),r.b=f(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function Ew(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=Qn(e[a]),i[a]=l.r||0,r[a]=l.g||0,o[a]=l.b||0;return i=t(i),r=t(r),o=t(o),l.opacity=1,function(f){return l.r=i(f),l.g=r(f),l.b=o(f),l+""}}}var $w=Ew(Tw);function Nw(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function Dw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Fw(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=co(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=r[a](l);return o}}function Lw(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ae(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Iw(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=co(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Jf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rf=new RegExp(Jf.source,"g");function Rw(t){return function(){return t}}function Pw(t){return function(e){return t(e)+""}}function a1(t,e){var n=Jf.lastIndex=rf.lastIndex=0,i,r,o,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=Jf.exec(t))&&(r=rf.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:ae(i,r)})),n=rf.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?f[0]?Pw(f[0].x):Rw(e):(e=f.length,function(s){for(var u=0,c;u<e;++u)l[(c=f[u]).i]=c.x(s);return l.join("")})}function co(t,e){var n=typeof e,i;return e==null||n==="boolean"?ll(e):(n==="number"?ae:n==="string"?(i=ki(e))?(e=i,Mi):a1:e instanceof ki?Mi:e instanceof Date?Lw:Dw(e)?Nw:Array.isArray(e)?Fw:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Iw:ae)(t,e)}function Xs(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var pc=180/Math.PI,Qf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function l1(t,e,n,i,r,o){var a,l,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),t*i<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*pc,skewX:Math.atan(f)*pc,scaleX:a,scaleY:l}}var zo;function Ow(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Qf:l1(e.a,e.b,e.c,e.d,e.e,e.f)}function Uw(t){return t==null||(zo||(zo=document.createElementNS("http://www.w3.org/2000/svg","g")),zo.setAttribute("transform",t),!(t=zo.transform.baseVal.consolidate()))?Qf:(t=t.matrix,l1(t.a,t.b,t.c,t.d,t.e,t.f))}function f1(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push("translate(",null,e,null,n);d.push({i:m-4,x:ae(s,c)},{i:m-2,x:ae(u,h)})}else(c||h)&&p.push("translate("+c+e+h+n)}function a(s,u,c,h){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),h.push({i:c.push(r(c)+"rotate(",null,i)-2,x:ae(s,u)})):u&&c.push(r(c)+"rotate("+u+i)}function l(s,u,c,h){s!==u?h.push({i:c.push(r(c)+"skewX(",null,i)-2,x:ae(s,u)}):u&&c.push(r(c)+"skewX("+u+i)}function f(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push(r(p)+"scale(",null,",",null,")");d.push({i:m-4,x:ae(s,c)},{i:m-2,x:ae(u,h)})}else(c!==1||h!==1)&&p.push(r(p)+"scale("+c+","+h+")")}return function(s,u){var c=[],h=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,c,h),a(s.rotate,u.rotate,c,h),l(s.skewX,u.skewX,c,h),f(s.scaleX,s.scaleY,u.scaleX,u.scaleY,c,h),s=u=null,function(p){for(var d=-1,m=h.length,b;++d<m;)c[(b=h[d]).i]=b.x(p);return c.join("")}}}var zw=f1(Ow,"px, ","px)","deg)"),Bw=f1(Uw,", ",")",")");function qw(t){return function(e,n){var i=t((e=Xf(e)).h,(n=Xf(n)).h),r=le(e.s,n.s),o=le(e.l,n.l),a=le(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Yw=qw(js);function Ww(t,e){var n=le((t=Zf(t)).l,(e=Zf(e)).l),i=le(t.a,e.a),r=le(t.b,e.b),o=le(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function Hw(t){return function(e,n){var i=t((e=Kf(e)).h,(n=Kf(n)).h),r=le(e.c,n.c),o=le(e.l,n.l),a=le(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Vw=Hw(js);function s1(t){return function e(n){n=+n;function i(r,o){var a=t((r=dn(r)).h,(o=dn(o)).h),l=le(r.s,o.s),f=le(r.l,o.l),s=le(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=l(u),r.l=f(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}s1(js);var Zs=s1(le);function fl(t,e){e===void 0&&(e=t,t=co);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[l](a-l)}}function Ze(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var er=0,Ar=0,vr=0,u1=1e3,va,Er,xa=0,Si=0,sl=0,jr=typeof performance=="object"&&performance.now?performance:Date,c1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ks(){return Si||(c1(Gw),Si=jr.now()+sl)}function Gw(){Si=0}function ka(){this._call=this._time=this._next=null}ka.prototype=h1.prototype={constructor:ka,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ks():+n)+(e==null?0:+e),!this._next&&Er!==this&&(Er?Er._next=this:va=this,Er=this),this._call=t,this._time=n,ts()},stop:function(){this._call&&(this._call=null,this._time=1/0,ts())}};function h1(t,e,n){var i=new ka;return i.restart(t,e,n),i}function jw(){Ks(),++er;for(var t=va,e;t;)(e=Si-t._time)>=0&&t._call.call(void 0,e),t=t._next;--er}function mc(){Si=(xa=jr.now())+sl,er=Ar=0;try{jw()}finally{er=0,Zw(),Si=0}}function Xw(){var t=jr.now(),e=t-xa;e>u1&&(sl-=e,xa=t)}function Zw(){for(var t,e=va,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:va=n);Er=t,ts(i)}function ts(t){if(!er){Ar&&(Ar=clearTimeout(Ar));var e=t-Si;e>24?(t<1/0&&(Ar=setTimeout(mc,t-jr.now()-sl)),vr&&(vr=clearInterval(vr))):(vr||(xa=jr.now(),vr=setInterval(Xw,u1)),er=1,c1(mc))}}function gc(t,e,n){var i=new ka;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Kw=R0("start","end","cancel","interrupt"),Jw=[],d1=0,bc=1,es=2,la=3,_c=4,ns=5,fa=6;function ul(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;Qw(t,n,{name:e,index:i,group:r,on:Kw,tween:Jw,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:d1})}function Js(t,e){var n=tn(t,e);if(n.state>d1)throw new Error("too late; already scheduled");return n}function mn(t,e){var n=tn(t,e);if(n.state>la)throw new Error("too late; already running");return n}function tn(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Qw(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=h1(o,0,n.time);function o(s){n.state=bc,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,c,h,p;if(n.state!==bc)return f();for(u in i)if(p=i[u],p.name===n.name){if(p.state===la)return gc(a);p.state===_c?(p.state=fa,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[u]):+u<e&&(p.state=fa,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[u])}if(gc(function(){n.state===la&&(n.state=_c,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=es,n.on.call("start",t,t.__data__,n.index,n.group),n.state===es){for(n.state=la,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=p);r.length=c+1}}function l(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(f),n.state=ns,1),c=-1,h=r.length;++c<h;)r[c].call(t,u);n.state===ns&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=fa,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function tv(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>es&&i.state<ns,i.state=fa,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function ev(t){return this.each(function(){tv(this,t)})}function nv(t,e){var n,i;return function(){var r=mn(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function iv(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=mn(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},f=0,s=r.length;f<s;++f)if(r[f].name===e){r[f]=l;break}f===s&&r.push(l)}o.tween=r}}function rv(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=tn(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?nv:iv)(n,t,e))}function Qs(t,e,n){var i=t._id;return t.each(function(){var r=mn(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return tn(r,i).value[e]}}function p1(t,e){var n;return(typeof e=="number"?ae:e instanceof ki?Mi:(n=ki(e))?(e=n,Mi):a1)(t,e)}function ov(t){return function(){this.removeAttribute(t)}}function av(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lv(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function fv(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function sv(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function uv(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function cv(t,e){var n=rl(t),i=n==="transform"?Bw:p1;return this.attrTween(t,typeof e=="function"?(n.local?uv:sv)(n,i,Qs(this,"attr."+t,e)):e==null?(n.local?av:ov)(n):(n.local?fv:lv)(n,i,e))}function hv(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function dv(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function pv(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&dv(t,o)),n}return r._value=e,r}function mv(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&hv(t,o)),n}return r._value=e,r}function gv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=rl(t);return this.tween(n,(i.local?pv:mv)(i,e))}function bv(t,e){return function(){Js(this,t).delay=+e.apply(this,arguments)}}function _v(t,e){return e=+e,function(){Js(this,t).delay=e}}function yv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?bv:_v)(e,t)):tn(this.node(),e).delay}function wv(t,e){return function(){mn(this,t).duration=+e.apply(this,arguments)}}function vv(t,e){return e=+e,function(){mn(this,t).duration=e}}function xv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?wv:vv)(e,t)):tn(this.node(),e).duration}function kv(t,e){if(typeof e!="function")throw new Error;return function(){mn(this,t).ease=e}}function Mv(t){var e=this._id;return arguments.length?this.each(kv(e,t)):tn(this.node(),e).ease}function Sv(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;mn(this,t).ease=n}}function Tv(t){if(typeof t!="function")throw new Error;return this.each(Sv(this._id,t))}function Cv(t){typeof t!="function"&&(t=O0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new En(i,this._parents,this._name,this._id)}function Av(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var f=e[l],s=n[l],u=f.length,c=a[l]=new Array(u),h,p=0;p<u;++p)(h=f[p]||s[p])&&(c[p]=h);for(;l<i;++l)a[l]=e[l];return new En(a,this._parents,this._name,this._id)}function Ev(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function $v(t,e,n){var i,r,o=Ev(e)?Js:mn;return function(){var a=o(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function Nv(t,e){var n=this._id;return arguments.length<2?tn(this.node(),n).on.on(t):this.each($v(n,t,e))}function Dv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Fv(){return this.on("end.remove",Dv(this._id))}function Lv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ys(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var l=i[a],f=l.length,s=o[a]=new Array(f),u,c,h=0;h<f;++h)(u=l[h])&&(c=t.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c,ul(s[h],e,n,h,s,tn(u,n)));return new En(o,this._parents,e,n)}function Iv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=P0(t));for(var i=this._groups,r=i.length,o=[],a=[],l=0;l<r;++l)for(var f=i[l],s=f.length,u,c=0;c<s;++c)if(u=f[c]){for(var h=t.call(u,u.__data__,c,f),p,d=tn(u,n),m=0,b=h.length;m<b;++m)(p=h[m])&&ul(p,e,n,m,h,d);o.push(h),a.push(u)}return new En(o,a,e,n)}var Rv=so.prototype.constructor;function Pv(){return new Rv(this._groups,this._parents)}function Ov(t,e){var n,i,r;return function(){var o=Qi(this,t),a=(this.style.removeProperty(t),Qi(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function m1(t){return function(){this.style.removeProperty(t)}}function Uv(t,e,n){var i,r=n+"",o;return function(){var a=Qi(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function zv(t,e,n){var i,r,o;return function(){var a=Qi(this,t),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(t),Qi(this,t))),a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l))}}function Bv(t,e){var n,i,r,o="style."+e,a="end."+o,l;return function(){var f=mn(this,t),s=f.on,u=f.value[o]==null?l||(l=m1(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),f.on=i}}function qv(t,e,n){var i=(t+="")=="transform"?zw:p1;return e==null?this.styleTween(t,Ov(t,i)).on("end.style."+t,m1(t)):typeof e=="function"?this.styleTween(t,zv(t,i,Qs(this,"style."+t,e))).each(Bv(this._id,t)):this.styleTween(t,Uv(t,i,e),n).on("end.style."+t,null)}function Yv(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Wv(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Yv(t,a,n)),i}return o._value=e,o}function Hv(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Wv(t,e,n??""))}function Vv(t){return function(){this.textContent=t}}function Gv(t){return function(){var e=t(this);this.textContent=e??""}}function jv(t){return this.tween("text",typeof t=="function"?Gv(Qs(this,"text",t)):Vv(t==null?"":t+""))}function Xv(t){return function(e){this.textContent=t.call(this,e)}}function Zv(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Xv(r)),e}return i._value=t,i}function Kv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Zv(t))}function Jv(){for(var t=this._name,e=this._id,n=g1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)if(f=a[s]){var u=tn(f,e);ul(f,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new En(i,this._parents,t,n)}function Qv(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var l={value:a},f={value:function(){--r===0&&o()}};n.each(function(){var s=mn(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),s.on=e}),r===0&&o()})}var t3=0;function En(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function g1(){return++t3}var bn=so.prototype;En.prototype={constructor:En,select:Lv,selectAll:Iv,selectChild:bn.selectChild,selectChildren:bn.selectChildren,filter:Cv,merge:Av,selection:Pv,transition:Jv,call:bn.call,nodes:bn.nodes,node:bn.node,size:bn.size,empty:bn.empty,each:bn.each,on:Nv,attr:cv,attrTween:gv,style:qv,styleTween:Hv,text:jv,textTween:Kv,remove:Fv,tween:rv,delay:yv,duration:xv,ease:Mv,easeVarying:Tv,end:Qv,[Symbol.iterator]:bn[Symbol.iterator]};function e3(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var n3={time:null,delay:0,duration:250,ease:e3};function i3(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function r3(t){var e,n;t instanceof En?(e=t._id,t=t._name):(e=g1(),(n=n3).time=Ks(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&ul(f,t,e,s,a,n||i3(f,e));return new En(i,this._parents,t,e)}so.prototype.interrupt=ev;so.prototype.transition=r3;const is=Math.PI,rs=2*is,si=1e-6,o3=rs-si;function b1(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function a3(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return b1;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class _1{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?b1:a3(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,f=i-e,s=r-n,u=a-e,c=l-n,h=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>si)if(!(Math.abs(c*f-s*u)>si)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,d=r-l,m=f*f+s*s,b=p*p+d*d,_=Math.sqrt(m),g=Math.sqrt(h),v=o*Math.tan((is-Math.acos((m+h-b)/(2*_*g)))/2),w=v/g,k=v/_;Math.abs(w-1)>si&&this._append`L${e+w*u},${n+w*c}`,this._append`A${o},${o},0,0,${+(c*p>u*d)},${this._x1=e+k*f},${this._y1=n+k*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),f=i*Math.sin(r),s=e+l,u=n+f,c=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>si||Math.abs(this._y1-u)>si)&&this._append`L${s},${u}`,i&&(h<0&&(h=h%rs+rs),h>o3?this._append`A${i},${i},0,1,${c},${e-l},${n-f}A${i},${i},0,1,${c},${this._x1=s},${this._y1=u}`:h>si&&this._append`A${i},${i},0,${+(h>=is)},${c},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function Yn(t=3){return new _1(+t)}var yc={},of={},af=34,xr=10,lf=13;function y1(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function l3(t,e){var n=y1(t);return function(i,r){return e(n(i),r,t)}}function wc(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function ge(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function f3(t){return t<0?"-"+ge(-t,6):t>9999?"+"+ge(t,6):ge(t,4)}function s3(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":f3(t.getUTCFullYear())+"-"+ge(t.getUTCMonth()+1,2)+"-"+ge(t.getUTCDate(),2)+(r?"T"+ge(e,2)+":"+ge(n,2)+":"+ge(i,2)+"."+ge(r,3)+"Z":i?"T"+ge(e,2)+":"+ge(n,2)+":"+ge(i,2)+"Z":n||e?"T"+ge(e,2)+":"+ge(n,2)+"Z":"")}function u3(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(c,h){var p,d,m=r(c,function(b,_){if(p)return p(b,_-1);d=b,p=h?l3(b,h):y1(b)});return m.columns=d||[],m}function r(c,h){var p=[],d=c.length,m=0,b=0,_,g=d<=0,v=!1;c.charCodeAt(d-1)===xr&&--d,c.charCodeAt(d-1)===lf&&--d;function w(){if(g)return of;if(v)return v=!1,yc;var x,S=m,T;if(c.charCodeAt(S)===af){for(;m++<d&&c.charCodeAt(m)!==af||c.charCodeAt(++m)===af;);return(x=m)>=d?g=!0:(T=c.charCodeAt(m++))===xr?v=!0:T===lf&&(v=!0,c.charCodeAt(m)===xr&&++m),c.slice(S+1,x-1).replace(/""/g,'"')}for(;m<d;){if((T=c.charCodeAt(x=m++))===xr)v=!0;else if(T===lf)v=!0,c.charCodeAt(m)===xr&&++m;else if(T!==n)continue;return c.slice(S,x)}return g=!0,c.slice(S,d)}for(;(_=w())!==of;){for(var k=[];_!==yc&&_!==of;)k.push(_),_=w();h&&(k=h(k,b++))==null||p.push(k)}return p}function o(c,h){return c.map(function(p){return h.map(function(d){return u(p[d])}).join(t)})}function a(c,h){return h==null&&(h=wc(c)),[h.map(u).join(t)].concat(o(c,h)).join(`
`)}function l(c,h){return h==null&&(h=wc(c)),o(c,h).join(`
`)}function f(c){return c.map(s).join(`
`)}function s(c){return c.map(u).join(t)}function u(c){return c==null?"":c instanceof Date?s3(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:r,format:a,formatBody:l,formatRows:f,formatRow:s,formatValue:u}}var c3=u3(","),h3=c3.parse;function d3(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ma(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function nr(t){return t=Ma(Math.abs(t)),t?t[1]:NaN}function p3(t,e){return function(n,i){for(var r=n.length,o=[],a=0,l=t[0],f=0;r>0&&l>0&&(f+l+1>i&&(l=Math.max(1,i-f)),o.push(n.substring(r-=l,r+l)),!((f+=l+1)>i));)l=t[a=(a+1)%t.length];return o.reverse().join(e)}}function m3(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var g3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Xr(t){if(!(e=g3.exec(t)))throw new Error("invalid format: "+t);var e;return new tu({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Xr.prototype=tu.prototype;function tu(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}tu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function b3(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var w1;function _3(t,e){var n=Ma(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(w1=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Ma(t,Math.max(0,e+o-1))[0]}function vc(t,e){var n=Ma(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const xc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:d3,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>vc(t*100,e),r:vc,s:_3,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function kc(t){return t}var Mc=Array.prototype.map,Sc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function y3(t){var e=t.grouping===void 0||t.thousands===void 0?kc:p3(Mc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?kc:m3(Mc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function s(c){c=Xr(c);var h=c.fill,p=c.align,d=c.sign,m=c.symbol,b=c.zero,_=c.width,g=c.comma,v=c.precision,w=c.trim,k=c.type;k==="n"?(g=!0,k="g"):xc[k]||(v===void 0&&(v=12),w=!0,k="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",S=m==="$"?i:/[%p]/.test(k)?a:"",T=xc[k],E=/[defgprs%]/.test(k);v=v===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function F(C){var L=x,R=S,G,A,B;if(k==="c")R=T(C)+R,C="";else{C=+C;var z=C<0||1/C<0;if(C=isNaN(C)?f:T(Math.abs(C),v),w&&(C=b3(C)),z&&+C==0&&d!=="+"&&(z=!1),L=(z?d==="("?d:l:d==="-"||d==="("?"":d)+L,R=(k==="s"?Sc[8+w1/3]:"")+R+(z&&d==="("?")":""),E){for(G=-1,A=C.length;++G<A;)if(B=C.charCodeAt(G),48>B||B>57){R=(B===46?r+C.slice(G+1):C.slice(G))+R,C=C.slice(0,G);break}}}g&&!b&&(C=e(C,1/0));var J=L.length+C.length+R.length,Z=J<_?new Array(_-J+1).join(h):"";switch(g&&b&&(C=e(Z+C,Z.length?_-R.length:1/0),Z=""),p){case"<":C=L+C+R+Z;break;case"=":C=L+Z+C+R;break;case"^":C=Z.slice(0,J=Z.length>>1)+L+C+R+Z.slice(J);break;default:C=Z+L+C+R;break}return o(C)}return F.toString=function(){return c+""},F}function u(c,h){var p=s((c=Xr(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(nr(h)/3)))*3,m=Math.pow(10,-d),b=Sc[8+d/3];return function(_){return p(m*_)+b}}return{format:s,formatPrefix:u}}var Bo,pr,v1;w3({thousands:",",grouping:[3],currency:["$",""]});function w3(t){return Bo=y3(t),pr=Bo.format,v1=Bo.formatPrefix,Bo}function v3(t){return Math.max(0,-nr(Math.abs(t)))}function x3(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nr(e)/3)))*3-nr(Math.abs(t)))}function k3(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,nr(e)-nr(t))+1}var xt=1e-6,x1=1e-12,St=Math.PI,Yt=St/2,Tc=St/4,Ae=St*2,se=180/St,qt=St/180,At=Math.abs,mr=Math.atan,$n=Math.atan2,Mt=Math.cos,k1=Math.exp,Sa=Math.log,ff=Math.pow,vt=Math.sin,Pe=Math.sign||function(t){return t>0?1:t<0?-1:0},Me=Math.sqrt,eu=Math.tan;function M1(t){return t>1?0:t<-1?St:Math.acos(t)}function Be(t){return t>1?Yt:t<-1?-Yt:Math.asin(t)}function Oe(){}function Ta(t,e){t&&Ac.hasOwnProperty(t.type)&&Ac[t.type](t,e)}var Cc={Feature:function(t,e){Ta(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)Ta(n[i].geometry,e)}},Ac={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){os(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)os(n[i],e,0)},Polygon:function(t,e){Ec(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ec(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)Ta(n[i],e)}};function os(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function Ec(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)os(t[n],e,1);e.polygonEnd()}function ui(t,e){t&&Cc.hasOwnProperty(t.type)?Cc[t.type](t,e):Ta(t,e)}function as(t){return[$n(t[1],t[0]),Be(t[2])]}function ir(t){var e=t[0],n=t[1],i=Mt(n);return[i*Mt(e),i*vt(e),vt(n)]}function qo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ca(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function sf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Yo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ls(t){var e=Me(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function fs(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function ss(t,e){return At(t)>St&&(t-=Math.round(t/Ae)*Ae),[t,e]}ss.invert=ss;function S1(t,e,n){return(t%=Ae)?e||n?fs(Nc(t),Dc(e,n)):Nc(t):e||n?Dc(e,n):ss}function $c(t){return function(e,n){return e+=t,At(e)>St&&(e-=Math.round(e/Ae)*Ae),[e,n]}}function Nc(t){var e=$c(t);return e.invert=$c(-t),e}function Dc(t,e){var n=Mt(t),i=vt(t),r=Mt(e),o=vt(e);function a(l,f){var s=Mt(f),u=Mt(l)*s,c=vt(l)*s,h=vt(f),p=h*n+u*i;return[$n(c*r-p*o,u*n-h*i),Be(p*r+c*o)]}return a.invert=function(l,f){var s=Mt(f),u=Mt(l)*s,c=vt(l)*s,h=vt(f),p=h*r-c*o;return[$n(c*r+h*o,u*n+p*i),Be(p*n-u*i)]},a}function M3(t){t=S1(t[0]*qt,t[1]*qt,t.length>2?t[2]*qt:0);function e(n){return n=t(n[0]*qt,n[1]*qt),n[0]*=se,n[1]*=se,n}return e.invert=function(n){return n=t.invert(n[0]*qt,n[1]*qt),n[0]*=se,n[1]*=se,n},e}function S3(t,e,n,i,r,o){if(n){var a=Mt(e),l=vt(e),f=i*n;r==null?(r=e+i*Ae,o=e-f/2):(r=Fc(a,r),o=Fc(a,o),(i>0?r<o:r>o)&&(r+=i*Ae));for(var s,u=r;i>0?u>o:u<o;u-=f)s=as([a,-l*Mt(u),-l*vt(u)]),t.point(s[0],s[1])}}function Fc(t,e){e=ir(e),e[0]-=t,ls(e);var n=M1(-e[1]);return((-e[2]<0?-n:n)+Ae-xt)%Ae}function T1(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Oe,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function sa(t,e){return At(t[0]-e[0])<xt&&At(t[1]-e[1])<xt}function Wo(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function C1(t,e,n,i,r){var o=[],a=[],l,f;if(t.forEach(function(d){if(!((m=d.length-1)<=0)){var m,b=d[0],_=d[m],g;if(sa(b,_)){if(!b[2]&&!_[2]){for(r.lineStart(),l=0;l<m;++l)r.point((b=d[l])[0],b[1]);r.lineEnd();return}_[0]+=2*xt}o.push(g=new Wo(b,d,null,!0)),a.push(g.o=new Wo(b,null,g,!1)),o.push(g=new Wo(_,d,null,!1)),a.push(g.o=new Wo(_,null,g,!0))}}),!!o.length){for(a.sort(e),Lc(o),Lc(a),l=0,f=a.length;l<f;++l)a[l].e=n=!n;for(var s=o[0],u,c;;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(l=0,f=u.length;l<f;++l)r.point((c=u[l])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(p)for(u=h.p.z,l=u.length-1;l>=0;--l)r.point((c=u[l])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);r.lineEnd()}}}function Lc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function uf(t){return At(t[0])<=St?t[0]:Pe(t[0])*((At(t[0])+St)%Ae-St)}function T3(t,e){var n=uf(e),i=e[1],r=vt(i),o=[vt(n),-Mt(n),0],a=0,l=0,f=new wi;r===1?i=Yt+xt:r===-1&&(i=-Yt-xt);for(var s=0,u=t.length;s<u;++s)if(h=(c=t[s]).length)for(var c,h,p=c[h-1],d=uf(p),m=p[1]/2+Tc,b=vt(m),_=Mt(m),g=0;g<h;++g,d=w,b=x,_=S,p=v){var v=c[g],w=uf(v),k=v[1]/2+Tc,x=vt(k),S=Mt(k),T=w-d,E=T>=0?1:-1,F=E*T,C=F>St,L=b*x;if(f.add($n(L*E*vt(F),_*S+L*Mt(F))),a+=C?T+E*Ae:T,C^d>=n^w>=n){var R=Ca(ir(p),ir(v));ls(R);var G=Ca(o,R);ls(G);var A=(C^T>=0?-1:1)*Be(G[2]);(i>A||i===A&&(R[0]||R[1]))&&(l+=C^T>=0?1:-1)}}return(a<-xt||a<xt&&f<-x1)^l&1}function A1(t,e,n,i){return function(r){var o=e(r),a=T1(),l=e(a),f=!1,s,u,c,h={point:p,lineStart:m,lineEnd:b,polygonStart:function(){h.point=_,h.lineStart=g,h.lineEnd=v,u=[],s=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=b,u=I0(u);var w=T3(s,i);u.length?(f||(r.polygonStart(),f=!0),C1(u,A3,w,n,r)):w&&(f||(r.polygonStart(),f=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(w,k){t(w,k)&&r.point(w,k)}function d(w,k){o.point(w,k)}function m(){h.point=d,o.lineStart()}function b(){h.point=p,o.lineEnd()}function _(w,k){c.push([w,k]),l.point(w,k)}function g(){l.lineStart(),c=[]}function v(){_(c[0][0],c[0][1]),l.lineEnd();var w=l.clean(),k=a.result(),x,S=k.length,T,E,F;if(c.pop(),s.push(c),c=null,!!S){if(w&1){if(E=k[0],(T=E.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),x=0;x<T;++x)r.point((F=E[x])[0],F[1]);r.lineEnd()}return}S>1&&w&2&&k.push(k.pop().concat(k.shift())),u.push(k.filter(C3))}}return h}}function C3(t){return t.length>1}function A3(t,e){return((t=t.x)[0]<0?t[1]-Yt-xt:Yt-t[1])-((e=e.x)[0]<0?e[1]-Yt-xt:Yt-e[1])}const Ic=A1(function(){return!0},E3,N3,[-St,-Yt]);function E3(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var l=o>0?St:-St,f=At(o-e);At(f-St)<xt?(t.point(e,n=(n+a)/2>0?Yt:-Yt),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),r=0):i!==l&&f>=St&&(At(e-i)<xt&&(e-=i*xt),At(o-l)<xt&&(o-=l*xt),n=$3(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),r=0),t.point(e=o,n=a),i=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function $3(t,e,n,i){var r,o,a=vt(t-n);return At(a)>xt?mr((vt(e)*(o=Mt(i))*vt(n)-vt(i)*(r=Mt(e))*vt(t))/(r*o*a)):(e+i)/2}function N3(t,e,n,i){var r;if(t==null)r=n*Yt,i.point(-St,r),i.point(0,r),i.point(St,r),i.point(St,0),i.point(St,-r),i.point(0,-r),i.point(-St,-r),i.point(-St,0),i.point(-St,r);else if(At(t[0]-e[0])>xt){var o=t[0]<e[0]?St:-St;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function D3(t){var e=Mt(t),n=6*qt,i=e>0,r=At(e)>xt;function o(u,c,h,p){S3(p,t,n,h,u,c)}function a(u,c){return Mt(u)*Mt(c)>e}function l(u){var c,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(b,_){var g=[b,_],v,w=a(b,_),k=i?w?0:s(b,_):w?s(b+(b<0?St:-St),_):0;if(!c&&(d=p=w)&&u.lineStart(),w!==p&&(v=f(c,g),(!v||sa(c,v)||sa(g,v))&&(g[2]=1)),w!==p)m=0,w?(u.lineStart(),v=f(g,c),u.point(v[0],v[1])):(v=f(c,g),u.point(v[0],v[1],2),u.lineEnd()),c=v;else if(r&&c&&i^w){var x;!(k&h)&&(x=f(g,c,!0))&&(m=0,i?(u.lineStart(),u.point(x[0][0],x[0][1]),u.point(x[1][0],x[1][1]),u.lineEnd()):(u.point(x[1][0],x[1][1]),u.lineEnd(),u.lineStart(),u.point(x[0][0],x[0][1],3)))}w&&(!c||!sa(c,g))&&u.point(g[0],g[1]),c=g,p=w,h=k},lineEnd:function(){p&&u.lineEnd(),c=null},clean:function(){return m|(d&&p)<<1}}}function f(u,c,h){var p=ir(u),d=ir(c),m=[1,0,0],b=Ca(p,d),_=qo(b,b),g=b[0],v=_-g*g;if(!v)return!h&&u;var w=e*_/v,k=-e*g/v,x=Ca(m,b),S=Yo(m,w),T=Yo(b,k);sf(S,T);var E=x,F=qo(S,E),C=qo(E,E),L=F*F-C*(qo(S,S)-1);if(!(L<0)){var R=Me(L),G=Yo(E,(-F-R)/C);if(sf(G,S),G=as(G),!h)return G;var A=u[0],B=c[0],z=u[1],J=c[1],Z;B<A&&(Z=A,A=B,B=Z);var X=B-A,P=At(X-St)<xt,j=P||X<xt;if(!P&&J<z&&(Z=z,z=J,J=Z),j?P?z+J>0^G[1]<(At(G[0]-A)<xt?z:J):z<=G[1]&&G[1]<=J:X>St^(A<=G[0]&&G[0]<=B)){var Q=Yo(E,(-F+R)/C);return sf(Q,S),[G,as(Q)]}}}function s(u,c){var h=i?t:St-t,p=0;return u<-h?p|=1:u>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return A1(a,l,o,i?[0,-t]:[-St,t-St])}function F3(t,e,n,i,r,o){var a=t[0],l=t[1],f=e[0],s=e[1],u=0,c=1,h=f-a,p=s-l,d;if(d=n-a,!(!h&&d>0)){if(d/=h,h<0){if(d<u)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>u&&(u=d)}if(d=r-a,!(!h&&d<0)){if(d/=h,h<0){if(d>c)return;d>u&&(u=d)}else if(h>0){if(d<u)return;d<c&&(c=d)}if(d=i-l,!(!p&&d>0)){if(d/=p,p<0){if(d<u)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>u&&(u=d)}if(d=o-l,!(!p&&d<0)){if(d/=p,p<0){if(d>c)return;d>u&&(u=d)}else if(p>0){if(d<u)return;d<c&&(c=d)}return u>0&&(t[0]=a+u*h,t[1]=l+u*p),c<1&&(e[0]=a+c*h,e[1]=l+c*p),!0}}}}}var $r=1e9,Ho=-$r;function E1(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,c,h){var p=0,d=0;if(s==null||(p=a(s,c))!==(d=a(u,c))||f(s,u)<0^c>0)do h.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+c+4)%4)!==d);else h.point(u[0],u[1])}function a(s,u){return At(s[0]-t)<xt?u>0?0:3:At(s[0]-n)<xt?u>0?2:1:At(s[1]-e)<xt?u>0?1:0:u>0?3:2}function l(s,u){return f(s.x,u.x)}function f(s,u){var c=a(s,1),h=a(u,1);return c!==h?c-h:c===0?u[1]-s[1]:c===1?s[0]-u[0]:c===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,c=T1(),h,p,d,m,b,_,g,v,w,k,x,S={point:T,lineStart:L,lineEnd:R,polygonStart:F,polygonEnd:C};function T(A,B){r(A,B)&&u.point(A,B)}function E(){for(var A=0,B=0,z=p.length;B<z;++B)for(var J=p[B],Z=1,X=J.length,P=J[0],j,Q,at=P[0],tt=P[1];Z<X;++Z)j=at,Q=tt,P=J[Z],at=P[0],tt=P[1],Q<=i?tt>i&&(at-j)*(i-Q)>(tt-Q)*(t-j)&&++A:tt<=i&&(at-j)*(i-Q)<(tt-Q)*(t-j)&&--A;return A}function F(){u=c,h=[],p=[],x=!0}function C(){var A=E(),B=x&&A,z=(h=I0(h)).length;(B||z)&&(s.polygonStart(),B&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),z&&C1(h,l,A,o,s),s.polygonEnd()),u=s,h=p=d=null}function L(){S.point=G,p&&p.push(d=[]),k=!0,w=!1,g=v=NaN}function R(){h&&(G(m,b),_&&w&&c.rejoin(),h.push(c.result())),S.point=T,w&&u.lineEnd()}function G(A,B){var z=r(A,B);if(p&&d.push([A,B]),k)m=A,b=B,_=z,k=!1,z&&(u.lineStart(),u.point(A,B));else if(z&&w)u.point(A,B);else{var J=[g=Math.max(Ho,Math.min($r,g)),v=Math.max(Ho,Math.min($r,v))],Z=[A=Math.max(Ho,Math.min($r,A)),B=Math.max(Ho,Math.min($r,B))];F3(J,Z,t,e,n,i)?(w||(u.lineStart(),u.point(J[0],J[1])),u.point(Z[0],Z[1]),z||u.lineEnd(),x=!1):z&&(u.lineStart(),u.point(A,B),x=!1)}g=A,v=B,w=z}return S}}const us=t=>t;var cf=new wi,cs=new wi,$1,N1,hs,ds,qn={point:Oe,lineStart:Oe,lineEnd:Oe,polygonStart:function(){qn.lineStart=L3,qn.lineEnd=R3},polygonEnd:function(){qn.lineStart=qn.lineEnd=qn.point=Oe,cf.add(At(cs)),cs=new wi},result:function(){var t=cf/2;return cf=new wi,t}};function L3(){qn.point=I3}function I3(t,e){qn.point=D1,$1=hs=t,N1=ds=e}function D1(t,e){cs.add(ds*t-hs*e),hs=t,ds=e}function R3(){D1($1,N1)}const Rc=qn;var rr=1/0,Aa=rr,Zr=-rr,Ea=Zr,P3={point:O3,lineStart:Oe,lineEnd:Oe,polygonStart:Oe,polygonEnd:Oe,result:function(){var t=[[rr,Aa],[Zr,Ea]];return Zr=Ea=-(Aa=rr=1/0),t}};function O3(t,e){t<rr&&(rr=t),t>Zr&&(Zr=t),e<Aa&&(Aa=e),e>Ea&&(Ea=e)}const $a=P3;var ps=0,ms=0,Nr=0,Na=0,Da=0,qi=0,gs=0,bs=0,Dr=0,F1,L1,on,an,je={point:Ti,lineStart:Pc,lineEnd:Oc,polygonStart:function(){je.lineStart=B3,je.lineEnd=q3},polygonEnd:function(){je.point=Ti,je.lineStart=Pc,je.lineEnd=Oc},result:function(){var t=Dr?[gs/Dr,bs/Dr]:qi?[Na/qi,Da/qi]:Nr?[ps/Nr,ms/Nr]:[NaN,NaN];return ps=ms=Nr=Na=Da=qi=gs=bs=Dr=0,t}};function Ti(t,e){ps+=t,ms+=e,++Nr}function Pc(){je.point=U3}function U3(t,e){je.point=z3,Ti(on=t,an=e)}function z3(t,e){var n=t-on,i=e-an,r=Me(n*n+i*i);Na+=r*(on+t)/2,Da+=r*(an+e)/2,qi+=r,Ti(on=t,an=e)}function Oc(){je.point=Ti}function B3(){je.point=Y3}function q3(){I1(F1,L1)}function Y3(t,e){je.point=I1,Ti(F1=on=t,L1=an=e)}function I1(t,e){var n=t-on,i=e-an,r=Me(n*n+i*i);Na+=r*(on+t)/2,Da+=r*(an+e)/2,qi+=r,r=an*t-on*e,gs+=r*(on+t),bs+=r*(an+e),Dr+=r*3,Ti(on=t,an=e)}const Uc=je;function R1(t){this._context=t}R1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Ae);break}}},result:Oe};var _s=new wi,hf,P1,O1,Fr,Lr,Fa={point:Oe,lineStart:function(){Fa.point=W3},lineEnd:function(){hf&&U1(P1,O1),Fa.point=Oe},polygonStart:function(){hf=!0},polygonEnd:function(){hf=null},result:function(){var t=+_s;return _s=new wi,t}};function W3(t,e){Fa.point=U1,P1=Fr=t,O1=Lr=e}function U1(t,e){Fr-=t,Lr-=e,_s.add(Me(Fr*Fr+Lr*Lr)),Fr=t,Lr=e}const zc=Fa;let Bc,La,qc,Yc;class Wc{constructor(e){this._append=e==null?z1:H3(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==qc||this._append!==La){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,qc=i,La=this._append,Yc=this._,this._=r}this._+=Yc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function z1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function H3(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return z1;if(e!==Bc){const n=10**e;Bc=e,La=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return La}function cl(t,e){let n=3,i=4.5,r,o;function a(l){return l&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),ui(l,r(o))),o.result()}return a.area=function(l){return ui(l,r(Rc)),Rc.result()},a.measure=function(l){return ui(l,r(zc)),zc.result()},a.bounds=function(l){return ui(l,r($a)),$a.result()},a.centroid=function(l){return ui(l,r(Uc)),Uc.result()},a.projection=function(l){return arguments.length?(r=l==null?(t=null,us):(t=l).stream,a):t},a.context=function(l){return arguments.length?(o=l==null?(e=null,new Wc(n)):new R1(e=l),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(o.pointRadius(+l),+l),a):i},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const f=Math.floor(l);if(!(f>=0))throw new RangeError(`invalid digits: ${l}`);n=f}return e===null&&(o=new Wc(n)),a},a.projection(t).digits(n).context(e)}function ys(t){return{stream:hl(t)}}function hl(t){return function(e){var n=new ws;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ws(){}ws.prototype={constructor:ws,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function nu(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),ui(n,t.stream($a)),e($a.result()),i!=null&&t.clipExtent(i),t}function iu(t,e,n){return nu(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([l,f])},n)}function B1(t,e,n){return iu(t,[[0,0],e],n)}function q1(t,e,n){return nu(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];t.scale(150*o).translate([a,l])},n)}function Y1(t,e,n){return nu(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],l=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}var Hc=16,V3=Mt(30*qt);function Vc(t,e){return+e?j3(t,e):G3(t)}function G3(t){return hl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function j3(t,e){function n(i,r,o,a,l,f,s,u,c,h,p,d,m,b){var _=s-i,g=u-r,v=_*_+g*g;if(v>4*e&&m--){var w=a+h,k=l+p,x=f+d,S=Me(w*w+k*k+x*x),T=Be(x/=S),E=At(At(x)-1)<xt||At(o-c)<xt?(o+c)/2:$n(k,w),F=t(E,T),C=F[0],L=F[1],R=C-i,G=L-r,A=g*R-_*G;(A*A/v>e||At((_*R+g*G)/v-.5)>.3||a*h+l*p+f*d<V3)&&(n(i,r,o,a,l,f,C,L,E,w/=S,k/=S,x,m,b),b.point(C,L),n(C,L,E,w,k,x,s,u,c,h,p,d,m,b))}}return function(i){var r,o,a,l,f,s,u,c,h,p,d,m,b={point:_,lineStart:g,lineEnd:w,polygonStart:function(){i.polygonStart(),b.lineStart=k},polygonEnd:function(){i.polygonEnd(),b.lineStart=g}};function _(T,E){T=t(T,E),i.point(T[0],T[1])}function g(){c=NaN,b.point=v,i.lineStart()}function v(T,E){var F=ir([T,E]),C=t(T,E);n(c,h,u,p,d,m,c=C[0],h=C[1],u=T,p=F[0],d=F[1],m=F[2],Hc,i),i.point(c,h)}function w(){b.point=_,i.lineEnd()}function k(){g(),b.point=x,b.lineEnd=S}function x(T,E){v(r=T,E),o=c,a=h,l=p,f=d,s=m,b.point=v}function S(){n(c,h,u,p,d,m,o,a,r,l,f,s,Hc,i),b.lineEnd=w,w()}return b}}var X3=hl({point:function(t,e){this.stream.point(t*qt,e*qt)}});function Z3(t){return hl({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function K3(t,e,n,i,r){function o(a,l){return a*=i,l*=r,[e+t*a,n-t*l]}return o.invert=function(a,l){return[(a-e)/t*i,(n-l)/t*r]},o}function Gc(t,e,n,i,r,o){if(!o)return K3(t,e,n,i,r);var a=Mt(o),l=vt(o),f=a*t,s=l*t,u=a/t,c=l/t,h=(l*n-a*e)/t,p=(l*e+a*n)/t;function d(m,b){return m*=i,b*=r,[f*m-s*b+e,n-s*m-f*b]}return d.invert=function(m,b){return[i*(u*m-c*b+h),r*(p-c*m-u*b)]},d}function ii(t){return W1(function(){return t})()}function W1(t){var e,n=150,i=480,r=250,o=0,a=0,l=0,f=0,s=0,u,c=0,h=1,p=1,d=null,m=Ic,b=null,_,g,v,w=us,k=.5,x,S,T,E,F;function C(A){return T(A[0]*qt,A[1]*qt)}function L(A){return A=T.invert(A[0],A[1]),A&&[A[0]*se,A[1]*se]}C.stream=function(A){return E&&F===A?E:E=X3(Z3(u)(m(x(w(F=A)))))},C.preclip=function(A){return arguments.length?(m=A,d=void 0,G()):m},C.postclip=function(A){return arguments.length?(w=A,b=_=g=v=null,G()):w},C.clipAngle=function(A){return arguments.length?(m=+A?D3(d=A*qt):(d=null,Ic),G()):d*se},C.clipExtent=function(A){return arguments.length?(w=A==null?(b=_=g=v=null,us):E1(b=+A[0][0],_=+A[0][1],g=+A[1][0],v=+A[1][1]),G()):b==null?null:[[b,_],[g,v]]},C.scale=function(A){return arguments.length?(n=+A,R()):n},C.translate=function(A){return arguments.length?(i=+A[0],r=+A[1],R()):[i,r]},C.center=function(A){return arguments.length?(o=A[0]%360*qt,a=A[1]%360*qt,R()):[o*se,a*se]},C.rotate=function(A){return arguments.length?(l=A[0]%360*qt,f=A[1]%360*qt,s=A.length>2?A[2]%360*qt:0,R()):[l*se,f*se,s*se]},C.angle=function(A){return arguments.length?(c=A%360*qt,R()):c*se},C.reflectX=function(A){return arguments.length?(h=A?-1:1,R()):h<0},C.reflectY=function(A){return arguments.length?(p=A?-1:1,R()):p<0},C.precision=function(A){return arguments.length?(x=Vc(S,k=A*A),G()):Me(k)},C.fitExtent=function(A,B){return iu(C,A,B)},C.fitSize=function(A,B){return B1(C,A,B)},C.fitWidth=function(A,B){return q1(C,A,B)},C.fitHeight=function(A,B){return Y1(C,A,B)};function R(){var A=Gc(n,0,0,h,p,c).apply(null,e(o,a)),B=Gc(n,i-A[0],r-A[1],h,p,c);return u=S1(l,f,s),S=fs(e,B),T=fs(u,S),x=Vc(S,k),G()}function G(){return E=F=null,C}return function(){return e=t.apply(this,arguments),C.invert=e.invert&&L,R()}}function ru(t){var e=0,n=St/3,i=W1(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*qt,n=o[1]*qt):[e*se,n*se]},r}function J3(t){var e=Mt(t);function n(i,r){return[i*e,vt(r)/e]}return n.invert=function(i,r){return[i/e,Be(r*e)]},n}function Q3(t,e){var n=vt(t),i=(n+vt(e))/2;if(At(i)<xt)return J3(t);var r=1+n*(2*i-n),o=Me(r)/i;function a(l,f){var s=Me(r-2*i*vt(f))/i;return[s*vt(l*=i),o-s*Mt(l)]}return a.invert=function(l,f){var s=o-f,u=$n(l,At(s))*Pe(s);return s*i<0&&(u-=St*Pe(l)*Pe(s)),[u/i,Be((r-(l*l+s*s)*i*i)/(2*i))]},a}function Ia(){return ru(Q3).scale(155.424).center([0,33.6442])}function H1(){return Ia().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function t6(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function e6(){var t,e,n=H1(),i,r=Ia().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Ia().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,s={point:function(h,p){f=[h,p]}};function u(h){var p=h[0],d=h[1];return f=null,i.point(p,d),f||(o.point(p,d),f)||(l.point(p,d),f)}u.invert=function(h){var p=n.scale(),d=n.translate(),m=(h[0]-d[0])/p,b=(h[1]-d[1])/p;return(b>=.12&&b<.234&&m>=-.425&&m<-.214?r:b>=.166&&b<.234&&m>=-.214&&m<-.115?a:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=t6([n.stream(e=h),r.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),c()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),d=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(s),o=r.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+xt,m+.12*p+xt],[d-.214*p-xt,m+.234*p-xt]]).stream(s),l=a.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+xt,m+.166*p+xt],[d-.115*p-xt,m+.234*p-xt]]).stream(s),c()},u.fitExtent=function(h,p){return iu(u,h,p)},u.fitSize=function(h,p){return B1(u,h,p)},u.fitWidth=function(h,p){return q1(u,h,p)},u.fitHeight=function(h,p){return Y1(u,h,p)};function c(){return t=e=null,u}return u.scale(1070)}function V1(t){return function(e,n){var i=Mt(e),r=Mt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*vt(e),o*vt(n)]}}function ho(t){return function(e,n){var i=Me(e*e+n*n),r=t(i),o=vt(r),a=Mt(r);return[$n(e*o,i*a),Be(i&&n*o/i)]}}var G1=V1(function(t){return Me(2/(1+t))});G1.invert=ho(function(t){return 2*Be(t/2)});function n6(){return ii(G1).scale(124.75).clipAngle(180-.001)}var j1=V1(function(t){return(t=M1(t))&&t/vt(t)});j1.invert=ho(function(t){return t});function i6(){return ii(j1).scale(79.4188).clipAngle(180-.001)}function dl(t,e){return[t,Sa(eu((Yt+e)/2))]}dl.invert=function(t,e){return[t,2*mr(k1(e))-Yt]};function r6(){return X1(dl).scale(961/Ae)}function X1(t){var e=ii(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,l,f,s;e.scale=function(c){return arguments.length?(i(c),u()):i()},e.translate=function(c){return arguments.length?(r(c),u()):r()},e.center=function(c){return arguments.length?(n(c),u()):n()},e.clipExtent=function(c){return arguments.length?(c==null?a=l=f=s=null:(a=+c[0][0],l=+c[0][1],f=+c[1][0],s=+c[1][1]),u()):a==null?null:[[a,l],[f,s]]};function u(){var c=St*i(),h=e(M3(e.rotate()).invert([0,0]));return o(a==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===dl?[[Math.max(h[0]-c,a),l],[Math.min(h[0]+c,f),s]]:[[a,Math.max(h[1]-c,l)],[f,Math.min(h[1]+c,s)]])}return u()}function Vo(t){return eu((Yt+t)/2)}function o6(t,e){var n=Mt(t),i=t===e?vt(t):Sa(n/Mt(e))/Sa(Vo(e)/Vo(t)),r=n*ff(Vo(t),i)/i;if(!i)return dl;function o(a,l){r>0?l<-Yt+xt&&(l=-Yt+xt):l>Yt-xt&&(l=Yt-xt);var f=r/ff(Vo(l),i);return[f*vt(i*a),r-f*Mt(i*a)]}return o.invert=function(a,l){var f=r-l,s=Pe(i)*Me(a*a+f*f),u=$n(a,At(f))*Pe(f);return f*i<0&&(u-=St*Pe(a)*Pe(f)),[u/i,2*mr(ff(r/s,1/i))-Yt]},o}function a6(){return ru(o6).scale(109.5).parallels([30,30])}function Ra(t,e){return[t,e]}Ra.invert=Ra;function l6(){return ii(Ra).scale(152.63)}function f6(t,e){var n=Mt(t),i=t===e?vt(t):(n-Mt(e))/(e-t),r=n/i+t;if(At(i)<xt)return Ra;function o(a,l){var f=r-l,s=i*a;return[f*vt(s),r-f*Mt(s)]}return o.invert=function(a,l){var f=r-l,s=$n(a,At(f))*Pe(f);return f*i<0&&(s-=St*Pe(a)*Pe(f)),[s/i,r-Pe(i)*Me(a*a+f*f)]},o}function s6(){return ru(f6).scale(131.154).center([0,13.9389])}var Ur=1.340264,zr=-.081106,Br=893e-6,qr=.003796,Pa=Me(3)/2,u6=12;function Z1(t,e){var n=Be(Pa*vt(e)),i=n*n,r=i*i*i;return[t*Mt(n)/(Pa*(Ur+3*zr*i+r*(7*Br+9*qr*i))),n*(Ur+zr*i+r*(Br+qr*i))]}Z1.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,l,f;o<u6&&(l=n*(Ur+zr*i+r*(Br+qr*i))-e,f=Ur+3*zr*i+r*(7*Br+9*qr*i),n-=a=l/f,i=n*n,r=i*i*i,!(At(a)<x1));++o);return[Pa*t*(Ur+3*zr*i+r*(7*Br+9*qr*i))/Mt(n),Be(vt(n)/Pa)]};function c6(){return ii(Z1).scale(177.158)}function K1(t,e){var n=Mt(e),i=Mt(t)*n;return[n*vt(t)/i,vt(e)/i]}K1.invert=ho(mr);function h6(){return ii(K1).scale(144.049).clipAngle(60)}function J1(t,e){return[Mt(e)*vt(t),vt(e)]}J1.invert=ho(Be);function d6(){return ii(J1).scale(249.5).clipAngle(90+xt)}function Q1(t,e){var n=Mt(e),i=1+Mt(t)*n;return[n*vt(t)/i,vt(e)/i]}Q1.invert=ho(function(t){return 2*mr(t)});function p6(){return ii(Q1).scale(250).clipAngle(142)}function tp(t,e){return[Sa(eu((Yt+e)/2)),-t]}tp.invert=function(t,e){return[-e,2*mr(k1(t))-Yt]};function m6(){var t=X1(tp),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function gn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function pl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const vs=Symbol("implicit");function ou(){var t=new vi,e=[],n=[],i=vs;function r(o){let a=t.get(o);if(a===void 0){if(i!==vs)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new vi;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return ou(e,n).unknown(i)},gn.apply(r,arguments),r}function ml(){var t=ou().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,l=!1,f=0,s=0,u=.5;delete t.unknown;function c(){var h=e().length,p=r<i,d=p?r:i,m=p?i:r;o=(m-d)/Math.max(1,h-f+s*2),l&&(o=Math.floor(o)),d+=(m-d-o*(h-f))*u,a=o*(1-f),l&&(d=Math.round(d),a=Math.round(a));var b=Vf(h).map(function(_){return d+o*_});return n(p?b.reverse():b)}return t.domain=function(h){return arguments.length?(e(h),c()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,c()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,l=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(l=!!h,c()):l},t.padding=function(h){return arguments.length?(f=Math.min(1,s=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(s=+h,c()):s},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),c()):u},t.copy=function(){return ml(e(),[i,r]).round(l).paddingInner(f).paddingOuter(s).align(u)},gn.apply(c(),arguments)}function ep(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ep(e())},t}function g6(){return ep(ml.apply(null,arguments).paddingInner(1))}function b6(t){return function(){return t}}function xs(t){return+t}var jc=[0,1];function Ue(t){return t}function ks(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:b6(isNaN(e)?NaN:.5)}function _6(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function y6(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=ks(r,i),o=n(a,o)):(i=ks(i,r),o=n(o,a)),function(l){return o(i(l))}}function w6(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=ks(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(l){var f=tl(t,l,1,i)-1;return o[f](r[f](l))}}function po(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function gl(){var t=jc,e=jc,n=co,i,r,o,a=Ue,l,f,s;function u(){var h=Math.min(t.length,e.length);return a!==Ue&&(a=_6(t[0],t[h-1])),l=h>2?w6:y6,f=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=l(t.map(i),e,n)))(i(a(h)))}return c.invert=function(h){return a(r((s||(s=l(e,t.map(i),ae)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,xs),u()):t.slice()},c.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},c.rangeRound=function(h){return e=Array.from(h),n=Xs,u()},c.clamp=function(h){return arguments.length?(a=h?!0:Ue,u()):a!==Ue},c.interpolate=function(h){return arguments.length?(n=h,u()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,p){return i=h,r=p,u()}}function np(){return gl()(Ue,Ue)}function v6(t,e,n,i){var r=Wf(t,e,n),o;switch(i=Xr(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=x3(r,a))&&(i.precision=o),v1(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=k3(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=v3(r))&&(i.precision=o-(i.type==="%")*2);break}}return pr(i)}function mo(t){var e=t.domain;return t.ticks=function(n){var i=e();return Hr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return v6(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],l=i[o],f,s,u=10;for(l<a&&(s=a,a=l,l=s,s=r,r=o,o=s);u-- >0;){if(s=ga(a,l,n),s===f)return i[r]=a,i[o]=l,e(i);if(s>0)a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s;else if(s<0)a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s;else break;f=s}return t},t}function au(){var t=np();return t.copy=function(){return po(t,au())},gn.apply(t,arguments),mo(t)}function ip(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,xs),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return ip(t).unknown(e)},t=arguments.length?Array.from(t,xs):[0,1],mo(n)}function rp(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function Xc(t){return Math.log(t)}function Zc(t){return Math.exp(t)}function x6(t){return-Math.log(-t)}function k6(t){return-Math.exp(-t)}function M6(t){return isFinite(t)?+("1e"+t):t<0?0:t}function S6(t){return t===10?M6:t===Math.E?Math.exp:e=>Math.pow(t,e)}function T6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Kc(t){return(e,n)=>-t(-e,n)}function op(t){const e=t(Xc,Zc),n=e.domain;let i=10,r,o;function a(){return r=T6(i),o=S6(i),n()[0]<0?(r=Kc(r),o=Kc(o),t(x6,k6)):t(Xc,Zc),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const f=n();let s=f[0],u=f[f.length-1];const c=u<s;c&&([s,u]=[u,s]);let h=r(s),p=r(u),d,m;const b=l==null?10:+l;let _=[];if(!(i%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(d=1;d<i;++d)if(m=h<0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}}else for(;h<=p;++h)for(d=i-1;d>=1;--d)if(m=h>0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}_.length*2<b&&(_=Hr(s,u,b))}else _=Hr(h,p,Math.min(p-h,b)).map(o);return c?_.reverse():_},e.tickFormat=(l,f)=>{if(l==null&&(l=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Xr(f)).precision==null&&(f.trim=!0),f=pr(f)),l===1/0)return f;const s=Math.max(1,i*l/e.ticks().length);return u=>{let c=u/o(Math.round(r(u)));return c*i<i-.5&&(c*=i),c<=s?f(u):""}},e.nice=()=>n(rp(n(),{floor:l=>o(Math.floor(r(l))),ceil:l=>o(Math.ceil(r(l)))})),e}function ap(){const t=op(gl()).domain([1,10]);return t.copy=()=>po(t,ap()).base(t.base()),gn.apply(t,arguments),t}function Jc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Qc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function lp(t){var e=1,n=t(Jc(e),Qc(e));return n.constant=function(i){return arguments.length?t(Jc(e=+i),Qc(e)):e},mo(n)}function fp(){var t=lp(gl());return t.copy=function(){return po(t,fp()).constant(t.constant())},gn.apply(t,arguments)}function th(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function C6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function A6(t){return t<0?-t*t:t*t}function sp(t){var e=t(Ue,Ue),n=1;function i(){return n===1?t(Ue,Ue):n===.5?t(C6,A6):t(th(n),th(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},mo(e)}function up(){var t=sp(gl());return t.copy=function(){return po(t,up()).exponent(t.exponent())},gn.apply(t,arguments),t}function cp(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=m_(t,a/l);return o}function o(a){return a==null||isNaN(a=+a)?i:e[tl(n,a)]}return o.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ve),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return cp().domain(t).range(e).unknown(i)},gn.apply(o,arguments)}function hp(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[tl(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return hp().domain(t).range(e).unknown(n)},gn.apply(r,arguments)}const df=new Date,pf=new Date;function Zt(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),l=r.ceil(o);return o-a<l-o?a:l},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,l)=>{const f=[];if(o=r.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return f;let s;do f.push(s=new Date(+o)),e(o,l),t(o);while(s<o&&o<a);return f},r.filter=o=>Zt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!o(a););else for(;--l>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(df.setTime(+o),pf.setTime(+a),t(df),t(pf),Math.floor(n(df,pf))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Oa=Zt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Oa.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Zt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Oa);Oa.range;const Sn=1e3,ze=Sn*60,Tn=ze*60,Nn=Tn*24,lu=Nn*7,eh=Nn*30,mf=Nn*365,Xe=Zt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sn)},(t,e)=>(e-t)/Sn,t=>t.getUTCSeconds());Xe.range;const go=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sn)},(t,e)=>{t.setTime(+t+e*ze)},(t,e)=>(e-t)/ze,t=>t.getMinutes());go.range;const bo=Zt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*ze)},(t,e)=>(e-t)/ze,t=>t.getUTCMinutes());bo.range;const _o=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sn-t.getMinutes()*ze)},(t,e)=>{t.setTime(+t+e*Tn)},(t,e)=>(e-t)/Tn,t=>t.getHours());_o.range;const yo=Zt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Tn)},(t,e)=>(e-t)/Tn,t=>t.getUTCHours());yo.range;const $i=Zt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ze)/Nn,t=>t.getDate()-1);$i.range;const bl=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nn,t=>t.getUTCDate()-1);bl.range;const _l=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Nn,t=>Math.floor(t/Nn));_l.range;function Ni(t){return Zt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*ze)/lu)}const or=Ni(0),Kr=Ni(1),dp=Ni(2),pp=Ni(3),Ci=Ni(4),mp=Ni(5),gp=Ni(6);or.range;Kr.range;dp.range;pp.range;Ci.range;mp.range;gp.range;function Di(t){return Zt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/lu)}const ar=Di(0),Jr=Di(1),bp=Di(2),_p=Di(3),Ai=Di(4),yp=Di(5),wp=Di(6);ar.range;Jr.range;bp.range;_p.range;Ai.range;yp.range;wp.range;const wo=Zt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());wo.range;const vo=Zt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());vo.range;const Ke=Zt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Ke.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Ke.range;const Je=Zt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Je.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Je.range;function vp(t,e,n,i,r,o){const a=[[Xe,1,Sn],[Xe,5,5*Sn],[Xe,15,15*Sn],[Xe,30,30*Sn],[o,1,ze],[o,5,5*ze],[o,15,15*ze],[o,30,30*ze],[r,1,Tn],[r,3,3*Tn],[r,6,6*Tn],[r,12,12*Tn],[i,1,Nn],[i,2,2*Nn],[n,1,lu],[e,1,eh],[e,3,3*eh],[t,1,mf]];function l(s,u,c){const h=u<s;h&&([s,u]=[u,s]);const p=c&&typeof c.range=="function"?c:f(s,u,c),d=p?p.range(s,+u+1):[];return h?d.reverse():d}function f(s,u,c){const h=Math.abs(u-s)/c,p=Qa(([,,b])=>b).right(a,h);if(p===a.length)return t.every(Wf(s/mf,u/mf,c));if(p===0)return Oa.every(Math.max(Wf(s,u,c),1));const[d,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return d.every(m)}return[l,f]}const[E6,xp]=vp(Je,vo,ar,_l,yo,bo),[$6,N6]=vp(Ke,wo,or,$i,_o,go);function gf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function bf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function kr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function D6(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,l=t.months,f=t.shortMonths,s=Mr(r),u=Sr(r),c=Mr(o),h=Sr(o),p=Mr(a),d=Sr(a),m=Mr(l),b=Sr(l),_=Mr(f),g=Sr(f),v={a:z,A:J,b:Z,B:X,c:null,d:lh,e:lh,f:e5,g:c5,G:d5,H:J6,I:Q6,j:t5,L:kp,m:n5,M:i5,p:P,q:j,Q:uh,s:ch,S:r5,u:o5,U:a5,V:l5,w:f5,W:s5,x:null,X:null,y:u5,Y:h5,Z:p5,"%":sh},w={a:Q,A:at,b:tt,B:V,c:null,d:fh,e:fh,f:_5,g:A5,G:$5,H:m5,I:g5,j:b5,L:Sp,m:y5,M:w5,p:q,q:D,Q:uh,s:ch,S:v5,u:x5,U:k5,V:M5,w:S5,W:T5,x:null,X:null,y:C5,Y:E5,Z:N5,"%":sh},k={a:F,A:C,b:L,B:R,c:G,d:oh,e:oh,f:j6,g:rh,G:ih,H:ah,I:ah,j:W6,L:G6,m:Y6,M:H6,p:E,q:q6,Q:Z6,s:K6,S:V6,u:P6,U:O6,V:U6,w:R6,W:z6,x:A,X:B,y:rh,Y:ih,Z:B6,"%":X6};v.x=x(n,v),v.X=x(i,v),v.c=x(e,v),w.x=x(n,w),w.X=x(i,w),w.c=x(e,w);function x($,O){return function(et){var U=[],mt=-1,ot=0,pt=$.length,ft,dt,Ut;for(et instanceof Date||(et=new Date(+et));++mt<pt;)$.charCodeAt(mt)===37&&(U.push($.slice(ot,mt)),(dt=nh[ft=$.charAt(++mt)])!=null?ft=$.charAt(++mt):dt=ft==="e"?" ":"0",(Ut=O[ft])&&(ft=Ut(et,dt)),U.push(ft),ot=mt+1);return U.push($.slice(ot,mt)),U.join("")}}function S($,O){return function(et){var U=kr(1900,void 0,1),mt=T(U,$,et+="",0),ot,pt;if(mt!=et.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(O&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(ot=bf(kr(U.y,0,1)),pt=ot.getUTCDay(),ot=pt>4||pt===0?Jr.ceil(ot):Jr(ot),ot=bl.offset(ot,(U.V-1)*7),U.y=ot.getUTCFullYear(),U.m=ot.getUTCMonth(),U.d=ot.getUTCDate()+(U.w+6)%7):(ot=gf(kr(U.y,0,1)),pt=ot.getDay(),ot=pt>4||pt===0?Kr.ceil(ot):Kr(ot),ot=$i.offset(ot,(U.V-1)*7),U.y=ot.getFullYear(),U.m=ot.getMonth(),U.d=ot.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),pt="Z"in U?bf(kr(U.y,0,1)).getUTCDay():gf(kr(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(pt+5)%7:U.w+U.U*7-(pt+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,bf(U)):gf(U)}}function T($,O,et,U){for(var mt=0,ot=O.length,pt=et.length,ft,dt;mt<ot;){if(U>=pt)return-1;if(ft=O.charCodeAt(mt++),ft===37){if(ft=O.charAt(mt++),dt=k[ft in nh?O.charAt(mt++):ft],!dt||(U=dt($,et,U))<0)return-1}else if(ft!=et.charCodeAt(U++))return-1}return U}function E($,O,et){var U=s.exec(O.slice(et));return U?($.p=u.get(U[0].toLowerCase()),et+U[0].length):-1}function F($,O,et){var U=p.exec(O.slice(et));return U?($.w=d.get(U[0].toLowerCase()),et+U[0].length):-1}function C($,O,et){var U=c.exec(O.slice(et));return U?($.w=h.get(U[0].toLowerCase()),et+U[0].length):-1}function L($,O,et){var U=_.exec(O.slice(et));return U?($.m=g.get(U[0].toLowerCase()),et+U[0].length):-1}function R($,O,et){var U=m.exec(O.slice(et));return U?($.m=b.get(U[0].toLowerCase()),et+U[0].length):-1}function G($,O,et){return T($,e,O,et)}function A($,O,et){return T($,n,O,et)}function B($,O,et){return T($,i,O,et)}function z($){return a[$.getDay()]}function J($){return o[$.getDay()]}function Z($){return f[$.getMonth()]}function X($){return l[$.getMonth()]}function P($){return r[+($.getHours()>=12)]}function j($){return 1+~~($.getMonth()/3)}function Q($){return a[$.getUTCDay()]}function at($){return o[$.getUTCDay()]}function tt($){return f[$.getUTCMonth()]}function V($){return l[$.getUTCMonth()]}function q($){return r[+($.getUTCHours()>=12)]}function D($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var O=x($+="",v);return O.toString=function(){return $},O},parse:function($){var O=S($+="",!1);return O.toString=function(){return $},O},utcFormat:function($){var O=x($+="",w);return O.toString=function(){return $},O},utcParse:function($){var O=S($+="",!0);return O.toString=function(){return $},O}}}var nh={"-":"",_:" ",0:"0"},ne=/^\s*\d+/,F6=/^%/,L6=/[\\^$*+?|[\]().{}]/g;function Ct(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function I6(t){return t.replace(L6,"\\$&")}function Mr(t){return new RegExp("^(?:"+t.map(I6).join("|")+")","i")}function Sr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function R6(t,e,n){var i=ne.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function P6(t,e,n){var i=ne.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function O6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function U6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function z6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function ih(t,e,n){var i=ne.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function rh(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function B6(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function q6(t,e,n){var i=ne.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function Y6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function oh(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function W6(t,e,n){var i=ne.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function ah(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function H6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function V6(t,e,n){var i=ne.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function G6(t,e,n){var i=ne.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function j6(t,e,n){var i=ne.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function X6(t,e,n){var i=F6.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Z6(t,e,n){var i=ne.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function K6(t,e,n){var i=ne.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function lh(t,e){return Ct(t.getDate(),e,2)}function J6(t,e){return Ct(t.getHours(),e,2)}function Q6(t,e){return Ct(t.getHours()%12||12,e,2)}function t5(t,e){return Ct(1+$i.count(Ke(t),t),e,3)}function kp(t,e){return Ct(t.getMilliseconds(),e,3)}function e5(t,e){return kp(t,e)+"000"}function n5(t,e){return Ct(t.getMonth()+1,e,2)}function i5(t,e){return Ct(t.getMinutes(),e,2)}function r5(t,e){return Ct(t.getSeconds(),e,2)}function o5(t){var e=t.getDay();return e===0?7:e}function a5(t,e){return Ct(or.count(Ke(t)-1,t),e,2)}function Mp(t){var e=t.getDay();return e>=4||e===0?Ci(t):Ci.ceil(t)}function l5(t,e){return t=Mp(t),Ct(Ci.count(Ke(t),t)+(Ke(t).getDay()===4),e,2)}function f5(t){return t.getDay()}function s5(t,e){return Ct(Kr.count(Ke(t)-1,t),e,2)}function u5(t,e){return Ct(t.getFullYear()%100,e,2)}function c5(t,e){return t=Mp(t),Ct(t.getFullYear()%100,e,2)}function h5(t,e){return Ct(t.getFullYear()%1e4,e,4)}function d5(t,e){var n=t.getDay();return t=n>=4||n===0?Ci(t):Ci.ceil(t),Ct(t.getFullYear()%1e4,e,4)}function p5(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ct(e/60|0,"0",2)+Ct(e%60,"0",2)}function fh(t,e){return Ct(t.getUTCDate(),e,2)}function m5(t,e){return Ct(t.getUTCHours(),e,2)}function g5(t,e){return Ct(t.getUTCHours()%12||12,e,2)}function b5(t,e){return Ct(1+bl.count(Je(t),t),e,3)}function Sp(t,e){return Ct(t.getUTCMilliseconds(),e,3)}function _5(t,e){return Sp(t,e)+"000"}function y5(t,e){return Ct(t.getUTCMonth()+1,e,2)}function w5(t,e){return Ct(t.getUTCMinutes(),e,2)}function v5(t,e){return Ct(t.getUTCSeconds(),e,2)}function x5(t){var e=t.getUTCDay();return e===0?7:e}function k5(t,e){return Ct(ar.count(Je(t)-1,t),e,2)}function Tp(t){var e=t.getUTCDay();return e>=4||e===0?Ai(t):Ai.ceil(t)}function M5(t,e){return t=Tp(t),Ct(Ai.count(Je(t),t)+(Je(t).getUTCDay()===4),e,2)}function S5(t){return t.getUTCDay()}function T5(t,e){return Ct(Jr.count(Je(t)-1,t),e,2)}function C5(t,e){return Ct(t.getUTCFullYear()%100,e,2)}function A5(t,e){return t=Tp(t),Ct(t.getUTCFullYear()%100,e,2)}function E5(t,e){return Ct(t.getUTCFullYear()%1e4,e,4)}function $5(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Ai(t):Ai.ceil(t),Ct(t.getUTCFullYear()%1e4,e,4)}function N5(){return"+0000"}function sh(){return"%"}function uh(t){return+t}function ch(t){return Math.floor(+t/1e3)}var Oi,fu,xo;D5({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function D5(t){return Oi=D6(t),fu=Oi.format,Oi.parse,xo=Oi.utcFormat,Oi.utcParse,Oi}function F5(t){return new Date(t)}function L5(t){return t instanceof Date?+t:+new Date(+t)}function su(t,e,n,i,r,o,a,l,f,s){var u=np(),c=u.invert,h=u.domain,p=s(".%L"),d=s(":%S"),m=s("%I:%M"),b=s("%I %p"),_=s("%a %d"),g=s("%b %d"),v=s("%B"),w=s("%Y");function k(x){return(f(x)<x?p:l(x)<x?d:a(x)<x?m:o(x)<x?b:i(x)<x?r(x)<x?_:g:n(x)<x?v:w)(x)}return u.invert=function(x){return new Date(c(x))},u.domain=function(x){return arguments.length?h(Array.from(x,L5)):h().map(F5)},u.ticks=function(x){var S=h();return t(S[0],S[S.length-1],x??10)},u.tickFormat=function(x,S){return S==null?k:s(S)},u.nice=function(x){var S=h();return(!x||typeof x.range!="function")&&(x=e(S[0],S[S.length-1],x??10)),x?h(rp(S,x)):u},u.copy=function(){return po(u,su(t,e,n,i,r,o,a,l,f,s))},u}function I5(){return gn.apply(su($6,N6,Ke,wo,or,$i,_o,go,Xe,fu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function R5(){return gn.apply(su(E6,xp,Je,vo,ar,bl,yo,bo,Xe,xo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wl(){var t=0,e=.5,n=1,i=1,r,o,a,l,f,s=Ue,u,c=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(i*m<i*o?l:f),s(c?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(c=!!m,p):c},p.interpolator=function(m){return arguments.length?(s=m,p):s};function d(m){return function(b){var _,g,v;return arguments.length?([_,g,v]=b,s=fl(m,[_,g,v]),p):[s(0),s(.5),s(1)]}}return p.range=d(co),p.rangeRound=d(Xs),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return u=m,r=m(t),o=m(e),a=m(n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p}}function Cp(){var t=mo(wl()(Ue));return t.copy=function(){return yl(t,Cp())},pl.apply(t,arguments)}function Ap(){var t=op(wl()).domain([.1,1,10]);return t.copy=function(){return yl(t,Ap()).base(t.base())},pl.apply(t,arguments)}function Ep(){var t=lp(wl());return t.copy=function(){return yl(t,Ep()).constant(t.constant())},pl.apply(t,arguments)}function $p(){var t=sp(wl());return t.copy=function(){return yl(t,$p()).exponent(t.exponent())},pl.apply(t,arguments)}function kt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const P5=kt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),O5=kt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),U5=kt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),z5=kt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),B5=kt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),q5=kt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Y5=kt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),W5=kt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),H5=kt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),V5=kt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Nt=t=>$w(t[t.length-1]);var Np=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(kt);const Dp=Nt(Np);var Fp=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(kt);const Lp=Nt(Fp);var Ip=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(kt);const Rp=Nt(Ip);var Pp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(kt);const Op=Nt(Pp);var Ms=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(kt);const Ua=Nt(Ms);var Up=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(kt);const zp=Nt(Up);var Ss=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(kt);const za=Nt(Ss);var Bp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(kt);const qp=Nt(Bp);var Yp=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(kt);const Wp=Nt(Yp);var Hp=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(kt);const Vp=Nt(Hp);var Gp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(kt);const jp=Nt(Gp);var Xp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(kt);const Zp=Nt(Xp);var Kp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(kt);const Jp=Nt(Kp);var Qp=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(kt);const tm=Nt(Qp);var em=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(kt);const nm=Nt(em);var im=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(kt);const rm=Nt(im);var om=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(kt);const am=Nt(om);var lm=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(kt);const fm=Nt(lm);var sm=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(kt);const um=Nt(sm);var cm=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(kt);const hm=Nt(cm);var dm=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(kt);const pm=Nt(dm);var mm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(kt);const gm=Nt(mm);var bm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(kt);const _m=Nt(bm);var ym=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(kt);const wm=Nt(ym);var vm=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(kt);const xm=Nt(vm);var km=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(kt);const Mm=Nt(km);var Sm=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(kt);const Tm=Nt(Sm);function Cm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Am=Zs(dn(300,.5,0),dn(-240,.5,1));var Em=Zs(dn(-100,.75,.35),dn(80,1.5,.8)),$m=Zs(dn(260,.75,.35),dn(80,1.5,.8)),Go=dn();function Nm(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Go.h=360*t-100,Go.s=1.5-1.5*e,Go.l=.8-.9*e,Go+""}var jo=Qn(),G5=Math.PI/3,j5=Math.PI*2/3;function Dm(t){var e;return t=(.5-t)*Math.PI,jo.r=255*(e=Math.sin(t))*e,jo.g=255*(e=Math.sin(t+G5))*e,jo.b=255*(e=Math.sin(t+j5))*e,jo+""}function Fm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function vl(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const Lm=vl(kt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Im=vl(kt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Rm=vl(kt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Pm=vl(kt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Qt(t){return function(){return t}}const Om=Math.cos,uu=Math.min,Ba=Math.sin,Kt=Math.sqrt,hh=1e-12,qa=Math.PI,xl=2*qa;function Um(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new _1(e)}function zm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Bm(t){this._context=t}Bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ko(t){return new Bm(t)}function qm(t){return t[0]}function Ym(t){return t[1]}function Wm(t,e){var n=Qt(!0),i=null,r=ko,o=null,a=Um(l);t=typeof t=="function"?t:t===void 0?qm:Qt(t),e=typeof e=="function"?e:e===void 0?Ym:Qt(e);function l(f){var s,u=(f=zm(f)).length,c,h=!1,p;for(i==null&&(o=r(p=a())),s=0;s<=u;++s)!(s<u&&n(c=f[s],s,f))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,f),+e(c,s,f));if(p)return o=null,p+""||null}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:Qt(+f),l):t},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:Qt(+f),l):e},l.defined=function(f){return arguments.length?(n=typeof f=="function"?f:Qt(!!f),l):n},l.curve=function(f){return arguments.length?(r=f,i!=null&&(o=r(i)),l):r},l.context=function(f){return arguments.length?(f==null?i=o=null:o=r(i=f),l):i},l}function X5(t,e,n){var i=null,r=Qt(!0),o=null,a=ko,l=null,f=Um(s);t=typeof t=="function"?t:t===void 0?qm:Qt(+t),e=typeof e=="function"?e:Qt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Ym:Qt(+n);function s(c){var h,p,d,m=(c=zm(c)).length,b,_=!1,g,v=new Array(m),w=new Array(m);for(o==null&&(l=a(g=f())),h=0;h<=m;++h){if(!(h<m&&r(b=c[h],h,c))===_)if(_=!_)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=h-1;d>=p;--d)l.point(v[d],w[d]);l.lineEnd(),l.areaEnd()}_&&(v[h]=+t(b,h,c),w[h]=+e(b,h,c),l.point(i?+i(b,h,c):v[h],n?+n(b,h,c):w[h]))}if(g)return l=null,g+""||null}function u(){return Wm().defined(r).curve(a).context(o)}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:Qt(+c),i=null,s):t},s.x0=function(c){return arguments.length?(t=typeof c=="function"?c:Qt(+c),s):t},s.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:Qt(+c),s):i},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:Qt(+c),n=null,s):e},s.y0=function(c){return arguments.length?(e=typeof c=="function"?c:Qt(+c),s):e},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Qt(+c),s):n},s.lineX0=s.lineY0=function(){return u().x(t).y(e)},s.lineY1=function(){return u().x(t).y(n)},s.lineX1=function(){return u().x(i).y(e)},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Qt(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,o!=null&&(l=a(o)),s):a},s.context=function(c){return arguments.length?(c==null?o=l=null:l=a(o=c),s):o},s}class Hm{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Z5(t){return new Hm(t,!0)}function K5(t){return new Hm(t,!1)}const J5=Kt(3),Vm={draw(t,e){const n=Kt(e+uu(e/28,.75))*.59436,i=n/2,r=i*J5;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Qr={draw(t,e){const n=Kt(e/qa);t.moveTo(n,0),t.arc(0,0,n,0,xl)}},Gm={draw(t,e){const n=Kt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},jm=Kt(1/3),Q5=jm*2,Xm={draw(t,e){const n=Kt(e/Q5),i=n*jm;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Zm={draw(t,e){const n=Kt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},Km={draw(t,e){const n=Kt(e-uu(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Jm={draw(t,e){const n=Kt(e),i=-n/2;t.rect(i,i,n,n)}},Qm={draw(t,e){const n=Kt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},t4=.8908130915292852,tg=Ba(qa/10)/Ba(7*qa/10),e4=Ba(xl/10)*tg,n4=-Om(xl/10)*tg,eg={draw(t,e){const n=Kt(e*t4),i=e4*n,r=n4*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=xl*o/5,l=Om(a),f=Ba(a);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*r,f*i+l*r)}t.closePath()}},_f=Kt(3),ng={draw(t,e){const n=-Kt(e/(_f*3));t.moveTo(0,n*2),t.lineTo(-_f*n,-n),t.lineTo(_f*n,-n),t.closePath()}},i4=Kt(3),ig={draw(t,e){const n=Kt(e)*.6824,i=n/2,r=n*i4/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},Le=-.5,Ie=Kt(3)/2,Ts=1/Kt(12),r4=(Ts/2+1)*3,rg={draw(t,e){const n=Kt(e/r4),i=n/2,r=n*Ts,o=i,a=n*Ts+n,l=-o,f=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(l,f),t.lineTo(Le*i-Ie*r,Ie*i+Le*r),t.lineTo(Le*o-Ie*a,Ie*o+Le*a),t.lineTo(Le*l-Ie*f,Ie*l+Le*f),t.lineTo(Le*i+Ie*r,Le*r-Ie*i),t.lineTo(Le*o+Ie*a,Le*a-Ie*o),t.lineTo(Le*l+Ie*f,Le*f-Ie*l),t.closePath()}},og={draw(t,e){const n=Kt(e-uu(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},o4=[Qr,Gm,Xm,Jm,eg,ng,rg],a4=[Qr,Km,og,ig,Vm,Qm,Zm];function ti(){}function Ya(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function kl(t){this._context=t}kl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ya(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function l4(t){return new kl(t)}function ag(t){this._context=t}ag.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function f4(t){return new ag(t)}function lg(t){this._context=t}lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Ya(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function s4(t){return new lg(t)}function fg(t,e){this._basis=new kl(t),this._beta=e}fg.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,l=-1,f;++l<=n;)f=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+f*o),this._beta*e[l]+(1-this._beta)*(r+f*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const u4=function t(e){function n(i){return e===1?new kl(i):new fg(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Wa(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function cu(t,e){this._context=t,this._k=(1-e)/6}cu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wa(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Wa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const c4=function t(e){function n(i){return new cu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function hu(t,e){this._context=t,this._k=(1-e)/6}hu.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Wa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const h4=function t(e){function n(i){return new hu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function du(t,e){this._context=t,this._k=(1-e)/6}du.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wa(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const d4=function t(e){function n(i){return new du(i,e)}return n.tension=function(i){return t(+i)},n}(0);function pu(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>hh){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,r=(r*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>hh){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function sg(t,e){this._context=t,this._alpha=e}sg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:pu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const p4=function t(e){function n(i){return e?new sg(i,e):new cu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function ug(t,e){this._context=t,this._alpha=e}ug.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:pu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const m4=function t(e){function n(i){return e?new ug(i,e):new hu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function cg(t,e){this._context=t,this._alpha=e}cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const g4=function t(e){function n(i){return e?new cg(i,e):new du(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function hg(t){this._context=t}hg.prototype={areaStart:ti,areaEnd:ti,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function b4(t){return new hg(t)}function dh(t){return t<0?-1:1}function ph(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(o*r+a*i)/(i+r);return(dh(o)+dh(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function mh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function yf(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,r+l*e,o-l,a-l*n,o,a)}function Ha(t){this._context=t}Ha.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yf(this,this._t0,mh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,yf(this,mh(this,n=ph(this,t,e)),n);break;default:yf(this,this._t0,n=ph(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function dg(t){this._context=new pg(t)}(dg.prototype=Object.create(Ha.prototype)).point=function(t,e){Ha.prototype.point.call(this,e,t)};function pg(t){this._context=t}pg.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function _4(t){return new Ha(t)}function y4(t){return new dg(t)}function mg(t){this._context=t}mg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=gh(t),r=gh(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function gh(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function w4(t){return new mg(t)}function Ml(t,e){this._context=t,this._t=e}Ml.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function v4(t){return new Ml(t,.5)}function x4(t){return new Ml(t,0)}function k4(t){return new Ml(t,1)}function Ir(t,e,n){this.k=t,this.x=e,this.y=n}Ir.prototype={constructor:Ir,scale:function(t){return t===1?this:new Ir(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ir(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ir.prototype;function ei(t){return t!=null&&!Number.isNaN(t)}function Qe(t,e){return+ei(e)-+ei(t)||ve(t,e)}function Va(t,e){return+ei(e)-+ei(t)||lo(t,e)}function mu(t){return t!=null&&`${t}`!=""}function gg(t){return isFinite(t)?t:NaN}function Sl(t){return t>0&&isFinite(t)?t:NaN}function gu(t){return t<0&&isFinite(t)?t:NaN}function M4(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${S4(t.getUTCFullYear())}-${kn(t.getUTCMonth()+1,2)}-${kn(t.getUTCDate(),2)}${n||i||r||o?`T${kn(n,2)}:${kn(i,2)}${r||o?`:${kn(r,2)}${o?`.${kn(o,3)}`:""}`:""}Z`:""}`}function S4(t){return t<0?`-${kn(-t,6)}`:t>9999?`+${kn(t,6)}`:kn(t,4)}function kn(t,e){return`${t}`.padStart(e,"0")}const T4=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function bg(t,e){return T4.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Yi=1e3,Wn=Yi*60,Hn=Wn*60,pn=Hn*24,rn=pn*7,gi=pn*30,Bn=pn*365,wf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Yi],["5 seconds",5*Yi],["15 seconds",15*Yi],["30 seconds",30*Yi],["minute",Wn],["5 minutes",5*Wn],["15 minutes",15*Wn],["30 minutes",30*Wn],["hour",Hn],["3 hours",3*Hn],["6 hours",6*Hn],["12 hours",12*Hn],["day",pn],["2 days",2*pn],["week",rn],["2 weeks",2*rn],["month",gi],["3 months",3*gi],["6 months",6*gi],["year",Bn],["2 years",2*Bn],["5 years",5*Bn],["10 years",10*Bn],["20 years",20*Bn],["50 years",50*Bn],["100 years",100*Bn]],bu=new Map([["second",Yi],["minute",Wn],["hour",Hn],["day",pn],["monday",rn],["tuesday",rn],["wednesday",rn],["thursday",rn],["friday",rn],["saturday",rn],["sunday",rn],["week",rn],["month",gi],["year",Bn]]),_g=new Map([["second",Xe],["minute",go],["hour",_o],["day",$i],["monday",Kr],["tuesday",dp],["wednesday",pp],["thursday",Ci],["friday",mp],["saturday",gp],["sunday",or],["week",or],["month",wo],["year",Ke]]),_u=new Map([["second",Xe],["minute",bo],["hour",yo],["day",_l],["monday",Jr],["tuesday",bp],["wednesday",_p],["thursday",Ai],["friday",yp],["saturday",wp],["sunday",ar],["week",ar],["month",vo],["year",Je]]),Mo=Symbol("intervalDuration"),Tl=Symbol("intervalType");for(const[t,e]of _g)e[Mo]=bu.get(t),e[Tl]="time";for(const[t,e]of _u)e[Mo]=bu.get(t),e[Tl]="utc";const Rr=[["year",Je,"utc"],["month",vo,"utc"],["day",_l,"utc",6*gi],["hour",yo,"utc",3*pn],["minute",bo,"utc",6*Hn],["second",Xe,"utc",30*Wn]],ua=[["year",Ke,"time"],["month",wo,"time"],["day",$i,"time",6*gi],["hour",_o,"time",3*pn],["minute",go,"time",6*Hn],["second",Xe,"time",30*Wn]],C4=[Rr[0],ua[0],Rr[1],ua[1],Rr[2],ua[2],...Rr.slice(3)];function yg(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=_u.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function wg(t){return vg(yg(t),"time")}function yu(t){return vg(yg(t),"utc")}function vg([t,e],n){let i=(n==="time"?_g:_u).get(t);return e>1&&(i=i.every(e),i[Mo]=bu.get(t)*e,i[Tl]=n),i}function bh(t,e){if(!(e>1))return;const n=t[Mo];if(!wf.some(([,r])=>r===n)||n%pn===0&&pn<n&&n<gi)return;const[i]=wf[Qa(([,r])=>Math.log(r)).center(wf,Math.log(n*e))];return(t[Tl]==="time"?wg:yu)(i)}function _h(t,e,n){const i=e==="time"?fu:xo;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=A4(n);switch(t){case"millisecond":return Ui(i(".%L"),i(":%M:%S"),r);case"second":return Ui(i(":%S"),i("%-I:%M"),r);case"minute":return Ui(i("%-I:%M"),i("%p"),r);case"hour":return Ui(i("%-I %p"),i("%b %-d"),r);case"day":return Ui(i("%-d"),i("%b"),r);case"month":return Ui(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function A4(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function E4(t){return t==="time"?ua:t==="utc"?Rr:C4}function $4(t,e,n){const i=ke(y_(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return _h("millisecond","utc",n);for(const[r,o,a,l]of E4(t)){if(i>l||r==="hour"&&!i)break;if(e.every(f=>o.floor(f)>=f))return _h(r,a,n)}}function Ui(t,e,n){return(i,r,o)=>{const a=t(i,r),l=e(i,r),f=r-fr(o);return r!==f&&o[f]!==void 0&&l===e(o[f],f)?a:n(a,l)}}const to=Object.getPrototypeOf(Uint8Array),N4=Object.prototype.toString,xg=Symbol("reindex");function ee(t,e,n){const i=typeof e;return i==="string"?yh(t,kg(e),n):i==="function"?yh(t,e,n):i==="number"||e instanceof Date||i==="boolean"?Xt(t,So(e),n):typeof(e==null?void 0:e.transform)=="function"?wh(e.transform(t),n):D4(wh(e,n),t==null?void 0:t[xg])}function D4(t,e){return e?ku(t,e):t}function yh(t,e,n){return Xt(t,(n==null?void 0:n.prototype)instanceof to?F4(e):e,n)}function wh(t,e){return e===void 0?Ee(t):t instanceof e?t:e.prototype instanceof to&&!(t instanceof to)?e.from(t,vu):e.from(t)}function F4(t){return(e,n)=>vu(t(e,n))}const ca=[null],kg=t=>e=>e[t],Cl={transform:Ln},fe={transform:t=>t},L4=()=>1,I4=()=>!0,ue=t=>t==null?t:`${t}`,zt=t=>t==null?t:+t,wu=t=>t?t[0]:void 0,Cs=t=>t?t[1]:void 0,So=t=>()=>t;function R4(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Ki(n,e,i)}function fn(t){return t instanceof to?t:Xt(t,vu,Float64Array)}function vu(t){return t==null?NaN:Number(t)}function P4(t){return Xt(t,Mg)}function Mg(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?bg(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function Dn(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:El(t)?[void 0,t]:[t,void 0]}function ce(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function Sg(t,e,n){if(t!=null)return en(t,e,n)}function en(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Ee(t){return t==null||t instanceof Array||t instanceof to?t:Array.from(t)}function Xt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function eo(t,e=Array){return t instanceof e?t.slice():e.from(t)}function O4({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function Tg({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function U4(t){return O4(t)||Tg(t)||t.interval!==void 0}function ri(t){return(t==null?void 0:t.toString)===N4}function As(t){return ri(t)&&(t.type!==void 0||t.domain!==void 0)}function Al(t){return ri(t)&&typeof t.transform!="function"}function lr(t){return Al(t)&&t.value===void 0&&t.channel===void 0}function z4(t,e,n,i=fe){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function To(t,e){return t===void 0&&e===void 0?[wu,Cs]:[t,e]}function xu({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=Dn(e)),t===void 0&&([t]=Dn(n)),t}function Ln(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function ku(t,e){return Xt(e,n=>t[n],t.constructor)}function B4(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function di(t){return t!==null&&typeof t=="object"?t.valueOf():t}function q4(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Ga(t){let e;return[{transform:()=>e,label:Fi(t)},n=>e=n]}function vn(t){return t==null?[t]:Ga(t)}function Fi(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function Es(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return Se(i)||Se(r)?Xt(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):Xt(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function Cg(t,e){const n=Ag(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Xt(t,n):t}function Ag(t,e){const n=Mu(t,e);return n&&(i=>ei(i)?n.floor(i):i)}function Mu(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>Vf(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>Vf(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?wg:yu)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function gr(t,e){if(t=Mu(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function Y4(t,e){if(t=gr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function W4(t){return Wi(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Wi(t){return typeof(t==null?void 0:t.range)=="function"}function Co(t){return t===void 0||Al(t)?t:{value:t}}function H4(t){return t==null?null:{transform:e=>ee(e,t,Float64Array),label:Fi(t)}}function oi(t){return t&&typeof t[Symbol.iterator]=="function"}function Eg(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function vh(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function Se(t){for(const e of t)if(e!=null)return e instanceof Date}function V4(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&bg(e)}function G4(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function j4(t){for(const e of t)if(e!=null)return typeof e=="number"}function vf(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const X4=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function El(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||X4.has(t))}function Z4(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function be(t){return t==null||no(t)}function no(t){return/^\s*none\s*$/i.test(t)}function K4(t){return/^\s*round\s*$/i.test(t)}function $s(t,e){return Sg(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function $l(t="middle"){return $s(t,"frameAnchor")}function fr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return lo(e,n)}function J4(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function Q4(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function $g(t){return oi(t)?Q4(t):t}const sn=Symbol("position"),In=Symbol("color"),Ao=Symbol("radius"),Eo=Symbol("length"),$o=Symbol("opacity"),Nl=Symbol("symbol"),Ng=Symbol("projection"),Wt=new Map([["x",sn],["y",sn],["fx",sn],["fy",sn],["r",Ao],["color",In],["opacity",$o],["symbol",Nl],["length",Eo],["projection",Ng]]);function t8(t){return t===sn||t===Ng}function e8(t){return t===sn||t===Ao||t===Eo||t===$o}const n8=Math.sqrt(3),i8=2/n8,r8={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*i8,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},Su=new Map([["asterisk",Vm],["circle",Qr],["cross",Gm],["diamond",Xm],["diamond2",Zm],["hexagon",r8],["plus",Km],["square",Jm],["square2",Qm],["star",eg],["times",og],["triangle",ng],["triangle2",ig],["wye",rg]]);function Tu(t){return t&&typeof t.draw=="function"}function o8(t){return Tu(t)?!0:typeof t!="string"?!1:Su.has(t.toLowerCase())}function Cu(t){if(t==null||Tu(t))return t;const e=Su.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function a8(t){if(t==null||Tu(t))return[void 0,t];if(typeof t=="string"){const e=Su.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function Dl({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=Dg(t)),e!=null&&!lr(e)&&(i=xf(i,Au(e))),n&&(i=xf(i,Fg))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||lr(e))&&{sort:e},transform:xf(i,a)}}function sr({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=Dg(t)),e!=null&&!lr(e)&&(i=kf(i,Au(e))),n&&(i=kf(i,Fg))),{...r,...(e===null||lr(e))&&{sort:e},initializer:kf(i,o)}}function xf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,Ee(n),i,r)}}function kf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,l,f,s,u,c;return{data:l=n,facets:f=i,channels:a}=t.call(this,n,i,r,...o),{data:u=l,facets:c=f,channels:s}=e.call(this,l,f,{...r,...a},...o),{data:u,facets:c,channels:{...a,...s}}}}function l8(t,e){return(t.initializer!=null?sr:Dl)(t,e)}function Dg(t){return(e,n)=>{const i=ee(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function Fg(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function f8(t,{sort:e,...n}={}){return{...(Al(t)&&t.channel!==void 0?sr:l8)(n,Au(t)),sort:lr(e)?e:null}}function Au(t){return(typeof t=="function"&&t.length!==1?s8:u8)(t)}function s8(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function u8(t){let e,n;({channel:e,value:t,order:n}={...Co(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Va:Qe),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Qe;break;case"descending":n=Va;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let l;if(e===void 0)l=ee(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const f=(s,u)=>n(l[s],l[u]);return{data:r,facets:o.map(s=>s.slice().sort(f))}}}function Xo(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function c8(t,e,n=Lg){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",_8]),e.href!=null&&t.href===void 0&&i.push(["href",$u]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?h8(r):n(r,o,e))}function Lg(t,e,n,i=Ig){let r;ri(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,l]=Ga(o.label);let f;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),f=l([])},scope(s,u){o.scope(s,u)},reduce(s,u){f.push(o.reduce(s,u))}}}function h8(t){return{name:t,initialize(){},scope(){},reduce(){}}}function Ig(t,e,n,i=Eu){const r=q4(t,n),o=i(e,r);let a,l;return{label:Fi(o===ja?null:r,o.label),initialize(f){a=r===void 0?f:ee(f,r),o.scope==="data"&&(l=o.reduceIndex(Ln(f),a))},scope(f,s){o.scope===f&&(l=o.reduceIndex(s,a))},reduce(f,s){return o.scope==null?o.reduceIndex(f,a,s):o.reduceIndex(f,a,l,s)}}}function xh(t,e){return e?Wr(nl(t,n=>e[n]),wu):[[,t]]}function Eu(t,e,n=d8){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ri(t))return g8(t);if(typeof t=="function")return b8(t);if(/^p\d{2}$/i.test(t))return xn(R4(t));switch(`${t}`.toLowerCase()){case"first":return $u;case"last":return y8;case"identity":return Rg;case"count":return ja;case"distinct":return w8;case"sum":return e==null?ja:v8;case"proportion":return Mh(e,"data");case"proportion-facet":return Mh(e,"facet");case"deviation":return xn(fo);case"min":return xn(An);case"min-index":return xn(p_);case"max":return xn(ke);case"max-index":return xn(d_);case"mean":return kh(Kn);case"median":return kh(Hf);case"variance":return xn(Zi);case"mode":return xn(__)}return n(t)}function d8(t){throw new Error(`invalid reduce: ${t}`)}function p8(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function m8(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>Qe(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function g8(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function b8(t){return{reduceIndex(e,n,i){return t(ku(n,e),i)}}}function xn(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function kh(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return Se(n)?new Date(i):i}}}const Rg={reduceIndex(t,e){return ku(e,t)}},$u={reduceIndex(t,e){return e[t[0]]}},_8={reduceIndex(t,e){const i=Wr(Vi(t,o=>o.length,o=>e[o]),Cs),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[`… ${o.length.toLocaleString("en-US")} more`,Jn(o,Cs)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},y8={reduceIndex(t,e){return e[t[t.length-1]]}},ja={label:"Frequency",reduceIndex(t){return t.length}},w8={label:"Distinct",reduceIndex(t,e){const n=new el;for(const i of t)n.add(e[i]);return n.size}},v8=xn(Jn);function Mh(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>Jn(n,o=>i[o])/r}}function io(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=Fi(i)},l){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),Pg(l,{scale:e,type:n,value:ee(t,i),label:a,filter:r,hint:o})}function x8(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,io(e,i,n)]))}function k8(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:Xt(o,a)]}));return n.channels=t,n}function Pg(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&vf(i,El)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&vf(i,Z4)?null:"opacity";break;case"symbol":n!==!0&&vf(i,o8)?(e.scale=null,e.value=Xt(i,Cu)):e.scale="symbol";break;default:e.scale=Wt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!Wt.has(n))throw new Error(`unknown scale: ${n}`);return e}function M8(t,e,n,i,r){const{order:o,reverse:a,reduce:l=!0,limit:f}=r;for(const s in r){if(!Wt.has(s))continue;let{value:u,order:c=o,reverse:h=a,reduce:p=l,limit:d=f}=Co(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),c=c===void 0?m!==(u==="width"||u==="height")?Ug:Og:C8(c),p==null||p===!1)continue;const b=s==="fx"||s==="fy"?T8(e,i[s]):S8(n,s);if(!b)throw new Error(`missing channel for scale: ${s}`);const _=b.value,[g=0,v=1/0]=oi(d)?d:d<0?[d]:[0,d];if(u==null)b.domain=()=>{let w=Array.from(new el(_));return h&&(w=w.reverse()),(g!==0||v!==1/0)&&(w=w.slice(g,v)),w};else{const w=u==="data"?t:u==="height"?Sh(n,"y1","y2"):u==="width"?Sh(n,"x1","x2"):Ns(n,u,u==="y"?"y2":u==="x"?"x2":void 0),k=Eu(p===!0?"max":p,w);b.domain=()=>{let x=l_(Ln(_),S=>k.reduceIndex(S,w),S=>_[S]);return c&&x.sort(c),h&&x.reverse(),(g!==0||v!==1/0)&&(x=x.slice(g,v)),x.map(wu)}}}}function S8(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function T8(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const l of t[o])r[l]=a}return e}function Sh(t,e,n){const i=Ns(t,e),r=Ns(t,n);return Xt(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function Ns(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function C8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return Og;case"descending":return Ug}throw new Error(`invalid order: ${t}`)}function Og([t,e],[n,i]){return Qe(e,i)||Qe(t,n)}function Ug([t,e],[n,i]){return Va(e,i)||Qe(t,n)}function Th(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function A8(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const E8=A8(t=>new Intl.NumberFormat(t));function $8(t="en-US"){const e=E8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function N8(t){return M4(t,"Invalid Date")}function D8(t="en-US"){const e=$8(t);return n=>(n instanceof Date?N8:typeof n=="number"?e:ue)(n)}const Ei=D8();let Ds=0,Fs;function F8(){const t=Ds;return Ds=0,Fs=void 0,t}function Vn(t){t!==Fs&&(Fs=t,console.warn(t),++Ds)}const ye=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let L8=0;function Ch(){return`plot-clip-${++L8}`}function I8(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:l,fillOpacity:f,stroke:s,strokeWidth:u,strokeOpacity:c,strokeLinejoin:h,strokeLinecap:p,strokeMiterlimit:d,strokeDasharray:m,strokeDashoffset:b,opacity:_,mixBlendMode:g,imageFilter:v,paintOrder:w,pointerEvents:k,shapeRendering:x,channels:S},{ariaLabel:T,fill:E="currentColor",fillOpacity:F,stroke:C="none",strokeOpacity:L,strokeWidth:R,strokeLinecap:G,strokeLinejoin:A,strokeMiterlimit:B,paintOrder:z}){E===null&&(l=null,f=null),C===null&&(s=null,c=null),be(E)?!be(C)&&(!be(l)||S!=null&&S.fill)&&(C="none"):be(C)&&(!be(s)||S!=null&&S.stroke)&&(E="none");const[J,Z]=Dn(l,E),[X,P]=ce(f,F),[j,Q]=Dn(s,C),[at,tt]=ce(c,L),[V,q]=ce(_);no(Q)||(u===void 0&&(u=R),p===void 0&&(p=G),h===void 0&&(h=A),d===void 0&&!K4(h)&&(d=B),!no(Z)&&w===void 0&&(w=z));const[D,$]=ce(u);return E!==null&&(t.fill=re(Z,"currentColor"),t.fillOpacity=Tr(P,1)),C!==null&&(t.stroke=re(Q,"none"),t.strokeWidth=Tr($,1),t.strokeOpacity=Tr(tt,1),t.strokeLinejoin=re(h,"miter"),t.strokeLinecap=re(p,"butt"),t.strokeMiterlimit=Tr(d,4),t.strokeDasharray=re(m,"none"),t.strokeDashoffset=re(b,"0")),t.target=ue(a),t.ariaLabel=ue(T),t.ariaDescription=ue(r),t.ariaHidden=ue(o),t.opacity=Tr(q,1),t.mixBlendMode=re(g,"normal"),t.imageFilter=re(v,"none"),t.paintOrder=re(w,"normal"),t.pointerEvents=re(k,"auto"),t.shapeRendering=re(x,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:J,scale:"auto",optional:!0},fillOpacity:{value:X,scale:"auto",optional:!0},stroke:{value:j,scale:"auto",optional:!0},strokeOpacity:{value:at,scale:"auto",optional:!0},strokeWidth:{value:D,optional:!0},opacity:{value:V,scale:"auto",optional:!0}}}function R8(t,e){e&&t.filter(n=>mu(e[n])).append("title").call(O8,e)}function P8(t,e){e&&t.filter(([n])=>mu(e[n])).append("title").call(U8,e)}function O8(t,e){e&&t.text(n=>Ei(e[n]))}function U8(t,e){e&&t.text(([n])=>Ei(e[n]))}function Rn(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&wt(t,"aria-label",h=>i[h]),o&&wt(t,"fill",h=>o[h]),a&&wt(t,"fill-opacity",h=>a[h]),l&&wt(t,"stroke",h=>l[h]),f&&wt(t,"stroke-opacity",h=>f[h]),s&&wt(t,"stroke-width",h=>s[h]),u&&wt(t,"opacity",h=>u[h]),c&&Yg(t,h=>c[h],e),n||R8(t,r)}function zg(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&wt(t,"aria-label",([h])=>i[h]),o&&wt(t,"fill",([h])=>o[h]),a&&wt(t,"fill-opacity",([h])=>a[h]),l&&wt(t,"stroke",([h])=>l[h]),f&&wt(t,"stroke-opacity",([h])=>f[h]),s&&wt(t,"stroke-width",([h])=>s[h]),u&&wt(t,"opacity",([h])=>u[h]),c&&Yg(t,([h])=>c[h],e),n||P8(t,r)}function z8({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:l,href:f},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,l,f].filter(u=>u!==void 0)}function B8(t,e,n){const i=nl(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Vn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*Bg(t,e,n,i){const{z:r}=n,{z:o}=i,a=z8(i,n),l=[...e,...a];for(const f of o?B8(t,o,r):[t]){let s,u;t:for(const c of f){for(const h of l)if(!ei(h[c])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(h=>di(h[c])),u=[c];continue}u.push(c);for(let h=0;h<a.length;++h)if(di(a[h][c])!==s[h]){yield u,s=a.map(d=>di(d[c])),u=[c];continue t}}u&&(yield u)}}function qg(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=en(t,"clip",["frame","sphere"])),t}function q8(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:l,marginLeft:f,marginRight:s,marginTop:u,marginBottom:c}=n,h=Ch();r=`url(#${h})`,t=Gt("svg:g",i).call(p=>p.append("svg:clipPath").attr("id",h).append("rect").attr("x",f).attr("y",u).attr("width",a-s-f).attr("height",l-u-c)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const l=Ch();r=`url(#${l})`,t.append("clipPath").attr("id",l).append("path").attr("d",cl(a)({type:"Sphere"}));break}}wt(t,"aria-label",e.ariaLabel),wt(t,"aria-description",e.ariaDescription),wt(t,"aria-hidden",e.ariaHidden),wt(t,"clip-path",r)}function Ye(t,e,n,i){q8(t,e,n,i),wt(t,"fill",e.fill),wt(t,"fill-opacity",e.fillOpacity),wt(t,"stroke",e.stroke),wt(t,"stroke-width",e.strokeWidth),wt(t,"stroke-opacity",e.strokeOpacity),wt(t,"stroke-linejoin",e.strokeLinejoin),wt(t,"stroke-linecap",e.strokeLinecap),wt(t,"stroke-miterlimit",e.strokeMiterlimit),wt(t,"stroke-dasharray",e.strokeDasharray),wt(t,"stroke-dashoffset",e.strokeDashoffset),wt(t,"shape-rendering",e.shapeRendering),wt(t,"filter",e.imageFilter),wt(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;wt(t,"pointer-events",r)}function We(t,e){Y8(t,"mix-blend-mode",e.mixBlendMode),wt(t,"opacity",e.opacity)}function Yg(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Ji.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Ji.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function wt(t,e,n){n!=null&&t.attr(e,n)}function Y8(t,e,n){n!=null&&t.style(e,n)}function Ne(t,e,{x:n,y:i},r=ye,o=ye){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function re(t,e){if((t=ue(t))!==e)return t}function Tr(t,e){if((t=zt(t))!==e)return t}const W8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Nu(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!W8.test(t))throw new Error(`invalid class name: ${t}`);return t}function Du(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function No({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function Fu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:qg(n)}}function Gt(t,{document:e}){return Or(ol(t).call(e.documentElement))}const Wg=Math.PI,_n=2*Wg,Ah=.618;function H8({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,f,s="frame";if(ri(t)){let k;if({type:t,domain:f,inset:k,insetTop:n=k!==void 0?k:n,insetRight:i=k!==void 0?k:i,insetBottom:r=k!==void 0?k:r,insetLeft:o=k!==void 0?k:o,clip:s=s,...l}=t,t==null)return}typeof t!="function"&&({type:t}=Hg(t));const{width:u,height:c,marginLeft:h,marginRight:p,marginTop:d,marginBottom:m}=a,b=u-h-p-o-i,_=c-d-m-n-r;if(t=t==null?void 0:t({width:b,height:_,clip:s,...l}),t==null)return;s=V8(s,h,d,u-p,c-m);let g=h+o,v=d+n,w;if(f!=null){const[[k,x],[S,T]]=cl(t).bounds(f),E=Math.min(b/(S-k),_/(T-x));E>0?(g-=(E*(k+S)-b)/2,v-=(E*(x+T)-_)/2,w=ys({point(F,C){this.stream.point(F*E+g,C*E+v)}})):Vn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=g===0&&v===0?Vg():ys({point(k,x){this.stream.point(k+g,x+v)}})),{stream:k=>t.stream(w.stream(s(k)))}}function Hg(t){switch(`${t}`.toLowerCase()){case"albers-usa":return He(e6,.7463,.4673);case"albers":return Zo(H1,.7463,.4673);case"azimuthal-equal-area":return He(n6,4,4);case"azimuthal-equidistant":return He(i6,_n,_n);case"conic-conformal":return Zo(a6,_n,_n);case"conic-equal-area":return Zo(Ia,6.1702,2.9781);case"conic-equidistant":return Zo(s6,7.312,3.6282);case"equal-earth":return He(c6,5.4133,2.6347);case"equirectangular":return He(l6,_n,Wg);case"gnomonic":return He(h6,3.4641,3.4641);case"identity":return{type:Vg};case"reflect-y":return{type:G8};case"mercator":return He(r6,_n,_n);case"orthographic":return He(d6,2,2);case"stereographic":return He(p6,2,2);case"transverse-mercator":return He(m6,_n,_n);default:throw new Error(`unknown projection type: ${t}`)}}function V8(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return E1(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function He(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:l})=>{var s,u,c;const f=t();return a!=null&&((s=f.precision)==null||s.call(f,a)),o!=null&&((u=f.rotate)==null||u.call(f,o)),typeof l=="number"&&((c=f.clipAngle)==null||c.call(f,l)),f.scale(Math.min(i/e,r/n)),f.translate([i/2,r/2]),f},aspectRatio:n/e}}function Zo(t,e,n){const{type:i,aspectRatio:r}=He(t,e,n);return{type:o=>{const{parallels:a,domain:l,width:f,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),l===void 0&&u.fitSize([f,s],{type:"Sphere"})),u},aspectRatio:r}}const Vg=So({stream:t=>t}),G8=So(ys({point(t,e){this.stream.point(t,-e)}}));function j8(t,e,n,i){const r=n[t],o=n[e],a=r.length,l=n[t]=new Float64Array(a).fill(NaN),f=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(c,h){l[s]=c,f[s]=h}});for(s=0;s<a;++s)u.point(r[s],o[s])}function X8({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(ri(t)&&(t=t.type),t!=null)}function Z8(t){if(typeof(t==null?void 0:t.stream)=="function")return Ah;if(ri(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Hg(t);if(e)return e}return Ah}}function K8(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)ui(a,o);return[i,r]}const J8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Gg=new Map([["accent",O5],["category10",P5],["dark2",U5],["observable10",J8],["paired",z5],["pastel1",B5],["pastel2",q5],["set1",Y5],["set2",W5],["set3",H5],["tableau10",V5]]);function Q8(t){return t!=null&&Gg.has(`${t}`.toLowerCase())}const Eh=new Map([...Gg,["brbg",yn(Np,Dp)],["prgn",yn(Fp,Lp)],["piyg",yn(Ip,Rp)],["puor",yn(Pp,Op)],["rdbu",yn(Ms,Ua)],["rdgy",yn(Up,zp)],["rdylbu",yn(Ss,za)],["rdylgn",yn(Bp,qp)],["spectral",yn(Yp,Wp)],["burd",$h(Ms,Ua)],["buylrd",$h(Ss,za)],["blues",Jt(mm,gm)],["greens",Jt(bm,_m)],["greys",Jt(ym,wm)],["oranges",Jt(Sm,Tm)],["purples",Jt(vm,xm)],["reds",Jt(km,Mm)],["turbo",wn(Fm)],["viridis",wn(Lm)],["magma",wn(Im)],["inferno",wn(Rm)],["plasma",wn(Pm)],["cividis",wn(Cm)],["cubehelix",wn(Am)],["warm",wn(Em)],["cool",wn($m)],["bugn",Jt(Hp,Vp)],["bupu",Jt(Gp,jp)],["gnbu",Jt(Xp,Zp)],["orrd",Jt(Kp,Jp)],["pubu",Jt(em,nm)],["pubugn",Jt(Qp,tm)],["purd",Jt(im,rm)],["rdpu",Jt(om,am)],["ylgn",Jt(sm,um)],["ylgnbu",Jt(lm,fm)],["ylorbr",Jt(cm,hm)],["ylorrd",Jt(dm,pm)],["rainbow",Nh(Nm)],["sinebow",Nh(Dm)]]);function Jt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ze(e,n):t[n])}function yn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ze(e,n):t[n])}function $h(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ze(i=>e(1-i),n):t[n].slice().reverse())}function wn(t){return({length:e})=>Ze(t,Math.max(2,Math.floor(e)))}function Nh(t){return({length:e})=>Ze(t,Math.floor(e)+1).slice(0,-1)}function jg(t){const e=`${t}`.toLowerCase();if(!Eh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return Eh.get(e)}function Fl(t,e){const n=jg(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function t7(t,e="greys"){const n=new Set,[i,r]=Fl(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const Dh=new Map([["brbg",Dp],["prgn",Lp],["piyg",Rp],["puor",Op],["rdbu",Ua],["rdgy",zp],["rdylbu",za],["rdylgn",qp],["spectral",Wp],["burd",t=>Ua(1-t)],["buylrd",t=>za(1-t)],["blues",gm],["greens",_m],["greys",wm],["purples",xm],["reds",Mm],["oranges",Tm],["turbo",Fm],["viridis",Lm],["magma",Im],["inferno",Rm],["plasma",Pm],["cividis",Cm],["cubehelix",Am],["warm",Em],["cool",$m],["bugn",Vp],["bupu",jp],["gnbu",Zp],["orrd",Jp],["pubugn",tm],["pubu",nm],["purd",rm],["rdpu",am],["ylgnbu",fm],["ylgn",um],["ylorbr",hm],["ylorrd",pm],["rainbow",Nm],["sinebow",Dm]]);function Lu(t){const e=`${t}`.toLowerCase();if(!Dh.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Dh.get(e)}const e7=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function n7(t){return t!=null&&e7.has(`${t}`.toLowerCase())}const Xg=t=>e=>t(1-e),Mf=[0,1],Fh=new Map([["number",ae],["rgb",Mi],["hsl",Yw],["hcl",Vw],["lab",Ww]]);function Zg(t){const e=`${t}`.toLowerCase();if(!Fh.has(e))throw new Error(`unknown interpolator: ${e}`);return Fh.get(e)}function Do(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:l=Jg(t,n),unknown:f,round:s,scheme:u,interval:c,range:h=Wt.get(t)===Ao?d7(n,l):Wt.get(t)===Eo?p7(n,l):Wt.get(t)===$o?Mf:void 0,interpolate:p=Wt.get(t)===In?u==null&&h!==void 0?Mi:Lu(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?Xs:ae,reverse:d}){if(c=gr(c,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof p!="function"&&(p=Zg(p)),d=!!d,h!==void 0){const m=(l=Ee(l)).length,b=(h=Ee(h)).length;if(m!==b){if(p.length===1)throw new Error("invalid piecewise interpolator");p=fl(p,h),h=void 0}}if(p.length===1?(d&&(p=Xg(p),d=!1),h===void 0&&(h=Float64Array.from(l,(m,b)=>b/(l.length-1)),h.length===2&&(h=Mf)),e.interpolate((h===Mf?So:Ru)(p))):e.interpolate(p),a){const[m,b]=Re(l);(m>0||b<0)&&(l=eo(l),fr(l)!==Math.sign(m)?l[l.length-1]=0:l[0]=0)}return d&&(l=ba(l)),e.domain(l).unknown(f),r&&(e.nice(i7(r,i)),l=e.domain()),h!==void 0&&e.range(h),o&&e.clamp(o),{type:i,domain:l,range:h,scale:e,interpolate:p,interval:c}}function i7(t,e){return t===!0?void 0:typeof t=="number"?t:Y4(t,e)}function r7(t,e,n){return Do(t,au(),e,n)}function o7(t,e,n){return Kg(t,e,{...n,exponent:.5})}function Kg(t,e,{exponent:n=1,...i}){return Do(t,up().exponent(n),e,{...i,type:"pow"})}function a7(t,e,{base:n=10,domain:i=m7(e),...r}){return Do(t,ap().base(n),e,{...r,domain:i})}function l7(t,e,{constant:n=1,...i}){return Do(t,fp().constant(n),e,i)}function f7(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=g7(e),unknown:l,interpolate:f,reverse:s}){return n===void 0&&(n=f!==void 0?Ze(f,r):Wt.get(t)===In?Fl(o,r):void 0),a.length>0&&(a=cp(a,n===void 0?{length:r}:n).quantiles()),Iu(t,e,{domain:a,range:n,reverse:s,unknown:l})}function s7(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Jg(t,e),unknown:a,interpolate:l,reverse:f}){const[s,u]=Re(o);let c;return n===void 0?(c=Hr(s,u,i),c[0]<=s&&c.splice(0,1),c[c.length-1]>=u&&c.pop(),i=c.length+1,n=l!==void 0?Ze(l,i):Wt.get(t)===In?Fl(r,i):void 0):(c=Ze(ae(s,u),i+1).slice(1,-1),s instanceof Date&&(c=c.map(h=>new Date(h)))),fr(Ee(o))<0&&c.reverse(),Iu(t,e,{domain:c,range:n,reverse:f,unknown:a})}function Iu(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?Ze(o,n.length+1):Wt.get(t)===In?Fl(r,n.length+1):void 0,reverse:l}){n=Ee(n);const f=fr(n);if(!isNaN(f)&&!u7(n,f))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=ba(a)),{type:"threshold",scale:hp(f<0?ba(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function u7(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=lo(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function c7(t){return{type:"identity",scale:e8(Wt.get(t))?ip():e=>e}}function ro(t,e=gg){return t.length?[An(t,({value:n})=>n===void 0?n:An(n,e)),ke(t,({value:n})=>n===void 0?n:ke(n,e))]:[0,1]}function Jg(t,e){const n=Wt.get(t);return(n===Ao||n===$o||n===Eo?h7:ro)(e)}function h7(t){return[0,t.length?ke(t,({value:e})=>e===void 0?e:ke(e,gg)):1]}function d7(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Ki(t,.5,({value:a})=>a===void 0?NaN:Ki(a,.25,Sl)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ke(r);return o<1?r.map(a=>a*o):r}function p7(t,e){const n=Hf(t,({value:o})=>o===void 0?NaN:Hf(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ke(i);return r<1?i.map(o=>o*r):i}function m7(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return ro(t,Sl);if(n<0)return ro(t,gu)}return[1,10]}function g7(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function Ru(t){return(e,n)=>i=>t(e+i*(n-e))}function Ll(t,e,n,i,{type:r,nice:o,clamp:a,domain:l=ro(i),unknown:f,pivot:s=0,scheme:u,range:c,symmetric:h=!0,interpolate:p=Wt.get(t)===In?u==null&&c!==void 0?Mi:Lu(u!==void 0?u:"rdbu"):ae,reverse:d}){s=+s,l=Ee(l);let[m,b]=l;if(l.length>2&&Vn(`Warning: the diverging ${t} scale domain contains extra elements.`),lo(m,b)<0&&([m,b]=[b,m],d=!d),m=Math.min(m,s),b=Math.max(b,s),typeof p!="function"&&(p=Zg(p)),c!==void 0&&(p=p.length===1?Ru(p)(...c):fl(p,c)),d&&(p=Xg(p)),h){const _=n.apply(s),g=_-n.apply(m),v=n.apply(b)-_;g<v?m=n.invert(_-v):g>v&&(b=n.invert(_+g))}return e.domain([m,s,b]).unknown(f).interpolator(p),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,b],pivot:s,interpolate:p,scale:e}}function b7(t,e,n){return Ll(t,Cp(),v7,e,n)}function _7(t,e,n){return Qg(t,e,{...n,exponent:.5})}function Qg(t,e,{exponent:n=1,...i}){return Ll(t,$p().exponent(n=+n),M7(n),e,{...i,type:"diverging-pow"})}function y7(t,e,{base:n=10,pivot:i=1,domain:r=ro(e,i<0?gu:Sl),...o}){return Ll(t,Ap().base(n=+n),x7,e,{domain:r,pivot:i,...o})}function w7(t,e,{constant:n=1,...i}){return Ll(t,Ep().constant(n=+n),S7(n),e,i)}const v7={apply(t){return t},invert(t){return t}},x7={apply:Math.log,invert:Math.exp},k7={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function M7(t){return t===.5?k7:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function S7(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function t2(t,e,n,i){return Do(t,e,n,i)}function T7(t,e,n){return t2(t,I5(),e,n)}function C7(t,e,n){return t2(t,R5(),e,n)}const Fo=Symbol("ordinal");function e2(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:l,hint:f}){return r=gr(r,i),o===void 0&&(o=i2(n,r,t)),(i==="categorical"||i===Fo)&&(i="ordinal"),l&&(o=ba(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:f,interval:r}}function A7(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:l,...f}){i=gr(i,n),r===void 0&&(r=i2(e,i,t));let s;if(Wt.get(t)===Nl)s=N7(e),o=o===void 0?D7(s):Xt(o,Cu);else if(Wt.get(t)===In&&(o===void 0&&(n==="ordinal"||n===Fo)&&(o=t7(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const u=Lu(a),c=o[0],h=o[1]-o[0];o=({length:p})=>Ze(d=>u(c+h*d),p)}else o=jg(a);if(l===vs)throw new Error(`implicit unknown on ${t} scale is not supported`);return e2(t,ou().unknown(l),e,{...f,type:n,domain:r,range:o,hint:s})}function E7(t,e,{align:n=.5,padding:i=.5,...r}){return n2(g6().align(n).padding(i),e,r,t)}function $7(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return n2(ml().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function n2(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=e2(i,t,e,n),t.round=r,t}function i2(t,e,n){const i=new el;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=Re(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&Wt.get(n)===sn)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Wr(i,Qe)}function Lh(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function N7(t){return{fill:Lh(t,"fill"),stroke:Lh(t,"stroke")}}function D7(t){return be(t.fill)?a4:o4}function Ls(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:l,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,facet:{label:d=e}={},...m}={}){const b={};for(const[_,g]of t){const v=m[_],w=P7(_,g,{round:Wt.get(_)===sn?l:void 0,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,...v});if(w){let{label:k=_==="fx"||_==="fy"?d:e,percent:x,transform:S,inset:T,insetTop:E=T!==void 0?T:_==="y"?i:0,insetRight:F=T!==void 0?T:_==="x"?r:0,insetBottom:C=T!==void 0?T:_==="y"?o:0,insetLeft:L=T!==void 0?T:_==="x"?a:0}=v||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");w.percent=!!x,w.label=k===void 0?L7(g,w):k,w.transform=S,_==="x"||_==="fx"?(w.insetLeft=+L,w.insetRight=+F):(_==="y"||_==="fy")&&(w.insetTop=+E,w.insetBottom=+C),b[_]=w}}return b}function Ih(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:l,label:f}=r;e[i]=q7(r),n[i]=o,o.type=a,l!=null&&(o.interval=l),f!=null&&(o.label=f)}return n}function F7(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?Pu(e):e;r&&Rh(r,a),o&&Ph(o,a);const l=r||o?r2(t,e):e;n&&Rh(n,l),i&&Ph(i,l)}function L7(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!Li(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function I7(t){return Math.sign(fr(t.domain()))*Math.sign(fr(t.range()))}function Pu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:l,marginRight:f,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,f),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function r2({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Pu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:l,height:e?e.scale.bandwidth()+i+o:f,facet:{width:l,height:f}}}function Rh(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,l=o+n,f=r-a-i;t.range=[l,Math.max(l,f)],Li(t)||(t.range=a2(t)),t.scale.range(t.range)}o2(t)}function Ph(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,l=o+n,f=r-a-i;t.range=[Math.max(l,f),l],Li(t)?t.range.reverse():t.range=a2(t),t.scale.range(t.range)}o2(t)}function o2(t){t.round===void 0&&U7(t)&&R7(t)<=30&&t.scale.round(!0)}function R7({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,l=Math.abs(i-n)/Math.max(1,a+o*2);return(l-Math.floor(l))*a}function a2(t){const e=t.scale.domain().length+l2(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function P7(t,e=[],n={}){const i=O7(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Li({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(Se)?Vn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${zi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${zi(i)}".`):r.some(V4)?Vn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${zi(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${zi(i)}".`):r.some(G4)&&Vn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${zi(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${zi(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Ko(e,n,fn);break;case"identity":switch(Wt.get(t)){case sn:n=Ko(e,n,fn);break;case Nl:n=Ko(e,n,z7);break}break;case"utc":case"time":n=Ko(e,n,P4);break}switch(i){case"diverging":return b7(t,e,n);case"diverging-sqrt":return _7(t,e,n);case"diverging-pow":return Qg(t,e,n);case"diverging-log":return y7(t,e,n);case"diverging-symlog":return w7(t,e,n);case"categorical":case"ordinal":case Fo:return A7(t,e,n);case"cyclical":case"sequential":case"linear":return r7(t,e,n);case"sqrt":return o7(t,e,n);case"threshold":return Iu(t,e,n);case"quantile":return f7(t,e,n);case"quantize":return s7(t,e,n);case"pow":return Kg(t,e,n);case"log":return a7(t,e,n);case"symlog":return l7(t,e,n);case"utc":return C7(t,e,n);case"time":return T7(t,e,n);case"point":return E7(t,e,n);case"band":return $7(t,e,n);case"identity":return c7(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function zi(t){return typeof t=="symbol"?t.description:t}function Oh(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Uh={toString:()=>"projection"};function O7(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:l}){if(n=Oh(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=Uh);for(const s of e){const u=Oh(s.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===Uh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const f=Wt.get(t);if(f===Ao)return"sqrt";if(f===$o||f===Eo)return"linear";if(f===Nl)return"ordinal";if((i||r||[]).length>2)return Sf(f);if(i!==void 0){if(vh(i))return Sf(f);if(Se(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(vh))return Sf(f);if(s.some(Se))return"utc"}if(f===In){if(a!=null||n7(o))return"diverging";if(Q8(o))return"categorical"}return"linear"}function Sf(t){switch(t){case sn:return"point";case In:return Fo;default:return"ordinal"}}function Li({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Fo}function l2({type:t}){return t==="threshold"}function U7({type:t}){return t==="point"||t==="band"}function ur(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Ko(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function z7(t){return Xt(t,Cu)}function B7(t){return e=>{if(!Wt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function q7({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:l,pivot:f}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:eo(n),...i!==void 0&&{range:eo(i)},...a!==void 0&&{transform:a},...l&&{percent:l},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...f!==void 0&&{pivot:f,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function Y7(t,e,n={}){let i=.5-ye,r=.5+ye,o=.5+ye,a=.5-ye;for(const{marginTop:m,marginRight:b,marginBottom:_,marginLeft:g}of e)m>i&&(i=m),b>r&&(r=b),_>o&&(o=_),g>a&&(a=g);let{margin:l,marginTop:f=l!==void 0?l:i,marginRight:s=l!==void 0?l:r,marginBottom:u=l!==void 0?l:o,marginLeft:c=l!==void 0?l:a}=n;f=+f,s=+s,u=+u,c=+c;let{width:h=640,height:p=W7(t,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,f-i+u-o)}=n;h=+h,p=+p;const d={width:h,height:p,marginTop:f,marginRight:s,marginBottom:u,marginLeft:c};if(t.fx||t.fy){let{margin:m,marginTop:b=m!==void 0?m:f,marginRight:_=m!==void 0?m:s,marginBottom:g=m!==void 0?m:u,marginLeft:v=m!==void 0?m:c}=n.facet??{};b=+b,_=+_,g=+g,v=+v,d.facet={marginTop:b,marginRight:_,marginBottom:g,marginLeft:v}}return d}function W7({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:l,marginRightDefault:f,marginBottomDefault:s,marginLeftDefault:u}){const c=n?n.scale.domain().length:1,h=Z8(r);if(h){const d=i?i.scale.domain().length:1,m=(1.1*c-.1)/(1.1*d-.1)*h,b=Math.max(.1,Math.min(10,m));return Math.round((a-u-f)*b+l+s)}const p=e?Li(e)?e.scale.domain().length:Math.max(7,17/c):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const d=zh("y",e)/(zh("x",t)*o),m=i?i.scale.bandwidth():1,b=n?n.scale.bandwidth():1,_=m*(a-u-f)-t.insetLeft-t.insetRight;return(d*_+e.insetTop+e.insetBottom)/b+l+s}return!!(e||n)*Math.max(1,Math.min(60,p*c))*20+!!i*30+60}function zh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const l=e.scale.exponent();r=f=>Math.pow(f,l);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=Re(i);return Math.abs(r(a)-r(o))}function H7(t,e){const{fx:n,fy:i}=Ls(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?o_(r,o).map(([a,l],f)=>({x:a,y:l,i:f})):r?r.map((a,l)=>({x:a,i:l})):o?o.map((a,l)=>({y:a,i:l})):void 0}function V7(t,{x:e,y:n}){return e&&(e=Is(e)),n&&(n=Is(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Ou(t,{fx:e,fy:n}){const i=Ln(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Vi(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Vi(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Vi(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function G7(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function j7(t){const e=[],n=new Uint32Array(Jn(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const X7=new Map([["top",Tf],["right",Ef],["bottom",Cf],["left",Af],["top-left",Jo(Tf,Af)],["top-right",Jo(Tf,Ef)],["bottom-left",Jo(Cf,Af)],["bottom-right",Jo(Cf,Ef)],["top-empty",J7],["right-empty",e9],["bottom-empty",Q7],["left-empty",t9],["empty",n9]]);function Z7(t){if(t==null)return null;const e=X7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Bh=new WeakMap;function Is(t){let e=Bh.get(t);return e||Bh.set(t,e=new vi(Xt(t,(n,i)=>[n,i]))),e}function ai(t,e){return Is(t).get(e)}function K7(t,e,n){return e=di(e),n=di(n),t.find(i=>Object.is(di(i.x),e)&&Object.is(di(i.y),n))}function Il(t,e,n){var i;return(i=K7(t,e,n))==null?void 0:i.empty}function Tf(t,{y:e},{y:n}){return e?ai(e,n)===0:!0}function Cf(t,{y:e},{y:n}){return e?ai(e,n)===e.length-1:!0}function Af(t,{x:e},{x:n}){return e?ai(e,n)===0:!0}function Ef(t,{x:e},{x:n}){return e?ai(e,n)===e.length-1:!0}function J7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ai(e,i);if(o>0)return Il(t,n,e[o-1])}function Q7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ai(e,i);if(o<e.length-1)return Il(t,n,e[o+1])}function t9(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ai(e,n);if(o>0)return Il(t,e[o-1],i)}function e9(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ai(e,n);if(o<e.length-1)return Il(t,e[o+1],i)}function n9(t,e,{empty:n}){return n}function Jo(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function $f(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class he{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:l,fy:f,sort:s,dx:u=0,dy:c=0,margin:h=0,marginTop:p=h,marginRight:d=h,marginBottom:m=h,marginLeft:b=h,clip:_=r==null?void 0:r.clip,channels:g,tip:v,render:w}=i;if(this.data=e,this.sort=lr(s)?s:null,this.initializer=sr(i).initializer,this.transform=this.initializer?i.transform:Dl(i).transform,o===null||o===!1?this.facet=null:(this.facet=en(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===ca&&typeof l=="string"?[l]:l,this.fy=e===ca&&typeof f=="string"?[f]:f),this.facetAnchor=Z7(a),n=$g(n),g!==void 0&&(n={...i9(g),...n}),r!==void 0&&(n={...I8(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([k,x])=>{if(Al(x.value)){const{value:S,label:T=x.label,scale:E=x.scale}=x.value;x={...x,label:T,scale:E,value:S}}if(e===ca&&typeof x.value=="string"){const{value:S}=x;x={...x,value:[S]}}return[k,x]}).filter(([k,{value:x,optional:S}])=>{if(x!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${k}`)})),this.dx=+u,this.dy=+c,this.marginTop=+p,this.marginRight=+d,this.marginBottom=+m,this.marginLeft=+b,this.clip=qg(_),this.tip=r9(v),this.facet==="super"){if(l||f)throw new Error("super-faceting cannot use fx or fy");for(const k in this.channels){const{scale:x}=n[k];if(!(x!=="x"&&x!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=s2(w,this.render))}initialize(e,n,i){let r=Ee(this.data);e===void 0&&r!=null&&(e=[Ln(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=Ee(r)),e!==void 0&&(e.original=o);const a=x8(this.channels,r);return this.sort!=null&&M8(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=ei}=n[r];if(o!==null){const a=i[r];e=e.filter(l=>o(a[l]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&j8(r,o,n,i.projection)}}scale(e,n,i){const r=k8(e,n);return i.projection&&this.project(e,r,i),r}}function f2(...t){return t.plot=he.prototype.plot,t}function s2(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,l){return t.call(this,n,i,r,o,a,(f,s,u,c,h)=>e.call(this,f,s,u,c,h,l))}}function i9(t){return Object.fromEntries(Object.entries($g(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:Co(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function r9(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?en(t,"tip",["x","y","xy"]):t}function Rl(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:ri(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const qh=new WeakMap;function Uu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:l,render:f,...s}={}){return a=+a,r!=null&&(n??(n=null),l={...l,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),l={...l,py:{value:o,scale:"y"}}),{x:n,y:i,channels:l,...s,render:s2(function(u,c,h,p,d,m){d={...d,pointerSticky:!1};const b=d.ownerSVGElement,{data:_}=d.getMarkState(this);let g=qh.get(b);g||qh.set(b,g={sticky:!1,roots:[],renders:[]});let v=g.renders.push(Q)-1;const{x:w,y:k,fx:x,fy:S}=c;let T=x?x(u.fx)-p.marginLeft:0,E=S?S(u.fy)-p.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),k!=null&&k.bandwidth&&(E+=k.bandwidth()/2);const F=u.fi!=null;let C;if(F){let q=g.facetStates;q||(g.facetStates=q=new Map),C=q.get(this),C||q.set(this,C=new Map)}const[L,R]=No(this,p),{px:G,py:A}=h,B=G?q=>G[q]:c2(h,L),z=A?q=>A[q]:h2(h,R);let J,Z,X,P;function j(q,D){if(F)if(P&&(P=cancelAnimationFrame(P)),q==null)C.delete(u.fi);else{C.set(u.fi,D),P=requestAnimationFrame(()=>{P=null;for(const[$,O]of C)if(O<D||O===D&&$<u.fi){q=null;break}Q(q)});return}Q(q)}function Q(q){if(J===q&&X===g.sticky)return;J=q,X=d.pointerSticky=g.sticky;const D=J==null?[]:[J];F&&(D.fx=u.fx,D.fy=u.fy,D.fi=u.fi);const $=m(D,c,h,p,d);if(Z){if(F){const O=Z.parentNode,et=Z.getAttribute("transform"),U=$.getAttribute("transform");et?$.setAttribute("transform",et):$.removeAttribute("transform"),U?O.setAttribute("transform",U):O.removeAttribute("transform"),$.removeAttribute("aria-label"),$.removeAttribute("aria-description"),$.removeAttribute("aria-hidden")}Z.replaceWith($)}return g.roots[v]=Z=$,J==null&&(C==null?void 0:C.size)>1||d.dispatchValue(J==null?null:_[J]),$}function at(q){if(g.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[D,$]=cw(q);D-=T,$-=E;const O=D<p.marginLeft||D>p.width-p.marginRight?1:t,et=$<p.marginTop||$>p.height-p.marginBottom?1:e;let U=null,mt=a*a;for(const ot of u){const pt=O*(B(ot)-D),ft=et*(z(ot)-$),dt=pt*pt+ft*ft;dt<=mt&&(U=ot,mt=dt)}if(U!=null&&(t!==1||e!==1)){const ot=B(U)-D,pt=z(U)-$;mt=ot*ot+pt*pt}j(U,mt)}function tt(q){q.pointerType==="mouse"&&J!=null&&(g.sticky&&g.roots.some(D=>D==null?void 0:D.contains(q.target))||(g.sticky?(g.sticky=!1,g.renders.forEach(D=>D(null))):(g.sticky=!0,Q(J)),q.stopImmediatePropagation()))}function V(q){q.pointerType==="mouse"&&(g.sticky||j(null))}return b.addEventListener("pointerenter",at),b.addEventListener("pointermove",at),b.addEventListener("pointerdown",tt),b.addEventListener("pointerleave",V),Q(null)},f)}}function u2(t){return Uu(1,1,t)}function o9(t){return Uu(1,.01,t)}function Yh(t){return Uu(.01,1,t)}function c2({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function h2({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function d2(t){return Li(t)&&t.interval===void 0?void 0:"tabular-nums"}function a9(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:l=0,marginBottom:f=16+i,marginLeft:s=0,style:u,ticks:c=(r-s-l)/64,tickFormat:h,fontVariant:p=d2(t),round:d=!0,opacity:m,className:b}=e;const _=Fu(e);b=Nu(b),m=ce(m)[1],h===null&&(h=()=>null);const g=Gt("svg",_).attr("class",`${b}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(L=>L.append("style").text(`:where(.${b}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${b}-ramp text) {
  white-space: pre;
}`)).call(Du,u);let v=L=>L.selectAll(".tick line").attr("y1",a+f-o),w;const k=d?(L,R)=>L.rangeRound(R):(L,R)=>L.range(R),{type:x,domain:S,range:T,interpolate:E,scale:F,pivot:C}=t;if(E){const L=T===void 0?E:fl(E.length===1?Ru(E):E,T);w=k(F.copy(),Ze(ae(s,r-l),Math.min(S.length+(C!==void 0),T===void 0?1/0:T.length)));const R=256,G=_.document.createElement("canvas");G.width=R,G.height=1;const A=G.getContext("2d");for(let B=0,z=R-1;B<R;++B)A.fillStyle=L(B/z),A.fillRect(B,0,1,1);g.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-l).attr("height",o-a-f).attr("preserveAspectRatio","none").attr("xlink:href",G.toDataURL())}else if(x==="threshold"){const L=S,R=h===void 0?G=>G:typeof h=="string"?pr(h):h;w=k(au().domain([-1,T.length-1]),[s,r-l]),g.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",(G,A)=>w(A-1)).attr("y",a).attr("width",(G,A)=>w(A)-w(A-1)).attr("height",o-a-f).attr("fill",G=>G),c=Xt(L,(G,A)=>A),h=G=>R(L[G],G)}else w=k(ml().domain(S),[s,r-l]),g.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-f).attr("fill",F),v=()=>{};return g.append("g").attr("transform",`translate(0,${o-f})`).call(A_(w).ticks(Array.isArray(c)?null:c,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(c)?c:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",re(p,"normal")).call(v).call(L=>L.select(".domain").remove()),n!==void 0&&g.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),g.node()}const p2=Math.PI/180;function Lo(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=Nf(n),t.markerMid=Nf(i),t.markerEnd=Nf(r)}function Nf(t){if(t==null||t===!1)return null;if(t===!0)return Hh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Wh("auto");case"arrow-reverse":return Wh("auto-start-reverse");case"dot":return l9;case"circle":case"circle-fill":return Hh;case"circle-stroke":return f9;case"tick":return Df("auto");case"tick-x":return Df(90);case"tick-y":return Df(0)}throw new Error(`invalid marker: ${t}`)}function Wh(t){return(e,n)=>Gt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function l9(t,e){return Gt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Hh(t,e){return Gt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function f9(t,e){return Gt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Df(t){return(e,n)=>Gt("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let s9=0;function Pl(t,e,{stroke:n},i){return m2(t,e,n&&(r=>n[r]),i)}function u9(t,e,{stroke:n},i){return m2(t,e,n&&(([r])=>n[r]),i)}function m2(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const l=new Map;function f(s){return function(u){const c=o(u);let h=l.get(s);h||l.set(s,h=new Map);let p=h.get(c);if(!p){const d=this.parentNode.insertBefore(s(c,a),this),m=`plot-marker-${++s9}`;d.setAttribute("id",m),h.set(c,p=`url(#${m})`)}return p}}e&&t.attr("marker-start",f(e)),n&&t.attr("marker-mid",f(n)),i&&t.attr("marker-end",f(i))}function zu({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=b2(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function g2({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=b2(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function b2(t,e,n){return t===void 0&&e===void 0&&n===void 0?ye?[1,0]:[.5,.5]:[e,n]}function _2(t,{interval:e}){return t={...Co(t)},t.interval=Mu(t.interval===void 0?e:t.interval),t}function y2(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:l,interval:f}=_2(r,n);if(l==null||f==null&&!i)return n;const s=Fi(r);if(f==null){let p;const d={transform:m=>p||(p=ee(m,l)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?d:o,[`${t}2`]:a===void 0&&!(o===a&&i)?d:a}}let u,c;function h(p){return c!==void 0&&p===u?c:c=Xt(ee(u=p,l),d=>f.floor(d))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:h,label:s}:o,[`${t}2`]:a===void 0?{transform:p=>h(p).map(d=>f.offset(d)),label:s}:a})}function w2(t,e,n){const{[t]:i}=n,{value:r,interval:o}=_2(i,n);return r==null||o==null?n:e({...n,[t]:{label:Fi(i),transform:a=>{const l=Xt(ee(a,r),s=>o.floor(s)),f=l.map(s=>o.offset(s));return l.map(Se(l)?(s,u)=>s==null||isNaN(s=+s)||(u=f[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=f[u],u==null)?NaN:(+s+ +u)/2)}}})}function c9(t={}){return y2("x",zu,t)}function v2(t={}){return y2("y",g2,t)}function h9(t={}){return w2("x",zu,t)}function d9(t={}){return w2("y",g2,t)}const x2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class p9 extends he{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:l=a,insetBottom:f=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Rl(n,"x"),x2),this.insetTop=zt(l),this.insetBottom=zt(f),Lo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y1:s,y2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:b}=r,{insetTop:_,insetBottom:g}=this;return Gt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{x:f&&a},ye,0).call(v=>v.selectAll().data(e).enter().append("line").call(We,this).attr("x1",f?w=>f[w]:(m+c-d)/2).attr("x2",f?w=>f[w]:(m+c-d)/2).attr("y1",s&&!ur(l)?w=>s[w]+_:p+_).attr("y2",u&&!ur(l)?l.bandwidth?w=>u[w]+l.bandwidth()-g:w=>u[w]-g:h-b-g).call(Rn,this,i).call(Pl,this,i,o)).node()}}class m9 extends he{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:l=a,insetLeft:f=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},Rl(n,"y"),x2),this.insetRight=zt(l),this.insetLeft=zt(f),Lo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{y:f,x1:s,x2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:b}=r,{insetLeft:_,insetRight:g}=this;return Gt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{y:f&&l},0,ye).call(v=>v.selectAll().data(e).enter().append("line").call(We,this).attr("x1",s&&!ur(a)?w=>s[w]+_:m+_).attr("x2",u&&!ur(a)?a.bandwidth?w=>u[w]+a.bandwidth()-g:w=>u[w]-g:c-d-g).attr("y1",f?w=>f[w]:(p+h-b)/2).attr("y2",f?w=>f[w]:(p+h-b)/2).call(Rn,this,i).call(Pl,this,i,o)).node()}}function Ol(t,e){let{x:n=fe,y:i,y1:r,y2:o,...a}=v2(e);return[r,o]=k2(i,r,o),new p9(t,{...a,x:n,y1:r,y2:o})}function Bu(t,e){let{y:n=fe,x:i,x1:r,x2:o,...a}=c9(e);return[r,o]=k2(i,r,o),new m9(t,{...a,y:n,x1:r,x2:o})}function k2(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function qu(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const g9={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},M2="­";class Yu extends he{constructor(e,n={}){const{x:i,y:r,text:o=oi(e)&&Eg(e)?fe:Cl,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:f=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:c,monospace:h,fontFamily:p=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:b,fontWeight:_,rotate:g}=n,[v,w]=ce(g,0),[k,x]=x9(d);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:k,optional:!0},rotate:{value:H4(v),optional:!0},text:{value:o,filter:mu,optional:!0}},n,g9),this.rotate=w,this.textAnchor=re(l,"middle"),this.lineAnchor=en(f,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=S2(c),this.monospace=!!h,this.fontFamily=ue(p),this.fontSize=x,this.fontStyle=ue(m),this.fontVariant=ue(b),this.fontWeight=ue(_),this.frameAnchor=$l(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=C2(this),this.clipLine=A2(this)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,rotate:u,text:c,title:h,fontSize:p}=i,{rotate:d}=this,[m,b]=No(this,r);return Gt("svg:g",o).call(Ye,this,r,o).call(T2,this,c,r).call(Ne,this,{x:f&&a,y:s&&l}).call(_=>_.selectAll().data(e).enter().append("text").call(We,this).call(b9,this,c,h).attr("transform",qu`translate(${f?g=>f[g]:m},${s?g=>s[g]:b})${u?g=>` rotate(${u[g]})`:d?` rotate(${d})`:""}`).call(wt,"font-size",p&&(g=>p[g])).call(Rn,this,i)).node()}}function S2(t){return t==null?null:en(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function b9(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:l,clipLine:f}=e;t.each(function(s){const u=l(Ei(n[s])??"").map(f),c=u.length,h=r==="top"?.71:r==="bottom"?1-c:(164-c*100)/200;if(c>1){let p=0;for(let d=0;d<c;++d){if(++p,!u[d])continue;const m=this.ownerDocument.createElementNS(Ji.svg,"tspan");m.setAttribute("x",0),d===p-1?m.setAttribute("y",`${(h+d)*o}em`):m.setAttribute("dy",`${p*o}em`),m.textContent=u[d],this.appendChild(m),p=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const p=this.ownerDocument.createElementNS(Ji.svg,"title");p.textContent=n[s],this.appendChild(p)}})}function Ul(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=To(e,n)),new Yu(t,{...i,x:e,y:n})}function _9(t,{x:e=fe,...n}={}){return new Yu(t,d9({...n,x:e}))}function y9(t,{y:e=fe,...n}={}){return new Yu(t,h9({...n,y:e}))}function T2(t,e,n){wt(t,"text-anchor",e.textAnchor),wt(t,"font-family",e.fontFamily),wt(t,"font-size",e.fontSize),wt(t,"font-style",e.fontStyle),wt(t,"font-variant",e.fontVariant===void 0?w9(n):e.fontVariant),wt(t,"font-weight",e.fontWeight)}function w9(t){return t&&(j4(t)||Se(t))?"tabular-nums":void 0}const v9=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function x9(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),v9.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function k9(t,e,n){const i=[];let r,o=0;for(const[a,l,f]of M9(t)){if(r===void 0&&(r=a),o>r&&n(t,r,l)>e&&(i.push(t.slice(r,o)+(t[o-1]===M2?"-":"")),r=a),f){i.push(t.slice(r,l)),r=void 0;continue}o=l}return i}function*M9(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case M2:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Vh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"‘":31,"’":31,"“":47,"”":47,"…":82};function Wu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=br(t,r))i+=Vh[t[r]]??($2(t,r)?120:Vh.e);return i}function Hu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=br(t,r))i+=$2(t,r)?126:63;return i}function C2({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?Hu:Wu,r=e*100;return o=>k9(o,r,i)}function A2({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?Hu:Wu,r=e*100;switch(n){case"clip-start":return o=>jh(o,r,i,"");case"clip-end":return o=>Gh(o,r,i,"");case"ellipsis-start":return o=>jh(o,r,i,Xi);case"ellipsis-middle":return o=>S9(o,r,i,Xi);case"ellipsis-end":return o=>Gh(o,r,i,Xi)}}const Xi="…";function cr(t,e,n,i){const r=[];let o=0;for(let a=0,l=0,f=t.length;a<f;a=l){l=br(t,a);const s=n(t,a,l);if(o+s>e){for(o+=i;o>e&&a>0;)l=a,a=r.pop(),o-=n(t,a,l);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function Gh(t,e,n,i){t=t.trim();const r=n(i),[o]=cr(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function S9(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,l]=cr(t,e/2,n,o),[f]=cr(t,r-e/2-l+o,n,-o);return f<0?i:t.slice(0,a).trimEnd()+i+t.slice(br(t,f)).trimStart()}function jh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=cr(t,r-e+o,n,-o);return a<0?i:i+t.slice(br(t,a)).trimStart()}const Rs=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,Xh=new RegExp("\\p{Extended_Pictographic}","uy");function br(t,e){return e+=T9(t,e)?2:1,A9(t,e)&&(e=Rs.lastIndex),C9(t,e)?br(t,e+1):e}function E2(t,e){return t.charCodeAt(e)<128}function T9(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function C9(t,e){return t.charCodeAt(e)===8205}function A9(t,e){return E2(t,e)?!1:(Rs.lastIndex=e,Rs.test(t))}function $2(t,e){return E2(t,e)?!1:(Xh.lastIndex=e,Xh.test(t))}const E9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},N2=3.5,$9=N2*5,D2={draw(t,e,n){const i=e*n/$9;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},N9={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},D9=new Map([["arrow",D2],["spike",N9]]);function F9(t){return t&&typeof t.draw=="function"}function L9(t){if(F9(t))return t;const e=D9.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class F2 extends he{constructor(e,n={}){const{x:i,y:r,r:o=N2,length:a,rotate:l,shape:f=D2,anchor:s="middle",frameAnchor:u}=n,[c,h]=ce(a,12),[p,d]=ce(l,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,E9),this.r=+o,this.length=h,this.rotate=d,this.shape=L9(f),this.anchor=en(s,"anchor",["start","middle","end"]),this.frameAnchor=$l(u)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,length:u,rotate:c}=i,{length:h,rotate:p,anchor:d,shape:m,r:b}=this,[_,g]=No(this,r);return Gt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{x:f&&a,y:s&&l}).call(v=>v.selectAll().data(e).enter().append("path").call(We,this).attr("transform",qu`translate(${f?w=>f[w]:_},${s?w=>s[w]:g})${c?w=>` rotate(${c[w]})`:p?` rotate(${p})`:""}${d==="start"?"":d==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const k=Yn();return m.draw(k,u[w],b),k}:(()=>{const w=Yn();return m.draw(w,h,b),w})()).call(Rn,this,i)).node()}}function I9(t,e={}){const{x:n=fe,...i}=e;return new F2(t,{...i,x:n})}function R9(t,e={}){const{y:n=fe,...i}=e;return new F2(t,{...i,y:n})}function li(t,e){return arguments.length<2&&!oi(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function zl({anchor:t}={},e){return t===void 0?e[0]:en(t,"anchor",e)}function L2(t){return zl(t,["left","right"])}function I2(t){return zl(t,["right","left"])}function R2(t){return zl(t,["bottom","top"])}function P2(t){return zl(t,["top","bottom"])}function O2(){const[t,e]=li(...arguments);return z2("y",L2(e),t,e)}function P9(){const[t,e]=li(...arguments);return z2("fy",I2(e),t,e)}function U2(){const[t,e]=li(...arguments);return B2("x",R2(e),t,e)}function O9(){const[t,e]=li(...arguments);return B2("fx",P2(e),t,e)}function z2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="y"?6:0,tickPadding:m,tickRotate:b,x:_,margin:g,marginTop:v=g===void 0?20:g,marginRight:w=g===void 0?e==="right"?40:0:g,marginBottom:k=g===void 0?20:g,marginLeft:x=g===void 0?e==="left"?40:0:g,label:S,labelAnchor:T,labelArrow:E,labelOffset:F,...C}){return d=zt(d),m=zt(m),b=zt(b),T!==void 0&&(T=en(T,"labelAnchor",["center","top","bottom"])),E=X2(E),f2(d&&!be(o)?U9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:b,x:_,...C}):null,be(f)?null:B9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:b,x:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...C}),!be(f)&&S!==null?Ul([],H2({fill:f,fillOpacity:s,...C},function(L,R,G,A,B){const z=A[t],{marginTop:J,marginRight:Z,marginBottom:X,marginLeft:P}=t==="y"&&B.inset||B,j=T??(z.bandwidth?"center":"top"),Q=F??(e==="right"?Z:P)-3;return j==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=j,this.frameAnchor=`${j}-${e}`,this.rotate=0),this.dy=j==="top"?3-J:j==="bottom"?X-3:0,this.dx=e==="right"?Q:-Q,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[j2(t,z,{anchor:e,label:S,labelAnchor:j,labelArrow:E})]}}}})):null)}function B2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="x"?6:0,tickPadding:m,tickRotate:b,y:_,margin:g,marginTop:v=g===void 0?e==="top"?30:0:g,marginRight:w=g===void 0?20:g,marginBottom:k=g===void 0?e==="bottom"?30:0:g,marginLeft:x=g===void 0?20:g,label:S,labelAnchor:T,labelArrow:E,labelOffset:F,...C}){return d=zt(d),m=zt(m),b=zt(b),T!==void 0&&(T=en(T,"labelAnchor",["center","left","right"])),E=X2(E),f2(d&&!be(o)?z9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:b,y:_,...C}):null,be(f)?null:q9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:b,y:_,marginTop:v,marginRight:w,marginBottom:k,marginLeft:x,...C}),!be(f)&&S!==null?Ul([],H2({fill:f,fillOpacity:s,...C},function(L,R,G,A,B){const z=A[t],{marginTop:J,marginRight:Z,marginBottom:X,marginLeft:P}=t==="x"&&B.inset||B,j=T??(z.bandwidth?"center":"right"),Q=F??(e==="top"?J:X)-3;return j==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${j}`,this.textAnchor=j==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-Q:Q,this.dx=j==="right"?Z-3:j==="left"?3-P:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[j2(t,z,{anchor:e,label:S,labelAnchor:j,labelArrow:E})]}}}})):null)}function U9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetLeft:u=s,insetRight:c=s,dx:h=0,y:p=t==="y"?void 0:null,...d}){return _r(R9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:l,y:p,...d,dx:e==="left"?+h-ye+ +u:+h+ye-c,anchor:"start",length:f,shape:e==="left"?Z9:K9})}function z9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetTop:u=s,insetBottom:c=s,dy:h=0,x:p=t==="x"?void 0:null,...d}){return _r(I9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:l,x:p,...d,dy:e==="bottom"?+h-ye-c:+h+ye+ +u,anchor:"start",length:f,shape:e==="bottom"?j9:X9})}function B9(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*p2):0),text:f,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:c,inset:h=0,insetLeft:p=h,insetRight:d=h,dx:m=0,y:b=t==="y"?void 0:null,..._}){return _r(y9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,y:b,..._,dx:e==="left"?+m-o-l+ +p:+m+ +o+ +l-d},function(g,v,w,k,x){c===void 0&&(this.fontVariant=G2(g)),f===void 0&&(x.text=V2(g,v,w,k,e))})}function q9(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*p2):0),text:f,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:c,inset:h=0,insetTop:p=h,insetBottom:d=h,dy:m=0,x:b=t==="x"?void 0:null,..._}){return _r(_9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f===void 0?null:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,x:b,..._,dy:e==="bottom"?+m+ +o+ +l-d:+m-o-l+ +p},function(g,v,w,k,x){c===void 0&&(this.fontVariant=G2(g)),f===void 0&&(x.text=V2(g,v,w,k,e))})}function Y9(){const[t,e]=li(...arguments);return q2("y",L2(e),t,e)}function W9(){const[t,e]=li(...arguments);return q2("fy",I2(e),t,e)}function H9(){const[t,e]=li(...arguments);return Y2("x",R2(e),t,e)}function V9(){const[t,e]=li(...arguments);return Y2("fx",P2(e),t,e)}function q2(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...l}){return _r(Bu,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...W2(l)})}function Y2(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...l}){return _r(Ol,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...W2(l)})}function W2({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function H2({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u=!1},c){return[,t]=Dn(t),[,e]=ce(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u,initializer:c}}function _r(t,e,n,i,r,o,a){let l;function f(c,h,p,d,m,b){const _=c==null&&(e==="fx"||e==="fy"),{[e]:g}=d;if(!g)throw new Error(`missing scale: ${e}`);const v=g.domain();let{interval:w,ticks:k,tickFormat:x,tickSpacing:S=e==="x"?80:35}=o;if(typeof k=="string"&&Z2(g)&&(w=k,k=void 0),k===void 0&&(k=gr(w,g.type)??G9(g,S)),c==null){if(oi(k))c=Ee(k);else if(Wi(k))c=Ff(k,...Re(v));else if(g.interval){let E=g.interval;if(g.ticks){const[F,C]=Re(v),L=(C-F)/E[Mo];E=bh(E,L/k)??E,c=Ff(E,F,C)}else{c=v;const F=c.length;E=bh(E,F/k)??E,E!==g.interval&&(c=Ff(E,...Re(c)))}if(E===g.interval){const F=Math.round(c.length/k);F>1&&(c=c.filter((C,L)=>L%F===0))}}else g.ticks?c=g.ticks(k):c=v;if(!g.ticks&&c.length&&c!==v){const E=new el(v);c=c.filter(F=>E.has(F)),c.length||Vn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?h=[Ln(c)]:l[e]={scale:e,value:fe}}a==null||a.call(this,g,c,k,x,l);const T=Object.fromEntries(Object.entries(l).map(([E,F])=>[E,{...F,value:ee(c,F.value)}]));return _&&(h=b.filterFacets(c,T)),{data:c,facets:h,channels:T}}const s=sr(o).initializer,u=t(r,sr({...o,initializer:f},s));return r==null?(l=u.channels,u.channels={}):l={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function G9(t,e){const[n,i]=Re(t.range());return(i-n)/e}function V2(t,e,n,i,r){return{value:Vu(t,e,n,i,r)}}function Vu(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&Se(e)?$4(t.type,e,r)??Ei:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?Ei:typeof i=="string"?(Se(t.domain())?xo:pr)(i):So(i)}function Ff(t,e,n){return t.range(e,t.offset(t.floor(n)))}const j9={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},X9={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},Z9={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},K9={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function G2(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function j2(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&Z2(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[↑↓→←]/.test(i)),!o)return i;if(o===!0){const a=I7(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return`← ${i}`;case"right":return`${i} →`;case"up":return n==="right"?`${i} ↑`:`↑ ${i}`;case"down":return n==="right"?`${i} ↓`:`↓ ${i}`}return i}}function X2(t="auto"){return be(t)?!1:typeof t=="boolean"?t:en(t,"labelArrow",["auto","up","right","down","left"])}function Z2(t){return Se(t.domain())}function Zh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function J9(t,{opacity:e,...n}={}){if(!Li(t)&&!l2(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return K2(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",ce(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function Q9(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:be(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...l}={},f){const[c,h]=Dn(e),[p,d]=Dn(i),m=Zh(f,c),b=Zh(f,p),_=a*a*Math.PI;return n=ce(n)[1],r=ce(r)[1],o=ce(o)[1],K2(t,l,(g,v,w,k)=>g.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",k).attr("fill",c==="color"?x=>m.scale(x):h).attr("fill-opacity",n).attr("stroke",p==="color"?x=>b.scale(x):d).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",x=>{const S=Yn();return t.scale(x).draw(S,_),S}))}function K2(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=d2(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:f=a,marginLeft:s=0,className:u,style:c,width:h}=e;const p=Fu(e);u=Nu(u),r=Vu(t.scale,t.domain,void 0,r);const d=Gt("div",p).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,l,f).call(b=>b.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,l,f).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),d.call(b=>b.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",re(o,"normal")).call(Du,c).node()}const Ps=new Map([["symbol",Q9],["color",Q2],["opacity",ex]]);function tx(t,e,n={}){return(i,r)=>{if(!Ps.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return Ps.get(i)(t[i],J2(e,n[i],r),o=>t[o])}}function J2({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return J4(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function Q2(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return J9(t,n);case"ramp":return a9(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function ex({type:t,interpolate:e,...n},{legend:i=!0,color:r=Qn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return Q2({type:t,...n,interpolate:nx(r)},{legend:i,...o})}function nx(t){const{r:e,g:n,b:i}=Qn(t)||Qn(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function ix(t,e,n){const i=[];for(const[r,o]of Ps){const a=n[r];if(a!=null&&a.legend&&r in t){const l=o(t[r],J2(e,t[r],a),f=>t[f]);l!=null&&i.push(l)}}return i}const rx={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},ox={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class ax extends he{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:l=i,rx:f,ry:s}=e;super(ca,void 0,e,n==null?rx:ox),this.anchor=Sg(n,"anchor",["top","right","bottom","left"]),this.insetTop=zt(r),this.insetRight=zt(o),this.insetBottom=zt(a),this.insetLeft=zt(l),this.rx=zt(f),this.ry=zt(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:l,marginBottom:f,marginLeft:s,width:u,height:c}=r,{anchor:h,insetTop:p,insetRight:d,insetBottom:m,insetLeft:b,rx:_,ry:g}=this,v=s+b,w=u-l-d,k=a+p,x=c-f-m;return Gt(h?"svg:line":"svg:rect",o).datum(0).call(Ye,this,r,o).call(We,this).call(Rn,this,i).call(Ne,this,{}).call(h==="left"?S=>S.attr("x1",v).attr("x2",v).attr("y1",k).attr("y2",x):h==="right"?S=>S.attr("x1",w).attr("x2",w).attr("y1",k).attr("y2",x):h==="top"?S=>S.attr("x1",v).attr("x2",w).attr("y1",k).attr("y2",k):h==="bottom"?S=>S.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):S=>S.attr("x",v).attr("y",k).attr("width",w-v).attr("height",x-k).attr("rx",_).attr("ry",g)).node()}}function lx(t){return new ax(t)}const Lf={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},fx=new Set(["geometry","href","src","ariaLabel","scales"]);class sx extends he{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&oi(e)&&Eg(e)&&(n={...n,title:fe});const{x:i,y:r,x1:o,x2:a,y1:l,y2:f,anchor:s,preferredAnchor:u="bottom",monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:d,fontVariant:m,fontWeight:b,lineHeight:_=1,lineWidth:g=20,frameAnchor:v,format:w,textAnchor:k="start",textOverflow:x,textPadding:S=8,title:T,pointerSize:E=12,pathFilter:F="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:l!=null&&f!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:f==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:f,scale:"y",optional:l==null},title:{value:T,optional:!0}},n,Lf),this.anchor=$s(s,"anchor"),this.preferredAnchor=$s(u,"preferredAnchor"),this.frameAnchor=$l(v),this.textAnchor=re(k,"middle"),this.textPadding=+S,this.pointerSize=+E,this.pathFilter=ue(F),this.lineHeight=+_,this.lineWidth=+g,this.textOverflow=S2(x),this.monospace=!!c,this.fontFamily=ue(h),this.fontSize=zt(p),this.fontStyle=ue(d),this.fontVariant=ue(m),this.fontWeight=ue(b);for(const C in Lf)C in this.channels&&(this[C]=Lf[C]);this.splitLines=C2(this),this.clipLine=A2(this),this.format={...w}}render(e,n,i,r,o){const a=this,{x:l,y:f,fx:s,fy:u}=n,{ownerSVGElement:c,document:h}=o,{anchor:p,monospace:d,lineHeight:m,lineWidth:b}=this,{textPadding:_,pointerSize:g,pathFilter:v}=this,{marginTop:w,marginLeft:k}=r,{x1:x,y1:S,x2:T,y2:E,x:F=x??T,y:C=S??E}=i,L=s?s(e.fx)-k:0,R=u?u(e.fy)-w:0,[G,A]=No(this,r),B=c2(i,G),z=h2(i,A),J=d?Hu:Wu,Z=J(Xi);let X,P;"title"in i?(X=i.channels,P=px):(X=dx.call(this,i,n),P=mx);const j=Gt("svg:g",o).call(Ye,this,r,o).call(T2,this).call(Ne,this,{x:F&&l,y:C&&f}).call(tt=>tt.selectAll().data(e).enter().append("g").attr("transform",V=>`translate(${Math.round(B(V))},${Math.round(z(V))})`).call(We,this).call(V=>V.append("path").attr("filter",v)).call(V=>V.append("text").each(function(q){const D=Or(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const $=P.call(a,q,e,X,n,i);if(typeof $=="string")for(const O of a.splitLines($))Q(D,{value:a.clipLine(O)});else{const O=new Set;for(const et of $){const{label:U=""}=et;U&&O.has(U)||(O.add(U),Q(D,et))}}})));function Q(tt,{label:V,value:q,color:D,opacity:$}){V??(V=""),q??(q="");const O=D!=null||$!=null;let et,U=b*100;const[mt]=cr(V,U,J,Z);if(mt>=0)V=V.slice(0,mt).trimEnd()+Xi,et=q.trim(),q="";else{(V||!q&&!O)&&(q=" "+q);const[pt]=cr(q,U-J(V),J,Z);pt>=0&&(et=q.trim(),q=q.slice(0,pt).trimEnd()+Xi)}const ot=tt.append("tspan").attr("x",0).attr("dy",`${m}em`).text("​");V&&ot.append("tspan").attr("font-weight","bold").text(V),q&&ot.append(()=>h.createTextNode(q)),O&&ot.append("tspan").text(" ■").attr("fill",D).attr("fill-opacity",$).style("user-select","none"),et&&ot.append("title").text(et)}function at(){const{width:tt,height:V}=r.facet??r;j.selectChildren().each(function(q){let{x:D,width:$,height:O}=this.getBBox();$=Math.round($),O=Math.round(O);let et=p;if(et===void 0){const ot=B(q)+L,pt=z(q)+R,ft=ot+$+g+_*2<tt,dt=ot-$-g-_*2>0,Ut=pt+O+g+_*2<V,Et=pt-O-g-_*2>0;et=ft&&dt?Ut&&Et?a.preferredAnchor:Et?"bottom":"top":Ut&&Et?ft?"left":"right":(ft||dt)&&(Ut||Et)?`${Et?"bottom":"top"}-${ft?"left":"right"}`:a.preferredAnchor}const U=this.firstChild,mt=this.lastChild;if(U.setAttribute("d",hx(et,g,_,$,O)),D)for(const ot of mt.childNodes)ot.setAttribute("x",-D);mt.setAttribute("y",`${+ux(et,mt.childNodes.length,m).toFixed(6)}em`),mt.setAttribute("transform",`translate(${cx(et,g,_,$,O)})`)}),j.attr("visibility",null)}return e.length&&(j.attr("visibility","hidden"),c.isConnected?Promise.resolve().then(at):typeof requestAnimationFrame<"u"&&requestAnimationFrame(at)),j.node()}}function tb(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=To(e,n)),new sx(t,{...i,x:e,y:n})}function ux(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function cx(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function hx(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function dx({channels:t},e){var r,o;const n={};let i=this.format;i=Kh(i,t,"x"),i=Kh(i,t,"y"),this.format=i;for(const a in i){const l=i[a];if(!(l===null||l===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const f=Th(t,a);f&&(n[a]=f)}}for(const a in t){if(a in n||a in i||fx.has(a))continue;const l=Th(t,a);l&&(n[a]=l)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const l=this.format[a];if(typeof l=="string"){const f=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(Se(f)?xo:pr)(l)}else if(l===void 0||l===!0){const f=e[a];this.format[a]=f!=null&&f.bandwidth?Vu(f,f.domain()):Ei}}return n}function Kh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([l])=>l===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function px(t,e,{title:n}){return Ei(n.value[t],t)}function*mx(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:Xa(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Qh(i,n,"x"),value:Jh(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Qh(i,n,"y"),value:Jh(this.format.y2,n.y1,a,t)};else{const l=a.value[t],f=a.scale;if(!ei(l)&&f==null)continue;yield{label:Xa(i,n,o),value:this.format[o](l,t),color:f==="color"?r[o][t]:null,opacity:f==="opacity"?r[o][t]:null}}}}function Jh(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}–${t(n.value[i],i)}`}function Qh(t,e,n){const i=Xa(t,e,`${n}1`,n),r=Xa(t,e,`${n}2`,n);return i===r?i:`${i}–${r}`}function Xa(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function De(t={}){var Z;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:l}=t,f=Nu(t.className),s=t.marks===void 0?[]:ed(t.marks);s.push(...kx(s));const u=vx(e,t),c=new Map;for(const X of s){const P=nd(X,u,t);P&&c.set(X,P)}const h=new Map;u&&Cr(h,[u],t),Cr(h,c,t);const p=ed(Mx(s,h,t));for(const X of p){const P=nd(X,u,t);P&&c.set(X,P)}s.unshift(...p);let d=H7(h,t);if(d!==void 0){const X=u?$f(d,u):void 0;for(const j of s){if(j.facet===null||j.facet==="super")continue;const Q=c.get(j);Q!==void 0&&(Q.facetsIndex=j.fx!=null||j.fy!=null?$f(d,Q):X)}const P=new Set;for(const{facetsIndex:j}of c.values())j==null||j.forEach((Q,at)=>{(Q==null?void 0:Q.length)>0&&P.add(at)});d.forEach(0<P.size&&P.size<d.length?(j,Q)=>j.empty=!P.has(Q):j=>j.empty=!1);for(const j of s)if(j.facet==="exclude"){const Q=c.get(j);Q!==void 0&&(Q.facetsIndex=j7(Q.facetsIndex))}}for(const X of Wt.keys())As(t[X])&&X!=="fx"&&X!=="fy"&&h.set(X,[]);const m=new Map;for(const X of s){if(m.has(X))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:P,channels:j}=c.get(X)??{},{data:Q,facets:at,channels:tt}=X.initialize(P,j,t);Gu(tt,t),m.set(X,{data:Q,facets:at,channels:tt})}const b=Ls(Cr(h,m,t),t),_=Y7(b,s,t);F7(b,_);const g=Ih(b),{fx:v,fy:w}=g,k=v||w?r2(b,_):_,x=v||w?Nx(g,_):_,S=Fu(t),T=S.document,E=ol("svg").call(T.documentElement);let F=E;S.ownerSVGElement=E,S.className=f,S.projection=H8(t,k),S.filterFacets=(X,P)=>$f(d,{channels:P,groups:Ou(X,P)}),S.getMarkState=X=>{const P=m.get(X),j=c.get(X);return{...P,channels:{...P.channels,...j==null?void 0:j.channels}}},S.dispatchValue=X=>{F.value!==X&&(F.value=X,F.dispatchEvent(new Event("input",{bubbles:!0})))};const C=new Set;for(const[X,P]of m)if(X.initializer!=null){const j=X.facet==="super"?x:k,Q=X.initializer(P.data,P.facets,P.channels,g,j,S);if(Q.data!==void 0&&(P.data=Q.data),Q.facets!==void 0&&(P.facets=Q.facets),Q.channels!==void 0){const{fx:at,fy:tt,...V}=Q.channels;wx(V),Object.assign(P.channels,V);for(const q of Object.values(V)){const{scale:D}=q;D!=null&&!t8(Wt.get(D))&&(eb(q,t),C.add(D))}(at!=null||tt!=null)&&c.set(X,!0)}}if(C.size){const X=new Map;Cr(X,m,t,at=>C.has(at)),Cr(h,m,t,at=>C.has(at));const P=$x(Ls(X,t),b),{scales:j,...Q}=Ih(P);Object.assign(b,P),Object.assign(g,Q),Object.assign(g.scales,j)}let L,R;d!==void 0&&(L={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},d=V7(d,L),R=G7(v,w,_));for(const[X,P]of m)P.values=X.scale(P.channels,g,S);const{width:G,height:A}=_;Or(E).attr("class",f).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",G).attr("height",A).attr("viewBox",`0 0 ${G} ${A}`).attr("aria-label",a).attr("aria-description",l).call(X=>X.append("style").text(`:where(.${f}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${f} text),
:where(.${f} tspan) {
  white-space: pre;
}`)).call(Du,n);for(const X of s){const{channels:P,values:j,facets:Q}=m.get(X);if(d===void 0||X.facet==="super"){let at=null;if(Q&&(at=Q[0],at=X.filter(at,P,j),at.length===0))continue;const tt=X.render(at,g,j,x,S);if(tt==null)continue;E.appendChild(tt)}else{let at;for(const tt of d){if(!(((Z=X.facetAnchor)==null?void 0:Z.call(X,d,L,tt))??!tt.empty))continue;let V=null;if(Q){const D=c.has(X);if(V=Q[D?tt.i:0],V=X.filter(V,P,j),V.length===0)continue;!D&&V===Q[0]&&(V=B4(V)),V.fx=tt.x,V.fy=tt.y,V.fi=tt.i}const q=X.render(V,g,j,k,S);if(q!=null){(at??(at=Or(E).append("g"))).append(()=>q).datum(tt);for(const D of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(D)&&(at.attr(D,q.getAttribute(D)),q.removeAttribute(D))}}at==null||at.selectChildren().attr("transform",R)}}const B=ix(b,S,t),{figure:z=i!=null||r!=null||o!=null||B.length>0}=t;z&&(F=T.createElement("figure"),F.className=`${f}-figure`,F.style.maxWidth="initial",i!=null&&F.append(td(T,i,"h2")),r!=null&&F.append(td(T,r,"h3")),F.append(...B,E),o!=null&&F.append(gx(T,o))),F.scale=B7(g.scales),F.legend=tx(b,S,t);const J=F8();return J>0&&Or(E).append("text").attr("x",G).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("⚠️").append("title").text(`${J.toLocaleString("en-US")} warning${J===1?"":"s"}. Please check the console.`),F}function td(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function gx(t,e){const n=t.createElement("figcaption");return n.append(e),n}function bx({marks:t=[],...e}={}){return De({...e,marks:[...t,this]})}he.prototype.plot=bx;function ed(t){return t.flat(1/0).filter(e=>e!=null).map(_x)}function _x(t){return typeof t.render=="function"?t:new yx(t)}class yx extends he{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function Gu(t,e){for(const n in t)eb(t[n],e);return t}function eb(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:l=o?f=>f*100:Ag(a,r)}=e[n]??{};l!=null&&(t.value=Xt(t.value,l),t.transform=!1)}function wx(t){for(const e in t)Pg(e,t[e])}function Cr(t,e,n,i=I4){var r,o;for(const{channels:a}of e.values())for(const l in a){const f=a[l],{scale:s}=f;if(s!=null&&i(s))if(s==="projection"){if(!X8(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,c=((o=n.y)==null?void 0:o.domain)===void 0;if(u||c){const[h,p]=K8(f);u&&If(t,"x",h),c&&If(t,"y",p)}}}else If(t,s,f)}return t}function If(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function vx(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=Ee(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=io(r,{value:n,scale:"fx"})),i!=null&&(o.fy=io(r,{value:i,scale:"fy"})),Gu(o,e);const a=Ou(r,o);return{channels:o,groups:a,data:t.data}}function nd(t,e,n){var f;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=Ee(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=io(s,{value:i,scale:"fx"})),r!=null&&(u.fy=io(s,{value:r,scale:"fy"})),Gu(u,n),{channels:u,groups:Ou(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:o,groups:a};l.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((f=Ee(t.data))==null?void 0:f.length)===l.length&&Vn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isn’t faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function xx(t,e={}){return sr({...e,x:null,y:null},(n,i,r,o,a,l)=>l.getMarkState(t))}function kx(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?o9:/^y$/i.test(r)?Yh:u2,i=r(xx(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===Yh?"left":"bottom");const a=tb(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function Mx(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:l={},axis:f,grid:s,facet:u={},facet:{axis:c=f,grid:h}=u,x:{axis:p=f,grid:d=p===null?null:s}=r,y:{axis:m=f,grid:b=m===null?null:s}=o,fx:{axis:_=c,grid:g=_===null?null:h}=a,fy:{axis:v=c,grid:w=v===null?null:h}=l}=n;(i||!As(r)&&!id("x",t))&&(p=d=null),(i||!As(o)&&!id("y",t))&&(m=b=null),e.has("fx")||(_=g=null),e.has("fy")||(v=w=null),p===void 0&&(p=!ea(t,"x")),m===void 0&&(m=!ea(t,"y")),_===void 0&&(_=!ea(t,"fx")),v===void 0&&(v=!ea(t,"fy")),p===!0&&(p="bottom"),m===!0&&(m="left"),_===!0&&(_=p==="top"||p===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const k=[];return ta(k,w,W9,l),Qo(k,v,P9,"right","left",u,l),ta(k,g,V9,a),Qo(k,_,O9,"top","bottom",u,a),ta(k,b,Y9,o),Qo(k,m,O2,"left","right",n,o),ta(k,d,H9,r),Qo(k,p,U2,"bottom","top",n,r),k}function Qo(t,e,n,i,r,o,a){if(!e)return;const l=Sx(e);a=Tx(l?i:e,o,a);const{line:f}=a;(n===O2||n===U2)&&f&&!no(f)&&t.push(lx(Cx(a))),t.push(n(a)),l&&t.push(n({...a,anchor:r,label:null}))}function ta(t,e,n,i){!e||no(e)||t.push(n(Ax(e,i)))}function Sx(t){return/^\s*both\s*$/i.test(t)}function Tx(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h=e.label,labelAnchor:p,labelArrow:d=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h,labelAnchor:p,labelArrow:d,labelOffset:m}}function Cx(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function Ax(t,{stroke:e=El(t)?t:void 0,ticks:n=Ex(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function Ex(t){switch(typeof t){case"number":return!0;case"string":return!El(t)}return oi(t)||typeof(t==null?void 0:t.range)=="function"}function ea(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function id(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function $x(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function Nx({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Pu(n),s=t&&rd(t),u=e&&rd(e);return{marginTop:e?u[0]:i,marginRight:t?l-s[1]:r,marginBottom:e?f-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:f}}function rd(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const Dx=new Map([["basis",l4],["basis-closed",f4],["basis-open",s4],["bundle",u4],["bump-x",Z5],["bump-y",K5],["cardinal",c4],["cardinal-closed",h4],["cardinal-open",d4],["catmull-rom",p4],["catmull-rom-closed",m4],["catmull-rom-open",g4],["linear",ko],["linear-closed",b4],["monotone-x",_4],["monotone-y",y4],["natural",w4],["step",v4],["step-after",k4],["step-before",x4]]);function nb(t=ko,e){if(typeof t=="function")return t;const n=Dx.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function ib(t=hr,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?hr:nb(t,e)}function hr(t){return ko(t)}function Fx(t={y:"count"},e={}){[t,e]=Rx(t,e);const{x:n,y:i}=e;return Ix(Px(n,e,fe),null,null,i,t,zu(e))}function Lx(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=$u}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function rb(t={}){return Lx(Fx,"y",Rl(t,"x"))}function Ix(t,e,n,i,{data:r=Rg,filter:o=ja,sort:a,reverse:l,...f}={},s={}){t=od(t),e=od(e),f=Ux(f,s),r=lb(r,fe),a=a==null?void 0:ob("sort",a,s),o=o==null?void 0:ab("filter",o,s),n!=null&&Xo(f,"x","x1","x2")&&(n=null),i!=null&&Xo(f,"y","y1","y2")&&(i=null);const[u,c]=vn(t),[h,p]=vn(t),[d,m]=vn(e),[b,_]=vn(e),[g,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,k]=vn(g),{x,y:S,z:T,fill:E,stroke:F,x1:C,x2:L,y1:R,y2:G,domain:A,cumulative:B,thresholds:z,interval:J,...Z}=s,[X,P]=vn(T),[j]=Dn(E),[Q]=Dn(F),[at,tt]=vn(j),[V,q]=vn(Q);return{..."z"in s&&{z:X||T},..."fill"in s&&{fill:at||E},..."stroke"in s&&{stroke:V||F},...Dl(Z,(D,$,O)=>{const et=Cg(ee(D,g),O==null?void 0:O[v]),U=ee(D,T),mt=ee(D,j),ot=ee(D,Q),pt=p8(f,{z:U,fill:mt,stroke:ot}),ft=[],dt=[],Ut=et&&k([]),Et=U&&P([]),Ft=mt&&tt([]),yt=ot&&q([]),jt=t&&c([]),Fe=t&&p([]),Lt=e&&m([]),jl=e&&_([]),Pn=qx(t,e,D);let ie=0;for(const de of f)de.initialize(D);a&&a.initialize(D),o&&o.initialize(D);for(const de of $){const It=[];for(const fi of f)fi.scope("facet",de);a&&a.scope("facet",de),o&&o.scope("facet",de);for(const[fi,nt]of xh(de,pt))for(const[bt,Tt]of xh(nt,et))for(const[Te,nn]of Pn(Tt))if(!(o&&!o.reduce(Te,nn))){It.push(ie++),dt.push(r.reduceIndex(Te,D,nn)),et&&Ut.push(bt),U&&Et.push(pt===U?fi:U[(Te.length>0?Te:Tt)[0]]),mt&&Ft.push(pt===mt?fi:mt[(Te.length>0?Te:Tt)[0]]),ot&&yt.push(pt===ot?fi:ot[(Te.length>0?Te:Tt)[0]]),jt&&(jt.push(nn.x1),Fe.push(nn.x2)),Lt&&(Lt.push(nn.y1),jl.push(nn.y2));for(const Io of f)Io.reduce(Te,nn);a&&a.reduce(Te)}ft.push(It)}return m8(ft,a,l),{data:dt,facets:ft}}),...!Xo(f,"x")&&(u?{x1:u,x2:h,x:Es(u,h)}:{x,x1:C,x2:L}),...!Xo(f,"y")&&(d?{y1:d,y2:b,y:Es(d,b)}:{y:S,y1:R,y2:G}),...w&&{[v]:w},...Object.fromEntries(f.map(({name:D,output:$})=>[D,$]))}}function Rx({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function Px(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...Co(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=Ox(t.thresholds,t.interval),t}function od(t){if(t==null)return;const{value:e,cumulative:n,domain:i=Re,thresholds:r}=t,o=a=>{let l=ee(a,e),f;if(Se(l)||Bx(r)){l=Xt(l,Mg,Float64Array);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Wi(r)?r(l,u,c):r;typeof h=="number"&&(h=xp(u,c,h)),Wi(h)&&(i===Re&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c))),f=h}else{l=fn(l);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Wi(r)?r(l,u,c):r;if(typeof h=="number")if(i===Re){let p=ga(u,c,h);if(isFinite(p))if(p>0){let d=Math.round(u/p),m=Math.round(c/p);d*p<=u||--d,m*p>c||++m;let b=m-d+1;h=new Float64Array(b);for(let _=0;_<b;++_)h[_]=(d+_)*p}else if(p<0){p=-p;let d=Math.round(u*p),m=Math.round(c*p);d/p<=u||--d,m/p>c||++m;let b=m-d+1;h=new Float64Array(b);for(let _=0;_<b;++_)h[_]=(d+_)/p}else h=[u];else h=[u]}else h=Hr(u,c,h);else Wi(h)&&(i===Re&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c)));f=h}const s=[];if(f.length===1)s.push([f[0],f[0]]);else for(let u=1;u<f.length;++u)s.push([f[u-1],f[u]]);return s.bin=(n<0?Wx:n>0?Yx:ju)(s,f,l),s};return o.label=Fi(e),o}function Ox(t,e,n=ad){if(t===void 0)return e===void 0?n:gr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return g_;case"scott":return L0;case"sturges":return h_;case"auto":return ad}return yu(t)}return t}function Ux(t,e){return c8(t,e,ob)}function ob(t,e,n){return Lg(t,e,n,ab)}function ab(t,e,n){return Ig(t,e,n,lb)}function lb(t,e){return Eu(t,e,zx)}function zx(t){switch(`${t}`.toLowerCase()){case"x":return Hx;case"x1":return Gx;case"x2":return jx;case"y":return Vx;case"y1":return Xx;case"y2":return Zx}throw new Error(`invalid bin reduce: ${t}`)}function ad(t,e,n){return Math.min(200,L0(t,e,n))}function Bx(t){return W4(t)||oi(t)&&Se(t)}function qx(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries()){const u=r.bin(a[l]);for(const[c,[h,p]]of r.entries())yield[u[c],{data:n,x1:f,y1:h,x2:s,y2:p}]}}:i?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries())yield[a[l],{data:n,x1:f,x2:s}]}:function*(o){const a=r.bin(o);for(const[l,[f,s]]of r.entries())yield[a[l],{data:n,y1:f,y2:s}]}}function ju(t,e,n){return e=fn(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[tl(e,n[a])-1])==null||o.push(a);return r}}function Yx(t,e,n){const i=ju(t,e,n);return r=>{const o=i(r);for(let a=1,l=o.length;a<l;++a){const f=o[a-1],s=o[a];for(const u of f)s.push(u)}return o}}function Wx(t,e,n){const i=ju(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const l=o[a+1],f=o[a];for(const s of l)f.push(s)}return o}}function fb(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const Hx={reduceIndex(t,e,{x1:n,x2:i}){return fb(n,i)}},Vx={reduceIndex(t,e,{y1:n,y2:i}){return fb(n,i)}},Gx={reduceIndex(t,e,{x1:n}){return n}},jx={reduceIndex(t,e,{x2:n}){return n}},Xx={reduceIndex(t,e,{y1:n}){return n}},Zx={reduceIndex(t,e,{y2:n}){return n}};function sb(t={}){return Tg(t)?t:{...t,y:fe}}function Kx(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const l of e)for(const f of l)i[f]&&++r,i[f]=1;if(r===0)return{data:t,facets:e};t=eo(t);const o=t[xg]=new Uint32Array(n+r);e=e.map(l=>eo(l,Uint32Array));let a=n;i.fill(0);for(const l of e)for(let f=0,s=l.length;f<s;++f){const u=l[f];i[u]?(l[f]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function Jx(t={},e={}){arguments.length===1&&([t,e]=Qx(t));const{x1:n,x:i=n,y:r,...o}=e,[a,l,f,s]=ek(i,r,"x","y",t,o);return{...a,x1:n,x:l,y1:f,y2:s,y:Es(f,s)}}function ub({y:t,y1:e,y2:n,...i}={}){return i=Rl(i,"x"),e===void 0&&n===void 0?Jx({y:t,...i}):([e,n]=z4(t,e,n),{...i,y1:e,y2:n})}function Qx(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const tk={length:!0};function ek(t,e=L4,n,i,{offset:r,order:o,reverse:a},l){if(e===null)throw new Error(`stack requires ${i}`);const f=xu(l),[s,u]=vn(t),[c,h]=Ga(e),[p,d]=Ga(e);return c.hint=p.hint=tk,r=nk(r),o=ok(o,r,i),[Dl(l,(m,b,_)=>{({data:m,facets:b}=Kx(m,b));const g=t==null?void 0:u(Cg(ee(m,t),_==null?void 0:_[n])),v=ee(m,e,Float64Array),w=ee(m,f),k=o&&o(m,g,v,w),x=m.length,S=h(new Float64Array(x)),T=d(new Float64Array(x)),E=[];for(const F of b){const C=g?Array.from(nl(F,L=>g[L]).values()):[F];if(k)for(const L of C)L.sort(k);for(const L of C){let R=0,G=0;a&&L.reverse();for(const A of L){const B=v[A];B<0?R=T[A]=(S[A]=R)+B:B>0?G=T[A]=(S[A]=G)+B:T[A]=S[A]=G}}E.push(C)}return r&&r(E,S,T,w),{data:m,facets:b}}),s,c,p]}function nk(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return ik;case"center":case"silhouette":return rk;case"wiggle":return hb}throw new Error(`unknown offset: ${t}`)}}function cb(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function ik(t,e,n){for(const i of t)for(const r of i){const[o,a]=cb(r,n);for(const l of r){const f=1/(a-o||1);e[l]=f*(e[l]-o),n[l]=f*(n[l]-o)}}}function rk(t,e,n){for(const i of t){for(const r of i){const[o,a]=cb(r,n);for(const l of r){const f=(a+o)/2;e[l]-=f,n[l]-=f}}db(i,e,n)}pb(t,e,n)}function hb(t,e,n,i){for(const r of t){const o=new vi;let a=0;for(const l of r){let f=-1;const s=l.map(p=>Math.abs(n[p]-e[p])),u=l.map(p=>{f=i?i[p]:++f;const d=n[p]-e[p],m=o.has(f)?d-o.get(f):0;return o.set(f,d),m}),c=[0,...a_(u)];for(const p of l)e[p]+=a,n[p]+=a;const h=Jn(s);h&&(a-=Jn(s,(p,d)=>(u[d]/2+c[d])*p)/h)}db(r,e,n)}pb(t,e,n)}function db(t,e,n){const i=An(t,r=>An(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function pb(t,e,n){const i=t.length;if(i===1)return;const r=t.map(l=>l.flat()),o=r.map(l=>(An(l,f=>e[f])+ke(l,f=>n[f]))/2),a=An(o);for(let l=0;l<i;l++){const f=a-o[l];for(const s of r[l])e[s]+=f,n[s]+=f}}function ok(t,e,n){if(t===void 0&&e===hb)return ld(Qe);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Va:Qe;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return ak(r);case"z":return lk(r);case"sum":return fk(r);case"appearance":return sk(r);case"inside-out":return ld(r)}return fd(kg(t))}if(typeof t=="function")return(t.length===1?fd:uk)(t);if(Array.isArray(t))return ck(t);throw new Error(`invalid order: ${t}`)}}function ak(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function lk(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function fk(t){return Bl(t,(e,n,i,r)=>qs(Ln(e),o=>Jn(o,a=>i[a]),o=>r[o]))}function sk(t){return Bl(t,(e,n,i,r)=>qs(Ln(e),o=>n[F0(o,a=>i[a])],o=>r[o]))}function ld(t){return Bl(t,(e,n,i,r)=>{const o=Ln(e),a=qs(o,c=>n[F0(c,h=>i[h])],c=>r[c]),l=Vi(o,c=>Jn(c,h=>i[h]),c=>r[c]),f=[],s=[];let u=0;for(const c of a)u<0?(u+=l.get(c),f.push(c)):(u-=l.get(c),s.push(c));return s.reverse().concat(f)})}function fd(t){return e=>{const n=ee(e,t);return(i,r)=>Qe(n[i],n[r])}}function uk(t){return e=>(n,i)=>t(e[n],e[i])}function ck(t){return Bl(Qe,()=>t)}function Bl(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new vi(e(n,i,r,o).map((l,f)=>[l,f]));return(l,f)=>t(a.get(o[l]),a.get(o[f]))}}const hk={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class dk extends he{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,z:l,curve:f,tension:s}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:xu(n),optional:!0}},n,hk),this.z=l,this.curve=nb(f,s)}filter(e){return e}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i;return Gt("svg:g",o).call(Ye,this,r,o).call(Ne,this,n,0,0).call(u=>u.selectAll().data(Bg(e,[a,l,f,s],this,i)).enter().append("path").call(We,this).call(zg,this,i).attr("d",X5().curve(this.curve).defined(c=>c>=0).x0(c=>a[c]).y0(c=>l[c]).x1(c=>f[c]).y1(c=>s[c]))).node()}}function pk(t,e){const{x:n=Cl,...i}=rb(e);return new dk(t,ub(sb({...i,x1:n,x2:void 0})))}const mk={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class gk extends he{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:l,tension:f}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,mk),this.curve=ib(l,f),Lo(this,n)}project(e,n,i){this.curve!==hr&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i,{curve:u}=this;return Gt("svg:g",o).call(Ye,this,r,o).call(Ne,this,n).call(c=>c.selectAll().data(e).enter().append("path").call(We,this).attr("d",u===hr&&o.projection?bk(o.projection,a,l,f,s):h=>{const p=Yn(),d=u(p);return d.lineStart(),d.point(a[h],l[h]),d.point(f[h],s[h]),d.lineEnd(),p}).call(Rn,this,i).call(Pl,this,i,o)).node()}}function bk(t,e,n,i,r){const o=cl(t);return e=fn(e),n=fn(n),i=fn(i),r=fn(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function ql(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...l}={}){return[n,i]=sd(e,n,i),[o,a]=sd(r,o,a),new gk(t,{...l,x1:n,x2:i,y1:o,y2:a})}function sd(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class mb extends he{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:l=o,insetBottom:f=o,insetLeft:s=o,rx:u,ry:c}=i;this.insetTop=zt(a),this.insetRight=zt(l),this.insetBottom=zt(f),this.insetLeft=zt(s),this.rx=re(u,"auto"),this.ry=re(c,"auto")}render(e,n,i,r,o){const{rx:a,ry:l}=this;return Gt("svg:g",o).call(Ye,this,r,o).call(this._transform,this,n).call(f=>f.selectAll().data(e).enter().append("rect").call(We,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(wt,"rx",a).call(wt,"ry",l).call(Rn,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}}const _k={ariaLabel:"bar"};class yk extends mb{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,_k)}_transform(e,n,{y:i}){e.call(Ne,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return ur(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:l,insetBottom:f}=this;return ur(e)?a-r-o-l-f:s=>Math.max(0,Math.abs(i[s]-n[s])-l-f)}}function wk(t,e={}){return U4(e)||(e={...e,x:Cl,y2:fe}),new yk(t,ub(v2(sb(e))))}const vk={ariaLabel:"cell"};class xk extends mb{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,vk)}_transform(e,n){e.call(Ne,n,{},0,0)}}function kk(t,{x:e,y:n,...i}={}){return[e,n]=To(e,n),new xk(t,{...i,x:e,y:n})}const Mk={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function Sk(t){return t.sort===void 0&&t.reverse===void 0?f8({channel:"-r"},t):t}class Tk extends he{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:l=Qr,frameAnchor:f}=n,[s,u]=ce(a,0),[c,h]=a8(l),[p,d]=ce(o,c==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:Sl,optional:!0},rotate:{value:s,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},Sk(n),Mk),this.r=d,this.rotate=u,this.symbol=h,this.frameAnchor=$l(f);const{channels:m}=this,{symbol:b}=m;if(b){const{fill:_,stroke:g}=m;b.hint={fill:_?_.value===b.value?"color":"currentColor":this.fill??"currentColor",stroke:g?g.value===b.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,r:u,rotate:c,symbol:h}=i,{r:p,rotate:d,symbol:m}=this,[b,_]=No(this,r),g=m===Qr,v=u?void 0:p*p*Math.PI;return gu(p)&&(e=[]),Gt("svg:g",o).call(Ye,this,r,o).call(Ne,this,{x:f&&a,y:s&&l}).call(w=>w.selectAll().data(e).enter().append(g?"circle":"path").call(We,this).call(g?k=>{k.attr("cx",f?x=>f[x]:b).attr("cy",s?x=>s[x]:_).attr("r",u?x=>u[x]:p)}:k=>{k.attr("transform",qu`translate(${f?x=>f[x]:b},${s?x=>s[x]:_})${c?x=>` rotate(${c[x]})`:d?` rotate(${d})`:""}`).attr("d",u&&h?x=>{const S=Yn();return h[x].draw(S,u[x]*u[x]*Math.PI),S}:u?x=>{const S=Yn();return m.draw(S,u[x]*u[x]*Math.PI),S}:h?x=>{const S=Yn();return h[x].draw(S,v),S}:(()=>{const x=Yn();return m.draw(x,v),x})())}).call(Rn,this,i)).node()}}function oo(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=To(e,n)),new Tk(t,{...i,x:e,y:n})}const Ck={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class gb extends he{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:l}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:xu(n),optional:!0}},n,Ck),this.z=o,this.curve=ib(a,l),Lo(this,n)}filter(e){return e}project(e,n,i){this.curve!==hr&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:l}=i,{curve:f}=this;return Gt("svg:g",o).call(Ye,this,r,o).call(Ne,this,n).call(s=>s.selectAll().data(Bg(e,[a,l],this,i)).enter().append("path").call(We,this).call(zg,this,i).call(u9,this,i,o).attr("d",f===hr&&o.projection?Ak(o.projection,a,l):Wm().curve(f).defined(u=>u>=0).x(u=>a[u]).y(u=>l[u]))).node()}}function Ak(t,e,n){const i=cl(t);return e=fn(e),n=fn(n),r=>{let o=[];const a=[o];for(const l of r)l===-1?(o=[],a.push(o)):o.push([e[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function Ek(t,{x:e,y:n,...i}={}){return[e,n]=To(e,n),new gb(t,{...i,x:e,y:n})}function $k(t,{x:e=Cl,y:n=fe,...i}={}){return new gb(t,rb({...i,x:e,y:n}))}const Nk={ariaLabel:"tick",fill:null,stroke:"currentColor"};class Dk extends he{constructor(e,n,i){super(e,n,i,Nk),Lo(this,i)}render(e,n,i,r,o){return Gt("svg:g",o).call(Ye,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(We,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(Rn,this,i).call(Pl,this,i,o)).node()}}class Fk extends Dk{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=zt(a),this.insetBottom=zt(l)}_transform(e,n,{x:i}){e.call(Ne,n,{x:i},ye,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function Yl(t,{x:e=fe,...n}={}){return new Fk(t,{...n,x:e})}function Lk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){H(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&W(e),t[4](null)}}}function Ik(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;qe(()=>{const f=De({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Yl(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(f)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Gn extends Ot{constructor(e){super(),Pt(this,e,Ik,Lk,Rt,{pattern:3,width:0,height:1})}}function Rk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){H(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&W(e),t[4](null)}}}function Pk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;qe(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=De({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[wk(f,{x:(u,c)=>c+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Cn extends Ot{constructor(e){super(),Pt(this,e,Pk,Rk,Rt,{pattern:3,width:0,height:1})}}function Ok(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){H(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&W(e),t[4](null)}}}function Uk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;qe(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=De({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[kk(f,{x:(u,c)=>c+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){oe[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class jn extends Ot{constructor(e){super(),Pt(this,e,Uk,Ok,Rt,{pattern:3,width:0,height:1})}}function zk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px"),we(e,"width",t[0]+"px"),we(e,"margin","auto")},m(o,a){H(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r),a&1&&we(e,"width",o[0]+"px")},i:_t,o:_t,d(o){o&&W(e),t[7](null)}}}function Bk(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{width:a=800}=e,{height:l=50}=e,f,s=null,u;const c=async m=>{o?n(6,s=o):(n(6,s=await Us(m)),console.log(`Loaded ${m}, sr= ${s.sampleRate}`)),u=s.sampleRate};let h=null;const p=(m,b)=>{b&&(h=Ka(b,m,.5))};qe(()=>{if(n(2,f.textContent="",f),!h)return;const m=De({width:a,height:l,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[$k(h,{x:(b,_)=>_/u,y:b=>b})]});f.appendChild(m)});function d(m){oe[m?"unshift":"push"](()=>{f=m,n(2,f)})}return t.$$set=m=>{"pattern"in m&&n(3,i=m.pattern),"audioFile"in m&&n(4,r=m.audioFile),"cachedAudio"in m&&n(5,o=m.cachedAudio),"width"in m&&n(0,a=m.width),"height"in m&&n(1,l=m.height)},t.$$.update=()=>{t.$$.dirty&16&&c(r),t.$$.dirty&72&&p(i,s)},[a,l,f,i,r,o,s,d]}class Xn extends Ot{constructor(e){super(),Pt(this,e,Bk,zk,Rt,{pattern:3,audioFile:4,cachedAudio:5,width:0,height:1})}}function qk(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=N(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){H(l,e,f),y(e,n),t[7](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&W(e),t[7](null),o=!1,a()}}}function Yk(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{currentTrialNumber:a=-1}=e,l=null;const f=async d=>{o?(n(6,l=o),console.log("used cached audio")):(n(6,l=await Us(d)),console.log(`loaded ${d}, sr= ${l.sampleRate}`))};let s=null,u;const c=(d,m)=>{m&&u&&(s=Ka(m,d),zs(s,m.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};Zn(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function p(d){oe[d?"unshift":"push"](()=>{u=d,n(0,u)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"cachedAudio"in d&&n(4,o=d.cachedAudio),"currentTrialNumber"in d&&n(5,a=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&32&&a>-1&&window.setTimeout(h,200),t.$$.dirty&68&&c(i,l)},[u,h,i,r,o,a,l,p]}class ao extends Ot{constructor(e){super(),Pt(this,e,Yk,qk,Rt,{pattern:2,audioFile:3,cachedAudio:4,currentTrialNumber:5})}}function ud(t,e,n){const i=t.slice();return i[8]=e[n],i}function cd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=rt(n),e.__value=t[8],st(e,e.__value)},m(r,o){H(r,e,o),y(e,i)},p:_t,d(r){r&&W(e)}}}function Wk(t){let e,n,i,r,o,a,l,f=(ha*1e3).toFixed(0)+"",s,u,c,h,p,d,m,b,_=t[0].toFixed(1)+"",g,v,w=(t[2]*1e3).toFixed(1)+"",k,x,S,T,E,F,C,L,R,G,A,B,z,J,Z,X,P,j,Q,at,tt=Bt(t[5]),V=[];for(let q=0;q<tt.length;q+=1)V[q]=cd(ud(t,tt,q));return R=new ao({props:{pattern:t[1],audioFile:t[3]}}),A=new Xn({props:{pattern:t[1],audioFile:t[3],width:na,height:ia}}),z=new Gn({props:{pattern:t[1],width:na,height:ia}}),Z=new Cn({props:{pattern:t[1],width:na,height:ia}}),P=new jn({props:{pattern:t[1],width:na,height:ia}}),{c(){e=M("main"),n=M("h2"),n.textContent="Playground",i=N(),r=M("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=N(),a=M("div"),l=rt("inter-onset interval (IOI): "),s=rt(f),u=rt(" milliseconds ("),c=rt(t[4]),h=rt(` bpm)
    `),p=M("label"),d=rt(`deviation as percent of IOI
      `),m=M("input"),b=N(),g=rt(_),v=rt(`
      (`),k=rt(w),x=rt(" milliseconds)"),S=N(),T=M("label"),E=rt(`instrument sample:
      `),F=M("select");for(let q=0;q<V.length;q+=1)V[q].c();C=N(),L=M("div"),ht(R.$$.fragment),G=N(),ht(A.$$.fragment),B=N(),ht(z.$$.fragment),J=N(),ht(Z.$$.fragment),X=N(),ht(P.$$.fragment),I(m,"type","range"),I(m,"min","-20"),I(m,"max","20"),I(m,"step","1"),I(p,"class","svelte-1sot113"),t[3]===void 0&&hn(()=>t[7].call(F)),I(T,"class","svelte-1sot113"),I(L,"class","stimuli svelte-1sot113")},m(q,D){H(q,e,D),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,s),y(a,u),y(a,c),y(a,h),y(a,p),y(p,d),y(p,m),st(m,t[0]),y(p,b),y(p,g),y(p,v),y(p,k),y(p,x),y(a,S),y(a,T),y(T,E),y(T,F);for(let $=0;$<V.length;$+=1)V[$]&&V[$].m(F,null);_e(F,t[3],!0),y(e,C),y(e,L),ut(R,L,null),y(L,G),ut(A,L,null),y(L,B),ut(z,L,null),y(L,J),ut(Z,L,null),y(L,X),ut(P,L,null),j=!0,Q||(at=[gt(m,"change",t[6]),gt(m,"input",t[6]),gt(F,"change",t[7])],Q=!0)},p(q,[D]){if((!j||D&16)&&$t(c,q[4]),D&1&&st(m,q[0]),(!j||D&1)&&_!==(_=q[0].toFixed(1)+"")&&$t(g,_),(!j||D&4)&&w!==(w=(q[2]*1e3).toFixed(1)+"")&&$t(k,w),D&32){tt=Bt(q[5]);let ot;for(ot=0;ot<tt.length;ot+=1){const pt=ud(q,tt,ot);V[ot]?V[ot].p(pt,D):(V[ot]=cd(pt),V[ot].c(),V[ot].m(F,null))}for(;ot<V.length;ot+=1)V[ot].d(1);V.length=tt.length}D&40&&_e(F,q[3]);const $={};D&2&&($.pattern=q[1]),D&8&&($.audioFile=q[3]),R.$set($);const O={};D&2&&(O.pattern=q[1]),D&8&&(O.audioFile=q[3]),A.$set(O);const et={};D&2&&(et.pattern=q[1]),z.$set(et);const U={};D&2&&(U.pattern=q[1]),Z.$set(U);const mt={};D&2&&(mt.pattern=q[1]),P.$set(mt)},i(q){j||(Y(R.$$.fragment,q),Y(A.$$.fragment,q),Y(z.$$.fragment,q),Y(Z.$$.fragment,q),Y(P.$$.fragment,q),j=!0)},o(q){K(R.$$.fragment,q),K(A.$$.fragment,q),K(z.$$.fragment,q),K(Z.$$.fragment,q),K(P.$$.fragment,q),j=!1},d(q){q&&W(e),Ve(V,q),ct(R),ct(A),ct(z),ct(Z),ct(P),Q=!1,$e(at)}}}let na=600,ia=100,ha=.5,Hk=6,Vk=3,Gk=!0,jk=0;function Xk(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],l=5,f=[];function s(){l=xe(this.value),n(0,l)}function u(){a=_i(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=l/100*ha),t.$$.dirty&6&&(n(1,f=yi(Hk,ha,Vk,r,Gk,jk)),console.log("generated pattern",f))},n(4,i=1/ha*60),[l,f,r,a,i,o,s,u]}class Zk extends Ot{constructor(e){super(),Pt(this,e,Xk,Wk,Rt,{})}}var bb={exports:{}};(function(t,e){(function(n,i){i()})(yr,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,c){var h=new XMLHttpRequest;h.open("GET",s),h.responseType="blob",h.onload=function(){f(h.response,u,c)},h.onerror=function(){console.error("could not download file")},h.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof yr=="object"&&yr.global===yr?yr:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(s,u,c){var h=a.URL||a.webkitURL,p=document.createElement("a");u=u||s.name||"download",p.download=u,p.rel="noopener",typeof s=="string"?(p.href=s,p.origin===location.origin?o(p):r(p.href)?i(s,u,c):o(p,p.target="_blank")):(p.href=h.createObjectURL(s),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,c){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,c),u);else if(r(s))i(s,u,c);else{var h=document.createElement("a");h.href=s,h.target="_blank",setTimeout(function(){o(h)})}}:function(s,u,c,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,c);var p=s.type==="application/octet-stream",d=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||l)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var v=b.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},b.readAsDataURL(s)}else{var _=a.URL||a.webkitURL,g=_.createObjectURL(s);h?h.location=g:location.href=g,h=null,setTimeout(function(){_.revokeObjectURL(g)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(bb);var Kk=bb.exports;const Za=T0(Kk);function Dt(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}Dt.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};Dt.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};Dt.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};Dt.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=_b(0,t.length-1);return this.activate(t[e]),this};Dt.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=_b(0,t.length-1);this.activate(t[e])};Dt.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};Dt.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};Dt.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};Dt.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Dt.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};Dt.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};Dt.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};Dt.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};Dt.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};Dt.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};Dt.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};Dt.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};Dt.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};Dt.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};Dt.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};Dt.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const Xu=function(){};Xu.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};Xu.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};Dt.prototype.checkErr=new Xu;function _b(t,e){return Math.floor(Math.random()*(e-t+1))+t}function hd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,G,A,B,z,J,Z,X,P,j,Q,at,tt,V,q;return{c(){e=M("div"),n=M("label"),i=rt(`ID:
        `),r=M("input"),o=N(),a=M("label"),l=rt(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",b=M("option"),b.textContent="55-60",_=N(),g=M("label"),v=rt(`Gender:
        `),w=M("input"),k=N(),x=M("label"),S=rt(`Highest finished education (select the best fitting one):
        `),T=M("select"),E=M("option"),E.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",G=N(),A=M("label"),B=rt(`Which music instruments do you play?
        `),z=M("input"),J=N(),Z=M("label"),X=rt(`For how many years do you roughly play it/them?
        `),P=M("input"),j=N(),Q=M("label"),at=rt(`How many years of experience do you have with visualization?
        `),tt=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",st(s,s.__value),u.__value="25-29",st(u,u.__value),c.__value="30-34",st(c,c.__value),h.__value="35-39",st(h,h.__value),p.__value="40-44",st(p,p.__value),d.__value="45-49",st(d,d.__value),m.__value="50-54",st(m,m.__value),b.__value="55-60",st(b,b.__value),t[6]===void 0&&hn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(g,"class","svelte-u6a8gr"),E.__value="none",st(E,E.__value),F.__value="highs",st(F,F.__value),C.__value="bachelor",st(C,C.__value),L.__value="master",st(L,L.__value),R.__value="phd",st(R,R.__value),t[8]===void 0&&hn(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(A,"class","svelte-u6a8gr"),I(P,"type","number"),I(P,"min","0"),I(P,"step","1"),I(Z,"class","svelte-u6a8gr"),I(tt,"type","number"),I(tt,"min","0"),I(tt,"step","1"),I(Q,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(D,$){H(D,e,$),y(e,n),y(n,i),y(n,r),st(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,b),_e(f,t[6],!0),y(e,_),y(e,g),y(g,v),y(g,w),st(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,E),y(T,F),y(T,C),y(T,L),y(T,R),_e(T,t[8],!0),y(e,G),y(e,A),y(A,B),y(A,z),st(z,t[9]),y(e,J),y(e,Z),y(Z,X),y(Z,P),st(P,t[10]),y(e,j),y(e,Q),y(Q,at),y(Q,tt),st(tt,t[11]),V||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(P,"input",t[27]),gt(tt,"input",t[28])],V=!0)},p(D,$){$[0]&32&&r.value!==D[5]&&st(r,D[5]),$[0]&64&&_e(f,D[6]),$[0]&128&&w.value!==D[7]&&st(w,D[7]),$[0]&256&&_e(T,D[8]),$[0]&512&&z.value!==D[9]&&st(z,D[9]),$[0]&1024&&xe(P.value)!==D[10]&&st(P,D[10]),$[0]&2048&&xe(tt.value)!==D[11]&&st(tt,D[11])},d(D){D&&W(e),V=!1,$e(q)}}}function dd(t){let e,n,i,r,o=t[14]&&pd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=N(),o&&o.c(),i=Fn()},m(a,l){H(a,e,l),H(a,n,l),o&&o.m(a,l),H(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&Y(o,1)):(o=pd(a),o.c(),Y(o,1),o.m(i.parentNode,i)):o&&(Ht(),K(o,1,1,()=>{o=null}),Vt())},i(a){r||(Y(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(W(e),W(n),W(i)),o&&o.d(a)}}}function pd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,b,_,g,v;const w=[Qk,Jk],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(b=x(t))&&(_=k[b]=w[b](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=N(),i=M("p"),r=rt("Test number "),a=rt(o),l=rt(" / "),s=rt(f),u=N(),c=M("p"),h=rt("Trial number "),d=rt(p),m=N(),_&&_.c(),g=Fn()},m(S,T){H(S,e,T),H(S,n,T),H(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),H(S,u,T),H(S,c,T),y(c,h),y(c,d),H(S,m,T),~b&&k[b].m(S,T),H(S,g,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&$t(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&$t(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&$t(d,p);let E=b;b=x(S),b===E?~b&&k[b].p(S,T):(_&&(Ht(),K(k[E],1,1,()=>{k[E]=null}),Vt()),~b?(_=k[b],_?_.p(S,T):(_=k[b]=w[b](S),_.c()),Y(_,1),_.m(g.parentNode,g)):_=null)},i(S){v||(Y(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(W(e),W(n),W(i),W(u),W(c),W(m),W(g)),~b&&k[b].d(S)}}}function Jk(t){let e,n,i,r;const o=[iM,nM,eM,tM],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Fn()},m(f,s){~e&&a[e].m(f,s),H(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Ht(),K(a[u],1,1,()=>{a[u]=null}),Vt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),Y(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(Y(n),r=!0)},o(f){K(n),r=!1},d(f){f&&W(i),~e&&a[e].d(f)}}}function Qk(t){let e,n,i,r;return e=new ao({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=N(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),H(o,n,a),H(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(Y(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(W(n),W(i)),ct(e,o)}}}function tM(t){let e,n;return e=new jn({props:{pattern:t[0],width:Wl,height:Hl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function eM(t){let e,n;return e=new Cn({props:{pattern:t[0],width:Wl,height:Hl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function nM(t){let e,n;return e=new Gn({props:{pattern:t[0],width:Wl,height:Hl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function iM(t){let e,n;return e=new Xn({props:{pattern:t[0],audioFile:t[1],width:Wl,height:Hl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function md(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=rt(`Any final feedback?
        `),r=M("textarea")},m(l,f){H(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&st(r,l[12])},d(l){l&&W(e),o=!1,a()}}}function gd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=N(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){H(l,e,f),H(l,n,f),H(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:_t,d(l){l&&(W(e),W(n),W(i)),o=!1,a()}}}function bd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){H(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:_t,d(r){r&&W(e),n=!1,i()}}}function rM(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&hd(t),u=t[3]==="tests"&&dd(t),c=t[3]==="feedback"&&md(t),h=t[3]==="done"&&gd(t),p=!t[15]&&t[3]!=="done"&&bd(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study",i=N(),s&&s.c(),r=N(),u&&u.c(),o=N(),c&&c.c(),a=N(),h&&h.c(),l=N(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){H(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=hd(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&Y(u,1)):(u=dd(d),u.c(),Y(u,1),u.m(e,o)):u&&(Ht(),K(u,1,1,()=>{u=null}),Vt()),d[3]==="feedback"?c?c.p(d,m):(c=md(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=gd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=bd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(Y(u),f=!0)},o(d){K(u),f=!1},d(d){d&&W(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let _d=.5;const Rf=20;let oM=6,aM=!0,lM=0,Wl=600,Hl=100;function fM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,b=0,_="",g=0,v,w={},k=[],x,S,T=!1,E=!1,F=!1,C="tick",L=Rf,R=3,G=[],A=[],B=0;const z=[];Zn(()=>{document.querySelector("html").addEventListener("keyup",tt)});const J=()=>{S=new Dt({ratio:{firstVal:Rf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Rf],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function Z(){l==="start"?(n(2,a=Ja(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),X()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function X(){J(),n(13,g=0),v=0,x=0,n(14,T=!0),A=[],k=[],s=new Date,P()}function P(){console.log("Starting trial "+g),w={},n(15,E=!0),j()}function j(){let dt=Math.round(S.getLast("ratio"));dt=Math.random()<.5?dt:-dt,w.deviation=dt,n(20,L=dt),console.log("generated pattern",G),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function Q(ft){if(!E)return;n(15,E=!1),w.decisionChoice=ft,w.errorCode=0;const dt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(dt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,g++,g),S.reversalLimitReached("ratio")?at():P()}function at(){n(14,T=!1),V(),A=[],B=S.getFinalVal("ratio");for(let dt=0;dt<k.length;dt++)A[dt]=k[dt].deviation;console.log(A);const ft=new Date;z.push({encoding:C,audioFile:o,final:B,data:A,score:x,testNumber:f,trialCount:g+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ft-s)/1e3}),n(4,f++,f)}function tt(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":Q(0);break;case"ArrowRight":Q(1);break;case"PageDown":!E&&l!=="done"&&Z()}}function V(){`${x}`,g+1,`${(x/(g+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:b,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ft);const dt=JSON.stringify(ft,void 0,2),Ut=new Blob([dt],{type:"text/plain;charset=utf-8"});Za(Ut,"results.json")}function D(){u=this.value,n(5,u)}function $(){c=_i(this),n(6,c)}function O(){h=this.value,n(7,h)}function et(){p=_i(this),n(8,p)}function U(){d=this.value,n(9,d)}function mt(){m=xe(this.value),n(10,m)}function ot(){b=xe(this.value),n(11,b)}function pt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*_d),t.$$.dirty[0]&2097153&&(n(0,G=yi(oM,_d,R,i,aM,lM)),console.log("generated pattern",G))},[G,o,a,l,f,u,c,h,p,d,m,b,_,g,T,E,F,C,Z,q,L,i,D,$,O,et,U,mt,ot,pt]}class sM extends Ot{constructor(e){super(),Pt(this,e,fM,rM,Rt,{},null,[-1,-1])}}function yd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,G,A,B,z,J,Z,X,P,j,Q,at,tt,V,q;return{c(){e=M("div"),n=M("label"),i=rt(`ID:
        `),r=M("input"),o=N(),a=M("label"),l=rt(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",b=M("option"),b.textContent="55-60",_=N(),g=M("label"),v=rt(`Gender:
        `),w=M("input"),k=N(),x=M("label"),S=rt(`Highest finished education (select the best fitting one):
        `),T=M("select"),E=M("option"),E.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",L=M("option"),L.textContent="master",R=M("option"),R.textContent="phd",G=N(),A=M("label"),B=rt(`Which music instruments do you play?
        `),z=M("input"),J=N(),Z=M("label"),X=rt(`For how many years do you roughly play it/them?
        `),P=M("input"),j=N(),Q=M("label"),at=rt(`How many years of experience do you have with visualization?
        `),tt=M("input"),I(r,"type","text"),I(r,"placeholder","ID"),I(n,"class","svelte-u6a8gr"),s.__value="20-24",st(s,s.__value),u.__value="25-29",st(u,u.__value),c.__value="30-34",st(c,c.__value),h.__value="35-39",st(h,h.__value),p.__value="40-44",st(p,p.__value),d.__value="45-49",st(d,d.__value),m.__value="50-54",st(m,m.__value),b.__value="55-60",st(b,b.__value),t[6]===void 0&&hn(()=>t[23].call(f)),I(a,"class","svelte-u6a8gr"),I(w,"type","text"),I(w,"placeholder","m, f, d, or self-describe"),I(g,"class","svelte-u6a8gr"),E.__value="none",st(E,E.__value),F.__value="highs",st(F,F.__value),C.__value="bachelor",st(C,C.__value),L.__value="master",st(L,L.__value),R.__value="phd",st(R,R.__value),t[8]===void 0&&hn(()=>t[25].call(T)),I(x,"class","svelte-u6a8gr"),I(z,"type","text"),I(z,"placeholder","free text"),I(A,"class","svelte-u6a8gr"),I(P,"type","number"),I(P,"min","0"),I(P,"step","1"),I(Z,"class","svelte-u6a8gr"),I(tt,"type","number"),I(tt,"min","0"),I(tt,"step","1"),I(Q,"class","svelte-u6a8gr"),I(e,"class","demo-form svelte-u6a8gr")},m(D,$){H(D,e,$),y(e,n),y(n,i),y(n,r),st(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,b),_e(f,t[6],!0),y(e,_),y(e,g),y(g,v),y(g,w),st(w,t[7]),y(e,k),y(e,x),y(x,S),y(x,T),y(T,E),y(T,F),y(T,C),y(T,L),y(T,R),_e(T,t[8],!0),y(e,G),y(e,A),y(A,B),y(A,z),st(z,t[9]),y(e,J),y(e,Z),y(Z,X),y(Z,P),st(P,t[10]),y(e,j),y(e,Q),y(Q,at),y(Q,tt),st(tt,t[11]),V||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(P,"input",t[27]),gt(tt,"input",t[28])],V=!0)},p(D,$){$[0]&32&&r.value!==D[5]&&st(r,D[5]),$[0]&64&&_e(f,D[6]),$[0]&128&&w.value!==D[7]&&st(w,D[7]),$[0]&256&&_e(T,D[8]),$[0]&512&&z.value!==D[9]&&st(z,D[9]),$[0]&1024&&xe(P.value)!==D[10]&&st(P,D[10]),$[0]&2048&&xe(tt.value)!==D[11]&&st(tt,D[11])},d(D){D&&W(e),V=!1,$e(q)}}}function wd(t){let e,n,i,r,o=t[14]&&vd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=N(),o&&o.c(),i=Fn()},m(a,l){H(a,e,l),H(a,n,l),o&&o.m(a,l),H(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&Y(o,1)):(o=vd(a),o.c(),Y(o,1),o.m(i.parentNode,i)):o&&(Ht(),K(o,1,1,()=>{o=null}),Vt())},i(a){r||(Y(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(W(e),W(n),W(i)),o&&o.d(a)}}}function vd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,b,_,g,v;const w=[cM,uM],k=[];function x(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(b=x(t))&&(_=k[b]=w[b](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=N(),i=M("p"),r=rt("Test number "),a=rt(o),l=rt(" / "),s=rt(f),u=N(),c=M("p"),h=rt("Trial number "),d=rt(p),m=N(),_&&_.c(),g=Fn()},m(S,T){H(S,e,T),H(S,n,T),H(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),H(S,u,T),H(S,c,T),y(c,h),y(c,d),H(S,m,T),~b&&k[b].m(S,T),H(S,g,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&$t(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&$t(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&$t(d,p);let E=b;b=x(S),b===E?~b&&k[b].p(S,T):(_&&(Ht(),K(k[E],1,1,()=>{k[E]=null}),Vt()),~b?(_=k[b],_?_.p(S,T):(_=k[b]=w[b](S),_.c()),Y(_,1),_.m(g.parentNode,g)):_=null)},i(S){v||(Y(_),v=!0)},o(S){K(_),v=!1},d(S){S&&(W(e),W(n),W(i),W(u),W(c),W(m),W(g)),~b&&k[b].d(S)}}}function uM(t){let e,n,i,r;const o=[mM,pM,dM,hM],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Fn()},m(f,s){~e&&a[e].m(f,s),H(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Ht(),K(a[u],1,1,()=>{a[u]=null}),Vt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),Y(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(Y(n),r=!0)},o(f){K(n),r=!1},d(f){f&&W(i),~e&&a[e].d(f)}}}function cM(t){let e,n,i,r;return e=new ao({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ht(e.$$.fragment),n=N(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){ut(e,o,a),H(o,n,a),H(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(Y(e.$$.fragment,o),r=!0)},o(o){K(e.$$.fragment,o),r=!1},d(o){o&&(W(n),W(i)),ct(e,o)}}}function hM(t){let e,n;return e=new jn({props:{pattern:t[0],width:Vl,height:Gl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function dM(t){let e,n;return e=new Cn({props:{pattern:t[0],width:Vl,height:Gl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function pM(t){let e,n;return e=new Gn({props:{pattern:t[0],width:Vl,height:Gl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function mM(t){let e,n;return e=new Xn({props:{pattern:t[0],audioFile:t[1],width:Vl,height:Gl}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function xd(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=rt(`Any final feedback?
        `),r=M("textarea")},m(l,f){H(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&st(r,l[12])},d(l){l&&W(e),o=!1,a()}}}function kd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=N(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){H(l,e,f),H(l,n,f),H(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:_t,d(l){l&&(W(e),W(n),W(i)),o=!1,a()}}}function Md(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){H(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:_t,d(r){r&&W(e),n=!1,i()}}}function gM(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&yd(t),u=t[3]==="tests"&&wd(t),c=t[3]==="feedback"&&xd(t),h=t[3]==="done"&&kd(t),p=!t[15]&&t[3]!=="done"&&Md(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study (Within-Participant Variance)",i=N(),s&&s.c(),r=N(),u&&u.c(),o=N(),c&&c.c(),a=N(),h&&h.c(),l=N(),p&&p.c(),I(e,"class","svelte-u6a8gr")},m(d,m){H(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=yd(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&Y(u,1)):(u=wd(d),u.c(),Y(u,1),u.m(e,o)):u&&(Ht(),K(u,1,1,()=>{u=null}),Vt()),d[3]==="feedback"?c?c.p(d,m):(c=xd(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=kd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=Md(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(Y(u),f=!0)},o(d){K(u),f=!1},d(d){d&&W(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let Sd=.5;const Pf=20;let bM=6,_M=!0,yM=0,Vl=600,Gl=100;function wM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,b=0,_="",g=0,v,w={},k=[],x,S,T=!1,E=!1,F=!1,C="tick",L=Pf,R=3,G=[],A=[],B=0;const z=[];Zn(()=>{document.querySelector("html").addEventListener("keyup",tt)});const J=()=>{S=new Dt({ratio:{firstVal:Pf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Pf],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function Z(){l==="start"?(n(2,a=Ja(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),X()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function X(){J(),n(13,g=0),v=0,x=0,n(14,T=!0),A=[],k=[],s=new Date,P()}function P(){console.log("Starting trial "+g),w={},n(15,E=!0),j()}function j(){let dt=Math.round(S.getLast("ratio"));dt=Math.random()<.5?dt:-dt,w.deviation=dt,n(20,L=dt),console.log("generated pattern",G),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function Q(ft){if(!E)return;n(15,E=!1),w.decisionChoice=ft,w.errorCode=0;const dt=x;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&x++,w.errorCode==0&&(S.next(dt!=x),k[k.length]=w),w.errorCode==0&&v++,n(13,g++,g),S.reversalLimitReached("ratio")?at():P()}function at(){n(14,T=!1),V(),A=[],B=S.getFinalVal("ratio");for(let dt=0;dt<k.length;dt++)A[dt]=k[dt].deviation;console.log(A);const ft=new Date;z.push({encoding:C,audioFile:o,final:B,data:A,score:x,testNumber:f,trialCount:g+1,trials:k,validTrialCount:v+1,testTimeSeconds:(ft-s)/1e3}),n(4,f++,f)}function tt(ft){switch(console.log(ft.key),ft.key){case"ArrowLeft":Q(0);break;case"ArrowRight":Q(1);break;case"PageDown":!E&&l!=="done"&&Z()}}function V(){`${x}`,g+1,`${(x/(g+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const ft={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:b,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(ft);const dt=JSON.stringify(ft,void 0,2),Ut=new Blob([dt],{type:"text/plain;charset=utf-8"});Za(Ut,"results.json")}function D(){u=this.value,n(5,u)}function $(){c=_i(this),n(6,c)}function O(){h=this.value,n(7,h)}function et(){p=_i(this),n(8,p)}function U(){d=this.value,n(9,d)}function mt(){m=xe(this.value),n(10,m)}function ot(){b=xe(this.value),n(11,b)}function pt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=L/100*Sd),t.$$.dirty[0]&2097153&&(n(0,G=yi(bM,Sd,R,i,_M,yM)),console.log("generated pattern",G))},[G,o,a,l,f,u,c,h,p,d,m,b,_,g,T,E,F,C,Z,q,L,i,D,$,O,et,U,mt,ot,pt]}class vM extends Ot{constructor(e){super(),Pt(this,e,wM,gM,Rt,{},null,[-1,-1])}}function xM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){H(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&W(e),t[6](null)}}}function kM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=100}=e,f;qe(()=>{const u=De({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Yl(i,{x:c=>c}),Ul(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${h+1}`})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){oe[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class yb extends Ot{constructor(e){super(),Pt(this,e,kM,xM,Rt,{data:3,domain:4,title:5,width:0,height:1})}}function MM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){H(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&W(e),t[5](null)}}}function SM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;qe(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.finals)})),u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[oo(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),ql(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Ol([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Kn(s),d=1.96*(fo(s)/Math.sqrt(u)),m=c-d,b=c+d;return{mean:c,low:m,high:b}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Zu extends Ot{constructor(e){super(),Pt(this,e,SM,MM,Rt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function TM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){H(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&W(e),t[5](null)}}}function CM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;qe(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.trialCounts)})),u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[oo(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),ql(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Ol([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Kn(s),d=1.96*(fo(s)/Math.sqrt(u)),m=c-d,b=c+d;return{mean:c,low:m,high:b}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Ku extends Ot{constructor(e){super(),Pt(this,e,CM,TM,Rt,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function Td(t,e,n){const i=t.slice();return i[8]=e[n],i}function Cd(t,e,n){const i=t.slice();return i[11]=e[n],i}function Ad(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new yb({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=M("b"),i=rt(n),r=N(),ht(o.$$.fragment)},m(l,f){H(l,e,f),y(e,i),H(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&4)&&n!==(n=l[11].encoding+"")&&$t(i,n);const s={};f&4&&(s.data=l[11].finals),f&4&&(s.title=l[11].encoding),f&2&&(s.domain=[0,l[1]]),o.$set(s)},i(l){a||(Y(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(W(e),W(r)),ct(o,l)}}}function Ed(t){let e,n,i,r=t[8].demographics.partID+"",o,a,l,f,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=M("div"),n=M("b"),i=rt("P"),o=rt(r),a=rt(":"),l=N(),f=new Mb(!1),u=N(),f.a=u,we(e,"text-align","left")},m(c,h){H(c,e,h),y(e,n),y(n,i),y(n,o),y(n,a),y(e,l),f.m(s,e),y(e,u)},p(c,h){h&1&&r!==(r=c[8].demographics.partID+"")&&$t(o,r),h&1&&s!==(s=c[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&f.p(s)},d(c){c&&W(e)}}}function AM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C;c=new Zu({props:{stimuli:t[2]}}),b=new Ku({props:{stimuli:t[2]}});let L=Bt(t[2]),R=[];for(let z=0;z<L.length;z+=1)R[z]=Ad(Cd(t,L,z));const G=z=>K(R[z],1,1,()=>{R[z]=null});let A=Bt(t[0]),B=[];for(let z=0;z<A.length;z+=1)B[z]=Ed(Td(t,A,z));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=N(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=N(),a=M("input"),l=N(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values",u=N(),ht(c.$$.fragment),h=N(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts",m=N(),ht(b.$$.fragment),_=N(),g=M("div"),v=M("h3"),v.textContent="Final Values for Each Stimulus and All Participants",w=N();for(let z=0;z<R.length;z+=1)R[z].c();k=N(),x=M("div"),S=M("h3"),S.textContent="Feedback",T=N();for(let z=0;z<B.length;z+=1)B[z].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(z,J){H(z,e,J),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(b,p,null),y(e,_),y(e,g),y(g,v),y(g,w);for(let Z=0;Z<R.length;Z+=1)R[Z]&&R[Z].m(g,null);y(e,k),y(e,x),y(x,S),y(x,T);for(let Z=0;Z<B.length;Z+=1)B[Z]&&B[Z].m(x,null);E=!0,F||(C=gt(a,"input",t[3]),F=!0)},p(z,[J]){const Z={};J&4&&(Z.stimuli=z[2]),c.$set(Z);const X={};if(J&4&&(X.stimuli=z[2]),b.$set(X),J&6){L=Bt(z[2]);let P;for(P=0;P<L.length;P+=1){const j=Cd(z,L,P);R[P]?(R[P].p(j,J),Y(R[P],1)):(R[P]=Ad(j),R[P].c(),Y(R[P],1),R[P].m(g,null))}for(Ht(),P=L.length;P<R.length;P+=1)G(P);Vt()}if(J&1){A=Bt(z[0]);let P;for(P=0;P<A.length;P+=1){const j=Td(z,A,P);B[P]?B[P].p(j,J):(B[P]=Ed(j),B[P].c(),B[P].m(x,null))}for(;P<B.length;P+=1)B[P].d(1);B.length=A.length}},i(z){if(!E){Y(c.$$.fragment,z),Y(b.$$.fragment,z);for(let J=0;J<L.length;J+=1)Y(R[J]);E=!0}},o(z){K(c.$$.fragment,z),K(b.$$.fragment,z),R=R.filter(Boolean);for(let J=0;J<R.length;J+=1)K(R[J]);E=!1},d(z){z&&W(e),ct(c),ct(b),Ve(R,z),Ve(B,z),F=!1,C()}}}function EM(t,e,n){let i,r,o,a=[];const l=async u=>{const c=[],h=[];for(const p of u.target.files){const d=await p.text();c.push(JSON.parse(d)),h.push(p.name)}n(0,a=c),console.log(a)},f=u=>{if(u.lenght===0)return[];const c=[];for(const h of u)for(const p of h.tests){let d=p.encoding;(p.encoding==="audio"||p.encoding==="waveform")&&(d=`${p.encoding} + ${p.audioFile.startsWith("./Fluid")?"piano":"drums"}`),c.push({...h.demographics,...p,date:h.date,testType:d})}return console.log(c),c},s=u=>{if(u.length===0)return[];const c=ln(u,h=>h.testType).map(([h,p])=>{const d=p.map(m=>m.final);return{encoding:h,finals:d,finalMean:Kn(d),finalVar:Zi(d),trialCounts:p.map(m=>m.trialCount)}});return console.log(c),c};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=f(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ke(i.map(u=>Math.abs(u.final))))},[a,o,r,l,i]}class $M extends Ot{constructor(e){super(),Pt(this,e,EM,AM,Rt,{})}}function NM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){H(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&W(e),t[6](null)}}}function DM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=300}=e,f;qe(()=>{console.log(o),console.log(i);const u=De({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Yl(i,{x:c=>c,strokeWidth:.5}),Ul(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${Math.floor(h/3)+1}-${h%3+1}`,fill:"black",stroke:"white"})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){oe[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class FM extends Ot{constructor(e){super(),Pt(this,e,DM,NM,Rt,{data:3,domain:4,title:5,width:0,height:1})}}function LM(t){let e,n,i;return{c(){e=M("div"),I(e,"width",n=t[0]+"px"),I(e,"height",i=t[1]+"px")},m(r,o){H(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&I(e,"width",n),o&2&&i!==(i=r[1]+"px")&&I(e,"height",i)},i:_t,o:_t,d(r){r&&W(e),t[5](null)}}}function IM(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;qe(()=>{const s=i.map(c=>({partID:c.partID,...l(c.finals)}));console.log(i,s);const u=De({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.partID)},marks:[oo(s,{x:c=>c.mean,y:c=>c.partID,symbol:"diamond"}),oo(i,{x:c=>c.mean,y:c=>c.partID}),ql(s,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),Ol([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Kn(s),d=1.96*(fo(s)/Math.sqrt(u)),m=c-d,b=c+d;return{mean:c,low:m,high:b}}function f(s){oe[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"partis"in s&&n(3,i=s.partis),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class ra extends Ot{constructor(e){super(),Pt(this,e,IM,LM,Rt,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function $d(t,e,n){const i=t.slice();return i[13]=e[n],i}function Nd(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new FM({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=M("b"),i=rt(n),r=N(),ht(o.$$.fragment)},m(l,f){H(l,e,f),y(e,i),H(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&32)&&n!==(n=l[13].encoding+"")&&$t(i,n);const s={};f&32&&(s.data=l[13].finals),f&32&&(s.title=l[13].encoding),f&16&&(s.domain=[0,l[4]]),o.$set(s)},i(l){a||(Y(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(W(e),W(r)),ct(o,l)}}}function RM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,G,A,B,z,J,Z,X,P,j,Q,at;c=new Zu({props:{stimuli:t[5]}}),b=new Ku({props:{stimuli:t[5]}}),k=new ra({props:{partis:t[3]}}),E=new ra({props:{partis:t[2]}}),R=new ra({props:{partis:t[0]}}),z=new ra({props:{partis:t[1]}});let tt=Bt(t[5]),V=[];for(let D=0;D<tt.length;D+=1)V[D]=Nd($d(t,tt,D));const q=D=>K(V[D],1,1,()=>{V[D]=null});return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis (Within-Participant Variance)",i=N(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=N(),a=M("input"),l=N(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values per Stimulus",u=N(),ht(c.$$.fragment),h=N(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts per Stimulus",m=N(),ht(b.$$.fragment),_=N(),g=M("div"),v=M("h3"),v.textContent="Mean and CI of Final Values per Participant",w=N(),ht(k.$$.fragment),x=N(),S=M("h4"),S.textContent="Only Audio",T=N(),ht(E.$$.fragment),F=N(),C=M("h4"),C.textContent="Only Color",L=N(),ht(R.$$.fragment),G=N(),A=M("h4"),A.textContent="Only Waveform",B=N(),ht(z.$$.fragment),J=N(),Z=M("div"),X=M("h3"),X.textContent="Final Values for Each Stimulus and All Participants",P=N();for(let D=0;D<V.length;D+=1)V[D].c();I(a,"type","file"),I(a,"accept",".json"),a.multiple=!0},m(D,$){H(D,e,$),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),ut(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),ut(b,p,null),y(e,_),y(e,g),y(g,v),y(g,w),ut(k,g,null),y(g,x),y(g,S),y(g,T),ut(E,g,null),y(g,F),y(g,C),y(g,L),ut(R,g,null),y(g,G),y(g,A),y(g,B),ut(z,g,null),y(e,J),y(e,Z),y(Z,X),y(Z,P);for(let O=0;O<V.length;O+=1)V[O]&&V[O].m(Z,null);j=!0,Q||(at=gt(a,"input",t[6]),Q=!0)},p(D,[$]){const O={};$&32&&(O.stimuli=D[5]),c.$set(O);const et={};$&32&&(et.stimuli=D[5]),b.$set(et);const U={};$&8&&(U.partis=D[3]),k.$set(U);const mt={};$&4&&(mt.partis=D[2]),E.$set(mt);const ot={};$&1&&(ot.partis=D[0]),R.$set(ot);const pt={};if($&2&&(pt.partis=D[1]),z.$set(pt),$&48){tt=Bt(D[5]);let ft;for(ft=0;ft<tt.length;ft+=1){const dt=$d(D,tt,ft);V[ft]?(V[ft].p(dt,$),Y(V[ft],1)):(V[ft]=Nd(dt),V[ft].c(),Y(V[ft],1),V[ft].m(Z,null))}for(Ht(),ft=tt.length;ft<V.length;ft+=1)q(ft);Vt()}},i(D){if(!j){Y(c.$$.fragment,D),Y(b.$$.fragment,D),Y(k.$$.fragment,D),Y(E.$$.fragment,D),Y(R.$$.fragment,D),Y(z.$$.fragment,D);for(let $=0;$<tt.length;$+=1)Y(V[$]);j=!0}},o(D){K(c.$$.fragment,D),K(b.$$.fragment,D),K(k.$$.fragment,D),K(E.$$.fragment,D),K(R.$$.fragment,D),K(z.$$.fragment,D),V=V.filter(Boolean);for(let $=0;$<V.length;$+=1)K(V[$]);j=!1},d(D){D&&W(e),ct(c),ct(b),ct(k),ct(E),ct(R),ct(z),Ve(V,D),Q=!1,at()}}}function PM(t,e,n){let i,r,o,a,l,f,s,u=[];const c=async m=>{const b=[],_=[];for(const g of m.target.files){const v=await g.text();b.push(JSON.parse(v)),_.push(g.name)}n(7,u=b),console.log(u)},h=m=>{if(m.lenght===0)return[];const b=[];for(const _ of m)for(const g of _.tests){let v=g.encoding;(g.encoding==="audio"||g.encoding==="waveform")&&(v=`${g.encoding} + ${g.audioFile.startsWith("./Fluid")?"piano":"drums"}`),b.push({..._.demographics,...g,date:_.date,testType:v})}return console.log(b),b},p=m=>{if(m.length===0)return[];const b=ln(m,_=>_.testType).map(([_,g])=>{const v=g.map(w=>w.final);return{encoding:_,finals:v,finalMean:Kn(v),finalVar:Zi(v),trialCounts:g.map(w=>w.trialCount)}});return console.log(b),b},d=(m,b)=>{if(m.length===0)return[];b&&(m=m.filter(g=>g.testType===b));const _=ln(m,g=>g.partID).map(([g,v])=>{const w=v.map(k=>k.final);return{partID:g,finals:w,finalMean:Kn(w),finalVar:Zi(w),trialCounts:v.map(k=>k.trialCount)}});return console.log(_),_};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=h(u)),t.$$.dirty&256&&n(5,r=p(i)),t.$$.dirty&256&&n(4,o=ke(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=d(i)),t.$$.dirty&256&&n(2,l=d(i,"audio + piano")),t.$$.dirty&256&&n(1,f=d(i,"waveform + piano")),t.$$.dirty&256&&n(0,s=d(i,"color"))},[s,f,l,a,o,r,c,u,i]}class OM extends Ot{constructor(e){super(),Pt(this,e,PM,RM,Rt,{})}}function UM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){H(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&W(e),t[7](null)}}}function zM(t,e,n){let{title:i=void 0}=e,{width:r=600}=e,{height:o=200}=e,{data:a}=e,{x:l="x"}=e,{y:f="y"}=e,s;qe(()=>{n(2,s.textContent="",s);const c=De({title:i,width:r,height:o,x:{domain:[0,70]},marks:[Ek(a,{x:l,y:f,stroke:"#ccc"}),Bu([0])]});s.appendChild(c)});function u(c){oe[c?"unshift":"push"](()=>{s=c,n(2,s)})}return t.$$set=c=>{"title"in c&&n(3,i=c.title),"width"in c&&n(0,r=c.width),"height"in c&&n(1,o=c.height),"data"in c&&n(4,a=c.data),"x"in c&&n(5,l=c.x),"y"in c&&n(6,f=c.y)},[r,o,s,i,a,l,f,u]}class BM extends Ot{constructor(e){super(),Pt(this,e,zM,UM,Rt,{title:3,width:0,height:1,data:4,x:5,y:6})}}function Dd(t,e){return t==null?e:typeof t=="function"?t:n=>n[t]}function qM(t,e,n,i,r,o){const a=new Float64Array(o),l=(o-1)/(r-i);for(let f=0;f<t.length;++f){const s=t[f],u=e(s,f,t),c=n(s,f,t);if(!(Number.isFinite(u)&&Number.isFinite(c)))continue;const h=(u-i)*l,p=Math.floor(h),d=p+1;0<=p&&d<o?(a[p]+=(d-h)*c,a[d]+=(h-p)*c):p===-1?a[d]+=(h-p)*c:d===o&&(a[p]+=(d-h)*c)}return a}function Fd(t,e=!1){const n=new Float64Array(5),i=new Float64Array(4);YM(n,i,t);const r=Float64Array.of(0,i[1]-n[1]*i[0],i[2]-n[2]*i[0],i[3]-n[3]*i[0],-n[4]*i[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(i[0]+i[1]+i[2]+i[3])/o,l=(r[1]+r[2]+r[3]+r[4])/o;return{sigma:t,negative:e,a:n,b_causal:i,b_anticausal:r,sum_causal:a,sum_anticausal:l}}function YM(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),l=.6318/n,f=1.997/n,s=Float64Array.of(-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l),-a*Math.cos(f),a*Math.sin(f),-a*Math.cos(-f),a*Math.sin(-f)),u=n*2.5066282746310007,c=Float64Array.of(r[0],r[1],0,0,0,0,0,0),h=Float64Array.of(1,0,s[0],s[1],0,0,0,0,0,0);let p,d;for(d=2;d<8;d+=2){for(c[d]=s[d]*c[d-2]-s[d+1]*c[d-1],c[d+1]=s[d]*c[d-1]+s[d+1]*c[d-2],p=d-2;p>0;p-=2)c[p]+=s[d]*c[p-2]-s[d+1]*c[p-1],c[p+1]+=s[d]*c[p-1]+s[d+1]*c[p-2];for(p=0;p<=d;p+=2)c[p]+=r[d]*h[p]-r[d+1]*h[p+1],c[p+1]+=r[d]*h[p+1]+r[d+1]*h[p];for(h[d+2]=s[d]*h[d]-s[d+1]*h[d+1],h[d+3]=s[d]*h[d+1]+s[d+1]*h[d],p=d;p>0;p-=2)h[p]+=s[d]*h[p-2]-s[d+1]*h[p-1],h[p+1]+=s[d]*h[p-1]+s[d+1]*h[p-2]}for(d=0;d<4;++d)p=d<<1,e[d]=c[p]/u,t[d+1]=h[p+2]}function WM(t,e,n,i=1,r=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),l=r,f=HM){const s=i*2,u=i*3,c=i*4,h=i*n;let p,d;for(f(r,e,n,i,t.b_causal,3,t.a,4,t.sum_causal,a,t.sigma),d=4,p=c;d<n;++d,p+=i)r[d]=t.b_causal[0]*e[p]+t.b_causal[1]*e[p-i]+t.b_causal[2]*e[p-s]+t.b_causal[3]*e[p-u]-t.a[1]*r[d-1]-t.a[2]*r[d-2]-t.a[3]*r[d-3]-t.a[4]*r[d-4];for(f(o,e,n,-i,t.b_anticausal,4,t.a,4,t.sum_anticausal,a,t.sigma),d=4,p=h-i*5;d<n;++d,p-=i)o[d]=t.b_anticausal[1]*e[p+i]+t.b_anticausal[2]*e[p+s]+t.b_anticausal[3]*e[p+u]+t.b_anticausal[4]*e[p+c]-t.a[1]*o[d-1]-t.a[2]*o[d-2]-t.a[3]*o[d-3]-t.a[4]*o[d-4];if(t.negative)for(d=0,p=0;d<n;++d,p+=i)l[p]=r[d]+o[n-d-1];else for(d=0,p=0;d<n;++d,p+=i)l[p]=Math.max(0,r[d]+o[n-d-1]);return l}function HM(t,e,n,i,r,o,a,l,f,s){const u=Math.abs(i)*n,c=i<0?u+i:0;let h,p,d;for(p=0;p<l;++p)for(s[p]=p<=o?r[p]:0,d=1;d<=l&&d<=p;++d)s[p]-=a[d]*s[p-d];for(d=0;d<l;++d)for(t[d]=0,p=1;p<=d;++p)h=c+i*p,h>=0&&h<u&&(t[d]+=s[d-p]*e[h]);const m=e[c];if(m>0)for(d=0;d<l;++d)t[d]+=s[d]*m}function VM(t,e,n=0){const i=t.length;let r,o;for(let a=0;a<i;++a){const l=e(t[a],a,t);l!=null&&(r===void 0?l>=l&&(r=o=l):(l<r&&(r=l),l>o&&(o=l)))}return[r-n,o+n]}function GM(t,e){const n=t.map(e).filter(s=>s!=null&&s>=s);n.sort((s,u)=>s-u);const i=jM(n),r=Ld(n,.25),o=Ld(n,.75),a=n.length,l=(o-r)/1.34;return 1.06*(Math.min(i,l)||i||Math.abs(r)||1)*Math.pow(a,-.2)}function jM(t){const e=t.length;let n=0,i,r=0,o=0;for(let a=0;a<e;++a){const l=t[a];i=l-r,r+=i/++n,o+=i*(l-r)}return n>1?Math.sqrt(o/(n-1)):NaN}function Ld(t,e){const n=t.length;if(!n)return NaN;if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];const i=(n-1)*e,r=Math.floor(i),o=t[r];return o+(t[r+1]-o)*(i-r)}function XM(t,e={}){const{adjust:n=1,pad:i=3,bins:r=512}=e,o=Dd(e.x,_=>_),a=Dd(e.weight,()=>1/t.length);let l=e.bandwidth??n*GM(t,o);const[f,s]=e.extent??VM(t,o,i*l),u=qM(t,o,a,f,s,r),c=(s-f)/(r-1),h=u.some(_=>_<0);let p=Fd(l/c,h),d;function*m(_="x",g="y"){const v=b.grid(),w=1/c;for(let k=0;k<r;++k)yield{[_]:f+k*c,[g]:v[k]*w}}const b={[Symbol.iterator]:m,points:m,grid:()=>d||(d=WM(p,u,r)),extent:()=>[f,s],bandwidth(_){return arguments.length?(_!==l&&(l=_,d=null,p=Fd(l/c,h)),b):l}};return b}function ZM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){H(o,e,a),y(e,n),t[10](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&W(e),t[10](null)}}}function KM(t,e,n){let i,{values:r}=e,{title:o=""}=e,{xLabel:a="some value"}=e,{xDomain:l=void 0}=e,{width:f=1e3}=e,{height:s=100}=e,{bandwidth:u=.25}=e,{bins:c=256}=e,{pad:h=4}=e,p;qe(()=>{const m=[...i.bandwidth(u)];n(2,p.textContent="",p);const b=De({width:f,height:s,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:l},y:{label:"density",type:"linear"},marks:[pk(m,{x:"x",y:"y",fill:"#ccc"}),Yl(r,{x:_=>_,strokeWidth:.5}),Bu([0])]});p.appendChild(b)});function d(m){oe[m?"unshift":"push"](()=>{p=m,n(2,p)})}return t.$$set=m=>{"values"in m&&n(3,r=m.values),"title"in m&&n(4,o=m.title),"xLabel"in m&&n(5,a=m.xLabel),"xDomain"in m&&n(6,l=m.xDomain),"width"in m&&n(0,f=m.width),"height"in m&&n(1,s=m.height),"bandwidth"in m&&n(7,u=m.bandwidth),"bins"in m&&n(8,c=m.bins),"pad"in m&&n(9,h=m.pad)},t.$$.update=()=>{t.$$.dirty&904&&(i=XM(r,{bandwidth:u,pad:h,bins:c}))},[f,s,p,r,o,a,l,u,c,h,d]}class JM extends Ot{constructor(e){super(),Pt(this,e,KM,ZM,Rt,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function QM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),I(n,"width",i=t[0]+"px"),I(n,"height",r=t[1]+"px")},m(o,a){H(o,e,a),y(e,n),t[13](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&I(n,"width",i),a&2&&r!==(r=o[1]+"px")&&I(n,"height",r)},i:_t,o:_t,d(o){o&&W(e),t[13](null)}}}function tS(t,e,n){let{title:i=""}=e,{data:r}=e,{x:o="x"}=e,{y:a="y"}=e,{tipTitle:l=null}=e,{xLabel:f=null}=e,{yLabel:s=null}=e,{xDomain:u=void 0}=e,{yDomain:c=void 0}=e,{grid:h=!1}=e,{width:p=300}=e,{height:d=300}=e,m;qe(()=>{console.log(r,o,a),n(2,m.textContent="",m);const _=De({width:p,height:d,title:i,grid:h,style:{background:"none"},x:{label:f||(typeof o=="string"?o:"x"),domain:u},y:{label:s||(typeof a=="string"?a:"y"),domain:c},marks:[oo(r,{x:o,y:a}),tb(r,u2({x:o,y:a,title:l})),ql({length:1},{x1:u[0],x2:u[1],y1:c[0],y2:c[1],stroke:"#ccc"})]});m.appendChild(_)});function b(_){oe[_?"unshift":"push"](()=>{m=_,n(2,m)})}return t.$$set=_=>{"title"in _&&n(3,i=_.title),"data"in _&&n(4,r=_.data),"x"in _&&n(5,o=_.x),"y"in _&&n(6,a=_.y),"tipTitle"in _&&n(7,l=_.tipTitle),"xLabel"in _&&n(8,f=_.xLabel),"yLabel"in _&&n(9,s=_.yLabel),"xDomain"in _&&n(10,u=_.xDomain),"yDomain"in _&&n(11,c=_.yDomain),"grid"in _&&n(12,h=_.grid),"width"in _&&n(0,p=_.width),"height"in _&&n(1,d=_.height)},[p,d,m,i,r,o,a,l,f,s,u,c,h,b]}class Id extends Ot{constructor(e){super(),Pt(this,e,tS,QM,Rt,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function Rd(t,e,n){const i=t.slice();return i[12]=e[n],i}function Pd(t,e,n){const i=t.slice();return i[15]=e[n],i}function Od(t,e,n){const i=t.slice();return i[18]=e[n],i}function Ud(t,e,n){const i=t.slice();return i[21]=e[n],i}function zd(t,e,n){const i=t.slice();return i[24]=e[n],i}function Bd(t,e,n){const i=t.slice();return i[27]=e[n][0],i[28]=e[n][1],i}function qd(t){let e,n=t[27]+"",i,r,o=t[28].length+"",a,l;return{c(){e=M("p"),i=rt(n),r=rt(": "),a=rt(o),l=rt(" times")},m(f,s){H(f,e,s),y(e,i),y(e,r),y(e,a),y(e,l)},p(f,s){s&1&&n!==(n=f[27]+"")&&$t(i,n),s&1&&o!==(o=f[28].length+"")&&$t(a,o)},d(f){f&&W(e)}}}function Yd(t){let e,n;return e=new JM({props:{title:`Density of final values for ${t[24][0]}`,values:t[24][1].map(Kd),xLabel:"final values",xDomain:[-1,20],bandwidth:iS}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=`Density of final values for ${i[24][0]}`),r&2&&(o.values=i[24][1].map(Kd)),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function Wd(t){let e,n=t[21].encoding+"",i,r,o,a;return o=new yb({props:{data:t[21].finals,title:t[21].encoding,domain:[0,t[2]]}}),{c(){e=M("b"),i=rt(n),r=N(),ht(o.$$.fragment)},m(l,f){H(l,e,f),y(e,i),H(l,r,f),ut(o,l,f),a=!0},p(l,f){(!a||f&8)&&n!==(n=l[21].encoding+"")&&$t(i,n);const s={};f&8&&(s.data=l[21].finals),f&8&&(s.title=l[21].encoding),f&4&&(s.domain=[0,l[2]]),o.$set(s)},i(l){a||(Y(o.$$.fragment,l),a=!0)},o(l){K(o.$$.fragment,l),a=!1},d(l){l&&(W(e),W(r)),ct(o,l)}}}function Hd(t){let e,n=t[18]+"",i;return{c(){e=M("p"),i=rt(n)},m(r,o){H(r,e,o),y(e,i)},p(r,o){o&1&&n!==(n=r[18]+"")&&$t(i,n)},d(r){r&&W(e)}}}function Vd(t){let e,n,i,r=t[15].demographics.internalPID+"",o,a,l=t[15].demographics.partID+"",f,s,u,c=Bt(t[15].demographics.partFeedback.split(`
`)),h=[];for(let p=0;p<c.length;p+=1)h[p]=Hd(Od(t,c,p));return{c(){e=M("div"),n=M("b"),i=rt("P"),o=rt(r),a=N(),f=rt(l),s=rt(`:
        `);for(let p=0;p<h.length;p+=1)h[p].c();u=N(),we(e,"text-align","left")},m(p,d){H(p,e,d),y(e,n),y(n,i),y(n,o),y(e,a),y(e,f),y(e,s);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(e,null);y(e,u)},p(p,d){if(d&1&&r!==(r=p[15].demographics.internalPID+"")&&$t(o,r),d&1&&l!==(l=p[15].demographics.partID+"")&&$t(f,l),d&1){c=Bt(p[15].demographics.partFeedback.split(`
`));let m;for(m=0;m<c.length;m+=1){const b=Od(p,c,m);h[m]?h[m].p(b,d):(h[m]=Hd(b),h[m].c(),h[m].m(e,u))}for(;m<h.length;m+=1)h[m].d(1);h.length=c.length}},d(p){p&&W(e),Ve(h,p)}}}function Gd(t){let e,n;return e=new BM({props:{title:t[12].encoding,width:nS,height:150,data:t[12].data,x:oS,y:t[7]}}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=i[12].encoding),r&2&&(o.data=i[12].data),e.$set(o)},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function eS(t){let e,n,i,r,o,a,l,f,s,u,c,h=t[0].length+"",p,d,m=t[1].length+"",b,_,g=t[4].length+"",v,w,k,x,S,T,E,F,C,L,R,G,A,B,z,J,Z,X,P,j,Q,at,tt,V,q,D,$,O,et,U,mt,ot,pt,ft,dt,Ut=Bt(ln(t[0],jd).sort(Xd)),Et=[];for(let nt=0;nt<Ut.length;nt+=1)Et[nt]=qd(Bd(t,Ut,nt));let Ft=Bt(ln(t[1],Zd)),yt=[];for(let nt=0;nt<Ft.length;nt+=1)yt[nt]=Yd(zd(t,Ft,nt));const jt=nt=>K(yt[nt],1,1,()=>{yt[nt]=null});L=new Id({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),G=new Id({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),Z=new Zu({props:{stimuli:t[3]}}),at=new Ku({props:{stimuli:t[3]}});let Fe=Bt(t[3]),Lt=[];for(let nt=0;nt<Fe.length;nt+=1)Lt[nt]=Wd(Ud(t,Fe,nt));const jl=nt=>K(Lt[nt],1,1,()=>{Lt[nt]=null});let Pn=Bt(t[0].filter(Jd)),ie=[];for(let nt=0;nt<Pn.length;nt+=1)ie[nt]=Vd(Pd(t,Pn,nt));let de=Bt(t[1]),It=[];for(let nt=0;nt<de.length;nt+=1)It[nt]=Gd(Rd(t,de,nt));const fi=nt=>K(It[nt],1,1,()=>{It[nt]=null});return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=N(),r=M("div"),o=M("label"),a=rt(`Results JSONs and Prolific demographics CSV
      `),l=M("input"),f=N(),s=M("button"),s.textContent="export JSON",u=N(),c=M("div"),p=rt(h),d=rt(` participants completed -
    `),b=rt(m),_=rt(` tests -
    `),v=rt(g),w=rt(" filtered tests"),k=N(),x=M("div"),S=M("h3"),S.textContent="Encoding order",T=N();for(let nt=0;nt<Et.length;nt+=1)Et[nt].c();E=N(),F=M("div");for(let nt=0;nt<yt.length;nt+=1)yt[nt].c();C=N(),ht(L.$$.fragment),R=N(),ht(G.$$.fragment),A=N(),B=M("div"),z=M("h3"),z.textContent="Mean and CI of Final Values",J=N(),ht(Z.$$.fragment),X=N(),P=M("div"),j=M("h3"),j.textContent="Mean and CI of Trial Counts",Q=N(),ht(at.$$.fragment),tt=N(),V=M("div"),q=M("h3"),q.textContent="Final Values for Each Stimulus and All Participants",D=N();for(let nt=0;nt<Lt.length;nt+=1)Lt[nt].c();$=N(),O=M("div"),et=M("h3"),et.textContent="Feedback",U=N();for(let nt=0;nt<ie.length;nt+=1)ie[nt].c();mt=N(),ot=M("div");for(let nt=0;nt<It.length;nt+=1)It[nt].c();I(l,"type","file"),I(l,"accept",".json,.csv"),l.multiple=!0},m(nt,bt){H(nt,e,bt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),y(r,f),y(r,s),y(e,u),y(e,c),y(c,p),y(c,d),y(c,b),y(c,_),y(c,v),y(c,w),y(e,k),y(e,x),y(x,S),y(x,T);for(let Tt=0;Tt<Et.length;Tt+=1)Et[Tt]&&Et[Tt].m(x,null);y(e,E),y(e,F);for(let Tt=0;Tt<yt.length;Tt+=1)yt[Tt]&&yt[Tt].m(F,null);y(e,C),ut(L,e,null),y(e,R),ut(G,e,null),y(e,A),y(e,B),y(B,z),y(B,J),ut(Z,B,null),y(e,X),y(e,P),y(P,j),y(P,Q),ut(at,P,null),y(e,tt),y(e,V),y(V,q),y(V,D);for(let Tt=0;Tt<Lt.length;Tt+=1)Lt[Tt]&&Lt[Tt].m(V,null);y(e,$),y(e,O),y(O,et),y(O,U);for(let Tt=0;Tt<ie.length;Tt+=1)ie[Tt]&&ie[Tt].m(O,null);y(e,mt),y(e,ot);for(let Tt=0;Tt<It.length;Tt+=1)It[Tt]&&It[Tt].m(ot,null);pt=!0,ft||(dt=[gt(l,"input",t[5]),gt(s,"click",t[6])],ft=!0)},p(nt,[bt]){if((!pt||bt&1)&&h!==(h=nt[0].length+"")&&$t(p,h),(!pt||bt&2)&&m!==(m=nt[1].length+"")&&$t(b,m),(!pt||bt&16)&&g!==(g=nt[4].length+"")&&$t(v,g),bt&1){Ut=Bt(ln(nt[0],jd).sort(Xd));let lt;for(lt=0;lt<Ut.length;lt+=1){const pe=Bd(nt,Ut,lt);Et[lt]?Et[lt].p(pe,bt):(Et[lt]=qd(pe),Et[lt].c(),Et[lt].m(x,null))}for(;lt<Et.length;lt+=1)Et[lt].d(1);Et.length=Ut.length}if(bt&2){Ft=Bt(ln(nt[1],Zd));let lt;for(lt=0;lt<Ft.length;lt+=1){const pe=zd(nt,Ft,lt);yt[lt]?(yt[lt].p(pe,bt),Y(yt[lt],1)):(yt[lt]=Yd(pe),yt[lt].c(),Y(yt[lt],1),yt[lt].m(F,null))}for(Ht(),lt=Ft.length;lt<yt.length;lt+=1)jt(lt);Vt()}const Tt={};bt&1&&(Tt.data=nt[0]),L.$set(Tt);const Te={};bt&1&&(Te.data=nt[0]),G.$set(Te);const nn={};bt&8&&(nn.stimuli=nt[3]),Z.$set(nn);const Io={};if(bt&8&&(Io.stimuli=nt[3]),at.$set(Io),bt&12){Fe=Bt(nt[3]);let lt;for(lt=0;lt<Fe.length;lt+=1){const pe=Ud(nt,Fe,lt);Lt[lt]?(Lt[lt].p(pe,bt),Y(Lt[lt],1)):(Lt[lt]=Wd(pe),Lt[lt].c(),Y(Lt[lt],1),Lt[lt].m(V,null))}for(Ht(),lt=Fe.length;lt<Lt.length;lt+=1)jl(lt);Vt()}if(bt&1){Pn=Bt(nt[0].filter(Jd));let lt;for(lt=0;lt<Pn.length;lt+=1){const pe=Pd(nt,Pn,lt);ie[lt]?ie[lt].p(pe,bt):(ie[lt]=Vd(pe),ie[lt].c(),ie[lt].m(O,null))}for(;lt<ie.length;lt+=1)ie[lt].d(1);ie.length=Pn.length}if(bt&2){de=Bt(nt[1]);let lt;for(lt=0;lt<de.length;lt+=1){const pe=Rd(nt,de,lt);It[lt]?(It[lt].p(pe,bt),Y(It[lt],1)):(It[lt]=Gd(pe),It[lt].c(),Y(It[lt],1),It[lt].m(ot,null))}for(Ht(),lt=de.length;lt<It.length;lt+=1)fi(lt);Vt()}},i(nt){if(!pt){for(let bt=0;bt<Ft.length;bt+=1)Y(yt[bt]);Y(L.$$.fragment,nt),Y(G.$$.fragment,nt),Y(Z.$$.fragment,nt),Y(at.$$.fragment,nt);for(let bt=0;bt<Fe.length;bt+=1)Y(Lt[bt]);for(let bt=0;bt<de.length;bt+=1)Y(It[bt]);pt=!0}},o(nt){yt=yt.filter(Boolean);for(let bt=0;bt<yt.length;bt+=1)K(yt[bt]);K(L.$$.fragment,nt),K(G.$$.fragment,nt),K(Z.$$.fragment,nt),K(at.$$.fragment,nt),Lt=Lt.filter(Boolean);for(let bt=0;bt<Lt.length;bt+=1)K(Lt[bt]);It=It.filter(Boolean);for(let bt=0;bt<It.length;bt+=1)K(It[bt]);pt=!1},d(nt){nt&&W(e),Ve(Et,nt),Ve(yt,nt),ct(L),ct(G),ct(Z),ct(at),Ve(Lt,nt),Ve(ie,nt),Ve(It,nt),ft=!1,$e(dt)}}}const nS=800;let iS=1,rS=20;const jd=t=>t.encodingOrder,Xd=(t,e)=>t[1].lenght-e[1].length,Zd=t=>t.testType,Kd=t=>t.final,Jd=t=>t.demographics.partFeedback.trim().length>0,oS=(t,e)=>e;function aS(t,e,n){let i,r,o,a,l=[],f=null;const s=async m=>{const b=[];for(const g of m.target.files)if(g.name.endsWith(".csv")){const v=await g.text();f=h3(v),console.log("p demo",f)}else{const v=await g.text();b.push(JSON.parse(v))}const _=ln(b,g=>g.demographics.partID);console.log(`${_.length} participants`,_),n(0,l=b.filter(g=>g.studyStep==="feedback").map((g,v)=>({...g,demographics:{...g.demographics,internalPID:v+1},prolificDemogr:f.filter(w=>w["Participant id"]===g.demographics.partID)[0],finalAudio:g.tests.filter(w=>w.encoding.startsWith("audio"))[0].final,finalColor:g.tests.filter(w=>w.encoding.startsWith("color"))[0].final,finalWaveform:g.tests.filter(w=>w.encoding.startsWith("waveform"))[0].final,encodingOrder:g.tests.map(w=>w.encoding).join(", ")}))),console.log("participants",l)},u=m=>{if(m.lenght===0)return[];const b=(g,v=5)=>{const w=Math.floor(g/v)*v;return`${w}-${w+v-1}`},_=[];for(const g of m)for(const[v,w]of g.tests.entries()){let k=w.encoding;(w.encoding==="audio"||w.encoding==="waveform")&&(k=`${w.encoding} + ${w.audioFile.startsWith("./Fluid")?"piano":"drums"}`),_.push({...g.demographics,partAge:g.demographics.partAge?g.demographics.partAge:b(g.prolificDemogr.Age),partSex:g.demographics.partGender?g.demographics.partGender:g.prolificDemogr.Sex,countryBirth:g.prolificDemogr["Country of birth"],countryResidence:g.prolificDemogr["Country of residence"],prolificApprovals:g.prolificDemogr["Total approvals"],...w,date:g.date,testType:k,testOrder:v})}return console.log("tests",_),_},c=(m,b)=>m.filter(_=>_.final<b),h=m=>m.length===0?[]:ln(m,_=>_.testType).map(([_,g])=>{const v=g.map(w=>w.final);return{encoding:_,testType:_,finals:v,finalMean:Kn(v),finalVar:Zi(v),trialCounts:g.map(w=>w.trialCount)}}),p=()=>{const m=JSON.stringify(l,void 0,2),b=new Blob([m],{type:"text/plain;charset=utf-8"});Za(b,"participants.json");const _=JSON.stringify(i,void 0,2),g=new Blob([_],{type:"text/plain;charset=utf-8"});Za(g,"tests.json")},d=m=>Math.abs(m);return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=u(l)),t.$$.dirty&2&&n(4,r=c(i,rS)),t.$$.dirty&2&&n(3,o=h(i)),t.$$.dirty&2&&n(2,a=ke(i.map(m=>Math.abs(m.final)))),t.$$.dirty&2&&console.log("tests by enc",ln(i,m=>m.testType))},[l,i,a,o,r,s,p,d]}class lS extends Ot{constructor(e){super(),Pt(this,e,aS,eS,Rt,{})}}function Qd(t,e,n){const i=t.slice();return i[8]=e[n],i}function t0(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=rt(n),e.__value=t[8],st(e,e.__value)},m(r,o){H(r,e,o),y(e,i)},p:_t,d(r){r&&W(e)}}}function fS(t){let e,n,i,r,o,a,l,f,s=(t[1]*1e3).toFixed(1)+"",u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C,L,R,G,A,B,z,J,Z,X,P,j,Q,at,tt,V,q,D=Bt(t[5]),$=[];for(let O=0;O<D.length;O+=1)$[O]=t0(Qd(t,D,O));return x=new ao({props:{pattern:t[3],audioFile:t[2]}}),T=new ao({props:{pattern:t[4],audioFile:t[2]}}),F=new Xn({props:{pattern:t[3],audioFile:t[2],width:Un,height:zn}}),L=new Xn({props:{pattern:t[4],audioFile:t[2],width:Un,height:zn}}),G=new Gn({props:{pattern:t[3],width:Un,height:zn}}),B=new Gn({props:{pattern:t[4],width:Un,height:zn}}),J=new Cn({props:{pattern:t[3],width:Un,height:zn}}),X=new Cn({props:{pattern:t[4],width:Un,height:zn}}),j=new jn({props:{pattern:t[3],width:Un,height:zn}}),at=new jn({props:{pattern:t[4],width:Un,height:zn}}),{c(){e=M("main"),n=M("h2"),n.textContent="Examples",i=N(),r=M("div"),o=M("label"),a=rt(`deviation
      `),l=M("input"),f=rt(`
      (`),u=rt(s),c=rt(" milliseconds)"),h=N(),p=M("label"),d=rt(`instrument sample:
      `),m=M("select");for(let O=0;O<$.length;O+=1)$[O].c();b=N(),_=M("div"),g=M("h2"),g.textContent="early fourth note",v=N(),w=M("h2"),w.textContent="late fourth note",k=N(),ht(x.$$.fragment),S=N(),ht(T.$$.fragment),E=N(),ht(F.$$.fragment),C=N(),ht(L.$$.fragment),R=N(),ht(G.$$.fragment),A=N(),ht(B.$$.fragment),z=N(),ht(J.$$.fragment),Z=N(),ht(X.$$.fragment),P=N(),ht(j.$$.fragment),Q=N(),ht(at.$$.fragment),I(l,"type","range"),I(l,"min","0"),I(l,"max","20"),I(l,"step","1"),I(o,"class","svelte-1kjj0oz"),t[2]===void 0&&hn(()=>t[7].call(m)),I(p,"class","svelte-1kjj0oz"),I(_,"class","stimuli svelte-1kjj0oz")},m(O,et){H(O,e,et),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),st(l,t[0]),y(o,f),y(o,u),y(o,c),y(r,h),y(r,p),y(p,d),y(p,m);for(let U=0;U<$.length;U+=1)$[U]&&$[U].m(m,null);_e(m,t[2],!0),y(e,b),y(e,_),y(_,g),y(_,v),y(_,w),y(_,k),ut(x,_,null),y(_,S),ut(T,_,null),y(_,E),ut(F,_,null),y(_,C),ut(L,_,null),y(_,R),ut(G,_,null),y(_,A),ut(B,_,null),y(_,z),ut(J,_,null),y(_,Z),ut(X,_,null),y(_,P),ut(j,_,null),y(_,Q),ut(at,_,null),tt=!0,V||(q=[gt(l,"change",t[6]),gt(l,"input",t[6]),gt(m,"change",t[7])],V=!0)},p(O,[et]){if(et&1&&st(l,O[0]),(!tt||et&2)&&s!==(s=(O[1]*1e3).toFixed(1)+"")&&$t(u,s),et&32){D=Bt(O[5]);let jt;for(jt=0;jt<D.length;jt+=1){const Fe=Qd(O,D,jt);$[jt]?$[jt].p(Fe,et):($[jt]=t0(Fe),$[jt].c(),$[jt].m(m,null))}for(;jt<$.length;jt+=1)$[jt].d(1);$.length=D.length}et&36&&_e(m,O[2]);const U={};et&8&&(U.pattern=O[3]),et&4&&(U.audioFile=O[2]),x.$set(U);const mt={};et&16&&(mt.pattern=O[4]),et&4&&(mt.audioFile=O[2]),T.$set(mt);const ot={};et&8&&(ot.pattern=O[3]),et&4&&(ot.audioFile=O[2]),F.$set(ot);const pt={};et&16&&(pt.pattern=O[4]),et&4&&(pt.audioFile=O[2]),L.$set(pt);const ft={};et&8&&(ft.pattern=O[3]),G.$set(ft);const dt={};et&16&&(dt.pattern=O[4]),B.$set(dt);const Ut={};et&8&&(Ut.pattern=O[3]),J.$set(Ut);const Et={};et&16&&(Et.pattern=O[4]),X.$set(Et);const Ft={};et&8&&(Ft.pattern=O[3]),j.$set(Ft);const yt={};et&16&&(yt.pattern=O[4]),at.$set(yt)},i(O){tt||(Y(x.$$.fragment,O),Y(T.$$.fragment,O),Y(F.$$.fragment,O),Y(L.$$.fragment,O),Y(G.$$.fragment,O),Y(B.$$.fragment,O),Y(J.$$.fragment,O),Y(X.$$.fragment,O),Y(j.$$.fragment,O),Y(at.$$.fragment,O),tt=!0)},o(O){K(x.$$.fragment,O),K(T.$$.fragment,O),K(F.$$.fragment,O),K(L.$$.fragment,O),K(G.$$.fragment,O),K(B.$$.fragment,O),K(J.$$.fragment,O),K(X.$$.fragment,O),K(j.$$.fragment,O),K(at.$$.fragment,O),tt=!1},d(O){O&&W(e),Ve($,O),ct(x),ct(T),ct(F),ct(L),ct(G),ct(B),ct(J),ct(X),ct(j),ct(at),V=!1,$e(q)}}}let Un=600,zn=100,Of=.5,e0=6,n0=3,i0=!0,r0=0;function sS(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,l=[],f=[];function s(){a=xe(this.value),n(0,a)}function u(){o=_i(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*Of),t.$$.dirty&2&&n(3,l=yi(e0,Of,n0,-i,i0,r0)),t.$$.dirty&2&&n(4,f=yi(e0,Of,n0,i,i0,r0))},[a,i,o,l,f,r,s,u]}class uS extends Ot{constructor(e){super(),Pt(this,e,sS,fS,Rt,{})}}function cS(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=N(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){H(l,e,f),y(e,n),t[5](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&W(e),t[5](null),o=!1,a()}}}function hS(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,{currentTrialNumber:o=-1}=e,a=null,l;const f=()=>{r&&l&&(a=Ka(r,i),zs(a,r.sampleRate,l))};Zn(f);const s=()=>{l&&(n(0,l.currentTime=0,l),l.play())};Zn(()=>{document.querySelector("html").addEventListener("keyup",c=>{c.key==="p"&&s()})});function u(c){oe[c?"unshift":"push"](()=>{l=c,n(0,l)})}return t.$$set=c=>{"pattern"in c&&n(2,i=c.pattern),"cachedAudio"in c&&n(3,r=c.cachedAudio),"currentTrialNumber"in c&&n(4,o=c.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&16&&o>-1&&(f(),window.setTimeout(s,200))},[l,s,i,r,o,u]}class dS extends Ot{constructor(e){super(),Pt(this,e,hS,cS,Rt,{pattern:2,cachedAudio:3,currentTrialNumber:4})}}function bi(t,e){return new URLSearchParams(t.location.search).get(e)}function pS(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=N(),r=M("button"),r.textContent="play audio",n.controls=!1},m(l,f){H(l,e,f),y(e,n),t[4](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:_t,i:_t,o:_t,d(l){l&&W(e),t[4](null),o=!1,a()}}}function mS(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,o=null,a;const l=(u,c)=>{c&&a&&(o=Ka(c,u),zs(o,c.sampleRate,a))};Zn(()=>l(i,r));const f=async()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(u){oe[u?"unshift":"push"](()=>{a=u,n(0,a)})}return t.$$set=u=>{"pattern"in u&&n(2,i=u.pattern),"cachedAudio"in u&&n(3,r=u.cachedAudio)},[a,f,i,r,s]}class gS extends Ot{constructor(e){super(),Pt(this,e,mS,pS,Rt,{pattern:2,cachedAudio:3})}}function o0(t){let e;return{c(){e=M("div"),e.innerHTML=`<p>In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p>For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p>By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p>If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do not consent and will not participate</button></a>`},m(n,i){H(n,e,i)},d(n){n&&W(e)}}}function a0(t){let e,n,i,r,o,a,l,f,s;return r=new gS({props:{pattern:[.1,.6,1.1],cachedAudio:t[3]}}),{c(){e=M("div"),n=M("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,i=N(),ht(r.$$.fragment),o=N(),a=M("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=N(),f=M("a"),f.innerHTML="<button>I cannot hear the audio and will not participate in this study</button>",I(f,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(u,c){H(u,e,c),y(e,n),y(e,i),ut(r,e,null),y(e,o),y(e,a),y(e,l),y(e,f),s=!0},p(u,c){const h={};c[0]&8&&(h.cachedAudio=u[3]),r.$set(h)},i(u){s||(Y(r.$$.fragment,u),s=!0)},o(u){K(r.$$.fragment,u),s=!1},d(u){u&&W(e),ct(r)}}}function l0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g;return{c(){e=M("div"),n=M("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",i=N(),r=M("p"),o=M("button"),o.textContent="+",a=N(),l=M("button"),l.textContent="-",f=N(),s=Bf("svg"),u=Bf("rect"),m=N(),b=M("p"),b.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,I(u,"width",c=t[0]*.52),I(u,"height",h=t[17]*2),I(u,"fill","#ccc"),I(u,"rx","8"),I(s,"width",p=t[0]*.52+"px"),I(s,"height",d=t[17]*2+"px")},m(v,w){H(v,e,w),y(e,n),y(e,i),y(e,r),y(r,o),y(r,a),y(r,l),y(e,f),y(e,s),y(s,u),y(e,m),y(e,b),_||(g=[gt(o,"click",t[23]),gt(l,"click",t[24])],_=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&I(u,"width",c),w[0]&131072&&h!==(h=v[17]*2)&&I(u,"height",h),w[0]&1&&p!==(p=v[0]*.52+"px")&&I(s,"width",p),w[0]&131072&&d!==(d=v[17]*2+"px")&&I(s,"height",d)},d(v){v&&W(e),_=!1,$e(g)}}}function f0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g,v,w,k,x,S,T,E,F,C;return{c(){e=M("div"),n=M("label"),i=M("span"),i.textContent="Highest finished education (select the best fitting one):",r=N(),o=M("select"),a=M("option"),a.textContent="none",l=M("option"),l.textContent="high school",f=M("option"),f.textContent="bachelor",s=M("option"),s.textContent="master",u=M("option"),u.textContent="phd",c=N(),h=M("label"),p=M("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,d=N(),m=M("input"),b=N(),_=M("label"),g=M("span"),g.textContent="For how many years do you roughly play it/them?",v=N(),w=M("input"),k=N(),x=M("label"),S=M("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,T=N(),E=M("input"),a.__value="none",st(a,a.__value),l.__value="highs",st(l,l.__value),f.__value="bachelor",st(f,f.__value),s.__value="master",st(s,s.__value),u.__value="phd",st(u,u.__value),t[7]===void 0&&hn(()=>t[25].call(o)),I(n,"class","svelte-1u8tzxr"),I(m,"type","text"),I(m,"placeholder","free text"),I(h,"class","svelte-1u8tzxr"),I(w,"type","number"),I(w,"min","0"),I(w,"step","1"),I(_,"class","svelte-1u8tzxr"),I(E,"type","number"),I(E,"min","0"),I(E,"step","1"),I(x,"class","svelte-1u8tzxr"),I(e,"class","demo-form svelte-1u8tzxr")},m(L,R){H(L,e,R),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,l),y(o,f),y(o,s),y(o,u),_e(o,t[7],!0),y(e,c),y(e,h),y(h,p),y(h,d),y(h,m),st(m,t[8]),y(e,b),y(e,_),y(_,g),y(_,v),y(_,w),st(w,t[9]),y(e,k),y(e,x),y(x,S),y(x,T),y(x,E),st(E,t[10]),F||(C=[gt(o,"change",t[25]),gt(m,"input",t[26]),gt(w,"input",t[27]),gt(E,"input",t[28])],F=!0)},p(L,R){R[0]&128&&_e(o,L[7]),R[0]&256&&m.value!==L[8]&&st(m,L[8]),R[0]&512&&xe(w.value)!==L[9]&&st(w,L[9]),R[0]&1024&&xe(E.value)!==L[10]&&st(E,L[10])},d(L){L&&W(e),F=!1,$e(C)}}}function s0(t){let e,n,i,r,o=t[13]&&u0(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=N(),o&&o.c(),i=Fn()},m(a,l){H(a,e,l),H(a,n,l),o&&o.m(a,l),H(a,i,l),r=!0},p(a,l){a[13]?o?(o.p(a,l),l[0]&8192&&Y(o,1)):(o=u0(a),o.c(),Y(o,1),o.m(i.parentNode,i)):o&&(Ht(),K(o,1,1,()=>{o=null}),Vt())},i(a){r||(Y(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(W(e),W(n),W(i)),o&&o.d(a)}}}function u0(t){let e,n,i=t[6]+1+"",r,o,a=t[4].length+"",l,f,s=t[12]+1+"",u,c,h,p,d,m,b;const _=[_S,bS],g=[];function v(w,k){return w[16]==="audio"?0:w[15]===!1?1:-1}return~(h=v(t))&&(p=g[h]=_[h](t)),{c(){e=M("p"),n=rt("Test number "),r=rt(i),o=rt(" / "),l=rt(a),f=rt(", trial number "),u=rt(s),c=N(),p&&p.c(),d=N(),m=M("p"),m.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`},m(w,k){H(w,e,k),y(e,n),y(e,r),y(e,o),y(e,l),y(e,f),y(e,u),H(w,c,k),~h&&g[h].m(w,k),H(w,d,k),H(w,m,k),b=!0},p(w,k){(!b||k[0]&64)&&i!==(i=w[6]+1+"")&&$t(r,i),(!b||k[0]&16)&&a!==(a=w[4].length+"")&&$t(l,a),(!b||k[0]&4096)&&s!==(s=w[12]+1+"")&&$t(u,s);let x=h;h=v(w),h===x?~h&&g[h].p(w,k):(p&&(Ht(),K(g[x],1,1,()=>{g[x]=null}),Vt()),~h?(p=g[h],p?p.p(w,k):(p=g[h]=_[h](w),p.c()),Y(p,1),p.m(d.parentNode,d)):p=null)},i(w){b||(Y(p),b=!0)},o(w){K(p),b=!1},d(w){w&&(W(e),W(c),W(d),W(m)),~h&&g[h].d(w)}}}function bS(t){let e,n,i,r;const o=[xS,vS,wS,yS],a=[];function l(f,s){return f[16]==="waveform"?0:f[16]==="tick"?1:f[16]==="bar"?2:f[16]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Fn()},m(f,s){~e&&a[e].m(f,s),H(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Ht(),K(a[u],1,1,()=>{a[u]=null}),Vt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),Y(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(Y(n),r=!0)},o(f){K(n),r=!1},d(f){f&&W(i),~e&&a[e].d(f)}}}function _S(t){let e,n,i,r;return i=new dS({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],cachedAudio:t[3],currentTrialNumber:t[12]}}),{c(){e=M("div"),e.innerHTML=`Listen to the audio, the forth note comes either too soon or too late.
          Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=N(),ht(i.$$.fragment)},m(o,a){H(o,e,a),H(o,n,a),ut(i,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.pattern=[...o[1].slice(0,o[1].length-1),o[1].at(-1)+Math.random()*1e-4]),a[0]&8&&(l.cachedAudio=o[3]),a[0]&4096&&(l.currentTrialNumber=o[12]),i.$set(l)},i(o){r||(Y(i.$$.fragment,o),r=!0)},o(o){K(i.$$.fragment,o),r=!1},d(o){o&&(W(e),W(n)),ct(i,o)}}}function yS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new jn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new jn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new jn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=N(),i=M("div"),ht(r.$$.fragment),o=N(),ht(a.$$.fragment),l=N(),f=M("div"),f.textContent="Example for early",s=N(),u=M("div"),u.textContent="Example for late",c=N(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){H(d,e,m),H(d,n,m),H(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),H(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(W(e),W(n),W(i),W(c)),ct(r),ct(a),ct(h,d)}}}function wS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Cn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Cn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Cn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The bar chart shows the size of the gaps between notes in the bars'
            height (example: the bar at 2 shows the gap between the first and
            second note). Look at the third bar, it is either lower (early) or
            higher (late) than the others.`,n=N(),i=M("div"),ht(r.$$.fragment),o=N(),ht(a.$$.fragment),l=N(),f=M("div"),f.textContent="Example for early",s=N(),u=M("div"),u.textContent="Example for late",c=N(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){H(d,e,m),H(d,n,m),H(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),H(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(W(e),W(n),W(i),W(c)),ct(r),ct(a),ct(h,d)}}}function vS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Gn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Gn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Gn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`Look at the peaks, the gap between the third and forth tick is
            either smaller (early) or larger (late) than the other gaps.`,n=N(),i=M("div"),ht(r.$$.fragment),o=N(),ht(a.$$.fragment),l=N(),f=M("div"),f.textContent="Example for early",s=N(),u=M("div"),u.textContent="Example for late",c=N(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){H(d,e,m),H(d,n,m),H(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),H(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(W(e),W(n),W(i),W(c)),ct(r),ct(a),ct(h,d)}}}function xS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Xn({props:{pattern:t[18],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),a=new Xn({props:{pattern:t[19],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),h=new Xn({props:{pattern:t[1],audioFile:t[2],cachedAudio:t[3],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the peaks, the gap between the third and forth peaks is either
            smaller (early) or larger (late) than the other gaps.`,n=N(),i=M("div"),ht(r.$$.fragment),o=N(),ht(a.$$.fragment),l=N(),f=M("div"),f.textContent="Example for early",s=N(),u=M("div"),u.textContent="Example for late",c=N(),ht(h.$$.fragment),I(f,"class","svelte-1u8tzxr"),I(u,"class","svelte-1u8tzxr"),I(i,"class","vis-example svelte-1u8tzxr")},m(d,m){H(d,e,m),H(d,n,m),H(d,i,m),ut(r,i,null),y(i,o),ut(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),H(d,c,m),ut(h,d,m),p=!0},p(d,m){const b={};m[0]&4&&(b.audioFile=d[2]),m[0]&8&&(b.cachedAudio=d[3]),m[0]&1&&(b.width=d[0]/2),m[0]&131072&&(b.height=d[17]/2),r.$set(b);const _={};m[0]&4&&(_.audioFile=d[2]),m[0]&8&&(_.cachedAudio=d[3]),m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const g={};m[0]&2&&(g.pattern=d[1]),m[0]&4&&(g.audioFile=d[2]),m[0]&8&&(g.cachedAudio=d[3]),m[0]&1&&(g.width=d[0]),m[0]&131072&&(g.height=d[17]),h.$set(g)},i(d){p||(Y(r.$$.fragment,d),Y(a.$$.fragment,d),Y(h.$$.fragment,d),p=!0)},o(d){K(r.$$.fragment,d),K(a.$$.fragment,d),K(h.$$.fragment,d),p=!1},d(d){d&&(W(e),W(n),W(i),W(c)),ct(r),ct(a),ct(h,d)}}}function c0(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=rt(`Do you have any final feedback/comments?
        `),r=M("textarea")},m(l,f){H(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[11]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&2048&&st(r,l[11])},d(l){l&&W(e),o=!1,a()}}}function h0(t){let e,n,i;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=N(),i=M("a"),i.textContent="click here to get your compensation",I(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){H(r,e,o),H(r,n,o),H(r,i,o)},d(r){r&&(W(e),W(n),W(i))}}}function d0(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step",I(e,"class","next-btn svelte-1u8tzxr")},m(r,o){H(r,e,o),n||(i=gt(e,"click",t[20]),n=!0)},p:_t,d(r){r&&W(e),n=!1,i()}}}function kS(t){let e,n,i,r,o,a,l,f,s,u=t[5]==="consent"&&o0(),c=t[5]==="start1"&&a0(t),h=t[5]==="start2"&&l0(t),p=t[5]==="demo"&&f0(t),d=t[5]==="tests"&&s0(t),m=t[5]==="feedback"&&c0(t),b=t[5]==="done"&&h0(),_=!t[14]&&t[5]!=="done"&&d0(t);return{c(){e=M("main"),u&&u.c(),n=N(),c&&c.c(),i=N(),h&&h.c(),r=N(),p&&p.c(),o=N(),d&&d.c(),a=N(),m&&m.c(),l=N(),b&&b.c(),f=N(),_&&_.c(),I(e,"class","svelte-1u8tzxr")},m(g,v){H(g,e,v),u&&u.m(e,null),y(e,n),c&&c.m(e,null),y(e,i),h&&h.m(e,null),y(e,r),p&&p.m(e,null),y(e,o),d&&d.m(e,null),y(e,a),m&&m.m(e,null),y(e,l),b&&b.m(e,null),y(e,f),_&&_.m(e,null),s=!0},p(g,v){g[5]==="consent"?u||(u=o0(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),g[5]==="start1"?c?(c.p(g,v),v[0]&32&&Y(c,1)):(c=a0(g),c.c(),Y(c,1),c.m(e,i)):c&&(Ht(),K(c,1,1,()=>{c=null}),Vt()),g[5]==="start2"?h?h.p(g,v):(h=l0(g),h.c(),h.m(e,r)):h&&(h.d(1),h=null),g[5]==="demo"?p?p.p(g,v):(p=f0(g),p.c(),p.m(e,o)):p&&(p.d(1),p=null),g[5]==="tests"?d?(d.p(g,v),v[0]&32&&Y(d,1)):(d=s0(g),d.c(),Y(d,1),d.m(e,a)):d&&(Ht(),K(d,1,1,()=>{d=null}),Vt()),g[5]==="feedback"?m?m.p(g,v):(m=c0(g),m.c(),m.m(e,l)):m&&(m.d(1),m=null),g[5]==="done"?b||(b=h0(),b.c(),b.m(e,f)):b&&(b.d(1),b=null),!g[14]&&g[5]!=="done"?_?_.p(g,v):(_=d0(g),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i(g){s||(Y(c),Y(d),s=!0)},o(g){K(c),K(d),s=!1},d(g){g&&W(e),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d(),d&&d.d(),m&&m.d(),b&&b.d(),_&&_.d()}}}const MS="/store";let p0=.5;const Uf=20;let SS=6,TS=!0,CS=0;function AS(t,e,n){let i,r,o=bi(window,"PROLIFIC_PID"),a=bi(window,"STUDY_ID"),l=bi(window,"SESSION_ID");const f=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let s=f[0],u;Us(s).then(Ft=>{n(3,u=Ft),console.log("Audio fetched",Ft)});let c=[{stimulus:"audio",audioFile:f[0]},{stimulus:"waveform",audioFile:f[0]},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],p=[0,.5,1,1.6,2.1,2.6];let d="consent",m=0,b,_="",g="",v=0,w=0,k="",x=0,S,T={},E=[],F,C,L=!1,R=!1,G=!1,A="tick",B=Uf,z=3,J=600,Z=[],X=[],P=0;const j=[];Zn(()=>{document.querySelector("html").addEventListener("keyup",O)});const Q=()=>{C=new Dt({ratio:{firstVal:Uf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Uf],direction:-1,reversalLimit:5,verbosity:0}}),C.init()};function at(){d==="consent"?n(5,d="start1"):d==="start1"?n(5,d="start2"):d==="start2"?(n(4,c=Ja(c)),n(5,d="demo")):d==="demo"?_==""||g==""?alert("please fill the form first"):(n(5,d="tests"),n(6,m=0)):d==="tests"?(U(),m<c.length?(n(16,A=c[m].stimulus),n(2,s=c[m].audioFile),tt()):n(5,d="feedback")):d==="feedback"&&(U(),n(5,d="done"))}function tt(){Q(),n(12,x=0),S=0,F=0,n(13,L=!0),X=[],E=[],b=new Date,V()}function V(){console.log("Starting trial "+x),T={},n(14,R=!0),q()}function q(){let yt=C.getLast("ratio");yt=Math.random()<.5?yt:-yt,T.deviation=yt,n(21,B=yt),T.startTime=new Date,n(15,G=!0),window.setTimeout(()=>{n(15,G=!1)},1e3)}function D(Ft){if(!R)return;n(14,R=!1),T.decisionChoice=Ft,T.errorCode=0,T.timeTaken=(new Date-T.startTime)/1e3;const yt=F;(T.decisionChoice==0&&T.deviation<0||T.decisionChoice==1&&T.deviation>0)&&T.errorCode==0&&F++,T.errorCode==0&&(C.next(yt!=F),E[E.length]=T),T.errorCode==0&&S++,n(12,x++,x),C.reversalLimitReached("ratio")?$():V()}function $(){n(13,L=!1),n(14,R=!1),et(),X=[],P=C.getFinalVal("ratio");for(let yt=0;yt<E.length;yt++)X[yt]=E[yt].deviation;console.log(X);const Ft=new Date;j.push({encoding:A,audioFile:s,final:P,data:X,score:F,testNumber:m,trialCount:x+1,trials:E,validTrialCount:S+1,testTimeSeconds:(Ft-b)/1e3}),n(6,m++,m)}function O(Ft){if(!G)switch(Ft.key){case"ArrowLeft":R&&D(0);break;case"ArrowRight":R&&D(1);break;case"PageDown":!R&&d!=="done"&&at()}}function et(){`${F}`,x+1,`${(F/(x+1)*100).toFixed(1)}${C.getFinalVal("ratio")}`}function U(){const Ft={studyStep:d,demographics:{partID:o,studyID:a,sessionID:l,partEduation:_,partMusicInstr:g,partMusicInstrYears:v,partVisExperienceYears:w,partFeedback:k,visWidth:J},date:new Date().toISOString(),tests:j};console.log("saving data",Ft);const yt=JSON.stringify(Ft,void 0,2);fetch(MS,{method:"POST",headers:{"Content-Type":"application/json"},body:yt}).then(jt=>{console.log("Data saved:",jt)})}const mt=()=>n(0,J*=1.05),ot=()=>n(0,J*=.95);function pt(){_=_i(this),n(7,_)}function ft(){g=this.value,n(8,g)}function dt(){v=xe(this.value),n(9,v)}function Ut(){w=xe(this.value),n(10,w)}function Et(){k=this.value,n(11,k)}return t.$$.update=()=>{t.$$.dirty[0]&2097152&&n(22,i=B/100*p0),t.$$.dirty[0]&1&&n(17,r=J/6),t.$$.dirty[0]&4194306&&(n(1,Z=yi(SS,p0,z,i,TS,CS)),console.log("generated pattern",Z))},[J,Z,s,u,c,d,m,_,g,v,w,k,x,L,R,G,A,r,h,p,at,B,i,mt,ot,pt,ft,dt,Ut,Et]}class ES extends Ot{constructor(e){super(),Pt(this,e,AS,kS,Rt,{},null,[-1,-1])}}function m0(t){let e,n,i,r,o=t[6]&&g0(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=N(),o&&o.c(),i=Fn()},m(a,l){H(a,e,l),H(a,n,l),o&&o.m(a,l),H(a,i,l),r=!0},p(a,l){a[6]?o?(o.p(a,l),l[0]&64&&Y(o,1)):(o=g0(a),o.c(),Y(o,1),o.m(i.parentNode,i)):o&&(Ht(),K(o,1,1,()=>{o=null}),Vt())},i(a){r||(Y(o),r=!0)},o(a){K(o),r=!1},d(a){a&&(W(e),W(n),W(i)),o&&o.d(a)}}}function g0(t){let e,n,i=t[3]+1+"",r,o,a=t[1].length+"",l,f,s=t[5]+1+"",u,c,h,p;return h=new Cn({props:{pattern:t[0],width:Os,height:t[8]}}),{c(){e=M("p"),n=rt("Test number "),r=rt(i),o=rt(" / "),l=rt(a),f=rt(", trial number "),u=rt(s),c=N(),ht(h.$$.fragment)},m(d,m){H(d,e,m),y(e,n),y(e,r),y(e,o),y(e,l),y(e,f),y(e,u),H(d,c,m),ut(h,d,m),p=!0},p(d,m){(!p||m[0]&8)&&i!==(i=d[3]+1+"")&&$t(r,i),(!p||m[0]&2)&&a!==(a=d[1].length+"")&&$t(l,a),(!p||m[0]&32)&&s!==(s=d[5]+1+"")&&$t(u,s);const b={};m[0]&1&&(b.pattern=d[0]),m[0]&256&&(b.height=d[8]),h.$set(b)},i(d){p||(Y(h.$$.fragment,d),p=!0)},o(d){K(h.$$.fragment,d),p=!1},d(d){d&&(W(e),W(c)),ct(h,d)}}}function b0(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=rt(`Do you have any final feedback/comments?
        `),r=M("textarea")},m(l,f){H(l,e,f),y(e,n),y(n,i),y(n,r),st(r,t[4]),o||(a=gt(r,"input",t[13]),o=!0)},p(l,f){f[0]&16&&st(r,l[4])},d(l){l&&W(e),o=!1,a()}}}function _0(t){let e,n,i;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=N(),i=M("a"),i.textContent="click here to get your compensation",I(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){H(r,e,o),H(r,n,o),H(r,i,o)},d(r){r&&(W(e),W(n),W(i))}}}function y0(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step",I(e,"class","next-btn svelte-mm1ijr")},m(r,o){H(r,e,o),n||(i=gt(e,"click",t[9]),n=!0)},p:_t,d(r){r&&W(e),n=!1,i()}}}function $S(t){let e,n,i,r,o,a,l,f,s,u=t[2]==="tests"&&m0(t),c=t[2]==="feedback"&&b0(t),h=t[2]==="done"&&_0(),p=!t[7]&&t[2]!=="done"&&y0(t);return{c(){e=M("main"),u&&u.c(),n=N(),c&&c.c(),i=N(),h&&h.c(),r=N(),p&&p.c(),o=N(),a=M("button"),a.textContent="save data",I(a,"class","next-btn svelte-mm1ijr"),I(e,"class","svelte-mm1ijr")},m(d,m){H(d,e,m),u&&u.m(e,null),y(e,n),c&&c.m(e,null),y(e,i),h&&h.m(e,null),y(e,r),p&&p.m(e,null),y(e,o),y(e,a),l=!0,f||(s=gt(a,"click",t[10]),f=!0)},p(d,m){d[2]==="tests"?u?(u.p(d,m),m[0]&4&&Y(u,1)):(u=m0(d),u.c(),Y(u,1),u.m(e,n)):u&&(Ht(),K(u,1,1,()=>{u=null}),Vt()),d[2]==="feedback"?c?c.p(d,m):(c=b0(d),c.c(),c.m(e,i)):c&&(c.d(1),c=null),d[2]==="done"?h||(h=_0(),h.c(),h.m(e,r)):h&&(h.d(1),h=null),!d[7]&&d[2]!=="done"?p?p.p(d,m):(p=y0(d),p.c(),p.m(e,o)):p&&(p.d(1),p=null)},i(d){l||(Y(u),l=!0)},o(d){K(u),l=!1},d(d){d&&W(e),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d(),f=!1,s()}}}const NS="/store";let DS="",FS="",LS=0,IS=0,w0=.5;const zf=20;let RS=6,PS=!0,OS=0,Os=600;function US(t,e,n){let i,r,o=bi(window,"PROLIFIC_PID"),a=bi(window,"STUDY_ID"),l=bi(window,"SESSION_ID"),s=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"][0],u=[{stimulus:"bar"},{stimulus:"bar"},{stimulus:"bar"}],c="tests",h=0,p,d="",m=0,b,_={},g=[],v,w,k=!1,x=!1,S="tick",T=zf,E=3,F=[],C=[],L=0;const R=[];Zn(()=>{document.querySelector("html").addEventListener("keyup",P)});const G=()=>{w=new Dt({ratio:{firstVal:zf,down:2,up:1,stepSizeDown:1,stepSizeUp:.5488,limits:[0,zf],direction:-1,reversalLimit:5,verbosity:0}}),w.init()};function A(){c==="consent"?n(2,c="start1"):c==="start1"?n(2,c="start2"):c==="start2"?(n(1,u=Ja(u)),n(2,c="demo")):c==="demo"?alert("please fill the form first"):c==="tests"?h<u.length?(S=u[h].stimulus,s=u[h].audioFile,B()):n(2,c="feedback"):c==="feedback"&&n(2,c="done")}function B(){G(),n(5,m=0),b=0,v=0,n(6,k=!0),C=[],g=[],p=new Date,z()}function z(){console.log("Starting trial "+m),_={},n(7,x=!0),J()}function J(){console.log(w);const tt=w.getLast("ratio");console.log("current value",tt);let V=tt;V=Math.random()<.5?V:-V,_.deviation=V,n(11,T=V),_.startTime=new Date,window.setTimeout(()=>{},1e3)}function Z(tt){if(!x)return;n(7,x=!1),_.decisionChoice=tt,_.errorCode=0,_.timeTaken=(new Date-_.startTime)/1e3;const V=v;(_.decisionChoice==0&&_.deviation<0||_.decisionChoice==1&&_.deviation>0)&&_.errorCode==0&&v++,_.errorCode==0&&(w.next(V!=v),g[g.length]=_),_.errorCode==0&&b++,n(5,m++,m),w.reversalLimitReached("ratio")?X():z()}function X(){n(6,k=!1),j(),C=[],L=w.getFinalVal("ratio");for(let V=0;V<g.length;V++)C[V]=g[V].deviation;console.log(C);const tt=new Date;R.push({encoding:S,audioFile:s,final:L,data:C,score:v,testNumber:h,trialCount:m+1,trials:g,validTrialCount:b+1,testTimeSeconds:(tt-p)/1e3}),n(3,h++,h)}function P(tt){switch(tt.key){case"ArrowLeft":x&&Z(0);break;case"ArrowRight":x&&Z(1);break;case"PageDown":!x&&c!=="done"&&A()}}function j(){`${v}`,m+1,`${(v/(m+1)*100).toFixed(1)}${w.getFinalVal("ratio")}`}function Q(){const tt={studyStep:c,demographics:{partID:o,studyID:a,sessionID:l,partEduation:DS,partMusicInstr:FS,partMusicInstrYears:LS,partVisExperienceYears:IS,partFeedback:d,visWidth:Os},date:new Date().toISOString(),tests:R};console.log("saving data",tt);const V=JSON.stringify(tt,void 0,2);fetch(NS,{method:"POST",headers:{"Content-Type":"application/json"},body:V}).then(q=>{console.log("Data saved:",q)})}function at(){d=this.value,n(4,d)}return t.$$.update=()=>{t.$$.dirty[0]&2048&&n(12,i=T/100*w0),t.$$.dirty[0]&4097&&(n(0,F=yi(RS,w0,E,i,PS,OS)),console.log("generated pattern",F))},n(8,r=Os/6),[F,u,c,h,d,m,k,x,r,A,Q,T,i,at]}class zS extends Ot{constructor(e){super(),Pt(this,e,US,$S,Rt,{},null,[-1,-1])}}function v0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,b,_,g;return{c(){e=M("div"),n=M("button"),n.textContent="Playground",i=N(),r=M("button"),r.textContent="Examples",o=N(),a=M("button"),a.textContent="Study",l=N(),f=M("button"),f.textContent="Analysis",s=N(),u=M("button"),u.textContent="Study (variance)",c=N(),h=M("button"),h.textContent="Analysis (variance)",p=N(),d=M("button"),d.textContent="Study (Prolific)",m=N(),b=M("button"),b.textContent="Analysis (Prolific)"},m(v,w){H(v,e,w),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(e,s),y(e,u),y(e,c),y(e,h),y(e,p),y(e,d),y(e,m),y(e,b),_||(g=[gt(n,"click",t[1]),gt(r,"click",t[2]),gt(a,"click",t[3]),gt(f,"click",t[4]),gt(u,"click",t[5]),gt(h,"click",t[6]),gt(d,"click",t[7]),gt(b,"click",t[8])],_=!0)},p:_t,d(v){v&&W(e),_=!1,$e(g)}}}function BS(t){let e,n;return e=new lS({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function qS(t){let e,n;return e=new ES({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function YS(t){let e,n;return e=new OM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function WS(t){let e,n;return e=new vM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function HS(t){let e,n;return e=new $M({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function VS(t){let e,n;return e=new sM({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function GS(t){let e,n;return e=new uS({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function jS(t){let e,n;return e=new Zk({}),{c(){ht(e.$$.fragment)},m(i,r){ut(e,i,r),n=!0},i(i){n||(Y(e.$$.fragment,i),n=!0)},o(i){K(e.$$.fragment,i),n=!1},d(i){ct(e,i)}}}function XS(t){let e,n,i,r,o,a,l,f,s,u=t[0]!=="study_prolific"&&v0(t);const c=[jS,GS,VS,HS,WS,YS,qS,BS],h=[];function p(d,m){return d[0]==="playground"?0:d[0]==="examples"?1:d[0]==="study"?2:d[0]==="analysis"?3:d[0]==="study_variance"?4:d[0]==="analysis_variance"?5:d[0]==="study_prolific"?6:d[0]==="analysis_prolific"?7:-1}return~(o=p(t))&&(a=h[o]=c[o](t)),f=new zS({}),{c(){e=M("main"),n=M("h1"),n.textContent="Rhythm Error Sensitivity Study",i=N(),u&&u.c(),r=N(),a&&a.c(),l=N(),ht(f.$$.fragment)},m(d,m){H(d,e,m),y(e,n),y(e,i),u&&u.m(e,null),y(e,r),~o&&h[o].m(e,null),y(e,l),ut(f,e,null),s=!0},p(d,[m]){d[0]!=="study_prolific"?u?u.p(d,m):(u=v0(d),u.c(),u.m(e,r)):u&&(u.d(1),u=null);let b=o;o=p(d),o!==b&&(a&&(Ht(),K(h[b],1,1,()=>{h[b]=null}),Vt()),~o?(a=h[o],a||(a=h[o]=c[o](d),a.c()),Y(a,1),a.m(e,l)):a=null)},i(d){s||(Y(a),Y(f.$$.fragment,d),s=!0)},o(d){K(a),K(f.$$.fragment,d),s=!1},d(d){d&&W(e),u&&u.d(),~o&&h[o].d(),ct(f)}}}function ZS(t,e,n){let i=bi(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific"),()=>n(0,i="analysis_prolific")]}class KS extends Ot{constructor(e){super(),Pt(this,e,ZS,XS,Rt,{})}}new KS({target:document.getElementById("app")});export{T0 as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-sy0-TYZE.js","assets/utilities-RixM6kKM.js","assets/index-TlZAmOeR.js","assets/index-sw3iqwMj.js","assets/index-1vG73tlT.js","assets/index-pRhnj47k.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
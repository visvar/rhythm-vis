var lb=Object.defineProperty;var fb=(t,e,n)=>e in t?lb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fn=(t,e,n)=>(fb(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function wt(){}function l0(t){return t()}function Hu(){return Object.create(null)}function Ie(t){t.forEach(l0)}function f0(t){return typeof t=="function"}function It(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function sb(t){return Object.keys(t).length===0}function y(t,e){t.appendChild(e)}function X(t,e,n){t.insertBefore(e,n||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function en(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function M(t){return document.createElement(t)}function If(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function at(t){return document.createTextNode(t)}function D(){return at(" ")}function Kn(){return at("")}function gt(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function R(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _e(t){return t===""?null:+t}function ub(t){return Array.from(t.childNodes)}function Nt(t,e){e=""+e,t.data!==e&&(t.data=e)}function lt(t,e){t.value=e??""}function ge(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function pe(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function di(t){const e=t.querySelector(":checked");return e&&e.__value}class cb{constructor(e=!1){Fn(this,"is_svg",!1);Fn(this,"e");Fn(this,"n");Fn(this,"t");Fn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=If(n.nodeName):this.e=M(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)X(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(V)}}let zr;function Lr(t){zr=t}function s0(){if(!zr)throw new Error("Function called outside component initialization");return zr}function pi(t){s0().$$.on_mount.push(t)}function Xe(t){s0().$$.after_update.push(t)}const Ri=[],re=[];let zi=[];const Vu=[],hb=Promise.resolve();let Rf=!1;function db(){Rf||(Rf=!0,hb.then(u0))}function fn(t){zi.push(t)}const Yl=new Set;let Ei=0;function u0(){if(Ei!==0)return;const t=zr;do{try{for(;Ei<Ri.length;){const e=Ri[Ei];Ei++,Lr(e),pb(e.$$)}}catch(e){throw Ri.length=0,Ei=0,e}for(Lr(null),Ri.length=0,Ei=0;re.length;)re.pop()();for(let e=0;e<zi.length;e+=1){const n=zi[e];Yl.has(n)||(Yl.add(n),n())}zi.length=0}while(Ri.length);for(;Vu.length;)Vu.pop()();Rf=!1,Yl.clear(),Lr(t)}function pb(t){if(t.fragment!==null){t.update(),Ie(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(fn)}}function mb(t){const e=[],n=[];zi.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),zi=e}const ea=new Set;let li;function Qt(){li={r:0,c:[],p:li}}function Jt(){li.r||Ie(li.c),li=li.p}function H(t,e){t&&t.i&&(ea.delete(t),t.i(e))}function J(t,e,n,i){if(t&&t.o){if(ea.has(t))return;ea.add(t),li.c.push(()=>{ea.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Bt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ct(t){t&&t.c()}function st(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),fn(()=>{const o=t.$$.on_mount.map(l0).filter(f0);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ie(o),t.$$.on_mount=[]}),r.forEach(fn)}function ut(t,e){const n=t.$$;n.fragment!==null&&(mb(n.after_update),Ie(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gb(t,e){t.$$.dirty[0]===-1&&(Ri.push(t),db(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Rt(t,e,n,i,r,o,a=null,l=[-1]){const f=zr;Lr(t);const s=t.$$={fragment:null,ctx:[],props:o,update:wt,not_equal:r,bound:Hu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Hu(),dirty:l,skip_bound:!1,root:e.target||f.$$.root};a&&a(s.root);let u=!1;if(s.ctx=n?n(t,e.props||{},(c,h,...p)=>{const d=p.length?p[0]:h;return s.ctx&&r(s.ctx[c],s.ctx[c]=d)&&(!s.skip_bound&&s.bound[c]&&s.bound[c](d),u&&gb(t,c)),h}):[],s.update(),u=!0,Ie(s.before_update),s.fragment=i?i(s.ctx):!1,e.target){if(e.hydrate){const c=ub(e.target);s.fragment&&s.fragment.l(c),c.forEach(V)}else s.fragment&&s.fragment.c();e.intro&&H(t.$$.fragment),st(t,e.target,e.anchor),u0()}Lr(f)}class Pt{constructor(){Fn(this,"$$");Fn(this,"$$set")}$destroy(){ut(this,1),this.$destroy=wt}$on(e,n){if(!f0(n))return wt;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!sb(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bb="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bb);const _b="modulepreload",yb=function(t){return"/rhythm-vis/"+t},Gu={},Ni=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");r=Promise.all(n.map(a=>{if(a=yb(a),a in Gu)return;Gu[a]=!0;const l=a.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(!!i)for(let c=o.length-1;c>=0;c--){const h=o[c];if(h.href===a&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${f}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":_b,l||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),l)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function wb(t){if(t){if(t=new Uint8Array(t.buffer||t),xb(t))return"wav";if(vb(t))return"mp3";if(Mb(t))return"flac";if(Sb(t))return"m4a";if(Tb(t))return"opus";if(kb(t))return"oga";if(Cb(t))return"qoa"}}function vb(t){if(!(!t||t.length<3))return t[0]===73&&t[1]===68&&t[2]===51||t[0]===255&&(t[1]&224)===224||t[0]===84&&t[1]===65&&t[2]===71}function xb(t){if(!(!t||t.length<12))return t[0]===82&&t[1]===73&&t[2]===70&&t[3]===70&&t[8]===87&&t[9]===65&&t[10]===86&&t[11]===69}function kb(t){if(!(!t||t.length<4))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83}function Mb(t){if(!(!t||t.length<4))return t[0]===102&&t[1]===76&&t[2]===97&&t[3]===67}function Sb(t){if(!(!t||t.length<8))return t[4]===102&&t[5]===116&&t[6]===121&&t[7]===112||t[0]===77&&t[1]===52&&t[2]===65&&t[3]===32}function Tb(t){if(!(!t||t.length<36))return t[0]===79&&t[1]===103&&t[2]===103&&t[3]===83&&t[28]===79&&t[29]===112&&t[30]===117&&t[31]===115&&t[32]===72&&t[33]===101&&t[34]===97&&t[35]===100}function Cb(t){if(t)return t[0]===113&&t[1]===111&&t[2]===97&&t[3]===102}let $b=class{constructor(e){if(!e)throw TypeError("options argument is required");if(!e.sampleRate)throw TypeError("options.sampleRate is required");if(e.sampleRate<3e3||e.sampleRate>768e3)throw TypeError("options.sampleRate must be within 3000..768000");if(!e.length)throw TypeError("options.length must be more than 0");this.sampleRate=e.sampleRate,this.numberOfChannels=e.numberOfChannels||1,this.length=e.length|0,this.duration=this.length/this.sampleRate,this._data=new Float32Array(this.length*this.numberOfChannels),this._channelData=[];for(let n=0;n<this.numberOfChannels;n++)this._channelData.push(this._data.subarray(n*this.length,(n+1)*this.length))}getChannelData(e){if(e>=this.numberOfChannels||e<0||e==null)throw Error("Cannot getChannelData: channel number ("+e+") exceeds number of channels ("+this.numberOfChannels+")");return this._channelData[e]}copyFromChannel(e,n,i){i==null&&(i=0);for(var r=this._channelData[n],o=i,a=0;o<this.length&&a<e.length;o++,a++)e[a]=r[o]}copyToChannel(e,n,i){var r=this._channelData[n];i||(i=0);for(var o=i,a=0;o<this.length&&a<e.length;o++,a++)r[o]=e[a]}};const Ab=globalThis.AudioBuffer||$b;async function Eb(t){if(!t&&!(t.length||t.buffer))throw Error("Bad decode target");t=new Uint8Array(t.buffer||t);let e=wb(t);if(!e)throw Error("Cannot detect audio format");if(!ce[e])throw Error("Missing decoder for "+e+" format");return ce[e](t)}const ce={async oga(t){let{decoder:e}=ce.oga;if(e)await e.reset();else{let{OggVorbisDecoder:n}=await Ni(()=>import("./index-mb9FGVdr.js"),__vite__mapDeps([0,1,2]));await(ce.oga.decoder=e=new n).ready}return t&&Di(await e.decodeFile(t))},async mp3(t){let{decoder:e}=ce.mp3;if(e)await e.reset();else{const{MPEGDecoder:n}=await Ni(()=>import("./index-rWna8wWW.js"),__vite__mapDeps([3,1]));await(ce.mp3.decoder=e=new n).ready}return t&&Di(await e.decode(t))},async flac(t){let{decoder:e}=ce.flac;if(e)await e.reset();else{const{FLACDecoder:n}=await Ni(()=>import("./index-ZfzZwU7r.js"),__vite__mapDeps([4,1,2]));await(ce.flac.decoder=e=new n).ready}return t&&Di(await e.decode(t))},async opus(t){let{decoder:e}=ce.opus;if(e)await e.reset();else{const{OggOpusDecoder:n}=await Ni(()=>import("./index-0kTA9uRG.js"),__vite__mapDeps([5,1,2]));await(ce.opus.decoder=e=new n).ready}return t&&Di(await e.decodeFile(t))},async wav(t){let{decode:e}=ce.wav;if(!e){let n=await Ni(()=>import("./index-6Ash-mKp.js").then(i=>i.i),__vite__mapDeps([]));e=ce.wav.decode=n.default.decode}return t&&Di(await e(t))},async qoa(t){let{decode:e}=ce.qoa;return e||(ce.qoa.decode=e=(await Ni(()=>import("./index-KCP-WWZ5.js"),__vite__mapDeps([]))).decode),t&&Di(await e(t))}};function Di({channelData:t,sampleRate:e}){let n=new Ab({sampleRate:e,length:t[0].length,numberOfChannels:t.length});for(let i=0;i<t.length;i++)n.getChannelData(i).set(t[i]);return n}var gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nb=Db;function Db(t,e){e=e||{};var n=t.numberOfChannels,i=t.sampleRate,r=e.float32?3:1,o=r===3?32:16,a;return n===2?a=Lb(t.getChannelData(0),t.getChannelData(1)):a=t.getChannelData(0),Fb(a,r,i,n,o)}function Fb(t,e,n,i,r){var o=r/8,a=i*o,l=new ArrayBuffer(44+t.length*o),f=new DataView(l);return Do(f,0,"RIFF"),f.setUint32(4,36+t.length*o,!0),Do(f,8,"WAVE"),Do(f,12,"fmt "),f.setUint32(16,16,!0),f.setUint16(20,e,!0),f.setUint16(22,i,!0),f.setUint32(24,n,!0),f.setUint32(28,n*a,!0),f.setUint16(32,a,!0),f.setUint16(34,r,!0),Do(f,36,"data"),f.setUint32(40,t.length*o,!0),e===1?Rb(f,44,t):Ib(f,44,t),l}function Lb(t,e){for(var n=t.length+e.length,i=new Float32Array(n),r=0,o=0;r<n;)i[r++]=t[o],i[r++]=e[o],o++;return i}function Ib(t,e,n){for(var i=0;i<n.length;i++,e+=4)t.setFloat32(e,n[i],!0)}function Rb(t,e,n){for(var i=0;i<n.length;i++,e+=2){var r=Math.max(-1,Math.min(1,n[i]));t.setInt16(e,r<0?r*32768:r*32767,!0)}}function Do(t,e,n){for(var i=0;i<n.length;i++)t.setUint8(e+i,n.charCodeAt(i))}const Pb=c0(Nb);function Hi(t=16,e=.5,n=0,i=0,r=!1,o=0){const a=[];for(let l=0;l<t;++l){let f;r?f=l>=n?i:0:f=l===n?i:0,a.push(l*e+o+f)}return a}async function Ds(t){const n=await(await fetch(t)).arrayBuffer();return await Eb(n)}function Ga(t,e,n=1){const i=e.at(-1)+n,r=t.getChannelData(0),o=new Float32Array(Math.ceil(i*t.sampleRate));for(const a of e){const l=Math.round(a*t.sampleRate);let f=1;for(let s=0;s<r.length;++s)f=Math.max(0,f-2/40100),o[l+s]=r[s]*f}return o}function Fs(t,e,n){const i=new AudioBuffer({sampleRate:e,length:t.length});i.copyToChannel(t,0);const r=new Blob([Pb(i)],{type:"audio/wav"});n.src=window.URL.createObjectURL(r)}function Ls(t){return t.map(e=>({value:e,sort:Math.random()})).sort((e,n)=>e.sort-n.sort).map(({value:e})=>e)}function be(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ro(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xa(t){let e,n,i;t.length!==2?(e=be,n=(l,f)=>be(t(l),f),i=(l,f)=>t(l)-f):(e=t===be||t===ro?t:Ob,n=t,i=t);function r(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<0?s=c+1:u=c}while(s<u)}return s}function o(l,f,s=0,u=l.length){if(s<u){if(e(f,f)!==0)return u;do{const c=s+u>>>1;n(l[c],f)<=0?s=c+1:u=c}while(s<u)}return s}function a(l,f,s=0,u=l.length){const c=r(l,f,s,u-1);return c>s&&i(l[c-1],f)>-i(l[c],f)?c-1:c}return{left:r,center:a,right:o}}function Ob(){return 0}function h0(t){return t===null?NaN:+t}function*Ub(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(yield i)}}const zb=Xa(be),Bb=zb.right;Xa(h0).center;const ja=Bb;function Is(t,e){let n=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(r=+r)>=r&&++n}return n}function qb(t){return t.length|0}function Wb(t){return!(t>0)}function Yb(t){return typeof t!="object"||"length"in t?t:Array.from(t)}function Hb(t){return e=>t(...e)}function Vb(...t){const e=typeof t[t.length-1]=="function"&&Hb(t.pop());t=t.map(Yb);const n=t.map(qb),i=t.length-1,r=new Array(i+1).fill(0),o=[];if(i<0||n.some(Wb))return o;for(;;){o.push(r.map((l,f)=>t[f][l]));let a=i;for(;++r[a]===n[a];){if(a===0)return e?o.map(e):o;r[a--]=0}}}function Gb(t,e){var n=0,i=0;return Float64Array.from(t,e===void 0?r=>n+=+r||0:r=>n+=+e(r,i++,t)||0)}function Vi(t,e){let n=0,i,r=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(i=a-r,r+=i/++n,o+=i*(a-r));else{let a=-1;for(let l of t)(l=e(l,++a,t))!=null&&(l=+l)>=l&&(i=l-r,r+=i/++n,o+=i*(l-r))}if(n>1)return o/(n-1)}function oo(t,e){const n=Vi(t,e);return n&&Math.sqrt(n)}function Ae(t,e){let n,i;if(e===void 0)for(const r of t)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(n===void 0?o>=o&&(n=i=o):(n>o&&(n=o),i<o&&(i=o)))}return[n,i]}class mi{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],a=e+o,l=Math.abs(e)<Math.abs(o)?e-(a-o):o-(a-e);l&&(n[i++]=l),e=a}return n[i]=e,this._n=i+1,this}valueOf(){const e=this._partials;let n=this._n,i,r,o,a=0;if(n>0){for(a=e[--n];n>0&&(i=a,r=e[--n],a=i+r,o=r-(a-i),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(r=o*2,i=a+r,r==i-a&&(a=i))}return a}}class gi extends Map{constructor(e,n=m0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Pf(this,e))}has(e){return super.has(Pf(this,e))}set(e,n){return super.set(d0(this,e),n)}delete(e){return super.delete(p0(this,e))}}class Za extends Set{constructor(e,n=m0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const i of e)this.add(i)}has(e){return super.has(Pf(this,e))}add(e){return super.add(d0(this,e))}delete(e){return super.delete(p0(this,e))}}function Pf({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function d0({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function p0({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function m0(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ua(t){return t}function Ka(t,...e){return Qa(t,ua,ua,e)}function nn(t,...e){return Qa(t,Array.from,ua,e)}function Bi(t,e,...n){return Qa(t,ua,e,n)}function Xb(t,e,...n){return Qa(t,Array.from,e,n)}function Qa(t,e,n,i){return function r(o,a){if(a>=i.length)return n(o);const l=new gi,f=i[a++];let s=-1;for(const u of o){const c=f(u,++s,o),h=l.get(c);h?h.push(u):l.set(c,[u])}for(const[u,c]of l)l.set(u,r(c,a));return e(l)}(t,0)}function jb(t,e){return Array.from(e,n=>t[n])}function Br(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const i=Uint32Array.from(t,(r,o)=>o);return e.length>1?(e=e.map(r=>t.map(r)),i.sort((r,o)=>{for(const a of e){const l=ca(a[r],a[o]);if(l)return l}})):(n=t.map(n),i.sort((r,o)=>ca(n[r],n[o]))),jb(t,i)}return t.sort(g0(n))}function g0(t=be){if(t===be)return ca;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function ca(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function Rs(t,e,n){return(e.length!==2?Br(Bi(t,e,n),([i,r],[o,a])=>be(r,a)||be(i,o)):Br(Ka(t,n),([i,r],[o,a])=>e(r,a)||be(i,o))).map(([i])=>i)}const Zb=Math.sqrt(50),Kb=Math.sqrt(10),Qb=Math.sqrt(2);function ha(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),o=i/Math.pow(10,r),a=o>=Zb?10:o>=Kb?5:o>=Qb?2:1;let l,f,s;return r<0?(s=Math.pow(10,-r)/a,l=Math.round(t*s),f=Math.round(e*s),l/s<t&&++l,f/s>e&&--f,s=-s):(s=Math.pow(10,r)*a,l=Math.round(t/s),f=Math.round(e/s),l*s<t&&++l,f*s>e&&--f),f<l&&.5<=n&&n<2?ha(t,e,n*2):[l,f,s]}function qr(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,o,a]=i?ha(e,t,n):ha(t,e,n);if(!(o>=r))return[];const l=o-r+1,f=new Array(l);if(i)if(a<0)for(let s=0;s<l;++s)f[s]=(o-s)/-a;else for(let s=0;s<l;++s)f[s]=(o-s)*a;else if(a<0)for(let s=0;s<l;++s)f[s]=(r+s)/-a;else for(let s=0;s<l;++s)f[s]=(r+s)*a;return f}function da(t,e,n){return e=+e,t=+t,n=+n,ha(t,e,n)[2]}function Of(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?da(e,t,n):da(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function Jb(t){return Math.max(1,Math.ceil(Math.log(Is(t))/Math.LN2)+1)}function ye(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function t_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n<o||n===void 0&&o>=o)&&(n=o,i=r);return i}function Mn(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function e_(t,e){let n,i=-1,r=-1;if(e===void 0)for(const o of t)++r,o!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);else for(let o of t)(o=e(o,++r,t))!=null&&(n>o||n===void 0&&o>=o)&&(n=o,i=r);return i}function b0(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?ca:g0(r);i>n;){if(i-n>600){const f=i-n+1,s=e-n+1,u=Math.log(f),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(f-c)/f)*(s-f/2<0?-1:1),p=Math.max(n,Math.floor(e-s*c/f+h)),d=Math.min(i,Math.floor(e+(f-s)*c/f+h));b0(t,e,p,d,r)}const o=t[e];let a=n,l=i;for(br(t,n,e),r(t[i],o)>0&&br(t,n,i);a<l;){for(br(t,a,l),++a,--l;r(t[a],o)<0;)++a;for(;r(t[l],o)>0;)--l}r(t[n],o)===0?br(t,n,l):(++l,br(t,l,i)),l<=e&&(n=l+1),e<=l&&(i=l-1)}return t}function br(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function _0(t,e=be){let n,i=!1;if(e.length===1){let r;for(const o of t){const a=e(o);(i?be(a,r)>0:be(a,a)===0)&&(n=o,r=a,i=!0)}}else for(const r of t)(i?e(r,n)>0:e(r,r)===0)&&(n=r,i=!0);return n}function Gi(t,e,n){if(t=Float64Array.from(Ub(t,n)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return Mn(t);if(e>=1)return ye(t);var i,r=(i-1)*e,o=Math.floor(r),a=ye(b0(t,o).subarray(0,o+1)),l=Mn(t.subarray(o+1));return a+(l-a)*(r-o)}}function n_(t,e,n=h0){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,o=Math.floor(r),a=+n(t[o],o,t),l=+n(t[o+1],o+1,t);return a+(l-a)*(r-o)}}function i_(t,e,n){const i=Is(t),r=Gi(t,.75)-Gi(t,.25);return i&&r?Math.ceil((n-e)/(2*r*Math.pow(i,-1/3))):1}function y0(t,e,n){const i=Is(t),r=oo(t);return i&&r?Math.ceil((n-e)*Math.cbrt(i)/(3.49*r)):1}function Vn(t,e){let n=0,i=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(o=+o)>=o&&(++n,i+=o)}if(n)return i/n}function Uf(t,e){return Gi(t,.5,e)}function*r_(t){for(const e of t)yield*e}function w0(t){return Array.from(r_(t))}function o_(t,e){const n=new gi;if(e===void 0)for(let o of t)o!=null&&o>=o&&n.set(o,(n.get(o)||0)+1);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&a>=a&&n.set(a,(n.get(a)||0)+1)}let i,r=0;for(const[o,a]of n)a>r&&(r=a,i=o);return i}function a_(t,e=l_){const n=[];let i,r=!1;for(const o of t)r&&n.push(e(i,o)),i=o,r=!0;return n}function l_(t,e){return[t,e]}function zf(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(r);++i<r;)o[i]=t+i*n;return o}function Gn(t,e){let n=0;if(e===void 0)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function pa(t){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(t).reverse()}function f_(t){return t}var Hl=1,Vl=2,Bf=3,Fo=4,Xu=1e-6;function s_(t){return"translate("+t+",0)"}function u_(t){return"translate(0,"+t+")"}function c_(t){return e=>+t(e)}function h_(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function d_(){return!this.__axis}function p_(t,e){var n=[],i=null,r=null,o=6,a=6,l=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,s=t===Hl||t===Fo?-1:1,u=t===Fo||t===Vl?"x":"y",c=t===Hl||t===Bf?s_:u_;function h(p){var d=i??(e.ticks?e.ticks.apply(e,n):e.domain()),m=r??(e.tickFormat?e.tickFormat.apply(e,n):f_),g=Math.max(o,0)+l,_=e.range(),b=+_[0]+f,v=+_[_.length-1]+f,w=(e.bandwidth?h_:c_)(e.copy(),f),x=p.selection?p.selection():p,k=x.selectAll(".domain").data([null]),S=x.selectAll(".tick").data(d,e).order(),T=S.exit(),A=S.enter().append("g").attr("class","tick"),F=S.select("line"),C=S.select("text");k=k.merge(k.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(A),F=F.merge(A.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),C=C.merge(A.append("text").attr("fill","currentColor").attr(u,s*g).attr("dy",t===Hl?"0em":t===Bf?"0.71em":"0.32em")),p!==x&&(k=k.transition(p),S=S.transition(p),F=F.transition(p),C=C.transition(p),T=T.transition(p).attr("opacity",Xu).attr("transform",function(I){return isFinite(I=w(I))?c(I+f):this.getAttribute("transform")}),A.attr("opacity",Xu).attr("transform",function(I){var L=this.parentNode.__axis;return c((L&&isFinite(L=L(I))?L:w(I))+f)})),T.remove(),k.attr("d",t===Fo||t===Vl?a?"M"+s*a+","+b+"H"+f+"V"+v+"H"+s*a:"M"+f+","+b+"V"+v:a?"M"+b+","+s*a+"V"+f+"H"+v+"V"+s*a:"M"+b+","+f+"H"+v),S.attr("opacity",1).attr("transform",function(I){return c(w(I)+f)}),F.attr(u+"2",s*o),C.attr(u,s*g).text(m),x.filter(d_).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Vl?"start":t===Fo?"end":"middle"),x.each(function(){this.__axis=w})}return h.scale=function(p){return arguments.length?(e=p,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(p){return arguments.length?(n=p==null?[]:Array.from(p),h):n.slice()},h.tickValues=function(p){return arguments.length?(i=p==null?null:Array.from(p),h):i&&i.slice()},h.tickFormat=function(p){return arguments.length?(r=p,h):r},h.tickSize=function(p){return arguments.length?(o=a=+p,h):o},h.tickSizeInner=function(p){return arguments.length?(o=+p,h):o},h.tickSizeOuter=function(p){return arguments.length?(a=+p,h):a},h.tickPadding=function(p){return arguments.length?(l=+p,h):l},h.offset=function(p){return arguments.length?(f=+p,h):f},h}function m_(t){return p_(Bf,t)}var g_={value:()=>{}};function v0(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new na(n)}function na(t){this._=t}function b_(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}na.prototype=v0.prototype={constructor:na,on:function(t,e){var n=this._,i=b_(t+"",n),r,o=-1,a=i.length;if(arguments.length<2){for(;++o<a;)if((r=(t=i[o]).type)&&(r=__(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=ju(n[r],t.name,e);else if(e==null)for(r in n)n[r]=ju(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new na(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function __(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function ju(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=g_,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var qf="http://www.w3.org/1999/xhtml";const Xi={svg:"http://www.w3.org/2000/svg",xhtml:qf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ja(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Xi.hasOwnProperty(e)?{space:Xi[e],local:t}:t}function y_(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===qf&&e.documentElement.namespaceURI===qf?e.createElement(t):e.createElementNS(n,t)}}function w_(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function tl(t){var e=Ja(t);return(e.local?w_:y_)(e)}function v_(){}function Ps(t){return t==null?v_:function(){return this.querySelector(t)}}function x_(t){typeof t!="function"&&(t=Ps(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=new Array(a),f,s,u=0;u<a;++u)(f=o[u])&&(s=t.call(f,f.__data__,u,o))&&("__data__"in f&&(s.__data__=f.__data__),l[u]=s);return new ke(i,this._parents)}function k_(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function M_(){return[]}function x0(t){return t==null?M_:function(){return this.querySelectorAll(t)}}function S_(t){return function(){return k_(t.apply(this,arguments))}}function T_(t){typeof t=="function"?t=S_(t):t=x0(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var a=e[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&(i.push(t.call(f,f.__data__,s,a)),r.push(f));return new ke(i,r)}function k0(t){return function(){return this.matches(t)}}function M0(t){return function(e){return e.matches(t)}}var C_=Array.prototype.find;function $_(t){return function(){return C_.call(this.children,t)}}function A_(){return this.firstElementChild}function E_(t){return this.select(t==null?A_:$_(typeof t=="function"?t:M0(t)))}var N_=Array.prototype.filter;function D_(){return Array.from(this.children)}function F_(t){return function(){return N_.call(this.children,t)}}function L_(t){return this.selectAll(t==null?D_:F_(typeof t=="function"?t:M0(t)))}function I_(t){typeof t!="function"&&(t=k0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new ke(i,this._parents)}function S0(t){return new Array(t.length)}function R_(){return new ke(this._enter||this._groups.map(S0),this._parents)}function ma(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ma.prototype={constructor:ma,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function P_(t){return function(){return t}}function O_(t,e,n,i,r,o){for(var a=0,l,f=e.length,s=o.length;a<s;++a)(l=e[a])?(l.__data__=o[a],i[a]=l):n[a]=new ma(t,o[a]);for(;a<f;++a)(l=e[a])&&(r[a]=l)}function U_(t,e,n,i,r,o,a){var l,f,s=new Map,u=e.length,c=o.length,h=new Array(u),p;for(l=0;l<u;++l)(f=e[l])&&(h[l]=p=a.call(f,f.__data__,l,e)+"",s.has(p)?r[l]=f:s.set(p,f));for(l=0;l<c;++l)p=a.call(t,o[l],l,o)+"",(f=s.get(p))?(i[l]=f,f.__data__=o[l],s.delete(p)):n[l]=new ma(t,o[l]);for(l=0;l<u;++l)(f=e[l])&&s.get(h[l])===f&&(r[l]=f)}function z_(t){return t.__data__}function B_(t,e){if(!arguments.length)return Array.from(this,z_);var n=e?U_:O_,i=this._parents,r=this._groups;typeof t!="function"&&(t=P_(t));for(var o=r.length,a=new Array(o),l=new Array(o),f=new Array(o),s=0;s<o;++s){var u=i[s],c=r[s],h=c.length,p=q_(t.call(u,u&&u.__data__,s,i)),d=p.length,m=l[s]=new Array(d),g=a[s]=new Array(d),_=f[s]=new Array(h);n(u,c,m,g,_,p,e);for(var b=0,v=0,w,x;b<d;++b)if(w=m[b]){for(b>=v&&(v=b+1);!(x=g[v])&&++v<d;);w._next=x||null}}return a=new ke(a,i),a._enter=l,a._exit=f,a}function q_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function W_(){return new ke(this._exit||this._groups.map(S0),this._parents)}function Y_(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function H_(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),l=new Array(r),f=0;f<a;++f)for(var s=n[f],u=i[f],c=s.length,h=l[f]=new Array(c),p,d=0;d<c;++d)(p=s[d]||u[d])&&(h[d]=p);for(;f<r;++f)l[f]=n[f];return new ke(l,this._parents)}function V_(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],a;--r>=0;)(a=i[r])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function G_(t){t||(t=X_);function e(c,h){return c&&h?t(c.__data__,h.__data__):!c-!h}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a=n[o],l=a.length,f=r[o]=new Array(l),s,u=0;u<l;++u)(s=a[u])&&(f[u]=s);f.sort(e)}return new ke(r,this._parents).order()}function X_(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function j_(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Z_(){return Array.from(this)}function K_(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null}function Q_(){let t=0;for(const e of this)++t;return t}function J_(){return!this.node()}function ty(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,a=r.length,l;o<a;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function ey(t){return function(){this.removeAttribute(t)}}function ny(t){return function(){this.removeAttributeNS(t.space,t.local)}}function iy(t,e){return function(){this.setAttribute(t,e)}}function ry(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function oy(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ay(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ly(t,e){var n=Ja(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?ny:ey:typeof e=="function"?n.local?ay:oy:n.local?ry:iy)(n,e))}function T0(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function fy(t){return function(){this.style.removeProperty(t)}}function sy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function uy(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function cy(t,e,n){return arguments.length>1?this.each((e==null?fy:typeof e=="function"?uy:sy)(t,e,n??"")):ji(this.node(),t)}function ji(t,e){return t.style.getPropertyValue(e)||T0(t).getComputedStyle(t,null).getPropertyValue(e)}function hy(t){return function(){delete this[t]}}function dy(t,e){return function(){this[t]=e}}function py(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function my(t,e){return arguments.length>1?this.each((e==null?hy:typeof e=="function"?py:dy)(t,e)):this.node()[t]}function C0(t){return t.trim().split(/^|\s+/)}function Os(t){return t.classList||new $0(t)}function $0(t){this._node=t,this._names=C0(t.getAttribute("class")||"")}$0.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function A0(t,e){for(var n=Os(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function E0(t,e){for(var n=Os(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function gy(t){return function(){A0(this,t)}}function by(t){return function(){E0(this,t)}}function _y(t,e){return function(){(e.apply(this,arguments)?A0:E0)(this,t)}}function yy(t,e){var n=C0(t+"");if(arguments.length<2){for(var i=Os(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?_y:e?gy:by)(n,e))}function wy(){this.textContent=""}function vy(t){return function(){this.textContent=t}}function xy(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ky(t){return arguments.length?this.each(t==null?wy:(typeof t=="function"?xy:vy)(t)):this.node().textContent}function My(){this.innerHTML=""}function Sy(t){return function(){this.innerHTML=t}}function Ty(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Cy(t){return arguments.length?this.each(t==null?My:(typeof t=="function"?Ty:Sy)(t)):this.node().innerHTML}function $y(){this.nextSibling&&this.parentNode.appendChild(this)}function Ay(){return this.each($y)}function Ey(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ny(){return this.each(Ey)}function Dy(t){var e=typeof t=="function"?t:tl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Fy(){return null}function Ly(t,e){var n=typeof t=="function"?t:tl(t),i=e==null?Fy:typeof e=="function"?e:Ps(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Iy(){var t=this.parentNode;t&&t.removeChild(this)}function Ry(){return this.each(Iy)}function Py(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Oy(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Uy(t){return this.select(t?Oy:Py)}function zy(t){return arguments.length?this.property("__data__",t):this.node().__data__}function By(t){return function(e){t.call(this,e,this.__data__)}}function qy(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Wy(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function Yy(t,e,n){return function(){var i=this.__on,r,o=By(e);if(i){for(var a=0,l=i.length;a<l;++a)if((r=i[a]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Hy(t,e,n){var i=qy(t+""),r,o=i.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,s=l.length,u;f<s;++f)for(r=0,u=l[f];r<o;++r)if((a=i[r]).type===u.type&&a.name===u.name)return u.value}return}for(l=e?Yy:Wy,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function N0(t,e,n){var i=T0(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Vy(t,e){return function(){return N0(this,t,e)}}function Gy(t,e){return function(){return N0(this,t,e.apply(this,arguments))}}function Xy(t,e){return this.each((typeof e=="function"?Gy:Vy)(t,e))}function*jy(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,a;r<o;++r)(a=i[r])&&(yield a)}var D0=[null];function ke(t,e){this._groups=t,this._parents=e}function ao(){return new ke([[document.documentElement]],D0)}function Zy(){return this}ke.prototype=ao.prototype={constructor:ke,select:x_,selectAll:T_,selectChild:E_,selectChildren:L_,filter:I_,data:B_,enter:R_,exit:W_,join:Y_,merge:H_,selection:Zy,order:V_,sort:G_,call:j_,nodes:Z_,node:K_,size:Q_,empty:J_,each:ty,attr:ly,style:cy,property:my,classed:yy,text:ky,html:Cy,raise:Ay,lower:Ny,append:Dy,insert:Ly,remove:Ry,clone:Uy,datum:zy,on:Hy,dispatch:Xy,[Symbol.iterator]:jy};function Ir(t){return typeof t=="string"?new ke([[document.querySelector(t)]],[document.documentElement]):new ke([[t]],D0)}function Ky(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Qy(t,e){if(t=Ky(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}function sr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function lo(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Qn(){}var bi=.7,Zi=1/bi,qi="\\s*([+-]?\\d+)\\s*",Wr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jy=/^#([0-9a-f]{3,8})$/,tw=new RegExp(`^rgb\\(${qi},${qi},${qi}\\)$`),ew=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),nw=new RegExp(`^rgba\\(${qi},${qi},${qi},${Wr}\\)$`),iw=new RegExp(`^rgba\\(${an},${an},${an},${Wr}\\)$`),rw=new RegExp(`^hsl\\(${Wr},${an},${an}\\)$`),ow=new RegExp(`^hsla\\(${Wr},${an},${an},${Wr}\\)$`),Zu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};sr(Qn,_i,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ku,formatHex:Ku,formatHex8:aw,formatHsl:lw,formatRgb:Qu,toString:Qu});function Ku(){return this.rgb().formatHex()}function aw(){return this.rgb().formatHex8()}function lw(){return F0(this).formatHsl()}function Qu(){return this.rgb().formatRgb()}function _i(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Jy.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ju(e):n===3?new Zt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Lo(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Lo(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tw.exec(t))?new Zt(e[1],e[2],e[3],1):(e=ew.exec(t))?new Zt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nw.exec(t))?Lo(e[1],e[2],e[3],e[4]):(e=iw.exec(t))?Lo(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rw.exec(t))?nc(e[1],e[2]/100,e[3]/100,1):(e=ow.exec(t))?nc(e[1],e[2]/100,e[3]/100,e[4]):Zu.hasOwnProperty(t)?Ju(Zu[t]):t==="transparent"?new Zt(NaN,NaN,NaN,0):null}function Ju(t){return new Zt(t>>16&255,t>>8&255,t&255,1)}function Lo(t,e,n,i){return i<=0&&(t=e=n=NaN),new Zt(t,e,n,i)}function Us(t){return t instanceof Qn||(t=_i(t)),t?(t=t.rgb(),new Zt(t.r,t.g,t.b,t.opacity)):new Zt}function Xn(t,e,n,i){return arguments.length===1?Us(t):new Zt(t,e,n,i??1)}function Zt(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}sr(Zt,Xn,lo(Qn,{brighter(t){return t=t==null?Zi:Math.pow(Zi,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?bi:Math.pow(bi,t),new Zt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zt(ui(this.r),ui(this.g),ui(this.b),ga(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tc,formatHex:tc,formatHex8:fw,formatRgb:ec,toString:ec}));function tc(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}`}function fw(){return`#${fi(this.r)}${fi(this.g)}${fi(this.b)}${fi((isNaN(this.opacity)?1:this.opacity)*255)}`}function ec(){const t=ga(this.opacity);return`${t===1?"rgb(":"rgba("}${ui(this.r)}, ${ui(this.g)}, ${ui(this.b)}${t===1?")":`, ${t})`}`}function ga(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ui(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function fi(t){return t=ui(t),(t<16?"0":"")+t.toString(16)}function nc(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Be(t,e,n,i)}function F0(t){if(t instanceof Be)return new Be(t.h,t.s,t.l,t.opacity);if(t instanceof Qn||(t=_i(t)),!t)return new Be;if(t instanceof Be)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,l=o-r,f=(o+r)/2;return l?(e===o?a=(n-i)/l+(n<i)*6:n===o?a=(i-e)/l+2:a=(e-n)/l+4,l/=f<.5?o+r:2-o-r,a*=60):l=f>0&&f<1?0:a,new Be(a,l,f,t.opacity)}function Wf(t,e,n,i){return arguments.length===1?F0(t):new Be(t,e,n,i??1)}function Be(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}sr(Be,Wf,lo(Qn,{brighter(t){return t=t==null?Zi:Math.pow(Zi,t),new Be(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bi:Math.pow(bi,t),new Be(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Zt(Gl(t>=240?t-240:t+120,r,i),Gl(t,r,i),Gl(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Be(ic(this.h),Io(this.s),Io(this.l),ga(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ga(this.opacity);return`${t===1?"hsl(":"hsla("}${ic(this.h)}, ${Io(this.s)*100}%, ${Io(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ic(t){return t=(t||0)%360,t<0?t+360:t}function Io(t){return Math.max(0,Math.min(1,t||0))}function Gl(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const L0=Math.PI/180,I0=180/Math.PI,ba=18,R0=.96422,P0=1,O0=.82521,U0=4/29,Wi=6/29,z0=3*Wi*Wi,sw=Wi*Wi*Wi;function B0(t){if(t instanceof ln)return new ln(t.l,t.a,t.b,t.opacity);if(t instanceof vn)return q0(t);t instanceof Zt||(t=Us(t));var e=Kl(t.r),n=Kl(t.g),i=Kl(t.b),r=Xl((.2225045*e+.7168786*n+.0606169*i)/P0),o,a;return e===n&&n===i?o=a=r:(o=Xl((.4360747*e+.3850649*n+.1430804*i)/R0),a=Xl((.0139322*e+.0971045*n+.7141733*i)/O0)),new ln(116*r-16,500*(o-r),200*(r-a),t.opacity)}function Yf(t,e,n,i){return arguments.length===1?B0(t):new ln(t,e,n,i??1)}function ln(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}sr(ln,Yf,lo(Qn,{brighter(t){return new ln(this.l+ba*(t??1),this.a,this.b,this.opacity)},darker(t){return new ln(this.l-ba*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=R0*jl(e),t=P0*jl(t),n=O0*jl(n),new Zt(Zl(3.1338561*e-1.6168667*t-.4906146*n),Zl(-.9787684*e+1.9161415*t+.033454*n),Zl(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Xl(t){return t>sw?Math.pow(t,1/3):t/z0+U0}function jl(t){return t>Wi?t*t*t:z0*(t-U0)}function Zl(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Kl(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function uw(t){if(t instanceof vn)return new vn(t.h,t.c,t.l,t.opacity);if(t instanceof ln||(t=B0(t)),t.a===0&&t.b===0)return new vn(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*I0;return new vn(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Hf(t,e,n,i){return arguments.length===1?uw(t):new vn(t,e,n,i??1)}function vn(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function q0(t){if(isNaN(t.h))return new ln(t.l,0,0,t.opacity);var e=t.h*L0;return new ln(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}sr(vn,Hf,lo(Qn,{brighter(t){return new vn(this.h,this.c,this.l+ba*(t??1),this.opacity)},darker(t){return new vn(this.h,this.c,this.l-ba*(t??1),this.opacity)},rgb(){return q0(this).rgb()}}));var W0=-.14861,zs=1.78277,Bs=-.29227,el=-.90649,Yr=1.97294,rc=Yr*el,oc=Yr*zs,ac=zs*Bs-el*W0;function cw(t){if(t instanceof ci)return new ci(t.h,t.s,t.l,t.opacity);t instanceof Zt||(t=Us(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(ac*i+rc*e-oc*n)/(ac+rc-oc),o=i-r,a=(Yr*(n-r)-Bs*o)/el,l=Math.sqrt(a*a+o*o)/(Yr*r*(1-r)),f=l?Math.atan2(a,o)*I0-120:NaN;return new ci(f<0?f+360:f,l,r,t.opacity)}function sn(t,e,n,i){return arguments.length===1?cw(t):new ci(t,e,n,i??1)}function ci(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}sr(ci,sn,lo(Qn,{brighter(t){return t=t==null?Zi:Math.pow(Zi,t),new ci(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?bi:Math.pow(bi,t),new ci(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*L0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Zt(255*(e+n*(W0*i+zs*r)),255*(e+n*(Bs*i+el*r)),255*(e+n*(Yr*i)),this.opacity)}}));function hw(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}function dw(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,l=i<e-1?t[i+2]:2*o-r;return hw((n-i/e)*e,a,r,o,l)}}const nl=t=>()=>t;function Y0(t,e){return function(n){return t+n*e}}function pw(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function qs(t,e){var n=e-t;return n?Y0(t,n>180||n<-180?n-360*Math.round(n/360):n):nl(isNaN(t)?e:t)}function mw(t){return(t=+t)==1?ie:function(e,n){return n-e?pw(e,n,t):nl(isNaN(e)?n:e)}}function ie(t,e){var n=e-t;return n?Y0(t,n):nl(isNaN(t)?e:t)}const yi=function t(e){var n=mw(e);function i(r,o){var a=n((r=Xn(r)).r,(o=Xn(o)).r),l=n(r.g,o.g),f=n(r.b,o.b),s=ie(r.opacity,o.opacity);return function(u){return r.r=a(u),r.g=l(u),r.b=f(u),r.opacity=s(u),r+""}}return i.gamma=t,i}(1);function gw(t){return function(e){var n=e.length,i=new Array(n),r=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=Xn(e[a]),i[a]=l.r||0,r[a]=l.g||0,o[a]=l.b||0;return i=t(i),r=t(r),o=t(o),l.opacity=1,function(f){return l.r=i(f),l.g=r(f),l.b=o(f),l+""}}}var bw=gw(dw);function _w(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}}function yw(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ww(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),o=new Array(n),a;for(a=0;a<i;++a)r[a]=fo(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(l){for(a=0;a<i;++a)o[a]=r[a](l);return o}}function vw(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function ne(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function xw(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=fo(t[r],e[r]):i[r]=e[r];return function(o){for(r in n)i[r]=n[r](o);return i}}var Vf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ql=new RegExp(Vf.source,"g");function kw(t){return function(){return t}}function Mw(t){return function(e){return t(e)+""}}function H0(t,e){var n=Vf.lastIndex=Ql.lastIndex=0,i,r,o,a=-1,l=[],f=[];for(t=t+"",e=e+"";(i=Vf.exec(t))&&(r=Ql.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(i=i[0])===(r=r[0])?l[a]?l[a]+=r:l[++a]=r:(l[++a]=null,f.push({i:a,x:ne(i,r)})),n=Ql.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?f[0]?Mw(f[0].x):kw(e):(e=f.length,function(s){for(var u=0,c;u<e;++u)l[(c=f[u]).i]=c.x(s);return l.join("")})}function fo(t,e){var n=typeof e,i;return e==null||n==="boolean"?nl(e):(n==="number"?ne:n==="string"?(i=_i(e))?(e=i,yi):H0:e instanceof _i?yi:e instanceof Date?vw:yw(e)?_w:Array.isArray(e)?ww:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?xw:ne)(t,e)}function Ws(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var lc=180/Math.PI,Gf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V0(t,e,n,i,r,o){var a,l,f;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(f=t*n+e*i)&&(n-=t*f,i-=e*f),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,f/=l),t*i<e*n&&(t=-t,e=-e,f=-f,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*lc,skewX:Math.atan(f)*lc,scaleX:a,scaleY:l}}var Ro;function Sw(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Gf:V0(e.a,e.b,e.c,e.d,e.e,e.f)}function Tw(t){return t==null||(Ro||(Ro=document.createElementNS("http://www.w3.org/2000/svg","g")),Ro.setAttribute("transform",t),!(t=Ro.transform.baseVal.consolidate()))?Gf:(t=t.matrix,V0(t.a,t.b,t.c,t.d,t.e,t.f))}function G0(t,e,n,i){function r(s){return s.length?s.pop()+" ":""}function o(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push("translate(",null,e,null,n);d.push({i:m-4,x:ne(s,c)},{i:m-2,x:ne(u,h)})}else(c||h)&&p.push("translate("+c+e+h+n)}function a(s,u,c,h){s!==u?(s-u>180?u+=360:u-s>180&&(s+=360),h.push({i:c.push(r(c)+"rotate(",null,i)-2,x:ne(s,u)})):u&&c.push(r(c)+"rotate("+u+i)}function l(s,u,c,h){s!==u?h.push({i:c.push(r(c)+"skewX(",null,i)-2,x:ne(s,u)}):u&&c.push(r(c)+"skewX("+u+i)}function f(s,u,c,h,p,d){if(s!==c||u!==h){var m=p.push(r(p)+"scale(",null,",",null,")");d.push({i:m-4,x:ne(s,c)},{i:m-2,x:ne(u,h)})}else(c!==1||h!==1)&&p.push(r(p)+"scale("+c+","+h+")")}return function(s,u){var c=[],h=[];return s=t(s),u=t(u),o(s.translateX,s.translateY,u.translateX,u.translateY,c,h),a(s.rotate,u.rotate,c,h),l(s.skewX,u.skewX,c,h),f(s.scaleX,s.scaleY,u.scaleX,u.scaleY,c,h),s=u=null,function(p){for(var d=-1,m=h.length,g;++d<m;)c[(g=h[d]).i]=g.x(p);return c.join("")}}}var Cw=G0(Sw,"px, ","px)","deg)"),$w=G0(Tw,", ",")",")");function Aw(t){return function(e,n){var i=t((e=Wf(e)).h,(n=Wf(n)).h),r=ie(e.s,n.s),o=ie(e.l,n.l),a=ie(e.opacity,n.opacity);return function(l){return e.h=i(l),e.s=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Ew=Aw(qs);function Nw(t,e){var n=ie((t=Yf(t)).l,(e=Yf(e)).l),i=ie(t.a,e.a),r=ie(t.b,e.b),o=ie(t.opacity,e.opacity);return function(a){return t.l=n(a),t.a=i(a),t.b=r(a),t.opacity=o(a),t+""}}function Dw(t){return function(e,n){var i=t((e=Hf(e)).h,(n=Hf(n)).h),r=ie(e.c,n.c),o=ie(e.l,n.l),a=ie(e.opacity,n.opacity);return function(l){return e.h=i(l),e.c=r(l),e.l=o(l),e.opacity=a(l),e+""}}}const Fw=Dw(qs);function X0(t){return function e(n){n=+n;function i(r,o){var a=t((r=sn(r)).h,(o=sn(o)).h),l=ie(r.s,o.s),f=ie(r.l,o.l),s=ie(r.opacity,o.opacity);return function(u){return r.h=a(u),r.s=l(u),r.l=f(Math.pow(u,n)),r.opacity=s(u),r+""}}return i.gamma=e,i}(1)}X0(qs);var Ys=X0(ie);function il(t,e){e===void 0&&(e=t,t=fo);for(var n=0,i=e.length-1,r=e[0],o=new Array(i<0?0:i);n<i;)o[n]=t(r,r=e[++n]);return function(a){var l=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return o[l](a-l)}}function Ye(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var Ki=0,Sr=0,_r=0,j0=1e3,_a,Tr,ya=0,wi=0,rl=0,Hr=typeof performance=="object"&&performance.now?performance:Date,Z0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Hs(){return wi||(Z0(Lw),wi=Hr.now()+rl)}function Lw(){wi=0}function wa(){this._call=this._time=this._next=null}wa.prototype=K0.prototype={constructor:wa,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Hs():+n)+(e==null?0:+e),!this._next&&Tr!==this&&(Tr?Tr._next=this:_a=this,Tr=this),this._call=t,this._time=n,Xf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xf())}};function K0(t,e,n){var i=new wa;return i.restart(t,e,n),i}function Iw(){Hs(),++Ki;for(var t=_a,e;t;)(e=wi-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ki}function fc(){wi=(ya=Hr.now())+rl,Ki=Sr=0;try{Iw()}finally{Ki=0,Pw(),wi=0}}function Rw(){var t=Hr.now(),e=t-ya;e>j0&&(rl-=e,ya=t)}function Pw(){for(var t,e=_a,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:_a=n);Tr=t,Xf(i)}function Xf(t){if(!Ki){Sr&&(Sr=clearTimeout(Sr));var e=t-wi;e>24?(t<1/0&&(Sr=setTimeout(fc,t-Hr.now()-rl)),_r&&(_r=clearInterval(_r))):(_r||(ya=Hr.now(),_r=setInterval(Rw,j0)),Ki=1,Z0(fc))}}function sc(t,e,n){var i=new wa;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var Ow=v0("start","end","cancel","interrupt"),Uw=[],Q0=0,uc=1,jf=2,ia=3,cc=4,Zf=5,ra=6;function ol(t,e,n,i,r,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;zw(t,n,{name:e,index:i,group:r,on:Ow,tween:Uw,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Q0})}function Vs(t,e){var n=je(t,e);if(n.state>Q0)throw new Error("too late; already scheduled");return n}function cn(t,e){var n=je(t,e);if(n.state>ia)throw new Error("too late; already running");return n}function je(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function zw(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=K0(o,0,n.time);function o(s){n.state=uc,n.timer.restart(a,n.delay,n.time),n.delay<=s&&a(s-n.delay)}function a(s){var u,c,h,p;if(n.state!==uc)return f();for(u in i)if(p=i[u],p.name===n.name){if(p.state===ia)return sc(a);p.state===cc?(p.state=ra,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete i[u]):+u<e&&(p.state=ra,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete i[u])}if(sc(function(){n.state===ia&&(n.state=cc,n.timer.restart(l,n.delay,n.time),l(s))}),n.state=jf,n.on.call("start",t,t.__data__,n.index,n.group),n.state===jf){for(n.state=ia,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(p=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=p);r.length=c+1}}function l(s){for(var u=s<n.duration?n.ease.call(null,s/n.duration):(n.timer.restart(f),n.state=Zf,1),c=-1,h=r.length;++c<h;)r[c].call(t,u);n.state===Zf&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=ra,n.timer.stop(),delete i[e];for(var s in i)return;delete t.__transition}}function Bw(t,e){var n=t.__transition,i,r,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((i=n[a]).name!==e){o=!1;continue}r=i.state>jf&&i.state<Zf,i.state=ra,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[a]}o&&delete t.__transition}}function qw(t){return this.each(function(){Bw(this,t)})}function Ww(t,e){var n,i;return function(){var r=cn(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,l=i.length;a<l;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function Yw(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var o=cn(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var l={name:e,value:n},f=0,s=r.length;f<s;++f)if(r[f].name===e){r[f]=l;break}f===s&&r.push(l)}o.tween=r}}function Hw(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=je(this.node(),n).tween,r=0,o=i.length,a;r<o;++r)if((a=i[r]).name===t)return a.value;return null}return this.each((e==null?Ww:Yw)(n,t,e))}function Gs(t,e,n){var i=t._id;return t.each(function(){var r=cn(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return je(r,i).value[e]}}function J0(t,e){var n;return(typeof e=="number"?ne:e instanceof _i?yi:(n=_i(e))?(e=n,yi):H0)(t,e)}function Vw(t){return function(){this.removeAttribute(t)}}function Gw(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Xw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttribute(t);return a===r?null:a===i?o:o=e(i=a,n)}}function jw(t,e,n){var i,r=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===r?null:a===i?o:o=e(i=a,n)}}function Zw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Kw(t,e,n){var i,r,o;return function(){var a,l=n(this),f;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),f=l+"",a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l)))}}function Qw(t,e){var n=Ja(t),i=n==="transform"?$w:J0;return this.attrTween(t,typeof e=="function"?(n.local?Kw:Zw)(n,i,Gs(this,"attr."+t,e)):e==null?(n.local?Gw:Vw)(n):(n.local?jw:Xw)(n,i,e))}function Jw(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function tv(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function ev(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&tv(t,o)),n}return r._value=e,r}function nv(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&Jw(t,o)),n}return r._value=e,r}function iv(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ja(t);return this.tween(n,(i.local?ev:nv)(i,e))}function rv(t,e){return function(){Vs(this,t).delay=+e.apply(this,arguments)}}function ov(t,e){return e=+e,function(){Vs(this,t).delay=e}}function av(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?rv:ov)(e,t)):je(this.node(),e).delay}function lv(t,e){return function(){cn(this,t).duration=+e.apply(this,arguments)}}function fv(t,e){return e=+e,function(){cn(this,t).duration=e}}function sv(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?lv:fv)(e,t)):je(this.node(),e).duration}function uv(t,e){if(typeof e!="function")throw new Error;return function(){cn(this,t).ease=e}}function cv(t){var e=this._id;return arguments.length?this.each(uv(e,t)):je(this.node(),e).ease}function hv(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;cn(this,t).ease=n}}function dv(t){if(typeof t!="function")throw new Error;return this.each(hv(this._id,t))}function pv(t){typeof t!="function"&&(t=k0(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],a=o.length,l=i[r]=[],f,s=0;s<a;++s)(f=o[s])&&t.call(f,f.__data__,s,o)&&l.push(f);return new Sn(i,this._parents,this._name,this._id)}function mv(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),l=0;l<o;++l)for(var f=e[l],s=n[l],u=f.length,c=a[l]=new Array(u),h,p=0;p<u;++p)(h=f[p]||s[p])&&(c[p]=h);for(;l<i;++l)a[l]=e[l];return new Sn(a,this._parents,this._name,this._id)}function gv(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function bv(t,e,n){var i,r,o=gv(e)?Vs:cn;return function(){var a=o(this,t),l=a.on;l!==i&&(r=(i=l).copy()).on(e,n),a.on=r}}function _v(t,e){var n=this._id;return arguments.length<2?je(this.node(),n).on.on(t):this.each(bv(n,t,e))}function yv(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function wv(){return this.on("end.remove",yv(this._id))}function vv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ps(t));for(var i=this._groups,r=i.length,o=new Array(r),a=0;a<r;++a)for(var l=i[a],f=l.length,s=o[a]=new Array(f),u,c,h=0;h<f;++h)(u=l[h])&&(c=t.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),s[h]=c,ol(s[h],e,n,h,s,je(u,n)));return new Sn(o,this._parents,e,n)}function xv(t){var e=this._name,n=this._id;typeof t!="function"&&(t=x0(t));for(var i=this._groups,r=i.length,o=[],a=[],l=0;l<r;++l)for(var f=i[l],s=f.length,u,c=0;c<s;++c)if(u=f[c]){for(var h=t.call(u,u.__data__,c,f),p,d=je(u,n),m=0,g=h.length;m<g;++m)(p=h[m])&&ol(p,e,n,m,h,d);o.push(h),a.push(u)}return new Sn(o,a,e,n)}var kv=ao.prototype.constructor;function Mv(){return new kv(this._groups,this._parents)}function Sv(t,e){var n,i,r;return function(){var o=ji(this,t),a=(this.style.removeProperty(t),ji(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}function t1(t){return function(){this.style.removeProperty(t)}}function Tv(t,e,n){var i,r=n+"",o;return function(){var a=ji(this,t);return a===r?null:a===i?o:o=e(i=a,n)}}function Cv(t,e,n){var i,r,o;return function(){var a=ji(this,t),l=n(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(t),ji(this,t))),a===f?null:a===i&&f===r?o:(r=f,o=e(i=a,l))}}function $v(t,e){var n,i,r,o="style."+e,a="end."+o,l;return function(){var f=cn(this,t),s=f.on,u=f.value[o]==null?l||(l=t1(e)):void 0;(s!==n||r!==u)&&(i=(n=s).copy()).on(a,r=u),f.on=i}}function Av(t,e,n){var i=(t+="")=="transform"?Cw:J0;return e==null?this.styleTween(t,Sv(t,i)).on("end.style."+t,t1(t)):typeof e=="function"?this.styleTween(t,Cv(t,i,Gs(this,"style."+t,e))).each($v(this._id,t)):this.styleTween(t,Tv(t,i,e),n).on("end.style."+t,null)}function Ev(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Nv(t,e,n){var i,r;function o(){var a=e.apply(this,arguments);return a!==r&&(i=(r=a)&&Ev(t,a,n)),i}return o._value=e,o}function Dv(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Nv(t,e,n??""))}function Fv(t){return function(){this.textContent=t}}function Lv(t){return function(){var e=t(this);this.textContent=e??""}}function Iv(t){return this.tween("text",typeof t=="function"?Lv(Gs(this,"text",t)):Fv(t==null?"":t+""))}function Rv(t){return function(e){this.textContent=t.call(this,e)}}function Pv(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Rv(r)),e}return i._value=t,i}function Ov(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Pv(t))}function Uv(){for(var t=this._name,e=this._id,n=e1(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)if(f=a[s]){var u=je(f,e);ol(f,t,n,s,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Sn(i,this._parents,t,n)}function zv(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,a){var l={value:a},f={value:function(){--r===0&&o()}};n.each(function(){var s=cn(this,i),u=s.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(f)),s.on=e}),r===0&&o()})}var Bv=0;function Sn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function e1(){return++Bv}var pn=ao.prototype;Sn.prototype={constructor:Sn,select:vv,selectAll:xv,selectChild:pn.selectChild,selectChildren:pn.selectChildren,filter:pv,merge:mv,selection:Mv,transition:Uv,call:pn.call,nodes:pn.nodes,node:pn.node,size:pn.size,empty:pn.empty,each:pn.each,on:_v,attr:Qw,attrTween:iv,style:Av,styleTween:Dv,text:Iv,textTween:Ov,remove:wv,tween:Hw,delay:av,duration:sv,ease:cv,easeVarying:dv,end:zv,[Symbol.iterator]:pn[Symbol.iterator]};function qv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Wv={time:null,delay:0,duration:250,ease:qv};function Yv(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Hv(t){var e,n;t instanceof Sn?(e=t._id,t=t._name):(e=e1(),(n=Wv).time=Hs(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a=i[o],l=a.length,f,s=0;s<l;++s)(f=a[s])&&ol(f,t,e,s,a,n||Yv(f,e));return new Sn(i,this._parents,t,e)}ao.prototype.interrupt=qw;ao.prototype.transition=Hv;const Kf=Math.PI,Qf=2*Kf,oi=1e-6,Vv=Qf-oi;function n1(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Gv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return n1;const n=10**e;return function(i){this._+=i[0];for(let r=1,o=i.length;r<o;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}class i1{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?n1:Gv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,o,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,i,r,o){if(e=+e,n=+n,i=+i,r=+r,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,l=this._y1,f=i-e,s=r-n,u=a-e,c=l-n,h=u*u+c*c;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>oi)if(!(Math.abs(c*f-s*u)>oi)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let p=i-a,d=r-l,m=f*f+s*s,g=p*p+d*d,_=Math.sqrt(m),b=Math.sqrt(h),v=o*Math.tan((Kf-Math.acos((m+h-g)/(2*_*b)))/2),w=v/b,x=v/_;Math.abs(w-1)>oi&&this._append`L${e+w*u},${n+w*c}`,this._append`A${o},${o},0,0,${+(c*p>u*d)},${this._x1=e+x*f},${this._y1=n+x*s}`}}arc(e,n,i,r,o,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(r),f=i*Math.sin(r),s=e+l,u=n+f,c=1^a,h=a?r-o:o-r;this._x1===null?this._append`M${s},${u}`:(Math.abs(this._x1-s)>oi||Math.abs(this._y1-u)>oi)&&this._append`L${s},${u}`,i&&(h<0&&(h=h%Qf+Qf),h>Vv?this._append`A${i},${i},0,1,${c},${e-l},${n-f}A${i},${i},0,1,${c},${this._x1=s},${this._y1=u}`:h>oi&&this._append`A${i},${i},0,${+(h>=Kf)},${c},${this._x1=e+i*Math.cos(o)},${this._y1=n+i*Math.sin(o)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}}function On(t=3){return new i1(+t)}var hc={},Jl={},tf=34,yr=10,ef=13;function r1(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Xv(t,e){var n=r1(t);return function(i,r){return e(n(i),r,t)}}function dc(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function he(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function jv(t){return t<0?"-"+he(-t,6):t>9999?"+"+he(t,6):he(t,4)}function Zv(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":jv(t.getUTCFullYear())+"-"+he(t.getUTCMonth()+1,2)+"-"+he(t.getUTCDate(),2)+(r?"T"+he(e,2)+":"+he(n,2)+":"+he(i,2)+"."+he(r,3)+"Z":i?"T"+he(e,2)+":"+he(n,2)+":"+he(i,2)+"Z":n||e?"T"+he(e,2)+":"+he(n,2)+"Z":"")}function Kv(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(c,h){var p,d,m=r(c,function(g,_){if(p)return p(g,_-1);d=g,p=h?Xv(g,h):r1(g)});return m.columns=d||[],m}function r(c,h){var p=[],d=c.length,m=0,g=0,_,b=d<=0,v=!1;c.charCodeAt(d-1)===yr&&--d,c.charCodeAt(d-1)===ef&&--d;function w(){if(b)return Jl;if(v)return v=!1,hc;var k,S=m,T;if(c.charCodeAt(S)===tf){for(;m++<d&&c.charCodeAt(m)!==tf||c.charCodeAt(++m)===tf;);return(k=m)>=d?b=!0:(T=c.charCodeAt(m++))===yr?v=!0:T===ef&&(v=!0,c.charCodeAt(m)===yr&&++m),c.slice(S+1,k-1).replace(/""/g,'"')}for(;m<d;){if((T=c.charCodeAt(k=m++))===yr)v=!0;else if(T===ef)v=!0,c.charCodeAt(m)===yr&&++m;else if(T!==n)continue;return c.slice(S,k)}return b=!0,c.slice(S,d)}for(;(_=w())!==Jl;){for(var x=[];_!==hc&&_!==Jl;)x.push(_),_=w();h&&(x=h(x,g++))==null||p.push(x)}return p}function o(c,h){return c.map(function(p){return h.map(function(d){return u(p[d])}).join(t)})}function a(c,h){return h==null&&(h=dc(c)),[h.map(u).join(t)].concat(o(c,h)).join(`
`)}function l(c,h){return h==null&&(h=dc(c)),o(c,h).join(`
`)}function f(c){return c.map(s).join(`
`)}function s(c){return c.map(u).join(t)}function u(c){return c==null?"":c instanceof Date?Zv(c):e.test(c+="")?'"'+c.replace(/"/g,'""')+'"':c}return{parse:i,parseRows:r,format:a,formatBody:l,formatRows:f,formatRow:s,formatValue:u}}var Qv=Kv(","),Jv=Qv.parse;function t3(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function va(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Qi(t){return t=va(Math.abs(t)),t?t[1]:NaN}function e3(t,e){return function(n,i){for(var r=n.length,o=[],a=0,l=t[0],f=0;r>0&&l>0&&(f+l+1>i&&(l=Math.max(1,i-f)),o.push(n.substring(r-=l,r+l)),!((f+=l+1)>i));)l=t[a=(a+1)%t.length];return o.reverse().join(e)}}function n3(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var i3=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vr(t){if(!(e=i3.exec(t)))throw new Error("invalid format: "+t);var e;return new Xs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Vr.prototype=Xs.prototype;function Xs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Xs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function r3(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var o1;function o3(t,e){var n=va(t,e);if(!n)return t+"";var i=n[0],r=n[1],o=r-(o1=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+va(t,Math.max(0,e+o-1))[0]}function pc(t,e){var n=va(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const mc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:t3,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>pc(t*100,e),r:pc,s:o3,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function gc(t){return t}var bc=Array.prototype.map,_c=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function a3(t){var e=t.grouping===void 0||t.thousands===void 0?gc:e3(bc.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?gc:n3(bc.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function s(c){c=Vr(c);var h=c.fill,p=c.align,d=c.sign,m=c.symbol,g=c.zero,_=c.width,b=c.comma,v=c.precision,w=c.trim,x=c.type;x==="n"?(b=!0,x="g"):mc[x]||(v===void 0&&(v=12),w=!0,x="g"),(g||h==="0"&&p==="=")&&(g=!0,h="0",p="=");var k=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=m==="$"?i:/[%p]/.test(x)?a:"",T=mc[x],A=/[defgprs%]/.test(x);v=v===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function F(C){var I=k,L=S,G,$,B;if(x==="c")L=T(C)+L,C="";else{C=+C;var z=C<0||1/C<0;if(C=isNaN(C)?f:T(Math.abs(C),v),w&&(C=r3(C)),z&&+C==0&&d!=="+"&&(z=!1),I=(z?d==="("?d:l:d==="-"||d==="("?"":d)+I,L=(x==="s"?_c[8+o1/3]:"")+L+(z&&d==="("?")":""),A){for(G=-1,$=C.length;++G<$;)if(B=C.charCodeAt(G),48>B||B>57){L=(B===46?r+C.slice(G+1):C.slice(G))+L,C=C.slice(0,G);break}}}b&&!g&&(C=e(C,1/0));var Z=I.length+C.length+L.length,Q=Z<_?new Array(_-Z+1).join(h):"";switch(b&&g&&(C=e(Q+C,Q.length?_-L.length:1/0),Q=""),p){case"<":C=I+C+L+Q;break;case"=":C=I+Q+C+L;break;case"^":C=Q.slice(0,Z=Q.length>>1)+I+C+L+Q.slice(Z);break;default:C=Q+I+C+L;break}return o(C)}return F.toString=function(){return c+""},F}function u(c,h){var p=s((c=Vr(c),c.type="f",c)),d=Math.max(-8,Math.min(8,Math.floor(Qi(h)/3)))*3,m=Math.pow(10,-d),g=_c[8+d/3];return function(_){return p(m*_)+g}}return{format:s,formatPrefix:u}}var Po,ur,a1;l3({thousands:",",grouping:[3],currency:["$",""]});function l3(t){return Po=a3(t),ur=Po.format,a1=Po.formatPrefix,Po}function f3(t){return Math.max(0,-Qi(Math.abs(t)))}function s3(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qi(e)/3)))*3-Qi(Math.abs(t)))}function u3(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Qi(e)-Qi(t))+1}var vt=1e-6,l1=1e-12,St=Math.PI,Ut=St/2,yc=St/4,Me=St*2,ae=180/St,Ot=St/180,$t=Math.abs,cr=Math.atan,Tn=Math.atan2,Mt=Math.cos,f1=Math.exp,xa=Math.log,nf=Math.pow,yt=Math.sin,Ee=Math.sign||function(t){return t>0?1:t<0?-1:0},we=Math.sqrt,js=Math.tan;function s1(t){return t>1?0:t<-1?St:Math.acos(t)}function Le(t){return t>1?Ut:t<-1?-Ut:Math.asin(t)}function Ne(){}function ka(t,e){t&&vc.hasOwnProperty(t.type)&&vc[t.type](t,e)}var wc={Feature:function(t,e){ka(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)ka(n[i].geometry,e)}},vc={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){Jf(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Jf(n[i],e,0)},Polygon:function(t,e){xc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)xc(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)ka(n[i],e)}};function Jf(t,e,n){var i=-1,r=t.length-n,o;for(e.lineStart();++i<r;)o=t[i],e.point(o[0],o[1],o[2]);e.lineEnd()}function xc(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Jf(t[n],e,1);e.polygonEnd()}function ai(t,e){t&&wc.hasOwnProperty(t.type)?wc[t.type](t,e):ka(t,e)}function ts(t){return[Tn(t[1],t[0]),Le(t[2])]}function Ji(t){var e=t[0],n=t[1],i=Mt(n);return[i*Mt(e),i*yt(e),yt(n)]}function Oo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Ma(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function rf(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Uo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function es(t){var e=we(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function ns(t,e){function n(i,r){return i=t(i,r),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,r){return i=e.invert(i,r),i&&t.invert(i[0],i[1])}),n}function is(t,e){return $t(t)>St&&(t-=Math.round(t/Me)*Me),[t,e]}is.invert=is;function u1(t,e,n){return(t%=Me)?e||n?ns(Mc(t),Sc(e,n)):Mc(t):e||n?Sc(e,n):is}function kc(t){return function(e,n){return e+=t,$t(e)>St&&(e-=Math.round(e/Me)*Me),[e,n]}}function Mc(t){var e=kc(t);return e.invert=kc(-t),e}function Sc(t,e){var n=Mt(t),i=yt(t),r=Mt(e),o=yt(e);function a(l,f){var s=Mt(f),u=Mt(l)*s,c=yt(l)*s,h=yt(f),p=h*n+u*i;return[Tn(c*r-p*o,u*n-h*i),Le(p*r+c*o)]}return a.invert=function(l,f){var s=Mt(f),u=Mt(l)*s,c=yt(l)*s,h=yt(f),p=h*r-c*o;return[Tn(c*r+h*o,u*n+p*i),Le(p*n-u*i)]},a}function c3(t){t=u1(t[0]*Ot,t[1]*Ot,t.length>2?t[2]*Ot:0);function e(n){return n=t(n[0]*Ot,n[1]*Ot),n[0]*=ae,n[1]*=ae,n}return e.invert=function(n){return n=t.invert(n[0]*Ot,n[1]*Ot),n[0]*=ae,n[1]*=ae,n},e}function h3(t,e,n,i,r,o){if(n){var a=Mt(e),l=yt(e),f=i*n;r==null?(r=e+i*Me,o=e-f/2):(r=Tc(a,r),o=Tc(a,o),(i>0?r<o:r>o)&&(r+=i*Me));for(var s,u=r;i>0?u>o:u<o;u-=f)s=ts([a,-l*Mt(u),-l*yt(u)]),t.point(s[0],s[1])}}function Tc(t,e){e=Ji(e),e[0]-=t,es(e);var n=s1(-e[1]);return((-e[2]<0?-n:n)+Me-vt)%Me}function c1(){var t=[],e;return{point:function(n,i,r){e.push([n,i,r])},lineStart:function(){t.push(e=[])},lineEnd:Ne,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function oa(t,e){return $t(t[0]-e[0])<vt&&$t(t[1]-e[1])<vt}function zo(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function h1(t,e,n,i,r){var o=[],a=[],l,f;if(t.forEach(function(d){if(!((m=d.length-1)<=0)){var m,g=d[0],_=d[m],b;if(oa(g,_)){if(!g[2]&&!_[2]){for(r.lineStart(),l=0;l<m;++l)r.point((g=d[l])[0],g[1]);r.lineEnd();return}_[0]+=2*vt}o.push(b=new zo(g,d,null,!0)),a.push(b.o=new zo(g,null,b,!1)),o.push(b=new zo(_,d,null,!1)),a.push(b.o=new zo(_,null,b,!0))}}),!!o.length){for(a.sort(e),Cc(o),Cc(a),l=0,f=a.length;l<f;++l)a[l].e=n=!n;for(var s=o[0],u,c;;){for(var h=s,p=!0;h.v;)if((h=h.n)===s)return;u=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(l=0,f=u.length;l<f;++l)r.point((c=u[l])[0],c[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(p)for(u=h.p.z,l=u.length-1;l>=0;--l)r.point((c=u[l])[0],c[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,u=h.z,p=!p}while(!h.v);r.lineEnd()}}}function Cc(t){if(e=t.length){for(var e,n=0,i=t[0],r;++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function of(t){return $t(t[0])<=St?t[0]:Ee(t[0])*(($t(t[0])+St)%Me-St)}function d3(t,e){var n=of(e),i=e[1],r=yt(i),o=[yt(n),-Mt(n),0],a=0,l=0,f=new mi;r===1?i=Ut+vt:r===-1&&(i=-Ut-vt);for(var s=0,u=t.length;s<u;++s)if(h=(c=t[s]).length)for(var c,h,p=c[h-1],d=of(p),m=p[1]/2+yc,g=yt(m),_=Mt(m),b=0;b<h;++b,d=w,g=k,_=S,p=v){var v=c[b],w=of(v),x=v[1]/2+yc,k=yt(x),S=Mt(x),T=w-d,A=T>=0?1:-1,F=A*T,C=F>St,I=g*k;if(f.add(Tn(I*A*yt(F),_*S+I*Mt(F))),a+=C?T+A*Me:T,C^d>=n^w>=n){var L=Ma(Ji(p),Ji(v));es(L);var G=Ma(o,L);es(G);var $=(C^T>=0?-1:1)*Le(G[2]);(i>$||i===$&&(L[0]||L[1]))&&(l+=C^T>=0?1:-1)}}return(a<-vt||a<vt&&f<-l1)^l&1}function d1(t,e,n,i){return function(r){var o=e(r),a=c1(),l=e(a),f=!1,s,u,c,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=_,h.lineStart=b,h.lineEnd=v,u=[],s=[]},polygonEnd:function(){h.point=p,h.lineStart=m,h.lineEnd=g,u=w0(u);var w=d3(s,i);u.length?(f||(r.polygonStart(),f=!0),h1(u,m3,w,n,r)):w&&(f||(r.polygonStart(),f=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),f&&(r.polygonEnd(),f=!1),u=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(w,x){t(w,x)&&r.point(w,x)}function d(w,x){o.point(w,x)}function m(){h.point=d,o.lineStart()}function g(){h.point=p,o.lineEnd()}function _(w,x){c.push([w,x]),l.point(w,x)}function b(){l.lineStart(),c=[]}function v(){_(c[0][0],c[0][1]),l.lineEnd();var w=l.clean(),x=a.result(),k,S=x.length,T,A,F;if(c.pop(),s.push(c),c=null,!!S){if(w&1){if(A=x[0],(T=A.length-1)>0){for(f||(r.polygonStart(),f=!0),r.lineStart(),k=0;k<T;++k)r.point((F=A[k])[0],F[1]);r.lineEnd()}return}S>1&&w&2&&x.push(x.pop().concat(x.shift())),u.push(x.filter(p3))}}return h}}function p3(t){return t.length>1}function m3(t,e){return((t=t.x)[0]<0?t[1]-Ut-vt:Ut-t[1])-((e=e.x)[0]<0?e[1]-Ut-vt:Ut-e[1])}const $c=d1(function(){return!0},g3,_3,[-St,-Ut]);function g3(t){var e=NaN,n=NaN,i=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var l=o>0?St:-St,f=$t(o-e);$t(f-St)<vt?(t.point(e,n=(n+a)/2>0?Ut:-Ut),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),r=0):i!==l&&f>=St&&($t(e-i)<vt&&(e-=i*vt),$t(o-l)<vt&&(o-=l*vt),n=b3(e,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(l,n),r=0),t.point(e=o,n=a),i=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-r}}}function b3(t,e,n,i){var r,o,a=yt(t-n);return $t(a)>vt?cr((yt(e)*(o=Mt(i))*yt(n)-yt(i)*(r=Mt(e))*yt(t))/(r*o*a)):(e+i)/2}function _3(t,e,n,i){var r;if(t==null)r=n*Ut,i.point(-St,r),i.point(0,r),i.point(St,r),i.point(St,0),i.point(St,-r),i.point(0,-r),i.point(-St,-r),i.point(-St,0),i.point(-St,r);else if($t(t[0]-e[0])>vt){var o=t[0]<e[0]?St:-St;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}function y3(t){var e=Mt(t),n=6*Ot,i=e>0,r=$t(e)>vt;function o(u,c,h,p){h3(p,t,n,h,u,c)}function a(u,c){return Mt(u)*Mt(c)>e}function l(u){var c,h,p,d,m;return{lineStart:function(){d=p=!1,m=1},point:function(g,_){var b=[g,_],v,w=a(g,_),x=i?w?0:s(g,_):w?s(g+(g<0?St:-St),_):0;if(!c&&(d=p=w)&&u.lineStart(),w!==p&&(v=f(c,b),(!v||oa(c,v)||oa(b,v))&&(b[2]=1)),w!==p)m=0,w?(u.lineStart(),v=f(b,c),u.point(v[0],v[1])):(v=f(c,b),u.point(v[0],v[1],2),u.lineEnd()),c=v;else if(r&&c&&i^w){var k;!(x&h)&&(k=f(b,c,!0))&&(m=0,i?(u.lineStart(),u.point(k[0][0],k[0][1]),u.point(k[1][0],k[1][1]),u.lineEnd()):(u.point(k[1][0],k[1][1]),u.lineEnd(),u.lineStart(),u.point(k[0][0],k[0][1],3)))}w&&(!c||!oa(c,b))&&u.point(b[0],b[1]),c=b,p=w,h=x},lineEnd:function(){p&&u.lineEnd(),c=null},clean:function(){return m|(d&&p)<<1}}}function f(u,c,h){var p=Ji(u),d=Ji(c),m=[1,0,0],g=Ma(p,d),_=Oo(g,g),b=g[0],v=_-b*b;if(!v)return!h&&u;var w=e*_/v,x=-e*b/v,k=Ma(m,g),S=Uo(m,w),T=Uo(g,x);rf(S,T);var A=k,F=Oo(S,A),C=Oo(A,A),I=F*F-C*(Oo(S,S)-1);if(!(I<0)){var L=we(I),G=Uo(A,(-F-L)/C);if(rf(G,S),G=ts(G),!h)return G;var $=u[0],B=c[0],z=u[1],Z=c[1],Q;B<$&&(Q=$,$=B,B=Q);var W=B-$,U=$t(W-St)<vt,Y=U||W<vt;if(!U&&Z<z&&(Q=z,z=Z,Z=Q),Y?U?z+Z>0^G[1]<($t(G[0]-$)<vt?z:Z):z<=G[1]&&G[1]<=Z:W>St^($<=G[0]&&G[0]<=B)){var K=Uo(A,(-F+L)/C);return rf(K,S),[G,ts(K)]}}}function s(u,c){var h=i?t:St-t,p=0;return u<-h?p|=1:u>h&&(p|=2),c<-h?p|=4:c>h&&(p|=8),p}return d1(a,l,o,i?[0,-t]:[-St,t-St])}function w3(t,e,n,i,r,o){var a=t[0],l=t[1],f=e[0],s=e[1],u=0,c=1,h=f-a,p=s-l,d;if(d=n-a,!(!h&&d>0)){if(d/=h,h<0){if(d<u)return;d<c&&(c=d)}else if(h>0){if(d>c)return;d>u&&(u=d)}if(d=r-a,!(!h&&d<0)){if(d/=h,h<0){if(d>c)return;d>u&&(u=d)}else if(h>0){if(d<u)return;d<c&&(c=d)}if(d=i-l,!(!p&&d>0)){if(d/=p,p<0){if(d<u)return;d<c&&(c=d)}else if(p>0){if(d>c)return;d>u&&(u=d)}if(d=o-l,!(!p&&d<0)){if(d/=p,p<0){if(d>c)return;d>u&&(u=d)}else if(p>0){if(d<u)return;d<c&&(c=d)}return u>0&&(t[0]=a+u*h,t[1]=l+u*p),c<1&&(e[0]=a+c*h,e[1]=l+c*p),!0}}}}}var Cr=1e9,Bo=-Cr;function p1(t,e,n,i){function r(s,u){return t<=s&&s<=n&&e<=u&&u<=i}function o(s,u,c,h){var p=0,d=0;if(s==null||(p=a(s,c))!==(d=a(u,c))||f(s,u)<0^c>0)do h.point(p===0||p===3?t:n,p>1?i:e);while((p=(p+c+4)%4)!==d);else h.point(u[0],u[1])}function a(s,u){return $t(s[0]-t)<vt?u>0?0:3:$t(s[0]-n)<vt?u>0?2:1:$t(s[1]-e)<vt?u>0?1:0:u>0?3:2}function l(s,u){return f(s.x,u.x)}function f(s,u){var c=a(s,1),h=a(u,1);return c!==h?c-h:c===0?u[1]-s[1]:c===1?s[0]-u[0]:c===2?s[1]-u[1]:u[0]-s[0]}return function(s){var u=s,c=c1(),h,p,d,m,g,_,b,v,w,x,k,S={point:T,lineStart:I,lineEnd:L,polygonStart:F,polygonEnd:C};function T($,B){r($,B)&&u.point($,B)}function A(){for(var $=0,B=0,z=p.length;B<z;++B)for(var Z=p[B],Q=1,W=Z.length,U=Z[0],Y,K,ft=U[0],et=U[1];Q<W;++Q)Y=ft,K=et,U=Z[Q],ft=U[0],et=U[1],K<=i?et>i&&(ft-Y)*(i-K)>(et-K)*(t-Y)&&++$:et<=i&&(ft-Y)*(i-K)<(et-K)*(t-Y)&&--$;return $}function F(){u=c,h=[],p=[],k=!0}function C(){var $=A(),B=k&&$,z=(h=w0(h)).length;(B||z)&&(s.polygonStart(),B&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),z&&h1(h,l,$,o,s),s.polygonEnd()),u=s,h=p=d=null}function I(){S.point=G,p&&p.push(d=[]),x=!0,w=!1,b=v=NaN}function L(){h&&(G(m,g),_&&w&&c.rejoin(),h.push(c.result())),S.point=T,w&&u.lineEnd()}function G($,B){var z=r($,B);if(p&&d.push([$,B]),x)m=$,g=B,_=z,x=!1,z&&(u.lineStart(),u.point($,B));else if(z&&w)u.point($,B);else{var Z=[b=Math.max(Bo,Math.min(Cr,b)),v=Math.max(Bo,Math.min(Cr,v))],Q=[$=Math.max(Bo,Math.min(Cr,$)),B=Math.max(Bo,Math.min(Cr,B))];w3(Z,Q,t,e,n,i)?(w||(u.lineStart(),u.point(Z[0],Z[1])),u.point(Q[0],Q[1]),z||u.lineEnd(),k=!1):z&&(u.lineStart(),u.point($,B),k=!1)}b=$,v=B,w=z}return S}}const rs=t=>t;var af=new mi,os=new mi,m1,g1,as,ls,Pn={point:Ne,lineStart:Ne,lineEnd:Ne,polygonStart:function(){Pn.lineStart=v3,Pn.lineEnd=k3},polygonEnd:function(){Pn.lineStart=Pn.lineEnd=Pn.point=Ne,af.add($t(os)),os=new mi},result:function(){var t=af/2;return af=new mi,t}};function v3(){Pn.point=x3}function x3(t,e){Pn.point=b1,m1=as=t,g1=ls=e}function b1(t,e){os.add(ls*t-as*e),as=t,ls=e}function k3(){b1(m1,g1)}const Ac=Pn;var tr=1/0,Sa=tr,Gr=-tr,Ta=Gr,M3={point:S3,lineStart:Ne,lineEnd:Ne,polygonStart:Ne,polygonEnd:Ne,result:function(){var t=[[tr,Sa],[Gr,Ta]];return Gr=Ta=-(Sa=tr=1/0),t}};function S3(t,e){t<tr&&(tr=t),t>Gr&&(Gr=t),e<Sa&&(Sa=e),e>Ta&&(Ta=e)}const Ca=M3;var fs=0,ss=0,$r=0,$a=0,Aa=0,Pi=0,us=0,cs=0,Ar=0,_1,y1,Je,tn,qe={point:vi,lineStart:Ec,lineEnd:Nc,polygonStart:function(){qe.lineStart=$3,qe.lineEnd=A3},polygonEnd:function(){qe.point=vi,qe.lineStart=Ec,qe.lineEnd=Nc},result:function(){var t=Ar?[us/Ar,cs/Ar]:Pi?[$a/Pi,Aa/Pi]:$r?[fs/$r,ss/$r]:[NaN,NaN];return fs=ss=$r=$a=Aa=Pi=us=cs=Ar=0,t}};function vi(t,e){fs+=t,ss+=e,++$r}function Ec(){qe.point=T3}function T3(t,e){qe.point=C3,vi(Je=t,tn=e)}function C3(t,e){var n=t-Je,i=e-tn,r=we(n*n+i*i);$a+=r*(Je+t)/2,Aa+=r*(tn+e)/2,Pi+=r,vi(Je=t,tn=e)}function Nc(){qe.point=vi}function $3(){qe.point=E3}function A3(){w1(_1,y1)}function E3(t,e){qe.point=w1,vi(_1=Je=t,y1=tn=e)}function w1(t,e){var n=t-Je,i=e-tn,r=we(n*n+i*i);$a+=r*(Je+t)/2,Aa+=r*(tn+e)/2,Pi+=r,r=tn*t-Je*e,us+=r*(Je+t),cs+=r*(tn+e),Ar+=r*3,vi(Je=t,tn=e)}const Dc=qe;function v1(t){this._context=t}v1.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Me);break}}},result:Ne};var hs=new mi,lf,x1,k1,Er,Nr,Ea={point:Ne,lineStart:function(){Ea.point=N3},lineEnd:function(){lf&&M1(x1,k1),Ea.point=Ne},polygonStart:function(){lf=!0},polygonEnd:function(){lf=null},result:function(){var t=+hs;return hs=new mi,t}};function N3(t,e){Ea.point=M1,x1=Er=t,k1=Nr=e}function M1(t,e){Er-=t,Nr-=e,hs.add(we(Er*Er+Nr*Nr)),Er=t,Nr=e}const Fc=Ea;let Lc,Na,Ic,Rc;class Pc{constructor(e){this._append=e==null?S1:D3(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Ic||this._append!==Na){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Ic=i,Na=this._append,Rc=this._,this._=r}this._+=Rc;break}}}result(){const e=this._;return this._="",e.length?e:null}}function S1(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function D3(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return S1;if(e!==Lc){const n=10**e;Lc=e,Na=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+r[o]}}return Na}function al(t,e){let n=3,i=4.5,r,o;function a(l){return l&&(typeof i=="function"&&o.pointRadius(+i.apply(this,arguments)),ai(l,r(o))),o.result()}return a.area=function(l){return ai(l,r(Ac)),Ac.result()},a.measure=function(l){return ai(l,r(Fc)),Fc.result()},a.bounds=function(l){return ai(l,r(Ca)),Ca.result()},a.centroid=function(l){return ai(l,r(Dc)),Dc.result()},a.projection=function(l){return arguments.length?(r=l==null?(t=null,rs):(t=l).stream,a):t},a.context=function(l){return arguments.length?(o=l==null?(e=null,new Pc(n)):new v1(e=l),typeof i!="function"&&o.pointRadius(i),a):e},a.pointRadius=function(l){return arguments.length?(i=typeof l=="function"?l:(o.pointRadius(+l),+l),a):i},a.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const f=Math.floor(l);if(!(f>=0))throw new RangeError(`invalid digits: ${l}`);n=f}return e===null&&(o=new Pc(n)),a},a.projection(t).digits(n).context(e)}function ds(t){return{stream:ll(t)}}function ll(t){return function(e){var n=new ps;for(var i in t)n[i]=t[i];return n.stream=e,n}}function ps(){}ps.prototype={constructor:ps,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Zs(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),ai(n,t.stream(Ca)),e(Ca.result()),i!=null&&t.clipExtent(i),t}function Ks(t,e,n){return Zs(t,function(i){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],a=Math.min(r/(i[1][0]-i[0][0]),o/(i[1][1]-i[0][1])),l=+e[0][0]+(r-a*(i[1][0]+i[0][0]))/2,f=+e[0][1]+(o-a*(i[1][1]+i[0][1]))/2;t.scale(150*a).translate([l,f])},n)}function T1(t,e,n){return Ks(t,[[0,0],e],n)}function C1(t,e,n){return Zs(t,function(i){var r=+e,o=r/(i[1][0]-i[0][0]),a=(r-o*(i[1][0]+i[0][0]))/2,l=-o*i[0][1];t.scale(150*o).translate([a,l])},n)}function $1(t,e,n){return Zs(t,function(i){var r=+e,o=r/(i[1][1]-i[0][1]),a=-o*i[0][0],l=(r-o*(i[1][1]+i[0][1]))/2;t.scale(150*o).translate([a,l])},n)}var Oc=16,F3=Mt(30*Ot);function Uc(t,e){return+e?I3(t,e):L3(t)}function L3(t){return ll({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function I3(t,e){function n(i,r,o,a,l,f,s,u,c,h,p,d,m,g){var _=s-i,b=u-r,v=_*_+b*b;if(v>4*e&&m--){var w=a+h,x=l+p,k=f+d,S=we(w*w+x*x+k*k),T=Le(k/=S),A=$t($t(k)-1)<vt||$t(o-c)<vt?(o+c)/2:Tn(x,w),F=t(A,T),C=F[0],I=F[1],L=C-i,G=I-r,$=b*L-_*G;($*$/v>e||$t((_*L+b*G)/v-.5)>.3||a*h+l*p+f*d<F3)&&(n(i,r,o,a,l,f,C,I,A,w/=S,x/=S,k,m,g),g.point(C,I),n(C,I,A,w,x,k,s,u,c,h,p,d,m,g))}}return function(i){var r,o,a,l,f,s,u,c,h,p,d,m,g={point:_,lineStart:b,lineEnd:w,polygonStart:function(){i.polygonStart(),g.lineStart=x},polygonEnd:function(){i.polygonEnd(),g.lineStart=b}};function _(T,A){T=t(T,A),i.point(T[0],T[1])}function b(){c=NaN,g.point=v,i.lineStart()}function v(T,A){var F=Ji([T,A]),C=t(T,A);n(c,h,u,p,d,m,c=C[0],h=C[1],u=T,p=F[0],d=F[1],m=F[2],Oc,i),i.point(c,h)}function w(){g.point=_,i.lineEnd()}function x(){b(),g.point=k,g.lineEnd=S}function k(T,A){v(r=T,A),o=c,a=h,l=p,f=d,s=m,g.point=v}function S(){n(c,h,u,p,d,m,o,a,r,l,f,s,Oc,i),g.lineEnd=w,w()}return g}}var R3=ll({point:function(t,e){this.stream.point(t*Ot,e*Ot)}});function P3(t){return ll({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function O3(t,e,n,i,r){function o(a,l){return a*=i,l*=r,[e+t*a,n-t*l]}return o.invert=function(a,l){return[(a-e)/t*i,(n-l)/t*r]},o}function zc(t,e,n,i,r,o){if(!o)return O3(t,e,n,i,r);var a=Mt(o),l=yt(o),f=a*t,s=l*t,u=a/t,c=l/t,h=(l*n-a*e)/t,p=(l*e+a*n)/t;function d(m,g){return m*=i,g*=r,[f*m-s*g+e,n-s*m-f*g]}return d.invert=function(m,g){return[i*(u*m-c*g+h),r*(p-c*m-u*g)]},d}function Jn(t){return A1(function(){return t})()}function A1(t){var e,n=150,i=480,r=250,o=0,a=0,l=0,f=0,s=0,u,c=0,h=1,p=1,d=null,m=$c,g=null,_,b,v,w=rs,x=.5,k,S,T,A,F;function C($){return T($[0]*Ot,$[1]*Ot)}function I($){return $=T.invert($[0],$[1]),$&&[$[0]*ae,$[1]*ae]}C.stream=function($){return A&&F===$?A:A=R3(P3(u)(m(k(w(F=$)))))},C.preclip=function($){return arguments.length?(m=$,d=void 0,G()):m},C.postclip=function($){return arguments.length?(w=$,g=_=b=v=null,G()):w},C.clipAngle=function($){return arguments.length?(m=+$?y3(d=$*Ot):(d=null,$c),G()):d*ae},C.clipExtent=function($){return arguments.length?(w=$==null?(g=_=b=v=null,rs):p1(g=+$[0][0],_=+$[0][1],b=+$[1][0],v=+$[1][1]),G()):g==null?null:[[g,_],[b,v]]},C.scale=function($){return arguments.length?(n=+$,L()):n},C.translate=function($){return arguments.length?(i=+$[0],r=+$[1],L()):[i,r]},C.center=function($){return arguments.length?(o=$[0]%360*Ot,a=$[1]%360*Ot,L()):[o*ae,a*ae]},C.rotate=function($){return arguments.length?(l=$[0]%360*Ot,f=$[1]%360*Ot,s=$.length>2?$[2]%360*Ot:0,L()):[l*ae,f*ae,s*ae]},C.angle=function($){return arguments.length?(c=$%360*Ot,L()):c*ae},C.reflectX=function($){return arguments.length?(h=$?-1:1,L()):h<0},C.reflectY=function($){return arguments.length?(p=$?-1:1,L()):p<0},C.precision=function($){return arguments.length?(k=Uc(S,x=$*$),G()):we(x)},C.fitExtent=function($,B){return Ks(C,$,B)},C.fitSize=function($,B){return T1(C,$,B)},C.fitWidth=function($,B){return C1(C,$,B)},C.fitHeight=function($,B){return $1(C,$,B)};function L(){var $=zc(n,0,0,h,p,c).apply(null,e(o,a)),B=zc(n,i-$[0],r-$[1],h,p,c);return u=u1(l,f,s),S=ns(e,B),T=ns(u,S),k=Uc(S,x),G()}function G(){return A=F=null,C}return function(){return e=t.apply(this,arguments),C.invert=e.invert&&I,L()}}function Qs(t){var e=0,n=St/3,i=A1(t),r=i(e,n);return r.parallels=function(o){return arguments.length?i(e=o[0]*Ot,n=o[1]*Ot):[e*ae,n*ae]},r}function U3(t){var e=Mt(t);function n(i,r){return[i*e,yt(r)/e]}return n.invert=function(i,r){return[i/e,Le(r*e)]},n}function z3(t,e){var n=yt(t),i=(n+yt(e))/2;if($t(i)<vt)return U3(t);var r=1+n*(2*i-n),o=we(r)/i;function a(l,f){var s=we(r-2*i*yt(f))/i;return[s*yt(l*=i),o-s*Mt(l)]}return a.invert=function(l,f){var s=o-f,u=Tn(l,$t(s))*Ee(s);return s*i<0&&(u-=St*Ee(l)*Ee(s)),[u/i,Le((r-(l*l+s*s)*i*i)/(2*i))]},a}function Da(){return Qs(z3).scale(155.424).center([0,33.6442])}function E1(){return Da().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function B3(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function q3(){var t,e,n=E1(),i,r=Da().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=Da().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l,f,s={point:function(h,p){f=[h,p]}};function u(h){var p=h[0],d=h[1];return f=null,i.point(p,d),f||(o.point(p,d),f)||(l.point(p,d),f)}u.invert=function(h){var p=n.scale(),d=n.translate(),m=(h[0]-d[0])/p,g=(h[1]-d[1])/p;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?r:g>=.166&&g<.234&&m>=-.214&&m<-.115?a:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=B3([n.stream(e=h),r.stream(h),a.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),a.precision(h),c()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),a.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var p=n.scale(),d=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[d-.455*p,m-.238*p],[d+.455*p,m+.238*p]]).stream(s),o=r.translate([d-.307*p,m+.201*p]).clipExtent([[d-.425*p+vt,m+.12*p+vt],[d-.214*p-vt,m+.234*p-vt]]).stream(s),l=a.translate([d-.205*p,m+.212*p]).clipExtent([[d-.214*p+vt,m+.166*p+vt],[d-.115*p-vt,m+.234*p-vt]]).stream(s),c()},u.fitExtent=function(h,p){return Ks(u,h,p)},u.fitSize=function(h,p){return T1(u,h,p)},u.fitWidth=function(h,p){return C1(u,h,p)},u.fitHeight=function(h,p){return $1(u,h,p)};function c(){return t=e=null,u}return u.scale(1070)}function N1(t){return function(e,n){var i=Mt(e),r=Mt(n),o=t(i*r);return o===1/0?[2,0]:[o*r*yt(e),o*yt(n)]}}function so(t){return function(e,n){var i=we(e*e+n*n),r=t(i),o=yt(r),a=Mt(r);return[Tn(e*o,i*a),Le(i&&n*o/i)]}}var D1=N1(function(t){return we(2/(1+t))});D1.invert=so(function(t){return 2*Le(t/2)});function W3(){return Jn(D1).scale(124.75).clipAngle(180-.001)}var F1=N1(function(t){return(t=s1(t))&&t/yt(t)});F1.invert=so(function(t){return t});function Y3(){return Jn(F1).scale(79.4188).clipAngle(180-.001)}function fl(t,e){return[t,xa(js((Ut+e)/2))]}fl.invert=function(t,e){return[t,2*cr(f1(e))-Ut]};function H3(){return L1(fl).scale(961/Me)}function L1(t){var e=Jn(t),n=e.center,i=e.scale,r=e.translate,o=e.clipExtent,a=null,l,f,s;e.scale=function(c){return arguments.length?(i(c),u()):i()},e.translate=function(c){return arguments.length?(r(c),u()):r()},e.center=function(c){return arguments.length?(n(c),u()):n()},e.clipExtent=function(c){return arguments.length?(c==null?a=l=f=s=null:(a=+c[0][0],l=+c[0][1],f=+c[1][0],s=+c[1][1]),u()):a==null?null:[[a,l],[f,s]]};function u(){var c=St*i(),h=e(c3(e.rotate()).invert([0,0]));return o(a==null?[[h[0]-c,h[1]-c],[h[0]+c,h[1]+c]]:t===fl?[[Math.max(h[0]-c,a),l],[Math.min(h[0]+c,f),s]]:[[a,Math.max(h[1]-c,l)],[f,Math.min(h[1]+c,s)]])}return u()}function qo(t){return js((Ut+t)/2)}function V3(t,e){var n=Mt(t),i=t===e?yt(t):xa(n/Mt(e))/xa(qo(e)/qo(t)),r=n*nf(qo(t),i)/i;if(!i)return fl;function o(a,l){r>0?l<-Ut+vt&&(l=-Ut+vt):l>Ut-vt&&(l=Ut-vt);var f=r/nf(qo(l),i);return[f*yt(i*a),r-f*Mt(i*a)]}return o.invert=function(a,l){var f=r-l,s=Ee(i)*we(a*a+f*f),u=Tn(a,$t(f))*Ee(f);return f*i<0&&(u-=St*Ee(a)*Ee(f)),[u/i,2*cr(nf(r/s,1/i))-Ut]},o}function G3(){return Qs(V3).scale(109.5).parallels([30,30])}function Fa(t,e){return[t,e]}Fa.invert=Fa;function X3(){return Jn(Fa).scale(152.63)}function j3(t,e){var n=Mt(t),i=t===e?yt(t):(n-Mt(e))/(e-t),r=n/i+t;if($t(i)<vt)return Fa;function o(a,l){var f=r-l,s=i*a;return[f*yt(s),r-f*Mt(s)]}return o.invert=function(a,l){var f=r-l,s=Tn(a,$t(f))*Ee(f);return f*i<0&&(s-=St*Ee(a)*Ee(f)),[s/i,r-Ee(i)*we(a*a+f*f)]},o}function Z3(){return Qs(j3).scale(131.154).center([0,13.9389])}var Rr=1.340264,Pr=-.081106,Or=893e-6,Ur=.003796,La=we(3)/2,K3=12;function I1(t,e){var n=Le(La*yt(e)),i=n*n,r=i*i*i;return[t*Mt(n)/(La*(Rr+3*Pr*i+r*(7*Or+9*Ur*i))),n*(Rr+Pr*i+r*(Or+Ur*i))]}I1.invert=function(t,e){for(var n=e,i=n*n,r=i*i*i,o=0,a,l,f;o<K3&&(l=n*(Rr+Pr*i+r*(Or+Ur*i))-e,f=Rr+3*Pr*i+r*(7*Or+9*Ur*i),n-=a=l/f,i=n*n,r=i*i*i,!($t(a)<l1));++o);return[La*t*(Rr+3*Pr*i+r*(7*Or+9*Ur*i))/Mt(n),Le(yt(n)/La)]};function Q3(){return Jn(I1).scale(177.158)}function R1(t,e){var n=Mt(e),i=Mt(t)*n;return[n*yt(t)/i,yt(e)/i]}R1.invert=so(cr);function J3(){return Jn(R1).scale(144.049).clipAngle(60)}function P1(t,e){return[Mt(e)*yt(t),yt(e)]}P1.invert=so(Le);function t6(){return Jn(P1).scale(249.5).clipAngle(90+vt)}function O1(t,e){var n=Mt(e),i=1+Mt(t)*n;return[n*yt(t)/i,yt(e)/i]}O1.invert=so(function(t){return 2*cr(t)});function e6(){return Jn(O1).scale(250).clipAngle(142)}function U1(t,e){return[xa(js((Ut+e)/2)),-t]}U1.invert=function(t,e){return[-e,2*cr(f1(t))-Ut]};function n6(){var t=L1(U1),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function hn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function sl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ms=Symbol("implicit");function Js(){var t=new gi,e=[],n=[],i=ms;function r(o){let a=t.get(o);if(a===void 0){if(i!==ms)return i;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new gi;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(o){return arguments.length?(n=Array.from(o),r):n.slice()},r.unknown=function(o){return arguments.length?(i=o,r):i},r.copy=function(){return Js(e,n).unknown(i)},hn.apply(r,arguments),r}function ul(){var t=Js().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,o,a,l=!1,f=0,s=0,u=.5;delete t.unknown;function c(){var h=e().length,p=r<i,d=p?r:i,m=p?i:r;o=(m-d)/Math.max(1,h-f+s*2),l&&(o=Math.floor(o)),d+=(m-d-o*(h-f))*u,a=o*(1-f),l&&(d=Math.round(d),a=Math.round(a));var g=zf(h).map(function(_){return d+o*_});return n(p?g.reverse():g)}return t.domain=function(h){return arguments.length?(e(h),c()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,c()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,l=!0,c()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(l=!!h,c()):l},t.padding=function(h){return arguments.length?(f=Math.min(1,s=+h),c()):f},t.paddingInner=function(h){return arguments.length?(f=Math.min(1,h),c()):f},t.paddingOuter=function(h){return arguments.length?(s=+h,c()):s},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),c()):u},t.copy=function(){return ul(e(),[i,r]).round(l).paddingInner(f).paddingOuter(s).align(u)},hn.apply(c(),arguments)}function z1(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return z1(e())},t}function i6(){return z1(ul.apply(null,arguments).paddingInner(1))}function r6(t){return function(){return t}}function gs(t){return+t}var Bc=[0,1];function De(t){return t}function bs(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:r6(isNaN(e)?NaN:.5)}function o6(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function a6(t,e,n){var i=t[0],r=t[1],o=e[0],a=e[1];return r<i?(i=bs(r,i),o=n(a,o)):(i=bs(i,r),o=n(o,a)),function(l){return o(i(l))}}function l6(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),o=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=bs(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(l){var f=ja(t,l,1,i)-1;return o[f](r[f](l))}}function uo(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function cl(){var t=Bc,e=Bc,n=fo,i,r,o,a=De,l,f,s;function u(){var h=Math.min(t.length,e.length);return a!==De&&(a=o6(t[0],t[h-1])),l=h>2?l6:a6,f=s=null,c}function c(h){return h==null||isNaN(h=+h)?o:(f||(f=l(t.map(i),e,n)))(i(a(h)))}return c.invert=function(h){return a(r((s||(s=l(e,t.map(i),ne)))(h)))},c.domain=function(h){return arguments.length?(t=Array.from(h,gs),u()):t.slice()},c.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},c.rangeRound=function(h){return e=Array.from(h),n=Ws,u()},c.clamp=function(h){return arguments.length?(a=h?!0:De,u()):a!==De},c.interpolate=function(h){return arguments.length?(n=h,u()):n},c.unknown=function(h){return arguments.length?(o=h,c):o},function(h,p){return i=h,r=p,u()}}function B1(){return cl()(De,De)}function f6(t,e,n,i){var r=Of(t,e,n),o;switch(i=Vr(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(o=s3(r,a))&&(i.precision=o),a1(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(o=u3(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=o-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(o=f3(r))&&(i.precision=o-(i.type==="%")*2);break}}return ur(i)}function co(t){var e=t.domain;return t.ticks=function(n){var i=e();return qr(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return f6(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,o=i.length-1,a=i[r],l=i[o],f,s,u=10;for(l<a&&(s=a,a=l,l=s,s=r,r=o,o=s);u-- >0;){if(s=da(a,l,n),s===f)return i[r]=a,i[o]=l,e(i);if(s>0)a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s;else if(s<0)a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s;else break;f=s}return t},t}function tu(){var t=B1();return t.copy=function(){return uo(t,tu())},hn.apply(t,arguments),co(t)}function q1(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,gs),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return q1(t).unknown(e)},t=arguments.length?Array.from(t,gs):[0,1],co(n)}function W1(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],o=t[i],a;return o<r&&(a=n,n=i,i=a,a=r,r=o,o=a),t[n]=e.floor(r),t[i]=e.ceil(o),t}function qc(t){return Math.log(t)}function Wc(t){return Math.exp(t)}function s6(t){return-Math.log(-t)}function u6(t){return-Math.exp(-t)}function c6(t){return isFinite(t)?+("1e"+t):t<0?0:t}function h6(t){return t===10?c6:t===Math.E?Math.exp:e=>Math.pow(t,e)}function d6(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Yc(t){return(e,n)=>-t(-e,n)}function Y1(t){const e=t(qc,Wc),n=e.domain;let i=10,r,o;function a(){return r=d6(i),o=h6(i),n()[0]<0?(r=Yc(r),o=Yc(o),t(s6,u6)):t(qc,Wc),e}return e.base=function(l){return arguments.length?(i=+l,a()):i},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const f=n();let s=f[0],u=f[f.length-1];const c=u<s;c&&([s,u]=[u,s]);let h=r(s),p=r(u),d,m;const g=l==null?10:+l;let _=[];if(!(i%1)&&p-h<g){if(h=Math.floor(h),p=Math.ceil(p),s>0){for(;h<=p;++h)for(d=1;d<i;++d)if(m=h<0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}}else for(;h<=p;++h)for(d=i-1;d>=1;--d)if(m=h>0?d/o(-h):d*o(h),!(m<s)){if(m>u)break;_.push(m)}_.length*2<g&&(_=qr(s,u,g))}else _=qr(h,p,Math.min(p-h,g)).map(o);return c?_.reverse():_},e.tickFormat=(l,f)=>{if(l==null&&(l=10),f==null&&(f=i===10?"s":","),typeof f!="function"&&(!(i%1)&&(f=Vr(f)).precision==null&&(f.trim=!0),f=ur(f)),l===1/0)return f;const s=Math.max(1,i*l/e.ticks().length);return u=>{let c=u/o(Math.round(r(u)));return c*i<i-.5&&(c*=i),c<=s?f(u):""}},e.nice=()=>n(W1(n(),{floor:l=>o(Math.floor(r(l))),ceil:l=>o(Math.ceil(r(l)))})),e}function H1(){const t=Y1(cl()).domain([1,10]);return t.copy=()=>uo(t,H1()).base(t.base()),hn.apply(t,arguments),t}function Hc(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Vc(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function V1(t){var e=1,n=t(Hc(e),Vc(e));return n.constant=function(i){return arguments.length?t(Hc(e=+i),Vc(e)):e},co(n)}function G1(){var t=V1(cl());return t.copy=function(){return uo(t,G1()).constant(t.constant())},hn.apply(t,arguments)}function Gc(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function p6(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function m6(t){return t<0?-t*t:t*t}function X1(t){var e=t(De,De),n=1;function i(){return n===1?t(De,De):n===.5?t(p6,m6):t(Gc(n),Gc(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},co(e)}function j1(){var t=X1(cl());return t.copy=function(){return uo(t,j1()).exponent(t.exponent())},hn.apply(t,arguments),t}function Z1(){var t=[],e=[],n=[],i;function r(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=n_(t,a/l);return o}function o(a){return a==null||isNaN(a=+a)?i:e[ja(n,a)]}return o.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(be),r()},o.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},o.unknown=function(a){return arguments.length?(i=a,o):i},o.quantiles=function(){return n.slice()},o.copy=function(){return Z1().domain(t).range(e).unknown(i)},hn.apply(o,arguments)}function K1(){var t=[.5],e=[0,1],n,i=1;function r(o){return o!=null&&o<=o?e[ja(t,o,0,i)]:n}return r.domain=function(o){return arguments.length?(t=Array.from(o),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(o){return arguments.length?(e=Array.from(o),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return K1().domain(t).range(e).unknown(n)},hn.apply(r,arguments)}const ff=new Date,sf=new Date;function Ht(t,e,n,i){function r(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return r.floor=o=>(t(o=new Date(+o)),o),r.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),r.round=o=>{const a=r(o),l=r.ceil(o);return o-a<l-o?a:l},r.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),r.range=(o,a,l)=>{const f=[];if(o=r.ceil(o),l=l==null?1:Math.floor(l),!(o<a)||!(l>0))return f;let s;do f.push(s=new Date(+o)),e(o,l),t(o);while(s<o&&o<a);return f},r.filter=o=>Ht(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!o(a););else for(;--l>=0;)for(;e(a,1),!o(a););}),n&&(r.count=(o,a)=>(ff.setTime(+o),sf.setTime(+a),t(ff),t(sf),Math.floor(n(ff,sf))),r.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?r.filter(i?a=>i(a)%o===0:a=>r.count(0,a)%o===0):r)),r}const Ia=Ht(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ia.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Ht(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ia);Ia.range;const xn=1e3,Fe=xn*60,kn=Fe*60,Cn=kn*24,eu=Cn*7,Xc=Cn*30,uf=Cn*365,We=Ht(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*xn)},(t,e)=>(e-t)/xn,t=>t.getUTCSeconds());We.range;const ho=Ht(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xn)},(t,e)=>{t.setTime(+t+e*Fe)},(t,e)=>(e-t)/Fe,t=>t.getMinutes());ho.range;const po=Ht(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Fe)},(t,e)=>(e-t)/Fe,t=>t.getUTCMinutes());po.range;const mo=Ht(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*xn-t.getMinutes()*Fe)},(t,e)=>{t.setTime(+t+e*kn)},(t,e)=>(e-t)/kn,t=>t.getHours());mo.range;const go=Ht(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*kn)},(t,e)=>(e-t)/kn,t=>t.getUTCHours());go.range;const Si=Ht(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fe)/Cn,t=>t.getDate()-1);Si.range;const hl=Ht(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Cn,t=>t.getUTCDate()-1);hl.range;const dl=Ht(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Cn,t=>Math.floor(t/Cn));dl.range;function Ti(t){return Ht(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Fe)/eu)}const er=Ti(0),Xr=Ti(1),Q1=Ti(2),J1=Ti(3),xi=Ti(4),tp=Ti(5),ep=Ti(6);er.range;Xr.range;Q1.range;J1.range;xi.range;tp.range;ep.range;function Ci(t){return Ht(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/eu)}const nr=Ci(0),jr=Ci(1),np=Ci(2),ip=Ci(3),ki=Ci(4),rp=Ci(5),op=Ci(6);nr.range;jr.range;np.range;ip.range;ki.range;rp.range;op.range;const bo=Ht(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());bo.range;const _o=Ht(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());_o.range;const He=Ht(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());He.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ht(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});He.range;const Ve=Ht(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ve.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Ht(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ve.range;function ap(t,e,n,i,r,o){const a=[[We,1,xn],[We,5,5*xn],[We,15,15*xn],[We,30,30*xn],[o,1,Fe],[o,5,5*Fe],[o,15,15*Fe],[o,30,30*Fe],[r,1,kn],[r,3,3*kn],[r,6,6*kn],[r,12,12*kn],[i,1,Cn],[i,2,2*Cn],[n,1,eu],[e,1,Xc],[e,3,3*Xc],[t,1,uf]];function l(s,u,c){const h=u<s;h&&([s,u]=[u,s]);const p=c&&typeof c.range=="function"?c:f(s,u,c),d=p?p.range(s,+u+1):[];return h?d.reverse():d}function f(s,u,c){const h=Math.abs(u-s)/c,p=Xa(([,,g])=>g).right(a,h);if(p===a.length)return t.every(Of(s/uf,u/uf,c));if(p===0)return Ia.every(Math.max(Of(s,u,c),1));const[d,m]=a[h/a[p-1][2]<a[p][2]/h?p-1:p];return d.every(m)}return[l,f]}const[g6,lp]=ap(Ve,_o,nr,dl,go,po),[b6,_6]=ap(He,bo,er,Si,mo,ho);function cf(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function hf(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function wr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function y6(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,o=t.days,a=t.shortDays,l=t.months,f=t.shortMonths,s=vr(r),u=xr(r),c=vr(o),h=xr(o),p=vr(a),d=xr(a),m=vr(l),g=xr(l),_=vr(f),b=xr(f),v={a:z,A:Z,b:Q,B:W,c:null,d:th,e:th,f:q6,g:Q6,G:t4,H:U6,I:z6,j:B6,L:fp,m:W6,M:Y6,p:U,q:Y,Q:ih,s:rh,S:H6,u:V6,U:G6,V:X6,w:j6,W:Z6,x:null,X:null,y:K6,Y:J6,Z:e4,"%":nh},w={a:K,A:ft,b:et,B:j,c:null,d:eh,e:eh,f:o4,g:m4,G:b4,H:n4,I:i4,j:r4,L:up,m:a4,M:l4,p:q,q:N,Q:ih,s:rh,S:f4,u:s4,U:u4,V:c4,w:h4,W:d4,x:null,X:null,y:p4,Y:g4,Z:_4,"%":nh},x={a:F,A:C,b:I,B:L,c:G,d:Qc,e:Qc,f:I6,g:Kc,G:Zc,H:Jc,I:Jc,j:N6,L:L6,m:E6,M:D6,p:A,q:A6,Q:P6,s:O6,S:F6,u:M6,U:S6,V:T6,w:k6,W:C6,x:$,X:B,y:Kc,Y:Zc,Z:$6,"%":R6};v.x=k(n,v),v.X=k(i,v),v.c=k(e,v),w.x=k(n,w),w.X=k(i,w),w.c=k(e,w);function k(E,O){return function(tt){var P=[],pt=-1,rt=0,mt=E.length,nt,ht,kt;for(tt instanceof Date||(tt=new Date(+tt));++pt<mt;)E.charCodeAt(pt)===37&&(P.push(E.slice(rt,pt)),(ht=jc[nt=E.charAt(++pt)])!=null?nt=E.charAt(++pt):ht=nt==="e"?" ":"0",(kt=O[nt])&&(nt=kt(tt,ht)),P.push(nt),rt=pt+1);return P.push(E.slice(rt,pt)),P.join("")}}function S(E,O){return function(tt){var P=wr(1900,void 0,1),pt=T(P,E,tt+="",0),rt,mt;if(pt!=tt.length)return null;if("Q"in P)return new Date(P.Q);if("s"in P)return new Date(P.s*1e3+("L"in P?P.L:0));if(O&&!("Z"in P)&&(P.Z=0),"p"in P&&(P.H=P.H%12+P.p*12),P.m===void 0&&(P.m="q"in P?P.q:0),"V"in P){if(P.V<1||P.V>53)return null;"w"in P||(P.w=1),"Z"in P?(rt=hf(wr(P.y,0,1)),mt=rt.getUTCDay(),rt=mt>4||mt===0?jr.ceil(rt):jr(rt),rt=hl.offset(rt,(P.V-1)*7),P.y=rt.getUTCFullYear(),P.m=rt.getUTCMonth(),P.d=rt.getUTCDate()+(P.w+6)%7):(rt=cf(wr(P.y,0,1)),mt=rt.getDay(),rt=mt>4||mt===0?Xr.ceil(rt):Xr(rt),rt=Si.offset(rt,(P.V-1)*7),P.y=rt.getFullYear(),P.m=rt.getMonth(),P.d=rt.getDate()+(P.w+6)%7)}else("W"in P||"U"in P)&&("w"in P||(P.w="u"in P?P.u%7:"W"in P?1:0),mt="Z"in P?hf(wr(P.y,0,1)).getUTCDay():cf(wr(P.y,0,1)).getDay(),P.m=0,P.d="W"in P?(P.w+6)%7+P.W*7-(mt+5)%7:P.w+P.U*7-(mt+6)%7);return"Z"in P?(P.H+=P.Z/100|0,P.M+=P.Z%100,hf(P)):cf(P)}}function T(E,O,tt,P){for(var pt=0,rt=O.length,mt=tt.length,nt,ht;pt<rt;){if(P>=mt)return-1;if(nt=O.charCodeAt(pt++),nt===37){if(nt=O.charAt(pt++),ht=x[nt in jc?O.charAt(pt++):nt],!ht||(P=ht(E,tt,P))<0)return-1}else if(nt!=tt.charCodeAt(P++))return-1}return P}function A(E,O,tt){var P=s.exec(O.slice(tt));return P?(E.p=u.get(P[0].toLowerCase()),tt+P[0].length):-1}function F(E,O,tt){var P=p.exec(O.slice(tt));return P?(E.w=d.get(P[0].toLowerCase()),tt+P[0].length):-1}function C(E,O,tt){var P=c.exec(O.slice(tt));return P?(E.w=h.get(P[0].toLowerCase()),tt+P[0].length):-1}function I(E,O,tt){var P=_.exec(O.slice(tt));return P?(E.m=b.get(P[0].toLowerCase()),tt+P[0].length):-1}function L(E,O,tt){var P=m.exec(O.slice(tt));return P?(E.m=g.get(P[0].toLowerCase()),tt+P[0].length):-1}function G(E,O,tt){return T(E,e,O,tt)}function $(E,O,tt){return T(E,n,O,tt)}function B(E,O,tt){return T(E,i,O,tt)}function z(E){return a[E.getDay()]}function Z(E){return o[E.getDay()]}function Q(E){return f[E.getMonth()]}function W(E){return l[E.getMonth()]}function U(E){return r[+(E.getHours()>=12)]}function Y(E){return 1+~~(E.getMonth()/3)}function K(E){return a[E.getUTCDay()]}function ft(E){return o[E.getUTCDay()]}function et(E){return f[E.getUTCMonth()]}function j(E){return l[E.getUTCMonth()]}function q(E){return r[+(E.getUTCHours()>=12)]}function N(E){return 1+~~(E.getUTCMonth()/3)}return{format:function(E){var O=k(E+="",v);return O.toString=function(){return E},O},parse:function(E){var O=S(E+="",!1);return O.toString=function(){return E},O},utcFormat:function(E){var O=k(E+="",w);return O.toString=function(){return E},O},utcParse:function(E){var O=S(E+="",!0);return O.toString=function(){return E},O}}}var jc={"-":"",_:" ",0:"0"},te=/^\s*\d+/,w6=/^%/,v6=/[\\^$*+?|[\]().{}]/g;function Ct(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function x6(t){return t.replace(v6,"\\$&")}function vr(t){return new RegExp("^(?:"+t.map(x6).join("|")+")","i")}function xr(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function k6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function M6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function S6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function T6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function C6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Zc(t,e,n){var i=te.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Kc(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function $6(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function A6(t,e,n){var i=te.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function E6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Qc(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function N6(t,e,n){var i=te.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Jc(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function D6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function F6(t,e,n){var i=te.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function L6(t,e,n){var i=te.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function I6(t,e,n){var i=te.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function R6(t,e,n){var i=w6.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function P6(t,e,n){var i=te.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function O6(t,e,n){var i=te.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function th(t,e){return Ct(t.getDate(),e,2)}function U6(t,e){return Ct(t.getHours(),e,2)}function z6(t,e){return Ct(t.getHours()%12||12,e,2)}function B6(t,e){return Ct(1+Si.count(He(t),t),e,3)}function fp(t,e){return Ct(t.getMilliseconds(),e,3)}function q6(t,e){return fp(t,e)+"000"}function W6(t,e){return Ct(t.getMonth()+1,e,2)}function Y6(t,e){return Ct(t.getMinutes(),e,2)}function H6(t,e){return Ct(t.getSeconds(),e,2)}function V6(t){var e=t.getDay();return e===0?7:e}function G6(t,e){return Ct(er.count(He(t)-1,t),e,2)}function sp(t){var e=t.getDay();return e>=4||e===0?xi(t):xi.ceil(t)}function X6(t,e){return t=sp(t),Ct(xi.count(He(t),t)+(He(t).getDay()===4),e,2)}function j6(t){return t.getDay()}function Z6(t,e){return Ct(Xr.count(He(t)-1,t),e,2)}function K6(t,e){return Ct(t.getFullYear()%100,e,2)}function Q6(t,e){return t=sp(t),Ct(t.getFullYear()%100,e,2)}function J6(t,e){return Ct(t.getFullYear()%1e4,e,4)}function t4(t,e){var n=t.getDay();return t=n>=4||n===0?xi(t):xi.ceil(t),Ct(t.getFullYear()%1e4,e,4)}function e4(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ct(e/60|0,"0",2)+Ct(e%60,"0",2)}function eh(t,e){return Ct(t.getUTCDate(),e,2)}function n4(t,e){return Ct(t.getUTCHours(),e,2)}function i4(t,e){return Ct(t.getUTCHours()%12||12,e,2)}function r4(t,e){return Ct(1+hl.count(Ve(t),t),e,3)}function up(t,e){return Ct(t.getUTCMilliseconds(),e,3)}function o4(t,e){return up(t,e)+"000"}function a4(t,e){return Ct(t.getUTCMonth()+1,e,2)}function l4(t,e){return Ct(t.getUTCMinutes(),e,2)}function f4(t,e){return Ct(t.getUTCSeconds(),e,2)}function s4(t){var e=t.getUTCDay();return e===0?7:e}function u4(t,e){return Ct(nr.count(Ve(t)-1,t),e,2)}function cp(t){var e=t.getUTCDay();return e>=4||e===0?ki(t):ki.ceil(t)}function c4(t,e){return t=cp(t),Ct(ki.count(Ve(t),t)+(Ve(t).getUTCDay()===4),e,2)}function h4(t){return t.getUTCDay()}function d4(t,e){return Ct(jr.count(Ve(t)-1,t),e,2)}function p4(t,e){return Ct(t.getUTCFullYear()%100,e,2)}function m4(t,e){return t=cp(t),Ct(t.getUTCFullYear()%100,e,2)}function g4(t,e){return Ct(t.getUTCFullYear()%1e4,e,4)}function b4(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ki(t):ki.ceil(t),Ct(t.getUTCFullYear()%1e4,e,4)}function _4(){return"+0000"}function nh(){return"%"}function ih(t){return+t}function rh(t){return Math.floor(+t/1e3)}var Fi,nu,yo;y4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function y4(t){return Fi=y6(t),nu=Fi.format,Fi.parse,yo=Fi.utcFormat,Fi.utcParse,Fi}function w4(t){return new Date(t)}function v4(t){return t instanceof Date?+t:+new Date(+t)}function iu(t,e,n,i,r,o,a,l,f,s){var u=B1(),c=u.invert,h=u.domain,p=s(".%L"),d=s(":%S"),m=s("%I:%M"),g=s("%I %p"),_=s("%a %d"),b=s("%b %d"),v=s("%B"),w=s("%Y");function x(k){return(f(k)<k?p:l(k)<k?d:a(k)<k?m:o(k)<k?g:i(k)<k?r(k)<k?_:b:n(k)<k?v:w)(k)}return u.invert=function(k){return new Date(c(k))},u.domain=function(k){return arguments.length?h(Array.from(k,v4)):h().map(w4)},u.ticks=function(k){var S=h();return t(S[0],S[S.length-1],k??10)},u.tickFormat=function(k,S){return S==null?x:s(S)},u.nice=function(k){var S=h();return(!k||typeof k.range!="function")&&(k=e(S[0],S[S.length-1],k??10)),k?h(W1(S,k)):u},u.copy=function(){return uo(u,iu(t,e,n,i,r,o,a,l,f,s))},u}function x4(){return hn.apply(iu(b6,_6,He,bo,er,Si,mo,ho,We,nu).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function k4(){return hn.apply(iu(g6,lp,Ve,_o,nr,hl,go,po,We,yo).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function ml(){var t=0,e=.5,n=1,i=1,r,o,a,l,f,s=De,u,c=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+u(m))-o)*(i*m<i*o?l:f),s(c?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([t,e,n]=m,r=u(t=+t),o=u(e=+e),a=u(n=+n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p):[t,e,n]},p.clamp=function(m){return arguments.length?(c=!!m,p):c},p.interpolator=function(m){return arguments.length?(s=m,p):s};function d(m){return function(g){var _,b,v;return arguments.length?([_,b,v]=g,s=il(m,[_,b,v]),p):[s(0),s(.5),s(1)]}}return p.range=d(fo),p.rangeRound=d(Ws),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return u=m,r=m(t),o=m(e),a=m(n),l=r===o?0:.5/(o-r),f=o===a?0:.5/(a-o),i=o<r?-1:1,p}}function hp(){var t=co(ml()(De));return t.copy=function(){return pl(t,hp())},sl.apply(t,arguments)}function dp(){var t=Y1(ml()).domain([.1,1,10]);return t.copy=function(){return pl(t,dp()).base(t.base())},sl.apply(t,arguments)}function pp(){var t=V1(ml());return t.copy=function(){return pl(t,pp()).constant(t.constant())},sl.apply(t,arguments)}function mp(){var t=X1(ml());return t.copy=function(){return pl(t,mp()).exponent(t.exponent())},sl.apply(t,arguments)}function xt(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const M4=xt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),S4=xt("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),T4=xt("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),C4=xt("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),$4=xt("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),A4=xt("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),E4=xt("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),N4=xt("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),D4=xt("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),F4=xt("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),At=t=>bw(t[t.length-1]);var gp=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(xt);const bp=At(gp);var _p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(xt);const yp=At(_p);var wp=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(xt);const vp=At(wp);var xp=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(xt);const kp=At(xp);var _s=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(xt);const Ra=At(_s);var Mp=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(xt);const Sp=At(Mp);var ys=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(xt);const Pa=At(ys);var Tp=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(xt);const Cp=At(Tp);var $p=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(xt);const Ap=At($p);var Ep=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(xt);const Np=At(Ep);var Dp=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(xt);const Fp=At(Dp);var Lp=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(xt);const Ip=At(Lp);var Rp=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(xt);const Pp=At(Rp);var Op=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(xt);const Up=At(Op);var zp=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(xt);const Bp=At(zp);var qp=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(xt);const Wp=At(qp);var Yp=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(xt);const Hp=At(Yp);var Vp=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(xt);const Gp=At(Vp);var Xp=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(xt);const jp=At(Xp);var Zp=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(xt);const Kp=At(Zp);var Qp=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(xt);const Jp=At(Qp);var tm=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(xt);const em=At(tm);var nm=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(xt);const im=At(nm);var rm=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(xt);const om=At(rm);var am=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(xt);const lm=At(am);var fm=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(xt);const sm=At(fm);var um=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(xt);const cm=At(um);function hm(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const dm=Ys(sn(300,.5,0),sn(-240,.5,1));var pm=Ys(sn(-100,.75,.35),sn(80,1.5,.8)),mm=Ys(sn(260,.75,.35),sn(80,1.5,.8)),Wo=sn();function gm(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Wo.h=360*t-100,Wo.s=1.5-1.5*e,Wo.l=.8-.9*e,Wo+""}var Yo=Xn(),L4=Math.PI/3,I4=Math.PI*2/3;function bm(t){var e;return t=(.5-t)*Math.PI,Yo.r=255*(e=Math.sin(t))*e,Yo.g=255*(e=Math.sin(t+L4))*e,Yo.b=255*(e=Math.sin(t+I4))*e,Yo+""}function _m(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function gl(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const ym=gl(xt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var wm=gl(xt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),vm=gl(xt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),xm=gl(xt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function jt(t){return function(){return t}}const km=Math.cos,ru=Math.min,Oa=Math.sin,Vt=Math.sqrt,oh=1e-12,Ua=Math.PI,bl=2*Ua;function Mm(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new i1(e)}function Sm(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tm(t){this._context=t}Tm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function wo(t){return new Tm(t)}function Cm(t){return t[0]}function $m(t){return t[1]}function Am(t,e){var n=jt(!0),i=null,r=wo,o=null,a=Mm(l);t=typeof t=="function"?t:t===void 0?Cm:jt(t),e=typeof e=="function"?e:e===void 0?$m:jt(e);function l(f){var s,u=(f=Sm(f)).length,c,h=!1,p;for(i==null&&(o=r(p=a())),s=0;s<=u;++s)!(s<u&&n(c=f[s],s,f))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,s,f),+e(c,s,f));if(p)return o=null,p+""||null}return l.x=function(f){return arguments.length?(t=typeof f=="function"?f:jt(+f),l):t},l.y=function(f){return arguments.length?(e=typeof f=="function"?f:jt(+f),l):e},l.defined=function(f){return arguments.length?(n=typeof f=="function"?f:jt(!!f),l):n},l.curve=function(f){return arguments.length?(r=f,i!=null&&(o=r(i)),l):r},l.context=function(f){return arguments.length?(f==null?i=o=null:o=r(i=f),l):i},l}function R4(t,e,n){var i=null,r=jt(!0),o=null,a=wo,l=null,f=Mm(s);t=typeof t=="function"?t:t===void 0?Cm:jt(+t),e=typeof e=="function"?e:jt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?$m:jt(+n);function s(c){var h,p,d,m=(c=Sm(c)).length,g,_=!1,b,v=new Array(m),w=new Array(m);for(o==null&&(l=a(b=f())),h=0;h<=m;++h){if(!(h<m&&r(g=c[h],h,c))===_)if(_=!_)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),d=h-1;d>=p;--d)l.point(v[d],w[d]);l.lineEnd(),l.areaEnd()}_&&(v[h]=+t(g,h,c),w[h]=+e(g,h,c),l.point(i?+i(g,h,c):v[h],n?+n(g,h,c):w[h]))}if(b)return l=null,b+""||null}function u(){return Am().defined(r).curve(a).context(o)}return s.x=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),i=null,s):t},s.x0=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),s):t},s.x1=function(c){return arguments.length?(i=c==null?null:typeof c=="function"?c:jt(+c),s):i},s.y=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),n=null,s):e},s.y0=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),s):e},s.y1=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:jt(+c),s):n},s.lineX0=s.lineY0=function(){return u().x(t).y(e)},s.lineY1=function(){return u().x(t).y(n)},s.lineX1=function(){return u().x(i).y(e)},s.defined=function(c){return arguments.length?(r=typeof c=="function"?c:jt(!!c),s):r},s.curve=function(c){return arguments.length?(a=c,o!=null&&(l=a(o)),s):a},s.context=function(c){return arguments.length?(c==null?o=l=null:l=a(o=c),s):o},s}class Em{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function P4(t){return new Em(t,!0)}function O4(t){return new Em(t,!1)}const U4=Vt(3),Nm={draw(t,e){const n=Vt(e+ru(e/28,.75))*.59436,i=n/2,r=i*U4;t.moveTo(0,n),t.lineTo(0,-n),t.moveTo(-r,-i),t.lineTo(r,i),t.moveTo(-r,i),t.lineTo(r,-i)}},Zr={draw(t,e){const n=Vt(e/Ua);t.moveTo(n,0),t.arc(0,0,n,0,bl)}},Dm={draw(t,e){const n=Vt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},Fm=Vt(1/3),z4=Fm*2,Lm={draw(t,e){const n=Vt(e/z4),i=n*Fm;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Im={draw(t,e){const n=Vt(e)*.62625;t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},Rm={draw(t,e){const n=Vt(e-ru(e/7,2))*.87559;t.moveTo(-n,0),t.lineTo(n,0),t.moveTo(0,n),t.lineTo(0,-n)}},Pm={draw(t,e){const n=Vt(e),i=-n/2;t.rect(i,i,n,n)}},Om={draw(t,e){const n=Vt(e)*.4431;t.moveTo(n,n),t.lineTo(n,-n),t.lineTo(-n,-n),t.lineTo(-n,n),t.closePath()}},B4=.8908130915292852,Um=Oa(Ua/10)/Oa(7*Ua/10),q4=Oa(bl/10)*Um,W4=-km(bl/10)*Um,zm={draw(t,e){const n=Vt(e*B4),i=q4*n,r=W4*n;t.moveTo(0,-n),t.lineTo(i,r);for(let o=1;o<5;++o){const a=bl*o/5,l=km(a),f=Oa(a);t.lineTo(f*n,-l*n),t.lineTo(l*i-f*r,f*i+l*r)}t.closePath()}},df=Vt(3),Bm={draw(t,e){const n=-Vt(e/(df*3));t.moveTo(0,n*2),t.lineTo(-df*n,-n),t.lineTo(df*n,-n),t.closePath()}},Y4=Vt(3),qm={draw(t,e){const n=Vt(e)*.6824,i=n/2,r=n*Y4/2;t.moveTo(0,-n),t.lineTo(r,i),t.lineTo(-r,i),t.closePath()}},Ce=-.5,$e=Vt(3)/2,ws=1/Vt(12),H4=(ws/2+1)*3,Wm={draw(t,e){const n=Vt(e/H4),i=n/2,r=n*ws,o=i,a=n*ws+n,l=-o,f=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(l,f),t.lineTo(Ce*i-$e*r,$e*i+Ce*r),t.lineTo(Ce*o-$e*a,$e*o+Ce*a),t.lineTo(Ce*l-$e*f,$e*l+Ce*f),t.lineTo(Ce*i+$e*r,Ce*r-$e*i),t.lineTo(Ce*o+$e*a,Ce*a-$e*o),t.lineTo(Ce*l+$e*f,Ce*f-$e*l),t.closePath()}},Ym={draw(t,e){const n=Vt(e-ru(e/6,1.7))*.6189;t.moveTo(-n,-n),t.lineTo(n,n),t.moveTo(-n,n),t.lineTo(n,-n)}},V4=[Zr,Dm,Lm,Pm,zm,Bm,Wm],G4=[Zr,Rm,Ym,qm,Nm,Om,Im];function jn(){}function za(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function _l(t){this._context=t}_l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:za(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:za(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function X4(t){return new _l(t)}function Hm(t){this._context=t}Hm.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:za(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function j4(t){return new Hm(t)}function Vm(t){this._context=t}Vm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:za(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Z4(t){return new Vm(t)}function Gm(t,e){this._basis=new _l(t),this._beta=e}Gm.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],o=t[n]-i,a=e[n]-r,l=-1,f;++l<=n;)f=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+f*o),this._beta*e[l]+(1-this._beta)*(r+f*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const K4=function t(e){function n(i){return e===1?new _l(i):new Gm(i,e)}return n.beta=function(i){return t(+i)},n}(.85);function Ba(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ou(t,e){this._context=t,this._k=(1-e)/6}ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ba(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Ba(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Q4=function t(e){function n(i){return new ou(i,e)}return n.tension=function(i){return t(+i)},n}(0);function au(t,e){this._context=t,this._k=(1-e)/6}au.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ba(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const J4=function t(e){function n(i){return new au(i,e)}return n.tension=function(i){return t(+i)},n}(0);function lu(t,e){this._context=t,this._k=(1-e)/6}lu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ba(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const t5=function t(e){function n(i){return new lu(i,e)}return n.tension=function(i){return t(+i)},n}(0);function fu(t,e,n){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>oh){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,f=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/f,r=(r*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/f}if(t._l23_a>oh){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*s+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*s+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function Xm(t,e){this._context=t,this._alpha=e}Xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:fu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const e5=function t(e){function n(i){return e?new Xm(i,e):new ou(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function jm(t,e){this._context=t,this._alpha=e}jm.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:fu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const n5=function t(e){function n(i){return e?new jm(i,e):new au(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Zm(t,e){this._context=t,this._alpha=e}Zm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:fu(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const i5=function t(e){function n(i){return e?new Zm(i,e):new lu(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Km(t){this._context=t}Km.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function r5(t){return new Km(t)}function ah(t){return t<0?-1:1}function lh(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),l=(o*r+a*i)/(i+r);return(ah(o)+ah(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function fh(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function pf(t,e,n){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,l=(o-i)/3;t._context.bezierCurveTo(i+l,r+l*e,o-l,a-l*n,o,a)}function qa(t){this._context=t}qa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pf(this,this._t0,fh(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,pf(this,fh(this,n=lh(this,t,e)),n);break;default:pf(this,this._t0,n=lh(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Qm(t){this._context=new Jm(t)}(Qm.prototype=Object.create(qa.prototype)).point=function(t,e){qa.prototype.point.call(this,e,t)};function Jm(t){this._context=t}Jm.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}};function o5(t){return new qa(t)}function a5(t){return new Qm(t)}function tg(t){this._context=t}tg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=sh(t),r=sh(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function sh(t){var e,n=t.length-1,i,r=new Array(n),o=new Array(n),a=new Array(n);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/o[e-1],o[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/o[e];for(o[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function l5(t){return new tg(t)}function yl(t,e){this._context=t,this._t=e}yl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function f5(t){return new yl(t,.5)}function s5(t){return new yl(t,0)}function u5(t){return new yl(t,1)}function Dr(t,e,n){this.k=t,this.x=e,this.y=n}Dr.prototype={constructor:Dr,scale:function(t){return t===1?this:new Dr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Dr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Dr.prototype;function Zn(t){return t!=null&&!Number.isNaN(t)}function Ge(t,e){return+Zn(e)-+Zn(t)||be(t,e)}function Wa(t,e){return+Zn(e)-+Zn(t)||ro(t,e)}function su(t){return t!=null&&`${t}`!=""}function eg(t){return isFinite(t)?t:NaN}function wl(t){return t>0&&isFinite(t)?t:NaN}function uu(t){return t<0&&isFinite(t)?t:NaN}function c5(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return typeof e=="function"?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return`${h5(t.getUTCFullYear())}-${wn(t.getUTCMonth()+1,2)}-${wn(t.getUTCDate(),2)}${n||i||r||o?`T${wn(n,2)}:${wn(i,2)}${r||o?`:${wn(r,2)}${o?`.${wn(o,3)}`:""}`:""}Z`:""}`}function h5(t){return t<0?`-${wn(-t,6)}`:t>9999?`+${wn(t,6)}`:wn(t,4)}function wn(t,e){return`${t}`.padStart(e,"0")}const d5=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/;function ng(t,e){return d5.test(t+="")?new Date(t):typeof e=="function"?e(t):e}const Oi=1e3,Un=Oi*60,zn=Un*60,un=zn*24,Qe=un*7,hi=un*30,Rn=un*365,mf=[["millisecond",1],["2 milliseconds",2],["5 milliseconds",5],["10 milliseconds",10],["20 milliseconds",20],["50 milliseconds",50],["100 milliseconds",100],["200 milliseconds",200],["500 milliseconds",500],["second",Oi],["5 seconds",5*Oi],["15 seconds",15*Oi],["30 seconds",30*Oi],["minute",Un],["5 minutes",5*Un],["15 minutes",15*Un],["30 minutes",30*Un],["hour",zn],["3 hours",3*zn],["6 hours",6*zn],["12 hours",12*zn],["day",un],["2 days",2*un],["week",Qe],["2 weeks",2*Qe],["month",hi],["3 months",3*hi],["6 months",6*hi],["year",Rn],["2 years",2*Rn],["5 years",5*Rn],["10 years",10*Rn],["20 years",20*Rn],["50 years",50*Rn],["100 years",100*Rn]],cu=new Map([["second",Oi],["minute",Un],["hour",zn],["day",un],["monday",Qe],["tuesday",Qe],["wednesday",Qe],["thursday",Qe],["friday",Qe],["saturday",Qe],["sunday",Qe],["week",Qe],["month",hi],["year",Rn]]),ig=new Map([["second",We],["minute",ho],["hour",mo],["day",Si],["monday",Xr],["tuesday",Q1],["wednesday",J1],["thursday",xi],["friday",tp],["saturday",ep],["sunday",er],["week",er],["month",bo],["year",He]]),hu=new Map([["second",We],["minute",po],["hour",go],["day",dl],["monday",jr],["tuesday",np],["wednesday",ip],["thursday",ki],["friday",rp],["saturday",op],["sunday",nr],["week",nr],["month",_o],["year",Ve]]),vo=Symbol("intervalDuration"),vl=Symbol("intervalType");for(const[t,e]of ig)e[vo]=cu.get(t),e[vl]="time";for(const[t,e]of hu)e[vo]=cu.get(t),e[vl]="utc";const Fr=[["year",Ve,"utc"],["month",_o,"utc"],["day",dl,"utc",6*hi],["hour",go,"utc",3*un],["minute",po,"utc",6*zn],["second",We,"utc",30*Un]],aa=[["year",He,"time"],["month",bo,"time"],["day",Si,"time",6*hi],["hour",mo,"time",3*un],["minute",ho,"time",6*zn],["second",We,"time",30*Un]],p5=[Fr[0],aa[0],Fr[1],aa[1],Fr[2],aa[2],...Fr.slice(3)];function rg(t){let e=`${t}`.toLowerCase();e.endsWith("s")&&(e=e.slice(0,-1));let n=1;const i=/^(?:(\d+)\s+)/.exec(e);switch(i&&(e=e.slice(i[0].length),n=+i[1]),e){case"quarter":e="month",n*=3;break;case"half":e="month",n*=6;break}let r=hu.get(e);if(!r)throw new Error(`unknown interval: ${t}`);if(n>1&&!r.every)throw new Error(`non-periodic interval: ${e}`);return[e,n]}function og(t){return ag(rg(t),"time")}function du(t){return ag(rg(t),"utc")}function ag([t,e],n){let i=(n==="time"?ig:hu).get(t);return e>1&&(i=i.every(e),i[vo]=cu.get(t)*e,i[vl]=n),i}function uh(t,e){if(!(e>1))return;const n=t[vo];if(!mf.some(([,r])=>r===n)||n%un===0&&un<n&&n<hi)return;const[i]=mf[Xa(([,r])=>Math.log(r)).center(mf,Math.log(n*e))];return(t[vl]==="time"?og:du)(i)}function ch(t,e,n){const i=e==="time"?nu:yo;if(n==null)return i(t==="year"?"%Y":t==="month"?"%Y-%m":t==="day"?"%Y-%m-%d":t==="hour"||t==="minute"?"%Y-%m-%dT%H:%M":t==="second"?"%Y-%m-%dT%H:%M:%S":"%Y-%m-%dT%H:%M:%S.%L");const r=m5(n);switch(t){case"millisecond":return Li(i(".%L"),i(":%M:%S"),r);case"second":return Li(i(":%S"),i("%-I:%M"),r);case"minute":return Li(i("%-I:%M"),i("%p"),r);case"hour":return Li(i("%-I %p"),i("%b %-d"),r);case"day":return Li(i("%-d"),i("%b"),r);case"month":return Li(i("%b"),i("%Y"),r);case"year":return i("%Y")}throw new Error("unable to format time ticks")}function m5(t){return t==="left"||t==="right"?(e,n)=>`
${e}
${n}`:t==="top"?(e,n)=>`${n}
${e}`:(e,n)=>`${e}
${n}`}function g5(t){return t==="time"?aa:t==="utc"?Fr:p5}function b5(t,e,n){const i=ye(a_(e,(r,o)=>Math.abs(o-r)));if(i<1e3)return ch("millisecond","utc",n);for(const[r,o,a,l]of g5(t)){if(i>l||r==="hour"&&!i)break;if(e.every(f=>o.floor(f)>=f))return ch(r,a,n)}}function Li(t,e,n){return(i,r,o)=>{const a=t(i,r),l=e(i,r),f=r-rr(o);return r!==f&&o[f]!==void 0&&l===e(o[f],f)?a:n(a,l)}}const Kr=Object.getPrototypeOf(Uint8Array),_5=Object.prototype.toString,lg=Symbol("reindex");function Kt(t,e,n){const i=typeof e;return i==="string"?hh(t,fg(e),n):i==="function"?hh(t,e,n):i==="number"||e instanceof Date||i==="boolean"?Yt(t,xo(e),n):typeof(e==null?void 0:e.transform)=="function"?dh(e.transform(t),n):y5(dh(e,n),t==null?void 0:t[lg])}function y5(t,e){return e?bu(t,e):t}function hh(t,e,n){return Yt(t,(n==null?void 0:n.prototype)instanceof Kr?w5(e):e,n)}function dh(t,e){return e===void 0?Se(t):t instanceof e?t:e.prototype instanceof Kr&&!(t instanceof Kr)?e.from(t,mu):e.from(t)}function w5(t){return(e,n)=>mu(t(e,n))}const la=[null],fg=t=>e=>e[t],xl={transform:An},oe={transform:t=>t},v5=()=>1,x5=()=>!0,le=t=>t==null?t:`${t}`,Lt=t=>t==null?t:+t,pu=t=>t?t[0]:void 0,vs=t=>t?t[1]:void 0,xo=t=>()=>t;function k5(t){const e=+`${t}`.slice(1)/100;return(n,i)=>Gi(n,e,i)}function rn(t){return t instanceof Kr?t:Yt(t,mu,Float64Array)}function mu(t){return t==null?NaN:Number(t)}function M5(t){return Yt(t,sg)}function sg(t){return t instanceof Date&&!isNaN(t)?t:typeof t=="string"?ng(t):t==null||isNaN(t=+t)?void 0:new Date(t)}function $n(t,e){return t===void 0&&(t=e),t===null?[void 0,"none"]:Sl(t)?[void 0,t]:[t,void 0]}function fe(t,e){return t===void 0&&(t=e),t===null||typeof t=="number"?[void 0,t]:[t,void 0]}function ug(t,e,n){if(t!=null)return Ze(t,e,n)}function Ze(t,e,n){const i=`${t}`.toLowerCase();if(!n.includes(i))throw new Error(`invalid ${e}: ${t}`);return i}function Se(t){return t==null||t instanceof Array||t instanceof Kr?t:Array.from(t)}function Yt(t,e,n=Array){return t==null?t:t instanceof n?t.map(e):n.from(t,e)}function Qr(t,e=Array){return t instanceof e?t.slice():e.from(t)}function S5({x:t,x1:e,x2:n}){return t!==void 0||e!==void 0||n!==void 0}function cg({y:t,y1:e,y2:n}){return t!==void 0||e!==void 0||n!==void 0}function T5(t){return S5(t)||cg(t)||t.interval!==void 0}function ti(t){return(t==null?void 0:t.toString)===_5}function xs(t){return ti(t)&&(t.type!==void 0||t.domain!==void 0)}function kl(t){return ti(t)&&typeof t.transform!="function"}function ir(t){return kl(t)&&t.value===void 0&&t.channel===void 0}function C5(t,e,n,i=oe){return e===void 0&&n===void 0?(e=0,n=t===void 0?i:t):e===void 0?e=t===void 0?0:t:n===void 0&&(n=t===void 0?0:t),[e,n]}function Ml(t,e){return t===void 0&&e===void 0?[pu,vs]:[t,e]}function gu({z:t,fill:e,stroke:n}={}){return t===void 0&&([t]=$n(e)),t===void 0&&([t]=$n(n)),t}function An(t){const e=t.length,n=new Uint32Array(e);for(let i=0;i<e;++i)n[i]=i;return n}function bu(t,e){return Yt(e,n=>t[n],t.constructor)}function $5(t,e,n){return t.subarray?t.subarray(e,n):t.slice(e,n)}function si(t){return t!==null&&typeof t=="object"?t.valueOf():t}function A5(t,e){if(e[t]!==void 0)return e[t];switch(t){case"x1":case"x2":t="x";break;case"y1":case"y2":t="y";break}return e[t]}function Ya(t){let e;return[{transform:()=>e,label:$i(t)},n=>e=n]}function _n(t){return t==null?[t]:Ya(t)}function $i(t,e){return typeof t=="string"?t:t&&t.label!==void 0?t.label:e}function ks(t,e){return{transform(n){const i=t.transform(n),r=e.transform(n);return ve(i)||ve(r)?Yt(i,(o,a)=>new Date((+i[a]+ +r[a])/2)):Yt(i,(o,a)=>(+i[a]+ +r[a])/2,Float64Array)},label:t.label}}function hg(t,e){const n=dg(e==null?void 0:e.interval,e==null?void 0:e.type);return n?Yt(t,n):t}function dg(t,e){const n=_u(t,e);return n&&(i=>Zn(i)?n.floor(i):i)}function _u(t,e){if(t!=null){if(typeof t=="number"){0<t&&t<1&&Number.isInteger(1/t)&&(t=-1/t);const n=Math.abs(t);return t<0?{floor:i=>Math.floor(i*n)/n,offset:i=>(i*n+1)/n,range:(i,r)=>zf(Math.ceil(i*n),r*n).map(o=>o/n)}:{floor:i=>Math.floor(i/n)*n,offset:i=>i+n,range:(i,r)=>zf(Math.ceil(i/n),r/n).map(o=>o*n)}}if(typeof t=="string")return(e==="time"?og:du)(t);if(typeof t.floor!="function")throw new Error("invalid interval; missing floor method");if(typeof t.offset!="function")throw new Error("invalid interval; missing offset method");return t}}function hr(t,e){if(t=_u(t,e),t&&typeof t.range!="function")throw new Error("invalid interval: missing range method");return t}function E5(t,e){if(t=hr(t,e),t&&typeof t.ceil!="function")throw new Error("invalid interval: missing ceil method");return t}function N5(t){return Ui(t)&&typeof(t==null?void 0:t.floor)=="function"&&t.floor()instanceof Date}function Ui(t){return typeof(t==null?void 0:t.range)=="function"}function ko(t){return t===void 0||kl(t)?t:{value:t}}function D5(t){return t==null?null:{transform:e=>Kt(e,t,Float64Array),label:$i(t)}}function ei(t){return t&&typeof t[Symbol.iterator]=="function"}function pg(t){for(const e of t)if(e!=null)return typeof e!="object"||e instanceof Date}function ph(t){for(const e of t){if(e==null)continue;const n=typeof e;return n==="string"||n==="boolean"}}function ve(t){for(const e of t)if(e!=null)return e instanceof Date}function F5(t){for(const e of t)if(e!=null)return typeof e=="string"&&isNaN(e)&&ng(e)}function L5(t){for(const e of t)if(e!=null){if(typeof e!="string")return!1;if(e.trim())return!isNaN(e)}}function I5(t){for(const e of t)if(e!=null)return typeof e=="number"}function gf(t,e){let n;for(const i of t)if(i!=null){if(!e(i))return!1;n=!0}return n}const R5=new Set("none,currentcolor,transparent,aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkgrey,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkslategrey,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dimgrey,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,grey,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgray,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightslategrey,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,rebeccapurple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,slategrey,snow,springgreen,steelblue,tan,teal,thistle,tomato,turquoise,violet,wheat,white,whitesmoke,yellow".split(","));function Sl(t){return typeof t!="string"?!1:(t=t.toLowerCase().trim(),/^#[0-9a-f]{3,8}$/.test(t)||/^(?:url|var|rgb|rgba|hsl|hsla|hwb|lab|lch|oklab|oklch|color|color-mix)\(.*\)$/.test(t)||R5.has(t))}function P5(t){return typeof t=="number"&&(0<=t&&t<=1||isNaN(t))}function de(t){return t==null||Jr(t)}function Jr(t){return/^\s*none\s*$/i.test(t)}function O5(t){return/^\s*round\s*$/i.test(t)}function Ms(t,e){return ug(t,e,["middle","top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"])}function Tl(t="middle"){return Ms(t,"frameAnchor")}function rr(t){if(t==null)return;const e=t[0],n=t[t.length-1];return ro(e,n)}function U5(t={},...e){let n=t;for(const i of e)for(const r in i)if(n[r]===void 0){const o=i[r];n===t?n={...n,[r]:o}:n[r]=o}return n}function z5(t){console.warn("named iterables are deprecated; please use an object instead");const e=new Set;return Object.fromEntries(Array.from(t,n=>{const{name:i}=n;if(i==null)throw new Error("missing name");const r=`${i}`;if(r==="__proto__")throw new Error(`illegal name: ${r}`);if(e.has(r))throw new Error(`duplicate name: ${r}`);return e.add(r),[i,n]}))}function mg(t){return ei(t)?z5(t):t}const on=Symbol("position"),En=Symbol("color"),Mo=Symbol("radius"),So=Symbol("length"),To=Symbol("opacity"),Cl=Symbol("symbol"),gg=Symbol("projection"),zt=new Map([["x",on],["y",on],["fx",on],["fy",on],["r",Mo],["color",En],["opacity",To],["symbol",Cl],["length",So],["projection",gg]]);function B5(t){return t===on||t===gg}function q5(t){return t===on||t===Mo||t===So||t===To}const W5=Math.sqrt(3),Y5=2/W5,H5={draw(t,e){const n=Math.sqrt(e/Math.PI),i=n*Y5,r=i/2;t.moveTo(0,i),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(0,-i),t.lineTo(-n,-r),t.lineTo(-n,r),t.closePath()}},yu=new Map([["asterisk",Nm],["circle",Zr],["cross",Dm],["diamond",Lm],["diamond2",Im],["hexagon",H5],["plus",Rm],["square",Pm],["square2",Om],["star",zm],["times",Ym],["triangle",Bm],["triangle2",qm],["wye",Wm]]);function wu(t){return t&&typeof t.draw=="function"}function V5(t){return wu(t)?!0:typeof t!="string"?!1:yu.has(t.toLowerCase())}function vu(t){if(t==null||wu(t))return t;const e=yu.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid symbol: ${t}`)}function G5(t){if(t==null||wu(t))return[void 0,t];if(typeof t=="string"){const e=yu.get(`${t}`.toLowerCase());if(e)return[void 0,e]}return[t,void 0]}function $l({filter:t,sort:e,reverse:n,transform:i,initializer:r,...o}={},a){if(i===void 0&&(t!=null&&(i=bg(t)),e!=null&&!ir(e)&&(i=bf(i,xu(e))),n&&(i=bf(i,_g))),a!=null&&r!=null)throw new Error("transforms cannot be applied after initializers");return{...o,...(e===null||ir(e))&&{sort:e},transform:bf(i,a)}}function or({filter:t,sort:e,reverse:n,initializer:i,...r}={},o){return i===void 0&&(t!=null&&(i=bg(t)),e!=null&&!ir(e)&&(i=_f(i,xu(e))),n&&(i=_f(i,_g))),{...r,...(e===null||ir(e))&&{sort:e},initializer:_f(i,o)}}function bf(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r){return{data:n,facets:i}=t.call(this,n,i,r),e.call(this,Se(n),i,r)}}function _f(t,e){return t==null?e===null?void 0:e:e==null?t===null?void 0:t:function(n,i,r,...o){let a,l,f,s,u,c;return{data:l=n,facets:f=i,channels:a}=t.call(this,n,i,r,...o),{data:u=l,facets:c=f,channels:s}=e.call(this,l,f,{...r,...a},...o),{data:u,facets:c,channels:{...a,...s}}}}function X5(t,e){return(t.initializer!=null?or:$l)(t,e)}function bg(t){return(e,n)=>{const i=Kt(e,t);return{data:e,facets:n.map(r=>r.filter(o=>i[o]))}}}function _g(t,e){return{data:t,facets:e.map(n=>n.slice().reverse())}}function j5(t,{sort:e,...n}={}){return{...(kl(t)&&t.channel!==void 0?or:X5)(n,xu(t)),sort:ir(e)?e:null}}function xu(t){return(typeof t=="function"&&t.length!==1?Z5:K5)(t)}function Z5(t){return(e,n)=>{const i=(r,o)=>t(e[r],e[o]);return{data:e,facets:n.map(r=>r.slice().sort(i))}}}function K5(t){let e,n;({channel:e,value:t,order:n}={...ko(t)});const i=e==null?void 0:e.startsWith("-");if(i&&(e=e.slice(1)),n===void 0&&(n=i?Wa:Ge),typeof n!="function")switch(`${n}`.toLowerCase()){case"ascending":n=Ge;break;case"descending":n=Wa;break;default:throw new Error(`invalid order: ${n}`)}return(r,o,a)=>{let l;if(e===void 0)l=Kt(r,t);else{if(a===void 0)throw new Error("channel sort requires an initializer");if(l=a[e],!l)return{};l=l.value}const f=(s,u)=>n(l[s],l[u]);return{data:r,facets:o.map(s=>s.slice().sort(f))}}}function Ho(t,...e){for(const{name:n}of t)if(e.includes(n))return!0;return!1}function Q5(t,e,n=yg){const i=Object.entries(t);return e.title!=null&&t.title===void 0&&i.push(["title",o8]),e.href!=null&&t.href===void 0&&i.push(["href",Mu]),i.filter(([,r])=>r!==void 0).map(([r,o])=>o===null?J5(r):n(r,o,e))}function yg(t,e,n,i=wg){let r;ti(e)&&"reduce"in e&&(r=e.scale,e=e.reduce);const o=i(t,e,n),[a,l]=Ya(o.label);let f;return{name:t,output:r===void 0?a:{value:a,scale:r},initialize(s){o.initialize(s),f=l([])},scope(s,u){o.scope(s,u)},reduce(s,u){f.push(o.reduce(s,u))}}}function J5(t){return{name:t,initialize(){},scope(){},reduce(){}}}function wg(t,e,n,i=ku){const r=A5(t,n),o=i(e,r);let a,l;return{label:$i(o===Ha?null:r,o.label),initialize(f){a=r===void 0?f:Kt(f,r),o.scope==="data"&&(l=o.reduceIndex(An(f),a))},scope(f,s){o.scope===f&&(l=o.reduceIndex(s,a))},reduce(f,s){return o.scope==null?o.reduceIndex(f,a,s):o.reduceIndex(f,a,l,s)}}}function mh(t,e){return e?Br(Ka(t,n=>e[n]),pu):[[,t]]}function ku(t,e,n=t8){if(t==null)return n(t);if(typeof t.reduceIndex=="function")return t;if(typeof t.reduce=="function"&&ti(t))return i8(t);if(typeof t=="function")return r8(t);if(/^p\d{2}$/i.test(t))return yn(k5(t));switch(`${t}`.toLowerCase()){case"first":return Mu;case"last":return a8;case"identity":return vg;case"count":return Ha;case"distinct":return l8;case"sum":return e==null?Ha:f8;case"proportion":return bh(e,"data");case"proportion-facet":return bh(e,"facet");case"deviation":return yn(oo);case"min":return yn(Mn);case"min-index":return yn(e_);case"max":return yn(ye);case"max-index":return yn(t_);case"mean":return gh(Vn);case"median":return gh(Uf);case"variance":return yn(Vi);case"mode":return yn(o_)}return n(t)}function t8(t){throw new Error(`invalid reduce: ${t}`)}function e8(t,e){for(const n in e){const i=e[n];if(i!==void 0&&!t.some(r=>r.name===n))return i}}function n8(t,e,n){if(e){const i=e.output.transform(),r=(o,a)=>Ge(i[o],i[a]);t.forEach(o=>o.sort(r))}n&&t.forEach(i=>i.reverse())}function i8(t){return console.warn("deprecated reduce interface; implement reduceIndex instead."),{...t,reduceIndex:t.reduce.bind(t)}}function r8(t){return{reduceIndex(e,n,i){return t(bu(n,e),i)}}}function yn(t){return{reduceIndex(e,n){return t(e,i=>n[i])}}}function gh(t){return{reduceIndex(e,n){const i=t(e,r=>n[r]);return ve(n)?new Date(i):i}}}const vg={reduceIndex(t,e){return bu(e,t)}},Mu={reduceIndex(t,e){return e[t[0]]}},o8={reduceIndex(t,e){const i=Br(Bi(t,o=>o.length,o=>e[o]),vs),r=i.slice(-5).reverse();if(r.length<i.length){const o=i.slice(0,-4);r[4]=[` ${o.length.toLocaleString("en-US")} more`,Gn(o,vs)]}return r.map(([o,a])=>`${o} (${a.toLocaleString("en-US")})`).join(`
`)}},a8={reduceIndex(t,e){return e[t[t.length-1]]}},Ha={label:"Frequency",reduceIndex(t){return t.length}},l8={label:"Distinct",reduceIndex(t,e){const n=new Za;for(const i of t)n.add(e[i]);return n.size}},f8=yn(Gn);function bh(t,e){return t==null?{scope:e,label:"Frequency",reduceIndex:(n,i,r=1)=>n.length/r}:{scope:e,reduceIndex:(n,i,r=1)=>Gn(n,o=>i[o])/r}}function to(t,{scale:e,type:n,value:i,filter:r,hint:o,label:a=$i(i)},l){return o===void 0&&typeof(i==null?void 0:i.transform)=="function"&&(o=i.hint),xg(l,{scale:e,type:n,value:Kt(t,i),label:a,filter:r,hint:o})}function s8(t,e){return Object.fromEntries(Object.entries(t).map(([n,i])=>[n,to(e,i,n)]))}function u8(t,e){const n=Object.fromEntries(Object.entries(t).map(([i,{scale:r,value:o}])=>{const a=r==null?null:e[r];return[i,a==null?o:Yt(o,a)]}));return n.channels=t,n}function xg(t,e){const{scale:n,value:i}=e;if(n===!0||n==="auto")switch(t){case"fill":case"stroke":case"color":e.scale=n!==!0&&gf(i,Sl)?null:"color";break;case"fillOpacity":case"strokeOpacity":case"opacity":e.scale=n!==!0&&gf(i,P5)?null:"opacity";break;case"symbol":n!==!0&&gf(i,V5)?(e.scale=null,e.value=Yt(i,vu)):e.scale="symbol";break;default:e.scale=zt.has(t)?t:null;break}else if(n===!1)e.scale=null;else if(n!=null&&!zt.has(n))throw new Error(`unknown scale: ${n}`);return e}function c8(t,e,n,i,r){const{order:o,reverse:a,reduce:l=!0,limit:f}=r;for(const s in r){if(!zt.has(s))continue;let{value:u,order:c=o,reverse:h=a,reduce:p=l,limit:d=f}=ko(r[s]);const m=u==null?void 0:u.startsWith("-");if(m&&(u=u.slice(1)),c=c===void 0?m!==(u==="width"||u==="height")?Mg:kg:p8(c),p==null||p===!1)continue;const g=s==="fx"||s==="fy"?d8(e,i[s]):h8(n,s);if(!g)throw new Error(`missing channel for scale: ${s}`);const _=g.value,[b=0,v=1/0]=ei(d)?d:d<0?[d]:[0,d];if(u==null)g.domain=()=>{let w=Array.from(new Za(_));return h&&(w=w.reverse()),(b!==0||v!==1/0)&&(w=w.slice(b,v)),w};else{const w=u==="data"?t:u==="height"?_h(n,"y1","y2"):u==="width"?_h(n,"x1","x2"):Ss(n,u,u==="y"?"y2":u==="x"?"x2":void 0),x=ku(p===!0?"max":p,w);g.domain=()=>{let k=Xb(An(_),S=>x.reduceIndex(S,w),S=>_[S]);return c&&k.sort(c),h&&k.reverse(),(b!==0||v!==1/0)&&(k=k.slice(b,v)),k.map(pu)}}}}function h8(t,e){for(const n in t){const i=t[n];if(i.scale===e)return i}}function d8(t,e){const n=t.original;if(n===t)return e;const i=e.value,r=e.value=[];for(let o=0;o<n.length;++o){const a=i[n[o][0]];for(const l of t[o])r[l]=a}return e}function _h(t,e,n){const i=Ss(t,e),r=Ss(t,n);return Yt(r,(o,a)=>Math.abs(o-i[a]),Float64Array)}function Ss(t,e,n){let i=t[e];if(!i&&n!==void 0&&(i=t[n]),i)return i.value;throw new Error(`missing channel: ${e}`)}function p8(t){if(t==null||typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"ascending":return kg;case"descending":return Mg}throw new Error(`invalid order: ${t}`)}function kg([t,e],[n,i]){return Ge(e,i)||Ge(t,n)}function Mg([t,e],[n,i]){return Wa(e,i)||Ge(t,n)}function yh(t,e){let n=t[e];if(n){for(;n.source;)n=n.source;return n.source===null?null:n}}function m8(t){let e,n;return(...i)=>(((n==null?void 0:n.length)!==i.length||n.some((r,o)=>r!==i[o]))&&(n=i,e=t(...i)),e)}const g8=m8(t=>new Intl.NumberFormat(t));function b8(t="en-US"){const e=g8(t);return n=>n!=null&&!isNaN(n)?e.format(n):void 0}function _8(t){return c5(t,"Invalid Date")}function y8(t="en-US"){const e=b8(t);return n=>(n instanceof Date?_8:typeof n=="number"?e:le)(n)}const Mi=y8();let Ts=0,Cs;function w8(){const t=Ts;return Ts=0,Cs=void 0,t}function Bn(t){t!==Cs&&(Cs=t,console.warn(t),++Ts)}const me=(typeof window<"u"?window.devicePixelRatio>1:typeof it>"u")?0:.5;let v8=0;function wh(){return`plot-clip-${++v8}`}function x8(t,{title:e,href:n,ariaLabel:i,ariaDescription:r,ariaHidden:o,target:a,fill:l,fillOpacity:f,stroke:s,strokeWidth:u,strokeOpacity:c,strokeLinejoin:h,strokeLinecap:p,strokeMiterlimit:d,strokeDasharray:m,strokeDashoffset:g,opacity:_,mixBlendMode:b,imageFilter:v,paintOrder:w,pointerEvents:x,shapeRendering:k,channels:S},{ariaLabel:T,fill:A="currentColor",fillOpacity:F,stroke:C="none",strokeOpacity:I,strokeWidth:L,strokeLinecap:G,strokeLinejoin:$,strokeMiterlimit:B,paintOrder:z}){A===null&&(l=null,f=null),C===null&&(s=null,c=null),de(A)?!de(C)&&(!de(l)||S!=null&&S.fill)&&(C="none"):de(C)&&(!de(s)||S!=null&&S.stroke)&&(A="none");const[Z,Q]=$n(l,A),[W,U]=fe(f,F),[Y,K]=$n(s,C),[ft,et]=fe(c,I),[j,q]=fe(_);Jr(K)||(u===void 0&&(u=L),p===void 0&&(p=G),h===void 0&&(h=$),d===void 0&&!O5(h)&&(d=B),!Jr(Q)&&w===void 0&&(w=z));const[N,E]=fe(u);return A!==null&&(t.fill=ee(Q,"currentColor"),t.fillOpacity=kr(U,1)),C!==null&&(t.stroke=ee(K,"none"),t.strokeWidth=kr(E,1),t.strokeOpacity=kr(et,1),t.strokeLinejoin=ee(h,"miter"),t.strokeLinecap=ee(p,"butt"),t.strokeMiterlimit=kr(d,4),t.strokeDasharray=ee(m,"none"),t.strokeDashoffset=ee(g,"0")),t.target=le(a),t.ariaLabel=le(T),t.ariaDescription=le(r),t.ariaHidden=le(o),t.opacity=kr(q,1),t.mixBlendMode=ee(b,"normal"),t.imageFilter=ee(v,"none"),t.paintOrder=ee(w,"normal"),t.pointerEvents=ee(x,"auto"),t.shapeRendering=ee(k,"auto"),{title:{value:e,optional:!0,filter:null},href:{value:n,optional:!0,filter:null},ariaLabel:{value:i,optional:!0,filter:null},fill:{value:Z,scale:"auto",optional:!0},fillOpacity:{value:W,scale:"auto",optional:!0},stroke:{value:Y,scale:"auto",optional:!0},strokeOpacity:{value:ft,scale:"auto",optional:!0},strokeWidth:{value:N,optional:!0},opacity:{value:j,scale:"auto",optional:!0}}}function k8(t,e){e&&t.filter(n=>su(e[n])).append("title").call(S8,e)}function M8(t,e){e&&t.filter(([n])=>su(e[n])).append("title").call(T8,e)}function S8(t,e){e&&t.text(n=>Mi(e[n]))}function T8(t,e){e&&t.text(([n])=>Mi(e[n]))}function Nn(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&_t(t,"aria-label",h=>i[h]),o&&_t(t,"fill",h=>o[h]),a&&_t(t,"fill-opacity",h=>a[h]),l&&_t(t,"stroke",h=>l[h]),f&&_t(t,"stroke-opacity",h=>f[h]),s&&_t(t,"stroke-width",h=>s[h]),u&&_t(t,"opacity",h=>u[h]),c&&$g(t,h=>c[h],e),n||k8(t,r)}function Sg(t,{target:e,tip:n},{ariaLabel:i,title:r,fill:o,fillOpacity:a,stroke:l,strokeOpacity:f,strokeWidth:s,opacity:u,href:c}){i&&_t(t,"aria-label",([h])=>i[h]),o&&_t(t,"fill",([h])=>o[h]),a&&_t(t,"fill-opacity",([h])=>a[h]),l&&_t(t,"stroke",([h])=>l[h]),f&&_t(t,"stroke-opacity",([h])=>f[h]),s&&_t(t,"stroke-width",([h])=>s[h]),u&&_t(t,"opacity",([h])=>u[h]),c&&$g(t,([h])=>c[h],e),n||M8(t,r)}function C8({ariaLabel:t,title:e,fill:n,fillOpacity:i,stroke:r,strokeOpacity:o,strokeWidth:a,opacity:l,href:f},{tip:s}){return[t,s?void 0:e,n,i,r,o,a,l,f].filter(u=>u!==void 0)}function $8(t,e,n){const i=Ka(t,r=>e[r]);return n===void 0&&i.size>1+t.length>>1&&Bn("Warning: the implicit z channel has high cardinality. This may occur when the fill or stroke channel is associated with quantitative data rather than ordinal or categorical data. You can suppress this warning by setting the z option explicitly; if this data represents a single series, set z to null."),i.values()}function*Tg(t,e,n,i){const{z:r}=n,{z:o}=i,a=C8(i,n),l=[...e,...a];for(const f of o?$8(t,o,r):[t]){let s,u;t:for(const c of f){for(const h of l)if(!Zn(h[c])){u&&u.push(-1);continue t}if(s===void 0){u&&(yield u),s=a.map(h=>si(h[c])),u=[c];continue}u.push(c);for(let h=0;h<a.length;++h)if(si(a[h][c])!==s[h]){yield u,s=a.map(d=>si(d[c])),u=[c];continue t}}u&&(yield u)}}function Cg(t){return t===!0?t="frame":t===!1?t=null:t!=null&&(t=Ze(t,"clip",["frame","sphere"])),t}function A8(t,e,n,i){let r;const{clip:o=i.clip}=e;switch(o){case"frame":{const{width:a,height:l,marginLeft:f,marginRight:s,marginTop:u,marginBottom:c}=n,h=wh();r=`url(#${h})`,t=qt("svg:g",i).call(p=>p.append("svg:clipPath").attr("id",h).append("rect").attr("x",f).attr("y",u).attr("width",a-s-f).attr("height",l-u-c)).each(function(){this.appendChild(t.node()),t.node=()=>this});break}case"sphere":{const{projection:a}=i;if(!a)throw new Error('the "sphere" clip option requires a projection');const l=wh();r=`url(#${l})`,t.append("clipPath").attr("id",l).append("path").attr("d",al(a)({type:"Sphere"}));break}}_t(t,"aria-label",e.ariaLabel),_t(t,"aria-description",e.ariaDescription),_t(t,"aria-hidden",e.ariaHidden),_t(t,"clip-path",r)}function Re(t,e,n,i){A8(t,e,n,i),_t(t,"fill",e.fill),_t(t,"fill-opacity",e.fillOpacity),_t(t,"stroke",e.stroke),_t(t,"stroke-width",e.strokeWidth),_t(t,"stroke-opacity",e.strokeOpacity),_t(t,"stroke-linejoin",e.strokeLinejoin),_t(t,"stroke-linecap",e.strokeLinecap),_t(t,"stroke-miterlimit",e.strokeMiterlimit),_t(t,"stroke-dasharray",e.strokeDasharray),_t(t,"stroke-dashoffset",e.strokeDashoffset),_t(t,"shape-rendering",e.shapeRendering),_t(t,"filter",e.imageFilter),_t(t,"paint-order",e.paintOrder);const{pointerEvents:r=i.pointerSticky===!1?"none":void 0}=e;_t(t,"pointer-events",r)}function Pe(t,e){E8(t,"mix-blend-mode",e.mixBlendMode),_t(t,"opacity",e.opacity)}function $g(t,e,n){t.each(function(i){const r=e(i);if(r!=null){const o=this.ownerDocument.createElementNS(Xi.svg,"a");o.setAttribute("fill","inherit"),o.setAttributeNS(Xi.xlink,"href",r),n!=null&&o.setAttribute("target",n),this.parentNode.insertBefore(o,this).appendChild(this)}})}function _t(t,e,n){n!=null&&t.attr(e,n)}function E8(t,e,n){n!=null&&t.style(e,n)}function Te(t,e,{x:n,y:i},r=me,o=me){r+=e.dx,o+=e.dy,n!=null&&n.bandwidth&&(r+=n.bandwidth()/2),i!=null&&i.bandwidth&&(o+=i.bandwidth()/2),(r||o)&&t.attr("transform",`translate(${r},${o})`)}function ee(t,e){if((t=le(t))!==e)return t}function kr(t,e){if((t=Lt(t))!==e)return t}const N8=/^-?([_a-z]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])([_a-z0-9-]|[\240-\377]|\\[0-9a-f]{1,6}(\r\n|[ \t\r\n\f])?|\\[^\r\n\f0-9a-f])*$/i;function Su(t){if(t===void 0)return"plot-d6a7b5";if(t=`${t}`,!N8.test(t))throw new Error(`invalid class name: ${t}`);return t}function Tu(t,e){if(typeof e=="string")t.property("style",e);else if(e!=null)for(const n of t)Object.assign(n.style,e)}function Co({frameAnchor:t},{width:e,height:n,marginTop:i,marginRight:r,marginBottom:o,marginLeft:a}){return[/left$/.test(t)?a:/right$/.test(t)?e-r:(a+e-r)/2,/^top/.test(t)?i:/^bottom/.test(t)?n-o:(i+n-o)/2]}function Cu(t={}){const{document:e=typeof window<"u"?window.document:void 0,clip:n}=t;return{document:e,clip:Cg(n)}}function qt(t,{document:e}){return Ir(tl(t).call(e.documentElement))}const Ag=Math.PI,mn=2*Ag,vh=.618;function D8({projection:t,inset:e=0,insetTop:n=e,insetRight:i=e,insetBottom:r=e,insetLeft:o=e}={},a){if(t==null)return;if(typeof t.stream=="function")return t;let l,f,s="frame";if(ti(t)){let x;if({type:t,domain:f,inset:x,insetTop:n=x!==void 0?x:n,insetRight:i=x!==void 0?x:i,insetBottom:r=x!==void 0?x:r,insetLeft:o=x!==void 0?x:o,clip:s=s,...l}=t,t==null)return}typeof t!="function"&&({type:t}=Eg(t));const{width:u,height:c,marginLeft:h,marginRight:p,marginTop:d,marginBottom:m}=a,g=u-h-p-o-i,_=c-d-m-n-r;if(t=t==null?void 0:t({width:g,height:_,clip:s,...l}),t==null)return;s=F8(s,h,d,u-p,c-m);let b=h+o,v=d+n,w;if(f!=null){const[[x,k],[S,T]]=al(t).bounds(f),A=Math.min(g/(S-x),_/(T-k));A>0?(b-=(A*(x+S)-g)/2,v-=(A*(k+T)-_)/2,w=ds({point(F,C){this.stream.point(F*A+b,C*A+v)}})):Bn("Warning: the projection could not be fit to the specified domain; using the default scale.")}return w??(w=b===0&&v===0?Ng():ds({point(x,k){this.stream.point(x+b,k+v)}})),{stream:x=>t.stream(w.stream(s(x)))}}function Eg(t){switch(`${t}`.toLowerCase()){case"albers-usa":return ze(q3,.7463,.4673);case"albers":return Vo(E1,.7463,.4673);case"azimuthal-equal-area":return ze(W3,4,4);case"azimuthal-equidistant":return ze(Y3,mn,mn);case"conic-conformal":return Vo(G3,mn,mn);case"conic-equal-area":return Vo(Da,6.1702,2.9781);case"conic-equidistant":return Vo(Z3,7.312,3.6282);case"equal-earth":return ze(Q3,5.4133,2.6347);case"equirectangular":return ze(X3,mn,Ag);case"gnomonic":return ze(J3,3.4641,3.4641);case"identity":return{type:Ng};case"reflect-y":return{type:L8};case"mercator":return ze(H3,mn,mn);case"orthographic":return ze(t6,2,2);case"stereographic":return ze(e6,2,2);case"transverse-mercator":return ze(n6,mn,mn);default:throw new Error(`unknown projection type: ${t}`)}}function F8(t,e,n,i,r){if(t===!1||t==null||typeof t=="number")return o=>o;switch(t===!0&&(t="frame"),`${t}`.toLowerCase()){case"frame":return p1(e,n,i,r);default:throw new Error(`unknown projection clip type: ${t}`)}}function ze(t,e,n){return{type:({width:i,height:r,rotate:o,precision:a=.15,clip:l})=>{var s,u,c;const f=t();return a!=null&&((s=f.precision)==null||s.call(f,a)),o!=null&&((u=f.rotate)==null||u.call(f,o)),typeof l=="number"&&((c=f.clipAngle)==null||c.call(f,l)),f.scale(Math.min(i/e,r/n)),f.translate([i/2,r/2]),f},aspectRatio:n/e}}function Vo(t,e,n){const{type:i,aspectRatio:r}=ze(t,e,n);return{type:o=>{const{parallels:a,domain:l,width:f,height:s}=o,u=i(o);return a!=null&&(u.parallels(a),l===void 0&&u.fitSize([f,s],{type:"Sphere"})),u},aspectRatio:r}}const Ng=xo({stream:t=>t}),L8=xo(ds({point(t,e){this.stream.point(t,-e)}}));function I8(t,e,n,i){const r=n[t],o=n[e],a=r.length,l=n[t]=new Float64Array(a).fill(NaN),f=n[e]=new Float64Array(a).fill(NaN);let s;const u=i.stream({point(c,h){l[s]=c,f[s]=h}});for(s=0;s<a;++s)u.point(r[s],o[s])}function R8({projection:t}={}){return t==null?!1:typeof t.stream=="function"?!0:(ti(t)&&(t=t.type),t!=null)}function P8(t){if(typeof(t==null?void 0:t.stream)=="function")return vh;if(ti(t)&&(t=t.type),t!=null){if(typeof t!="function"){const{aspectRatio:e}=Eg(t);if(e)return e}return vh}}function O8(t){const e=[],n=[],i={scale:"x",value:e},r={scale:"y",value:n},o={point(a,l){e.push(a),n.push(l)},lineStart(){},lineEnd(){},polygonStart(){},polygonEnd(){},sphere(){}};for(const a of t.value)ai(a,o);return[i,r]}const U8=["#4269d0","#efb118","#ff725c","#6cc5b0","#3ca951","#ff8ab7","#a463f2","#97bbf5","#9c6b4e","#9498a0"],Dg=new Map([["accent",S4],["category10",M4],["dark2",T4],["observable10",U8],["paired",C4],["pastel1",$4],["pastel2",A4],["set1",E4],["set2",N4],["set3",D4],["tableau10",F4]]);function z8(t){return t!=null&&Dg.has(`${t}`.toLowerCase())}const xh=new Map([...Dg,["brbg",gn(gp,bp)],["prgn",gn(_p,yp)],["piyg",gn(wp,vp)],["puor",gn(xp,kp)],["rdbu",gn(_s,Ra)],["rdgy",gn(Mp,Sp)],["rdylbu",gn(ys,Pa)],["rdylgn",gn(Tp,Cp)],["spectral",gn($p,Ap)],["burd",kh(_s,Ra)],["buylrd",kh(ys,Pa)],["blues",Xt(tm,em)],["greens",Xt(nm,im)],["greys",Xt(rm,om)],["oranges",Xt(um,cm)],["purples",Xt(am,lm)],["reds",Xt(fm,sm)],["turbo",bn(_m)],["viridis",bn(ym)],["magma",bn(wm)],["inferno",bn(vm)],["plasma",bn(xm)],["cividis",bn(hm)],["cubehelix",bn(dm)],["warm",bn(pm)],["cool",bn(mm)],["bugn",Xt(Ep,Np)],["bupu",Xt(Dp,Fp)],["gnbu",Xt(Lp,Ip)],["orrd",Xt(Rp,Pp)],["pubu",Xt(zp,Bp)],["pubugn",Xt(Op,Up)],["purd",Xt(qp,Wp)],["rdpu",Xt(Yp,Hp)],["ylgn",Xt(Xp,jp)],["ylgnbu",Xt(Vp,Gp)],["ylorbr",Xt(Zp,Kp)],["ylorrd",Xt(Qp,Jp)],["rainbow",Mh(gm)],["sinebow",Mh(bm)]]);function Xt(t,e){return({length:n})=>n===1?[t[3][1]]:n===2?[t[3][1],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>9?Ye(e,n):t[n])}function gn(t,e){return({length:n})=>n===2?[t[3][0],t[3][2]]:(n=Math.max(3,Math.floor(n)),n>11?Ye(e,n):t[n])}function kh(t,e){return({length:n})=>n===2?[t[3][2],t[3][0]]:(n=Math.max(3,Math.floor(n)),n>11?Ye(i=>e(1-i),n):t[n].slice().reverse())}function bn(t){return({length:e})=>Ye(t,Math.max(2,Math.floor(e)))}function Mh(t){return({length:e})=>Ye(t,Math.floor(e)+1).slice(0,-1)}function Fg(t){const e=`${t}`.toLowerCase();if(!xh.has(e))throw new Error(`unknown ordinal scheme: ${e}`);return xh.get(e)}function Al(t,e){const n=Fg(t),i=typeof n=="function"?n({length:e}):n;return i.length!==e?i.slice(0,e):i}function B8(t,e="greys"){const n=new Set,[i,r]=Al(e,2);for(const o of t)if(o!=null)if(o===!0)n.add(r);else if(o===!1)n.add(i);else return;return[...n]}const Sh=new Map([["brbg",bp],["prgn",yp],["piyg",vp],["puor",kp],["rdbu",Ra],["rdgy",Sp],["rdylbu",Pa],["rdylgn",Cp],["spectral",Ap],["burd",t=>Ra(1-t)],["buylrd",t=>Pa(1-t)],["blues",em],["greens",im],["greys",om],["purples",lm],["reds",sm],["oranges",cm],["turbo",_m],["viridis",ym],["magma",wm],["inferno",vm],["plasma",xm],["cividis",hm],["cubehelix",dm],["warm",pm],["cool",mm],["bugn",Np],["bupu",Fp],["gnbu",Ip],["orrd",Pp],["pubugn",Up],["pubu",Bp],["purd",Wp],["rdpu",Hp],["ylgnbu",Gp],["ylgn",jp],["ylorbr",Kp],["ylorrd",Jp],["rainbow",gm],["sinebow",bm]]);function $u(t){const e=`${t}`.toLowerCase();if(!Sh.has(e))throw new Error(`unknown quantitative scheme: ${e}`);return Sh.get(e)}const q8=new Set(["brbg","prgn","piyg","puor","rdbu","rdgy","rdylbu","rdylgn","spectral","burd","buylrd"]);function W8(t){return t!=null&&q8.has(`${t}`.toLowerCase())}const Lg=t=>e=>t(1-e),yf=[0,1],Th=new Map([["number",ne],["rgb",yi],["hsl",Ew],["hcl",Fw],["lab",Nw]]);function Ig(t){const e=`${t}`.toLowerCase();if(!Th.has(e))throw new Error(`unknown interpolator: ${e}`);return Th.get(e)}function $o(t,e,n,{type:i,nice:r,clamp:o,zero:a,domain:l=Pg(t,n),unknown:f,round:s,scheme:u,interval:c,range:h=zt.get(t)===Mo?t7(n,l):zt.get(t)===So?e7(n,l):zt.get(t)===To?yf:void 0,interpolate:p=zt.get(t)===En?u==null&&h!==void 0?yi:$u(u!==void 0?u:i==="cyclical"?"rainbow":"turbo"):s?Ws:ne,reverse:d}){if(c=hr(c,i),(i==="cyclical"||i==="sequential")&&(i="linear"),typeof p!="function"&&(p=Ig(p)),d=!!d,h!==void 0){const m=(l=Se(l)).length,g=(h=Se(h)).length;if(m!==g){if(p.length===1)throw new Error("invalid piecewise interpolator");p=il(p,h),h=void 0}}if(p.length===1?(d&&(p=Lg(p),d=!1),h===void 0&&(h=Float64Array.from(l,(m,g)=>g/(l.length-1)),h.length===2&&(h=yf)),e.interpolate((h===yf?xo:Eu)(p))):e.interpolate(p),a){const[m,g]=Ae(l);(m>0||g<0)&&(l=Qr(l),rr(l)!==Math.sign(m)?l[l.length-1]=0:l[0]=0)}return d&&(l=pa(l)),e.domain(l).unknown(f),r&&(e.nice(Y8(r,i)),l=e.domain()),h!==void 0&&e.range(h),o&&e.clamp(o),{type:i,domain:l,range:h,scale:e,interpolate:p,interval:c}}function Y8(t,e){return t===!0?void 0:typeof t=="number"?t:E5(t,e)}function H8(t,e,n){return $o(t,tu(),e,n)}function V8(t,e,n){return Rg(t,e,{...n,exponent:.5})}function Rg(t,e,{exponent:n=1,...i}){return $o(t,j1().exponent(n),e,{...i,type:"pow"})}function G8(t,e,{base:n=10,domain:i=n7(e),...r}){return $o(t,H1().base(n),e,{...r,domain:i})}function X8(t,e,{constant:n=1,...i}){return $o(t,G1().constant(n),e,i)}function j8(t,e,{range:n,quantiles:i=n===void 0?5:(n=[...n]).length,n:r=i,scheme:o="rdylbu",domain:a=i7(e),unknown:l,interpolate:f,reverse:s}){return n===void 0&&(n=f!==void 0?Ye(f,r):zt.get(t)===En?Al(o,r):void 0),a.length>0&&(a=Z1(a,n===void 0?{length:r}:n).quantiles()),Au(t,e,{domain:a,range:n,reverse:s,unknown:l})}function Z8(t,e,{range:n,n:i=n===void 0?5:(n=[...n]).length,scheme:r="rdylbu",domain:o=Pg(t,e),unknown:a,interpolate:l,reverse:f}){const[s,u]=Ae(o);let c;return n===void 0?(c=qr(s,u,i),c[0]<=s&&c.splice(0,1),c[c.length-1]>=u&&c.pop(),i=c.length+1,n=l!==void 0?Ye(l,i):zt.get(t)===En?Al(r,i):void 0):(c=Ye(ne(s,u),i+1).slice(1,-1),s instanceof Date&&(c=c.map(h=>new Date(h)))),rr(Se(o))<0&&c.reverse(),Au(t,e,{domain:c,range:n,reverse:f,unknown:a})}function Au(t,e,{domain:n=[0],unknown:i,scheme:r="rdylbu",interpolate:o,range:a=o!==void 0?Ye(o,n.length+1):zt.get(t)===En?Al(r,n.length+1):void 0,reverse:l}){n=Se(n);const f=rr(n);if(!isNaN(f)&&!K8(n,f))throw new Error(`the ${t} scale has a non-monotonic domain`);return l&&(a=pa(a)),{type:"threshold",scale:K1(f<0?pa(n):n,a===void 0?[]:a).unknown(i),domain:n,range:a}}function K8(t,e){for(let n=1,i=t.length,r=t[0];n<i;++n){const o=ro(r,r=t[n]);if(o!==0&&o!==e)return!1}return!0}function Q8(t){return{type:"identity",scale:q5(zt.get(t))?q1():e=>e}}function eo(t,e=eg){return t.length?[Mn(t,({value:n})=>n===void 0?n:Mn(n,e)),ye(t,({value:n})=>n===void 0?n:ye(n,e))]:[0,1]}function Pg(t,e){const n=zt.get(t);return(n===Mo||n===To||n===So?J8:eo)(e)}function J8(t){return[0,t.length?ye(t,({value:e})=>e===void 0?e:ye(e,eg)):1]}function t7(t,e){const n=t.find(({radius:a})=>a!==void 0);if(n!==void 0)return[0,n.radius];const i=Gi(t,.5,({value:a})=>a===void 0?NaN:Gi(a,.25,wl)),r=e.map(a=>3*Math.sqrt(a/i)),o=30/ye(r);return o<1?r.map(a=>a*o):r}function e7(t,e){const n=Uf(t,({value:o})=>o===void 0?NaN:Uf(o,Math.abs)),i=e.map(o=>12*o/n),r=60/ye(i);return r<1?i.map(o=>o*r):i}function n7(t){for(const{value:e}of t)if(e!==void 0)for(let n of e){if(n>0)return eo(t,wl);if(n<0)return eo(t,uu)}return[1,10]}function i7(t){const e=[];for(const{value:n}of t)if(n!==void 0)for(const i of n)e.push(i);return e}function Eu(t){return(e,n)=>i=>t(e+i*(n-e))}function El(t,e,n,i,{type:r,nice:o,clamp:a,domain:l=eo(i),unknown:f,pivot:s=0,scheme:u,range:c,symmetric:h=!0,interpolate:p=zt.get(t)===En?u==null&&c!==void 0?yi:$u(u!==void 0?u:"rdbu"):ne,reverse:d}){s=+s,l=Se(l);let[m,g]=l;if(l.length>2&&Bn(`Warning: the diverging ${t} scale domain contains extra elements.`),ro(m,g)<0&&([m,g]=[g,m],d=!d),m=Math.min(m,s),g=Math.max(g,s),typeof p!="function"&&(p=Ig(p)),c!==void 0&&(p=p.length===1?Eu(p)(...c):il(p,c)),d&&(p=Lg(p)),h){const _=n.apply(s),b=_-n.apply(m),v=n.apply(g)-_;b<v?m=n.invert(_-v):b>v&&(g=n.invert(_+b))}return e.domain([m,s,g]).unknown(f).interpolator(p),a&&e.clamp(a),o&&e.nice(o),{type:r,domain:[m,g],pivot:s,interpolate:p,scale:e}}function r7(t,e,n){return El(t,hp(),f7,e,n)}function o7(t,e,n){return Og(t,e,{...n,exponent:.5})}function Og(t,e,{exponent:n=1,...i}){return El(t,mp().exponent(n=+n),c7(n),e,{...i,type:"diverging-pow"})}function a7(t,e,{base:n=10,pivot:i=1,domain:r=eo(e,i<0?uu:wl),...o}){return El(t,dp().base(n=+n),s7,e,{domain:r,pivot:i,...o})}function l7(t,e,{constant:n=1,...i}){return El(t,pp().constant(n=+n),h7(n),e,i)}const f7={apply(t){return t},invert(t){return t}},s7={apply:Math.log,invert:Math.exp},u7={apply(t){return Math.sign(t)*Math.sqrt(Math.abs(t))},invert(t){return Math.sign(t)*(t*t)}};function c7(t){return t===.5?u7:{apply(e){return Math.sign(e)*Math.pow(Math.abs(e),t)},invert(e){return Math.sign(e)*Math.pow(Math.abs(e),1/t)}}}function h7(t){return{apply(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))},invert(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}}function Ug(t,e,n,i){return $o(t,e,n,i)}function d7(t,e,n){return Ug(t,x4(),e,n)}function p7(t,e,n){return Ug(t,k4(),e,n)}const Ao=Symbol("ordinal");function zg(t,e,n,{type:i,interval:r,domain:o,range:a,reverse:l,hint:f}){return r=hr(r,i),o===void 0&&(o=qg(n,r,t)),(i==="categorical"||i===Ao)&&(i="ordinal"),l&&(o=pa(o)),o=e.domain(o).domain(),a!==void 0&&(typeof a=="function"&&(a=a(o)),e.range(a)),{type:i,domain:o,range:a,scale:e,hint:f,interval:r}}function m7(t,e,{type:n,interval:i,domain:r,range:o,scheme:a,unknown:l,...f}){i=hr(i,n),r===void 0&&(r=qg(e,i,t));let s;if(zt.get(t)===Cl)s=_7(e),o=o===void 0?y7(s):Yt(o,vu);else if(zt.get(t)===En&&(o===void 0&&(n==="ordinal"||n===Ao)&&(o=B8(r,a),o!==void 0&&(a=void 0)),a===void 0&&o===void 0&&(a=n==="ordinal"?"turbo":"observable10"),a!==void 0))if(o!==void 0){const u=$u(a),c=o[0],h=o[1]-o[0];o=({length:p})=>Ye(d=>u(c+h*d),p)}else o=Fg(a);if(l===ms)throw new Error(`implicit unknown on ${t} scale is not supported`);return zg(t,Js().unknown(l),e,{...f,type:n,domain:r,range:o,hint:s})}function g7(t,e,{align:n=.5,padding:i=.5,...r}){return Bg(i6().align(n).padding(i),e,r,t)}function b7(t,e,{align:n=.5,padding:i=.1,paddingInner:r=i,paddingOuter:o=t==="fx"||t==="fy"?0:i,...a}){return Bg(ul().align(n).paddingInner(r).paddingOuter(o),e,a,t)}function Bg(t,e,n,i){let{round:r}=n;return r!==void 0&&t.round(r=!!r),t=zg(i,t,e,n),t.round=r,t}function qg(t,e,n){const i=new Za;for(const{value:r,domain:o}of t){if(o!==void 0)return o();if(r!==void 0)for(const a of r)i.add(a)}if(e!==void 0){const[r,o]=Ae(i).map(e.floor,e);return e.range(r,e.offset(o))}if(i.size>1e4&&zt.get(n)===on)throw new Error(`implicit ordinal domain of ${n} scale has more than 10,000 values`);return Br(i,Ge)}function Ch(t,e){let n;for(const{hint:i}of t){const r=i==null?void 0:i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}function _7(t){return{fill:Ch(t,"fill"),stroke:Ch(t,"stroke")}}function y7(t){return de(t.fill)?G4:V4}function $s(t,{label:e,inset:n=0,insetTop:i=n,insetRight:r=n,insetBottom:o=n,insetLeft:a=n,round:l,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,facet:{label:d=e}={},...m}={}){const g={};for(const[_,b]of t){const v=m[_],w=M7(_,b,{round:zt.get(_)===on?l:void 0,nice:f,clamp:s,zero:u,align:c,padding:h,projection:p,...v});if(w){let{label:x=_==="fx"||_==="fy"?d:e,percent:k,transform:S,inset:T,insetTop:A=T!==void 0?T:_==="y"?i:0,insetRight:F=T!==void 0?T:_==="x"?r:0,insetBottom:C=T!==void 0?T:_==="y"?o:0,insetLeft:I=T!==void 0?T:_==="x"?a:0}=v||{};if(S==null)S=void 0;else if(typeof S!="function")throw new Error("invalid scale transform; not a function");w.percent=!!k,w.label=x===void 0?v7(b,w):x,w.transform=S,_==="x"||_==="fx"?(w.insetLeft=+I,w.insetRight=+F):(_==="y"||_==="fy")&&(w.insetTop=+A,w.insetBottom=+C),g[_]=w}}return g}function $h(t){const e={},n={scales:e};for(const[i,r]of Object.entries(t)){const{scale:o,type:a,interval:l,label:f}=r;e[i]=A7(r),n[i]=o,o.type=a,l!=null&&(o.interval=l),f!=null&&(o.label=f)}return n}function w7(t,e){const{x:n,y:i,fx:r,fy:o}=t,a=r||o?Nu(e):e;r&&Ah(r,a),o&&Eh(o,a);const l=r||o?Wg(t,e):e;n&&Ah(n,l),i&&Eh(i,l)}function v7(t=[],e){let n;for(const{label:i}of t)if(i!==void 0){if(n===void 0)n=i;else if(n!==i)return}if(n!==void 0)return!Ai(e)&&e.percent&&(n=`${n} (%)`),{inferred:!0,toString:()=>n}}function x7(t){return Math.sign(rr(t.domain()))*Math.sign(rr(t.range()))}function Nu(t){const{marginTop:e,marginRight:n,marginBottom:i,marginLeft:r,width:o,height:a,facet:{marginTop:l,marginRight:f,marginBottom:s,marginLeft:u}}=t;return{marginTop:Math.max(e,l),marginRight:Math.max(n,f),marginBottom:Math.max(i,s),marginLeft:Math.max(r,u),width:o,height:a}}function Wg({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Nu(n);return{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:t?t.scale.bandwidth()+a+r:l,height:e?e.scale.bandwidth()+i+o:f,facet:{width:l,height:f}}}function Ah(t,e){if(t.range===void 0){const{insetLeft:n,insetRight:i}=t,{width:r,marginLeft:o=0,marginRight:a=0}=e,l=o+n,f=r-a-i;t.range=[l,Math.max(l,f)],Ai(t)||(t.range=Hg(t)),t.scale.range(t.range)}Yg(t)}function Eh(t,e){if(t.range===void 0){const{insetTop:n,insetBottom:i}=t,{height:r,marginTop:o=0,marginBottom:a=0}=e,l=o+n,f=r-a-i;t.range=[Math.max(l,f),l],Ai(t)?t.range.reverse():t.range=Hg(t),t.scale.range(t.range)}Yg(t)}function Yg(t){t.round===void 0&&T7(t)&&k7(t)<=30&&t.scale.round(!0)}function k7({scale:t}){const e=t.domain().length,[n,i]=t.range(),r=t.paddingInner?t.paddingInner():1,o=t.paddingOuter?t.paddingOuter():t.padding(),a=e-r,l=Math.abs(i-n)/Math.max(1,a+o*2);return(l-Math.floor(l))*a}function Hg(t){const e=t.scale.domain().length+Vg(t);if(!(e>2))return t.range;const[n,i]=t.range;return Array.from({length:e},(r,o)=>n+o/(e-1)*(i-n))}function M7(t,e=[],n={}){const i=S7(t,e,n);if(n.type===void 0&&n.domain===void 0&&n.range===void 0&&n.interval==null&&t!=="fx"&&t!=="fy"&&Ai({type:i})){const r=e.map(({value:o})=>o).filter(o=>o!==void 0);r.some(ve)?Bn(`Warning: some data associated with the ${t} scale are dates. Dates are typically associated with a "utc" or "time" scale rather than a "${Ii(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., d3.utcDay), or you can suppress this warning by setting the type of the ${t} scale to "${Ii(i)}".`):r.some(F5)?Bn(`Warning: some data associated with the ${t} scale are strings that appear to be dates (e.g., YYYY-MM-DD). If these strings represent dates, you should parse them to Date objects. Dates are typically associated with a "utc" or "time" scale rather than a "${Ii(i)}" scale. If you are using a bar mark, you probably want a rect mark with the interval option instead; if you are using a group transform, you probably want a bin transform instead. If you want to treat this data as ordinal, you can suppress this warning by setting the type of the ${t} scale to "${Ii(i)}".`):r.some(L5)&&Bn(`Warning: some data associated with the ${t} scale are strings that appear to be numbers. If these strings represent numbers, you should parse or coerce them to numbers. Numbers are typically associated with a "linear" scale rather than a "${Ii(i)}" scale. If you want to treat this data as ordinal, you can specify the interval of the ${t} scale (e.g., 1 for integers), or you can suppress this warning by setting the type of the ${t} scale to "${Ii(i)}".`)}switch(n.type=i,i){case"diverging":case"diverging-sqrt":case"diverging-pow":case"diverging-log":case"diverging-symlog":case"cyclical":case"sequential":case"linear":case"sqrt":case"threshold":case"quantile":case"pow":case"log":case"symlog":n=Go(e,n,rn);break;case"identity":switch(zt.get(t)){case on:n=Go(e,n,rn);break;case Cl:n=Go(e,n,C7);break}break;case"utc":case"time":n=Go(e,n,M5);break}switch(i){case"diverging":return r7(t,e,n);case"diverging-sqrt":return o7(t,e,n);case"diverging-pow":return Og(t,e,n);case"diverging-log":return a7(t,e,n);case"diverging-symlog":return l7(t,e,n);case"categorical":case"ordinal":case Ao:return m7(t,e,n);case"cyclical":case"sequential":case"linear":return H8(t,e,n);case"sqrt":return V8(t,e,n);case"threshold":return Au(t,e,n);case"quantile":return j8(t,e,n);case"quantize":return Z8(t,e,n);case"pow":return Rg(t,e,n);case"log":return G8(t,e,n);case"symlog":return X8(t,e,n);case"utc":return p7(t,e,n);case"time":return d7(t,e,n);case"point":return g7(t,e,n);case"band":return b7(t,e,n);case"identity":return Q8(t);case void 0:return;default:throw new Error(`unknown scale type: ${i}`)}}function Ii(t){return typeof t=="symbol"?t.description:t}function Nh(t){return typeof t=="string"?`${t}`.toLowerCase():t}const Dh={toString:()=>"projection"};function S7(t,e,{type:n,domain:i,range:r,scheme:o,pivot:a,projection:l}){if(n=Nh(n),t==="fx"||t==="fy")return"band";(t==="x"||t==="y")&&l!=null&&(n=Dh);for(const s of e){const u=Nh(s.type);if(u!==void 0){if(n===void 0)n=u;else if(n!==u)throw new Error(`scale incompatible with channel: ${n} !== ${u}`)}}if(n===Dh)return;if(n!==void 0)return n;if(i===void 0&&!e.some(({value:s})=>s!==void 0))return;const f=zt.get(t);if(f===Mo)return"sqrt";if(f===To||f===So)return"linear";if(f===Cl)return"ordinal";if((i||r||[]).length>2)return wf(f);if(i!==void 0){if(ph(i))return wf(f);if(ve(i))return"utc"}else{const s=e.map(({value:u})=>u).filter(u=>u!==void 0);if(s.some(ph))return wf(f);if(s.some(ve))return"utc"}if(f===En){if(a!=null||W8(o))return"diverging";if(z8(o))return"categorical"}return"linear"}function wf(t){switch(t){case on:return"point";case En:return Ao;default:return"ordinal"}}function Ai({type:t}){return t==="ordinal"||t==="point"||t==="band"||t===Ao}function Vg({type:t}){return t==="threshold"}function T7({type:t}){return t==="point"||t==="band"}function ar(t){if(t===void 0)return!0;const e=t.domain(),n=t(e[0]);for(let i=1,r=e.length;i<r;++i)if(t(e[i])-n)return!1;return!0}function Go(t,{domain:e,...n},i){var r;for(const o of t)o.value!==void 0&&(e===void 0&&(e=(r=o.value)==null?void 0:r.domain),o.value=i(o.value));return{domain:e===void 0?e:i(e),...n}}function C7(t){return Yt(t,vu)}function $7(t){return e=>{if(!zt.has(e=`${e}`))throw new Error(`unknown scale: ${e}`);return t[e]}}function A7({scale:t,type:e,domain:n,range:i,interpolate:r,interval:o,transform:a,percent:l,pivot:f}){if(e==="identity")return{type:"identity",apply:u=>u,invert:u=>u};const s=t.unknown?t.unknown():void 0;return{type:e,domain:Qr(n),...i!==void 0&&{range:Qr(i)},...a!==void 0&&{transform:a},...l&&{percent:l},...s!==void 0&&{unknown:s},...o!==void 0&&{interval:o},...r!==void 0&&{interpolate:r},...t.clamp&&{clamp:t.clamp()},...f!==void 0&&{pivot:f,symmetric:!1},...t.base&&{base:t.base()},...t.exponent&&{exponent:t.exponent()},...t.constant&&{constant:t.constant()},...t.align&&{align:t.align(),round:t.round()},...t.padding&&(t.paddingInner?{paddingInner:t.paddingInner(),paddingOuter:t.paddingOuter()}:{padding:t.padding()}),...t.bandwidth&&{bandwidth:t.bandwidth(),step:t.step()},apply:u=>t(u),...t.invert&&{invert:u=>t.invert(u)}}}function E7(t,e,n={}){let i=.5-me,r=.5+me,o=.5+me,a=.5-me;for(const{marginTop:m,marginRight:g,marginBottom:_,marginLeft:b}of e)m>i&&(i=m),g>r&&(r=g),_>o&&(o=_),b>a&&(a=b);let{margin:l,marginTop:f=l!==void 0?l:i,marginRight:s=l!==void 0?l:r,marginBottom:u=l!==void 0?l:o,marginLeft:c=l!==void 0?l:a}=n;f=+f,s=+s,u=+u,c=+c;let{width:h=640,height:p=N7(t,n,{width:h,marginTopDefault:i,marginRightDefault:r,marginBottomDefault:o,marginLeftDefault:a})+Math.max(0,f-i+u-o)}=n;h=+h,p=+p;const d={width:h,height:p,marginTop:f,marginRight:s,marginBottom:u,marginLeft:c};if(t.fx||t.fy){let{margin:m,marginTop:g=m!==void 0?m:f,marginRight:_=m!==void 0?m:s,marginBottom:b=m!==void 0?m:u,marginLeft:v=m!==void 0?m:c}=n.facet??{};g=+g,_=+_,b=+b,v=+v,d.facet={marginTop:g,marginRight:_,marginBottom:b,marginLeft:v}}return d}function N7({x:t,y:e,fy:n,fx:i},{projection:r,aspectRatio:o},{width:a,marginTopDefault:l,marginRightDefault:f,marginBottomDefault:s,marginLeftDefault:u}){const c=n?n.scale.domain().length:1,h=P8(r);if(h){const d=i?i.scale.domain().length:1,m=(1.1*c-.1)/(1.1*d-.1)*h,g=Math.max(.1,Math.min(10,m));return Math.round((a-u-f)*g+l+s)}const p=e?Ai(e)?e.scale.domain().length:Math.max(7,17/c):1;if(o!=null){if(o=+o,!(isFinite(o)&&o>0))throw new Error(`invalid aspectRatio: ${o}`);const d=Fh("y",e)/(Fh("x",t)*o),m=i?i.scale.bandwidth():1,g=n?n.scale.bandwidth():1,_=m*(a-u-f)-t.insetLeft-t.insetRight;return(d*_+e.insetTop+e.insetBottom)/g+l+s}return!!(e||n)*Math.max(1,Math.min(60,p*c))*20+!!i*30+60}function Fh(t,e){if(!e)throw new Error(`aspectRatio requires ${t} scale`);const{type:n,domain:i}=e;let r;switch(n){case"linear":case"utc":case"time":r=Number;break;case"pow":{const l=e.scale.exponent();r=f=>Math.pow(f,l);break}case"log":r=Math.log;break;case"point":case"band":return i.length;default:throw new Error(`unsupported ${t} scale for aspectRatio: ${n}`)}const[o,a]=Ae(i);return Math.abs(r(a)-r(o))}function D7(t,e){const{fx:n,fy:i}=$s(t,e),r=n==null?void 0:n.scale.domain(),o=i==null?void 0:i.scale.domain();return r&&o?Vb(r,o).map(([a,l],f)=>({x:a,y:l,i:f})):r?r.map((a,l)=>({x:a,i:l})):o?o.map((a,l)=>({y:a,i:l})):void 0}function F7(t,{x:e,y:n}){return e&&(e=As(e)),n&&(n=As(n)),t.filter(e&&n?i=>e.has(i.x)&&n.has(i.y):e?i=>e.has(i.x):i=>n.has(i.y)).sort(e&&n?(i,r)=>e.get(i.x)-e.get(r.x)||n.get(i.y)-n.get(r.y):e?(i,r)=>e.get(i.x)-e.get(r.x):(i,r)=>n.get(i.y)-n.get(r.y))}function Du(t,{fx:e,fy:n}){const i=An(t),r=e==null?void 0:e.value,o=n==null?void 0:n.value;return e&&n?Bi(i,a=>(a.fx=r[a[0]],a.fy=o[a[0]],a),a=>r[a],a=>o[a]):e?Bi(i,a=>(a.fx=r[a[0]],a),a=>r[a]):Bi(i,a=>(a.fy=o[a[0]],a),a=>o[a])}function L7(t,e,{marginTop:n,marginLeft:i}){return t&&e?({x:r,y:o})=>`translate(${t(r)-i},${e(o)-n})`:t?({x:r})=>`translate(${t(r)-i},0)`:({y:r})=>`translate(0,${e(r)-n})`}function I7(t){const e=[],n=new Uint32Array(Gn(t,i=>i.length));for(const i of t){let r=0;for(const o of t)i!==o&&(n.set(o,r),r+=o.length);e.push(n.slice(0,r))}return e}const R7=new Map([["top",vf],["right",Mf],["bottom",xf],["left",kf],["top-left",Xo(vf,kf)],["top-right",Xo(vf,Mf)],["bottom-left",Xo(xf,kf)],["bottom-right",Xo(xf,Mf)],["top-empty",U7],["right-empty",q7],["bottom-empty",z7],["left-empty",B7],["empty",W7]]);function P7(t){if(t==null)return null;const e=R7.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid facet anchor: ${t}`)}const Lh=new WeakMap;function As(t){let e=Lh.get(t);return e||Lh.set(t,e=new gi(Yt(t,(n,i)=>[n,i]))),e}function ni(t,e){return As(t).get(e)}function O7(t,e,n){return e=si(e),n=si(n),t.find(i=>Object.is(si(i.x),e)&&Object.is(si(i.y),n))}function Nl(t,e,n){var i;return(i=O7(t,e,n))==null?void 0:i.empty}function vf(t,{y:e},{y:n}){return e?ni(e,n)===0:!0}function xf(t,{y:e},{y:n}){return e?ni(e,n)===e.length-1:!0}function kf(t,{x:e},{x:n}){return e?ni(e,n)===0:!0}function Mf(t,{x:e},{x:n}){return e?ni(e,n)===e.length-1:!0}function U7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ni(e,i);if(o>0)return Nl(t,n,e[o-1])}function z7(t,{y:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ni(e,i);if(o<e.length-1)return Nl(t,n,e[o+1])}function B7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ni(e,n);if(o>0)return Nl(t,e[o-1],i)}function q7(t,{x:e},{x:n,y:i,empty:r}){if(r)return!1;if(!e)return;const o=ni(e,n);if(o<e.length-1)return Nl(t,e[o+1],i)}function W7(t,e,{empty:n}){return n}function Xo(t,e){return function(){return t.apply(null,arguments)&&e.apply(null,arguments)}}function Sf(t,{channels:{fx:e,fy:n},groups:i}){return e&&n?t.map(({x:r,y:o})=>{var a;return((a=i.get(r))==null?void 0:a.get(o))??[]}):e?t.map(({x:r})=>i.get(r)??[]):t.map(({y:r})=>i.get(r)??[])}class se{constructor(e,n={},i={},r){const{facet:o="auto",facetAnchor:a,fx:l,fy:f,sort:s,dx:u=0,dy:c=0,margin:h=0,marginTop:p=h,marginRight:d=h,marginBottom:m=h,marginLeft:g=h,clip:_=r==null?void 0:r.clip,channels:b,tip:v,render:w}=i;if(this.data=e,this.sort=ir(s)?s:null,this.initializer=or(i).initializer,this.transform=this.initializer?i.transform:$l(i).transform,o===null||o===!1?this.facet=null:(this.facet=Ze(o===!0?"include":o,"facet",["auto","include","exclude","super"]),this.fx=e===la&&typeof l=="string"?[l]:l,this.fy=e===la&&typeof f=="string"?[f]:f),this.facetAnchor=P7(a),n=mg(n),b!==void 0&&(n={...Y7(b),...n}),r!==void 0&&(n={...x8(this,i,r),...n}),this.channels=Object.fromEntries(Object.entries(n).map(([x,k])=>{if(kl(k.value)){const{value:S,label:T=k.label,scale:A=k.scale}=k.value;k={...k,label:T,scale:A,value:S}}if(e===la&&typeof k.value=="string"){const{value:S}=k;k={...k,value:[S]}}return[x,k]}).filter(([x,{value:k,optional:S}])=>{if(k!=null)return!0;if(S)return!1;throw new Error(`missing channel value: ${x}`)})),this.dx=+u,this.dy=+c,this.marginTop=+p,this.marginRight=+d,this.marginBottom=+m,this.marginLeft=+g,this.clip=Cg(_),this.tip=H7(v),this.facet==="super"){if(l||f)throw new Error("super-faceting cannot use fx or fy");for(const x in this.channels){const{scale:k}=n[x];if(!(k!=="x"&&k!=="y"))throw new Error("super-faceting cannot use x or y")}}w!=null&&(this.render=Xg(w,this.render))}initialize(e,n,i){let r=Se(this.data);e===void 0&&r!=null&&(e=[An(r)]);const o=e;this.transform!=null&&({facets:e,data:r}=this.transform(r,e,i),r=Se(r)),e!==void 0&&(e.original=o);const a=s8(this.channels,r);return this.sort!=null&&c8(r,e,a,n,this.sort),{data:r,facets:e,channels:a}}filter(e,n,i){for(const r in n){const{filter:o=Zn}=n[r];if(o!==null){const a=i[r];e=e.filter(l=>o(a[l]))}}return e}project(e,n,i){for(const r in e)if(e[r].scale==="x"&&/^x|x$/.test(r)){const o=r.replace(/^x|x$/,"y");o in e&&e[o].scale==="y"&&I8(r,o,n,i.projection)}}scale(e,n,i){const r=u8(e,n);return i.projection&&this.project(e,r,i),r}}function Gg(...t){return t.plot=se.prototype.plot,t}function Xg(t,e){if(t==null)return e===null?void 0:e;if(e==null)return t===null?void 0:t;if(typeof t!="function")throw new TypeError(`invalid render transform: ${t}`);if(typeof e!="function")throw new TypeError(`invalid render transform: ${e}`);return function(n,i,r,o,a,l){return t.call(this,n,i,r,o,a,(f,s,u,c,h)=>e.call(this,f,s,u,c,h,l))}}function Y7(t){return Object.fromEntries(Object.entries(mg(t)).map(([e,n])=>(n=typeof n=="string"?{value:n,label:e}:ko(n),n.filter===void 0&&n.scale==null&&(n={...n,filter:null}),[e,n])))}function H7(t){return t===!0?"xy":t===!1||t==null?null:typeof t=="string"?Ze(t,"tip",["x","y","xy"]):t}function Dl(t,e){return(t==null?void 0:t.tip)===!0?{...t,tip:e}:ti(t==null?void 0:t.tip)&&t.tip.pointer===void 0?{...t,tip:{...t.tip,pointer:e}}:t}const Ih=new WeakMap;function Fu(t,e,{x:n,y:i,px:r,py:o,maxRadius:a=40,channels:l,render:f,...s}={}){return a=+a,r!=null&&(n??(n=null),l={...l,px:{value:r,scale:"x"}}),o!=null&&(i??(i=null),l={...l,py:{value:o,scale:"y"}}),{x:n,y:i,channels:l,...s,render:Xg(function(u,c,h,p,d,m){d={...d,pointerSticky:!1};const g=d.ownerSVGElement,{data:_}=d.getMarkState(this);let b=Ih.get(g);b||Ih.set(g,b={sticky:!1,roots:[],renders:[]});let v=b.renders.push(K)-1;const{x:w,y:x,fx:k,fy:S}=c;let T=k?k(u.fx)-p.marginLeft:0,A=S?S(u.fy)-p.marginTop:0;w!=null&&w.bandwidth&&(T+=w.bandwidth()/2),x!=null&&x.bandwidth&&(A+=x.bandwidth()/2);const F=u.fi!=null;let C;if(F){let q=b.facetStates;q||(b.facetStates=q=new Map),C=q.get(this),C||q.set(this,C=new Map)}const[I,L]=Co(this,p),{px:G,py:$}=h,B=G?q=>G[q]:Zg(h,I),z=$?q=>$[q]:Kg(h,L);let Z,Q,W,U;function Y(q,N){if(F)if(U&&(U=cancelAnimationFrame(U)),q==null)C.delete(u.fi);else{C.set(u.fi,N),U=requestAnimationFrame(()=>{U=null;for(const[E,O]of C)if(O<N||O===N&&E<u.fi){q=null;break}K(q)});return}K(q)}function K(q){if(Z===q&&W===b.sticky)return;Z=q,W=d.pointerSticky=b.sticky;const N=Z==null?[]:[Z];F&&(N.fx=u.fx,N.fy=u.fy,N.fi=u.fi);const E=m(N,c,h,p,d);if(Q){if(F){const O=Q.parentNode,tt=Q.getAttribute("transform"),P=E.getAttribute("transform");tt?E.setAttribute("transform",tt):E.removeAttribute("transform"),P?O.setAttribute("transform",P):O.removeAttribute("transform"),E.removeAttribute("aria-label"),E.removeAttribute("aria-description"),E.removeAttribute("aria-hidden")}Q.replaceWith(E)}return b.roots[v]=Q=E,Z==null&&(C==null?void 0:C.size)>1||d.dispatchValue(Z==null?null:_[Z]),E}function ft(q){if(b.sticky||q.pointerType==="mouse"&&q.buttons===1)return;let[N,E]=Qy(q);N-=T,E-=A;const O=N<p.marginLeft||N>p.width-p.marginRight?1:t,tt=E<p.marginTop||E>p.height-p.marginBottom?1:e;let P=null,pt=a*a;for(const rt of u){const mt=O*(B(rt)-N),nt=tt*(z(rt)-E),ht=mt*mt+nt*nt;ht<=pt&&(P=rt,pt=ht)}if(P!=null&&(t!==1||e!==1)){const rt=B(P)-N,mt=z(P)-E;pt=rt*rt+mt*mt}Y(P,pt)}function et(q){q.pointerType==="mouse"&&Z!=null&&(b.sticky&&b.roots.some(N=>N==null?void 0:N.contains(q.target))||(b.sticky?(b.sticky=!1,b.renders.forEach(N=>N(null))):(b.sticky=!0,K(Z)),q.stopImmediatePropagation()))}function j(q){q.pointerType==="mouse"&&(b.sticky||Y(null))}return g.addEventListener("pointerenter",ft),g.addEventListener("pointermove",ft),g.addEventListener("pointerdown",et),g.addEventListener("pointerleave",j),K(null)},f)}}function jg(t){return Fu(1,1,t)}function V7(t){return Fu(1,.01,t)}function Rh(t){return Fu(.01,1,t)}function Zg({x1:t,x2:e,x:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function Kg({y1:t,y2:e,y:n=t},i){return t&&e?r=>(t[r]+e[r])/2:n?r=>n[r]:()=>i}function Qg(t){return Ai(t)&&t.interval===void 0?void 0:"tabular-nums"}function G7(t,e){let{label:n=t.label,tickSize:i=6,width:r=240,height:o=44+i,marginTop:a=18,marginRight:l=0,marginBottom:f=16+i,marginLeft:s=0,style:u,ticks:c=(r-s-l)/64,tickFormat:h,fontVariant:p=Qg(t),round:d=!0,opacity:m,className:g}=e;const _=Cu(e);g=Su(g),m=fe(m)[1],h===null&&(h=()=>null);const b=qt("svg",_).attr("class",`${g}-ramp`).attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("width",r).attr("height",o).attr("viewBox",`0 0 ${r} ${o}`).call(I=>I.append("style").text(`:where(.${g}-ramp) {
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
  overflow: visible;
}
:where(.${g}-ramp text) {
  white-space: pre;
}`)).call(Tu,u);let v=I=>I.selectAll(".tick line").attr("y1",a+f-o),w;const x=d?(I,L)=>I.rangeRound(L):(I,L)=>I.range(L),{type:k,domain:S,range:T,interpolate:A,scale:F,pivot:C}=t;if(A){const I=T===void 0?A:il(A.length===1?Eu(A):A,T);w=x(F.copy(),Ye(ne(s,r-l),Math.min(S.length+(C!==void 0),T===void 0?1/0:T.length)));const L=256,G=_.document.createElement("canvas");G.width=L,G.height=1;const $=G.getContext("2d");for(let B=0,z=L-1;B<L;++B)$.fillStyle=I(B/z),$.fillRect(B,0,1,1);b.append("image").attr("opacity",m).attr("x",s).attr("y",a).attr("width",r-s-l).attr("height",o-a-f).attr("preserveAspectRatio","none").attr("xlink:href",G.toDataURL())}else if(k==="threshold"){const I=S,L=h===void 0?G=>G:typeof h=="string"?ur(h):h;w=x(tu().domain([-1,T.length-1]),[s,r-l]),b.append("g").attr("fill-opacity",m).selectAll().data(T).enter().append("rect").attr("x",(G,$)=>w($-1)).attr("y",a).attr("width",(G,$)=>w($)-w($-1)).attr("height",o-a-f).attr("fill",G=>G),c=Yt(I,(G,$)=>$),h=G=>L(I[G],G)}else w=x(ul().domain(S),[s,r-l]),b.append("g").attr("fill-opacity",m).selectAll().data(S).enter().append("rect").attr("x",w).attr("y",a).attr("width",Math.max(0,w.bandwidth()-1)).attr("height",o-a-f).attr("fill",F),v=()=>{};return b.append("g").attr("transform",`translate(0,${o-f})`).call(m_(w).ticks(Array.isArray(c)?null:c,typeof h=="string"?h:void 0).tickFormat(typeof h=="function"?h:void 0).tickSize(i).tickValues(Array.isArray(c)?c:null)).attr("font-size",null).attr("font-family",null).attr("font-variant",ee(p,"normal")).call(v).call(I=>I.select(".domain").remove()),n!==void 0&&b.append("text").attr("x",s).attr("y",a-6).attr("fill","currentColor").attr("font-weight","bold").text(n),b.node()}const Jg=Math.PI/180;function Eo(t,{marker:e,markerStart:n=e,markerMid:i=e,markerEnd:r=e}={}){t.markerStart=Tf(n),t.markerMid=Tf(i),t.markerEnd=Tf(r)}function Tf(t){if(t==null||t===!1)return null;if(t===!0)return Oh;if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"none":return null;case"arrow":return Ph("auto");case"arrow-reverse":return Ph("auto-start-reverse");case"dot":return X7;case"circle":case"circle-fill":return Oh;case"circle-stroke":return j7;case"tick":return Cf("auto");case"tick-x":return Cf(90);case"tick-y":return Cf(0)}throw new Error(`invalid marker: ${t}`)}function Ph(t){return(e,n)=>qt("svg:marker",n).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("orient",t).attr("fill","none").attr("stroke",e).attr("stroke-width",1.5).attr("stroke-linecap","round").attr("stroke-linejoin","round").call(i=>i.append("path").attr("d","M-1.5,-3l3,3l-3,3")).node()}function X7(t,e){return qt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","none").call(n=>n.append("circle").attr("r",2.5)).node()}function Oh(t,e){return qt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill",t).attr("stroke","var(--plot-background)").attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function j7(t,e){return qt("svg:marker",e).attr("viewBox","-5 -5 10 10").attr("markerWidth",6.67).attr("markerHeight",6.67).attr("fill","var(--plot-background)").attr("stroke",t).attr("stroke-width",1.5).call(n=>n.append("circle").attr("r",3)).node()}function Cf(t){return(e,n)=>qt("svg:marker",n).attr("viewBox","-3 -3 6 6").attr("markerWidth",6).attr("markerHeight",6).attr("orient",t).attr("stroke",e).call(i=>i.append("path").attr("d","M0,-3v6")).node()}let Z7=0;function Fl(t,e,{stroke:n},i){return t2(t,e,n&&(r=>n[r]),i)}function K7(t,e,{stroke:n},i){return t2(t,e,n&&(([r])=>n[r]),i)}function t2(t,{markerStart:e,markerMid:n,markerEnd:i,stroke:r},o=()=>r,a){const l=new Map;function f(s){return function(u){const c=o(u);let h=l.get(s);h||l.set(s,h=new Map);let p=h.get(c);if(!p){const d=this.parentNode.insertBefore(s(c,a),this),m=`plot-marker-${++Z7}`;d.setAttribute("id",m),h.set(c,p=`url(#${m})`)}return p}}e&&t.attr("marker-start",f(e)),n&&t.attr("marker-mid",f(n)),i&&t.attr("marker-end",f(i))}function Lu({inset:t,insetLeft:e,insetRight:n,...i}={}){return[e,n]=n2(t,e,n),{inset:t,insetLeft:e,insetRight:n,...i}}function e2({inset:t,insetTop:e,insetBottom:n,...i}={}){return[e,n]=n2(t,e,n),{inset:t,insetTop:e,insetBottom:n,...i}}function n2(t,e,n){return t===void 0&&e===void 0&&n===void 0?me?[1,0]:[.5,.5]:[e,n]}function i2(t,{interval:e}){return t={...ko(t)},t.interval=_u(t.interval===void 0?e:t.interval),t}function r2(t,e,n,i){const{[t]:r,[`${t}1`]:o,[`${t}2`]:a}=n,{value:l,interval:f}=i2(r,n);if(l==null||f==null&&!i)return n;const s=$i(r);if(f==null){let p;const d={transform:m=>p||(p=Kt(m,l)),label:s};return{...n,[t]:void 0,[`${t}1`]:o===void 0?d:o,[`${t}2`]:a===void 0&&!(o===a&&i)?d:a}}let u,c;function h(p){return c!==void 0&&p===u?c:c=Yt(Kt(u=p,l),d=>f.floor(d))}return e({...n,[t]:void 0,[`${t}1`]:o===void 0?{transform:h,label:s}:o,[`${t}2`]:a===void 0?{transform:p=>h(p).map(d=>f.offset(d)),label:s}:a})}function o2(t,e,n){const{[t]:i}=n,{value:r,interval:o}=i2(i,n);return r==null||o==null?n:e({...n,[t]:{label:$i(i),transform:a=>{const l=Yt(Kt(a,r),s=>o.floor(s)),f=l.map(s=>o.offset(s));return l.map(ve(l)?(s,u)=>s==null||isNaN(s=+s)||(u=f[u],u==null)||isNaN(u=+u)?void 0:new Date((s+u)/2):(s,u)=>s==null||(u=f[u],u==null)?NaN:(+s+ +u)/2)}}})}function Q7(t={}){return r2("x",Lu,t)}function a2(t={}){return r2("y",e2,t)}function J7(t={}){return o2("x",Lu,t)}function t9(t={}){return o2("y",e2,t)}const l2={ariaLabel:"rule",fill:null,stroke:"currentColor"};class e9 extends se{constructor(e,n={}){const{x:i,y1:r,y2:o,inset:a=0,insetTop:l=a,insetBottom:f=a}=n;super(e,{x:{value:i,scale:"x",optional:!0},y1:{value:r,scale:"y",optional:!0},y2:{value:o,scale:"y",optional:!0}},Dl(n,"x"),l2),this.insetTop=Lt(l),this.insetBottom=Lt(f),Eo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y1:s,y2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetTop:_,insetBottom:b}=this;return qt("svg:g",o).call(Re,this,r,o).call(Te,this,{x:f&&a},me,0).call(v=>v.selectAll().data(e).enter().append("line").call(Pe,this).attr("x1",f?w=>f[w]:(m+c-d)/2).attr("x2",f?w=>f[w]:(m+c-d)/2).attr("y1",s&&!ar(l)?w=>s[w]+_:p+_).attr("y2",u&&!ar(l)?l.bandwidth?w=>u[w]+l.bandwidth()-b:w=>u[w]-b:h-g-b).call(Nn,this,i).call(Fl,this,i,o)).node()}}class n9 extends se{constructor(e,n={}){const{x1:i,x2:r,y:o,inset:a=0,insetRight:l=a,insetLeft:f=a}=n;super(e,{y:{value:o,scale:"y",optional:!0},x1:{value:i,scale:"x",optional:!0},x2:{value:r,scale:"x",optional:!0}},Dl(n,"y"),l2),this.insetRight=Lt(l),this.insetLeft=Lt(f),Eo(this,n)}render(e,n,i,r,o){const{x:a,y:l}=n,{y:f,x1:s,x2:u}=i,{width:c,height:h,marginTop:p,marginRight:d,marginLeft:m,marginBottom:g}=r,{insetLeft:_,insetRight:b}=this;return qt("svg:g",o).call(Re,this,r,o).call(Te,this,{y:f&&l},0,me).call(v=>v.selectAll().data(e).enter().append("line").call(Pe,this).attr("x1",s&&!ar(a)?w=>s[w]+_:m+_).attr("x2",u&&!ar(a)?a.bandwidth?w=>u[w]+a.bandwidth()-b:w=>u[w]-b:c-d-b).attr("y1",f?w=>f[w]:(p+h-g)/2).attr("y2",f?w=>f[w]:(p+h-g)/2).call(Nn,this,i).call(Fl,this,i,o)).node()}}function Ll(t,e){let{x:n=oe,y:i,y1:r,y2:o,...a}=a2(e);return[r,o]=s2(i,r,o),new e9(t,{...a,x:n,y1:r,y2:o})}function f2(t,e){let{y:n=oe,x:i,x1:r,x2:o,...a}=Q7(e);return[r,o]=s2(i,r,o),new n9(t,{...a,y:n,x1:r,x2:o})}function s2(t,e,n){if(t==null){if(e===void 0){if(n!==void 0)return[0,n]}else if(n===void 0)return[0,e]}else{if(e===void 0)return n===void 0?[0,t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}function Iu(t,...e){let n=e.length;for(let i=0,r=!0;i<n;++i)typeof e[i]!="function"&&(r&&(t=t.slice(),r=!1),t.splice(i,2,t[i]+e[i]+t[i+1]),e.splice(i,1),--i,--n);return i=>{let r=t[0];for(let o=0;o<n;++o)r+=e[o](i)+t[o+1];return r}}const i9={ariaLabel:"text",strokeLinejoin:"round",strokeWidth:3,paintOrder:"stroke"},u2="";class Ru extends se{constructor(e,n={}){const{x:i,y:r,text:o=ei(e)&&pg(e)?oe:xl,frameAnchor:a,textAnchor:l=/right$/i.test(a)?"end":/left$/i.test(a)?"start":"middle",lineAnchor:f=/^top/i.test(a)?"top":/^bottom/i.test(a)?"bottom":"middle",lineHeight:s=1,lineWidth:u=1/0,textOverflow:c,monospace:h,fontFamily:p=h?"ui-monospace, monospace":void 0,fontSize:d,fontStyle:m,fontVariant:g,fontWeight:_,rotate:b}=n,[v,w]=fe(b,0),[x,k]=s9(d);if(super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},fontSize:{value:x,optional:!0},rotate:{value:D5(v),optional:!0},text:{value:o,filter:su,optional:!0}},n,i9),this.rotate=w,this.textAnchor=ee(l,"middle"),this.lineAnchor=Ze(f,"lineAnchor",["top","middle","bottom"]),this.lineHeight=+s,this.lineWidth=+u,this.textOverflow=c2(c),this.monospace=!!h,this.fontFamily=le(p),this.fontSize=k,this.fontStyle=le(m),this.fontVariant=le(g),this.fontWeight=le(_),this.frameAnchor=Tl(a),!(this.lineWidth>=0))throw new Error(`invalid lineWidth: ${u}`);this.splitLines=d2(this),this.clipLine=p2(this)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,rotate:u,text:c,title:h,fontSize:p}=i,{rotate:d}=this,[m,g]=Co(this,r);return qt("svg:g",o).call(Re,this,r,o).call(h2,this,c,r).call(Te,this,{x:f&&a,y:s&&l}).call(_=>_.selectAll().data(e).enter().append("text").call(Pe,this).call(r9,this,c,h).attr("transform",Iu`translate(${f?b=>f[b]:m},${s?b=>s[b]:g})${u?b=>` rotate(${u[b]})`:d?` rotate(${d})`:""}`).call(_t,"font-size",p&&(b=>p[b])).call(Nn,this,i)).node()}}function c2(t){return t==null?null:Ze(t,"textOverflow",["clip","ellipsis","clip-start","clip-end","ellipsis-start","ellipsis-middle","ellipsis-end"]).replace(/^(clip|ellipsis)$/,"$1-end")}function r9(t,e,n,i){if(!n)return;const{lineAnchor:r,lineHeight:o,textOverflow:a,splitLines:l,clipLine:f}=e;t.each(function(s){const u=l(Mi(n[s])??"").map(f),c=u.length,h=r==="top"?.71:r==="bottom"?1-c:(164-c*100)/200;if(c>1){let p=0;for(let d=0;d<c;++d){if(++p,!u[d])continue;const m=this.ownerDocument.createElementNS(Xi.svg,"tspan");m.setAttribute("x",0),d===p-1?m.setAttribute("y",`${(h+d)*o}em`):m.setAttribute("dy",`${p*o}em`),m.textContent=u[d],this.appendChild(m),p=0}}else h&&this.setAttribute("y",`${h*o}em`),this.textContent=u[0];if(a&&!i&&u[0]!==n[s]){const p=this.ownerDocument.createElementNS(Xi.svg,"title");p.textContent=n[s],this.appendChild(p)}})}function Il(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=Ml(e,n)),new Ru(t,{...i,x:e,y:n})}function o9(t,{x:e=oe,...n}={}){return new Ru(t,t9({...n,x:e}))}function a9(t,{y:e=oe,...n}={}){return new Ru(t,J7({...n,y:e}))}function h2(t,e,n){_t(t,"text-anchor",e.textAnchor),_t(t,"font-family",e.fontFamily),_t(t,"font-size",e.fontSize),_t(t,"font-style",e.fontStyle),_t(t,"font-variant",e.fontVariant===void 0?l9(n):e.fontVariant),_t(t,"font-weight",e.fontWeight)}function l9(t){return t&&(I5(t)||ve(t))?"tabular-nums":void 0}const f9=new Set(["inherit","initial","revert","unset","xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large","larger","smaller"]);function s9(t){return t==null||typeof t=="number"?[void 0,t]:typeof t!="string"?[t,void 0]:(t=t.trim().toLowerCase(),f9.has(t)||/^[+-]?\d*\.?\d+(e[+-]?\d+)?(\w*|%)$/.test(t)?[void 0,t]:[t,void 0])}function u9(t,e,n){const i=[];let r,o=0;for(const[a,l,f]of c9(t)){if(r===void 0&&(r=a),o>r&&n(t,r,l)>e&&(i.push(t.slice(r,o)+(t[o-1]===u2?"-":"")),r=a),f){i.push(t.slice(r,l)),r=void 0;continue}o=l}return i}function*c9(t){let e=0,n=0;const i=t.length;for(;n<i;){let r=1;switch(t[n]){case u2:case"-":++n,yield[e,n,!1],e=n;break;case" ":for(yield[e,n,!1];t[++n]===" ";);e=n;break;case"\r":t[n+1]===`
`&&++r;case`
`:yield[e,n,!0],n+=r,e=n;break;default:++n;break}}yield[e,n,!0]}const Uh={a:56,b:63,c:57,d:63,e:58,f:37,g:62,h:60,i:26,j:26,k:55,l:26,m:88,n:60,o:60,p:62,q:62,r:39,s:54,t:38,u:60,v:55,w:79,x:54,y:55,z:55,A:69,B:67,C:73,D:74,E:61,F:58,G:76,H:75,I:28,J:55,K:67,L:58,M:89,N:75,O:78,P:65,Q:78,R:67,S:65,T:65,U:75,V:69,W:98,X:69,Y:67,Z:67,0:64,1:48,2:62,3:64,4:66,5:63,6:65,7:58,8:65,9:65," ":29,"!":32,'"':49,"'":31,"(":39,")":39,",":31,"-":48,".":31,"/":32,":":31,";":31,"?":52,"":31,"":31,"":47,"":47,"":82};function Pu(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=dr(t,r))i+=Uh[t[r]]??(g2(t,r)?120:Uh.e);return i}function Ou(t,e=0,n=t.length){let i=0;for(let r=e;r<n;r=dr(t,r))i+=g2(t,r)?126:63;return i}function d2({monospace:t,lineWidth:e,textOverflow:n}){if(n!=null||e==1/0)return o=>o.split(/\r\n?|\n/g);const i=t?Ou:Pu,r=e*100;return o=>u9(o,r,i)}function p2({monospace:t,lineWidth:e,textOverflow:n}){if(n==null||e==1/0)return o=>o;const i=t?Ou:Pu,r=e*100;switch(n){case"clip-start":return o=>Bh(o,r,i,"");case"clip-end":return o=>zh(o,r,i,"");case"ellipsis-start":return o=>Bh(o,r,i,Yi);case"ellipsis-middle":return o=>h9(o,r,i,Yi);case"ellipsis-end":return o=>zh(o,r,i,Yi)}}const Yi="";function lr(t,e,n,i){const r=[];let o=0;for(let a=0,l=0,f=t.length;a<f;a=l){l=dr(t,a);const s=n(t,a,l);if(o+s>e){for(o+=i;o>e&&a>0;)l=a,a=r.pop(),o-=n(t,a,l);return[a,e-o]}o+=s,r.push(a)}return[-1,0]}function zh(t,e,n,i){t=t.trim();const r=n(i),[o]=lr(t,e,n,r);return o<0?t:t.slice(0,o).trimEnd()+i}function h9(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i)/2,[a,l]=lr(t,e/2,n,o),[f]=lr(t,r-e/2-l+o,n,-o);return f<0?i:t.slice(0,a).trimEnd()+i+t.slice(dr(t,f)).trimStart()}function Bh(t,e,n,i){t=t.trim();const r=n(t);if(r<=e)return t;const o=n(i),[a]=lr(t,r-e+o,n,-o);return a<0?i:i+t.slice(dr(t,a)).trimStart()}const Es=/[\p{Combining_Mark}\p{Emoji_Modifier}]+/uy,qh=new RegExp("\\p{Extended_Pictographic}","uy");function dr(t,e){return e+=d9(t,e)?2:1,m9(t,e)&&(e=Es.lastIndex),p9(t,e)?dr(t,e+1):e}function m2(t,e){return t.charCodeAt(e)<128}function d9(t,e){const n=t.charCodeAt(e);if(n>=55296&&n<56320){const i=t.charCodeAt(e+1);return i>=56320&&i<57344}return!1}function p9(t,e){return t.charCodeAt(e)===8205}function m9(t,e){return m2(t,e)?!1:(Es.lastIndex=e,Es.test(t))}function g2(t,e){return m2(t,e)?!1:(qh.lastIndex=e,qh.test(t))}const g9={ariaLabel:"vector",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinejoin:"round",strokeLinecap:"round"},b2=3.5,b9=b2*5,_2={draw(t,e,n){const i=e*n/b9;t.moveTo(0,0),t.lineTo(0,-e),t.moveTo(-i,i-e),t.lineTo(0,-e),t.lineTo(i,i-e)}},_9={draw(t,e,n){t.moveTo(-n,0),t.lineTo(0,-e),t.lineTo(n,0)}},y9=new Map([["arrow",_2],["spike",_9]]);function w9(t){return t&&typeof t.draw=="function"}function v9(t){if(w9(t))return t;const e=y9.get(`${t}`.toLowerCase());if(e)return e;throw new Error(`invalid shape: ${t}`)}class y2 extends se{constructor(e,n={}){const{x:i,y:r,r:o=b2,length:a,rotate:l,shape:f=_2,anchor:s="middle",frameAnchor:u}=n,[c,h]=fe(a,12),[p,d]=fe(l,0);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},length:{value:c,scale:"length",optional:!0},rotate:{value:p,optional:!0}},n,g9),this.r=+o,this.length=h,this.rotate=d,this.shape=v9(f),this.anchor=Ze(s,"anchor",["start","middle","end"]),this.frameAnchor=Tl(u)}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,length:u,rotate:c}=i,{length:h,rotate:p,anchor:d,shape:m,r:g}=this,[_,b]=Co(this,r);return qt("svg:g",o).call(Re,this,r,o).call(Te,this,{x:f&&a,y:s&&l}).call(v=>v.selectAll().data(e).enter().append("path").call(Pe,this).attr("transform",Iu`translate(${f?w=>f[w]:_},${s?w=>s[w]:b})${c?w=>` rotate(${c[w]})`:p?` rotate(${p})`:""}${d==="start"?"":d==="end"?u?w=>` translate(0,${u[w]})`:` translate(0,${h})`:u?w=>` translate(0,${u[w]/2})`:` translate(0,${h/2})`}`).attr("d",u?w=>{const x=On();return m.draw(x,u[w],g),x}:(()=>{const w=On();return m.draw(w,h,g),w})()).call(Nn,this,i)).node()}}function x9(t,e={}){const{x:n=oe,...i}=e;return new y2(t,{...i,x:n})}function k9(t,e={}){const{y:n=oe,...i}=e;return new y2(t,{...i,y:n})}function ii(t,e){return arguments.length<2&&!ei(t)&&(e=t,t=null),e===void 0&&(e={}),[t,e]}function Rl({anchor:t}={},e){return t===void 0?e[0]:Ze(t,"anchor",e)}function w2(t){return Rl(t,["left","right"])}function v2(t){return Rl(t,["right","left"])}function x2(t){return Rl(t,["bottom","top"])}function k2(t){return Rl(t,["top","bottom"])}function M2(){const[t,e]=ii(...arguments);return T2("y",w2(e),t,e)}function M9(){const[t,e]=ii(...arguments);return T2("fy",v2(e),t,e)}function S2(){const[t,e]=ii(...arguments);return C2("x",x2(e),t,e)}function S9(){const[t,e]=ii(...arguments);return C2("fx",k2(e),t,e)}function T2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="y"?6:0,tickPadding:m,tickRotate:g,x:_,margin:b,marginTop:v=b===void 0?20:b,marginRight:w=b===void 0?e==="right"?40:0:b,marginBottom:x=b===void 0?20:b,marginLeft:k=b===void 0?e==="left"?40:0:b,label:S,labelAnchor:T,labelArrow:A,labelOffset:F,...C}){return d=Lt(d),m=Lt(m),g=Lt(g),T!==void 0&&(T=Ze(T,"labelAnchor",["center","top","bottom"])),A=I2(A),Gg(d&&!de(o)?T9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:g,x:_,...C}):null,de(f)?null:$9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:g,x:_,marginTop:v,marginRight:w,marginBottom:x,marginLeft:k,...C}),!de(f)&&S!==null?Il([],N2({fill:f,fillOpacity:s,...C},function(I,L,G,$,B){const z=$[t],{marginTop:Z,marginRight:Q,marginBottom:W,marginLeft:U}=t==="y"&&B.inset||B,Y=T??(z.bandwidth?"center":"top"),K=F??(e==="right"?Q:U)-3;return Y==="center"?(this.textAnchor=void 0,this.lineAnchor=e==="right"?"bottom":"top",this.frameAnchor=e,this.rotate=-90):(this.textAnchor=e==="right"?"end":"start",this.lineAnchor=Y,this.frameAnchor=`${Y}-${e}`,this.rotate=0),this.dy=Y==="top"?3-Z:Y==="bottom"?W-3:0,this.dx=e==="right"?K:-K,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[L2(t,z,{anchor:e,label:S,labelAnchor:Y,labelArrow:A})]}}}})):null)}function C2(t,e,n,{color:i="currentColor",opacity:r=1,stroke:o=i,strokeOpacity:a=r,strokeWidth:l=1,fill:f=i,fillOpacity:s=r,textAnchor:u,textStroke:c,textStrokeOpacity:h,textStrokeWidth:p,tickSize:d=t==="x"?6:0,tickPadding:m,tickRotate:g,y:_,margin:b,marginTop:v=b===void 0?e==="top"?30:0:b,marginRight:w=b===void 0?20:b,marginBottom:x=b===void 0?e==="bottom"?30:0:b,marginLeft:k=b===void 0?20:b,label:S,labelAnchor:T,labelArrow:A,labelOffset:F,...C}){return d=Lt(d),m=Lt(m),g=Lt(g),T!==void 0&&(T=Ze(T,"labelAnchor",["center","left","right"])),A=I2(A),Gg(d&&!de(o)?C9(t,e,n,{stroke:o,strokeOpacity:a,strokeWidth:l,tickSize:d,tickPadding:m,tickRotate:g,y:_,...C}):null,de(f)?null:A9(t,e,n,{fill:f,fillOpacity:s,stroke:c,strokeOpacity:h,strokeWidth:p,textAnchor:u,tickSize:d,tickPadding:m,tickRotate:g,y:_,marginTop:v,marginRight:w,marginBottom:x,marginLeft:k,...C}),!de(f)&&S!==null?Il([],N2({fill:f,fillOpacity:s,...C},function(I,L,G,$,B){const z=$[t],{marginTop:Z,marginRight:Q,marginBottom:W,marginLeft:U}=t==="x"&&B.inset||B,Y=T??(z.bandwidth?"center":"right"),K=F??(e==="top"?Z:W)-3;return Y==="center"?(this.frameAnchor=e,this.textAnchor=void 0):(this.frameAnchor=`${e}-${Y}`,this.textAnchor=Y==="right"?"end":"start"),this.lineAnchor=e,this.dy=e==="top"?-K:K,this.dx=Y==="right"?Q-3:Y==="left"?3-U:0,this.ariaLabel=`${t}-axis label`,{facets:[[0]],channels:{text:{value:[L2(t,z,{anchor:e,label:S,labelAnchor:Y,labelArrow:A})]}}}})):null)}function T9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="y"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetLeft:u=s,insetRight:c=s,dx:h=0,y:p=t==="y"?void 0:null,...d}){return pr(k9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinecap:r,strokeLinejoin:o,facetAnchor:a,frameAnchor:l,y:p,...d,dx:e==="left"?+h-me+ +u:+h+me-c,anchor:"start",length:f,shape:e==="left"?P9:O9})}function C9(t,e,n,{strokeWidth:i=1,strokeLinecap:r=null,strokeLinejoin:o=null,facetAnchor:a=e+(t==="x"?"-empty":""),frameAnchor:l=e,tickSize:f,inset:s=0,insetTop:u=s,insetBottom:c=s,dy:h=0,x:p=t==="x"?void 0:null,...d}){return pr(x9,t,e,`${t}-axis tick`,n,{strokeWidth:i,strokeLinejoin:o,strokeLinecap:r,facetAnchor:a,frameAnchor:l,x:p,...d,dy:e==="bottom"?+h-me-c:+h+me+ +u,anchor:"start",length:f,shape:e==="bottom"?I9:R9})}function $9(t,e,n,{facetAnchor:i=e+(t==="y"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>60?4*Math.cos(a*Jg):0),text:f,textAnchor:s=Math.abs(a)>60?"middle":e==="left"?"end":"start",lineAnchor:u=a>60?"top":a<-60?"bottom":"middle",fontVariant:c,inset:h=0,insetLeft:p=h,insetRight:d=h,dx:m=0,y:g=t==="y"?void 0:null,..._}){return pr(a9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,y:g,..._,dx:e==="left"?+m-o-l+ +p:+m+ +o+ +l-d},function(b,v,w,x,k){c===void 0&&(this.fontVariant=F2(b)),f===void 0&&(k.text=D2(b,v,w,x,e))})}function A9(t,e,n,{facetAnchor:i=e+(t==="x"?"-empty":""),frameAnchor:r=e,tickSize:o,tickRotate:a=0,tickPadding:l=Math.max(3,9-o)+(Math.abs(a)>=10?4*Math.cos(a*Jg):0),text:f,textAnchor:s=Math.abs(a)>=10?a<0^e==="bottom"?"start":"end":"middle",lineAnchor:u=Math.abs(a)>=10?"middle":e==="bottom"?"top":"bottom",fontVariant:c,inset:h=0,insetTop:p=h,insetBottom:d=h,dy:m=0,x:g=t==="x"?void 0:null,..._}){return pr(o9,t,e,`${t}-axis tick label`,n,{facetAnchor:i,frameAnchor:r,text:f===void 0?null:f,textAnchor:s,lineAnchor:u,fontVariant:c,rotate:a,x:g,..._,dy:e==="bottom"?+m+ +o+ +l-d:+m-o-l+ +p},function(b,v,w,x,k){c===void 0&&(this.fontVariant=F2(b)),f===void 0&&(k.text=D2(b,v,w,x,e))})}function E9(){const[t,e]=ii(...arguments);return $2("y",w2(e),t,e)}function N9(){const[t,e]=ii(...arguments);return $2("fy",v2(e),t,e)}function D9(){const[t,e]=ii(...arguments);return A2("x",x2(e),t,e)}function F9(){const[t,e]=ii(...arguments);return A2("fx",k2(e),t,e)}function $2(t,e,n,{y:i=t==="y"?void 0:null,x:r=null,x1:o=e==="left"?r:null,x2:a=e==="right"?r:null,...l}){return pr(f2,t,e,`${t}-grid`,n,{y:i,x1:o,x2:a,...E2(l)})}function A2(t,e,n,{x:i=t==="x"?void 0:null,y:r=null,y1:o=e==="top"?r:null,y2:a=e==="bottom"?r:null,...l}){return pr(Ll,t,e,`${t}-grid`,n,{x:i,y1:o,y2:a,...E2(l)})}function E2({color:t="currentColor",opacity:e=.1,stroke:n=t,strokeOpacity:i=e,strokeWidth:r=1,...o}){return{stroke:n,strokeOpacity:i,strokeWidth:r,...o}}function N2({fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u=!1},c){return[,t]=$n(t),[,e]=fe(e),{facet:"super",x:null,y:null,fill:t,fillOpacity:e,fontFamily:n,fontSize:i,fontStyle:r,fontVariant:o,fontWeight:a,monospace:l,pointerEvents:f,shapeRendering:s,clip:u,initializer:c}}function pr(t,e,n,i,r,o,a){let l;function f(c,h,p,d,m,g){const _=c==null&&(e==="fx"||e==="fy"),{[e]:b}=d;if(!b)throw new Error(`missing scale: ${e}`);const v=b.domain();let{interval:w,ticks:x,tickFormat:k,tickSpacing:S=e==="x"?80:35}=o;if(typeof x=="string"&&R2(b)&&(w=x,x=void 0),x===void 0&&(x=hr(w,b.type)??L9(b,S)),c==null){if(ei(x))c=Se(x);else if(Ui(x))c=$f(x,...Ae(v));else if(b.interval){let A=b.interval;if(b.ticks){const[F,C]=Ae(v),I=(C-F)/A[vo];A=uh(A,I/x)??A,c=$f(A,F,C)}else{c=v;const F=c.length;A=uh(A,F/x)??A,A!==b.interval&&(c=$f(A,...Ae(c)))}if(A===b.interval){const F=Math.round(c.length/x);F>1&&(c=c.filter((C,I)=>I%F===0))}}else b.ticks?c=b.ticks(x):c=v;if(!b.ticks&&c.length&&c!==v){const A=new Za(v);c=c.filter(F=>A.has(F)),c.length||Bn(`Warning: the ${e}-axis ticks appear to not align with the scale domain, resulting in no ticks. Try different ticks?`)}e==="y"||e==="x"?h=[An(c)]:l[e]={scale:e,value:oe}}a==null||a.call(this,b,c,x,k,l);const T=Object.fromEntries(Object.entries(l).map(([A,F])=>[A,{...F,value:Kt(c,F.value)}]));return _&&(h=g.filterFacets(c,T)),{data:c,facets:h,channels:T}}const s=or(o).initializer,u=t(r,or({...o,initializer:f},s));return r==null?(l=u.channels,u.channels={}):l={},u.ariaLabel=i,u.clip===void 0&&(u.clip=!1),u}function L9(t,e){const[n,i]=Ae(t.range());return(i-n)/e}function D2(t,e,n,i,r){return{value:Uu(t,e,n,i,r)}}function Uu(t,e,n,i,r){return typeof i=="function"?i:i===void 0&&e&&ve(e)?b5(t.type,e,r)??Mi:t.tickFormat?t.tickFormat(typeof n=="number"?n:null,i):i===void 0?Mi:typeof i=="string"?(ve(t.domain())?yo:ur)(i):xo(i)}function $f(t,e,n){return t.range(e,t.offset(t.floor(n)))}const I9={draw(t,e){t.moveTo(0,0),t.lineTo(0,e)}},R9={draw(t,e){t.moveTo(0,0),t.lineTo(0,-e)}},P9={draw(t,e){t.moveTo(0,0),t.lineTo(-e,0)}},O9={draw(t,e){t.moveTo(0,0),t.lineTo(e,0)}};function F2(t){return t.bandwidth&&!t.interval?void 0:"tabular-nums"}function L2(t,e,{anchor:n,label:i=e.label,labelAnchor:r,labelArrow:o}={}){if(!(i==null||i.inferred&&R2(e)&&/^(date|time|year)$/i.test(i))){if(i=String(i),o==="auto"&&(o=(!e.bandwidth||e.interval)&&!/[]/.test(i)),!o)return i;if(o===!0){const a=x7(e);a&&(o=/x$/.test(t)||r==="center"?/x$/.test(t)===a<0?"left":"right":a<0?"up":"down")}switch(o){case"left":return` ${i}`;case"right":return`${i} `;case"up":return n==="right"?`${i} `:` ${i}`;case"down":return n==="right"?`${i} `:` ${i}`}return i}}function I2(t="auto"){return de(t)?!1:typeof t=="boolean"?t:Ze(t,"labelArrow",["auto","up","right","down","left"])}function R2(t){return ve(t.domain())}function Wh(t,e){if(e==null)return e;const n=t(e);if(!n)throw new Error(`scale not found: ${e}`);return n}function U9(t,{opacity:e,...n}={}){if(!Ai(t)&&!Vg(t))throw new Error(`swatches legend requires ordinal or threshold color scale (not ${t.type})`);return P2(t,n,(i,r,o,a)=>i.append("svg").attr("width",o).attr("height",a).attr("fill",r.scale).attr("fill-opacity",fe(e)[1]).append("rect").attr("width","100%").attr("height","100%"))}function z9(t,{fill:e=(s=>(s=t.hint)==null?void 0:s.fill)()!==void 0?t.hint.fill:"none",fillOpacity:n=1,stroke:i=(u=>(u=t.hint)==null?void 0:u.stroke)()!==void 0?t.hint.stroke:de(e)?"currentColor":"none",strokeOpacity:r=1,strokeWidth:o=1.5,r:a=4.5,...l}={},f){const[c,h]=$n(e),[p,d]=$n(i),m=Wh(f,c),g=Wh(f,p),_=a*a*Math.PI;return n=fe(n)[1],r=fe(r)[1],o=fe(o)[1],P2(t,l,(b,v,w,x)=>b.append("svg").attr("viewBox","-8 -8 16 16").attr("width",w).attr("height",x).attr("fill",c==="color"?k=>m.scale(k):h).attr("fill-opacity",n).attr("stroke",p==="color"?k=>g.scale(k):d).attr("stroke-opacity",r).attr("stroke-width",o).append("path").attr("d",k=>{const S=On();return t.scale(k).draw(S,_),S}))}function P2(t,e={},n){let{columns:i,tickFormat:r,fontVariant:o=Qg(t),swatchSize:a=15,swatchWidth:l=a,swatchHeight:f=a,marginLeft:s=0,className:u,style:c,width:h}=e;const p=Cu(e);u=Su(u),r=Uu(t.scale,t.domain,void 0,r);const d=qt("div",p).attr("class",`${u}-swatches ${u}-swatches-${i!=null?"columns":"wrap"}`);let m;return i!=null?(m=`:where(.${u}-swatches-columns .${u}-swatch) {
  display: flex;
  align-items: center;
  break-inside: avoid;
  padding-bottom: 1px;
}
:where(.${u}-swatches-columns .${u}-swatch::before) {
  flex-shrink: 0;
}
:where(.${u}-swatches-columns .${u}-swatch-label) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}`,d.style("columns",i).selectAll().data(t.domain).enter().append("div").attr("class",`${u}-swatch`).call(n,t,l,f).call(g=>g.append("div").attr("class",`${u}-swatch-label`).attr("title",r).text(r))):(m=`:where(.${u}-swatches-wrap) {
  display: flex;
  align-items: center;
  min-height: 33px;
  flex-wrap: wrap;
}
:where(.${u}-swatches-wrap .${u}-swatch) {
  display: inline-flex;
  align-items: center;
  margin-right: 1em;
}`,d.selectAll().data(t.domain).enter().append("span").attr("class",`${u}-swatch`).call(n,t,l,f).append(function(){return this.ownerDocument.createTextNode(r.apply(this,arguments))})),d.call(g=>g.insert("style","*").text(`:where(.${u}-swatches) {
  font-family: system-ui, sans-serif;
  font-size: 10px;
  margin-bottom: 0.5em;
}
:where(.${u}-swatch > svg) {
  margin-right: 0.5em;
  overflow: visible;
}
${m}`)).style("margin-left",s?`${+s}px`:null).style("width",h===void 0?null:`${+h}px`).style("font-variant",ee(o,"normal")).call(Tu,c).node()}const Ns=new Map([["symbol",z9],["color",U2],["opacity",q9]]);function B9(t,e,n={}){return(i,r)=>{if(!Ns.has(i))throw new Error(`unknown legend type: ${i}`);if(i in t)return Ns.get(i)(t[i],O2(e,n[i],r),o=>t[o])}}function O2({className:t,...e},{label:n,ticks:i,tickFormat:r}={},o){return U5(o,{className:t,...e},{label:n,ticks:i,tickFormat:r})}function U2(t,{legend:e=!0,...n}){if(e===!0&&(e=t.type==="ordinal"?"swatches":"ramp"),t.domain!==void 0)switch(`${e}`.toLowerCase()){case"swatches":return U9(t,n);case"ramp":return G7(t,n);default:throw new Error(`unknown legend type: ${e}`)}}function q9({type:t,interpolate:e,...n},{legend:i=!0,color:r=Xn(0,0,0),...o}){if(!e)throw new Error(`${t} opacity scales are not supported`);if(i===!0&&(i="ramp"),`${i}`.toLowerCase()!=="ramp")throw new Error(`${i} opacity legends are not supported`);return U2({type:t,...n,interpolate:W9(r)},{legend:i,...o})}function W9(t){const{r:e,g:n,b:i}=Xn(t)||Xn(0,0,0);return r=>`rgba(${e},${n},${i},${r})`}function Y9(t,e,n){const i=[];for(const[r,o]of Ns){const a=n[r];if(a!=null&&a.legend&&r in t){const l=o(t[r],O2(e,t[r],a),f=>t[f]);l!=null&&i.push(l)}}return i}const H9={ariaLabel:"frame",fill:"none",stroke:"currentColor",clip:!1},V9={ariaLabel:"frame",fill:null,stroke:"currentColor",strokeLinecap:"square",clip:!1};class G9 extends se{constructor(e={}){const{anchor:n=null,inset:i=0,insetTop:r=i,insetRight:o=i,insetBottom:a=i,insetLeft:l=i,rx:f,ry:s}=e;super(la,void 0,e,n==null?H9:V9),this.anchor=ug(n,"anchor",["top","right","bottom","left"]),this.insetTop=Lt(r),this.insetRight=Lt(o),this.insetBottom=Lt(a),this.insetLeft=Lt(l),this.rx=Lt(f),this.ry=Lt(s)}render(e,n,i,r,o){const{marginTop:a,marginRight:l,marginBottom:f,marginLeft:s,width:u,height:c}=r,{anchor:h,insetTop:p,insetRight:d,insetBottom:m,insetLeft:g,rx:_,ry:b}=this,v=s+g,w=u-l-d,x=a+p,k=c-f-m;return qt(h?"svg:line":"svg:rect",o).datum(0).call(Re,this,r,o).call(Pe,this).call(Nn,this,i).call(Te,this,{}).call(h==="left"?S=>S.attr("x1",v).attr("x2",v).attr("y1",x).attr("y2",k):h==="right"?S=>S.attr("x1",w).attr("x2",w).attr("y1",x).attr("y2",k):h==="top"?S=>S.attr("x1",v).attr("x2",w).attr("y1",x).attr("y2",x):h==="bottom"?S=>S.attr("x1",v).attr("x2",w).attr("y1",k).attr("y2",k):S=>S.attr("x",v).attr("y",x).attr("width",w-v).attr("height",k-x).attr("rx",_).attr("ry",b)).node()}}function X9(t){return new G9(t)}const Af={ariaLabel:"tip",fill:"var(--plot-background)",stroke:"currentColor"},j9=new Set(["geometry","href","src","ariaLabel","scales"]);class Z9 extends se{constructor(e,n={}){n.tip&&(n={...n,tip:!1}),n.title===void 0&&ei(e)&&pg(e)&&(n={...n,title:oe});const{x:i,y:r,x1:o,x2:a,y1:l,y2:f,anchor:s,preferredAnchor:u="bottom",monospace:c,fontFamily:h=c?"ui-monospace, monospace":void 0,fontSize:p,fontStyle:d,fontVariant:m,fontWeight:g,lineHeight:_=1,lineWidth:b=20,frameAnchor:v,format:w,textAnchor:x="start",textOverflow:k,textPadding:S=8,title:T,pointerSize:A=12,pathFilter:F="drop-shadow(0 3px 4px rgba(0,0,0,0.2))"}=n;super(e,{x:{value:o!=null&&a!=null?null:i,scale:"x",optional:!0},y:{value:l!=null&&f!=null?null:r,scale:"y",optional:!0},x1:{value:o,scale:"x",optional:a==null},y1:{value:l,scale:"y",optional:f==null},x2:{value:a,scale:"x",optional:o==null},y2:{value:f,scale:"y",optional:l==null},title:{value:T,optional:!0}},n,Af),this.anchor=Ms(s,"anchor"),this.preferredAnchor=Ms(u,"preferredAnchor"),this.frameAnchor=Tl(v),this.textAnchor=ee(x,"middle"),this.textPadding=+S,this.pointerSize=+A,this.pathFilter=le(F),this.lineHeight=+_,this.lineWidth=+b,this.textOverflow=c2(k),this.monospace=!!c,this.fontFamily=le(h),this.fontSize=Lt(p),this.fontStyle=le(d),this.fontVariant=le(m),this.fontWeight=le(g);for(const C in Af)C in this.channels&&(this[C]=Af[C]);this.splitLines=d2(this),this.clipLine=p2(this),this.format={...w}}render(e,n,i,r,o){const a=this,{x:l,y:f,fx:s,fy:u}=n,{ownerSVGElement:c,document:h}=o,{anchor:p,monospace:d,lineHeight:m,lineWidth:g}=this,{textPadding:_,pointerSize:b,pathFilter:v}=this,{marginTop:w,marginLeft:x}=r,{x1:k,y1:S,x2:T,y2:A,x:F=k??T,y:C=S??A}=i,I=s?s(e.fx)-x:0,L=u?u(e.fy)-w:0,[G,$]=Co(this,r),B=Zg(i,G),z=Kg(i,$),Z=d?Ou:Pu,Q=Z(Yi);let W,U;"title"in i?(W=i.channels,U=ex):(W=tx.call(this,i,n),U=nx);const Y=qt("svg:g",o).call(Re,this,r,o).call(h2,this).call(Te,this,{x:F&&l,y:C&&f}).call(et=>et.selectAll().data(e).enter().append("g").attr("transform",j=>`translate(${Math.round(B(j))},${Math.round(z(j))})`).call(Pe,this).call(j=>j.append("path").attr("filter",v)).call(j=>j.append("text").each(function(q){const N=Ir(this);this.setAttribute("fill","currentColor"),this.setAttribute("fill-opacity",1),this.setAttribute("stroke","none");const E=U.call(a,q,e,W,n,i);if(typeof E=="string")for(const O of a.splitLines(E))K(N,{value:a.clipLine(O)});else{const O=new Set;for(const tt of E){const{label:P=""}=tt;P&&O.has(P)||(O.add(P),K(N,tt))}}})));function K(et,{label:j,value:q,color:N,opacity:E}){j??(j=""),q??(q="");const O=N!=null||E!=null;let tt,P=g*100;const[pt]=lr(j,P,Z,Q);if(pt>=0)j=j.slice(0,pt).trimEnd()+Yi,tt=q.trim(),q="";else{(j||!q&&!O)&&(q=" "+q);const[mt]=lr(q,P-Z(j),Z,Q);mt>=0&&(tt=q.trim(),q=q.slice(0,mt).trimEnd()+Yi)}const rt=et.append("tspan").attr("x",0).attr("dy",`${m}em`).text("");j&&rt.append("tspan").attr("font-weight","bold").text(j),q&&rt.append(()=>h.createTextNode(q)),O&&rt.append("tspan").text(" ").attr("fill",N).attr("fill-opacity",E).style("user-select","none"),tt&&rt.append("title").text(tt)}function ft(){const{width:et,height:j}=r.facet??r;Y.selectChildren().each(function(q){let{x:N,width:E,height:O}=this.getBBox();E=Math.round(E),O=Math.round(O);let tt=p;if(tt===void 0){const rt=B(q)+I,mt=z(q)+L,nt=rt+E+b+_*2<et,ht=rt-E-b-_*2>0,kt=mt+O+b+_*2<j,ue=mt-O-b-_*2>0;tt=nt&&ht?kt&&ue?a.preferredAnchor:ue?"bottom":"top":kt&&ue?nt?"left":"right":(nt||ht)&&(kt||ue)?`${ue?"bottom":"top"}-${nt?"left":"right"}`:a.preferredAnchor}const P=this.firstChild,pt=this.lastChild;if(P.setAttribute("d",J9(tt,b,_,E,O)),N)for(const rt of pt.childNodes)rt.setAttribute("x",-N);pt.setAttribute("y",`${+K9(tt,pt.childNodes.length,m).toFixed(6)}em`),pt.setAttribute("transform",`translate(${Q9(tt,b,_,E,O)})`)}),Y.attr("visibility",null)}return e.length&&(Y.attr("visibility","hidden"),c.isConnected?Promise.resolve().then(ft):typeof requestAnimationFrame<"u"&&requestAnimationFrame(ft)),Y.node()}}function z2(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=Ml(e,n)),new Z9(t,{...i,x:e,y:n})}function K9(t,e,n){return/^top(?:-|$)/.test(t)?.94-n:-.29-e*n}function Q9(t,e,n,i,r){switch(t){case"middle":return[-i/2,r/2];case"top-left":return[n,e+n];case"top":return[-i/2,e/2+n];case"top-right":return[-i-n,e+n];case"right":return[-e/2-i-n,r/2];case"bottom-left":return[n,-e-n];case"bottom":return[-i/2,-e/2-n];case"bottom-right":return[-i-n,-e-n];case"left":return[n+e/2,r/2]}}function J9(t,e,n,i,r){const o=i+n*2,a=r+n*2;switch(t){case"middle":return`M${-o/2},${-a/2}h${o}v${a}h${-o}z`;case"top-left":return`M0,0l${e},${e}h${o-e}v${a}h${-o}z`;case"top":return`M0,0l${e/2},${e/2}h${(o-e)/2}v${a}h${-o}v${-a}h${(o-e)/2}z`;case"top-right":return`M0,0l${-e},${e}h${e-o}v${a}h${o}z`;case"right":return`M0,0l${-e/2},${-e/2}v${e/2-a/2}h${-o}v${a}h${o}v${e/2-a/2}z`;case"bottom-left":return`M0,0l${e},${-e}h${o-e}v${-a}h${-o}z`;case"bottom":return`M0,0l${e/2},${-e/2}h${(o-e)/2}v${-a}h${-o}v${a}h${(o-e)/2}z`;case"bottom-right":return`M0,0l${-e},${-e}h${e-o}v${-a}h${o}z`;case"left":return`M0,0l${e/2},${-e/2}v${e/2-a/2}h${o}v${a}h${-o}v${e/2-a/2}z`}}function tx({channels:t},e){var r,o;const n={};let i=this.format;i=Yh(i,t,"x"),i=Yh(i,t,"y"),this.format=i;for(const a in i){const l=i[a];if(!(l===null||l===!1))if(a==="fx"||a==="fy")n[a]=!0;else{const f=yh(t,a);f&&(n[a]=f)}}for(const a in t){if(a in n||a in i||j9.has(a))continue;const l=yh(t,a);l&&(n[a]=l)}this.facet&&(e.fx&&!("fx"in i)&&(n.fx=!0),e.fy&&!("fy"in i)&&(n.fy=!0));for(const a in n){const l=this.format[a];if(typeof l=="string"){const f=((r=n[a])==null?void 0:r.value)??((o=e[a])==null?void 0:o.domain())??[];this.format[a]=(ve(f)?yo:ur)(l)}else if(l===void 0||l===!0){const f=e[a];this.format[a]=f!=null&&f.bandwidth?Uu(f,f.domain()):Mi}}return n}function Yh(t,e,n){if(!(n in t))return t;const i=`${n}1`,r=`${n}2`;if((i in t||!(i in e))&&(r in t||!(r in e)))return t;const o=Object.entries(t),a=t[n];return o.splice(o.findIndex(([l])=>l===n)+1,0,[i,a],[r,a]),Object.fromEntries(o)}function ex(t,e,{title:n}){return Mi(n.value[t],t)}function*nx(t,e,n,i,r){for(const o in n){if(o==="fx"||o==="fy"){yield{label:Va(i,n,o),value:this.format[o](e[o],t)};continue}if(o==="x1"&&"x2"in n||o==="y1"&&"y2"in n)continue;const a=n[o];if(o==="x2"&&"x1"in n)yield{label:Vh(i,n,"x"),value:Hh(this.format.x2,n.x1,a,t)};else if(o==="y2"&&"y1"in n)yield{label:Vh(i,n,"y"),value:Hh(this.format.y2,n.y1,a,t)};else{const l=a.value[t],f=a.scale;if(!Zn(l)&&f==null)continue;yield{label:Va(i,n,o),value:this.format[o](l,t),color:f==="color"?r[o][t]:null,opacity:f==="opacity"?r[o][t]:null}}}}function Hh(t,e,n,i){var r;return(r=n.hint)!=null&&r.length?`${t(n.value[i]-e.value[i],i)}`:`${t(e.value[i],i)}${t(n.value[i],i)}`}function Vh(t,e,n){const i=Va(t,e,`${n}1`,n),r=Va(t,e,`${n}2`,n);return i===r?i:`${i}${r}`}function Va(t,e,n,i=n){const r=e[n],o=t[(r==null?void 0:r.scale)??n];return String((o==null?void 0:o.label)??(r==null?void 0:r.label)??i)}function Oe(t={}){var Q;const{facet:e,style:n,title:i,subtitle:r,caption:o,ariaLabel:a,ariaDescription:l}=t,f=Su(t.className),s=t.marks===void 0?[]:Xh(t.marks);s.push(...ux(s));const u=fx(e,t),c=new Map;for(const W of s){const U=jh(W,u,t);U&&c.set(W,U)}const h=new Map;u&&Mr(h,[u],t),Mr(h,c,t);const p=Xh(cx(s,h,t));for(const W of p){const U=jh(W,u,t);U&&c.set(W,U)}s.unshift(...p);let d=D7(h,t);if(d!==void 0){const W=u?Sf(d,u):void 0;for(const Y of s){if(Y.facet===null||Y.facet==="super")continue;const K=c.get(Y);K!==void 0&&(K.facetsIndex=Y.fx!=null||Y.fy!=null?Sf(d,K):W)}const U=new Set;for(const{facetsIndex:Y}of c.values())Y==null||Y.forEach((K,ft)=>{(K==null?void 0:K.length)>0&&U.add(ft)});d.forEach(0<U.size&&U.size<d.length?(Y,K)=>Y.empty=!U.has(K):Y=>Y.empty=!1);for(const Y of s)if(Y.facet==="exclude"){const K=c.get(Y);K!==void 0&&(K.facetsIndex=I7(K.facetsIndex))}}for(const W of zt.keys())xs(t[W])&&W!=="fx"&&W!=="fy"&&h.set(W,[]);const m=new Map;for(const W of s){if(m.has(W))throw new Error("duplicate mark; each mark must be unique");const{facetsIndex:U,channels:Y}=c.get(W)??{},{data:K,facets:ft,channels:et}=W.initialize(U,Y,t);zu(et,t),m.set(W,{data:K,facets:ft,channels:et})}const g=$s(Mr(h,m,t),t),_=E7(g,s,t);w7(g,_);const b=$h(g),{fx:v,fy:w}=b,x=v||w?Wg(g,_):_,k=v||w?_x(b,_):_,S=Cu(t),T=S.document,A=tl("svg").call(T.documentElement);let F=A;S.ownerSVGElement=A,S.className=f,S.projection=D8(t,x),S.filterFacets=(W,U)=>Sf(d,{channels:U,groups:Du(W,U)}),S.getMarkState=W=>{const U=m.get(W),Y=c.get(W);return{...U,channels:{...U.channels,...Y==null?void 0:Y.channels}}},S.dispatchValue=W=>{F.value!==W&&(F.value=W,F.dispatchEvent(new Event("input",{bubbles:!0})))};const C=new Set;for(const[W,U]of m)if(W.initializer!=null){const Y=W.facet==="super"?k:x,K=W.initializer(U.data,U.facets,U.channels,b,Y,S);if(K.data!==void 0&&(U.data=K.data),K.facets!==void 0&&(U.facets=K.facets),K.channels!==void 0){const{fx:ft,fy:et,...j}=K.channels;lx(j),Object.assign(U.channels,j);for(const q of Object.values(j)){const{scale:N}=q;N!=null&&!B5(zt.get(N))&&(B2(q,t),C.add(N))}(ft!=null||et!=null)&&c.set(W,!0)}}if(C.size){const W=new Map;Mr(W,m,t,ft=>C.has(ft)),Mr(h,m,t,ft=>C.has(ft));const U=bx($s(W,t),g),{scales:Y,...K}=$h(U);Object.assign(g,U),Object.assign(b,K),Object.assign(b.scales,Y)}let I,L;d!==void 0&&(I={x:v==null?void 0:v.domain(),y:w==null?void 0:w.domain()},d=F7(d,I),L=L7(v,w,_));for(const[W,U]of m)U.values=W.scale(U.channels,b,S);const{width:G,height:$}=_;Ir(A).attr("class",f).attr("fill","currentColor").attr("font-family","system-ui, sans-serif").attr("font-size",10).attr("text-anchor","middle").attr("width",G).attr("height",$).attr("viewBox",`0 0 ${G} ${$}`).attr("aria-label",a).attr("aria-description",l).call(W=>W.append("style").text(`:where(.${f}) {
  --plot-background: white;
  display: block;
  height: auto;
  height: intrinsic;
  max-width: 100%;
}
:where(.${f} text),
:where(.${f} tspan) {
  white-space: pre;
}`)).call(Tu,n);for(const W of s){const{channels:U,values:Y,facets:K}=m.get(W);if(d===void 0||W.facet==="super"){let ft=null;if(K&&(ft=K[0],ft=W.filter(ft,U,Y),ft.length===0))continue;const et=W.render(ft,b,Y,k,S);if(et==null)continue;A.appendChild(et)}else{let ft;for(const et of d){if(!(((Q=W.facetAnchor)==null?void 0:Q.call(W,d,I,et))??!et.empty))continue;let j=null;if(K){const N=c.has(W);if(j=K[N?et.i:0],j=W.filter(j,U,Y),j.length===0)continue;!N&&j===K[0]&&(j=$5(j)),j.fx=et.x,j.fy=et.y,j.fi=et.i}const q=W.render(j,b,Y,x,S);if(q!=null){(ft??(ft=Ir(A).append("g"))).append(()=>q).datum(et);for(const N of["aria-label","aria-description","aria-hidden","transform"])q.hasAttribute(N)&&(ft.attr(N,q.getAttribute(N)),q.removeAttribute(N))}}ft==null||ft.selectChildren().attr("transform",L)}}const B=Y9(g,S,t),{figure:z=i!=null||r!=null||o!=null||B.length>0}=t;z&&(F=T.createElement("figure"),F.className=`${f}-figure`,F.style.maxWidth="initial",i!=null&&F.append(Gh(T,i,"h2")),r!=null&&F.append(Gh(T,r,"h3")),F.append(...B,A),o!=null&&F.append(ix(T,o))),F.scale=$7(b.scales),F.legend=B9(g,S,t);const Z=w8();return Z>0&&Ir(A).append("text").attr("x",G).attr("y",20).attr("dy","-1em").attr("text-anchor","end").attr("font-family","initial").text("").append("title").text(`${Z.toLocaleString("en-US")} warning${Z===1?"":"s"}. Please check the console.`),F}function Gh(t,e,n){if(e.ownerDocument)return e;const i=t.createElement(n);return i.append(e),i}function ix(t,e){const n=t.createElement("figcaption");return n.append(e),n}function rx({marks:t=[],...e}={}){return Oe({...e,marks:[...t,this]})}se.prototype.plot=rx;function Xh(t){return t.flat(1/0).filter(e=>e!=null).map(ox)}function ox(t){return typeof t.render=="function"?t:new ax(t)}class ax extends se{constructor(e){if(typeof e!="function")throw new TypeError("invalid mark; missing render function");super(),this.render=e}render(){}}function zu(t,e){for(const n in t)B2(t[n],e);return t}function B2(t,e){const{scale:n,transform:i=!0}=t;if(n==null||!i)return;const{type:r,percent:o,interval:a,transform:l=o?f=>f*100:dg(a,r)}=e[n]??{};l!=null&&(t.value=Yt(t.value,l),t.transform=!1)}function lx(t){for(const e in t)xg(e,t[e])}function Mr(t,e,n,i=x5){var r,o;for(const{channels:a}of e.values())for(const l in a){const f=a[l],{scale:s}=f;if(s!=null&&i(s))if(s==="projection"){if(!R8(n)){const u=((r=n.x)==null?void 0:r.domain)===void 0,c=((o=n.y)==null?void 0:o.domain)===void 0;if(u||c){const[h,p]=O8(f);u&&Ef(t,"x",h),c&&Ef(t,"y",p)}}}else Ef(t,s,f)}return t}function Ef(t,e,n){const i=t.get(e);i!==void 0?i.push(n):t.set(e,[n])}function fx(t,e){if(t==null)return;const{x:n,y:i}=t;if(n==null&&i==null)return;const r=Se(t.data);if(r==null)throw new Error("missing facet data");const o={};n!=null&&(o.fx=to(r,{value:n,scale:"fx"})),i!=null&&(o.fy=to(r,{value:i,scale:"fy"})),zu(o,e);const a=Du(r,o);return{channels:o,groups:a,data:t.data}}function jh(t,e,n){var f;if(t.facet===null||t.facet==="super")return;const{fx:i,fy:r}=t;if(i!=null||r!=null){const s=Se(t.data??i??r);if(s===void 0)throw new Error(`missing facet data in ${t.ariaLabel}`);if(s===null)return;const u={};return i!=null&&(u.fx=to(s,{value:i,scale:"fx"})),r!=null&&(u.fy=to(s,{value:r,scale:"fy"})),zu(u,n),{channels:u,groups:Du(s,u)}}if(e===void 0)return;const{channels:o,groups:a,data:l}=e;if(t.facet!=="auto"||t.data===l)return{channels:o,groups:a};l.length>0&&(a.size>1||a.size===1&&o.fx&&o.fy&&[...a][0][1].size>1)&&((f=Se(t.data))==null?void 0:f.length)===l.length&&Bn(`Warning: the ${t.ariaLabel} mark appears to use faceted data, but isnt faceted. The mark data has the same length as the facet data and the mark facet option is "auto", but the mark data and facet data are distinct. If this mark should be faceted, set the mark facet option to true; otherwise, suppress this warning by setting the mark facet option to false.`)}function sx(t,e={}){return or({...e,x:null,y:null},(n,i,r,o,a,l)=>l.getMarkState(t))}function ux(t){const e=[];for(const n of t){let i=n.tip;if(i){i===!0?i={}:typeof i=="string"&&(i={pointer:i});let{pointer:r,preferredAnchor:o}=i;r=/^x$/i.test(r)?V7:/^y$/i.test(r)?Rh:jg,i=r(sx(n,i)),i.title=null,o===void 0&&(i.preferredAnchor=r===Rh?"left":"bottom");const a=z2(n.data,i);a.facet=n.facet,a.facetAnchor=n.facetAnchor,e.push(a)}}return e}function cx(t,e,n){let{projection:i,x:r={},y:o={},fx:a={},fy:l={},axis:f,grid:s,facet:u={},facet:{axis:c=f,grid:h}=u,x:{axis:p=f,grid:d=p===null?null:s}=r,y:{axis:m=f,grid:g=m===null?null:s}=o,fx:{axis:_=c,grid:b=_===null?null:h}=a,fy:{axis:v=c,grid:w=v===null?null:h}=l}=n;(i||!xs(r)&&!Zh("x",t))&&(p=d=null),(i||!xs(o)&&!Zh("y",t))&&(m=g=null),e.has("fx")||(_=b=null),e.has("fy")||(v=w=null),p===void 0&&(p=!Ko(t,"x")),m===void 0&&(m=!Ko(t,"y")),_===void 0&&(_=!Ko(t,"fx")),v===void 0&&(v=!Ko(t,"fy")),p===!0&&(p="bottom"),m===!0&&(m="left"),_===!0&&(_=p==="top"||p===null?"bottom":"top"),v===!0&&(v=m==="right"||m===null?"left":"right");const x=[];return Zo(x,w,N9,l),jo(x,v,M9,"right","left",u,l),Zo(x,b,F9,a),jo(x,_,S9,"top","bottom",u,a),Zo(x,g,E9,o),jo(x,m,M2,"left","right",n,o),Zo(x,d,D9,r),jo(x,p,S2,"bottom","top",n,r),x}function jo(t,e,n,i,r,o,a){if(!e)return;const l=hx(e);a=dx(l?i:e,o,a);const{line:f}=a;(n===M2||n===S2)&&f&&!Jr(f)&&t.push(X9(px(a))),t.push(n(a)),l&&t.push(n({...a,anchor:r,label:null}))}function Zo(t,e,n,i){!e||Jr(e)||t.push(n(mx(e,i)))}function hx(t){return/^\s*both\s*$/i.test(t)}function dx(t,e,{line:n=e.line,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h=e.label,labelAnchor:p,labelArrow:d=e.labelArrow,labelOffset:m}){return{anchor:t,line:n,ticks:i,tickSize:r,tickSpacing:o,tickPadding:a,tickFormat:l,tickRotate:f,fontVariant:s,ariaLabel:u,ariaDescription:c,label:h,labelAnchor:p,labelArrow:d,labelOffset:m}}function px(t){const{anchor:e,line:n}=t;return{anchor:e,facetAnchor:e+"-empty",stroke:n===!0?void 0:n}}function mx(t,{stroke:e=Sl(t)?t:void 0,ticks:n=gx(t)?t:void 0,tickSpacing:i,ariaLabel:r,ariaDescription:o}){return{stroke:e,ticks:n,tickSpacing:i,ariaLabel:r,ariaDescription:o}}function gx(t){switch(typeof t){case"number":return!0;case"string":return!Sl(t)}return ei(t)||typeof(t==null?void 0:t.range)=="function"}function Ko(t,e){const n=`${e}-axis `;return t.some(i=>{var r;return(r=i.ariaLabel)==null?void 0:r.startsWith(n)})}function Zh(t,e){for(const n of e)for(const i in n.channels){const{scale:r}=n.channels[i];if(r===t||r==="projection")return!0}return!1}function bx(t,e){for(const n in t){const i=t[n],r=e[n];i.label===void 0&&r&&(i.label=r.label)}return t}function _x({fx:t,fy:e},n){const{marginTop:i,marginRight:r,marginBottom:o,marginLeft:a,width:l,height:f}=Nu(n),s=t&&Kh(t),u=e&&Kh(e);return{marginTop:e?u[0]:i,marginRight:t?l-s[1]:r,marginBottom:e?f-u[1]:o,marginLeft:t?s[0]:a,inset:{marginTop:n.marginTop,marginRight:n.marginRight,marginBottom:n.marginBottom,marginLeft:n.marginLeft},width:l,height:f}}function Kh(t){const e=t.domain();let n=t(e[0]),i=t(e[e.length-1]);return i<n&&([n,i]=[i,n]),[n,i+t.bandwidth()]}const yx=new Map([["basis",X4],["basis-closed",j4],["basis-open",Z4],["bundle",K4],["bump-x",P4],["bump-y",O4],["cardinal",Q4],["cardinal-closed",J4],["cardinal-open",t5],["catmull-rom",e5],["catmull-rom-closed",n5],["catmull-rom-open",i5],["linear",wo],["linear-closed",r5],["monotone-x",o5],["monotone-y",a5],["natural",l5],["step",f5],["step-after",u5],["step-before",s5]]);function q2(t=wo,e){if(typeof t=="function")return t;const n=yx.get(`${t}`.toLowerCase());if(!n)throw new Error(`unknown curve: ${t}`);if(e!==void 0){if("beta"in n)return n.beta(e);if("tension"in n)return n.tension(e);if("alpha"in n)return n.alpha(e)}return n}function W2(t=fr,e){return typeof t!="function"&&`${t}`.toLowerCase()==="auto"?fr:q2(t,e)}function fr(t){return wo(t)}function wx(t={y:"count"},e={}){[t,e]=kx(t,e);const{x:n,y:i}=e;return xx(Mx(n,e,oe),null,null,i,t,Lu(e))}function vx(t,e,n={}){if((n==null?void 0:n.interval)==null)return n;const{reduce:i=Mu}=n,r={filter:null};return n[e]!=null&&(r[e]=i),n[`${e}1`]!=null&&(r[`${e}1`]=i),n[`${e}2`]!=null&&(r[`${e}2`]=i),t(r,n)}function Y2(t={}){return vx(wx,"y",Dl(t,"x"))}function xx(t,e,n,i,{data:r=vg,filter:o=Ha,sort:a,reverse:l,...f}={},s={}){t=Qh(t),e=Qh(e),f=Tx(f,s),r=G2(r,oe),a=a==null?void 0:H2("sort",a,s),o=o==null?void 0:V2("filter",o,s),n!=null&&Ho(f,"x","x1","x2")&&(n=null),i!=null&&Ho(f,"y","y1","y2")&&(i=null);const[u,c]=_n(t),[h,p]=_n(t),[d,m]=_n(e),[g,_]=_n(e),[b,v]=n!=null?[n,"x"]:i!=null?[i,"y"]:[],[w,x]=_n(b),{x:k,y:S,z:T,fill:A,stroke:F,x1:C,x2:I,y1:L,y2:G,domain:$,cumulative:B,thresholds:z,interval:Z,...Q}=s,[W,U]=_n(T),[Y]=$n(A),[K]=$n(F),[ft,et]=_n(Y),[j,q]=_n(K);return{..."z"in s&&{z:W||T},..."fill"in s&&{fill:ft||A},..."stroke"in s&&{stroke:j||F},...$l(Q,(N,E,O)=>{const tt=hg(Kt(N,b),O==null?void 0:O[v]),P=Kt(N,T),pt=Kt(N,Y),rt=Kt(N,K),mt=e8(f,{z:P,fill:pt,stroke:rt}),nt=[],ht=[],kt=tt&&x([]),ue=P&&U([]),Et=pt&&et([]),bt=rt&&q([]),Wt=t&&c([]),Ue=t&&p([]),Gt=e&&m([]),ot=e&&_([]),Tt=Ax(t,e,N);let Ft=0;for(const dn of f)dn.initialize(N);a&&a.initialize(N),o&&o.initialize(N);for(const dn of E){const mr=[];for(const Dn of f)Dn.scope("facet",dn);a&&a.scope("facet",dn),o&&o.scope("facet",dn);for(const[Dn,dt]of mh(dn,mt))for(const[xe,No]of mh(dt,tt))for(const[Ke,ri]of Tt(No))if(!(o&&!o.reduce(Ke,ri))){mr.push(Ft++),ht.push(r.reduceIndex(Ke,N,ri)),tt&&kt.push(xe),P&&ue.push(mt===P?Dn:P[(Ke.length>0?Ke:No)[0]]),pt&&Et.push(mt===pt?Dn:pt[(Ke.length>0?Ke:No)[0]]),rt&&bt.push(mt===rt?Dn:rt[(Ke.length>0?Ke:No)[0]]),Wt&&(Wt.push(ri.x1),Ue.push(ri.x2)),Gt&&(Gt.push(ri.y1),ot.push(ri.y2));for(const ab of f)ab.reduce(Ke,ri);a&&a.reduce(Ke)}nt.push(mr)}return n8(nt,a,l),{data:ht,facets:nt}}),...!Ho(f,"x")&&(u?{x1:u,x2:h,x:ks(u,h)}:{x:k,x1:C,x2:I}),...!Ho(f,"y")&&(d?{y1:d,y2:g,y:ks(d,g)}:{y:S,y1:L,y2:G}),...w&&{[v]:w},...Object.fromEntries(f.map(({name:N,output:E})=>[N,E]))}}function kx({cumulative:t,domain:e,thresholds:n,interval:i,...r},o){return[r,{cumulative:t,domain:e,thresholds:n,interval:i,...o}]}function Mx(t,{cumulative:e,domain:n,thresholds:i,interval:r},o){return t={...ko(t)},t.domain===void 0&&(t.domain=n),t.cumulative===void 0&&(t.cumulative=e),t.thresholds===void 0&&(t.thresholds=i),t.interval===void 0&&(t.interval=r),t.value===void 0&&(t.value=o),t.thresholds=Sx(t.thresholds,t.interval),t}function Qh(t){if(t==null)return;const{value:e,cumulative:n,domain:i=Ae,thresholds:r}=t,o=a=>{let l=Kt(a,e),f;if(ve(l)||$x(r)){l=Yt(l,sg,Float64Array);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Ui(r)?r(l,u,c):r;typeof h=="number"&&(h=lp(u,c,h)),Ui(h)&&(i===Ae&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c))),f=h}else{l=rn(l);let[u,c]=typeof i=="function"?i(l):i,h=typeof r=="function"&&!Ui(r)?r(l,u,c):r;if(typeof h=="number")if(i===Ae){let p=da(u,c,h);if(isFinite(p))if(p>0){let d=Math.round(u/p),m=Math.round(c/p);d*p<=u||--d,m*p>c||++m;let g=m-d+1;h=new Float64Array(g);for(let _=0;_<g;++_)h[_]=(d+_)*p}else if(p<0){p=-p;let d=Math.round(u*p),m=Math.round(c*p);d/p<=u||--d,m/p>c||++m;let g=m-d+1;h=new Float64Array(g);for(let _=0;_<g;++_)h[_]=(d+_)/p}else h=[u];else h=[u]}else h=qr(u,c,h);else Ui(h)&&(i===Ae&&(u=h.floor(u),c=h.offset(h.floor(c))),h=h.range(u,h.offset(c)));f=h}const s=[];if(f.length===1)s.push([f[0],f[0]]);else for(let u=1;u<f.length;++u)s.push([f[u-1],f[u]]);return s.bin=(n<0?Nx:n>0?Ex:Bu)(s,f,l),s};return o.label=$i(e),o}function Sx(t,e,n=Jh){if(t===void 0)return e===void 0?n:hr(e);if(typeof t=="string"){switch(t.toLowerCase()){case"freedman-diaconis":return i_;case"scott":return y0;case"sturges":return Jb;case"auto":return Jh}return du(t)}return t}function Tx(t,e){return Q5(t,e,H2)}function H2(t,e,n){return yg(t,e,n,V2)}function V2(t,e,n){return wg(t,e,n,G2)}function G2(t,e){return ku(t,e,Cx)}function Cx(t){switch(`${t}`.toLowerCase()){case"x":return Dx;case"x1":return Lx;case"x2":return Ix;case"y":return Fx;case"y1":return Rx;case"y2":return Px}throw new Error(`invalid bin reduce: ${t}`)}function Jh(t,e,n){return Math.min(200,y0(t,e,n))}function $x(t){return N5(t)||ei(t)&&ve(t)}function Ax(t,e,n){const i=t==null?void 0:t(n),r=e==null?void 0:e(n);return i&&r?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries()){const u=r.bin(a[l]);for(const[c,[h,p]]of r.entries())yield[u[c],{data:n,x1:f,y1:h,x2:s,y2:p}]}}:i?function*(o){const a=i.bin(o);for(const[l,[f,s]]of i.entries())yield[a[l],{data:n,x1:f,x2:s}]}:function*(o){const a=r.bin(o);for(const[l,[f,s]]of r.entries())yield[a[l],{data:n,y1:f,y2:s}]}}function Bu(t,e,n){return e=rn(e),i=>{var o;const r=t.map(()=>[]);for(const a of i)(o=r[ja(e,n[a])-1])==null||o.push(a);return r}}function Ex(t,e,n){const i=Bu(t,e,n);return r=>{const o=i(r);for(let a=1,l=o.length;a<l;++a){const f=o[a-1],s=o[a];for(const u of f)s.push(u)}return o}}function Nx(t,e,n){const i=Bu(t,e,n);return r=>{const o=i(r);for(let a=o.length-2;a>=0;--a){const l=o[a+1],f=o[a];for(const s of l)f.push(s)}return o}}function X2(t,e){const n=(+t+ +e)/2;return t instanceof Date?new Date(n):n}const Dx={reduceIndex(t,e,{x1:n,x2:i}){return X2(n,i)}},Fx={reduceIndex(t,e,{y1:n,y2:i}){return X2(n,i)}},Lx={reduceIndex(t,e,{x1:n}){return n}},Ix={reduceIndex(t,e,{x2:n}){return n}},Rx={reduceIndex(t,e,{y1:n}){return n}},Px={reduceIndex(t,e,{y2:n}){return n}};function j2(t={}){return cg(t)?t:{...t,y:oe}}function Ox(t,e){if(e.length===1)return{data:t,facets:e};const n=t.length,i=new Uint8Array(n);let r=0;for(const l of e)for(const f of l)i[f]&&++r,i[f]=1;if(r===0)return{data:t,facets:e};t=Qr(t);const o=t[lg]=new Uint32Array(n+r);e=e.map(l=>Qr(l,Uint32Array));let a=n;i.fill(0);for(const l of e)for(let f=0,s=l.length;f<s;++f){const u=l[f];i[u]?(l[f]=a,t[a]=t[u],o[a]=u,++a):o[u]=u,i[u]=1}return{data:t,facets:e}}function Ux(t={},e={}){arguments.length===1&&([t,e]=zx(t));const{x1:n,x:i=n,y:r,...o}=e,[a,l,f,s]=qx(i,r,"x","y",t,o);return{...a,x1:n,x:l,y1:f,y2:s,y:ks(f,s)}}function Z2({y:t,y1:e,y2:n,...i}={}){return i=Dl(i,"x"),e===void 0&&n===void 0?Ux({y:t,...i}):([e,n]=C5(t,e,n),{...i,y1:e,y2:n})}function zx(t){const{offset:e,order:n,reverse:i,...r}=t;return[{offset:e,order:n,reverse:i},r]}const Bx={length:!0};function qx(t,e=v5,n,i,{offset:r,order:o,reverse:a},l){if(e===null)throw new Error(`stack requires ${i}`);const f=gu(l),[s,u]=_n(t),[c,h]=Ya(e),[p,d]=Ya(e);return c.hint=p.hint=Bx,r=Wx(r),o=Vx(o,r,i),[$l(l,(m,g,_)=>{({data:m,facets:g}=Ox(m,g));const b=t==null?void 0:u(hg(Kt(m,t),_==null?void 0:_[n])),v=Kt(m,e,Float64Array),w=Kt(m,f),x=o&&o(m,b,v,w),k=m.length,S=h(new Float64Array(k)),T=d(new Float64Array(k)),A=[];for(const F of g){const C=b?Array.from(Ka(F,I=>b[I]).values()):[F];if(x)for(const I of C)I.sort(x);for(const I of C){let L=0,G=0;a&&I.reverse();for(const $ of I){const B=v[$];B<0?L=T[$]=(S[$]=L)+B:B>0?G=T[$]=(S[$]=G)+B:T[$]=S[$]=G}}A.push(C)}return r&&r(A,S,T,w),{data:m,facets:g}}),s,c,p]}function Wx(t){if(t!=null){if(typeof t=="function")return t;switch(`${t}`.toLowerCase()){case"expand":case"normalize":return Yx;case"center":case"silhouette":return Hx;case"wiggle":return Q2}throw new Error(`unknown offset: ${t}`)}}function K2(t,e){let n=0,i=0;for(const r of t){const o=e[r];o<n&&(n=o),o>i&&(i=o)}return[n,i]}function Yx(t,e,n){for(const i of t)for(const r of i){const[o,a]=K2(r,n);for(const l of r){const f=1/(a-o||1);e[l]=f*(e[l]-o),n[l]=f*(n[l]-o)}}}function Hx(t,e,n){for(const i of t){for(const r of i){const[o,a]=K2(r,n);for(const l of r){const f=(a+o)/2;e[l]-=f,n[l]-=f}}J2(i,e,n)}tb(t,e,n)}function Q2(t,e,n,i){for(const r of t){const o=new gi;let a=0;for(const l of r){let f=-1;const s=l.map(p=>Math.abs(n[p]-e[p])),u=l.map(p=>{f=i?i[p]:++f;const d=n[p]-e[p],m=o.has(f)?d-o.get(f):0;return o.set(f,d),m}),c=[0,...Gb(u)];for(const p of l)e[p]+=a,n[p]+=a;const h=Gn(s);h&&(a-=Gn(s,(p,d)=>(u[d]/2+c[d])*p)/h)}J2(r,e,n)}tb(t,e,n)}function J2(t,e,n){const i=Mn(t,r=>Mn(r,o=>e[o]));for(const r of t)for(const o of r)e[o]-=i,n[o]-=i}function tb(t,e,n){const i=t.length;if(i===1)return;const r=t.map(l=>l.flat()),o=r.map(l=>(Mn(l,f=>e[f])+ye(l,f=>n[f]))/2),a=Mn(o);for(let l=0;l<i;l++){const f=a-o[l];for(const s of r[l])e[s]+=f,n[s]+=f}}function Vx(t,e,n){if(t===void 0&&e===Q2)return td(Ge);if(t!=null){if(typeof t=="string"){const i=t.startsWith("-"),r=i?Wa:Ge;switch((i?t.slice(1):t).toLowerCase()){case"value":case n:return Gx(r);case"z":return Xx(r);case"sum":return jx(r);case"appearance":return Zx(r);case"inside-out":return td(r)}return ed(fg(t))}if(typeof t=="function")return(t.length===1?ed:Kx)(t);if(Array.isArray(t))return Qx(t);throw new Error(`invalid order: ${t}`)}}function Gx(t){return(e,n,i)=>(r,o)=>t(i[r],i[o])}function Xx(t){return(e,n,i,r)=>(o,a)=>t(r[o],r[a])}function jx(t){return Pl(t,(e,n,i,r)=>Rs(An(e),o=>Gn(o,a=>i[a]),o=>r[o]))}function Zx(t){return Pl(t,(e,n,i,r)=>Rs(An(e),o=>n[_0(o,a=>i[a])],o=>r[o]))}function td(t){return Pl(t,(e,n,i,r)=>{const o=An(e),a=Rs(o,c=>n[_0(c,h=>i[h])],c=>r[c]),l=Bi(o,c=>Gn(c,h=>i[h]),c=>r[c]),f=[],s=[];let u=0;for(const c of a)u<0?(u+=l.get(c),f.push(c)):(u-=l.get(c),s.push(c));return s.reverse().concat(f)})}function ed(t){return e=>{const n=Kt(e,t);return(i,r)=>Ge(n[i],n[r])}}function Kx(t){return e=>(n,i)=>t(e[n],e[i])}function Qx(t){return Pl(Ge,()=>t)}function Pl(t,e){return(n,i,r,o)=>{if(!o)throw new Error("missing channel: z");const a=new gi(e(n,i,r,o).map((l,f)=>[l,f]));return(l,f)=>t(a.get(o[l]),a.get(o[f]))}}const Jx={ariaLabel:"area",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class tk extends se{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,z:l,curve:f,tension:s}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0},z:{value:gu(n),optional:!0}},n,Jx),this.z=l,this.curve=q2(f,s)}filter(e){return e}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i;return qt("svg:g",o).call(Re,this,r,o).call(Te,this,n,0,0).call(u=>u.selectAll().data(Tg(e,[a,l,f,s],this,i)).enter().append("path").call(Pe,this).call(Sg,this,i).attr("d",R4().curve(this.curve).defined(c=>c>=0).x0(c=>a[c]).y0(c=>l[c]).x1(c=>f[c]).y1(c=>s[c]))).node()}}function ek(t,e){const{x:n=xl,...i}=Y2(e);return new tk(t,Z2(j2({...i,x1:n,x2:void 0})))}const nk={ariaLabel:"link",fill:"none",stroke:"currentColor",strokeMiterlimit:1};class ik extends se{constructor(e,n={}){const{x1:i,y1:r,x2:o,y2:a,curve:l,tension:f}=n;super(e,{x1:{value:i,scale:"x"},y1:{value:r,scale:"y"},x2:{value:o,scale:"x",optional:!0},y2:{value:a,scale:"y",optional:!0}},n,nk),this.curve=W2(l,f),Eo(this,n)}project(e,n,i){this.curve!==fr&&super.project(e,n,i)}render(e,n,i,r,o){const{x1:a,y1:l,x2:f=a,y2:s=l}=i,{curve:u}=this;return qt("svg:g",o).call(Re,this,r,o).call(Te,this,n).call(c=>c.selectAll().data(e).enter().append("path").call(Pe,this).attr("d",u===fr&&o.projection?rk(o.projection,a,l,f,s):h=>{const p=On(),d=u(p);return d.lineStart(),d.point(a[h],l[h]),d.point(f[h],s[h]),d.lineEnd(),p}).call(Nn,this,i).call(Fl,this,i,o)).node()}}function rk(t,e,n,i,r){const o=al(t);return e=rn(e),n=rn(n),i=rn(i),r=rn(r),a=>o({type:"LineString",coordinates:[[e[a],n[a]],[i[a],r[a]]]})}function Ol(t,{x:e,x1:n,x2:i,y:r,y1:o,y2:a,...l}={}){return[n,i]=nd(e,n,i),[o,a]=nd(r,o,a),new ik(t,{...l,x1:n,x2:i,y1:o,y2:a})}function nd(t,e,n){if(t===void 0){if(e===void 0){if(n!==void 0)return[n]}else if(n===void 0)return[e]}else{if(e===void 0)return n===void 0?[t]:[t,n];if(n===void 0)return[t,e]}return[e,n]}class eb extends se{constructor(e,n,i={},r){super(e,n,i,r);const{inset:o=0,insetTop:a=o,insetRight:l=o,insetBottom:f=o,insetLeft:s=o,rx:u,ry:c}=i;this.insetTop=Lt(a),this.insetRight=Lt(l),this.insetBottom=Lt(f),this.insetLeft=Lt(s),this.rx=ee(u,"auto"),this.ry=ee(c,"auto")}render(e,n,i,r,o){const{rx:a,ry:l}=this;return qt("svg:g",o).call(Re,this,r,o).call(this._transform,this,n).call(f=>f.selectAll().data(e).enter().append("rect").call(Pe,this).attr("x",this._x(n,i,r)).attr("width",this._width(n,i,r)).attr("y",this._y(n,i,r)).attr("height",this._height(n,i,r)).call(_t,"rx",a).call(_t,"ry",l).call(Nn,this,i)).node()}_x(e,{x:n},{marginLeft:i}){const{insetLeft:r}=this;return n?o=>n[o]+r:i+r}_y(e,{y:n},{marginTop:i}){const{insetTop:r}=this;return n?o=>n[o]+r:i+r}_width({x:e},{x:n},{marginRight:i,marginLeft:r,width:o}){const{insetLeft:a,insetRight:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}_height({y:e},{y:n},{marginTop:i,marginBottom:r,height:o}){const{insetTop:a,insetBottom:l}=this,f=n&&e?e.bandwidth():o-i-r;return Math.max(0,f-a-l)}}const ok={ariaLabel:"bar"};class ak extends eb{constructor(e,n={}){const{x:i,y1:r,y2:o}=n;super(e,{y1:{value:r,scale:"y"},y2:{value:o,scale:"y"},x:{value:i,scale:"x",type:"band",optional:!0}},n,ok)}_transform(e,n,{y:i}){e.call(Te,n,{y:i},0,0)}_y({y:e},{y1:n,y2:i},{marginTop:r}){const{insetTop:o}=this;return ar(e)?r+o:a=>Math.min(n[a],i[a])+o}_height({y:e},{y1:n,y2:i},{marginTop:r,marginBottom:o,height:a}){const{insetTop:l,insetBottom:f}=this;return ar(e)?a-r-o-l-f:s=>Math.max(0,Math.abs(i[s]-n[s])-l-f)}}function lk(t,e={}){return T5(e)||(e={...e,x:xl,y2:oe}),new ak(t,Z2(a2(j2(e))))}const fk={ariaLabel:"cell"};class sk extends eb{constructor(e,{x:n,y:i,...r}={}){super(e,{x:{value:n,scale:"x",type:"band",optional:!0},y:{value:i,scale:"y",type:"band",optional:!0}},r,fk)}_transform(e,n){e.call(Te,n,{},0,0)}}function uk(t,{x:e,y:n,...i}={}){return[e,n]=Ml(e,n),new sk(t,{...i,x:e,y:n})}const ck={ariaLabel:"dot",fill:"none",stroke:"currentColor",strokeWidth:1.5};function hk(t){return t.sort===void 0&&t.reverse===void 0?j5({channel:"-r"},t):t}class dk extends se{constructor(e,n={}){const{x:i,y:r,r:o,rotate:a,symbol:l=Zr,frameAnchor:f}=n,[s,u]=fe(a,0),[c,h]=G5(l),[p,d]=fe(o,c==null?3:4.5);super(e,{x:{value:i,scale:"x",optional:!0},y:{value:r,scale:"y",optional:!0},r:{value:p,scale:"r",filter:wl,optional:!0},rotate:{value:s,optional:!0},symbol:{value:c,scale:"auto",optional:!0}},hk(n),ck),this.r=d,this.rotate=u,this.symbol=h,this.frameAnchor=Tl(f);const{channels:m}=this,{symbol:g}=m;if(g){const{fill:_,stroke:b}=m;g.hint={fill:_?_.value===g.value?"color":"currentColor":this.fill??"currentColor",stroke:b?b.value===g.value?"color":"currentColor":this.stroke??"none"}}}render(e,n,i,r,o){const{x:a,y:l}=n,{x:f,y:s,r:u,rotate:c,symbol:h}=i,{r:p,rotate:d,symbol:m}=this,[g,_]=Co(this,r),b=m===Zr,v=u?void 0:p*p*Math.PI;return uu(p)&&(e=[]),qt("svg:g",o).call(Re,this,r,o).call(Te,this,{x:f&&a,y:s&&l}).call(w=>w.selectAll().data(e).enter().append(b?"circle":"path").call(Pe,this).call(b?x=>{x.attr("cx",f?k=>f[k]:g).attr("cy",s?k=>s[k]:_).attr("r",u?k=>u[k]:p)}:x=>{x.attr("transform",Iu`translate(${f?k=>f[k]:g},${s?k=>s[k]:_})${c?k=>` rotate(${c[k]})`:d?` rotate(${d})`:""}`).attr("d",u&&h?k=>{const S=On();return h[k].draw(S,u[k]*u[k]*Math.PI),S}:u?k=>{const S=On();return m.draw(S,u[k]*u[k]*Math.PI),S}:h?k=>{const S=On();return h[k].draw(S,v),S}:(()=>{const k=On();return m.draw(k,v),k})())}).call(Nn,this,i)).node()}}function no(t,{x:e,y:n,...i}={}){return i.frameAnchor===void 0&&([e,n]=Ml(e,n)),new dk(t,{...i,x:e,y:n})}const pk={ariaLabel:"line",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:1};class mk extends se{constructor(e,n={}){const{x:i,y:r,z:o,curve:a,tension:l}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y"},z:{value:gu(n),optional:!0}},n,pk),this.z=o,this.curve=W2(a,l),Eo(this,n)}filter(e){return e}project(e,n,i){this.curve!==fr&&super.project(e,n,i)}render(e,n,i,r,o){const{x:a,y:l}=i,{curve:f}=this;return qt("svg:g",o).call(Re,this,r,o).call(Te,this,n).call(s=>s.selectAll().data(Tg(e,[a,l],this,i)).enter().append("path").call(Pe,this).call(Sg,this,i).call(K7,this,i,o).attr("d",f===fr&&o.projection?gk(o.projection,a,l):Am().curve(f).defined(u=>u>=0).x(u=>a[u]).y(u=>l[u]))).node()}}function gk(t,e,n){const i=al(t);return e=rn(e),n=rn(n),r=>{let o=[];const a=[o];for(const l of r)l===-1?(o=[],a.push(o)):o.push([e[l],n[l]]);return i({type:"MultiLineString",coordinates:a})}}function bk(t,{x:e=xl,y:n=oe,...i}={}){return new mk(t,Y2({...i,x:e,y:n}))}const _k={ariaLabel:"tick",fill:null,stroke:"currentColor"};class yk extends se{constructor(e,n,i){super(e,n,i,_k),Eo(this,i)}render(e,n,i,r,o){return qt("svg:g",o).call(Re,this,r,o).call(this._transform,this,n).call(a=>a.selectAll().data(e).enter().append("line").call(Pe,this).attr("x1",this._x1(n,i,r)).attr("x2",this._x2(n,i,r)).attr("y1",this._y1(n,i,r)).attr("y2",this._y2(n,i,r)).call(Nn,this,i).call(Fl,this,i,o)).node()}}class wk extends yk{constructor(e,n={}){const{x:i,y:r,inset:o=0,insetTop:a=o,insetBottom:l=o}=n;super(e,{x:{value:i,scale:"x"},y:{value:r,scale:"y",type:"band",optional:!0}},n),this.insetTop=Lt(a),this.insetBottom=Lt(l)}_transform(e,n,{x:i}){e.call(Te,n,{x:i},me,0)}_x1(e,{x:n}){return i=>n[i]}_x2(e,{x:n}){return i=>n[i]}_y1({y:e},{y:n},{marginTop:i}){const{insetTop:r}=this;return n&&e?o=>n[o]+r:i+r}_y2({y:e},{y:n},{height:i,marginBottom:r}){const{insetBottom:o}=this;return n&&e?a=>n[a]+e.bandwidth()-o:i-r-o}}function Ul(t,{x:e=oe,...n}={}){return new wk(t,{...n,x:e})}function vk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),R(n,"width",i=t[0]+"px"),R(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&R(n,"width",i),a&2&&r!==(r=o[1]+"px")&&R(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[4](null)}}}function xk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Xe(()=>{const f=Oe({width:r,height:o,marginLeft:1,marginRight:1,x:{axis:!1},y:{axis:!1},marks:[Ul(i,{x:s=>s})]});n(2,a.textContent="",a),a.appendChild(f)});function l(f){re[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class qn extends Pt{constructor(e){super(),Rt(this,e,xk,vk,It,{pattern:3,width:0,height:1})}}function kk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),R(n,"width",i=t[0]+"px"),R(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&R(n,"width",i),a&2&&r!==(r=o[1]+"px")&&R(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[4](null)}}}function Mk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Xe(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=Oe({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},marks:[lk(f,{x:(u,c)=>c+1,y:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){re[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Wn extends Pt{constructor(e){super(),Rt(this,e,Mk,kk,It,{pattern:3,width:0,height:1})}}function Sk(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),R(n,"width",i=t[0]+"px"),R(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[4](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&R(n,"width",i),a&2&&r!==(r=o[1]+"px")&&R(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[4](null)}}}function Tk(t,e,n){let{pattern:i}=e,{width:r=800}=e,{height:o=100}=e,a;Xe(()=>{const f=i.map((u,c)=>c===0?0:u-i[c-1]),s=Oe({width:r,height:o,marginLeft:0,marginRight:1,y:{axis:!1},color:{label:"time since previous note",scheme:"Greys"},marks:[uk(f,{x:(u,c)=>c+1,fill:u=>u})]});n(2,a.textContent="",a),a.appendChild(s)});function l(f){re[f?"unshift":"push"](()=>{a=f,n(2,a)})}return t.$$set=f=>{"pattern"in f&&n(3,i=f.pattern),"width"in f&&n(0,r=f.width),"height"in f&&n(1,o=f.height)},[r,o,a,i,l]}class Yn extends Pt{constructor(e){super(),Rt(this,e,Tk,Sk,It,{pattern:3,width:0,height:1})}}function Ck(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),R(n,"width",i=t[0]+"px"),R(n,"height",r=t[1]+"px"),ge(e,"width",t[0]+"px"),ge(e,"margin","auto")},m(o,a){X(o,e,a),y(e,n),t[7](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&R(n,"width",i),a&2&&r!==(r=o[1]+"px")&&R(n,"height",r),a&1&&ge(e,"width",o[0]+"px")},i:wt,o:wt,d(o){o&&V(e),t[7](null)}}}function $k(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{width:a=800}=e,{height:l=50}=e,f,s=null,u;const c=async m=>{o?n(6,s=o):(n(6,s=await Ds(m)),console.log(`Loaded ${m}, sr= ${s.sampleRate}`)),u=s.sampleRate};let h=null;const p=(m,g)=>{g&&(h=Ga(g,m,.5))};Xe(()=>{if(n(2,f.textContent="",f),!h)return;const m=Oe({width:a,height:l,marginLeft:0,marginRight:1,x:{axis:!1,label:"time in seconds"},y:{axis:!1},marks:[bk(h,{x:(g,_)=>_/u,y:g=>g})]});f.appendChild(m)});function d(m){re[m?"unshift":"push"](()=>{f=m,n(2,f)})}return t.$$set=m=>{"pattern"in m&&n(3,i=m.pattern),"audioFile"in m&&n(4,r=m.audioFile),"cachedAudio"in m&&n(5,o=m.cachedAudio),"width"in m&&n(0,a=m.width),"height"in m&&n(1,l=m.height)},t.$$.update=()=>{t.$$.dirty&16&&c(r),t.$$.dirty&72&&p(i,s)},[a,l,f,i,r,o,s,d]}class Hn extends Pt{constructor(e){super(),Rt(this,e,$k,Ck,It,{pattern:3,audioFile:4,cachedAudio:5,width:0,height:1})}}function Ak(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){X(l,e,f),y(e,n),t[7](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:wt,i:wt,o:wt,d(l){l&&V(e),t[7](null),o=!1,a()}}}function Ek(t,e,n){let{pattern:i}=e,{audioFile:r}=e,{cachedAudio:o=null}=e,{currentTrialNumber:a=-1}=e,l=null;const f=async d=>{o?(n(6,l=o),console.log("used cached audio")):(n(6,l=await Ds(d)),console.log(`loaded ${d}, sr= ${l.sampleRate}`))};let s=null,u;const c=(d,m)=>{m&&u&&(s=Ga(m,d),Fs(s,m.sampleRate,u))},h=()=>{u&&(u.pause(),n(0,u.currentTime=0,u),u.play())};pi(()=>{document.querySelector("html").addEventListener("keyup",d=>{d.key==="p"&&h()})});function p(d){re[d?"unshift":"push"](()=>{u=d,n(0,u)})}return t.$$set=d=>{"pattern"in d&&n(2,i=d.pattern),"audioFile"in d&&n(3,r=d.audioFile),"cachedAudio"in d&&n(4,o=d.cachedAudio),"currentTrialNumber"in d&&n(5,a=d.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&8&&f(r),t.$$.dirty&4&&console.log(i),t.$$.dirty&32&&a>-1&&window.setTimeout(h,200),t.$$.dirty&68&&c(i,l)},[u,h,i,r,o,a,l,p]}class io extends Pt{constructor(e){super(),Rt(this,e,Ek,Ak,It,{pattern:2,audioFile:3,cachedAudio:4,currentTrialNumber:5})}}function id(t,e,n){const i=t.slice();return i[8]=e[n],i}function rd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=at(n),e.__value=t[8],lt(e,e.__value)},m(r,o){X(r,e,o),y(e,i)},p:wt,d(r){r&&V(e)}}}function Nk(t){let e,n,i,r,o,a,l,f=(fa*1e3).toFixed(0)+"",s,u,c,h,p,d,m,g,_=t[0].toFixed(1)+"",b,v,w=(t[2]*1e3).toFixed(1)+"",x,k,S,T,A,F,C,I,L,G,$,B,z,Z,Q,W,U,Y,K,ft,et=Bt(t[5]),j=[];for(let q=0;q<et.length;q+=1)j[q]=rd(id(t,et,q));return L=new io({props:{pattern:t[1],audioFile:t[3]}}),$=new Hn({props:{pattern:t[1],audioFile:t[3],width:Qo,height:Jo}}),z=new qn({props:{pattern:t[1],width:Qo,height:Jo}}),Q=new Wn({props:{pattern:t[1],width:Qo,height:Jo}}),U=new Yn({props:{pattern:t[1],width:Qo,height:Jo}}),{c(){e=M("main"),n=M("h2"),n.textContent="Playground",i=D(),r=M("p"),r.textContent=`All stimuli (audio and visualizations) and configurable deviation. Play
    around with different values to compare how stimuli look and how small
    deviations can be`,o=D(),a=M("div"),l=at("inter-onset interval (IOI): "),s=at(f),u=at(" milliseconds ("),c=at(t[4]),h=at(` bpm)
    `),p=M("label"),d=at(`deviation as percent of IOI
      `),m=M("input"),g=D(),b=at(_),v=at(`
      (`),x=at(w),k=at(" milliseconds)"),S=D(),T=M("label"),A=at(`instrument sample:
      `),F=M("select");for(let q=0;q<j.length;q+=1)j[q].c();C=D(),I=M("div"),ct(L.$$.fragment),G=D(),ct($.$$.fragment),B=D(),ct(z.$$.fragment),Z=D(),ct(Q.$$.fragment),W=D(),ct(U.$$.fragment),R(m,"type","range"),R(m,"min","-20"),R(m,"max","20"),R(m,"step","1"),R(p,"class","svelte-1sot113"),t[3]===void 0&&fn(()=>t[7].call(F)),R(T,"class","svelte-1sot113"),R(I,"class","stimuli svelte-1sot113")},m(q,N){X(q,e,N),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,s),y(a,u),y(a,c),y(a,h),y(a,p),y(p,d),y(p,m),lt(m,t[0]),y(p,g),y(p,b),y(p,v),y(p,x),y(p,k),y(a,S),y(a,T),y(T,A),y(T,F);for(let E=0;E<j.length;E+=1)j[E]&&j[E].m(F,null);pe(F,t[3],!0),y(e,C),y(e,I),st(L,I,null),y(I,G),st($,I,null),y(I,B),st(z,I,null),y(I,Z),st(Q,I,null),y(I,W),st(U,I,null),Y=!0,K||(ft=[gt(m,"change",t[6]),gt(m,"input",t[6]),gt(F,"change",t[7])],K=!0)},p(q,[N]){if((!Y||N&16)&&Nt(c,q[4]),N&1&&lt(m,q[0]),(!Y||N&1)&&_!==(_=q[0].toFixed(1)+"")&&Nt(b,_),(!Y||N&4)&&w!==(w=(q[2]*1e3).toFixed(1)+"")&&Nt(x,w),N&32){et=Bt(q[5]);let rt;for(rt=0;rt<et.length;rt+=1){const mt=id(q,et,rt);j[rt]?j[rt].p(mt,N):(j[rt]=rd(mt),j[rt].c(),j[rt].m(F,null))}for(;rt<j.length;rt+=1)j[rt].d(1);j.length=et.length}N&40&&pe(F,q[3]);const E={};N&2&&(E.pattern=q[1]),N&8&&(E.audioFile=q[3]),L.$set(E);const O={};N&2&&(O.pattern=q[1]),N&8&&(O.audioFile=q[3]),$.$set(O);const tt={};N&2&&(tt.pattern=q[1]),z.$set(tt);const P={};N&2&&(P.pattern=q[1]),Q.$set(P);const pt={};N&2&&(pt.pattern=q[1]),U.$set(pt)},i(q){Y||(H(L.$$.fragment,q),H($.$$.fragment,q),H(z.$$.fragment,q),H(Q.$$.fragment,q),H(U.$$.fragment,q),Y=!0)},o(q){J(L.$$.fragment,q),J($.$$.fragment,q),J(z.$$.fragment,q),J(Q.$$.fragment,q),J(U.$$.fragment,q),Y=!1},d(q){q&&V(e),en(j,q),ut(L),ut($),ut(z),ut(Q),ut(U),K=!1,Ie(ft)}}}let Qo=600,Jo=100,fa=.5,Dk=6,Fk=3,Lk=!0,Ik=0;function Rk(t,e,n){let i,r;const o=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let a=o[0],l=5,f=[];function s(){l=_e(this.value),n(0,l)}function u(){a=di(this),n(3,a),n(5,o)}return t.$$.update=()=>{t.$$.dirty&1&&n(2,r=l/100*fa),t.$$.dirty&6&&(n(1,f=Hi(Dk,fa,Fk,r,Lk,Ik)),console.log("generated pattern",f))},n(4,i=1/fa*60),[l,f,r,a,i,o,s,u]}class Pk extends Pt{constructor(e){super(),Rt(this,e,Rk,Nk,It,{})}}var nb={exports:{}};(function(t,e){(function(n,i){i()})(gr,function(){function n(s,u){return typeof u>"u"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}function i(s,u,c){var h=new XMLHttpRequest;h.open("GET",s),h.responseType="blob",h.onload=function(){f(h.response,u,c)},h.onerror=function(){console.error("could not download file")},h.send()}function r(s){var u=new XMLHttpRequest;u.open("HEAD",s,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function o(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof gr=="object"&&gr.global===gr?gr:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(s,u,c){var h=a.URL||a.webkitURL,p=document.createElement("a");u=u||s.name||"download",p.download=u,p.rel="noopener",typeof s=="string"?(p.href=s,p.origin===location.origin?o(p):r(p.href)?i(s,u,c):o(p,p.target="_blank")):(p.href=h.createObjectURL(s),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(s,u,c){if(u=u||s.name||"download",typeof s!="string")navigator.msSaveOrOpenBlob(n(s,c),u);else if(r(s))i(s,u,c);else{var h=document.createElement("a");h.href=s,h.target="_blank",setTimeout(function(){o(h)})}}:function(s,u,c,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof s=="string")return i(s,u,c);var p=s.type==="application/octet-stream",d=/constructor/i.test(a.HTMLElement)||a.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||p&&d||l)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var v=g.result;v=m?v:v.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=v:location=v,h=null},g.readAsDataURL(s)}else{var _=a.URL||a.webkitURL,b=_.createObjectURL(s);h?h.location=b:location.href=b,h=null,setTimeout(function(){_.revokeObjectURL(b)},4e4)}});a.saveAs=f.saveAs=f,t.exports=f})})(nb);var Ok=nb.exports;const ib=c0(Ok);function Dt(t){this.stairs={};for(const e in t){if(this.stairs[e]=t[e],this.stairs[e].name=e,typeof t[e].firstVal>"u")throw new Error("No firstVal specified for "+e);if(t[e].hasOwnProperty("firstVal")&&(this.stairs[e].firstVal=t[e].firstVal),typeof t[e].stepSizeDown>"u")throw new Error("No stepSizeDown specified for "+e);if(this.stairs[e].stepSizeDown=t[e].stepSizeDown,typeof t[e].stepSizeUp>"u")throw new Error("No stepSizeUp specified for "+e);this.stairs[e].stepSizeUp=t[e].stepSizeUp,this.stairs[e].down=t[e].down||1,this.stairs[e].up=t[e].up||1,this.stairs[e].direction=t[e].direction||-1,this.stairs[e].reversalLimit=t[e].reversalLimit||0,this.stairs[e].limits=t[e].limits||!1,this.stairs[e].operation=t[e].operation||"add",this.stairs[e].wait=t[e].wait||1,this.stairs[e].val=t[e].val||[this.stairs[e].firstVal],this.stairs[e].active=t[e].active||!1,this.stairs[e].sameStairMax=t[e].sameStairMax||-1,this.stairs[e].limitReached=t[e].limitReached||!1,this.stairs[e].reversals=t[e].reversals||0,this.stairs[e].successiveGood=t[e].successiveGood||0,this.stairs[e].successiveBad=t[e].successiveBad||0,this.stairs[e].sameStairCount=t[e].sameStairCount||0,this.stairs[e].verbosity=t[e].verbosity||0,this.stairs[e].verbosity>0&&console.log("Built staircase '"+this.stairs[e].name+"' ("+this.stairs[e].operation+"): Start="+this.stairs[e].firstVal+"; StepSize="+this.stairs[e].stepSize+"; Limits=["+this.stairs[e].limits[0]+", "+this.stairs[e].limits[1]+"]")}this.tasks={easier:{add:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSizeDown/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.up)}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]}}},multiply:{noWait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.down/e.up)},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.val[e.val.length-1]*e.stepSizeUp}},wait:{1:function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]},"-1":function(e){return e.successiveGood=0,e.successiveBad++,e.successiveBad>=e.up?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]}}}},harder:{add:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]+e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]-e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]+e.stepSizeUp*(e.stepSizeUp/e.down)},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]-e.stepSizeDown*(e.stepSize/e.down)}}},multiply:{wait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]*e.stepSizeUp:e.val[e.val.length-1]},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.successiveGood>=e.down?e.val[e.val.length-1]/e.stepSizeDown:e.val[e.val.length-1]}},noWait:{1:function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]*e.stepSizeUp},"-1":function(e){return e.sameStairCount++,e.successiveGood++,e.successiveBad=0,e.val[e.val.length-1]/Math.pow(e.stepSizeDown,e.up/e.down)}}}}}}Dt.prototype.choose=function(t){const e=this.getActive(),n=t?"harder":"easier";t||(e.startingExplorationScale=1);const i=e.wait?"wait":"noWait";return e.verbosity>0&&console.log("Staircase '"+e.name+"' ("+e.operation+"): making test "+n+", "+i+" mode."),this.tasks[n][e.operation][i][e.direction](e)};Dt.prototype.checkLimits=function(t){const e=t;e.val[e.val.length-1]<e.val[e.val.length-2]&&e.val[e.val.length-1]<e.limits[0]?(e.val[e.val.length-1]=e.limits[0],e.limitReached=!0):e.val[e.val.length-1]>e.val[e.val.length-2]&&e.val[e.val.length-1]>e.limits[1]?(e.val[e.val.length-1]=e.limits[1],e.limitReached=!0):e.limitReached=!1};Dt.prototype.next=function(t){this.checkErr.ARG("next",arguments,1);const e=this.getActive();return e.val[e.val.length]=this.choose(t),this.checkLimits(e),e.val[e.val.length-1]};Dt.prototype.init=function(){const t=[];for(const n in this.stairs)this.stairs[n].active&&this.deactivate(n),this.stairs[n].lock||(t[t.length]=n);const e=rb(0,t.length-1);return this.activate(t[e]),this};Dt.prototype.changeActive=function(){const t=[];for(const n in this.stairs)!this.stairs[n].active&&!this.stairs[n].lock?t[t.length]=n:this.stairs[n].active&&this.deactivate(n);const e=rb(0,t.length-1);this.activate(t[e])};Dt.prototype.setsameStairMax=function(t,e){return this.checkErr.ARG("setsameStairMax",arguments,2),this.checkErr.UNDEFINED(this.stairs,e),this.stairs[e].sameStairMax=t};Dt.prototype.get=function(t){return this.checkErr.ARG("get",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val};Dt.prototype.getLast=function(t){return this.checkErr.ARG("getLast",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length-1]};Dt.prototype.getActive=function(){for(const t in this.stairs)if(this.stairs[t].active)return this.stairs[t];throw new Error("There is no active staircase. Consider initialize before using 'next' method")};Dt.prototype.activate=function(t){this.checkErr.ARG("activate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!0,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' now active")};Dt.prototype.deactivate=function(t){this.checkErr.ARG("deactivate",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active=!1,this.stairs[t].verbosity>0&&console.log("Staircase '"+this.stairs[t].name+"' deactivated")};Dt.prototype.resetCounts=function(t){this.stairs[t].sameStairCount=0,this.stairs[t].successiveGood=0,this.stairs[t].limitReached=!1};Dt.prototype.isActive=function(t){return this.checkErr.ARG("isActive",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].active};Dt.prototype.active=function(t){this.checkErr.ARG("active",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);for(const e in this.stairs)if(this.stairs[e].active)return e};Dt.prototype.lock=function(t){this.checkErr.ARG("lock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!0};Dt.prototype.unlock=function(t){this.checkErr.ARG("unlock",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock=!1};Dt.prototype.isLocked=function(t){return this.checkErr.ARG("isLocked",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].lock};Dt.prototype.setVal=function(t,e){this.checkErr.ARG("setVal",arguments,2),this.checkErr.UNDEFINED(this.stairs,t),this.stairs[t].val[this.stairs[t].val.length]=e};Dt.prototype.getReversals=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=[];let n=this.stairs[t].direction*-1;for(let i=1;i<this.stairs[t].val.length;i++)(n===1&&this.stairs[t].val[i]>this.stairs[t].val[i-1]||n===-1&&this.stairs[t].val[i]<this.stairs[t].val[i-1])&&(e[e.length]=this.stairs[t].val[i-1],n=n*-1);return e.shift(),e};Dt.prototype.reversalLimitReached=function(t){return this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t),this.getReversals(t).length>=this.stairs[t].reversalLimit&&this.stairs[t].reversalLimit!==0};Dt.prototype.getFinalVal=function(t){this.checkErr.ARG("getFinalVal",arguments,1),this.checkErr.UNDEFINED(this.stairs,t);const e=this.getReversals(t);if(!e.length)throw new Error("Staircase '"+this.stairs[t].name+"': Not enough reversals to calculate final value.");let n=0;for(let i=0;i<e.length;i++)n=n+e[i];return n/e.length};const qu=function(){};qu.prototype.UNDEFINED=function(t,e){if(t[e]===void 0)throw new Error("Unable to find the staircase '"+e+"'")};qu.prototype.ARG=function(t,e,n){if(e.length===0)throw new Error("Wrong number of arguments for the method '"+t+"'. Required: "+n)};Dt.prototype.checkErr=new qu;function rb(t,e){return Math.floor(Math.random()*(e-t+1))+t}function od(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,x,k,S,T,A,F,C,I,L,G,$,B,z,Z,Q,W,U,Y,K,ft,et,j,q;return{c(){e=M("div"),n=M("label"),i=at(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=at(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",g=M("option"),g.textContent="55-60",_=D(),b=M("label"),v=at(`Gender:
        `),w=M("input"),x=D(),k=M("label"),S=at(`Highest finished education (select the best fitting one):
        `),T=M("select"),A=M("option"),A.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",I=M("option"),I.textContent="master",L=M("option"),L.textContent="phd",G=D(),$=M("label"),B=at(`Which music instruments do you play?
        `),z=M("input"),Z=D(),Q=M("label"),W=at(`For how many years do you roughly play it/them?
        `),U=M("input"),Y=D(),K=M("label"),ft=at(`How many years of experience do you have with visualization?
        `),et=M("input"),R(r,"type","text"),R(r,"placeholder","ID"),R(n,"class","svelte-u6a8gr"),s.__value="20-24",lt(s,s.__value),u.__value="25-29",lt(u,u.__value),c.__value="30-34",lt(c,c.__value),h.__value="35-39",lt(h,h.__value),p.__value="40-44",lt(p,p.__value),d.__value="45-49",lt(d,d.__value),m.__value="50-54",lt(m,m.__value),g.__value="55-60",lt(g,g.__value),t[6]===void 0&&fn(()=>t[23].call(f)),R(a,"class","svelte-u6a8gr"),R(w,"type","text"),R(w,"placeholder","m, f, d, or self-describe"),R(b,"class","svelte-u6a8gr"),A.__value="none",lt(A,A.__value),F.__value="highs",lt(F,F.__value),C.__value="bachelor",lt(C,C.__value),I.__value="master",lt(I,I.__value),L.__value="phd",lt(L,L.__value),t[8]===void 0&&fn(()=>t[25].call(T)),R(k,"class","svelte-u6a8gr"),R(z,"type","text"),R(z,"placeholder","free text"),R($,"class","svelte-u6a8gr"),R(U,"type","number"),R(U,"min","0"),R(U,"step","1"),R(Q,"class","svelte-u6a8gr"),R(et,"type","number"),R(et,"min","0"),R(et,"step","1"),R(K,"class","svelte-u6a8gr"),R(e,"class","demo-form svelte-u6a8gr")},m(N,E){X(N,e,E),y(e,n),y(n,i),y(n,r),lt(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,g),pe(f,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),lt(w,t[7]),y(e,x),y(e,k),y(k,S),y(k,T),y(T,A),y(T,F),y(T,C),y(T,I),y(T,L),pe(T,t[8],!0),y(e,G),y(e,$),y($,B),y($,z),lt(z,t[9]),y(e,Z),y(e,Q),y(Q,W),y(Q,U),lt(U,t[10]),y(e,Y),y(e,K),y(K,ft),y(K,et),lt(et,t[11]),j||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(U,"input",t[27]),gt(et,"input",t[28])],j=!0)},p(N,E){E[0]&32&&r.value!==N[5]&&lt(r,N[5]),E[0]&64&&pe(f,N[6]),E[0]&128&&w.value!==N[7]&&lt(w,N[7]),E[0]&256&&pe(T,N[8]),E[0]&512&&z.value!==N[9]&&lt(z,N[9]),E[0]&1024&&_e(U.value)!==N[10]&&lt(U,N[10]),E[0]&2048&&_e(et.value)!==N[11]&&lt(et,N[11])},d(N){N&&V(e),j=!1,Ie(q)}}}function ad(t){let e,n,i,r,o=t[14]&&ld(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=Kn()},m(a,l){X(a,e,l),X(a,n,l),o&&o.m(a,l),X(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=ld(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Qt(),J(o,1,1,()=>{o=null}),Jt())},i(a){r||(H(o),r=!0)},o(a){J(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function ld(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,g,_,b,v;const w=[zk,Uk],x=[];function k(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(g=k(t))&&(_=x[g]=w[g](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=at("Test number "),a=at(o),l=at(" / "),s=at(f),u=D(),c=M("p"),h=at("Trial number "),d=at(p),m=D(),_&&_.c(),b=Kn()},m(S,T){X(S,e,T),X(S,n,T),X(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),X(S,u,T),X(S,c,T),y(c,h),y(c,d),X(S,m,T),~g&&x[g].m(S,T),X(S,b,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Nt(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Nt(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Nt(d,p);let A=g;g=k(S),g===A?~g&&x[g].p(S,T):(_&&(Qt(),J(x[A],1,1,()=>{x[A]=null}),Jt()),~g?(_=x[g],_?_.p(S,T):(_=x[g]=w[g](S),_.c()),H(_,1),_.m(b.parentNode,b)):_=null)},i(S){v||(H(_),v=!0)},o(S){J(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(b)),~g&&x[g].d(S)}}}function Uk(t){let e,n,i,r;const o=[Yk,Wk,qk,Bk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Kn()},m(f,s){~e&&a[e].m(f,s),X(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Qt(),J(a[u],1,1,()=>{a[u]=null}),Jt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){J(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function zk(t){let e,n,i,r;return e=new io({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ct(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){st(e,o,a),X(o,n,a),X(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){J(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ut(e,o)}}}function Bk(t){let e,n;return e=new Yn({props:{pattern:t[0],width:zl,height:Bl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function qk(t){let e,n;return e=new Wn({props:{pattern:t[0],width:zl,height:Bl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function Wk(t){let e,n;return e=new qn({props:{pattern:t[0],width:zl,height:Bl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function Yk(t){let e,n;return e=new Hn({props:{pattern:t[0],audioFile:t[1],width:zl,height:Bl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function fd(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Any final feedback?
        `),r=M("textarea")},m(l,f){X(l,e,f),y(e,n),y(n,i),y(n,r),lt(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&lt(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function sd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){X(l,e,f),X(l,n,f),X(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:wt,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function ud(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){X(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:wt,d(r){r&&V(e),n=!1,i()}}}function Hk(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&od(t),u=t[3]==="tests"&&ad(t),c=t[3]==="feedback"&&fd(t),h=t[3]==="done"&&sd(t),p=!t[15]&&t[3]!=="done"&&ud(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),R(e,"class","svelte-u6a8gr")},m(d,m){X(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=od(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&H(u,1)):(u=ad(d),u.c(),H(u,1),u.m(e,o)):u&&(Qt(),J(u,1,1,()=>{u=null}),Jt()),d[3]==="feedback"?c?c.p(d,m):(c=fd(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=sd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=ud(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(H(u),f=!0)},o(d){J(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let cd=.5;const Nf=20;let Vk=6,Gk=!0,Xk=0,zl=600,Bl=100;function jk(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[1]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[1]},{stimulus:"tick"},{stimulus:"bar"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},x=[],k,S,T=!1,A=!1,F=!1,C="tick",I=Nf,L=3,G=[],$=[],B=0;const z=[];pi(()=>{document.querySelector("html").addEventListener("keyup",et)});const Z=()=>{S=new Dt({ratio:{firstVal:Nf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Nf],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function Q(){l==="start"?(n(2,a=Ls(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),W()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function W(){Z(),n(13,b=0),v=0,k=0,n(14,T=!0),$=[],x=[],s=new Date,U()}function U(){console.log("Starting trial "+b),w={},n(15,A=!0),Y()}function Y(){let ht=Math.round(S.getLast("ratio"));ht=Math.random()<.5?ht:-ht,w.deviation=ht,n(20,I=ht),console.log("generated pattern",G),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function K(nt){if(!A)return;n(15,A=!1),w.decisionChoice=nt,w.errorCode=0;const ht=k;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&k++,w.errorCode==0&&(S.next(ht!=k),x[x.length]=w),w.errorCode==0&&v++,n(13,b++,b),S.reversalLimitReached("ratio")?ft():U()}function ft(){n(14,T=!1),j(),$=[],B=S.getFinalVal("ratio");for(let ht=0;ht<x.length;ht++)$[ht]=x[ht].deviation;console.log($);const nt=new Date;z.push({encoding:C,audioFile:o,final:B,data:$,score:k,testNumber:f,trialCount:b+1,trials:x,validTrialCount:v+1,testTimeSeconds:(nt-s)/1e3}),n(4,f++,f)}function et(nt){switch(console.log(nt.key),nt.key){case"ArrowLeft":K(0);break;case"ArrowRight":K(1);break;case"PageDown":!A&&l!=="done"&&Q()}}function j(){`${k}`,b+1,`${(k/(b+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const nt={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(nt);const ht=JSON.stringify(nt,void 0,2),kt=new Blob([ht],{type:"text/plain;charset=utf-8"});ib(kt,"results.json")}function N(){u=this.value,n(5,u)}function E(){c=di(this),n(6,c)}function O(){h=this.value,n(7,h)}function tt(){p=di(this),n(8,p)}function P(){d=this.value,n(9,d)}function pt(){m=_e(this.value),n(10,m)}function rt(){g=_e(this.value),n(11,g)}function mt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=I/100*cd),t.$$.dirty[0]&2097153&&(n(0,G=Hi(Vk,cd,L,i,Gk,Xk)),console.log("generated pattern",G))},[G,o,a,l,f,u,c,h,p,d,m,g,_,b,T,A,F,C,Q,q,I,i,N,E,O,tt,P,pt,rt,mt]}class Zk extends Pt{constructor(e){super(),Rt(this,e,jk,Hk,It,{},null,[-1,-1])}}function hd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,x,k,S,T,A,F,C,I,L,G,$,B,z,Z,Q,W,U,Y,K,ft,et,j,q;return{c(){e=M("div"),n=M("label"),i=at(`ID:
        `),r=M("input"),o=D(),a=M("label"),l=at(`Age:
        `),f=M("select"),s=M("option"),s.textContent="20-24",u=M("option"),u.textContent="25-29",c=M("option"),c.textContent="30-34",h=M("option"),h.textContent="35-39",p=M("option"),p.textContent="40-44",d=M("option"),d.textContent="45-49",m=M("option"),m.textContent="50-54",g=M("option"),g.textContent="55-60",_=D(),b=M("label"),v=at(`Gender:
        `),w=M("input"),x=D(),k=M("label"),S=at(`Highest finished education (select the best fitting one):
        `),T=M("select"),A=M("option"),A.textContent="none",F=M("option"),F.textContent="high school",C=M("option"),C.textContent="bachelor",I=M("option"),I.textContent="master",L=M("option"),L.textContent="phd",G=D(),$=M("label"),B=at(`Which music instruments do you play?
        `),z=M("input"),Z=D(),Q=M("label"),W=at(`For how many years do you roughly play it/them?
        `),U=M("input"),Y=D(),K=M("label"),ft=at(`How many years of experience do you have with visualization?
        `),et=M("input"),R(r,"type","text"),R(r,"placeholder","ID"),R(n,"class","svelte-u6a8gr"),s.__value="20-24",lt(s,s.__value),u.__value="25-29",lt(u,u.__value),c.__value="30-34",lt(c,c.__value),h.__value="35-39",lt(h,h.__value),p.__value="40-44",lt(p,p.__value),d.__value="45-49",lt(d,d.__value),m.__value="50-54",lt(m,m.__value),g.__value="55-60",lt(g,g.__value),t[6]===void 0&&fn(()=>t[23].call(f)),R(a,"class","svelte-u6a8gr"),R(w,"type","text"),R(w,"placeholder","m, f, d, or self-describe"),R(b,"class","svelte-u6a8gr"),A.__value="none",lt(A,A.__value),F.__value="highs",lt(F,F.__value),C.__value="bachelor",lt(C,C.__value),I.__value="master",lt(I,I.__value),L.__value="phd",lt(L,L.__value),t[8]===void 0&&fn(()=>t[25].call(T)),R(k,"class","svelte-u6a8gr"),R(z,"type","text"),R(z,"placeholder","free text"),R($,"class","svelte-u6a8gr"),R(U,"type","number"),R(U,"min","0"),R(U,"step","1"),R(Q,"class","svelte-u6a8gr"),R(et,"type","number"),R(et,"min","0"),R(et,"step","1"),R(K,"class","svelte-u6a8gr"),R(e,"class","demo-form svelte-u6a8gr")},m(N,E){X(N,e,E),y(e,n),y(n,i),y(n,r),lt(r,t[5]),y(e,o),y(e,a),y(a,l),y(a,f),y(f,s),y(f,u),y(f,c),y(f,h),y(f,p),y(f,d),y(f,m),y(f,g),pe(f,t[6],!0),y(e,_),y(e,b),y(b,v),y(b,w),lt(w,t[7]),y(e,x),y(e,k),y(k,S),y(k,T),y(T,A),y(T,F),y(T,C),y(T,I),y(T,L),pe(T,t[8],!0),y(e,G),y(e,$),y($,B),y($,z),lt(z,t[9]),y(e,Z),y(e,Q),y(Q,W),y(Q,U),lt(U,t[10]),y(e,Y),y(e,K),y(K,ft),y(K,et),lt(et,t[11]),j||(q=[gt(r,"input",t[22]),gt(f,"change",t[23]),gt(w,"input",t[24]),gt(T,"change",t[25]),gt(z,"input",t[26]),gt(U,"input",t[27]),gt(et,"input",t[28])],j=!0)},p(N,E){E[0]&32&&r.value!==N[5]&&lt(r,N[5]),E[0]&64&&pe(f,N[6]),E[0]&128&&w.value!==N[7]&&lt(w,N[7]),E[0]&256&&pe(T,N[8]),E[0]&512&&z.value!==N[9]&&lt(z,N[9]),E[0]&1024&&_e(U.value)!==N[10]&&lt(U,N[10]),E[0]&2048&&_e(et.value)!==N[11]&&lt(et,N[11])},d(N){N&&V(e),j=!1,Ie(q)}}}function dd(t){let e,n,i,r,o=t[14]&&pd(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six notes which should have equal
      distances. The <b>fourth note</b> might be played too early or too late, also
      affecting the ones after.`,n=D(),o&&o.c(),i=Kn()},m(a,l){X(a,e,l),X(a,n,l),o&&o.m(a,l),X(a,i,l),r=!0},p(a,l){a[14]?o?(o.p(a,l),l[0]&16384&&H(o,1)):(o=pd(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Qt(),J(o,1,1,()=>{o=null}),Jt())},i(a){r||(H(o),r=!0)},o(a){J(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function pd(t){let e,n,i,r,o=t[4]+1+"",a,l,f=t[2].length+"",s,u,c,h,p=t[13]+1+"",d,m,g,_,b,v;const w=[Qk,Kk],x=[];function k(S,T){return S[17]==="audio"?0:S[16]===!1?1:-1}return~(g=k(t))&&(_=x[g]=w[g](t)),{c(){e=M("p"),e.textContent="Use the arrow keys: left for too early, right for too late.",n=D(),i=M("p"),r=at("Test number "),a=at(o),l=at(" / "),s=at(f),u=D(),c=M("p"),h=at("Trial number "),d=at(p),m=D(),_&&_.c(),b=Kn()},m(S,T){X(S,e,T),X(S,n,T),X(S,i,T),y(i,r),y(i,a),y(i,l),y(i,s),X(S,u,T),X(S,c,T),y(c,h),y(c,d),X(S,m,T),~g&&x[g].m(S,T),X(S,b,T),v=!0},p(S,T){(!v||T[0]&16)&&o!==(o=S[4]+1+"")&&Nt(a,o),(!v||T[0]&4)&&f!==(f=S[2].length+"")&&Nt(s,f),(!v||T[0]&8192)&&p!==(p=S[13]+1+"")&&Nt(d,p);let A=g;g=k(S),g===A?~g&&x[g].p(S,T):(_&&(Qt(),J(x[A],1,1,()=>{x[A]=null}),Jt()),~g?(_=x[g],_?_.p(S,T):(_=x[g]=w[g](S),_.c()),H(_,1),_.m(b.parentNode,b)):_=null)},i(S){v||(H(_),v=!0)},o(S){J(_),v=!1},d(S){S&&(V(e),V(n),V(i),V(u),V(c),V(m),V(b)),~g&&x[g].d(S)}}}function Kk(t){let e,n,i,r;const o=[nM,eM,tM,Jk],a=[];function l(f,s){return f[17]==="waveform"?0:f[17]==="tick"?1:f[17]==="bar"?2:f[17]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Kn()},m(f,s){~e&&a[e].m(f,s),X(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Qt(),J(a[u],1,1,()=>{a[u]=null}),Jt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){J(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function Qk(t){let e,n,i,r;return e=new io({props:{pattern:[...t[0].slice(0,t[0].length-1),t[0].at(-1)+Math.random()*1e-4],audioFile:t[1],currentTrialNumber:t[13]}}),{c(){ct(e.$$.fragment),n=D(),i=M("p"),i.textContent="You can play the audio as many times as you like."},m(o,a){st(e,o,a),X(o,n,a),X(o,i,a),r=!0},p(o,a){const l={};a[0]&1&&(l.pattern=[...o[0].slice(0,o[0].length-1),o[0].at(-1)+Math.random()*1e-4]),a[0]&2&&(l.audioFile=o[1]),a[0]&8192&&(l.currentTrialNumber=o[13]),e.$set(l)},i(o){r||(H(e.$$.fragment,o),r=!0)},o(o){J(e.$$.fragment,o),r=!1},d(o){o&&(V(n),V(i)),ut(e,o)}}}function Jk(t){let e,n;return e=new Yn({props:{pattern:t[0],width:ql,height:Wl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function tM(t){let e,n;return e=new Wn({props:{pattern:t[0],width:ql,height:Wl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function eM(t){let e,n;return e=new qn({props:{pattern:t[0],width:ql,height:Wl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function nM(t){let e,n;return e=new Hn({props:{pattern:t[0],audioFile:t[1],width:ql,height:Wl}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.pattern=i[0]),r[0]&2&&(o.audioFile=i[1]),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function md(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Any final feedback?
        `),r=M("textarea")},m(l,f){X(l,e,f),y(e,n),y(n,i),y(n,r),lt(r,t[12]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&4096&&lt(r,l[12])},d(l){l&&V(e),o=!1,a()}}}function gd(t){let e,n,i,r,o,a;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("div"),r=M("button"),r.textContent="Download results"},m(l,f){X(l,e,f),X(l,n,f),X(l,i,f),y(i,r),o||(a=gt(r,"click",t[19]),o=!0)},p:wt,d(l){l&&(V(e),V(n),V(i)),o=!1,a()}}}function bd(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step (PageDown)"},m(r,o){X(r,e,o),n||(i=gt(e,"click",t[18]),n=!0)},p:wt,d(r){r&&V(e),n=!1,i()}}}function iM(t){let e,n,i,r,o,a,l,f,s=t[3]==="demo"&&hd(t),u=t[3]==="tests"&&dd(t),c=t[3]==="feedback"&&md(t),h=t[3]==="done"&&gd(t),p=!t[15]&&t[3]!=="done"&&bd(t);return{c(){e=M("main"),n=M("h2"),n.textContent="Study (Within-Participant Variance)",i=D(),s&&s.c(),r=D(),u&&u.c(),o=D(),c&&c.c(),a=D(),h&&h.c(),l=D(),p&&p.c(),R(e,"class","svelte-u6a8gr")},m(d,m){X(d,e,m),y(e,n),y(e,i),s&&s.m(e,null),y(e,r),u&&u.m(e,null),y(e,o),c&&c.m(e,null),y(e,a),h&&h.m(e,null),y(e,l),p&&p.m(e,null),f=!0},p(d,m){d[3]==="demo"?s?s.p(d,m):(s=hd(d),s.c(),s.m(e,r)):s&&(s.d(1),s=null),d[3]==="tests"?u?(u.p(d,m),m[0]&8&&H(u,1)):(u=dd(d),u.c(),H(u,1),u.m(e,o)):u&&(Qt(),J(u,1,1,()=>{u=null}),Jt()),d[3]==="feedback"?c?c.p(d,m):(c=md(d),c.c(),c.m(e,a)):c&&(c.d(1),c=null),d[3]==="done"?h?h.p(d,m):(h=gd(d),h.c(),h.m(e,l)):h&&(h.d(1),h=null),!d[15]&&d[3]!=="done"?p?p.p(d,m):(p=bd(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){f||(H(u),f=!0)},o(d){J(u),f=!1},d(d){d&&V(e),s&&s.d(),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d()}}}let _d=.5;const Df=20;let rM=6,oM=!0,aM=0,ql=600,Wl=100;function lM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=[{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"audio",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"waveform",audioFile:r[0]},{stimulus:"color"},{stimulus:"color"},{stimulus:"color"}],l="start",f=0,s,u="",c="20-24",h="m",p="master",d="",m=0,g=0,_="",b=0,v,w={},x=[],k,S,T=!1,A=!1,F=!1,C="tick",I=Df,L=3,G=[],$=[],B=0;const z=[];pi(()=>{document.querySelector("html").addEventListener("keyup",et)});const Z=()=>{S=new Dt({ratio:{firstVal:Df,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Df],direction:-1,reversalLimit:5,verbosity:1}}),S.init()};function Q(){l==="start"?(n(2,a=Ls(a)),n(3,l="demo")):l==="demo"?(n(3,l="tests"),n(4,f=0)):l==="tests"?f<a.length?(n(17,C=a[f].stimulus),n(1,o=a[f].audioFile),W()):n(3,l="feedback"):l==="feedback"&&n(3,l="done")}function W(){Z(),n(13,b=0),v=0,k=0,n(14,T=!0),$=[],x=[],s=new Date,U()}function U(){console.log("Starting trial "+b),w={},n(15,A=!0),Y()}function Y(){let ht=Math.round(S.getLast("ratio"));ht=Math.random()<.5?ht:-ht,w.deviation=ht,n(20,I=ht),console.log("generated pattern",G),n(16,F=!0),window.setTimeout(()=>{n(16,F=!1)},1e3)}function K(nt){if(!A)return;n(15,A=!1),w.decisionChoice=nt,w.errorCode=0;const ht=k;(w.decisionChoice==0&&w.deviation<0||w.decisionChoice==1&&w.deviation>0)&&w.errorCode==0&&k++,w.errorCode==0&&(S.next(ht!=k),x[x.length]=w),w.errorCode==0&&v++,n(13,b++,b),S.reversalLimitReached("ratio")?ft():U()}function ft(){n(14,T=!1),j(),$=[],B=S.getFinalVal("ratio");for(let ht=0;ht<x.length;ht++)$[ht]=x[ht].deviation;console.log($);const nt=new Date;z.push({encoding:C,audioFile:o,final:B,data:$,score:k,testNumber:f,trialCount:b+1,trials:x,validTrialCount:v+1,testTimeSeconds:(nt-s)/1e3}),n(4,f++,f)}function et(nt){switch(console.log(nt.key),nt.key){case"ArrowLeft":K(0);break;case"ArrowRight":K(1);break;case"PageDown":!A&&l!=="done"&&Q()}}function j(){`${k}`,b+1,`${(k/(b+1)*100).toFixed(1)}${S.getFinalVal("ratio")}`}function q(){const nt={demographics:{partID:u,partAge:c,partGender:h,partEduation:p,partMusicInstr:d,partMusicInstrYears:m,partVisExperienceYears:g,partFeedback:_},date:new Date().toISOString(),tests:z};console.log(nt);const ht=JSON.stringify(nt,void 0,2),kt=new Blob([ht],{type:"text/plain;charset=utf-8"});ib(kt,"results.json")}function N(){u=this.value,n(5,u)}function E(){c=di(this),n(6,c)}function O(){h=this.value,n(7,h)}function tt(){p=di(this),n(8,p)}function P(){d=this.value,n(9,d)}function pt(){m=_e(this.value),n(10,m)}function rt(){g=_e(this.value),n(11,g)}function mt(){_=this.value,n(12,_)}return t.$$.update=()=>{t.$$.dirty[0]&1048576&&n(21,i=I/100*_d),t.$$.dirty[0]&2097153&&(n(0,G=Hi(rM,_d,L,i,oM,aM)),console.log("generated pattern",G))},[G,o,a,l,f,u,c,h,p,d,m,g,_,b,T,A,F,C,Q,q,I,i,N,E,O,tt,P,pt,rt,mt]}class fM extends Pt{constructor(e){super(),Rt(this,e,lM,iM,It,{},null,[-1,-1])}}function sM(t){let e,n,i;return{c(){e=M("div"),R(e,"width",n=t[0]+"px"),R(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&R(e,"width",n),o&2&&i!==(i=r[1]+"px")&&R(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[6](null)}}}function uM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=100}=e,f;Xe(()=>{const u=Oe({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Ul(i,{x:c=>c}),Il(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${h+1}`})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){re[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class ob extends Pt{constructor(e){super(),Rt(this,e,uM,sM,It,{data:3,domain:4,title:5,width:0,height:1})}}function cM(t){let e,n,i;return{c(){e=M("div"),R(e,"width",n=t[0]+"px"),R(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&R(e,"width",n),o&2&&i!==(i=r[1]+"px")&&R(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[5](null)}}}function hM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;Xe(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.finals)})),u=Oe({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[no(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Ol(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Ll([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Vn(s),d=1.96*(oo(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){re[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Wu extends Pt{constructor(e){super(),Rt(this,e,hM,cM,It,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function dM(t){let e,n,i;return{c(){e=M("div"),R(e,"width",n=t[0]+"px"),R(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&R(e,"width",n),o&2&&i!==(i=r[1]+"px")&&R(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[5](null)}}}function pM(t,e,n){let{stimuli:i}=e,{width:r=800}=e,{height:o=200}=e,a;Xe(()=>{const s=i.map(c=>({encoding:c.encoding,...l(c.trialCounts)})),u=Oe({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"trial count"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.encoding)},marks:[no(s,{x:c=>c.mean,y:c=>c.encoding,symbol:"diamond"}),Ol(s,{x1:"low",y1:"encoding",x2:"high",y2:"encoding"}),Ll([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Vn(s),d=1.96*(oo(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){re[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"stimuli"in s&&n(3,i=s.stimuli),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class Yu extends Pt{constructor(e){super(),Rt(this,e,pM,dM,It,{stimuli:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function yd(t,e,n){const i=t.slice();return i[8]=e[n],i}function wd(t,e,n){const i=t.slice();return i[11]=e[n],i}function vd(t){let e,n=t[11].encoding+"",i,r,o,a;return o=new ob({props:{data:t[11].finals,title:t[11].encoding,domain:[0,t[1]]}}),{c(){e=M("b"),i=at(n),r=D(),ct(o.$$.fragment)},m(l,f){X(l,e,f),y(e,i),X(l,r,f),st(o,l,f),a=!0},p(l,f){(!a||f&4)&&n!==(n=l[11].encoding+"")&&Nt(i,n);const s={};f&4&&(s.data=l[11].finals),f&4&&(s.title=l[11].encoding),f&2&&(s.domain=[0,l[1]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){J(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ut(o,l)}}}function xd(t){let e,n,i,r=t[8].demographics.partID+"",o,a,l,f,s=t[8].demographics.partFeedback.split(`
`).join("<br/>")+"",u;return{c(){e=M("div"),n=M("b"),i=at("P"),o=at(r),a=at(":"),l=D(),f=new cb(!1),u=D(),f.a=u,ge(e,"text-align","left")},m(c,h){X(c,e,h),y(e,n),y(n,i),y(n,o),y(n,a),y(e,l),f.m(s,e),y(e,u)},p(c,h){h&1&&r!==(r=c[8].demographics.partID+"")&&Nt(o,r),h&1&&s!==(s=c[8].demographics.partFeedback.split(`
`).join("<br/>")+"")&&f.p(s)},d(c){c&&V(e)}}}function mM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,x,k,S,T,A,F,C;c=new Wu({props:{stimuli:t[2]}}),g=new Yu({props:{stimuli:t[2]}});let I=Bt(t[2]),L=[];for(let z=0;z<I.length;z+=1)L[z]=vd(wd(t,I,z));const G=z=>J(L[z],1,1,()=>{L[z]=null});let $=Bt(t[0]),B=[];for(let z=0;z<$.length;z+=1)B[z]=xd(yd(t,$,z));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values",u=D(),ct(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts",m=D(),ct(g.$$.fragment),_=D(),b=M("div"),v=M("h3"),v.textContent="Final Values for Each Stimulus and All Participants",w=D();for(let z=0;z<L.length;z+=1)L[z].c();x=D(),k=M("div"),S=M("h3"),S.textContent="Feedback",T=D();for(let z=0;z<B.length;z+=1)B[z].c();R(a,"type","file"),R(a,"accept",".json"),a.multiple=!0},m(z,Z){X(z,e,Z),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),st(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),st(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w);for(let Q=0;Q<L.length;Q+=1)L[Q]&&L[Q].m(b,null);y(e,x),y(e,k),y(k,S),y(k,T);for(let Q=0;Q<B.length;Q+=1)B[Q]&&B[Q].m(k,null);A=!0,F||(C=gt(a,"input",t[3]),F=!0)},p(z,[Z]){const Q={};Z&4&&(Q.stimuli=z[2]),c.$set(Q);const W={};if(Z&4&&(W.stimuli=z[2]),g.$set(W),Z&6){I=Bt(z[2]);let U;for(U=0;U<I.length;U+=1){const Y=wd(z,I,U);L[U]?(L[U].p(Y,Z),H(L[U],1)):(L[U]=vd(Y),L[U].c(),H(L[U],1),L[U].m(b,null))}for(Qt(),U=I.length;U<L.length;U+=1)G(U);Jt()}if(Z&1){$=Bt(z[0]);let U;for(U=0;U<$.length;U+=1){const Y=yd(z,$,U);B[U]?B[U].p(Y,Z):(B[U]=xd(Y),B[U].c(),B[U].m(k,null))}for(;U<B.length;U+=1)B[U].d(1);B.length=$.length}},i(z){if(!A){H(c.$$.fragment,z),H(g.$$.fragment,z);for(let Z=0;Z<I.length;Z+=1)H(L[Z]);A=!0}},o(z){J(c.$$.fragment,z),J(g.$$.fragment,z),L=L.filter(Boolean);for(let Z=0;Z<L.length;Z+=1)J(L[Z]);A=!1},d(z){z&&V(e),ut(c),ut(g),en(L,z),en(B,z),F=!1,C()}}}function gM(t,e,n){let i,r,o,a=[];const l=async u=>{const c=[],h=[];for(const p of u.target.files){const d=await p.text();c.push(JSON.parse(d)),h.push(p.name)}n(0,a=c),console.log(a)},f=u=>{if(u.lenght===0)return[];const c=[];for(const h of u)for(const p of h.tests){let d=p.encoding;(p.encoding==="audio"||p.encoding==="waveform")&&(d=`${p.encoding} + ${p.audioFile.startsWith("./Fluid")?"piano":"drums"}`),c.push({...h.demographics,...p,date:h.date,testType:d})}return console.log(c),c},s=u=>{if(u.length===0)return[];const c=nn(u,h=>h.testType).map(([h,p])=>{const d=p.map(m=>m.final);return{encoding:h,finals:d,finalMean:Vn(d),finalVar:Vi(d),trialCounts:p.map(m=>m.trialCount)}});return console.log(c),c};return t.$$.update=()=>{t.$$.dirty&1&&n(4,i=f(a)),t.$$.dirty&16&&n(2,r=s(i)),t.$$.dirty&16&&n(1,o=ye(i.map(u=>Math.abs(u.final))))},[a,o,r,l,i]}class bM extends Pt{constructor(e){super(),Rt(this,e,gM,mM,It,{})}}function _M(t){let e,n,i;return{c(){e=M("div"),R(e,"width",n=t[0]+"px"),R(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[6](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&R(e,"width",n),o&2&&i!==(i=r[1]+"px")&&R(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[6](null)}}}function yM(t,e,n){let{data:i}=e,{domain:r}=e,{title:o=""}=e,{width:a=800}=e,{height:l=300}=e,f;Xe(()=>{console.log(o),console.log(i);const u=Oe({width:a,height:l,marginLeft:70,marginRight:10,x:{label:o,domain:r},y:{axis:!1,type:"band"},marks:[Ul(i,{x:c=>c,strokeWidth:.5}),Il(i,{x:c=>c,dx:7,y:(c,h)=>h,text:(c,h)=>`P${Math.floor(h/3)+1}-${h%3+1}`,fill:"black",stroke:"white"})]});n(2,f.textContent="",f),f.appendChild(u)});function s(u){re[u?"unshift":"push"](()=>{f=u,n(2,f)})}return t.$$set=u=>{"data"in u&&n(3,i=u.data),"domain"in u&&n(4,r=u.domain),"title"in u&&n(5,o=u.title),"width"in u&&n(0,a=u.width),"height"in u&&n(1,l=u.height)},[a,l,f,i,r,o,s]}class wM extends Pt{constructor(e){super(),Rt(this,e,yM,_M,It,{data:3,domain:4,title:5,width:0,height:1})}}function vM(t){let e,n,i;return{c(){e=M("div"),R(e,"width",n=t[0]+"px"),R(e,"height",i=t[1]+"px")},m(r,o){X(r,e,o),t[5](e)},p(r,[o]){o&1&&n!==(n=r[0]+"px")&&R(e,"width",n),o&2&&i!==(i=r[1]+"px")&&R(e,"height",i)},i:wt,o:wt,d(r){r&&V(e),t[5](null)}}}function xM(t,e,n){let{partis:i}=e,{width:r=800}=e,{height:o=150}=e,a;Xe(()=>{const s=i.map(c=>({partID:c.partID,...l(c.finals)}));console.log(i,s);const u=Oe({width:r,height:o,marginLeft:100,marginRight:10,x:{label:"absolute deviation in percent of the IOI"},y:{label:"",type:"band",domain:s.sort((c,h)=>c.mean-h.mean).map(c=>c.partID)},marks:[no(s,{x:c=>c.mean,y:c=>c.partID,symbol:"diamond"}),no(i,{x:c=>c.mean,y:c=>c.partID}),Ol(s,{x1:"low",y1:"partID",x2:"high",y2:"partID"}),Ll([0])]});n(2,a.textContent="",a),a.appendChild(u)});function l(s){const u=s.length,c=Vn(s),d=1.96*(oo(s)/Math.sqrt(u)),m=c-d,g=c+d;return{mean:c,low:m,high:g}}function f(s){re[s?"unshift":"push"](()=>{a=s,n(2,a)})}return t.$$set=s=>{"partis"in s&&n(3,i=s.partis),"width"in s&&n(0,r=s.width),"height"in s&&n(1,o=s.height)},[r,o,a,i,l,f]}class ta extends Pt{constructor(e){super(),Rt(this,e,xM,vM,It,{partis:3,width:0,height:1,confidenceInterval:4})}get confidenceInterval(){return this.$$.ctx[4]}}function kd(t,e,n){const i=t.slice();return i[13]=e[n],i}function Md(t){let e,n=t[13].encoding+"",i,r,o,a;return o=new wM({props:{data:t[13].finals,title:t[13].encoding,domain:[0,t[4]]}}),{c(){e=M("b"),i=at(n),r=D(),ct(o.$$.fragment)},m(l,f){X(l,e,f),y(e,i),X(l,r,f),st(o,l,f),a=!0},p(l,f){(!a||f&32)&&n!==(n=l[13].encoding+"")&&Nt(i,n);const s={};f&32&&(s.data=l[13].finals),f&32&&(s.title=l[13].encoding),f&16&&(s.domain=[0,l[4]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){J(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ut(o,l)}}}function kM(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,x,k,S,T,A,F,C,I,L,G,$,B,z,Z,Q,W,U,Y,K,ft;c=new Wu({props:{stimuli:t[5]}}),g=new Yu({props:{stimuli:t[5]}}),x=new ta({props:{partis:t[3]}}),A=new ta({props:{partis:t[2]}}),L=new ta({props:{partis:t[0]}}),z=new ta({props:{partis:t[1]}});let et=Bt(t[5]),j=[];for(let N=0;N<et.length;N+=1)j[N]=Md(kd(t,et,N));const q=N=>J(j[N],1,1,()=>{j[N]=null});return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis (Within-Participant Variance)",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("input"),l=D(),f=M("div"),s=M("h3"),s.textContent="Mean and CI of Final Values per Stimulus",u=D(),ct(c.$$.fragment),h=D(),p=M("div"),d=M("h3"),d.textContent="Mean and CI of Trial Counts per Stimulus",m=D(),ct(g.$$.fragment),_=D(),b=M("div"),v=M("h3"),v.textContent="Mean and CI of Final Values per Participant",w=D(),ct(x.$$.fragment),k=D(),S=M("h4"),S.textContent="Only Audio",T=D(),ct(A.$$.fragment),F=D(),C=M("h4"),C.textContent="Only Color",I=D(),ct(L.$$.fragment),G=D(),$=M("h4"),$.textContent="Only Waveform",B=D(),ct(z.$$.fragment),Z=D(),Q=M("div"),W=M("h3"),W.textContent="Final Values for Each Stimulus and All Participants",U=D();for(let N=0;N<j.length;N+=1)j[N].c();R(a,"type","file"),R(a,"accept",".json"),a.multiple=!0},m(N,E){X(N,e,E),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(f,s),y(f,u),st(c,f,null),y(e,h),y(e,p),y(p,d),y(p,m),st(g,p,null),y(e,_),y(e,b),y(b,v),y(b,w),st(x,b,null),y(b,k),y(b,S),y(b,T),st(A,b,null),y(b,F),y(b,C),y(b,I),st(L,b,null),y(b,G),y(b,$),y(b,B),st(z,b,null),y(e,Z),y(e,Q),y(Q,W),y(Q,U);for(let O=0;O<j.length;O+=1)j[O]&&j[O].m(Q,null);Y=!0,K||(ft=gt(a,"input",t[6]),K=!0)},p(N,[E]){const O={};E&32&&(O.stimuli=N[5]),c.$set(O);const tt={};E&32&&(tt.stimuli=N[5]),g.$set(tt);const P={};E&8&&(P.partis=N[3]),x.$set(P);const pt={};E&4&&(pt.partis=N[2]),A.$set(pt);const rt={};E&1&&(rt.partis=N[0]),L.$set(rt);const mt={};if(E&2&&(mt.partis=N[1]),z.$set(mt),E&48){et=Bt(N[5]);let nt;for(nt=0;nt<et.length;nt+=1){const ht=kd(N,et,nt);j[nt]?(j[nt].p(ht,E),H(j[nt],1)):(j[nt]=Md(ht),j[nt].c(),H(j[nt],1),j[nt].m(Q,null))}for(Qt(),nt=et.length;nt<j.length;nt+=1)q(nt);Jt()}},i(N){if(!Y){H(c.$$.fragment,N),H(g.$$.fragment,N),H(x.$$.fragment,N),H(A.$$.fragment,N),H(L.$$.fragment,N),H(z.$$.fragment,N);for(let E=0;E<et.length;E+=1)H(j[E]);Y=!0}},o(N){J(c.$$.fragment,N),J(g.$$.fragment,N),J(x.$$.fragment,N),J(A.$$.fragment,N),J(L.$$.fragment,N),J(z.$$.fragment,N),j=j.filter(Boolean);for(let E=0;E<j.length;E+=1)J(j[E]);Y=!1},d(N){N&&V(e),ut(c),ut(g),ut(x),ut(A),ut(L),ut(z),en(j,N),K=!1,ft()}}}function MM(t,e,n){let i,r,o,a,l,f,s,u=[];const c=async m=>{const g=[],_=[];for(const b of m.target.files){const v=await b.text();g.push(JSON.parse(v)),_.push(b.name)}n(7,u=g),console.log(u)},h=m=>{if(m.lenght===0)return[];const g=[];for(const _ of m)for(const b of _.tests){let v=b.encoding;(b.encoding==="audio"||b.encoding==="waveform")&&(v=`${b.encoding} + ${b.audioFile.startsWith("./Fluid")?"piano":"drums"}`),g.push({..._.demographics,...b,date:_.date,testType:v})}return console.log(g),g},p=m=>{if(m.length===0)return[];const g=nn(m,_=>_.testType).map(([_,b])=>{const v=b.map(w=>w.final);return{encoding:_,finals:v,finalMean:Vn(v),finalVar:Vi(v),trialCounts:b.map(w=>w.trialCount)}});return console.log(g),g},d=(m,g)=>{if(m.length===0)return[];g&&(m=m.filter(b=>b.testType===g));const _=nn(m,b=>b.partID).map(([b,v])=>{const w=v.map(x=>x.final);return{partID:b,finals:w,finalMean:Vn(w),finalVar:Vi(w),trialCounts:v.map(x=>x.trialCount)}});return console.log(_),_};return t.$$.update=()=>{t.$$.dirty&128&&n(8,i=h(u)),t.$$.dirty&256&&n(5,r=p(i)),t.$$.dirty&256&&n(4,o=ye(i.map(m=>Math.abs(m.final)))),t.$$.dirty&256&&n(3,a=d(i)),t.$$.dirty&256&&n(2,l=d(i,"audio + piano")),t.$$.dirty&256&&n(1,f=d(i,"waveform + piano")),t.$$.dirty&256&&n(0,s=d(i,"color"))},[s,f,l,a,o,r,c,u,i]}class SM extends Pt{constructor(e){super(),Rt(this,e,MM,kM,It,{})}}function Sd(t,e){return t==null?e:typeof t=="function"?t:n=>n[t]}function TM(t,e,n,i,r,o){const a=new Float64Array(o),l=(o-1)/(r-i);for(let f=0;f<t.length;++f){const s=t[f],u=e(s,f,t),c=n(s,f,t);if(!(Number.isFinite(u)&&Number.isFinite(c)))continue;const h=(u-i)*l,p=Math.floor(h),d=p+1;0<=p&&d<o?(a[p]+=(d-h)*c,a[d]+=(h-p)*c):p===-1?a[d]+=(h-p)*c:d===o&&(a[p]+=(d-h)*c)}return a}function Td(t,e=!1){const n=new Float64Array(5),i=new Float64Array(4);CM(n,i,t);const r=Float64Array.of(0,i[1]-n[1]*i[0],i[2]-n[2]*i[0],i[3]-n[3]*i[0],-n[4]*i[0]),o=1+n[1]+n[2]+n[3]+n[4],a=(i[0]+i[1]+i[2]+i[3])/o,l=(r[1]+r[2]+r[3]+r[4])/o;return{sigma:t,negative:e,a:n,b_causal:i,b_anticausal:r,sum_causal:a,sum_anticausal:l}}function CM(t,e,n){const r=Float64Array.of(.84,1.8675,.84,-1.8675,-.34015,-.1299,-.34015,.1299),o=Math.exp(-1.783/n),a=Math.exp(-1.723/n),l=.6318/n,f=1.997/n,s=Float64Array.of(-o*Math.cos(l),o*Math.sin(l),-o*Math.cos(-l),o*Math.sin(-l),-a*Math.cos(f),a*Math.sin(f),-a*Math.cos(-f),a*Math.sin(-f)),u=n*2.5066282746310007,c=Float64Array.of(r[0],r[1],0,0,0,0,0,0),h=Float64Array.of(1,0,s[0],s[1],0,0,0,0,0,0);let p,d;for(d=2;d<8;d+=2){for(c[d]=s[d]*c[d-2]-s[d+1]*c[d-1],c[d+1]=s[d]*c[d-1]+s[d+1]*c[d-2],p=d-2;p>0;p-=2)c[p]+=s[d]*c[p-2]-s[d+1]*c[p-1],c[p+1]+=s[d]*c[p-1]+s[d+1]*c[p-2];for(p=0;p<=d;p+=2)c[p]+=r[d]*h[p]-r[d+1]*h[p+1],c[p+1]+=r[d]*h[p+1]+r[d+1]*h[p];for(h[d+2]=s[d]*h[d]-s[d+1]*h[d+1],h[d+3]=s[d]*h[d+1]+s[d+1]*h[d],p=d;p>0;p-=2)h[p]+=s[d]*h[p-2]-s[d+1]*h[p-1],h[p+1]+=s[d]*h[p-1]+s[d+1]*h[p-2]}for(d=0;d<4;++d)p=d<<1,e[d]=c[p]/u,t[d+1]=h[p+2]}function $M(t,e,n,i=1,r=new Float64Array(n),o=new Float64Array(n),a=new Float64Array(5),l=r,f=AM){const s=i*2,u=i*3,c=i*4,h=i*n;let p,d;for(f(r,e,n,i,t.b_causal,3,t.a,4,t.sum_causal,a,t.sigma),d=4,p=c;d<n;++d,p+=i)r[d]=t.b_causal[0]*e[p]+t.b_causal[1]*e[p-i]+t.b_causal[2]*e[p-s]+t.b_causal[3]*e[p-u]-t.a[1]*r[d-1]-t.a[2]*r[d-2]-t.a[3]*r[d-3]-t.a[4]*r[d-4];for(f(o,e,n,-i,t.b_anticausal,4,t.a,4,t.sum_anticausal,a,t.sigma),d=4,p=h-i*5;d<n;++d,p-=i)o[d]=t.b_anticausal[1]*e[p+i]+t.b_anticausal[2]*e[p+s]+t.b_anticausal[3]*e[p+u]+t.b_anticausal[4]*e[p+c]-t.a[1]*o[d-1]-t.a[2]*o[d-2]-t.a[3]*o[d-3]-t.a[4]*o[d-4];if(t.negative)for(d=0,p=0;d<n;++d,p+=i)l[p]=r[d]+o[n-d-1];else for(d=0,p=0;d<n;++d,p+=i)l[p]=Math.max(0,r[d]+o[n-d-1]);return l}function AM(t,e,n,i,r,o,a,l,f,s){const u=Math.abs(i)*n,c=i<0?u+i:0;let h,p,d;for(p=0;p<l;++p)for(s[p]=p<=o?r[p]:0,d=1;d<=l&&d<=p;++d)s[p]-=a[d]*s[p-d];for(d=0;d<l;++d)for(t[d]=0,p=1;p<=d;++p)h=c+i*p,h>=0&&h<u&&(t[d]+=s[d-p]*e[h]);const m=e[c];if(m>0)for(d=0;d<l;++d)t[d]+=s[d]*m}function EM(t,e,n=0){const i=t.length;let r,o;for(let a=0;a<i;++a){const l=e(t[a],a,t);l!=null&&(r===void 0?l>=l&&(r=o=l):(l<r&&(r=l),l>o&&(o=l)))}return[r-n,o+n]}function NM(t,e){const n=t.map(e).filter(s=>s!=null&&s>=s);n.sort((s,u)=>s-u);const i=DM(n),r=Cd(n,.25),o=Cd(n,.75),a=n.length,l=(o-r)/1.34;return 1.06*(Math.min(i,l)||i||Math.abs(r)||1)*Math.pow(a,-.2)}function DM(t){const e=t.length;let n=0,i,r=0,o=0;for(let a=0;a<e;++a){const l=t[a];i=l-r,r+=i/++n,o+=i*(l-r)}return n>1?Math.sqrt(o/(n-1)):NaN}function Cd(t,e){const n=t.length;if(!n)return NaN;if((e=+e)<=0||n<2)return t[0];if(e>=1)return t[n-1];const i=(n-1)*e,r=Math.floor(i),o=t[r];return o+(t[r+1]-o)*(i-r)}function FM(t,e={}){const{adjust:n=1,pad:i=3,bins:r=512}=e,o=Sd(e.x,_=>_),a=Sd(e.weight,()=>1/t.length);let l=e.bandwidth??n*NM(t,o);const[f,s]=e.extent??EM(t,o,i*l),u=TM(t,o,a,f,s,r),c=(s-f)/(r-1),h=u.some(_=>_<0);let p=Td(l/c,h),d;function*m(_="x",b="y"){const v=g.grid(),w=1/c;for(let x=0;x<r;++x)yield{[_]:f+x*c,[b]:v[x]*w}}const g={[Symbol.iterator]:m,points:m,grid:()=>d||(d=$M(p,u,r)),extent:()=>[f,s],bandwidth(_){return arguments.length?(_!==l&&(l=_,d=null,p=Td(l/c,h)),g):l}};return g}function LM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),R(n,"width",i=t[0]+"px"),R(n,"height",r=t[1]+"px")},m(o,a){X(o,e,a),y(e,n),t[10](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&R(n,"width",i),a&2&&r!==(r=o[1]+"px")&&R(n,"height",r)},i:wt,o:wt,d(o){o&&V(e),t[10](null)}}}function IM(t,e,n){let i,{values:r}=e,{title:o=""}=e,{xLabel:a="some value"}=e,{xDomain:l=void 0}=e,{width:f=1e3}=e,{height:s=100}=e,{bandwidth:u=.25}=e,{bins:c=256}=e,{pad:h=4}=e,p;Xe(()=>{const m=[...i.bandwidth(u)];n(2,p.textContent="",p);const g=Oe({width:f,height:s,title:o,style:{background:"none"},grid:!0,x:{label:a,domain:l},y:{label:"density",type:"linear"},marks:[ek(m,{x:"x",y:"y",fill:"#ccc"}),Ul(r,{x:_=>_,strokeWidth:.5}),f2([0])]});p.appendChild(g)});function d(m){re[m?"unshift":"push"](()=>{p=m,n(2,p)})}return t.$$set=m=>{"values"in m&&n(3,r=m.values),"title"in m&&n(4,o=m.title),"xLabel"in m&&n(5,a=m.xLabel),"xDomain"in m&&n(6,l=m.xDomain),"width"in m&&n(0,f=m.width),"height"in m&&n(1,s=m.height),"bandwidth"in m&&n(7,u=m.bandwidth),"bins"in m&&n(8,c=m.bins),"pad"in m&&n(9,h=m.pad)},t.$$.update=()=>{t.$$.dirty&904&&(i=FM(r,{bandwidth:u,pad:h,bins:c}))},[f,s,p,r,o,a,l,u,c,h,d]}class RM extends Pt{constructor(e){super(),Rt(this,e,IM,LM,It,{values:3,title:4,xLabel:5,xDomain:6,width:0,height:1,bandwidth:7,bins:8,pad:9})}}function PM(t){let e,n,i,r;return{c(){e=M("main"),n=M("div"),R(n,"width",i=t[0]+"px"),R(n,"height",r=t[1]+"px")},m(o,a){X(o,e,a),y(e,n),t[13](n)},p(o,[a]){a&1&&i!==(i=o[0]+"px")&&R(n,"width",i),a&2&&r!==(r=o[1]+"px")&&R(n,"height",r)},i:wt,o:wt,d(o){o&&V(e),t[13](null)}}}function OM(t,e,n){let{title:i=""}=e,{data:r}=e,{x:o="x"}=e,{y:a="y"}=e,{tipTitle:l=null}=e,{xLabel:f=null}=e,{yLabel:s=null}=e,{xDomain:u=void 0}=e,{yDomain:c=void 0}=e,{grid:h=!1}=e,{width:p=300}=e,{height:d=300}=e,m;Xe(()=>{console.log(r,o,a),n(2,m.textContent="",m);const _=Oe({width:p,height:d,title:i,grid:h,style:{background:"none"},x:{label:f||(typeof o=="string"?o:"x"),domain:u},y:{label:s||(typeof a=="string"?a:"y"),domain:c},marks:[no(r,{x:o,y:a}),z2(r,jg({x:o,y:a,title:l})),Ol({length:1},{x1:u[0],x2:u[1],y1:c[0],y2:c[1],stroke:"#ccc"})]});m.appendChild(_)});function g(_){re[_?"unshift":"push"](()=>{m=_,n(2,m)})}return t.$$set=_=>{"title"in _&&n(3,i=_.title),"data"in _&&n(4,r=_.data),"x"in _&&n(5,o=_.x),"y"in _&&n(6,a=_.y),"tipTitle"in _&&n(7,l=_.tipTitle),"xLabel"in _&&n(8,f=_.xLabel),"yLabel"in _&&n(9,s=_.yLabel),"xDomain"in _&&n(10,u=_.xDomain),"yDomain"in _&&n(11,c=_.yDomain),"grid"in _&&n(12,h=_.grid),"width"in _&&n(0,p=_.width),"height"in _&&n(1,d=_.height)},[p,d,m,i,r,o,a,l,f,s,u,c,h,g]}class $d extends Pt{constructor(e){super(),Rt(this,e,OM,PM,It,{title:3,data:4,x:5,y:6,tipTitle:7,xLabel:8,yLabel:9,xDomain:10,yDomain:11,grid:12,width:0,height:1})}}function Ad(t,e,n){const i=t.slice();return i[10]=e[n],i}function Ed(t,e,n){const i=t.slice();return i[13]=e[n],i}function Nd(t,e,n){const i=t.slice();return i[16]=e[n],i}function Dd(t,e,n){const i=t.slice();return i[19]=e[n],i}function Fd(t,e,n){const i=t.slice();return i[22]=e[n][0],i[23]=e[n][1],i}function Ld(t){let e,n=t[22]+"",i,r,o=t[23].length+"",a,l;return{c(){e=M("p"),i=at(n),r=at(": "),a=at(o),l=at(" times")},m(f,s){X(f,e,s),y(e,i),y(e,r),y(e,a),y(e,l)},p(f,s){s&1&&n!==(n=f[22]+"")&&Nt(i,n),s&1&&o!==(o=f[23].length+"")&&Nt(a,o)},d(f){f&&V(e)}}}function Id(t){let e,n;return e=new RM({props:{title:`Density of final values for ${t[19][0]}`,values:t[19][1].map(qd),xLabel:"final values",xDomain:[-1,20]}}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.title=`Density of final values for ${i[19][0]}`),r&2&&(o.values=i[19][1].map(qd)),e.$set(o)},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function Rd(t){let e,n=t[16].encoding+"",i,r,o,a;return o=new ob({props:{data:t[16].finals,title:t[16].encoding,domain:[0,t[2]]}}),{c(){e=M("b"),i=at(n),r=D(),ct(o.$$.fragment)},m(l,f){X(l,e,f),y(e,i),X(l,r,f),st(o,l,f),a=!0},p(l,f){(!a||f&8)&&n!==(n=l[16].encoding+"")&&Nt(i,n);const s={};f&8&&(s.data=l[16].finals),f&8&&(s.title=l[16].encoding),f&4&&(s.domain=[0,l[2]]),o.$set(s)},i(l){a||(H(o.$$.fragment,l),a=!0)},o(l){J(o.$$.fragment,l),a=!1},d(l){l&&(V(e),V(r)),ut(o,l)}}}function Pd(t){let e,n=t[13]+"",i;return{c(){e=M("p"),i=at(n)},m(r,o){X(r,e,o),y(e,i)},p(r,o){o&1&&n!==(n=r[13]+"")&&Nt(i,n)},d(r){r&&V(e)}}}function Od(t){let e,n,i,r=t[10].demographics.internalPID+"",o,a,l=t[10].demographics.partID+"",f,s,u,c=Bt(t[10].demographics.partFeedback.split(`
`)),h=[];for(let p=0;p<c.length;p+=1)h[p]=Pd(Ed(t,c,p));return{c(){e=M("div"),n=M("b"),i=at("P"),o=at(r),a=D(),f=at(l),s=at(`:
        `);for(let p=0;p<h.length;p+=1)h[p].c();u=D(),ge(e,"text-align","left")},m(p,d){X(p,e,d),y(e,n),y(n,i),y(n,o),y(e,a),y(e,f),y(e,s);for(let m=0;m<h.length;m+=1)h[m]&&h[m].m(e,null);y(e,u)},p(p,d){if(d&1&&r!==(r=p[10].demographics.internalPID+"")&&Nt(o,r),d&1&&l!==(l=p[10].demographics.partID+"")&&Nt(f,l),d&1){c=Bt(p[10].demographics.partFeedback.split(`
`));let m;for(m=0;m<c.length;m+=1){const g=Ed(p,c,m);h[m]?h[m].p(g,d):(h[m]=Pd(g),h[m].c(),h[m].m(e,u))}for(;m<h.length;m+=1)h[m].d(1);h.length=c.length}},d(p){p&&V(e),en(h,p)}}}function UM(t){let e,n,i,r,o,a,l,f,s,u,c=t[0].length+"",h,p,d=t[1].length+"",m,g,_=t[4].length+"",b,v,w,x,k,S,T,A,F,C,I,L,G,$,B,z,Z,Q,W,U,Y,K,ft,et,j,q,N,E,O,tt,P,pt,rt,mt=Bt(nn(t[0],Ud).sort(zd)),nt=[];for(let ot=0;ot<mt.length;ot+=1)nt[ot]=Ld(Fd(t,mt,ot));let ht=Bt(nn(t[1],Bd)),kt=[];for(let ot=0;ot<ht.length;ot+=1)kt[ot]=Id(Dd(t,ht,ot));const ue=ot=>J(kt[ot],1,1,()=>{kt[ot]=null});C=new $d({props:{title:"Audio vs. Waveform",x:"finalAudio",y:"finalWaveform",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),L=new $d({props:{title:"Audio vs. Color",x:"finalAudio",y:"finalColor",tipTitle:"partID",xDomain:[0,20],yDomain:[0,20],data:t[0]}}),Z=new Wu({props:{stimuli:t[3]}}),K=new Yu({props:{stimuli:t[3]}});let Et=Bt(t[3]),bt=[];for(let ot=0;ot<Et.length;ot+=1)bt[ot]=Rd(Nd(t,Et,ot));const Wt=ot=>J(bt[ot],1,1,()=>{bt[ot]=null});let Ue=Bt(t[0].filter(Wd)),Gt=[];for(let ot=0;ot<Ue.length;ot+=1)Gt[ot]=Od(Ad(t,Ue,ot));return{c(){e=M("main"),n=M("h2"),n.textContent="Analysis",i=D(),r=M("p"),r.textContent=`Open a file that you saved after a study here to see the staircases and
    final values.`,o=D(),a=M("label"),l=at(`Results JSONs and Prolific demographics CSV
    `),f=M("input"),s=D(),u=M("div"),h=at(c),p=at(` participants completed -
    `),m=at(d),g=at(` tests -
    `),b=at(_),v=at(" filtered tests"),w=D(),x=M("div"),k=M("h3"),k.textContent="Encoding order",S=D();for(let ot=0;ot<nt.length;ot+=1)nt[ot].c();T=D(),A=M("div");for(let ot=0;ot<kt.length;ot+=1)kt[ot].c();F=D(),ct(C.$$.fragment),I=D(),ct(L.$$.fragment),G=D(),$=M("div"),B=M("h3"),B.textContent="Mean and CI of Final Values",z=D(),ct(Z.$$.fragment),Q=D(),W=M("div"),U=M("h3"),U.textContent="Mean and CI of Trial Counts",Y=D(),ct(K.$$.fragment),ft=D(),et=M("div"),j=M("h3"),j.textContent="Final Values for Each Stimulus and All Participants",q=D();for(let ot=0;ot<bt.length;ot+=1)bt[ot].c();N=D(),E=M("div"),O=M("h3"),O.textContent="Feedback",tt=D();for(let ot=0;ot<Gt.length;ot+=1)Gt[ot].c();R(f,"type","file"),R(f,"accept",".json,.csv"),f.multiple=!0},m(ot,Tt){X(ot,e,Tt),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(a,l),y(a,f),y(e,s),y(e,u),y(u,h),y(u,p),y(u,m),y(u,g),y(u,b),y(u,v),y(e,w),y(e,x),y(x,k),y(x,S);for(let Ft=0;Ft<nt.length;Ft+=1)nt[Ft]&&nt[Ft].m(x,null);y(e,T),y(e,A);for(let Ft=0;Ft<kt.length;Ft+=1)kt[Ft]&&kt[Ft].m(A,null);y(e,F),st(C,e,null),y(e,I),st(L,e,null),y(e,G),y(e,$),y($,B),y($,z),st(Z,$,null),y(e,Q),y(e,W),y(W,U),y(W,Y),st(K,W,null),y(e,ft),y(e,et),y(et,j),y(et,q);for(let Ft=0;Ft<bt.length;Ft+=1)bt[Ft]&&bt[Ft].m(et,null);y(e,N),y(e,E),y(E,O),y(E,tt);for(let Ft=0;Ft<Gt.length;Ft+=1)Gt[Ft]&&Gt[Ft].m(E,null);P=!0,pt||(rt=gt(f,"input",t[5]),pt=!0)},p(ot,[Tt]){if((!P||Tt&1)&&c!==(c=ot[0].length+"")&&Nt(h,c),(!P||Tt&2)&&d!==(d=ot[1].length+"")&&Nt(m,d),(!P||Tt&16)&&_!==(_=ot[4].length+"")&&Nt(b,_),Tt&1){mt=Bt(nn(ot[0],Ud).sort(zd));let dt;for(dt=0;dt<mt.length;dt+=1){const xe=Fd(ot,mt,dt);nt[dt]?nt[dt].p(xe,Tt):(nt[dt]=Ld(xe),nt[dt].c(),nt[dt].m(x,null))}for(;dt<nt.length;dt+=1)nt[dt].d(1);nt.length=mt.length}if(Tt&2){ht=Bt(nn(ot[1],Bd));let dt;for(dt=0;dt<ht.length;dt+=1){const xe=Dd(ot,ht,dt);kt[dt]?(kt[dt].p(xe,Tt),H(kt[dt],1)):(kt[dt]=Id(xe),kt[dt].c(),H(kt[dt],1),kt[dt].m(A,null))}for(Qt(),dt=ht.length;dt<kt.length;dt+=1)ue(dt);Jt()}const Ft={};Tt&1&&(Ft.data=ot[0]),C.$set(Ft);const dn={};Tt&1&&(dn.data=ot[0]),L.$set(dn);const mr={};Tt&8&&(mr.stimuli=ot[3]),Z.$set(mr);const Dn={};if(Tt&8&&(Dn.stimuli=ot[3]),K.$set(Dn),Tt&12){Et=Bt(ot[3]);let dt;for(dt=0;dt<Et.length;dt+=1){const xe=Nd(ot,Et,dt);bt[dt]?(bt[dt].p(xe,Tt),H(bt[dt],1)):(bt[dt]=Rd(xe),bt[dt].c(),H(bt[dt],1),bt[dt].m(et,null))}for(Qt(),dt=Et.length;dt<bt.length;dt+=1)Wt(dt);Jt()}if(Tt&1){Ue=Bt(ot[0].filter(Wd));let dt;for(dt=0;dt<Ue.length;dt+=1){const xe=Ad(ot,Ue,dt);Gt[dt]?Gt[dt].p(xe,Tt):(Gt[dt]=Od(xe),Gt[dt].c(),Gt[dt].m(E,null))}for(;dt<Gt.length;dt+=1)Gt[dt].d(1);Gt.length=Ue.length}},i(ot){if(!P){for(let Tt=0;Tt<ht.length;Tt+=1)H(kt[Tt]);H(C.$$.fragment,ot),H(L.$$.fragment,ot),H(Z.$$.fragment,ot),H(K.$$.fragment,ot);for(let Tt=0;Tt<Et.length;Tt+=1)H(bt[Tt]);P=!0}},o(ot){kt=kt.filter(Boolean);for(let Tt=0;Tt<kt.length;Tt+=1)J(kt[Tt]);J(C.$$.fragment,ot),J(L.$$.fragment,ot),J(Z.$$.fragment,ot),J(K.$$.fragment,ot),bt=bt.filter(Boolean);for(let Tt=0;Tt<bt.length;Tt+=1)J(bt[Tt]);P=!1},d(ot){ot&&V(e),en(nt,ot),en(kt,ot),ut(C),ut(L),ut(Z),ut(K),en(bt,ot),en(Gt,ot),pt=!1,rt()}}}let zM=20;const Ud=t=>t.encodingOrder,zd=(t,e)=>t[1].lenght-e[1].length,Bd=t=>t.testType,qd=t=>t.final,Wd=t=>t.demographics.partFeedback.trim().length>0;function BM(t,e,n){let i,r,o,a,l=[],f=null;const s=async p=>{const d=[];for(const g of p.target.files)if(g.name.endsWith(".csv")){const _=await g.text();f=Jv(_)}else{const _=await g.text();d.push(JSON.parse(_))}console.log(d.map(g=>`${g.demographics.partID} ${g.studyStep}`));const m=nn(d,g=>g.demographics.partID);console.log(`${m.length} participants`,m),n(0,l=d.filter(g=>g.studyStep==="feedback").map((g,_)=>({...g,demographics:{...g.demographics,internalPID:_+1},prolificDemogr:f.filter(b=>b["Participant id"]===g.demographics.partID)[0],finalAudio:g.tests.filter(b=>b.encoding.startsWith("audio"))[0].final,finalColor:g.tests.filter(b=>b.encoding.startsWith("color"))[0].final,finalWaveform:g.tests.filter(b=>b.encoding.startsWith("waveform"))[0].final,encodingOrder:g.tests.map(b=>b.encoding).join(", ")}))),console.log("participants",l)},u=p=>{if(p.lenght===0)return[];const d=[];for(const m of p)for(const g of m.tests){let _=g.encoding;(g.encoding==="audio"||g.encoding==="waveform")&&(_=`${g.encoding} + ${g.audioFile.startsWith("./Fluid")?"piano":"drums"}`),d.push({...m.demographics,countryBirth:m.prolificDemogr["Country of birth"],countryResidence:m.prolificDemogr["Country of residence"],prolificApprovals:m.prolificDemogr["Total approvals"],...g,date:m.date,testType:_})}return console.log("tests",d),d},c=(p,d)=>p.filter(m=>m.final<d),h=p=>{if(p.length===0)return[];const d=nn(p,m=>m.testType).map(([m,g])=>{const _=g.map(b=>b.final);return{encoding:m,testType:m,finals:_,finalMean:Vn(_),finalVar:Vi(_),trialCounts:g.map(b=>b.trialCount)}});return console.log(d),d};return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=u(l)),t.$$.dirty&2&&n(4,r=c(i,zM)),t.$$.dirty&2&&n(3,o=h(i)),t.$$.dirty&2&&n(2,a=ye(i.map(p=>Math.abs(p.final)))),t.$$.dirty&2&&console.log("tests by enc",nn(i,p=>p.testType))},[l,i,a,o,r,s]}class qM extends Pt{constructor(e){super(),Rt(this,e,BM,UM,It,{})}}function Yd(t,e,n){const i=t.slice();return i[8]=e[n],i}function Hd(t){let e,n=t[8].substring(0,30)+"",i;return{c(){e=M("option"),i=at(n),e.__value=t[8],lt(e,e.__value)},m(r,o){X(r,e,o),y(e,i)},p:wt,d(r){r&&V(e)}}}function WM(t){let e,n,i,r,o,a,l,f,s=(t[1]*1e3).toFixed(1)+"",u,c,h,p,d,m,g,_,b,v,w,x,k,S,T,A,F,C,I,L,G,$,B,z,Z,Q,W,U,Y,K,ft,et,j,q,N=Bt(t[5]),E=[];for(let O=0;O<N.length;O+=1)E[O]=Hd(Yd(t,N,O));return k=new io({props:{pattern:t[3],audioFile:t[2]}}),T=new io({props:{pattern:t[4],audioFile:t[2]}}),F=new Hn({props:{pattern:t[3],audioFile:t[2],width:Ln,height:In}}),I=new Hn({props:{pattern:t[4],audioFile:t[2],width:Ln,height:In}}),G=new qn({props:{pattern:t[3],width:Ln,height:In}}),B=new qn({props:{pattern:t[4],width:Ln,height:In}}),Z=new Wn({props:{pattern:t[3],width:Ln,height:In}}),W=new Wn({props:{pattern:t[4],width:Ln,height:In}}),Y=new Yn({props:{pattern:t[3],width:Ln,height:In}}),ft=new Yn({props:{pattern:t[4],width:Ln,height:In}}),{c(){e=M("main"),n=M("h2"),n.textContent="Examples",i=D(),r=M("div"),o=M("label"),a=at(`deviation
      `),l=M("input"),f=at(`
      (`),u=at(s),c=at(" milliseconds)"),h=D(),p=M("label"),d=at(`instrument sample:
      `),m=M("select");for(let O=0;O<E.length;O+=1)E[O].c();g=D(),_=M("div"),b=M("h2"),b.textContent="early fourth note",v=D(),w=M("h2"),w.textContent="late fourth note",x=D(),ct(k.$$.fragment),S=D(),ct(T.$$.fragment),A=D(),ct(F.$$.fragment),C=D(),ct(I.$$.fragment),L=D(),ct(G.$$.fragment),$=D(),ct(B.$$.fragment),z=D(),ct(Z.$$.fragment),Q=D(),ct(W.$$.fragment),U=D(),ct(Y.$$.fragment),K=D(),ct(ft.$$.fragment),R(l,"type","range"),R(l,"min","0"),R(l,"max","20"),R(l,"step","1"),R(o,"class","svelte-1kjj0oz"),t[2]===void 0&&fn(()=>t[7].call(m)),R(p,"class","svelte-1kjj0oz"),R(_,"class","stimuli svelte-1kjj0oz")},m(O,tt){X(O,e,tt),y(e,n),y(e,i),y(e,r),y(r,o),y(o,a),y(o,l),lt(l,t[0]),y(o,f),y(o,u),y(o,c),y(r,h),y(r,p),y(p,d),y(p,m);for(let P=0;P<E.length;P+=1)E[P]&&E[P].m(m,null);pe(m,t[2],!0),y(e,g),y(e,_),y(_,b),y(_,v),y(_,w),y(_,x),st(k,_,null),y(_,S),st(T,_,null),y(_,A),st(F,_,null),y(_,C),st(I,_,null),y(_,L),st(G,_,null),y(_,$),st(B,_,null),y(_,z),st(Z,_,null),y(_,Q),st(W,_,null),y(_,U),st(Y,_,null),y(_,K),st(ft,_,null),et=!0,j||(q=[gt(l,"change",t[6]),gt(l,"input",t[6]),gt(m,"change",t[7])],j=!0)},p(O,[tt]){if(tt&1&&lt(l,O[0]),(!et||tt&2)&&s!==(s=(O[1]*1e3).toFixed(1)+"")&&Nt(u,s),tt&32){N=Bt(O[5]);let Wt;for(Wt=0;Wt<N.length;Wt+=1){const Ue=Yd(O,N,Wt);E[Wt]?E[Wt].p(Ue,tt):(E[Wt]=Hd(Ue),E[Wt].c(),E[Wt].m(m,null))}for(;Wt<E.length;Wt+=1)E[Wt].d(1);E.length=N.length}tt&36&&pe(m,O[2]);const P={};tt&8&&(P.pattern=O[3]),tt&4&&(P.audioFile=O[2]),k.$set(P);const pt={};tt&16&&(pt.pattern=O[4]),tt&4&&(pt.audioFile=O[2]),T.$set(pt);const rt={};tt&8&&(rt.pattern=O[3]),tt&4&&(rt.audioFile=O[2]),F.$set(rt);const mt={};tt&16&&(mt.pattern=O[4]),tt&4&&(mt.audioFile=O[2]),I.$set(mt);const nt={};tt&8&&(nt.pattern=O[3]),G.$set(nt);const ht={};tt&16&&(ht.pattern=O[4]),B.$set(ht);const kt={};tt&8&&(kt.pattern=O[3]),Z.$set(kt);const ue={};tt&16&&(ue.pattern=O[4]),W.$set(ue);const Et={};tt&8&&(Et.pattern=O[3]),Y.$set(Et);const bt={};tt&16&&(bt.pattern=O[4]),ft.$set(bt)},i(O){et||(H(k.$$.fragment,O),H(T.$$.fragment,O),H(F.$$.fragment,O),H(I.$$.fragment,O),H(G.$$.fragment,O),H(B.$$.fragment,O),H(Z.$$.fragment,O),H(W.$$.fragment,O),H(Y.$$.fragment,O),H(ft.$$.fragment,O),et=!0)},o(O){J(k.$$.fragment,O),J(T.$$.fragment,O),J(F.$$.fragment,O),J(I.$$.fragment,O),J(G.$$.fragment,O),J(B.$$.fragment,O),J(Z.$$.fragment,O),J(W.$$.fragment,O),J(Y.$$.fragment,O),J(ft.$$.fragment,O),et=!1},d(O){O&&V(e),en(E,O),ut(k),ut(T),ut(F),ut(I),ut(G),ut(B),ut(Z),ut(W),ut(Y),ut(ft),j=!1,Ie(q)}}}let Ln=600,In=100,Ff=.5,Vd=6,Gd=3,Xd=!0,jd=0;function YM(t,e,n){let i;const r=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let o=r[0],a=20,l=[],f=[];function s(){a=_e(this.value),n(0,a)}function u(){o=di(this),n(2,o),n(5,r)}return t.$$.update=()=>{t.$$.dirty&1&&n(1,i=a/100*Ff),t.$$.dirty&2&&n(3,l=Hi(Vd,Ff,Gd,-i,Xd,jd)),t.$$.dirty&2&&n(4,f=Hi(Vd,Ff,Gd,i,Xd,jd))},[a,i,o,l,f,r,s,u]}class HM extends Pt{constructor(e){super(),Rt(this,e,YM,WM,It,{})}}function VM(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio (p)",n.controls=!1},m(l,f){X(l,e,f),y(e,n),t[5](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:wt,i:wt,o:wt,d(l){l&&V(e),t[5](null),o=!1,a()}}}function GM(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,{currentTrialNumber:o=-1}=e,a=null,l;const f=()=>{r&&l&&(a=Ga(r,i),Fs(a,r.sampleRate,l))};pi(f);const s=()=>{l&&(n(0,l.currentTime=0,l),l.play())};pi(()=>{document.querySelector("html").addEventListener("keyup",c=>{c.key==="p"&&s()})});function u(c){re[c?"unshift":"push"](()=>{l=c,n(0,l)})}return t.$$set=c=>{"pattern"in c&&n(2,i=c.pattern),"cachedAudio"in c&&n(3,r=c.cachedAudio),"currentTrialNumber"in c&&n(4,o=c.currentTrialNumber)},t.$$.update=()=>{t.$$.dirty&16&&o>-1&&(f(),window.setTimeout(s,200))},[l,s,i,r,o,u]}class XM extends Pt{constructor(e){super(),Rt(this,e,GM,VM,It,{pattern:2,cachedAudio:3,currentTrialNumber:4})}}function sa(t,e){return new URLSearchParams(t.location.search).get(e)}function jM(t){let e,n,i,r,o,a;return{c(){e=M("main"),n=M("audio"),i=D(),r=M("button"),r.textContent="play audio",n.controls=!1},m(l,f){X(l,e,f),y(e,n),t[4](n),y(e,i),y(e,r),o||(a=gt(r,"click",t[1]),o=!0)},p:wt,i:wt,o:wt,d(l){l&&V(e),t[4](null),o=!1,a()}}}function ZM(t,e,n){let{pattern:i}=e,{cachedAudio:r=null}=e,o=null,a;const l=(u,c)=>{c&&a&&(o=Ga(c,u),Fs(o,c.sampleRate,a))};pi(()=>l(i,r));const f=async()=>{a&&(n(0,a.currentTime=0,a),a.play())};function s(u){re[u?"unshift":"push"](()=>{a=u,n(0,a)})}return t.$$set=u=>{"pattern"in u&&n(2,i=u.pattern),"cachedAudio"in u&&n(3,r=u.cachedAudio)},[a,f,i,r,s]}class KM extends Pt{constructor(e){super(),Rt(this,e,ZM,jM,It,{pattern:2,cachedAudio:3})}}function Zd(t){let e;return{c(){e=M("div"),e.innerHTML=`<p>In this study, we will present you with audio and visual representations
        of rhythmic patterns and record how precisely people can perceive them.
        We will also ask for your level of education and experience with music
        and visualization. This data will be analyzed and published in
        summarized, anonymized form.</p> <p>For more details, you can read the following documents:
        <a href="consent.pdf">consent.pdf</a>,
        <a href="privacy.pdf">privacy.pdf</a>.</p> <p>By clicking <i>next step</i> you consent to participating in this study and
        data collection.</p> <p>If you do not consent, click <i>I do not consent</i> below, you then cannot
        participate in this study.</p> <a href="https://app.prolific.com/submissions/complete?cc=CLB832WS"><button>I do not consent and will not participate</button></a>`},m(n,i){X(n,e,i)},d(n){n&&V(e)}}}function Kd(t){let e,n,i,r,o,a,l,f,s;return r=new KM({props:{pattern:[.1,.6,1.1],cachedAudio:t[3]}}),{c(){e=M("div"),n=M("p"),n.textContent=`To make sure that the audio works for you, please click play. Please set
        the audio volume to a comfortable level that allows you to hear this
        pattern clearly.`,i=D(),ct(r.$$.fragment),o=D(),a=M("p"),a.textContent="If you cannot hear anything, you cannot participate in this study.",l=D(),f=M("a"),f.innerHTML="<button>I cannot hear the audio and will not participate in this study</button>",R(f,"href","https://app.prolific.com/submissions/complete?cc=CH9I2X6E")},m(u,c){X(u,e,c),y(e,n),y(e,i),st(r,e,null),y(e,o),y(e,a),y(e,l),y(e,f),s=!0},p(u,c){const h={};c[0]&8&&(h.cachedAudio=u[3]),r.$set(h)},i(u){s||(H(r.$$.fragment,u),s=!0)},o(u){J(r.$$.fragment,u),s=!1},d(u){u&&V(e),ut(r)}}}function Qd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b;return{c(){e=M("div"),n=M("p"),n.textContent="Please click + or - until this rectangle has the size of a credit card.",i=D(),r=M("p"),o=M("button"),o.textContent="+",a=D(),l=M("button"),l.textContent="-",f=D(),s=If("svg"),u=If("rect"),m=D(),g=M("p"),g.textContent=`Please also set your screen brightness to comfortable levels and avoid
        sunlight or artificial light reflecting from your screen.`,R(u,"width",c=t[0]*.52),R(u,"height",h=t[17]*2),R(u,"fill","#ccc"),R(u,"rx","8"),R(s,"width",p=t[0]*.52+"px"),R(s,"height",d=t[17]*2+"px")},m(v,w){X(v,e,w),y(e,n),y(e,i),y(e,r),y(r,o),y(r,a),y(r,l),y(e,f),y(e,s),y(s,u),y(e,m),y(e,g),_||(b=[gt(o,"click",t[23]),gt(l,"click",t[24])],_=!0)},p(v,w){w[0]&1&&c!==(c=v[0]*.52)&&R(u,"width",c),w[0]&131072&&h!==(h=v[17]*2)&&R(u,"height",h),w[0]&1&&p!==(p=v[0]*.52+"px")&&R(s,"width",p),w[0]&131072&&d!==(d=v[17]*2+"px")&&R(s,"height",d)},d(v){v&&V(e),_=!1,Ie(b)}}}function Jd(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b,v,w,x,k,S,T,A,F,C;return{c(){e=M("div"),n=M("label"),i=M("span"),i.textContent="Highest finished education (select the best fitting one):",r=D(),o=M("select"),a=M("option"),a.textContent="none",l=M("option"),l.textContent="high school",f=M("option"),f.textContent="bachelor",s=M("option"),s.textContent="master",u=M("option"),u.textContent="phd",c=D(),h=M("label"),p=M("span"),p.textContent=`Which music instruments do you play? Please separate by comma, if you
          do not play any, write 'none'.`,d=D(),m=M("input"),g=D(),_=M("label"),b=M("span"),b.textContent="For how many years do you roughly play it/them?",v=D(),w=M("input"),x=D(),k=M("label"),S=M("span"),S.textContent=`How many years of experience do you have with information
          visualization?`,T=D(),A=M("input"),a.__value="none",lt(a,a.__value),l.__value="highs",lt(l,l.__value),f.__value="bachelor",lt(f,f.__value),s.__value="master",lt(s,s.__value),u.__value="phd",lt(u,u.__value),t[7]===void 0&&fn(()=>t[25].call(o)),R(n,"class","svelte-1u8tzxr"),R(m,"type","text"),R(m,"placeholder","free text"),R(h,"class","svelte-1u8tzxr"),R(w,"type","number"),R(w,"min","0"),R(w,"step","1"),R(_,"class","svelte-1u8tzxr"),R(A,"type","number"),R(A,"min","0"),R(A,"step","1"),R(k,"class","svelte-1u8tzxr"),R(e,"class","demo-form svelte-1u8tzxr")},m(I,L){X(I,e,L),y(e,n),y(n,i),y(n,r),y(n,o),y(o,a),y(o,l),y(o,f),y(o,s),y(o,u),pe(o,t[7],!0),y(e,c),y(e,h),y(h,p),y(h,d),y(h,m),lt(m,t[8]),y(e,g),y(e,_),y(_,b),y(_,v),y(_,w),lt(w,t[9]),y(e,x),y(e,k),y(k,S),y(k,T),y(k,A),lt(A,t[10]),F||(C=[gt(o,"change",t[25]),gt(m,"input",t[26]),gt(w,"input",t[27]),gt(A,"input",t[28])],F=!0)},p(I,L){L[0]&128&&pe(o,I[7]),L[0]&256&&m.value!==I[8]&&lt(m,I[8]),L[0]&512&&_e(w.value)!==I[9]&&lt(w,I[9]),L[0]&1024&&_e(A.value)!==I[10]&&lt(A,I[10])},d(I){I&&V(e),F=!1,Ie(C)}}}function t0(t){let e,n,i,r,o=t[13]&&e0(t);return{c(){e=M("p"),e.innerHTML=`You will be presented with a sequence of six piano notes which should have
      equal distances in time. The <b>fourth note</b> might be played
      <b>too early or too late</b>, also affecting the ones after. This
      deviation will get smaller, but you always have to answer &quot;early&quot; or
      &quot;late&quot;.`,n=D(),o&&o.c(),i=Kn()},m(a,l){X(a,e,l),X(a,n,l),o&&o.m(a,l),X(a,i,l),r=!0},p(a,l){a[13]?o?(o.p(a,l),l[0]&8192&&H(o,1)):(o=e0(a),o.c(),H(o,1),o.m(i.parentNode,i)):o&&(Qt(),J(o,1,1,()=>{o=null}),Jt())},i(a){r||(H(o),r=!0)},o(a){J(o),r=!1},d(a){a&&(V(e),V(n),V(i)),o&&o.d(a)}}}function e0(t){let e,n,i=t[6]+1+"",r,o,a=t[4].length+"",l,f,s=t[12]+1+"",u,c,h,p,d,m,g;const _=[JM,QM],b=[];function v(w,x){return w[16]==="audio"?0:w[15]===!1?1:-1}return~(h=v(t))&&(p=b[h]=_[h](t)),{c(){e=M("p"),n=at("Test number "),r=at(i),o=at(" / "),l=at(a),f=at(", trial number "),u=at(s),c=D(),p&&p.c(),d=D(),m=M("p"),m.innerHTML=`Use the arrow keys on your keyboard: <b>left for early</b>,
        <b>right for late</b>.`},m(w,x){X(w,e,x),y(e,n),y(e,r),y(e,o),y(e,l),y(e,f),y(e,u),X(w,c,x),~h&&b[h].m(w,x),X(w,d,x),X(w,m,x),g=!0},p(w,x){(!g||x[0]&64)&&i!==(i=w[6]+1+"")&&Nt(r,i),(!g||x[0]&16)&&a!==(a=w[4].length+"")&&Nt(l,a),(!g||x[0]&4096)&&s!==(s=w[12]+1+"")&&Nt(u,s);let k=h;h=v(w),h===k?~h&&b[h].p(w,x):(p&&(Qt(),J(b[k],1,1,()=>{b[k]=null}),Jt()),~h?(p=b[h],p?p.p(w,x):(p=b[h]=_[h](w),p.c()),H(p,1),p.m(d.parentNode,d)):p=null)},i(w){g||(H(p),g=!0)},o(w){J(p),g=!1},d(w){w&&(V(e),V(c),V(d),V(m)),~h&&b[h].d(w)}}}function QM(t){let e,n,i,r;const o=[iS,nS,eS,tS],a=[];function l(f,s){return f[16]==="waveform"?0:f[16]==="tick"?1:f[16]==="bar"?2:f[16]==="color"?3:-1}return~(e=l(t))&&(n=a[e]=o[e](t)),{c(){n&&n.c(),i=Kn()},m(f,s){~e&&a[e].m(f,s),X(f,i,s),r=!0},p(f,s){let u=e;e=l(f),e===u?~e&&a[e].p(f,s):(n&&(Qt(),J(a[u],1,1,()=>{a[u]=null}),Jt()),~e?(n=a[e],n?n.p(f,s):(n=a[e]=o[e](f),n.c()),H(n,1),n.m(i.parentNode,i)):n=null)},i(f){r||(H(n),r=!0)},o(f){J(n),r=!1},d(f){f&&V(i),~e&&a[e].d(f)}}}function JM(t){let e,n,i,r;return i=new XM({props:{pattern:[...t[1].slice(0,t[1].length-1),t[1].at(-1)+Math.random()*1e-4],cachedAudio:t[3],currentTrialNumber:t[12]}}),{c(){e=M("div"),e.innerHTML=`Listen to the audio, the forth note comes either too soon or too late.
          Press <i>p</i> or click <i>play</i> to replay the audio, you can do this
          is often as you like.`,n=D(),ct(i.$$.fragment)},m(o,a){X(o,e,a),X(o,n,a),st(i,o,a),r=!0},p(o,a){const l={};a[0]&2&&(l.pattern=[...o[1].slice(0,o[1].length-1),o[1].at(-1)+Math.random()*1e-4]),a[0]&8&&(l.cachedAudio=o[3]),a[0]&4096&&(l.currentTrialNumber=o[12]),i.$set(l)},i(o){r||(H(i.$$.fragment,o),r=!0)},o(o){J(i.$$.fragment,o),r=!1},d(o){o&&(V(e),V(n)),ut(i,o)}}}function tS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Yn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Yn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Yn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The color chart shows the size of the gaps between notes in the
            rectangles darkness (example: color at 2 shows the gap between the
            first and second note). Look at the third bar, it is either brigher
            (early) or darker (late) than the others.`,n=D(),i=M("div"),ct(r.$$.fragment),o=D(),ct(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ct(h.$$.fragment),R(f,"class","svelte-1u8tzxr"),R(u,"class","svelte-1u8tzxr"),R(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),st(r,i,null),y(i,o),st(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),st(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){J(r.$$.fragment,d),J(a.$$.fragment,d),J(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ut(r),ut(a),ut(h,d)}}}function eS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Wn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new Wn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new Wn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`The bar chart shows the size of the gaps between notes in the bars'
            height (example: the bar at 2 shows the gap between the first and
            second note). Look at the third bar, it is either lower (early) or
            higher (late) than the others.`,n=D(),i=M("div"),ct(r.$$.fragment),o=D(),ct(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ct(h.$$.fragment),R(f,"class","svelte-1u8tzxr"),R(u,"class","svelte-1u8tzxr"),R(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),st(r,i,null),y(i,o),st(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),st(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){J(r.$$.fragment,d),J(a.$$.fragment,d),J(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ut(r),ut(a),ut(h,d)}}}function nS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new qn({props:{pattern:t[18],width:t[0]/2,height:t[17]/2}}),a=new qn({props:{pattern:t[19],width:t[0]/2,height:t[17]/2}}),h=new qn({props:{pattern:t[1],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`Look at the peaks, the gap between the third and forth tick is
            either smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ct(r.$$.fragment),o=D(),ct(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ct(h.$$.fragment),R(f,"class","svelte-1u8tzxr"),R(u,"class","svelte-1u8tzxr"),R(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),st(r,i,null),y(i,o),st(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),st(h,d,m),p=!0},p(d,m){const g={};m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){J(r.$$.fragment,d),J(a.$$.fragment,d),J(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ut(r),ut(a),ut(h,d)}}}function iS(t){let e,n,i,r,o,a,l,f,s,u,c,h,p;return r=new Hn({props:{pattern:t[18],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),a=new Hn({props:{pattern:t[19],audioFile:t[2],cachedAudio:t[3],width:t[0]/2,height:t[17]/2}}),h=new Hn({props:{pattern:t[1],audioFile:t[2],cachedAudio:t[3],width:t[0],height:t[17]}}),{c(){e=M("div"),e.textContent=`This is a waveform of the audio, showing loudness over time. Look at
            the peaks, the gap between the third and forth peaks is either
            smaller (early) or larger (late) than the other gaps.`,n=D(),i=M("div"),ct(r.$$.fragment),o=D(),ct(a.$$.fragment),l=D(),f=M("div"),f.textContent="Example for early",s=D(),u=M("div"),u.textContent="Example for late",c=D(),ct(h.$$.fragment),R(f,"class","svelte-1u8tzxr"),R(u,"class","svelte-1u8tzxr"),R(i,"class","vis-example svelte-1u8tzxr")},m(d,m){X(d,e,m),X(d,n,m),X(d,i,m),st(r,i,null),y(i,o),st(a,i,null),y(i,l),y(i,f),y(i,s),y(i,u),X(d,c,m),st(h,d,m),p=!0},p(d,m){const g={};m[0]&4&&(g.audioFile=d[2]),m[0]&8&&(g.cachedAudio=d[3]),m[0]&1&&(g.width=d[0]/2),m[0]&131072&&(g.height=d[17]/2),r.$set(g);const _={};m[0]&4&&(_.audioFile=d[2]),m[0]&8&&(_.cachedAudio=d[3]),m[0]&1&&(_.width=d[0]/2),m[0]&131072&&(_.height=d[17]/2),a.$set(_);const b={};m[0]&2&&(b.pattern=d[1]),m[0]&4&&(b.audioFile=d[2]),m[0]&8&&(b.cachedAudio=d[3]),m[0]&1&&(b.width=d[0]),m[0]&131072&&(b.height=d[17]),h.$set(b)},i(d){p||(H(r.$$.fragment,d),H(a.$$.fragment,d),H(h.$$.fragment,d),p=!0)},o(d){J(r.$$.fragment,d),J(a.$$.fragment,d),J(h.$$.fragment,d),p=!1},d(d){d&&(V(e),V(n),V(i),V(c)),ut(r),ut(a),ut(h,d)}}}function n0(t){let e,n,i,r,o,a;return{c(){e=M("div"),n=M("label"),i=at(`Do you have any final feedback/comments?
        `),r=M("textarea")},m(l,f){X(l,e,f),y(e,n),y(n,i),y(n,r),lt(r,t[11]),o||(a=gt(r,"input",t[29]),o=!0)},p(l,f){f[0]&2048&&lt(r,l[11])},d(l){l&&V(e),o=!1,a()}}}function i0(t){let e,n,i;return{c(){e=M("div"),e.textContent="Thanks for participating!",n=D(),i=M("a"),i.textContent="click here to get your compensation",R(i,"href","https://app.prolific.com/submissions/complete?cc=CQ9EMXZQ")},m(r,o){X(r,e,o),X(r,n,o),X(r,i,o)},d(r){r&&(V(e),V(n),V(i))}}}function r0(t){let e,n,i;return{c(){e=M("button"),e.textContent="next step",R(e,"class","next-btn svelte-1u8tzxr")},m(r,o){X(r,e,o),n||(i=gt(e,"click",t[20]),n=!0)},p:wt,d(r){r&&V(e),n=!1,i()}}}function rS(t){let e,n,i,r,o,a,l,f,s,u=t[5]==="consent"&&Zd(),c=t[5]==="start1"&&Kd(t),h=t[5]==="start2"&&Qd(t),p=t[5]==="demo"&&Jd(t),d=t[5]==="tests"&&t0(t),m=t[5]==="feedback"&&n0(t),g=t[5]==="done"&&i0(),_=!t[14]&&t[5]!=="done"&&r0(t);return{c(){e=M("main"),u&&u.c(),n=D(),c&&c.c(),i=D(),h&&h.c(),r=D(),p&&p.c(),o=D(),d&&d.c(),a=D(),m&&m.c(),l=D(),g&&g.c(),f=D(),_&&_.c(),R(e,"class","svelte-1u8tzxr")},m(b,v){X(b,e,v),u&&u.m(e,null),y(e,n),c&&c.m(e,null),y(e,i),h&&h.m(e,null),y(e,r),p&&p.m(e,null),y(e,o),d&&d.m(e,null),y(e,a),m&&m.m(e,null),y(e,l),g&&g.m(e,null),y(e,f),_&&_.m(e,null),s=!0},p(b,v){b[5]==="consent"?u||(u=Zd(),u.c(),u.m(e,n)):u&&(u.d(1),u=null),b[5]==="start1"?c?(c.p(b,v),v[0]&32&&H(c,1)):(c=Kd(b),c.c(),H(c,1),c.m(e,i)):c&&(Qt(),J(c,1,1,()=>{c=null}),Jt()),b[5]==="start2"?h?h.p(b,v):(h=Qd(b),h.c(),h.m(e,r)):h&&(h.d(1),h=null),b[5]==="demo"?p?p.p(b,v):(p=Jd(b),p.c(),p.m(e,o)):p&&(p.d(1),p=null),b[5]==="tests"?d?(d.p(b,v),v[0]&32&&H(d,1)):(d=t0(b),d.c(),H(d,1),d.m(e,a)):d&&(Qt(),J(d,1,1,()=>{d=null}),Jt()),b[5]==="feedback"?m?m.p(b,v):(m=n0(b),m.c(),m.m(e,l)):m&&(m.d(1),m=null),b[5]==="done"?g||(g=i0(),g.c(),g.m(e,f)):g&&(g.d(1),g=null),!b[14]&&b[5]!=="done"?_?_.p(b,v):(_=r0(b),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},i(b){s||(H(c),H(d),s=!0)},o(b){J(c),J(d),s=!1},d(b){b&&V(e),u&&u.d(),c&&c.d(),h&&h.d(),p&&p.d(),d&&d.d(),m&&m.d(),g&&g.d(),_&&_.d()}}}const oS="/store";let o0=.5;const Lf=20;let aS=6,lS=!0,fS=0;function sS(t,e,n){let i,r,o=sa(window,"PROLIFIC_PID"),a=sa(window,"STUDY_ID"),l=sa(window,"SESSION_ID");const f=["./FluidR3_GM_acoustic_grand_piano-mp3_A4.mp3","./MailboxBadgerPublicDomainDrumSamples27LiveDrumsHiHat.mp3"];let s=f[0],u;Ds(s).then(Et=>{n(3,u=Et),console.log("Audio fetched",Et)});let c=[{stimulus:"audio",audioFile:f[0]},{stimulus:"waveform",audioFile:f[0]},{stimulus:"color"}];const h=[0,.5,1,1.4,1.9,2.4],p=[0,.5,1,1.6,2.1,2.6];let d="consent",m=0,g,_="",b="",v=0,w=0,x="",k=0,S,T={},A=[],F,C,I=!1,L=!1,G=!1,$="tick",B=Lf,z=3,Z=600,Q=[],W=[],U=0;const Y=[];pi(()=>{document.querySelector("html").addEventListener("keyup",O)});const K=()=>{C=new Dt({ratio:{firstVal:Lf,down:2,up:1,stepSizeDown:1,stepSizeUp:1*.5488,limits:[0,Lf],direction:-1,reversalLimit:5,verbosity:0}}),C.init()};function ft(){d==="consent"?n(5,d="start1"):d==="start1"?n(5,d="start2"):d==="start2"?(n(4,c=Ls(c)),n(5,d="demo")):d==="demo"?_==""||b==""?alert("please fill the form first"):(n(5,d="tests"),n(6,m=0)):d==="tests"?(P(),m<c.length?(n(16,$=c[m].stimulus),n(2,s=c[m].audioFile),et()):n(5,d="feedback")):d==="feedback"&&(P(),n(5,d="done"))}function et(){K(),n(12,k=0),S=0,F=0,n(13,I=!0),W=[],A=[],g=new Date,j()}function j(){console.log("Starting trial "+k),T={},n(14,L=!0),q()}function q(){let bt=Math.round(C.getLast("ratio"));bt=Math.random()<.5?bt:-bt,T.deviation=bt,n(21,B=bt),T.startTime=new Date,n(15,G=!0),window.setTimeout(()=>{n(15,G=!1)},1e3)}function N(Et){if(!L)return;n(14,L=!1),T.decisionChoice=Et,T.errorCode=0,T.timeTaken=(new Date-T.startTime)/1e3;const bt=F;(T.decisionChoice==0&&T.deviation<0||T.decisionChoice==1&&T.deviation>0)&&T.errorCode==0&&F++,T.errorCode==0&&(C.next(bt!=F),A[A.length]=T),T.errorCode==0&&S++,n(12,k++,k),C.reversalLimitReached("ratio")?E():j()}function E(){n(13,I=!1),tt(),W=[],U=C.getFinalVal("ratio");for(let bt=0;bt<A.length;bt++)W[bt]=A[bt].deviation;console.log(W);const Et=new Date;Y.push({encoding:$,audioFile:s,final:U,data:W,score:F,testNumber:m,trialCount:k+1,trials:A,validTrialCount:S+1,testTimeSeconds:(Et-g)/1e3}),n(6,m++,m)}function O(Et){if(!G)switch(Et.key){case"ArrowLeft":L&&N(0);break;case"ArrowRight":L&&N(1);break;case"PageDown":!L&&d!=="done"&&ft()}}function tt(){`${F}`,k+1,`${(F/(k+1)*100).toFixed(1)}${C.getFinalVal("ratio")}`}function P(){const Et={studyStep:d,demographics:{partID:o,studyID:a,sessionID:l,partEduation:_,partMusicInstr:b,partMusicInstrYears:v,partVisExperienceYears:w,partFeedback:x,visWidth:Z},date:new Date().toISOString(),tests:Y};console.log("saving data",Et);const bt=JSON.stringify(Et,void 0,2);fetch(oS,{method:"POST",headers:{"Content-Type":"application/json"},body:bt}).then(Wt=>{console.log("Data saved:",Wt)})}const pt=()=>n(0,Z*=1.05),rt=()=>n(0,Z*=.95);function mt(){_=di(this),n(7,_)}function nt(){b=this.value,n(8,b)}function ht(){v=_e(this.value),n(9,v)}function kt(){w=_e(this.value),n(10,w)}function ue(){x=this.value,n(11,x)}return t.$$.update=()=>{t.$$.dirty[0]&2097152&&n(22,i=B/100*o0),t.$$.dirty[0]&1&&n(17,r=Z/6),t.$$.dirty[0]&4194306&&(n(1,Q=Hi(aS,o0,z,i,lS,fS)),console.log("generated pattern",Q))},[Z,Q,s,u,c,d,m,_,b,v,w,x,k,I,L,G,$,r,h,p,ft,B,i,pt,rt,mt,nt,ht,kt,ue]}class uS extends Pt{constructor(e){super(),Rt(this,e,sS,rS,It,{},null,[-1,-1])}}function a0(t){let e,n,i,r,o,a,l,f,s,u,c,h,p,d,m,g,_,b;return{c(){e=M("div"),n=M("button"),n.textContent="Playground",i=D(),r=M("button"),r.textContent="Examples",o=D(),a=M("button"),a.textContent="Study",l=D(),f=M("button"),f.textContent="Analysis",s=D(),u=M("button"),u.textContent="Study (variance)",c=D(),h=M("button"),h.textContent="Analysis (variance)",p=D(),d=M("button"),d.textContent="Study (Prolific)",m=D(),g=M("button"),g.textContent="Analysis (Prolific)"},m(v,w){X(v,e,w),y(e,n),y(e,i),y(e,r),y(e,o),y(e,a),y(e,l),y(e,f),y(e,s),y(e,u),y(e,c),y(e,h),y(e,p),y(e,d),y(e,m),y(e,g),_||(b=[gt(n,"click",t[1]),gt(r,"click",t[2]),gt(a,"click",t[3]),gt(f,"click",t[4]),gt(u,"click",t[5]),gt(h,"click",t[6]),gt(d,"click",t[7]),gt(g,"click",t[8])],_=!0)},p:wt,d(v){v&&V(e),_=!1,Ie(b)}}}function cS(t){let e,n;return e=new qM({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function hS(t){let e,n;return e=new uS({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function dS(t){let e,n;return e=new SM({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function pS(t){let e,n;return e=new fM({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function mS(t){let e,n;return e=new bM({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function gS(t){let e,n;return e=new Zk({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function bS(t){let e,n;return e=new HM({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function _S(t){let e,n;return e=new Pk({}),{c(){ct(e.$$.fragment)},m(i,r){st(e,i,r),n=!0},i(i){n||(H(e.$$.fragment,i),n=!0)},o(i){J(e.$$.fragment,i),n=!1},d(i){ut(e,i)}}}function yS(t){let e,n,i,r,o,a,l,f=t[0]!=="study_prolific"&&a0(t);const s=[_S,bS,gS,mS,pS,dS,hS,cS],u=[];function c(h,p){return h[0]==="playground"?0:h[0]==="examples"?1:h[0]==="study"?2:h[0]==="analysis"?3:h[0]==="study_variance"?4:h[0]==="analysis_variance"?5:h[0]==="study_prolific"?6:h[0]==="analysis_prolific"?7:-1}return~(o=c(t))&&(a=u[o]=s[o](t)),{c(){e=M("main"),n=M("h1"),n.textContent="Rhythm Error Sensitivity Study",i=D(),f&&f.c(),r=D(),a&&a.c()},m(h,p){X(h,e,p),y(e,n),y(e,i),f&&f.m(e,null),y(e,r),~o&&u[o].m(e,null),l=!0},p(h,[p]){h[0]!=="study_prolific"?f?f.p(h,p):(f=a0(h),f.c(),f.m(e,r)):f&&(f.d(1),f=null);let d=o;o=c(h),o!==d&&(a&&(Qt(),J(u[d],1,1,()=>{u[d]=null}),Jt()),~o?(a=u[o],a||(a=u[o]=s[o](h),a.c()),H(a,1),a.m(e,null)):a=null)},i(h){l||(H(a),l=!0)},o(h){J(a),l=!1},d(h){h&&V(e),f&&f.d(),~o&&u[o].d()}}}function wS(t,e,n){let i=sa(window,"p")??"study_prolific";return[i,()=>n(0,i="playground"),()=>n(0,i="examples"),()=>n(0,i="study"),()=>n(0,i="analysis"),()=>n(0,i="study_variance"),()=>n(0,i="analysis_variance"),()=>n(0,i="study_prolific"),()=>n(0,i="analysis_prolific")]}class vS extends Pt{constructor(e){super(),Rt(this,e,wS,yS,It,{})}}new vS({target:document.getElementById("app")});export{c0 as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-mb9FGVdr.js","assets/utilities-Qt1M6AFN.js","assets/index-TlZAmOeR.js","assets/index-rWna8wWW.js","assets/index-ZfzZwU7r.js","assets/index-0kTA9uRG.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}